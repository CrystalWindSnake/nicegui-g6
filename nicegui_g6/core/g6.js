const LP = Vue.defineComponent
const NP = Vue.ref
const PP = Vue.onMounted
const kP = Vue.openBlock
const RP = Vue.createElementBlock
function BP(r, e) {
  for (var t = 0; t < e.length; t++) {
    const n = e[t];
    if (typeof n != "string" && !Array.isArray(n)) {
      for (const a in n)
        if (a !== "default" && !(a in r)) {
          const i = Object.getOwnPropertyDescriptor(n, a);
          i && Object.defineProperty(r, a, i.get ? i : {
            enumerable: !0,
            get: () => n[a]
          });
        }
    }
  }
  return Object.freeze(Object.defineProperty(r, Symbol.toStringTag, { value: "Module" }));
}
const Hg = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get Base() {
    return Ma;
  },
  get Circle() {
    return f8;
  },
  get Ellipse() {
    return l8;
  },
  get Image() {
    return c8;
  },
  get Line() {
    return h8;
  },
  get Marker() {
    return v8;
  },
  get Path() {
    return Xy;
  },
  get Polygon() {
    return x8;
  },
  get Polyline() {
    return w8;
  },
  get Rect() {
    return S8;
  },
  get Text() {
    return A8;
  }
}, Symbol.toStringTag, { value: "Module" })), Kg = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get Base() {
    return ua;
  },
  get Circle() {
    return O8;
  },
  get Dom() {
    return D8;
  },
  get Ellipse() {
    return L8;
  },
  get Image() {
    return N8;
  },
  get Line() {
    return P8;
  },
  get Marker() {
    return k8;
  },
  get Path() {
    return R8;
  },
  get Polygon() {
    return B8;
  },
  get Polyline() {
    return F8;
  },
  get Rect() {
    return z8;
  },
  get Text() {
    return W8;
  }
}, Symbol.toStringTag, { value: "Module" }));
var g0 = function(r, e) {
  return g0 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, n) {
    t.__proto__ = n;
  } || function(t, n) {
    for (var a in n)
      Object.prototype.hasOwnProperty.call(n, a) && (t[a] = n[a]);
  }, g0(r, e);
};
function Ut(r, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");
  g0(r, e);
  function t() {
    this.constructor = r;
  }
  r.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());
}
var B = function() {
  return B = Object.assign || function(e) {
    for (var t, n = 1, a = arguments.length; n < a; n++) {
      t = arguments[n];
      for (var i in t)
        Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, B.apply(this, arguments);
};
function tn(r, e) {
  var t = {};
  for (var n in r)
    Object.prototype.hasOwnProperty.call(r, n) && e.indexOf(n) < 0 && (t[n] = r[n]);
  if (r != null && typeof Object.getOwnPropertySymbols == "function")
    for (var a = 0, n = Object.getOwnPropertySymbols(r); a < n.length; a++)
      e.indexOf(n[a]) < 0 && Object.prototype.propertyIsEnumerable.call(r, n[a]) && (t[n[a]] = r[n[a]]);
  return t;
}
function nM(r, e, t, n) {
  var a = arguments.length, i = a < 3 ? e : n === null ? n = Object.getOwnPropertyDescriptor(e, t) : n, o;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
    i = Reflect.decorate(r, e, t, n);
  else
    for (var s = r.length - 1; s >= 0; s--)
      (o = r[s]) && (i = (a < 3 ? o(i) : a > 3 ? o(e, t, i) : o(e, t)) || i);
  return a > 3 && i && Object.defineProperty(e, t, i), i;
}
function aM(r, e) {
  return function(t, n) {
    e(t, n, r);
  };
}
function FP(r, e, t, n, a, i) {
  function o(y) {
    if (y !== void 0 && typeof y != "function")
      throw new TypeError("Function expected");
    return y;
  }
  for (var s = n.kind, u = s === "getter" ? "get" : s === "setter" ? "set" : "value", f = !e && r ? n.static ? r : r.prototype : null, l = e || (f ? Object.getOwnPropertyDescriptor(f, n.name) : {}), c, h = !1, d = t.length - 1; d >= 0; d--) {
    var v = {};
    for (var p in n)
      v[p] = p === "access" ? {} : n[p];
    for (var p in n.access)
      v.access[p] = n.access[p];
    v.addInitializer = function(y) {
      if (h)
        throw new TypeError("Cannot add initializers after decoration has completed");
      i.push(o(y || null));
    };
    var g = (0, t[d])(s === "accessor" ? { get: l.get, set: l.set } : l[u], v);
    if (s === "accessor") {
      if (g === void 0)
        continue;
      if (g === null || typeof g != "object")
        throw new TypeError("Object expected");
      (c = o(g.get)) && (l.get = c), (c = o(g.set)) && (l.set = c), (c = o(g.init)) && a.unshift(c);
    } else
      (c = o(g)) && (s === "field" ? a.unshift(c) : l[u] = c);
  }
  f && Object.defineProperty(f, n.name, l), h = !0;
}
function GP(r, e, t) {
  for (var n = arguments.length > 2, a = 0; a < e.length; a++)
    t = n ? e[a].call(r, t) : e[a].call(r);
  return n ? t : void 0;
}
function zP(r) {
  return typeof r == "symbol" ? r : "".concat(r);
}
function UP(r, e, t) {
  return typeof e == "symbol" && (e = e.description ? "[".concat(e.description, "]") : ""), Object.defineProperty(r, "name", { configurable: !0, value: t ? "".concat(t, " ", e) : e });
}
function iM(r, e) {
  if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
    return Reflect.metadata(r, e);
}
function zn(r, e, t, n) {
  function a(i) {
    return i instanceof t ? i : new t(function(o) {
      o(i);
    });
  }
  return new (t || (t = Promise))(function(i, o) {
    function s(l) {
      try {
        f(n.next(l));
      } catch (c) {
        o(c);
      }
    }
    function u(l) {
      try {
        f(n.throw(l));
      } catch (c) {
        o(c);
      }
    }
    function f(l) {
      l.done ? i(l.value) : a(l.value).then(s, u);
    }
    f((n = n.apply(r, e || [])).next());
  });
}
function Un(r, e) {
  var t = { label: 0, sent: function() {
    if (i[0] & 1)
      throw i[1];
    return i[1];
  }, trys: [], ops: [] }, n, a, i, o;
  return o = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function s(f) {
    return function(l) {
      return u([f, l]);
    };
  }
  function u(f) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; o && (o = 0, f[0] && (t = 0)), t; )
      try {
        if (n = 1, a && (i = f[0] & 2 ? a.return : f[0] ? a.throw || ((i = a.return) && i.call(a), 0) : a.next) && !(i = i.call(a, f[1])).done)
          return i;
        switch (a = 0, i && (f = [f[0] & 2, i.value]), f[0]) {
          case 0:
          case 1:
            i = f;
            break;
          case 4:
            return t.label++, { value: f[1], done: !1 };
          case 5:
            t.label++, a = f[1], f = [0];
            continue;
          case 7:
            f = t.ops.pop(), t.trys.pop();
            continue;
          default:
            if (i = t.trys, !(i = i.length > 0 && i[i.length - 1]) && (f[0] === 6 || f[0] === 2)) {
              t = 0;
              continue;
            }
            if (f[0] === 3 && (!i || f[1] > i[0] && f[1] < i[3])) {
              t.label = f[1];
              break;
            }
            if (f[0] === 6 && t.label < i[1]) {
              t.label = i[1], i = f;
              break;
            }
            if (i && t.label < i[2]) {
              t.label = i[2], t.ops.push(f);
              break;
            }
            i[2] && t.ops.pop(), t.trys.pop();
            continue;
        }
        f = e.call(r, t);
      } catch (l) {
        f = [6, l], a = 0;
      } finally {
        n = i = 0;
      }
    if (f[0] & 5)
      throw f[1];
    return { value: f[0] ? f[1] : void 0, done: !0 };
  }
}
var rd = Object.create ? function(r, e, t, n) {
  n === void 0 && (n = t);
  var a = Object.getOwnPropertyDescriptor(e, t);
  (!a || ("get" in a ? !e.__esModule : a.writable || a.configurable)) && (a = { enumerable: !0, get: function() {
    return e[t];
  } }), Object.defineProperty(r, n, a);
} : function(r, e, t, n) {
  n === void 0 && (n = t), r[n] = e[t];
};
function oM(r, e) {
  for (var t in r)
    t !== "default" && !Object.prototype.hasOwnProperty.call(e, t) && rd(e, r, t);
}
function dh(r) {
  var e = typeof Symbol == "function" && Symbol.iterator, t = e && r[e], n = 0;
  if (t)
    return t.call(r);
  if (r && typeof r.length == "number")
    return {
      next: function() {
        return r && n >= r.length && (r = void 0), { value: r && r[n++], done: !r };
      }
    };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function qg(r, e) {
  var t = typeof Symbol == "function" && r[Symbol.iterator];
  if (!t)
    return r;
  var n = t.call(r), a, i = [], o;
  try {
    for (; (e === void 0 || e-- > 0) && !(a = n.next()).done; )
      i.push(a.value);
  } catch (s) {
    o = { error: s };
  } finally {
    try {
      a && !a.done && (t = n.return) && t.call(n);
    } finally {
      if (o)
        throw o.error;
    }
  }
  return i;
}
function sM() {
  for (var r = [], e = 0; e < arguments.length; e++)
    r = r.concat(qg(arguments[e]));
  return r;
}
function Zg() {
  for (var r = 0, e = 0, t = arguments.length; e < t; e++)
    r += arguments[e].length;
  for (var n = Array(r), a = 0, e = 0; e < t; e++)
    for (var i = arguments[e], o = 0, s = i.length; o < s; o++, a++)
      n[a] = i[o];
  return n;
}
function Yn(r, e, t) {
  if (t || arguments.length === 2)
    for (var n = 0, a = e.length, i; n < a; n++)
      (i || !(n in e)) && (i || (i = Array.prototype.slice.call(e, 0, n)), i[n] = e[n]);
  return r.concat(i || Array.prototype.slice.call(e));
}
function qs(r) {
  return this instanceof qs ? (this.v = r, this) : new qs(r);
}
function uM(r, e, t) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var n = t.apply(r, e || []), a, i = [];
  return a = {}, o("next"), o("throw"), o("return"), a[Symbol.asyncIterator] = function() {
    return this;
  }, a;
  function o(h) {
    n[h] && (a[h] = function(d) {
      return new Promise(function(v, p) {
        i.push([h, d, v, p]) > 1 || s(h, d);
      });
    });
  }
  function s(h, d) {
    try {
      u(n[h](d));
    } catch (v) {
      c(i[0][3], v);
    }
  }
  function u(h) {
    h.value instanceof qs ? Promise.resolve(h.value.v).then(f, l) : c(i[0][2], h);
  }
  function f(h) {
    s("next", h);
  }
  function l(h) {
    s("throw", h);
  }
  function c(h, d) {
    h(d), i.shift(), i.length && s(i[0][0], i[0][1]);
  }
}
function fM(r) {
  var e, t;
  return e = {}, n("next"), n("throw", function(a) {
    throw a;
  }), n("return"), e[Symbol.iterator] = function() {
    return this;
  }, e;
  function n(a, i) {
    e[a] = r[a] ? function(o) {
      return (t = !t) ? { value: qs(r[a](o)), done: !1 } : i ? i(o) : o;
    } : i;
  }
}
function lM(r) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var e = r[Symbol.asyncIterator], t;
  return e ? e.call(r) : (r = typeof dh == "function" ? dh(r) : r[Symbol.iterator](), t = {}, n("next"), n("throw"), n("return"), t[Symbol.asyncIterator] = function() {
    return this;
  }, t);
  function n(i) {
    t[i] = r[i] && function(o) {
      return new Promise(function(s, u) {
        o = r[i](o), a(s, u, o.done, o.value);
      });
    };
  }
  function a(i, o, s, u) {
    Promise.resolve(u).then(function(f) {
      i({ value: f, done: s });
    }, o);
  }
}
function cM(r, e) {
  return Object.defineProperty ? Object.defineProperty(r, "raw", { value: e }) : r.raw = e, r;
}
var jP = Object.create ? function(r, e) {
  Object.defineProperty(r, "default", { enumerable: !0, value: e });
} : function(r, e) {
  r.default = e;
};
function hM(r) {
  if (r && r.__esModule)
    return r;
  var e = {};
  if (r != null)
    for (var t in r)
      t !== "default" && Object.prototype.hasOwnProperty.call(r, t) && rd(e, r, t);
  return jP(e, r), e;
}
function dM(r) {
  return r && r.__esModule ? r : { default: r };
}
function vM(r, e, t, n) {
  if (t === "a" && !n)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof e == "function" ? r !== e || !n : !e.has(r))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return t === "m" ? n : t === "a" ? n.call(r) : n ? n.value : e.get(r);
}
function pM(r, e, t, n, a) {
  if (n === "m")
    throw new TypeError("Private method is not writable");
  if (n === "a" && !a)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof e == "function" ? r !== e || !a : !e.has(r))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return n === "a" ? a.call(r, t) : a ? a.value = t : e.set(r, t), t;
}
function gM(r, e) {
  if (e === null || typeof e != "object" && typeof e != "function")
    throw new TypeError("Cannot use 'in' operator on non-object");
  return typeof r == "function" ? e === r : r.has(e);
}
function yM(r, e, t) {
  if (e != null) {
    if (typeof e != "object" && typeof e != "function")
      throw new TypeError("Object expected.");
    var n;
    if (t) {
      if (!Symbol.asyncDispose)
        throw new TypeError("Symbol.asyncDispose is not defined.");
      n = e[Symbol.asyncDispose];
    }
    if (n === void 0) {
      if (!Symbol.dispose)
        throw new TypeError("Symbol.dispose is not defined.");
      n = e[Symbol.dispose];
    }
    if (typeof n != "function")
      throw new TypeError("Object not disposable.");
    r.stack.push({ value: e, dispose: n, async: t });
  } else
    t && r.stack.push({ async: !0 });
  return e;
}
var $P = typeof SuppressedError == "function" ? SuppressedError : function(r, e, t) {
  var n = new Error(t);
  return n.name = "SuppressedError", n.error = r, n.suppressed = e, n;
};
function mM(r) {
  function e(n) {
    r.error = r.hasError ? new $P(n, r.error, "An error was suppressed during disposal.") : n, r.hasError = !0;
  }
  function t() {
    for (; r.stack.length; ) {
      var n = r.stack.pop();
      try {
        var a = n.dispose && n.dispose.call(n.value);
        if (n.async)
          return Promise.resolve(a).then(t, function(i) {
            return e(i), t();
          });
      } catch (i) {
        e(i);
      }
    }
    if (r.hasError)
      throw r.error;
  }
  return t();
}
const WP = {
  __extends: Ut,
  __assign: B,
  __rest: tn,
  __decorate: nM,
  __param: aM,
  __metadata: iM,
  __awaiter: zn,
  __generator: Un,
  __createBinding: rd,
  __exportStar: oM,
  __values: dh,
  __read: qg,
  __spread: sM,
  __spreadArrays: Zg,
  __spreadArray: Yn,
  __await: qs,
  __asyncGenerator: uM,
  __asyncDelegator: fM,
  __asyncValues: lM,
  __makeTemplateObject: cM,
  __importStar: hM,
  __importDefault: dM,
  __classPrivateFieldGet: vM,
  __classPrivateFieldSet: pM,
  __classPrivateFieldIn: gM,
  __addDisposableResource: yM,
  __disposeResources: mM
}, XP = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  __addDisposableResource: yM,
  get __assign() {
    return B;
  },
  __asyncDelegator: fM,
  __asyncGenerator: uM,
  __asyncValues: lM,
  __await: qs,
  __awaiter: zn,
  __classPrivateFieldGet: vM,
  __classPrivateFieldIn: gM,
  __classPrivateFieldSet: pM,
  __createBinding: rd,
  __decorate: nM,
  __disposeResources: mM,
  __esDecorate: FP,
  __exportStar: oM,
  __extends: Ut,
  __generator: Un,
  __importDefault: dM,
  __importStar: hM,
  __makeTemplateObject: cM,
  __metadata: iM,
  __param: aM,
  __propKey: zP,
  __read: qg,
  __rest: tn,
  __runInitializers: GP,
  __setFunctionName: UP,
  __spread: sM,
  __spreadArray: Yn,
  __spreadArrays: Zg,
  __values: dh,
  default: WP
}, Symbol.toStringTag, { value: "Module" }));
var Dn = function(r) {
  return r !== null && typeof r != "function" && isFinite(r.length);
}, vh = function(r, e) {
  return Dn(r) ? r.indexOf(e) > -1 : !1;
}, bM = function(r, e) {
  if (!Dn(r))
    return r;
  for (var t = [], n = 0; n < r.length; n++) {
    var a = r[n];
    e(a, n) && t.push(a);
  }
  return t;
}, VP = function(r, e) {
  return e === void 0 && (e = []), bM(r, function(t) {
    return !vh(e, t);
  });
}, YP = {}.toString, _a = function(r, e) {
  return YP.call(r) === "[object " + e + "]";
};
const Or = function(r) {
  return _a(r, "Function");
};
var Zt = function(r) {
  return r == null;
};
const bt = function(r) {
  return Array.isArray ? Array.isArray(r) : _a(r, "Array");
}, yn = function(r) {
  var e = typeof r;
  return r !== null && e === "object" || e === "function";
};
function Se(r, e) {
  if (r) {
    var t;
    if (bt(r))
      for (var n = 0, a = r.length; n < a && (t = e(r[n], n), t !== !1); n++)
        ;
    else if (yn(r)) {
      for (var i in r)
        if (r.hasOwnProperty(i) && (t = e(r[i], i), t === !1))
          break;
    }
  }
}
var EM = Object.keys ? function(r) {
  return Object.keys(r);
} : function(r) {
  var e = [];
  return Se(r, function(t, n) {
    Or(r) && n === "prototype" || e.push(n);
  }), e;
};
function xM(r, e) {
  var t = EM(e), n = t.length;
  if (Zt(r))
    return !n;
  for (var a = 0; a < n; a += 1) {
    var i = t[a];
    if (e[i] !== r[i] || !(i in r))
      return !1;
  }
  return !0;
}
var ph = function(r) {
  return typeof r == "object" && r !== null;
}, hn = function(r) {
  if (!ph(r) || !_a(r, "Object"))
    return !1;
  if (Object.getPrototypeOf(r) === null)
    return !0;
  for (var e = r; Object.getPrototypeOf(e) !== null; )
    e = Object.getPrototypeOf(e);
  return Object.getPrototypeOf(r) === e;
};
function HP(r, e) {
  if (!bt(r))
    return null;
  var t;
  if (Or(e) && (t = e), hn(e) && (t = function(a) {
    return xM(a, e);
  }), t) {
    for (var n = 0; n < r.length; n += 1)
      if (t(r[n]))
        return r[n];
  }
  return null;
}
function KP(r, e, t) {
  t === void 0 && (t = 0);
  for (var n = t; n < r.length; n++)
    if (e(r[n], n))
      return n;
  return -1;
}
var qP = function(r, e) {
  for (var t = null, n = 0; n < r.length; n++) {
    var a = r[n], i = a[e];
    if (!Zt(i)) {
      bt(i) ? t = i[0] : t = i;
      break;
    }
  }
  return t;
}, ZP = function(r) {
  if (!bt(r))
    return [];
  for (var e = [], t = 0; t < r.length; t++)
    e = e.concat(r[t]);
  return e;
}, wM = function(r, e) {
  if (e === void 0 && (e = []), !bt(r))
    e.push(r);
  else
    for (var t = 0; t < r.length; t += 1)
      wM(r[t], e);
  return e;
};
const Qa = function(r) {
  if (bt(r))
    return r.reduce(function(e, t) {
      return Math.max(e, t);
    }, r[0]);
}, Ja = function(r) {
  if (bt(r))
    return r.reduce(function(e, t) {
      return Math.min(e, t);
    }, r[0]);
};
var QP = function(r) {
  var e = r.filter(function(o) {
    return !isNaN(o);
  });
  if (!e.length)
    return {
      min: 0,
      max: 0
    };
  if (bt(r[0])) {
    for (var t = [], n = 0; n < r.length; n++)
      t = t.concat(r[n]);
    e = t;
  }
  var a = Qa(e), i = Ja(e);
  return {
    min: i,
    max: a
  };
}, _M = Array.prototype, JP = _M.splice, ek = _M.indexOf, tk = function(r) {
  for (var e = [], t = 1; t < arguments.length; t++)
    e[t - 1] = arguments[t];
  for (var n = 0; n < e.length; n++)
    for (var a = e[n], i = -1; (i = ek.call(r, a)) > -1; )
      JP.call(r, i, 1);
  return r;
}, rk = Array.prototype.splice, MM = function(e, t) {
  if (!Dn(e))
    return [];
  for (var n = e ? t.length : 0, a = n - 1; n--; ) {
    var i = void 0, o = t[n];
    (n === a || o !== i) && (i = o, rk.call(e, o, 1));
  }
  return e;
}, SM = function(r, e, t) {
  if (!bt(r) && !hn(r))
    return r;
  var n = t;
  return Se(r, function(a, i) {
    n = e(n, a, i);
  }), n;
}, nk = function(r, e) {
  var t = [];
  if (!Dn(r))
    return t;
  for (var n = -1, a = [], i = r.length; ++n < i; ) {
    var o = r[n];
    e(o, n, r) && (t.push(o), a.push(n));
  }
  return MM(r, a), t;
};
const He = function(r) {
  return _a(r, "String");
};
function ak(r, e) {
  var t;
  if (Or(e))
    t = function(a, i) {
      return e(a) - e(i);
    };
  else {
    var n = [];
    He(e) ? n.push(e) : bt(e) && (n = e), t = function(a, i) {
      for (var o = 0; o < n.length; o += 1) {
        var s = n[o];
        if (a[s] > i[s])
          return 1;
        if (a[s] < i[s])
          return -1;
      }
      return 0;
    };
  }
  return r.sort(t), r;
}
function _f(r, e) {
  e === void 0 && (e = /* @__PURE__ */ new Map());
  var t = [];
  if (Array.isArray(r))
    for (var n = 0, a = r.length; n < a; n++) {
      var i = r[n];
      e.has(i) || (t.push(i), e.set(i, !0));
    }
  return t;
}
var ik = function() {
  for (var r = [], e = 0; e < arguments.length; e++)
    r[e] = arguments[e];
  return _f([].concat.apply([], r));
};
const ok = function(r, e) {
  for (var t = [], n = {}, a = 0; a < r.length; a++) {
    var i = r[a], o = i[e];
    if (!Zt(o)) {
      bt(o) || (o = [o]);
      for (var s = 0; s < o.length; s++) {
        var u = o[s];
        n[u] || (t.push(u), n[u] = !0);
      }
    }
  }
  return t;
};
function sk(r) {
  if (Dn(r))
    return r[0];
}
function uk(r) {
  if (Dn(r)) {
    var e = r;
    return e[e.length - 1];
  }
}
function fk(r, e) {
  return bt(r) || He(r) ? r[0] === e : !1;
}
function lk(r, e) {
  return bt(r) || He(r) ? r[r.length - 1] === e : !1;
}
var ck = function(r, e) {
  for (var t = 0; t < r.length; t++)
    if (!e(r[t], t))
      return !1;
  return !0;
}, hk = function(r, e) {
  for (var t = 0; t < r.length; t++)
    if (e(r[t], t))
      return !0;
  return !1;
}, dk = Object.prototype.hasOwnProperty;
function gh(r, e) {
  if (!e || !bt(r))
    return {};
  for (var t = {}, n = Or(e) ? e : function(s) {
    return s[e];
  }, a, i = 0; i < r.length; i++) {
    var o = r[i];
    a = n(o), dk.call(t, a) ? t[a].push(o) : t[a] = [o];
  }
  return t;
}
function AM(r, e) {
  if (!e)
    return {
      0: r
    };
  if (!Or(e)) {
    var t = bt(e) ? e : e.replace(/\s+/g, "").split("*");
    e = function(n) {
      for (var a = "_", i = 0, o = t.length; i < o; i++)
        a += n[t[i]] && n[t[i]].toString();
      return a;
    };
  }
  return gh(r, e);
}
const vk = function(r, e) {
  if (!e)
    return [r];
  var t = AM(r, e), n = [];
  for (var a in t)
    n.push(t[a]);
  return n;
};
function pk(r, e) {
  return r["_wrap_" + e];
}
function Gs(r, e) {
  if (r["_wrap_" + e])
    return r["_wrap_" + e];
  var t = function(n) {
    r[e](n);
  };
  return r["_wrap_" + e] = t, t;
}
var qb = {};
function gk(r) {
  var e = qb[r];
  if (!e) {
    for (var t = r.toString(16), n = t.length; n < 6; n++)
      t = "0" + t;
    e = "#" + t, qb[r] = e;
  }
  return e;
}
function yk(r) {
  var e = 0, t = 0, n = 0, a = 0;
  return bt(r) ? r.length === 1 ? e = t = n = a = r[0] : r.length === 2 ? (e = n = r[0], t = a = r[1]) : r.length === 3 ? (e = r[0], t = a = r[1], n = r[2]) : (e = r[0], t = r[1], n = r[2], a = r[3]) : e = t = n = a = r, {
    r1: e,
    r2: t,
    r3: n,
    r4: a
  };
}
var mk = function(r, e, t) {
  return r < e ? e : r > t ? t : r;
}, bk = function(r, e) {
  var t = e.toString(), n = t.indexOf(".");
  if (n === -1)
    return Math.round(r);
  var a = t.substr(n + 1).length;
  return a > 20 && (a = 20), parseFloat(r.toFixed(a));
}, Pt = function(r) {
  return _a(r, "Number");
}, Ek = function(r) {
  return Pt(r) && r % 1 !== 0;
}, xk = function(r) {
  return Pt(r) && r % 2 === 0;
}, wk = Number.isInteger ? Number.isInteger : function(r) {
  return Pt(r) && r % 1 === 0;
}, _k = function(r) {
  return Pt(r) && r < 0;
}, Mk = 1e-5;
function CM(r, e, t) {
  return t === void 0 && (t = Mk), Math.abs(r - e) < t;
}
var Sk = function(r) {
  return Pt(r) && r % 2 !== 0;
}, Ak = function(r) {
  return Pt(r) && r > 0;
};
const Ck = function(r, e) {
  if (bt(r)) {
    for (var t, n = -1 / 0, a = 0; a < r.length; a++) {
      var i = r[a], o = Or(e) ? e(i) : i[e];
      o > n && (t = i, n = o);
    }
    return t;
  }
}, Tk = function(r, e) {
  if (bt(r)) {
    for (var t, n = 1 / 0, a = 0; a < r.length; a++) {
      var i = r[a], o = Or(e) ? e(i) : i[e];
      o < n && (t = i, n = o);
    }
    return t;
  }
};
var nd = function(r, e) {
  return (r % e + e) % e;
}, Ik = 180 / Math.PI, Ok = function(r) {
  return Ik * r;
};
const Dk = parseInt;
var Lk = Math.PI / 180, ad = function(r) {
  return Lk * r;
};
const Zb = function(r, e) {
  return r.hasOwnProperty(e);
};
var Qg = Object.values ? function(r) {
  return Object.values(r);
} : function(r) {
  var e = [];
  return Se(r, function(t, n) {
    Or(r) && n === "prototype" || e.push(t);
  }), e;
};
const Nk = function(r, e) {
  return vh(Qg(r), e);
}, pu = function(r) {
  return Zt(r) ? "" : r.toString();
};
var Pk = function(r) {
  return pu(r).toLowerCase();
}, kk = function(r) {
  var e = pu(r);
  return e.charAt(0).toLowerCase() + e.substring(1);
};
function Rk(r, e) {
  return !r || !e ? r : r.replace(/\\?\{([^{}]+)\}/g, function(t, n) {
    return t.charAt(0) === "\\" ? t.slice(1) : e[n] === void 0 ? "" : e[n];
  });
}
var Bk = function(r) {
  return pu(r).toUpperCase();
}, Zs = function(r) {
  var e = pu(r);
  return e.charAt(0).toUpperCase() + e.substring(1);
}, Fk = {}.toString, TM = function(r) {
  return Fk.call(r).replace(/^\[object /, "").replace(/]$/, "");
}, Gk = function(r) {
  return _a(r, "Arguments");
}, Xf = function(r) {
  return _a(r, "Boolean");
}, zk = function(r) {
  return _a(r, "Date");
}, Uk = function(r) {
  return _a(r, "Error");
};
function jk(r) {
  return Pt(r) && isFinite(r);
}
var $k = function(r) {
  return r === null;
}, Wk = Object.prototype, IM = function(r) {
  var e = r && r.constructor, t = typeof e == "function" && e.prototype || Wk;
  return r === t;
}, Xk = function(r) {
  return _a(r, "RegExp");
}, Vk = function(r) {
  return r === void 0;
}, Yk = function(r) {
  return r instanceof Element || r instanceof HTMLDocument;
};
function OM(r) {
  var e = window.requestAnimationFrame || window.webkitRequestAnimationFrame || // @ts-ignore
  window.mozRequestAnimationFrame || // @ts-ignore
  window.msRequestAnimationFrame || function(t) {
    return setTimeout(t, 16);
  };
  return e(r);
}
function DM(r) {
  var e = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || // @ts-ignore
  window.mozCancelAnimationFrame || // @ts-ignore
  window.msCancelAnimationFrame || clearTimeout;
  e(r);
}
function ip(r, e) {
  for (var t in e)
    e.hasOwnProperty(t) && t !== "constructor" && e[t] !== void 0 && (r[t] = e[t]);
}
function _t(r, e, t, n) {
  return e && ip(r, e), t && ip(r, t), n && ip(r, n), r;
}
var Hk = function() {
  for (var r = [], e = 0; e < arguments.length; e++)
    r[e] = arguments[e];
  for (var t = r[0], n = 1; n < r.length; n++) {
    var a = r[n];
    Or(a) && (a = a.prototype), _t(t.prototype, a);
  }
}, nr = function(r) {
  if (typeof r != "object" || r === null)
    return r;
  var e;
  if (bt(r)) {
    e = [];
    for (var t = 0, n = r.length; t < n; t++)
      typeof r[t] == "object" && r[t] != null ? e[t] = nr(r[t]) : e[t] = r[t];
  } else {
    e = {};
    for (var a in r)
      typeof r[a] == "object" && r[a] != null ? e[a] = nr(r[a]) : e[a] = r[a];
  }
  return e;
};
function Jg(r, e, t) {
  var n;
  return function() {
    var a = this, i = arguments, o = function() {
      n = null, t || r.apply(a, i);
    }, s = t && !n;
    clearTimeout(n), n = setTimeout(o, e), s && r.apply(a, i);
  };
}
const LM = function(r, e) {
  if (!Or(r))
    throw new TypeError("Expected a function");
  var t = function() {
    for (var n = [], a = 0; a < arguments.length; a++)
      n[a] = arguments[a];
    var i = e ? e.apply(this, n) : n[0], o = t.cache;
    if (o.has(i))
      return o.get(i);
    var s = r.apply(this, n);
    return o.set(i, s), s;
  };
  return t.cache = /* @__PURE__ */ new Map(), t;
};
var Kk = 5;
function NM(r, e, t, n) {
  t = t || 0, n = n || Kk;
  for (var a in e)
    if (e.hasOwnProperty(a)) {
      var i = e[a];
      i !== null && hn(i) ? (hn(r[a]) || (r[a] = {}), t < n ? NM(r[a], i, t + 1, n) : r[a] = e[a]) : bt(i) ? (r[a] = [], r[a] = r[a].concat(i)) : i !== void 0 && (r[a] = i);
    }
}
var Mr = function(r) {
  for (var e = [], t = 1; t < arguments.length; t++)
    e[t - 1] = arguments[t];
  for (var n = 0; n < e.length; n += 1)
    NM(r, e[n]);
  return r;
}, qk = function(r, e, t, n) {
  Or(e) || (t = e, e = r, r = function() {
  });
  var a = Object.create ? function(o, s) {
    return Object.create(o, {
      constructor: {
        value: s
      }
    });
  } : function(o, s) {
    function u() {
    }
    u.prototype = o;
    var f = new u();
    return f.constructor = s, f;
  }, i = a(e.prototype, r);
  return r.prototype = _t(i, r.prototype), r.superclass = a(e.prototype, e), _t(i, t), _t(r, n), r;
}, Zk = function(r, e) {
  if (!Dn(r))
    return -1;
  var t = Array.prototype.indexOf;
  if (t)
    return t.call(r, e);
  for (var n = -1, a = 0; a < r.length; a++)
    if (r[a] === e) {
      n = a;
      break;
    }
  return n;
}, Qk = Object.prototype.hasOwnProperty;
function Jk(r) {
  if (Zt(r))
    return !0;
  if (Dn(r))
    return !r.length;
  var e = TM(r);
  if (e === "Map" || e === "Set")
    return !r.size;
  if (IM(r))
    return !Object.keys(r).length;
  for (var t in r)
    if (Qk.call(r, t))
      return !1;
  return !0;
}
var jo = function(r, e) {
  if (r === e)
    return !0;
  if (!r || !e || He(r) || He(e))
    return !1;
  if (Dn(r) || Dn(e)) {
    if (r.length !== e.length)
      return !1;
    for (var t = !0, n = 0; n < r.length && (t = jo(r[n], e[n]), !!t); n++)
      ;
    return t;
  }
  if (ph(r) || ph(e)) {
    var a = Object.keys(r), i = Object.keys(e);
    if (a.length !== i.length)
      return !1;
    for (var t = !0, n = 0; n < a.length && (t = jo(r[a[n]], e[a[n]]), !!t); n++)
      ;
    return t;
  }
  return !1;
};
const eR = function(r, e, t) {
  return Or(t) ? !!t(r, e) : jo(r, e);
};
var tR = function(r, e) {
  if (!Dn(r))
    return r;
  for (var t = [], n = 0; n < r.length; n++) {
    var a = r[n];
    t.push(e(a, n));
  }
  return t;
}, rR = function(r) {
  return r;
};
const nR = function(r, e) {
  e === void 0 && (e = rR);
  var t = {};
  return yn(r) && !Zt(r) && Object.keys(r).forEach(function(n) {
    t[n] = e(r[n], n);
  }), t;
}, PM = function(r, e, t) {
  for (var n = 0, a = He(e) ? e.split(".") : e; r && n < a.length; )
    r = r[a[n++]];
  return r === void 0 || n < a.length ? t : r;
}, aR = function(r, e, t) {
  var n = r, a = He(e) ? e.split(".") : e;
  return a.forEach(function(i, o) {
    o < a.length - 1 ? (yn(n[i]) || (n[i] = Pt(a[o + 1]) ? [] : {}), n = n[i]) : n[i] = t;
  }), r;
};
var iR = Object.prototype.hasOwnProperty;
const oR = function(r, e) {
  if (r === null || !hn(r))
    return {};
  var t = {};
  return Se(e, function(n) {
    iR.call(r, n) && (t[n] = r[n]);
  }), t;
}, sR = function(r, e) {
  return SM(r, function(t, n, a) {
    return e.includes(a) || (t[a] = n), t;
  }, {});
}, yh = function(r, e, t) {
  var n, a, i, o, s = 0;
  t || (t = {});
  var u = function() {
    s = t.leading === !1 ? 0 : Date.now(), n = null, o = r.apply(a, i), n || (a = i = null);
  }, f = function() {
    var l = Date.now();
    !s && t.leading === !1 && (s = l);
    var c = e - (l - s);
    return a = this, i = arguments, c <= 0 || c > e ? (n && (clearTimeout(n), n = null), s = l, o = r.apply(a, i), n || (a = i = null)) : !n && t.trailing !== !1 && (n = setTimeout(u, c)), o;
  };
  return f.cancel = function() {
    clearTimeout(n), s = 0, n = a = i = null;
  }, f;
}, kM = function(r) {
  return Dn(r) ? Array.prototype.slice.call(r) : [];
};
var Kl = {};
const ao = function(r) {
  return r = r || "g", Kl[r] ? Kl[r] += 1 : Kl[r] = 1, r + Kl[r];
}, tf = function() {
}, uR = function(r) {
  return r;
};
function fR(r) {
  return Zt(r) ? 0 : Dn(r) ? r.length : Object.keys(r).length;
}
var ql;
const rf = LM(function(r, e) {
  e === void 0 && (e = {});
  var t = e.fontSize, n = e.fontFamily, a = e.fontWeight, i = e.fontStyle, o = e.fontVariant;
  return ql || (ql = document.createElement("canvas").getContext("2d")), ql.font = [i, o, a, t + "px", n].join(" "), ql.measureText(He(r) ? r : "").width;
}, function(r, e) {
  return e === void 0 && (e = {}), Zg([r], Qg(e)).join("");
}), lR = function(r, e, t, n) {
  n === void 0 && (n = "...");
  var a = 16, i = rf(n, t), o = He(r) ? r : pu(r), s = e, u = [], f, l;
  if (rf(r, t) <= e)
    return r;
  for (; f = o.substr(0, a), l = rf(f, t), !(l + i > s && l > s); )
    if (u.push(f), s -= l, o = o.substr(a), !o)
      return u.join("");
  for (; f = o.substr(0, 1), l = rf(f, t), !(l + i > s); )
    if (u.push(f), s -= l, o = o.substr(1), !o)
      return u.join("");
  return "" + u.join("") + n;
};
var cR = (
  /** @class */
  function() {
    function r() {
      this.map = {};
    }
    return r.prototype.has = function(e) {
      return this.map[e] !== void 0;
    }, r.prototype.get = function(e, t) {
      var n = this.map[e];
      return n === void 0 ? t : n;
    }, r.prototype.set = function(e, t) {
      this.map[e] = t;
    }, r.prototype.clear = function() {
      this.map = {};
    }, r.prototype.delete = function(e) {
      delete this.map[e];
    }, r.prototype.size = function() {
      return Object.keys(this.map).length;
    }, r;
  }()
);
const hR = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Cache: cR,
  assign: _t,
  augment: Hk,
  clamp: mk,
  clearAnimationFrame: DM,
  clone: nr,
  contains: vh,
  debounce: Jg,
  deepMix: Mr,
  difference: VP,
  each: Se,
  endsWith: lk,
  every: ck,
  extend: qk,
  filter: bM,
  find: HP,
  findIndex: KP,
  firstValue: qP,
  fixedBase: bk,
  flatten: ZP,
  flattenDeep: wM,
  forIn: Se,
  get: PM,
  getEllipsisText: lR,
  getRange: QP,
  getType: TM,
  getWrapBehavior: pk,
  group: vk,
  groupBy: gh,
  groupToMap: AM,
  has: Zb,
  hasKey: Zb,
  hasValue: Nk,
  head: sk,
  identity: uR,
  includes: vh,
  indexOf: Zk,
  isArguments: Gk,
  isArray: bt,
  isArrayLike: Dn,
  isBoolean: Xf,
  isDate: zk,
  isDecimal: Ek,
  isElement: Yk,
  isEmpty: Jk,
  isEqual: jo,
  isEqualWith: eR,
  isError: Uk,
  isEven: xk,
  isFinite: jk,
  isFunction: Or,
  isInteger: wk,
  isMatch: xM,
  isNegative: _k,
  isNil: Zt,
  isNull: $k,
  isNumber: Pt,
  isNumberEqual: CM,
  isObject: yn,
  isObjectLike: ph,
  isOdd: Sk,
  isPlainObject: hn,
  isPositive: Ak,
  isPrototype: IM,
  isRegExp: Xk,
  isString: He,
  isType: _a,
  isUndefined: Vk,
  keys: EM,
  last: uk,
  lowerCase: Pk,
  lowerFirst: kk,
  map: tR,
  mapValues: nR,
  max: Qa,
  maxBy: Ck,
  measureTextWidth: rf,
  memoize: LM,
  min: Ja,
  minBy: Tk,
  mix: _t,
  mod: nd,
  noop: tf,
  number2color: gk,
  omit: sR,
  parseRadius: yk,
  pick: oR,
  pull: tk,
  pullAt: MM,
  reduce: SM,
  remove: nk,
  requestAnimationFrame: OM,
  set: aR,
  size: fR,
  some: hk,
  sortBy: ak,
  startsWith: fk,
  substitute: Rk,
  throttle: yh,
  toArray: kM,
  toDegree: Ok,
  toInteger: Dk,
  toRadian: ad,
  toString: pu,
  union: ik,
  uniq: _f,
  uniqueId: ao,
  upperCase: Bk,
  upperFirst: Zs,
  values: Qg,
  valuesOfKey: ok,
  wrapBehavior: Gs
}, Symbol.toStringTag, { value: "Module" })), dR = {
  getDefaultCfg: function() {
    return {};
  },
  /**
   * register event handler, behavior will auto bind events
   * for example:
   * return {
   *  click: 'onClick'
   * }
   */
  getEvents: function() {
    return {};
  },
  updateCfg: function(e) {
    return Object.assign(this, e), !0;
  },
  shouldBegin: function() {
    return !0;
  },
  shouldUpdate: function() {
    return !0;
  },
  shouldEnd: function() {
    return !0;
  },
  /**
   * auto bind events when register behavior
   * @param graph Graph instance
   */
  bind: function(e) {
    var t = this, n = this.events;
    this.graph = e, (this.type === "drag-canvas" || this.type === "brush-select" || this.type === "lasso-select") && e.get("canvas").set("draggable", !0), Se(n, function(a, i) {
      e.on(i, a);
    }), document.addEventListener("visibilitychange", function() {
      t.keydown = !1;
    });
  },
  unbind: function(e) {
    var t = this.events, n = e.get("canvas").get("draggable");
    (this.type === "drag-canvas" || this.type === "brush-select" || this.type === "lasso-select") && e.get("canvas").set("draggable", !1), Se(t, function(a, i) {
      e.off(i, a);
    }), e.get("canvas").set("draggable", n);
  },
  get: function(e) {
    return this[e];
  },
  set: function(e, t) {
    return this[e] = t, this;
  }
};
var ey = (
  /** @class */
  function() {
    function r() {
    }
    return r.registerBehavior = function(e, t) {
      if (!t)
        throw new Error("please specify handler for this behavior: ".concat(e));
      var n = nr(dR);
      Object.assign(n, t);
      var a = function(o) {
        var s = this;
        Object.assign(this, this.getDefaultCfg(), o);
        var u = this.getEvents();
        this.events = null;
        var f = {};
        u && (Se(u, function(l, c) {
          f[c] = Gs(s, l);
        }), this.events = f);
      };
      a.prototype = n, r.types[e] = a;
    }, r.hasBehavior = function(e) {
      return !!r.types[e];
    }, r.getBehavior = function(e) {
      return r.types[e];
    }, r.types = {}, r;
  }()
), vR = "*", RM = (
  /** @class */
  function() {
    function r() {
      this._events = {};
    }
    return r.prototype.on = function(e, t, n) {
      return this._events[e] || (this._events[e] = []), this._events[e].push({
        callback: t,
        once: !!n
      }), this;
    }, r.prototype.once = function(e, t) {
      return this.on(e, t, !0);
    }, r.prototype.emit = function(e) {
      for (var t = this, n = [], a = 1; a < arguments.length; a++)
        n[a - 1] = arguments[a];
      var i = this._events[e] || [], o = this._events[vR] || [], s = function(u) {
        for (var f = u.length, l = 0; l < f; l++)
          if (u[l]) {
            var c = u[l], h = c.callback, d = c.once;
            d && (u.splice(l, 1), u.length === 0 && delete t._events[e], f--, l--), h.apply(t, n);
          }
      };
      s(i), s(o);
    }, r.prototype.off = function(e, t) {
      if (!e)
        this._events = {};
      else if (!t)
        delete this._events[e];
      else {
        for (var n = this._events[e] || [], a = n.length, i = 0; i < a; i++)
          n[i].callback === t && (n.splice(i, 1), a--, i--);
        n.length === 0 && delete this._events[e];
      }
      return this;
    }, r.prototype.getEvents = function() {
      return this._events;
    }, r;
  }()
), yt = 1e-6, Ht = typeof Float32Array < "u" ? Float32Array : Array, ma = Math.random;
function pR(r) {
  Ht = r;
}
var gR = Math.PI / 180;
function yR(r) {
  return r * gR;
}
function mR(r, e) {
  return Math.abs(r - e) <= yt * Math.max(1, Math.abs(r), Math.abs(e));
}
Math.hypot || (Math.hypot = function() {
  for (var r = 0, e = arguments.length; e--; )
    r += arguments[e] * arguments[e];
  return Math.sqrt(r);
});
const bR = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get ARRAY_TYPE() {
    return Ht;
  },
  EPSILON: yt,
  RANDOM: ma,
  equals: mR,
  setMatrixArrayType: pR,
  toRadian: yR
}, Symbol.toStringTag, { value: "Module" }));
function ER() {
  var r = new Ht(4);
  return Ht != Float32Array && (r[1] = 0, r[2] = 0), r[0] = 1, r[3] = 1, r;
}
function xR(r) {
  var e = new Ht(4);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e[3] = r[3], e;
}
function wR(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r;
}
function _R(r) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 1, r;
}
function MR(r, e, t, n) {
  var a = new Ht(4);
  return a[0] = r, a[1] = e, a[2] = t, a[3] = n, a;
}
function SR(r, e, t, n, a) {
  return r[0] = e, r[1] = t, r[2] = n, r[3] = a, r;
}
function AR(r, e) {
  if (r === e) {
    var t = e[1];
    r[1] = e[2], r[2] = t;
  } else
    r[0] = e[0], r[1] = e[2], r[2] = e[1], r[3] = e[3];
  return r;
}
function CR(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = t * i - a * n;
  return o ? (o = 1 / o, r[0] = i * o, r[1] = -n * o, r[2] = -a * o, r[3] = t * o, r) : null;
}
function TR(r, e) {
  var t = e[0];
  return r[0] = e[3], r[1] = -e[1], r[2] = -e[2], r[3] = t, r;
}
function IR(r) {
  return r[0] * r[3] - r[2] * r[1];
}
function BM(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t[0], u = t[1], f = t[2], l = t[3];
  return r[0] = n * s + i * u, r[1] = a * s + o * u, r[2] = n * f + i * l, r[3] = a * f + o * l, r;
}
function OR(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = Math.sin(t), u = Math.cos(t);
  return r[0] = n * u + i * s, r[1] = a * u + o * s, r[2] = n * -s + i * u, r[3] = a * -s + o * u, r;
}
function DR(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t[0], u = t[1];
  return r[0] = n * s, r[1] = a * s, r[2] = i * u, r[3] = o * u, r;
}
function LR(r, e) {
  var t = Math.sin(e), n = Math.cos(e);
  return r[0] = n, r[1] = t, r[2] = -t, r[3] = n, r;
}
function NR(r, e) {
  return r[0] = e[0], r[1] = 0, r[2] = 0, r[3] = e[1], r;
}
function PR(r) {
  return "mat2(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ")";
}
function kR(r) {
  return Math.hypot(r[0], r[1], r[2], r[3]);
}
function RR(r, e, t, n) {
  return r[2] = n[2] / n[0], t[0] = n[0], t[1] = n[1], t[3] = n[3] - r[2] * t[1], [r, e, t];
}
function BR(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r[3] = e[3] + t[3], r;
}
function FM(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r[2] = e[2] - t[2], r[3] = e[3] - t[3], r;
}
function FR(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2] && r[3] === e[3];
}
function GR(r, e) {
  var t = r[0], n = r[1], a = r[2], i = r[3], o = e[0], s = e[1], u = e[2], f = e[3];
  return Math.abs(t - o) <= yt * Math.max(1, Math.abs(t), Math.abs(o)) && Math.abs(n - s) <= yt * Math.max(1, Math.abs(n), Math.abs(s)) && Math.abs(a - u) <= yt * Math.max(1, Math.abs(a), Math.abs(u)) && Math.abs(i - f) <= yt * Math.max(1, Math.abs(i), Math.abs(f));
}
function zR(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r[3] = e[3] * t, r;
}
function UR(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r[2] = e[2] + t[2] * n, r[3] = e[3] + t[3] * n, r;
}
var jR = BM, $R = FM;
const WR = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  LDU: RR,
  add: BR,
  adjoint: TR,
  clone: xR,
  copy: wR,
  create: ER,
  determinant: IR,
  equals: GR,
  exactEquals: FR,
  frob: kR,
  fromRotation: LR,
  fromScaling: NR,
  fromValues: MR,
  identity: _R,
  invert: CR,
  mul: jR,
  multiply: BM,
  multiplyScalar: zR,
  multiplyScalarAndAdd: UR,
  rotate: OR,
  scale: DR,
  set: SR,
  str: PR,
  sub: $R,
  subtract: FM,
  transpose: AR
}, Symbol.toStringTag, { value: "Module" }));
function XR() {
  var r = new Ht(6);
  return Ht != Float32Array && (r[1] = 0, r[2] = 0, r[4] = 0, r[5] = 0), r[0] = 1, r[3] = 1, r;
}
function VR(r) {
  var e = new Ht(6);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e[3] = r[3], e[4] = r[4], e[5] = r[5], e;
}
function YR(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r[4] = e[4], r[5] = e[5], r;
}
function HR(r) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 1, r[4] = 0, r[5] = 0, r;
}
function KR(r, e, t, n, a, i) {
  var o = new Ht(6);
  return o[0] = r, o[1] = e, o[2] = t, o[3] = n, o[4] = a, o[5] = i, o;
}
function qR(r, e, t, n, a, i, o) {
  return r[0] = e, r[1] = t, r[2] = n, r[3] = a, r[4] = i, r[5] = o, r;
}
function ZR(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = e[4], s = e[5], u = t * i - n * a;
  return u ? (u = 1 / u, r[0] = i * u, r[1] = -n * u, r[2] = -a * u, r[3] = t * u, r[4] = (a * s - i * o) * u, r[5] = (n * o - t * s) * u, r) : null;
}
function QR(r) {
  return r[0] * r[3] - r[1] * r[2];
}
function GM(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = t[0], l = t[1], c = t[2], h = t[3], d = t[4], v = t[5];
  return r[0] = n * f + i * l, r[1] = a * f + o * l, r[2] = n * c + i * h, r[3] = a * c + o * h, r[4] = n * d + i * v + s, r[5] = a * d + o * v + u, r;
}
function JR(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = Math.sin(t), l = Math.cos(t);
  return r[0] = n * l + i * f, r[1] = a * l + o * f, r[2] = n * -f + i * l, r[3] = a * -f + o * l, r[4] = s, r[5] = u, r;
}
function e3(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = t[0], l = t[1];
  return r[0] = n * f, r[1] = a * f, r[2] = i * l, r[3] = o * l, r[4] = s, r[5] = u, r;
}
function t3(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = t[0], l = t[1];
  return r[0] = n, r[1] = a, r[2] = i, r[3] = o, r[4] = n * f + i * l + s, r[5] = a * f + o * l + u, r;
}
function r3(r, e) {
  var t = Math.sin(e), n = Math.cos(e);
  return r[0] = n, r[1] = t, r[2] = -t, r[3] = n, r[4] = 0, r[5] = 0, r;
}
function n3(r, e) {
  return r[0] = e[0], r[1] = 0, r[2] = 0, r[3] = e[1], r[4] = 0, r[5] = 0, r;
}
function a3(r, e) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 1, r[4] = e[0], r[5] = e[1], r;
}
function i3(r) {
  return "mat2d(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ", " + r[4] + ", " + r[5] + ")";
}
function o3(r) {
  return Math.hypot(r[0], r[1], r[2], r[3], r[4], r[5], 1);
}
function s3(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r[3] = e[3] + t[3], r[4] = e[4] + t[4], r[5] = e[5] + t[5], r;
}
function zM(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r[2] = e[2] - t[2], r[3] = e[3] - t[3], r[4] = e[4] - t[4], r[5] = e[5] - t[5], r;
}
function u3(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r[3] = e[3] * t, r[4] = e[4] * t, r[5] = e[5] * t, r;
}
function f3(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r[2] = e[2] + t[2] * n, r[3] = e[3] + t[3] * n, r[4] = e[4] + t[4] * n, r[5] = e[5] + t[5] * n, r;
}
function l3(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2] && r[3] === e[3] && r[4] === e[4] && r[5] === e[5];
}
function c3(r, e) {
  var t = r[0], n = r[1], a = r[2], i = r[3], o = r[4], s = r[5], u = e[0], f = e[1], l = e[2], c = e[3], h = e[4], d = e[5];
  return Math.abs(t - u) <= yt * Math.max(1, Math.abs(t), Math.abs(u)) && Math.abs(n - f) <= yt * Math.max(1, Math.abs(n), Math.abs(f)) && Math.abs(a - l) <= yt * Math.max(1, Math.abs(a), Math.abs(l)) && Math.abs(i - c) <= yt * Math.max(1, Math.abs(i), Math.abs(c)) && Math.abs(o - h) <= yt * Math.max(1, Math.abs(o), Math.abs(h)) && Math.abs(s - d) <= yt * Math.max(1, Math.abs(s), Math.abs(d));
}
var h3 = GM, d3 = zM;
const v3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: s3,
  clone: VR,
  copy: YR,
  create: XR,
  determinant: QR,
  equals: c3,
  exactEquals: l3,
  frob: o3,
  fromRotation: r3,
  fromScaling: n3,
  fromTranslation: a3,
  fromValues: KR,
  identity: HR,
  invert: ZR,
  mul: h3,
  multiply: GM,
  multiplyScalar: u3,
  multiplyScalarAndAdd: f3,
  rotate: JR,
  scale: e3,
  set: qR,
  str: i3,
  sub: d3,
  subtract: zM,
  translate: t3
}, Symbol.toStringTag, { value: "Module" }));
function UM() {
  var r = new Ht(9);
  return Ht != Float32Array && (r[1] = 0, r[2] = 0, r[3] = 0, r[5] = 0, r[6] = 0, r[7] = 0), r[0] = 1, r[4] = 1, r[8] = 1, r;
}
function p3(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[4], r[4] = e[5], r[5] = e[6], r[6] = e[8], r[7] = e[9], r[8] = e[10], r;
}
function g3(r) {
  var e = new Ht(9);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e[3] = r[3], e[4] = r[4], e[5] = r[5], e[6] = r[6], e[7] = r[7], e[8] = r[8], e;
}
function y3(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r[4] = e[4], r[5] = e[5], r[6] = e[6], r[7] = e[7], r[8] = e[8], r;
}
function m3(r, e, t, n, a, i, o, s, u) {
  var f = new Ht(9);
  return f[0] = r, f[1] = e, f[2] = t, f[3] = n, f[4] = a, f[5] = i, f[6] = o, f[7] = s, f[8] = u, f;
}
function b3(r, e, t, n, a, i, o, s, u, f) {
  return r[0] = e, r[1] = t, r[2] = n, r[3] = a, r[4] = i, r[5] = o, r[6] = s, r[7] = u, r[8] = f, r;
}
function E3(r) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 1, r[5] = 0, r[6] = 0, r[7] = 0, r[8] = 1, r;
}
function x3(r, e) {
  if (r === e) {
    var t = e[1], n = e[2], a = e[5];
    r[1] = e[3], r[2] = e[6], r[3] = t, r[5] = e[7], r[6] = n, r[7] = a;
  } else
    r[0] = e[0], r[1] = e[3], r[2] = e[6], r[3] = e[1], r[4] = e[4], r[5] = e[7], r[6] = e[2], r[7] = e[5], r[8] = e[8];
  return r;
}
function jM(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = e[4], s = e[5], u = e[6], f = e[7], l = e[8], c = l * o - s * f, h = -l * i + s * u, d = f * i - o * u, v = t * c + n * h + a * d;
  return v ? (v = 1 / v, r[0] = c * v, r[1] = (-l * n + a * f) * v, r[2] = (s * n - a * o) * v, r[3] = h * v, r[4] = (l * t - a * u) * v, r[5] = (-s * t + a * i) * v, r[6] = d * v, r[7] = (-f * t + n * u) * v, r[8] = (o * t - n * i) * v, r) : null;
}
function w3(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = e[4], s = e[5], u = e[6], f = e[7], l = e[8];
  return r[0] = o * l - s * f, r[1] = a * f - n * l, r[2] = n * s - a * o, r[3] = s * u - i * l, r[4] = t * l - a * u, r[5] = a * i - t * s, r[6] = i * f - o * u, r[7] = n * u - t * f, r[8] = t * o - n * i, r;
}
function _3(r) {
  var e = r[0], t = r[1], n = r[2], a = r[3], i = r[4], o = r[5], s = r[6], u = r[7], f = r[8];
  return e * (f * i - o * u) + t * (-f * a + o * s) + n * (u * a - i * s);
}
function ei(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = e[8], h = t[0], d = t[1], v = t[2], p = t[3], g = t[4], y = t[5], m = t[6], b = t[7], E = t[8];
  return r[0] = h * n + d * o + v * f, r[1] = h * a + d * s + v * l, r[2] = h * i + d * u + v * c, r[3] = p * n + g * o + y * f, r[4] = p * a + g * s + y * l, r[5] = p * i + g * u + y * c, r[6] = m * n + b * o + E * f, r[7] = m * a + b * s + E * l, r[8] = m * i + b * u + E * c, r;
}
function M3(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = e[8], h = t[0], d = t[1];
  return r[0] = n, r[1] = a, r[2] = i, r[3] = o, r[4] = s, r[5] = u, r[6] = h * n + d * o + f, r[7] = h * a + d * s + l, r[8] = h * i + d * u + c, r;
}
function S3(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = e[8], h = Math.sin(t), d = Math.cos(t);
  return r[0] = d * n + h * o, r[1] = d * a + h * s, r[2] = d * i + h * u, r[3] = d * o - h * n, r[4] = d * s - h * a, r[5] = d * u - h * i, r[6] = f, r[7] = l, r[8] = c, r;
}
function A3(r, e, t) {
  var n = t[0], a = t[1];
  return r[0] = n * e[0], r[1] = n * e[1], r[2] = n * e[2], r[3] = a * e[3], r[4] = a * e[4], r[5] = a * e[5], r[6] = e[6], r[7] = e[7], r[8] = e[8], r;
}
function ty(r, e) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 1, r[5] = 0, r[6] = e[0], r[7] = e[1], r[8] = 1, r;
}
function ry(r, e) {
  var t = Math.sin(e), n = Math.cos(e);
  return r[0] = n, r[1] = t, r[2] = 0, r[3] = -t, r[4] = n, r[5] = 0, r[6] = 0, r[7] = 0, r[8] = 1, r;
}
function ny(r, e) {
  return r[0] = e[0], r[1] = 0, r[2] = 0, r[3] = 0, r[4] = e[1], r[5] = 0, r[6] = 0, r[7] = 0, r[8] = 1, r;
}
function C3(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = 0, r[3] = e[2], r[4] = e[3], r[5] = 0, r[6] = e[4], r[7] = e[5], r[8] = 1, r;
}
function T3(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = t + t, s = n + n, u = a + a, f = t * o, l = n * o, c = n * s, h = a * o, d = a * s, v = a * u, p = i * o, g = i * s, y = i * u;
  return r[0] = 1 - c - v, r[3] = l - y, r[6] = h + g, r[1] = l + y, r[4] = 1 - f - v, r[7] = d - p, r[2] = h - g, r[5] = d + p, r[8] = 1 - f - c, r;
}
function I3(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = e[4], s = e[5], u = e[6], f = e[7], l = e[8], c = e[9], h = e[10], d = e[11], v = e[12], p = e[13], g = e[14], y = e[15], m = t * s - n * o, b = t * u - a * o, E = t * f - i * o, x = n * u - a * s, w = n * f - i * s, _ = a * f - i * u, M = l * p - c * v, A = l * g - h * v, S = l * y - d * v, T = c * g - h * p, C = c * y - d * p, O = h * y - d * g, L = m * O - b * C + E * T + x * S - w * A + _ * M;
  return L ? (L = 1 / L, r[0] = (s * O - u * C + f * T) * L, r[1] = (u * S - o * O - f * A) * L, r[2] = (o * C - s * S + f * M) * L, r[3] = (a * C - n * O - i * T) * L, r[4] = (t * O - a * S + i * A) * L, r[5] = (n * S - t * C - i * M) * L, r[6] = (p * _ - g * w + y * x) * L, r[7] = (g * E - v * _ - y * b) * L, r[8] = (v * w - p * E + y * m) * L, r) : null;
}
function O3(r, e, t) {
  return r[0] = 2 / e, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = -2 / t, r[5] = 0, r[6] = -1, r[7] = 1, r[8] = 1, r;
}
function D3(r) {
  return "mat3(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ", " + r[4] + ", " + r[5] + ", " + r[6] + ", " + r[7] + ", " + r[8] + ")";
}
function L3(r) {
  return Math.hypot(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8]);
}
function N3(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r[3] = e[3] + t[3], r[4] = e[4] + t[4], r[5] = e[5] + t[5], r[6] = e[6] + t[6], r[7] = e[7] + t[7], r[8] = e[8] + t[8], r;
}
function $M(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r[2] = e[2] - t[2], r[3] = e[3] - t[3], r[4] = e[4] - t[4], r[5] = e[5] - t[5], r[6] = e[6] - t[6], r[7] = e[7] - t[7], r[8] = e[8] - t[8], r;
}
function P3(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r[3] = e[3] * t, r[4] = e[4] * t, r[5] = e[5] * t, r[6] = e[6] * t, r[7] = e[7] * t, r[8] = e[8] * t, r;
}
function k3(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r[2] = e[2] + t[2] * n, r[3] = e[3] + t[3] * n, r[4] = e[4] + t[4] * n, r[5] = e[5] + t[5] * n, r[6] = e[6] + t[6] * n, r[7] = e[7] + t[7] * n, r[8] = e[8] + t[8] * n, r;
}
function R3(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2] && r[3] === e[3] && r[4] === e[4] && r[5] === e[5] && r[6] === e[6] && r[7] === e[7] && r[8] === e[8];
}
function B3(r, e) {
  var t = r[0], n = r[1], a = r[2], i = r[3], o = r[4], s = r[5], u = r[6], f = r[7], l = r[8], c = e[0], h = e[1], d = e[2], v = e[3], p = e[4], g = e[5], y = e[6], m = e[7], b = e[8];
  return Math.abs(t - c) <= yt * Math.max(1, Math.abs(t), Math.abs(c)) && Math.abs(n - h) <= yt * Math.max(1, Math.abs(n), Math.abs(h)) && Math.abs(a - d) <= yt * Math.max(1, Math.abs(a), Math.abs(d)) && Math.abs(i - v) <= yt * Math.max(1, Math.abs(i), Math.abs(v)) && Math.abs(o - p) <= yt * Math.max(1, Math.abs(o), Math.abs(p)) && Math.abs(s - g) <= yt * Math.max(1, Math.abs(s), Math.abs(g)) && Math.abs(u - y) <= yt * Math.max(1, Math.abs(u), Math.abs(y)) && Math.abs(f - m) <= yt * Math.max(1, Math.abs(f), Math.abs(m)) && Math.abs(l - b) <= yt * Math.max(1, Math.abs(l), Math.abs(b));
}
var F3 = ei, G3 = $M;
const WM = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: N3,
  adjoint: w3,
  clone: g3,
  copy: y3,
  create: UM,
  determinant: _3,
  equals: B3,
  exactEquals: R3,
  frob: L3,
  fromMat2d: C3,
  fromMat4: p3,
  fromQuat: T3,
  fromRotation: ry,
  fromScaling: ny,
  fromTranslation: ty,
  fromValues: m3,
  identity: E3,
  invert: jM,
  mul: F3,
  multiply: ei,
  multiplyScalar: P3,
  multiplyScalarAndAdd: k3,
  normalFromMat4: I3,
  projection: O3,
  rotate: S3,
  scale: A3,
  set: b3,
  str: D3,
  sub: G3,
  subtract: $M,
  translate: M3,
  transpose: x3
}, Symbol.toStringTag, { value: "Module" }));
function z3() {
  var r = new Ht(16);
  return Ht != Float32Array && (r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0), r[0] = 1, r[5] = 1, r[10] = 1, r[15] = 1, r;
}
function U3(r) {
  var e = new Ht(16);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e[3] = r[3], e[4] = r[4], e[5] = r[5], e[6] = r[6], e[7] = r[7], e[8] = r[8], e[9] = r[9], e[10] = r[10], e[11] = r[11], e[12] = r[12], e[13] = r[13], e[14] = r[14], e[15] = r[15], e;
}
function j3(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r[4] = e[4], r[5] = e[5], r[6] = e[6], r[7] = e[7], r[8] = e[8], r[9] = e[9], r[10] = e[10], r[11] = e[11], r[12] = e[12], r[13] = e[13], r[14] = e[14], r[15] = e[15], r;
}
function $3(r, e, t, n, a, i, o, s, u, f, l, c, h, d, v, p) {
  var g = new Ht(16);
  return g[0] = r, g[1] = e, g[2] = t, g[3] = n, g[4] = a, g[5] = i, g[6] = o, g[7] = s, g[8] = u, g[9] = f, g[10] = l, g[11] = c, g[12] = h, g[13] = d, g[14] = v, g[15] = p, g;
}
function W3(r, e, t, n, a, i, o, s, u, f, l, c, h, d, v, p, g) {
  return r[0] = e, r[1] = t, r[2] = n, r[3] = a, r[4] = i, r[5] = o, r[6] = s, r[7] = u, r[8] = f, r[9] = l, r[10] = c, r[11] = h, r[12] = d, r[13] = v, r[14] = p, r[15] = g, r;
}
function XM(r) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = 1, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[10] = 1, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r;
}
function X3(r, e) {
  if (r === e) {
    var t = e[1], n = e[2], a = e[3], i = e[6], o = e[7], s = e[11];
    r[1] = e[4], r[2] = e[8], r[3] = e[12], r[4] = t, r[6] = e[9], r[7] = e[13], r[8] = n, r[9] = i, r[11] = e[14], r[12] = a, r[13] = o, r[14] = s;
  } else
    r[0] = e[0], r[1] = e[4], r[2] = e[8], r[3] = e[12], r[4] = e[1], r[5] = e[5], r[6] = e[9], r[7] = e[13], r[8] = e[2], r[9] = e[6], r[10] = e[10], r[11] = e[14], r[12] = e[3], r[13] = e[7], r[14] = e[11], r[15] = e[15];
  return r;
}
function V3(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = e[4], s = e[5], u = e[6], f = e[7], l = e[8], c = e[9], h = e[10], d = e[11], v = e[12], p = e[13], g = e[14], y = e[15], m = t * s - n * o, b = t * u - a * o, E = t * f - i * o, x = n * u - a * s, w = n * f - i * s, _ = a * f - i * u, M = l * p - c * v, A = l * g - h * v, S = l * y - d * v, T = c * g - h * p, C = c * y - d * p, O = h * y - d * g, L = m * O - b * C + E * T + x * S - w * A + _ * M;
  return L ? (L = 1 / L, r[0] = (s * O - u * C + f * T) * L, r[1] = (a * C - n * O - i * T) * L, r[2] = (p * _ - g * w + y * x) * L, r[3] = (h * w - c * _ - d * x) * L, r[4] = (u * S - o * O - f * A) * L, r[5] = (t * O - a * S + i * A) * L, r[6] = (g * E - v * _ - y * b) * L, r[7] = (l * _ - h * E + d * b) * L, r[8] = (o * C - s * S + f * M) * L, r[9] = (n * S - t * C - i * M) * L, r[10] = (v * w - p * E + y * m) * L, r[11] = (c * E - l * w - d * m) * L, r[12] = (s * A - o * T - u * M) * L, r[13] = (t * T - n * A + a * M) * L, r[14] = (p * b - v * x - g * m) * L, r[15] = (l * x - c * b + h * m) * L, r) : null;
}
function Y3(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = e[4], s = e[5], u = e[6], f = e[7], l = e[8], c = e[9], h = e[10], d = e[11], v = e[12], p = e[13], g = e[14], y = e[15];
  return r[0] = s * (h * y - d * g) - c * (u * y - f * g) + p * (u * d - f * h), r[1] = -(n * (h * y - d * g) - c * (a * y - i * g) + p * (a * d - i * h)), r[2] = n * (u * y - f * g) - s * (a * y - i * g) + p * (a * f - i * u), r[3] = -(n * (u * d - f * h) - s * (a * d - i * h) + c * (a * f - i * u)), r[4] = -(o * (h * y - d * g) - l * (u * y - f * g) + v * (u * d - f * h)), r[5] = t * (h * y - d * g) - l * (a * y - i * g) + v * (a * d - i * h), r[6] = -(t * (u * y - f * g) - o * (a * y - i * g) + v * (a * f - i * u)), r[7] = t * (u * d - f * h) - o * (a * d - i * h) + l * (a * f - i * u), r[8] = o * (c * y - d * p) - l * (s * y - f * p) + v * (s * d - f * c), r[9] = -(t * (c * y - d * p) - l * (n * y - i * p) + v * (n * d - i * c)), r[10] = t * (s * y - f * p) - o * (n * y - i * p) + v * (n * f - i * s), r[11] = -(t * (s * d - f * c) - o * (n * d - i * c) + l * (n * f - i * s)), r[12] = -(o * (c * g - h * p) - l * (s * g - u * p) + v * (s * h - u * c)), r[13] = t * (c * g - h * p) - l * (n * g - a * p) + v * (n * h - a * c), r[14] = -(t * (s * g - u * p) - o * (n * g - a * p) + v * (n * u - a * s)), r[15] = t * (s * h - u * c) - o * (n * h - a * c) + l * (n * u - a * s), r;
}
function H3(r) {
  var e = r[0], t = r[1], n = r[2], a = r[3], i = r[4], o = r[5], s = r[6], u = r[7], f = r[8], l = r[9], c = r[10], h = r[11], d = r[12], v = r[13], p = r[14], g = r[15], y = e * o - t * i, m = e * s - n * i, b = e * u - a * i, E = t * s - n * o, x = t * u - a * o, w = n * u - a * s, _ = f * v - l * d, M = f * p - c * d, A = f * g - h * d, S = l * p - c * v, T = l * g - h * v, C = c * g - h * p;
  return y * C - m * T + b * S + E * A - x * M + w * _;
}
function VM(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = e[8], h = e[9], d = e[10], v = e[11], p = e[12], g = e[13], y = e[14], m = e[15], b = t[0], E = t[1], x = t[2], w = t[3];
  return r[0] = b * n + E * s + x * c + w * p, r[1] = b * a + E * u + x * h + w * g, r[2] = b * i + E * f + x * d + w * y, r[3] = b * o + E * l + x * v + w * m, b = t[4], E = t[5], x = t[6], w = t[7], r[4] = b * n + E * s + x * c + w * p, r[5] = b * a + E * u + x * h + w * g, r[6] = b * i + E * f + x * d + w * y, r[7] = b * o + E * l + x * v + w * m, b = t[8], E = t[9], x = t[10], w = t[11], r[8] = b * n + E * s + x * c + w * p, r[9] = b * a + E * u + x * h + w * g, r[10] = b * i + E * f + x * d + w * y, r[11] = b * o + E * l + x * v + w * m, b = t[12], E = t[13], x = t[14], w = t[15], r[12] = b * n + E * s + x * c + w * p, r[13] = b * a + E * u + x * h + w * g, r[14] = b * i + E * f + x * d + w * y, r[15] = b * o + E * l + x * v + w * m, r;
}
function K3(r, e, t) {
  var n = t[0], a = t[1], i = t[2], o, s, u, f, l, c, h, d, v, p, g, y;
  return e === r ? (r[12] = e[0] * n + e[4] * a + e[8] * i + e[12], r[13] = e[1] * n + e[5] * a + e[9] * i + e[13], r[14] = e[2] * n + e[6] * a + e[10] * i + e[14], r[15] = e[3] * n + e[7] * a + e[11] * i + e[15]) : (o = e[0], s = e[1], u = e[2], f = e[3], l = e[4], c = e[5], h = e[6], d = e[7], v = e[8], p = e[9], g = e[10], y = e[11], r[0] = o, r[1] = s, r[2] = u, r[3] = f, r[4] = l, r[5] = c, r[6] = h, r[7] = d, r[8] = v, r[9] = p, r[10] = g, r[11] = y, r[12] = o * n + l * a + v * i + e[12], r[13] = s * n + c * a + p * i + e[13], r[14] = u * n + h * a + g * i + e[14], r[15] = f * n + d * a + y * i + e[15]), r;
}
function q3(r, e, t) {
  var n = t[0], a = t[1], i = t[2];
  return r[0] = e[0] * n, r[1] = e[1] * n, r[2] = e[2] * n, r[3] = e[3] * n, r[4] = e[4] * a, r[5] = e[5] * a, r[6] = e[6] * a, r[7] = e[7] * a, r[8] = e[8] * i, r[9] = e[9] * i, r[10] = e[10] * i, r[11] = e[11] * i, r[12] = e[12], r[13] = e[13], r[14] = e[14], r[15] = e[15], r;
}
function Z3(r, e, t, n) {
  var a = n[0], i = n[1], o = n[2], s = Math.hypot(a, i, o), u, f, l, c, h, d, v, p, g, y, m, b, E, x, w, _, M, A, S, T, C, O, L, R;
  return s < yt ? null : (s = 1 / s, a *= s, i *= s, o *= s, u = Math.sin(t), f = Math.cos(t), l = 1 - f, c = e[0], h = e[1], d = e[2], v = e[3], p = e[4], g = e[5], y = e[6], m = e[7], b = e[8], E = e[9], x = e[10], w = e[11], _ = a * a * l + f, M = i * a * l + o * u, A = o * a * l - i * u, S = a * i * l - o * u, T = i * i * l + f, C = o * i * l + a * u, O = a * o * l + i * u, L = i * o * l - a * u, R = o * o * l + f, r[0] = c * _ + p * M + b * A, r[1] = h * _ + g * M + E * A, r[2] = d * _ + y * M + x * A, r[3] = v * _ + m * M + w * A, r[4] = c * S + p * T + b * C, r[5] = h * S + g * T + E * C, r[6] = d * S + y * T + x * C, r[7] = v * S + m * T + w * C, r[8] = c * O + p * L + b * R, r[9] = h * O + g * L + E * R, r[10] = d * O + y * L + x * R, r[11] = v * O + m * L + w * R, e !== r && (r[12] = e[12], r[13] = e[13], r[14] = e[14], r[15] = e[15]), r);
}
function Q3(r, e, t) {
  var n = Math.sin(t), a = Math.cos(t), i = e[4], o = e[5], s = e[6], u = e[7], f = e[8], l = e[9], c = e[10], h = e[11];
  return e !== r && (r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r[12] = e[12], r[13] = e[13], r[14] = e[14], r[15] = e[15]), r[4] = i * a + f * n, r[5] = o * a + l * n, r[6] = s * a + c * n, r[7] = u * a + h * n, r[8] = f * a - i * n, r[9] = l * a - o * n, r[10] = c * a - s * n, r[11] = h * a - u * n, r;
}
function J3(r, e, t) {
  var n = Math.sin(t), a = Math.cos(t), i = e[0], o = e[1], s = e[2], u = e[3], f = e[8], l = e[9], c = e[10], h = e[11];
  return e !== r && (r[4] = e[4], r[5] = e[5], r[6] = e[6], r[7] = e[7], r[12] = e[12], r[13] = e[13], r[14] = e[14], r[15] = e[15]), r[0] = i * a - f * n, r[1] = o * a - l * n, r[2] = s * a - c * n, r[3] = u * a - h * n, r[8] = i * n + f * a, r[9] = o * n + l * a, r[10] = s * n + c * a, r[11] = u * n + h * a, r;
}
function e5(r, e, t) {
  var n = Math.sin(t), a = Math.cos(t), i = e[0], o = e[1], s = e[2], u = e[3], f = e[4], l = e[5], c = e[6], h = e[7];
  return e !== r && (r[8] = e[8], r[9] = e[9], r[10] = e[10], r[11] = e[11], r[12] = e[12], r[13] = e[13], r[14] = e[14], r[15] = e[15]), r[0] = i * a + f * n, r[1] = o * a + l * n, r[2] = s * a + c * n, r[3] = u * a + h * n, r[4] = f * a - i * n, r[5] = l * a - o * n, r[6] = c * a - s * n, r[7] = h * a - u * n, r;
}
function t5(r, e) {
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = 1, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[10] = 1, r[11] = 0, r[12] = e[0], r[13] = e[1], r[14] = e[2], r[15] = 1, r;
}
function r5(r, e) {
  return r[0] = e[0], r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = e[1], r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[10] = e[2], r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r;
}
function n5(r, e, t) {
  var n = t[0], a = t[1], i = t[2], o = Math.hypot(n, a, i), s, u, f;
  return o < yt ? null : (o = 1 / o, n *= o, a *= o, i *= o, s = Math.sin(e), u = Math.cos(e), f = 1 - u, r[0] = n * n * f + u, r[1] = a * n * f + i * s, r[2] = i * n * f - a * s, r[3] = 0, r[4] = n * a * f - i * s, r[5] = a * a * f + u, r[6] = i * a * f + n * s, r[7] = 0, r[8] = n * i * f + a * s, r[9] = a * i * f - n * s, r[10] = i * i * f + u, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r);
}
function a5(r, e) {
  var t = Math.sin(e), n = Math.cos(e);
  return r[0] = 1, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = n, r[6] = t, r[7] = 0, r[8] = 0, r[9] = -t, r[10] = n, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r;
}
function i5(r, e) {
  var t = Math.sin(e), n = Math.cos(e);
  return r[0] = n, r[1] = 0, r[2] = -t, r[3] = 0, r[4] = 0, r[5] = 1, r[6] = 0, r[7] = 0, r[8] = t, r[9] = 0, r[10] = n, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r;
}
function o5(r, e) {
  var t = Math.sin(e), n = Math.cos(e);
  return r[0] = n, r[1] = t, r[2] = 0, r[3] = 0, r[4] = -t, r[5] = n, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[10] = 1, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r;
}
function YM(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = n + n, u = a + a, f = i + i, l = n * s, c = n * u, h = n * f, d = a * u, v = a * f, p = i * f, g = o * s, y = o * u, m = o * f;
  return r[0] = 1 - (d + p), r[1] = c + m, r[2] = h - y, r[3] = 0, r[4] = c - m, r[5] = 1 - (l + p), r[6] = v + g, r[7] = 0, r[8] = h + y, r[9] = v - g, r[10] = 1 - (l + d), r[11] = 0, r[12] = t[0], r[13] = t[1], r[14] = t[2], r[15] = 1, r;
}
function s5(r, e) {
  var t = new Ht(3), n = -e[0], a = -e[1], i = -e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = n * n + a * a + i * i + o * o;
  return c > 0 ? (t[0] = (s * o + l * n + u * i - f * a) * 2 / c, t[1] = (u * o + l * a + f * n - s * i) * 2 / c, t[2] = (f * o + l * i + s * a - u * n) * 2 / c) : (t[0] = (s * o + l * n + u * i - f * a) * 2, t[1] = (u * o + l * a + f * n - s * i) * 2, t[2] = (f * o + l * i + s * a - u * n) * 2), YM(r, e, t), r;
}
function HM(r, e) {
  return r[0] = e[12], r[1] = e[13], r[2] = e[14], r;
}
function KM(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[4], o = e[5], s = e[6], u = e[8], f = e[9], l = e[10];
  return r[0] = Math.hypot(t, n, a), r[1] = Math.hypot(i, o, s), r[2] = Math.hypot(u, f, l), r;
}
function qM(r, e) {
  var t = new Ht(3);
  KM(t, e);
  var n = 1 / t[0], a = 1 / t[1], i = 1 / t[2], o = e[0] * n, s = e[1] * a, u = e[2] * i, f = e[4] * n, l = e[5] * a, c = e[6] * i, h = e[8] * n, d = e[9] * a, v = e[10] * i, p = o + l + v, g = 0;
  return p > 0 ? (g = Math.sqrt(p + 1) * 2, r[3] = 0.25 * g, r[0] = (c - d) / g, r[1] = (h - u) / g, r[2] = (s - f) / g) : o > l && o > v ? (g = Math.sqrt(1 + o - l - v) * 2, r[3] = (c - d) / g, r[0] = 0.25 * g, r[1] = (s + f) / g, r[2] = (h + u) / g) : l > v ? (g = Math.sqrt(1 + l - o - v) * 2, r[3] = (h - u) / g, r[0] = (s + f) / g, r[1] = 0.25 * g, r[2] = (c + d) / g) : (g = Math.sqrt(1 + v - o - l) * 2, r[3] = (s - f) / g, r[0] = (h + u) / g, r[1] = (c + d) / g, r[2] = 0.25 * g), r;
}
function u5(r, e, t, n) {
  var a = e[0], i = e[1], o = e[2], s = e[3], u = a + a, f = i + i, l = o + o, c = a * u, h = a * f, d = a * l, v = i * f, p = i * l, g = o * l, y = s * u, m = s * f, b = s * l, E = n[0], x = n[1], w = n[2];
  return r[0] = (1 - (v + g)) * E, r[1] = (h + b) * E, r[2] = (d - m) * E, r[3] = 0, r[4] = (h - b) * x, r[5] = (1 - (c + g)) * x, r[6] = (p + y) * x, r[7] = 0, r[8] = (d + m) * w, r[9] = (p - y) * w, r[10] = (1 - (c + v)) * w, r[11] = 0, r[12] = t[0], r[13] = t[1], r[14] = t[2], r[15] = 1, r;
}
function f5(r, e, t, n, a) {
  var i = e[0], o = e[1], s = e[2], u = e[3], f = i + i, l = o + o, c = s + s, h = i * f, d = i * l, v = i * c, p = o * l, g = o * c, y = s * c, m = u * f, b = u * l, E = u * c, x = n[0], w = n[1], _ = n[2], M = a[0], A = a[1], S = a[2], T = (1 - (p + y)) * x, C = (d + E) * x, O = (v - b) * x, L = (d - E) * w, R = (1 - (h + y)) * w, P = (g + m) * w, z = (v + b) * _, V = (g - m) * _, N = (1 - (h + p)) * _;
  return r[0] = T, r[1] = C, r[2] = O, r[3] = 0, r[4] = L, r[5] = R, r[6] = P, r[7] = 0, r[8] = z, r[9] = V, r[10] = N, r[11] = 0, r[12] = t[0] + M - (T * M + L * A + z * S), r[13] = t[1] + A - (C * M + R * A + V * S), r[14] = t[2] + S - (O * M + P * A + N * S), r[15] = 1, r;
}
function l5(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = t + t, s = n + n, u = a + a, f = t * o, l = n * o, c = n * s, h = a * o, d = a * s, v = a * u, p = i * o, g = i * s, y = i * u;
  return r[0] = 1 - c - v, r[1] = l + y, r[2] = h - g, r[3] = 0, r[4] = l - y, r[5] = 1 - f - v, r[6] = d + p, r[7] = 0, r[8] = h + g, r[9] = d - p, r[10] = 1 - f - c, r[11] = 0, r[12] = 0, r[13] = 0, r[14] = 0, r[15] = 1, r;
}
function c5(r, e, t, n, a, i, o) {
  var s = 1 / (t - e), u = 1 / (a - n), f = 1 / (i - o);
  return r[0] = i * 2 * s, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = i * 2 * u, r[6] = 0, r[7] = 0, r[8] = (t + e) * s, r[9] = (a + n) * u, r[10] = (o + i) * f, r[11] = -1, r[12] = 0, r[13] = 0, r[14] = o * i * 2 * f, r[15] = 0, r;
}
function ZM(r, e, t, n, a) {
  var i = 1 / Math.tan(e / 2), o;
  return r[0] = i / t, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = i, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[11] = -1, r[12] = 0, r[13] = 0, r[15] = 0, a != null && a !== 1 / 0 ? (o = 1 / (n - a), r[10] = (a + n) * o, r[14] = 2 * a * n * o) : (r[10] = -1, r[14] = -2 * n), r;
}
var h5 = ZM;
function d5(r, e, t, n, a) {
  var i = 1 / Math.tan(e / 2), o;
  return r[0] = i / t, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = i, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[11] = -1, r[12] = 0, r[13] = 0, r[15] = 0, a != null && a !== 1 / 0 ? (o = 1 / (n - a), r[10] = a * o, r[14] = a * n * o) : (r[10] = -1, r[14] = -n), r;
}
function v5(r, e, t, n) {
  var a = Math.tan(e.upDegrees * Math.PI / 180), i = Math.tan(e.downDegrees * Math.PI / 180), o = Math.tan(e.leftDegrees * Math.PI / 180), s = Math.tan(e.rightDegrees * Math.PI / 180), u = 2 / (o + s), f = 2 / (a + i);
  return r[0] = u, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = f, r[6] = 0, r[7] = 0, r[8] = -((o - s) * u * 0.5), r[9] = (a - i) * f * 0.5, r[10] = n / (t - n), r[11] = -1, r[12] = 0, r[13] = 0, r[14] = n * t / (t - n), r[15] = 0, r;
}
function QM(r, e, t, n, a, i, o) {
  var s = 1 / (e - t), u = 1 / (n - a), f = 1 / (i - o);
  return r[0] = -2 * s, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = -2 * u, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[10] = 2 * f, r[11] = 0, r[12] = (e + t) * s, r[13] = (a + n) * u, r[14] = (o + i) * f, r[15] = 1, r;
}
var p5 = QM;
function g5(r, e, t, n, a, i, o) {
  var s = 1 / (e - t), u = 1 / (n - a), f = 1 / (i - o);
  return r[0] = -2 * s, r[1] = 0, r[2] = 0, r[3] = 0, r[4] = 0, r[5] = -2 * u, r[6] = 0, r[7] = 0, r[8] = 0, r[9] = 0, r[10] = f, r[11] = 0, r[12] = (e + t) * s, r[13] = (a + n) * u, r[14] = i * f, r[15] = 1, r;
}
function y5(r, e, t, n) {
  var a, i, o, s, u, f, l, c, h, d, v = e[0], p = e[1], g = e[2], y = n[0], m = n[1], b = n[2], E = t[0], x = t[1], w = t[2];
  return Math.abs(v - E) < yt && Math.abs(p - x) < yt && Math.abs(g - w) < yt ? XM(r) : (l = v - E, c = p - x, h = g - w, d = 1 / Math.hypot(l, c, h), l *= d, c *= d, h *= d, a = m * h - b * c, i = b * l - y * h, o = y * c - m * l, d = Math.hypot(a, i, o), d ? (d = 1 / d, a *= d, i *= d, o *= d) : (a = 0, i = 0, o = 0), s = c * o - h * i, u = h * a - l * o, f = l * i - c * a, d = Math.hypot(s, u, f), d ? (d = 1 / d, s *= d, u *= d, f *= d) : (s = 0, u = 0, f = 0), r[0] = a, r[1] = s, r[2] = l, r[3] = 0, r[4] = i, r[5] = u, r[6] = c, r[7] = 0, r[8] = o, r[9] = f, r[10] = h, r[11] = 0, r[12] = -(a * v + i * p + o * g), r[13] = -(s * v + u * p + f * g), r[14] = -(l * v + c * p + h * g), r[15] = 1, r);
}
function m5(r, e, t, n) {
  var a = e[0], i = e[1], o = e[2], s = n[0], u = n[1], f = n[2], l = a - t[0], c = i - t[1], h = o - t[2], d = l * l + c * c + h * h;
  d > 0 && (d = 1 / Math.sqrt(d), l *= d, c *= d, h *= d);
  var v = u * h - f * c, p = f * l - s * h, g = s * c - u * l;
  return d = v * v + p * p + g * g, d > 0 && (d = 1 / Math.sqrt(d), v *= d, p *= d, g *= d), r[0] = v, r[1] = p, r[2] = g, r[3] = 0, r[4] = c * g - h * p, r[5] = h * v - l * g, r[6] = l * p - c * v, r[7] = 0, r[8] = l, r[9] = c, r[10] = h, r[11] = 0, r[12] = a, r[13] = i, r[14] = o, r[15] = 1, r;
}
function b5(r) {
  return "mat4(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ", " + r[4] + ", " + r[5] + ", " + r[6] + ", " + r[7] + ", " + r[8] + ", " + r[9] + ", " + r[10] + ", " + r[11] + ", " + r[12] + ", " + r[13] + ", " + r[14] + ", " + r[15] + ")";
}
function E5(r) {
  return Math.hypot(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8], r[9], r[10], r[11], r[12], r[13], r[14], r[15]);
}
function x5(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r[3] = e[3] + t[3], r[4] = e[4] + t[4], r[5] = e[5] + t[5], r[6] = e[6] + t[6], r[7] = e[7] + t[7], r[8] = e[8] + t[8], r[9] = e[9] + t[9], r[10] = e[10] + t[10], r[11] = e[11] + t[11], r[12] = e[12] + t[12], r[13] = e[13] + t[13], r[14] = e[14] + t[14], r[15] = e[15] + t[15], r;
}
function JM(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r[2] = e[2] - t[2], r[3] = e[3] - t[3], r[4] = e[4] - t[4], r[5] = e[5] - t[5], r[6] = e[6] - t[6], r[7] = e[7] - t[7], r[8] = e[8] - t[8], r[9] = e[9] - t[9], r[10] = e[10] - t[10], r[11] = e[11] - t[11], r[12] = e[12] - t[12], r[13] = e[13] - t[13], r[14] = e[14] - t[14], r[15] = e[15] - t[15], r;
}
function w5(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r[3] = e[3] * t, r[4] = e[4] * t, r[5] = e[5] * t, r[6] = e[6] * t, r[7] = e[7] * t, r[8] = e[8] * t, r[9] = e[9] * t, r[10] = e[10] * t, r[11] = e[11] * t, r[12] = e[12] * t, r[13] = e[13] * t, r[14] = e[14] * t, r[15] = e[15] * t, r;
}
function _5(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r[2] = e[2] + t[2] * n, r[3] = e[3] + t[3] * n, r[4] = e[4] + t[4] * n, r[5] = e[5] + t[5] * n, r[6] = e[6] + t[6] * n, r[7] = e[7] + t[7] * n, r[8] = e[8] + t[8] * n, r[9] = e[9] + t[9] * n, r[10] = e[10] + t[10] * n, r[11] = e[11] + t[11] * n, r[12] = e[12] + t[12] * n, r[13] = e[13] + t[13] * n, r[14] = e[14] + t[14] * n, r[15] = e[15] + t[15] * n, r;
}
function M5(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2] && r[3] === e[3] && r[4] === e[4] && r[5] === e[5] && r[6] === e[6] && r[7] === e[7] && r[8] === e[8] && r[9] === e[9] && r[10] === e[10] && r[11] === e[11] && r[12] === e[12] && r[13] === e[13] && r[14] === e[14] && r[15] === e[15];
}
function S5(r, e) {
  var t = r[0], n = r[1], a = r[2], i = r[3], o = r[4], s = r[5], u = r[6], f = r[7], l = r[8], c = r[9], h = r[10], d = r[11], v = r[12], p = r[13], g = r[14], y = r[15], m = e[0], b = e[1], E = e[2], x = e[3], w = e[4], _ = e[5], M = e[6], A = e[7], S = e[8], T = e[9], C = e[10], O = e[11], L = e[12], R = e[13], P = e[14], z = e[15];
  return Math.abs(t - m) <= yt * Math.max(1, Math.abs(t), Math.abs(m)) && Math.abs(n - b) <= yt * Math.max(1, Math.abs(n), Math.abs(b)) && Math.abs(a - E) <= yt * Math.max(1, Math.abs(a), Math.abs(E)) && Math.abs(i - x) <= yt * Math.max(1, Math.abs(i), Math.abs(x)) && Math.abs(o - w) <= yt * Math.max(1, Math.abs(o), Math.abs(w)) && Math.abs(s - _) <= yt * Math.max(1, Math.abs(s), Math.abs(_)) && Math.abs(u - M) <= yt * Math.max(1, Math.abs(u), Math.abs(M)) && Math.abs(f - A) <= yt * Math.max(1, Math.abs(f), Math.abs(A)) && Math.abs(l - S) <= yt * Math.max(1, Math.abs(l), Math.abs(S)) && Math.abs(c - T) <= yt * Math.max(1, Math.abs(c), Math.abs(T)) && Math.abs(h - C) <= yt * Math.max(1, Math.abs(h), Math.abs(C)) && Math.abs(d - O) <= yt * Math.max(1, Math.abs(d), Math.abs(O)) && Math.abs(v - L) <= yt * Math.max(1, Math.abs(v), Math.abs(L)) && Math.abs(p - R) <= yt * Math.max(1, Math.abs(p), Math.abs(R)) && Math.abs(g - P) <= yt * Math.max(1, Math.abs(g), Math.abs(P)) && Math.abs(y - z) <= yt * Math.max(1, Math.abs(y), Math.abs(z));
}
var A5 = VM, C5 = JM;
const T5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: x5,
  adjoint: Y3,
  clone: U3,
  copy: j3,
  create: z3,
  determinant: H3,
  equals: S5,
  exactEquals: M5,
  frob: E5,
  fromQuat: l5,
  fromQuat2: s5,
  fromRotation: n5,
  fromRotationTranslation: YM,
  fromRotationTranslationScale: u5,
  fromRotationTranslationScaleOrigin: f5,
  fromScaling: r5,
  fromTranslation: t5,
  fromValues: $3,
  fromXRotation: a5,
  fromYRotation: i5,
  fromZRotation: o5,
  frustum: c5,
  getRotation: qM,
  getScaling: KM,
  getTranslation: HM,
  identity: XM,
  invert: V3,
  lookAt: y5,
  mul: A5,
  multiply: VM,
  multiplyScalar: w5,
  multiplyScalarAndAdd: _5,
  ortho: p5,
  orthoNO: QM,
  orthoZO: g5,
  perspective: h5,
  perspectiveFromFieldOfView: v5,
  perspectiveNO: ZM,
  perspectiveZO: d5,
  rotate: Z3,
  rotateX: Q3,
  rotateY: J3,
  rotateZ: e5,
  scale: q3,
  set: W3,
  str: b5,
  sub: C5,
  subtract: JM,
  targetTo: m5,
  translate: K3,
  transpose: X3
}, Symbol.toStringTag, { value: "Module" }));
function ay() {
  var r = new Ht(3);
  return Ht != Float32Array && (r[0] = 0, r[1] = 0, r[2] = 0), r;
}
function I5(r) {
  var e = new Ht(3);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e;
}
function eS(r) {
  var e = r[0], t = r[1], n = r[2];
  return Math.hypot(e, t, n);
}
function y0(r, e, t) {
  var n = new Ht(3);
  return n[0] = r, n[1] = e, n[2] = t, n;
}
function O5(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r;
}
function D5(r, e, t, n) {
  return r[0] = e, r[1] = t, r[2] = n, r;
}
function L5(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r;
}
function tS(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r[2] = e[2] - t[2], r;
}
function rS(r, e, t) {
  return r[0] = e[0] * t[0], r[1] = e[1] * t[1], r[2] = e[2] * t[2], r;
}
function nS(r, e, t) {
  return r[0] = e[0] / t[0], r[1] = e[1] / t[1], r[2] = e[2] / t[2], r;
}
function N5(r, e) {
  return r[0] = Math.ceil(e[0]), r[1] = Math.ceil(e[1]), r[2] = Math.ceil(e[2]), r;
}
function P5(r, e) {
  return r[0] = Math.floor(e[0]), r[1] = Math.floor(e[1]), r[2] = Math.floor(e[2]), r;
}
function k5(r, e, t) {
  return r[0] = Math.min(e[0], t[0]), r[1] = Math.min(e[1], t[1]), r[2] = Math.min(e[2], t[2]), r;
}
function R5(r, e, t) {
  return r[0] = Math.max(e[0], t[0]), r[1] = Math.max(e[1], t[1]), r[2] = Math.max(e[2], t[2]), r;
}
function B5(r, e) {
  return r[0] = Math.round(e[0]), r[1] = Math.round(e[1]), r[2] = Math.round(e[2]), r;
}
function F5(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r;
}
function G5(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r[2] = e[2] + t[2] * n, r;
}
function aS(r, e) {
  var t = e[0] - r[0], n = e[1] - r[1], a = e[2] - r[2];
  return Math.hypot(t, n, a);
}
function iS(r, e) {
  var t = e[0] - r[0], n = e[1] - r[1], a = e[2] - r[2];
  return t * t + n * n + a * a;
}
function oS(r) {
  var e = r[0], t = r[1], n = r[2];
  return e * e + t * t + n * n;
}
function z5(r, e) {
  return r[0] = -e[0], r[1] = -e[1], r[2] = -e[2], r;
}
function U5(r, e) {
  return r[0] = 1 / e[0], r[1] = 1 / e[1], r[2] = 1 / e[2], r;
}
function sS(r, e) {
  var t = e[0], n = e[1], a = e[2], i = t * t + n * n + a * a;
  return i > 0 && (i = 1 / Math.sqrt(i)), r[0] = e[0] * i, r[1] = e[1] * i, r[2] = e[2] * i, r;
}
function iy(r, e) {
  return r[0] * e[0] + r[1] * e[1] + r[2] * e[2];
}
function Wc(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = t[0], s = t[1], u = t[2];
  return r[0] = a * u - i * s, r[1] = i * o - n * u, r[2] = n * s - a * o, r;
}
function j5(r, e, t, n) {
  var a = e[0], i = e[1], o = e[2];
  return r[0] = a + n * (t[0] - a), r[1] = i + n * (t[1] - i), r[2] = o + n * (t[2] - o), r;
}
function $5(r, e, t, n, a, i) {
  var o = i * i, s = o * (2 * i - 3) + 1, u = o * (i - 2) + i, f = o * (i - 1), l = o * (3 - 2 * i);
  return r[0] = e[0] * s + t[0] * u + n[0] * f + a[0] * l, r[1] = e[1] * s + t[1] * u + n[1] * f + a[1] * l, r[2] = e[2] * s + t[2] * u + n[2] * f + a[2] * l, r;
}
function W5(r, e, t, n, a, i) {
  var o = 1 - i, s = o * o, u = i * i, f = s * o, l = 3 * i * s, c = 3 * u * o, h = u * i;
  return r[0] = e[0] * f + t[0] * l + n[0] * c + a[0] * h, r[1] = e[1] * f + t[1] * l + n[1] * c + a[1] * h, r[2] = e[2] * f + t[2] * l + n[2] * c + a[2] * h, r;
}
function X5(r, e) {
  e = e || 1;
  var t = ma() * 2 * Math.PI, n = ma() * 2 - 1, a = Math.sqrt(1 - n * n) * e;
  return r[0] = Math.cos(t) * a, r[1] = Math.sin(t) * a, r[2] = n * e, r;
}
function V5(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = t[3] * n + t[7] * a + t[11] * i + t[15];
  return o = o || 1, r[0] = (t[0] * n + t[4] * a + t[8] * i + t[12]) / o, r[1] = (t[1] * n + t[5] * a + t[9] * i + t[13]) / o, r[2] = (t[2] * n + t[6] * a + t[10] * i + t[14]) / o, r;
}
function id(r, e, t) {
  var n = e[0], a = e[1], i = e[2];
  return r[0] = n * t[0] + a * t[3] + i * t[6], r[1] = n * t[1] + a * t[4] + i * t[7], r[2] = n * t[2] + a * t[5] + i * t[8], r;
}
function Y5(r, e, t) {
  var n = t[0], a = t[1], i = t[2], o = t[3], s = e[0], u = e[1], f = e[2], l = a * f - i * u, c = i * s - n * f, h = n * u - a * s, d = a * h - i * c, v = i * l - n * h, p = n * c - a * l, g = o * 2;
  return l *= g, c *= g, h *= g, d *= 2, v *= 2, p *= 2, r[0] = s + l + d, r[1] = u + c + v, r[2] = f + h + p, r;
}
function H5(r, e, t, n) {
  var a = [], i = [];
  return a[0] = e[0] - t[0], a[1] = e[1] - t[1], a[2] = e[2] - t[2], i[0] = a[0], i[1] = a[1] * Math.cos(n) - a[2] * Math.sin(n), i[2] = a[1] * Math.sin(n) + a[2] * Math.cos(n), r[0] = i[0] + t[0], r[1] = i[1] + t[1], r[2] = i[2] + t[2], r;
}
function K5(r, e, t, n) {
  var a = [], i = [];
  return a[0] = e[0] - t[0], a[1] = e[1] - t[1], a[2] = e[2] - t[2], i[0] = a[2] * Math.sin(n) + a[0] * Math.cos(n), i[1] = a[1], i[2] = a[2] * Math.cos(n) - a[0] * Math.sin(n), r[0] = i[0] + t[0], r[1] = i[1] + t[1], r[2] = i[2] + t[2], r;
}
function q5(r, e, t, n) {
  var a = [], i = [];
  return a[0] = e[0] - t[0], a[1] = e[1] - t[1], a[2] = e[2] - t[2], i[0] = a[0] * Math.cos(n) - a[1] * Math.sin(n), i[1] = a[0] * Math.sin(n) + a[1] * Math.cos(n), i[2] = a[2], r[0] = i[0] + t[0], r[1] = i[1] + t[1], r[2] = i[2] + t[2], r;
}
function Z5(r, e) {
  var t = r[0], n = r[1], a = r[2], i = e[0], o = e[1], s = e[2], u = Math.sqrt(t * t + n * n + a * a), f = Math.sqrt(i * i + o * o + s * s), l = u * f, c = l && iy(r, e) / l;
  return Math.acos(Math.min(Math.max(c, -1), 1));
}
function Q5(r) {
  return r[0] = 0, r[1] = 0, r[2] = 0, r;
}
function J5(r) {
  return "vec3(" + r[0] + ", " + r[1] + ", " + r[2] + ")";
}
function eB(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2];
}
function tB(r, e) {
  var t = r[0], n = r[1], a = r[2], i = e[0], o = e[1], s = e[2];
  return Math.abs(t - i) <= yt * Math.max(1, Math.abs(t), Math.abs(i)) && Math.abs(n - o) <= yt * Math.max(1, Math.abs(n), Math.abs(o)) && Math.abs(a - s) <= yt * Math.max(1, Math.abs(a), Math.abs(s));
}
var rB = tS, nB = rS, aB = nS, iB = aS, oB = iS, uS = eS, sB = oS, uB = function() {
  var r = ay();
  return function(e, t, n, a, i, o) {
    var s, u;
    for (t || (t = 3), n || (n = 0), a ? u = Math.min(a * t + n, e.length) : u = e.length, s = n; s < u; s += t)
      r[0] = e[s], r[1] = e[s + 1], r[2] = e[s + 2], i(r, r, o), e[s] = r[0], e[s + 1] = r[1], e[s + 2] = r[2];
    return e;
  };
}();
const fB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: L5,
  angle: Z5,
  bezier: W5,
  ceil: N5,
  clone: I5,
  copy: O5,
  create: ay,
  cross: Wc,
  dist: iB,
  distance: aS,
  div: aB,
  divide: nS,
  dot: iy,
  equals: tB,
  exactEquals: eB,
  floor: P5,
  forEach: uB,
  fromValues: y0,
  hermite: $5,
  inverse: U5,
  len: uS,
  length: eS,
  lerp: j5,
  max: R5,
  min: k5,
  mul: nB,
  multiply: rS,
  negate: z5,
  normalize: sS,
  random: X5,
  rotateX: H5,
  rotateY: K5,
  rotateZ: q5,
  round: B5,
  scale: F5,
  scaleAndAdd: G5,
  set: D5,
  sqrDist: oB,
  sqrLen: sB,
  squaredDistance: iS,
  squaredLength: oS,
  str: J5,
  sub: rB,
  subtract: tS,
  transformMat3: id,
  transformMat4: V5,
  transformQuat: Y5,
  zero: Q5
}, Symbol.toStringTag, { value: "Module" }));
function fS() {
  var r = new Ht(4);
  return Ht != Float32Array && (r[0] = 0, r[1] = 0, r[2] = 0, r[3] = 0), r;
}
function lS(r) {
  var e = new Ht(4);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e[3] = r[3], e;
}
function cS(r, e, t, n) {
  var a = new Ht(4);
  return a[0] = r, a[1] = e, a[2] = t, a[3] = n, a;
}
function hS(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r;
}
function dS(r, e, t, n, a) {
  return r[0] = e, r[1] = t, r[2] = n, r[3] = a, r;
}
function vS(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r[3] = e[3] + t[3], r;
}
function pS(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r[2] = e[2] - t[2], r[3] = e[3] - t[3], r;
}
function gS(r, e, t) {
  return r[0] = e[0] * t[0], r[1] = e[1] * t[1], r[2] = e[2] * t[2], r[3] = e[3] * t[3], r;
}
function yS(r, e, t) {
  return r[0] = e[0] / t[0], r[1] = e[1] / t[1], r[2] = e[2] / t[2], r[3] = e[3] / t[3], r;
}
function lB(r, e) {
  return r[0] = Math.ceil(e[0]), r[1] = Math.ceil(e[1]), r[2] = Math.ceil(e[2]), r[3] = Math.ceil(e[3]), r;
}
function cB(r, e) {
  return r[0] = Math.floor(e[0]), r[1] = Math.floor(e[1]), r[2] = Math.floor(e[2]), r[3] = Math.floor(e[3]), r;
}
function hB(r, e, t) {
  return r[0] = Math.min(e[0], t[0]), r[1] = Math.min(e[1], t[1]), r[2] = Math.min(e[2], t[2]), r[3] = Math.min(e[3], t[3]), r;
}
function dB(r, e, t) {
  return r[0] = Math.max(e[0], t[0]), r[1] = Math.max(e[1], t[1]), r[2] = Math.max(e[2], t[2]), r[3] = Math.max(e[3], t[3]), r;
}
function vB(r, e) {
  return r[0] = Math.round(e[0]), r[1] = Math.round(e[1]), r[2] = Math.round(e[2]), r[3] = Math.round(e[3]), r;
}
function mS(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r[3] = e[3] * t, r;
}
function pB(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r[2] = e[2] + t[2] * n, r[3] = e[3] + t[3] * n, r;
}
function bS(r, e) {
  var t = e[0] - r[0], n = e[1] - r[1], a = e[2] - r[2], i = e[3] - r[3];
  return Math.hypot(t, n, a, i);
}
function ES(r, e) {
  var t = e[0] - r[0], n = e[1] - r[1], a = e[2] - r[2], i = e[3] - r[3];
  return t * t + n * n + a * a + i * i;
}
function oy(r) {
  var e = r[0], t = r[1], n = r[2], a = r[3];
  return Math.hypot(e, t, n, a);
}
function sy(r) {
  var e = r[0], t = r[1], n = r[2], a = r[3];
  return e * e + t * t + n * n + a * a;
}
function gB(r, e) {
  return r[0] = -e[0], r[1] = -e[1], r[2] = -e[2], r[3] = -e[3], r;
}
function yB(r, e) {
  return r[0] = 1 / e[0], r[1] = 1 / e[1], r[2] = 1 / e[2], r[3] = 1 / e[3], r;
}
function xS(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = t * t + n * n + a * a + i * i;
  return o > 0 && (o = 1 / Math.sqrt(o)), r[0] = t * o, r[1] = n * o, r[2] = a * o, r[3] = i * o, r;
}
function wS(r, e) {
  return r[0] * e[0] + r[1] * e[1] + r[2] * e[2] + r[3] * e[3];
}
function mB(r, e, t, n) {
  var a = t[0] * n[1] - t[1] * n[0], i = t[0] * n[2] - t[2] * n[0], o = t[0] * n[3] - t[3] * n[0], s = t[1] * n[2] - t[2] * n[1], u = t[1] * n[3] - t[3] * n[1], f = t[2] * n[3] - t[3] * n[2], l = e[0], c = e[1], h = e[2], d = e[3];
  return r[0] = c * f - h * u + d * s, r[1] = -(l * f) + h * o - d * i, r[2] = l * u - c * o + d * a, r[3] = -(l * s) + c * i - h * a, r;
}
function _S(r, e, t, n) {
  var a = e[0], i = e[1], o = e[2], s = e[3];
  return r[0] = a + n * (t[0] - a), r[1] = i + n * (t[1] - i), r[2] = o + n * (t[2] - o), r[3] = s + n * (t[3] - s), r;
}
function bB(r, e) {
  e = e || 1;
  var t, n, a, i, o, s;
  do
    t = ma() * 2 - 1, n = ma() * 2 - 1, o = t * t + n * n;
  while (o >= 1);
  do
    a = ma() * 2 - 1, i = ma() * 2 - 1, s = a * a + i * i;
  while (s >= 1);
  var u = Math.sqrt((1 - o) / s);
  return r[0] = e * t, r[1] = e * n, r[2] = e * a * u, r[3] = e * i * u, r;
}
function EB(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3];
  return r[0] = t[0] * n + t[4] * a + t[8] * i + t[12] * o, r[1] = t[1] * n + t[5] * a + t[9] * i + t[13] * o, r[2] = t[2] * n + t[6] * a + t[10] * i + t[14] * o, r[3] = t[3] * n + t[7] * a + t[11] * i + t[15] * o, r;
}
function xB(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = t[0], s = t[1], u = t[2], f = t[3], l = f * n + s * i - u * a, c = f * a + u * n - o * i, h = f * i + o * a - s * n, d = -o * n - s * a - u * i;
  return r[0] = l * f + d * -o + c * -u - h * -s, r[1] = c * f + d * -s + h * -o - l * -u, r[2] = h * f + d * -u + l * -s - c * -o, r[3] = e[3], r;
}
function wB(r) {
  return r[0] = 0, r[1] = 0, r[2] = 0, r[3] = 0, r;
}
function _B(r) {
  return "vec4(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ")";
}
function MS(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2] && r[3] === e[3];
}
function SS(r, e) {
  var t = r[0], n = r[1], a = r[2], i = r[3], o = e[0], s = e[1], u = e[2], f = e[3];
  return Math.abs(t - o) <= yt * Math.max(1, Math.abs(t), Math.abs(o)) && Math.abs(n - s) <= yt * Math.max(1, Math.abs(n), Math.abs(s)) && Math.abs(a - u) <= yt * Math.max(1, Math.abs(a), Math.abs(u)) && Math.abs(i - f) <= yt * Math.max(1, Math.abs(i), Math.abs(f));
}
var MB = pS, SB = gS, AB = yS, CB = bS, TB = ES, IB = oy, OB = sy, DB = function() {
  var r = fS();
  return function(e, t, n, a, i, o) {
    var s, u;
    for (t || (t = 4), n || (n = 0), a ? u = Math.min(a * t + n, e.length) : u = e.length, s = n; s < u; s += t)
      r[0] = e[s], r[1] = e[s + 1], r[2] = e[s + 2], r[3] = e[s + 3], i(r, r, o), e[s] = r[0], e[s + 1] = r[1], e[s + 2] = r[2], e[s + 3] = r[3];
    return e;
  };
}();
const LB = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: vS,
  ceil: lB,
  clone: lS,
  copy: hS,
  create: fS,
  cross: mB,
  dist: CB,
  distance: bS,
  div: AB,
  divide: yS,
  dot: wS,
  equals: SS,
  exactEquals: MS,
  floor: cB,
  forEach: DB,
  fromValues: cS,
  inverse: yB,
  len: IB,
  length: oy,
  lerp: _S,
  max: dB,
  min: hB,
  mul: SB,
  multiply: gS,
  negate: gB,
  normalize: xS,
  random: bB,
  round: vB,
  scale: mS,
  scaleAndAdd: pB,
  set: dS,
  sqrDist: TB,
  sqrLen: OB,
  squaredDistance: ES,
  squaredLength: sy,
  str: _B,
  sub: MB,
  subtract: pS,
  transformMat4: EB,
  transformQuat: xB,
  zero: wB
}, Symbol.toStringTag, { value: "Module" }));
function mh() {
  var r = new Ht(4);
  return Ht != Float32Array && (r[0] = 0, r[1] = 0, r[2] = 0), r[3] = 1, r;
}
function NB(r) {
  return r[0] = 0, r[1] = 0, r[2] = 0, r[3] = 1, r;
}
function AS(r, e, t) {
  t = t * 0.5;
  var n = Math.sin(t);
  return r[0] = n * e[0], r[1] = n * e[1], r[2] = n * e[2], r[3] = Math.cos(t), r;
}
function PB(r, e) {
  var t = Math.acos(e[3]) * 2, n = Math.sin(t / 2);
  return n > yt ? (r[0] = e[0] / n, r[1] = e[1] / n, r[2] = e[2] / n) : (r[0] = 1, r[1] = 0, r[2] = 0), t;
}
function kB(r, e) {
  var t = fy(r, e);
  return Math.acos(2 * t * t - 1);
}
function CS(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t[0], u = t[1], f = t[2], l = t[3];
  return r[0] = n * l + o * s + a * f - i * u, r[1] = a * l + o * u + i * s - n * f, r[2] = i * l + o * f + n * u - a * s, r[3] = o * l - n * s - a * u - i * f, r;
}
function TS(r, e, t) {
  t *= 0.5;
  var n = e[0], a = e[1], i = e[2], o = e[3], s = Math.sin(t), u = Math.cos(t);
  return r[0] = n * u + o * s, r[1] = a * u + i * s, r[2] = i * u - a * s, r[3] = o * u - n * s, r;
}
function IS(r, e, t) {
  t *= 0.5;
  var n = e[0], a = e[1], i = e[2], o = e[3], s = Math.sin(t), u = Math.cos(t);
  return r[0] = n * u - i * s, r[1] = a * u + o * s, r[2] = i * u + n * s, r[3] = o * u - a * s, r;
}
function OS(r, e, t) {
  t *= 0.5;
  var n = e[0], a = e[1], i = e[2], o = e[3], s = Math.sin(t), u = Math.cos(t);
  return r[0] = n * u + a * s, r[1] = a * u - n * s, r[2] = i * u + o * s, r[3] = o * u - i * s, r;
}
function RB(r, e) {
  var t = e[0], n = e[1], a = e[2];
  return r[0] = t, r[1] = n, r[2] = a, r[3] = Math.sqrt(Math.abs(1 - t * t - n * n - a * a)), r;
}
function DS(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = Math.sqrt(t * t + n * n + a * a), s = Math.exp(i), u = o > 0 ? s * Math.sin(o) / o : 0;
  return r[0] = t * u, r[1] = n * u, r[2] = a * u, r[3] = s * Math.cos(o), r;
}
function LS(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = Math.sqrt(t * t + n * n + a * a), s = o > 0 ? Math.atan2(o, i) / o : 0;
  return r[0] = t * s, r[1] = n * s, r[2] = a * s, r[3] = 0.5 * Math.log(t * t + n * n + a * a + i * i), r;
}
function BB(r, e, t) {
  return LS(r, e), PS(r, r, t), DS(r, r), r;
}
function Xc(r, e, t, n) {
  var a = e[0], i = e[1], o = e[2], s = e[3], u = t[0], f = t[1], l = t[2], c = t[3], h, d, v, p, g;
  return d = a * u + i * f + o * l + s * c, d < 0 && (d = -d, u = -u, f = -f, l = -l, c = -c), 1 - d > yt ? (h = Math.acos(d), v = Math.sin(h), p = Math.sin((1 - n) * h) / v, g = Math.sin(n * h) / v) : (p = 1 - n, g = n), r[0] = p * a + g * u, r[1] = p * i + g * f, r[2] = p * o + g * l, r[3] = p * s + g * c, r;
}
function FB(r) {
  var e = ma(), t = ma(), n = ma(), a = Math.sqrt(1 - e), i = Math.sqrt(e);
  return r[0] = a * Math.sin(2 * Math.PI * t), r[1] = a * Math.cos(2 * Math.PI * t), r[2] = i * Math.sin(2 * Math.PI * n), r[3] = i * Math.cos(2 * Math.PI * n), r;
}
function GB(r, e) {
  var t = e[0], n = e[1], a = e[2], i = e[3], o = t * t + n * n + a * a + i * i, s = o ? 1 / o : 0;
  return r[0] = -t * s, r[1] = -n * s, r[2] = -a * s, r[3] = i * s, r;
}
function zB(r, e) {
  return r[0] = -e[0], r[1] = -e[1], r[2] = -e[2], r[3] = e[3], r;
}
function NS(r, e) {
  var t = e[0] + e[4] + e[8], n;
  if (t > 0)
    n = Math.sqrt(t + 1), r[3] = 0.5 * n, n = 0.5 / n, r[0] = (e[5] - e[7]) * n, r[1] = (e[6] - e[2]) * n, r[2] = (e[1] - e[3]) * n;
  else {
    var a = 0;
    e[4] > e[0] && (a = 1), e[8] > e[a * 3 + a] && (a = 2);
    var i = (a + 1) % 3, o = (a + 2) % 3;
    n = Math.sqrt(e[a * 3 + a] - e[i * 3 + i] - e[o * 3 + o] + 1), r[a] = 0.5 * n, n = 0.5 / n, r[3] = (e[i * 3 + o] - e[o * 3 + i]) * n, r[i] = (e[i * 3 + a] + e[a * 3 + i]) * n, r[o] = (e[o * 3 + a] + e[a * 3 + o]) * n;
  }
  return r;
}
function UB(r, e, t, n) {
  var a = 0.5 * Math.PI / 180;
  e *= a, t *= a, n *= a;
  var i = Math.sin(e), o = Math.cos(e), s = Math.sin(t), u = Math.cos(t), f = Math.sin(n), l = Math.cos(n);
  return r[0] = i * u * l - o * s * f, r[1] = o * s * l + i * u * f, r[2] = o * u * f - i * s * l, r[3] = o * u * l + i * s * f, r;
}
function jB(r) {
  return "quat(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ")";
}
var $B = lS, WB = cS, uy = hS, XB = dS, VB = vS, YB = CS, PS = mS, fy = wS, HB = _S, ly = oy, KB = ly, cy = sy, qB = cy, hy = xS, ZB = MS, QB = SS, JB = function() {
  var r = ay(), e = y0(1, 0, 0), t = y0(0, 1, 0);
  return function(n, a, i) {
    var o = iy(a, i);
    return o < -0.999999 ? (Wc(r, e, a), uS(r) < 1e-6 && Wc(r, t, a), sS(r, r), AS(n, r, Math.PI), n) : o > 0.999999 ? (n[0] = 0, n[1] = 0, n[2] = 0, n[3] = 1, n) : (Wc(r, a, i), n[0] = r[0], n[1] = r[1], n[2] = r[2], n[3] = 1 + o, hy(n, n));
  };
}(), eF = function() {
  var r = mh(), e = mh();
  return function(t, n, a, i, o, s) {
    return Xc(r, n, o, s), Xc(e, a, i, s), Xc(t, r, e, 2 * s * (1 - s)), t;
  };
}(), tF = function() {
  var r = UM();
  return function(e, t, n, a) {
    return r[0] = n[0], r[3] = n[1], r[6] = n[2], r[1] = a[0], r[4] = a[1], r[7] = a[2], r[2] = -t[0], r[5] = -t[1], r[8] = -t[2], hy(e, NS(e, r));
  };
}();
const rF = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: VB,
  calculateW: RB,
  clone: $B,
  conjugate: zB,
  copy: uy,
  create: mh,
  dot: fy,
  equals: QB,
  exactEquals: ZB,
  exp: DS,
  fromEuler: UB,
  fromMat3: NS,
  fromValues: WB,
  getAngle: kB,
  getAxisAngle: PB,
  identity: NB,
  invert: GB,
  len: KB,
  length: ly,
  lerp: HB,
  ln: LS,
  mul: YB,
  multiply: CS,
  normalize: hy,
  pow: BB,
  random: FB,
  rotateX: TS,
  rotateY: IS,
  rotateZ: OS,
  rotationTo: JB,
  scale: PS,
  set: XB,
  setAxes: tF,
  setAxisAngle: AS,
  slerp: Xc,
  sqlerp: eF,
  sqrLen: qB,
  squaredLength: cy,
  str: jB
}, Symbol.toStringTag, { value: "Module" }));
function nF() {
  var r = new Ht(8);
  return Ht != Float32Array && (r[0] = 0, r[1] = 0, r[2] = 0, r[4] = 0, r[5] = 0, r[6] = 0, r[7] = 0), r[3] = 1, r;
}
function aF(r) {
  var e = new Ht(8);
  return e[0] = r[0], e[1] = r[1], e[2] = r[2], e[3] = r[3], e[4] = r[4], e[5] = r[5], e[6] = r[6], e[7] = r[7], e;
}
function iF(r, e, t, n, a, i, o, s) {
  var u = new Ht(8);
  return u[0] = r, u[1] = e, u[2] = t, u[3] = n, u[4] = a, u[5] = i, u[6] = o, u[7] = s, u;
}
function oF(r, e, t, n, a, i, o) {
  var s = new Ht(8);
  s[0] = r, s[1] = e, s[2] = t, s[3] = n;
  var u = a * 0.5, f = i * 0.5, l = o * 0.5;
  return s[4] = u * n + f * t - l * e, s[5] = f * n + l * r - u * t, s[6] = l * n + u * e - f * r, s[7] = -u * r - f * e - l * t, s;
}
function kS(r, e, t) {
  var n = t[0] * 0.5, a = t[1] * 0.5, i = t[2] * 0.5, o = e[0], s = e[1], u = e[2], f = e[3];
  return r[0] = o, r[1] = s, r[2] = u, r[3] = f, r[4] = n * f + a * u - i * s, r[5] = a * f + i * o - n * u, r[6] = i * f + n * s - a * o, r[7] = -n * o - a * s - i * u, r;
}
function sF(r, e) {
  return r[0] = 0, r[1] = 0, r[2] = 0, r[3] = 1, r[4] = e[0] * 0.5, r[5] = e[1] * 0.5, r[6] = e[2] * 0.5, r[7] = 0, r;
}
function uF(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r[4] = 0, r[5] = 0, r[6] = 0, r[7] = 0, r;
}
function fF(r, e) {
  var t = mh();
  qM(t, e);
  var n = new Ht(3);
  return HM(n, e), kS(r, t, n), r;
}
function RS(r, e) {
  return r[0] = e[0], r[1] = e[1], r[2] = e[2], r[3] = e[3], r[4] = e[4], r[5] = e[5], r[6] = e[6], r[7] = e[7], r;
}
function lF(r) {
  return r[0] = 0, r[1] = 0, r[2] = 0, r[3] = 1, r[4] = 0, r[5] = 0, r[6] = 0, r[7] = 0, r;
}
function cF(r, e, t, n, a, i, o, s, u) {
  return r[0] = e, r[1] = t, r[2] = n, r[3] = a, r[4] = i, r[5] = o, r[6] = s, r[7] = u, r;
}
var hF = uy;
function dF(r, e) {
  return r[0] = e[4], r[1] = e[5], r[2] = e[6], r[3] = e[7], r;
}
var vF = uy;
function pF(r, e) {
  return r[4] = e[0], r[5] = e[1], r[6] = e[2], r[7] = e[3], r;
}
function gF(r, e) {
  var t = e[4], n = e[5], a = e[6], i = e[7], o = -e[0], s = -e[1], u = -e[2], f = e[3];
  return r[0] = (t * f + i * o + n * u - a * s) * 2, r[1] = (n * f + i * s + a * o - t * u) * 2, r[2] = (a * f + i * u + t * s - n * o) * 2, r;
}
function yF(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t[0] * 0.5, u = t[1] * 0.5, f = t[2] * 0.5, l = e[4], c = e[5], h = e[6], d = e[7];
  return r[0] = n, r[1] = a, r[2] = i, r[3] = o, r[4] = o * s + a * f - i * u + l, r[5] = o * u + i * s - n * f + c, r[6] = o * f + n * u - a * s + h, r[7] = -n * s - a * u - i * f + d, r;
}
function mF(r, e, t) {
  var n = -e[0], a = -e[1], i = -e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = s * o + l * n + u * i - f * a, h = u * o + l * a + f * n - s * i, d = f * o + l * i + s * a - u * n, v = l * o - s * n - u * a - f * i;
  return TS(r, e, t), n = r[0], a = r[1], i = r[2], o = r[3], r[4] = c * o + v * n + h * i - d * a, r[5] = h * o + v * a + d * n - c * i, r[6] = d * o + v * i + c * a - h * n, r[7] = v * o - c * n - h * a - d * i, r;
}
function bF(r, e, t) {
  var n = -e[0], a = -e[1], i = -e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = s * o + l * n + u * i - f * a, h = u * o + l * a + f * n - s * i, d = f * o + l * i + s * a - u * n, v = l * o - s * n - u * a - f * i;
  return IS(r, e, t), n = r[0], a = r[1], i = r[2], o = r[3], r[4] = c * o + v * n + h * i - d * a, r[5] = h * o + v * a + d * n - c * i, r[6] = d * o + v * i + c * a - h * n, r[7] = v * o - c * n - h * a - d * i, r;
}
function EF(r, e, t) {
  var n = -e[0], a = -e[1], i = -e[2], o = e[3], s = e[4], u = e[5], f = e[6], l = e[7], c = s * o + l * n + u * i - f * a, h = u * o + l * a + f * n - s * i, d = f * o + l * i + s * a - u * n, v = l * o - s * n - u * a - f * i;
  return OS(r, e, t), n = r[0], a = r[1], i = r[2], o = r[3], r[4] = c * o + v * n + h * i - d * a, r[5] = h * o + v * a + d * n - c * i, r[6] = d * o + v * i + c * a - h * n, r[7] = v * o - c * n - h * a - d * i, r;
}
function xF(r, e, t) {
  var n = t[0], a = t[1], i = t[2], o = t[3], s = e[0], u = e[1], f = e[2], l = e[3];
  return r[0] = s * o + l * n + u * i - f * a, r[1] = u * o + l * a + f * n - s * i, r[2] = f * o + l * i + s * a - u * n, r[3] = l * o - s * n - u * a - f * i, s = e[4], u = e[5], f = e[6], l = e[7], r[4] = s * o + l * n + u * i - f * a, r[5] = u * o + l * a + f * n - s * i, r[6] = f * o + l * i + s * a - u * n, r[7] = l * o - s * n - u * a - f * i, r;
}
function wF(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t[0], u = t[1], f = t[2], l = t[3];
  return r[0] = n * l + o * s + a * f - i * u, r[1] = a * l + o * u + i * s - n * f, r[2] = i * l + o * f + n * u - a * s, r[3] = o * l - n * s - a * u - i * f, s = t[4], u = t[5], f = t[6], l = t[7], r[4] = n * l + o * s + a * f - i * u, r[5] = a * l + o * u + i * s - n * f, r[6] = i * l + o * f + n * u - a * s, r[7] = o * l - n * s - a * u - i * f, r;
}
function _F(r, e, t, n) {
  if (Math.abs(n) < yt)
    return RS(r, e);
  var a = Math.hypot(t[0], t[1], t[2]);
  n = n * 0.5;
  var i = Math.sin(n), o = i * t[0] / a, s = i * t[1] / a, u = i * t[2] / a, f = Math.cos(n), l = e[0], c = e[1], h = e[2], d = e[3];
  r[0] = l * f + d * o + c * u - h * s, r[1] = c * f + d * s + h * o - l * u, r[2] = h * f + d * u + l * s - c * o, r[3] = d * f - l * o - c * s - h * u;
  var v = e[4], p = e[5], g = e[6], y = e[7];
  return r[4] = v * f + y * o + p * u - g * s, r[5] = p * f + y * s + g * o - v * u, r[6] = g * f + y * u + v * s - p * o, r[7] = y * f - v * o - p * s - g * u, r;
}
function MF(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r[2] = e[2] + t[2], r[3] = e[3] + t[3], r[4] = e[4] + t[4], r[5] = e[5] + t[5], r[6] = e[6] + t[6], r[7] = e[7] + t[7], r;
}
function BS(r, e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t[4], u = t[5], f = t[6], l = t[7], c = e[4], h = e[5], d = e[6], v = e[7], p = t[0], g = t[1], y = t[2], m = t[3];
  return r[0] = n * m + o * p + a * y - i * g, r[1] = a * m + o * g + i * p - n * y, r[2] = i * m + o * y + n * g - a * p, r[3] = o * m - n * p - a * g - i * y, r[4] = n * l + o * s + a * f - i * u + c * m + v * p + h * y - d * g, r[5] = a * l + o * u + i * s - n * f + h * m + v * g + d * p - c * y, r[6] = i * l + o * f + n * u - a * s + d * m + v * y + c * g - h * p, r[7] = o * l - n * s - a * u - i * f + v * m - c * p - h * g - d * y, r;
}
var SF = BS;
function AF(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r[2] = e[2] * t, r[3] = e[3] * t, r[4] = e[4] * t, r[5] = e[5] * t, r[6] = e[6] * t, r[7] = e[7] * t, r;
}
var FS = fy;
function CF(r, e, t, n) {
  var a = 1 - n;
  return FS(e, t) < 0 && (n = -n), r[0] = e[0] * a + t[0] * n, r[1] = e[1] * a + t[1] * n, r[2] = e[2] * a + t[2] * n, r[3] = e[3] * a + t[3] * n, r[4] = e[4] * a + t[4] * n, r[5] = e[5] * a + t[5] * n, r[6] = e[6] * a + t[6] * n, r[7] = e[7] * a + t[7] * n, r;
}
function TF(r, e) {
  var t = od(e);
  return r[0] = -e[0] / t, r[1] = -e[1] / t, r[2] = -e[2] / t, r[3] = e[3] / t, r[4] = -e[4] / t, r[5] = -e[5] / t, r[6] = -e[6] / t, r[7] = e[7] / t, r;
}
function IF(r, e) {
  return r[0] = -e[0], r[1] = -e[1], r[2] = -e[2], r[3] = e[3], r[4] = -e[4], r[5] = -e[5], r[6] = -e[6], r[7] = e[7], r;
}
var GS = ly, OF = GS, od = cy, DF = od;
function LF(r, e) {
  var t = od(e);
  if (t > 0) {
    t = Math.sqrt(t);
    var n = e[0] / t, a = e[1] / t, i = e[2] / t, o = e[3] / t, s = e[4], u = e[5], f = e[6], l = e[7], c = n * s + a * u + i * f + o * l;
    r[0] = n, r[1] = a, r[2] = i, r[3] = o, r[4] = (s - n * c) / t, r[5] = (u - a * c) / t, r[6] = (f - i * c) / t, r[7] = (l - o * c) / t;
  }
  return r;
}
function NF(r) {
  return "quat2(" + r[0] + ", " + r[1] + ", " + r[2] + ", " + r[3] + ", " + r[4] + ", " + r[5] + ", " + r[6] + ", " + r[7] + ")";
}
function PF(r, e) {
  return r[0] === e[0] && r[1] === e[1] && r[2] === e[2] && r[3] === e[3] && r[4] === e[4] && r[5] === e[5] && r[6] === e[6] && r[7] === e[7];
}
function kF(r, e) {
  var t = r[0], n = r[1], a = r[2], i = r[3], o = r[4], s = r[5], u = r[6], f = r[7], l = e[0], c = e[1], h = e[2], d = e[3], v = e[4], p = e[5], g = e[6], y = e[7];
  return Math.abs(t - l) <= yt * Math.max(1, Math.abs(t), Math.abs(l)) && Math.abs(n - c) <= yt * Math.max(1, Math.abs(n), Math.abs(c)) && Math.abs(a - h) <= yt * Math.max(1, Math.abs(a), Math.abs(h)) && Math.abs(i - d) <= yt * Math.max(1, Math.abs(i), Math.abs(d)) && Math.abs(o - v) <= yt * Math.max(1, Math.abs(o), Math.abs(v)) && Math.abs(s - p) <= yt * Math.max(1, Math.abs(s), Math.abs(p)) && Math.abs(u - g) <= yt * Math.max(1, Math.abs(u), Math.abs(g)) && Math.abs(f - y) <= yt * Math.max(1, Math.abs(f), Math.abs(y));
}
const RF = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: MF,
  clone: aF,
  conjugate: IF,
  copy: RS,
  create: nF,
  dot: FS,
  equals: kF,
  exactEquals: PF,
  fromMat4: fF,
  fromRotation: uF,
  fromRotationTranslation: kS,
  fromRotationTranslationValues: oF,
  fromTranslation: sF,
  fromValues: iF,
  getDual: dF,
  getReal: hF,
  getTranslation: gF,
  identity: lF,
  invert: TF,
  len: OF,
  length: GS,
  lerp: CF,
  mul: SF,
  multiply: BS,
  normalize: LF,
  rotateAroundAxis: _F,
  rotateByQuatAppend: xF,
  rotateByQuatPrepend: wF,
  rotateX: mF,
  rotateY: bF,
  rotateZ: EF,
  scale: AF,
  set: cF,
  setDual: pF,
  setReal: vF,
  sqrLen: DF,
  squaredLength: od,
  str: NF,
  translate: yF
}, Symbol.toStringTag, { value: "Module" }));
function zS() {
  var r = new Ht(2);
  return Ht != Float32Array && (r[0] = 0, r[1] = 0), r;
}
function BF(r) {
  var e = new Ht(2);
  return e[0] = r[0], e[1] = r[1], e;
}
function FF(r, e) {
  var t = new Ht(2);
  return t[0] = r, t[1] = e, t;
}
function GF(r, e) {
  return r[0] = e[0], r[1] = e[1], r;
}
function zF(r, e, t) {
  return r[0] = e, r[1] = t, r;
}
function cn(r, e, t) {
  return r[0] = e[0] + t[0], r[1] = e[1] + t[1], r;
}
function US(r, e, t) {
  return r[0] = e[0] - t[0], r[1] = e[1] - t[1], r;
}
function jS(r, e, t) {
  return r[0] = e[0] * t[0], r[1] = e[1] * t[1], r;
}
function $S(r, e, t) {
  return r[0] = e[0] / t[0], r[1] = e[1] / t[1], r;
}
function UF(r, e) {
  return r[0] = Math.ceil(e[0]), r[1] = Math.ceil(e[1]), r;
}
function jF(r, e) {
  return r[0] = Math.floor(e[0]), r[1] = Math.floor(e[1]), r;
}
function Ui(r, e, t) {
  return r[0] = Math.min(e[0], t[0]), r[1] = Math.min(e[1], t[1]), r;
}
function ji(r, e, t) {
  return r[0] = Math.max(e[0], t[0]), r[1] = Math.max(e[1], t[1]), r;
}
function $F(r, e) {
  return r[0] = Math.round(e[0]), r[1] = Math.round(e[1]), r;
}
function xn(r, e, t) {
  return r[0] = e[0] * t, r[1] = e[1] * t, r;
}
function WF(r, e, t, n) {
  return r[0] = e[0] + t[0] * n, r[1] = e[1] + t[1] * n, r;
}
function bh(r, e) {
  var t = e[0] - r[0], n = e[1] - r[1];
  return Math.hypot(t, n);
}
function WS(r, e) {
  var t = e[0] - r[0], n = e[1] - r[1];
  return t * t + n * n;
}
function XS(r) {
  var e = r[0], t = r[1];
  return Math.hypot(e, t);
}
function VS(r) {
  var e = r[0], t = r[1];
  return e * e + t * t;
}
function XF(r, e) {
  return r[0] = -e[0], r[1] = -e[1], r;
}
function VF(r, e) {
  return r[0] = 1 / e[0], r[1] = 1 / e[1], r;
}
function qi(r, e) {
  var t = e[0], n = e[1], a = t * t + n * n;
  return a > 0 && (a = 1 / Math.sqrt(a)), r[0] = e[0] * a, r[1] = e[1] * a, r;
}
function dy(r, e) {
  return r[0] * e[0] + r[1] * e[1];
}
function YF(r, e, t) {
  var n = e[0] * t[1] - e[1] * t[0];
  return r[0] = r[1] = 0, r[2] = n, r;
}
function HF(r, e, t, n) {
  var a = e[0], i = e[1];
  return r[0] = a + n * (t[0] - a), r[1] = i + n * (t[1] - i), r;
}
function KF(r, e) {
  e = e || 1;
  var t = ma() * 2 * Math.PI;
  return r[0] = Math.cos(t) * e, r[1] = Math.sin(t) * e, r;
}
function qF(r, e, t) {
  var n = e[0], a = e[1];
  return r[0] = t[0] * n + t[2] * a, r[1] = t[1] * n + t[3] * a, r;
}
function ZF(r, e, t) {
  var n = e[0], a = e[1];
  return r[0] = t[0] * n + t[2] * a + t[4], r[1] = t[1] * n + t[3] * a + t[5], r;
}
function QF(r, e, t) {
  var n = e[0], a = e[1];
  return r[0] = t[0] * n + t[3] * a + t[6], r[1] = t[1] * n + t[4] * a + t[7], r;
}
function JF(r, e, t) {
  var n = e[0], a = e[1];
  return r[0] = t[0] * n + t[4] * a + t[12], r[1] = t[1] * n + t[5] * a + t[13], r;
}
function e4(r, e, t, n) {
  var a = e[0] - t[0], i = e[1] - t[1], o = Math.sin(n), s = Math.cos(n);
  return r[0] = a * s - i * o + t[0], r[1] = a * o + i * s + t[1], r;
}
function YS(r, e) {
  var t = r[0], n = r[1], a = e[0], i = e[1], o = Math.sqrt(t * t + n * n) * Math.sqrt(a * a + i * i), s = o && (t * a + n * i) / o;
  return Math.acos(Math.min(Math.max(s, -1), 1));
}
function t4(r) {
  return r[0] = 0, r[1] = 0, r;
}
function r4(r) {
  return "vec2(" + r[0] + ", " + r[1] + ")";
}
function vy(r, e) {
  return r[0] === e[0] && r[1] === e[1];
}
function n4(r, e) {
  var t = r[0], n = r[1], a = e[0], i = e[1];
  return Math.abs(t - a) <= yt * Math.max(1, Math.abs(t), Math.abs(a)) && Math.abs(n - i) <= yt * Math.max(1, Math.abs(n), Math.abs(i));
}
var a4 = XS, Vc = US, i4 = jS, o4 = $S, s4 = bh, u4 = WS, f4 = VS, l4 = function() {
  var r = zS();
  return function(e, t, n, a, i, o) {
    var s, u;
    for (t || (t = 2), n || (n = 0), a ? u = Math.min(a * t + n, e.length) : u = e.length, s = n; s < u; s += t)
      r[0] = e[s], r[1] = e[s + 1], i(r, r, o), e[s] = r[0], e[s + 1] = r[1];
    return e;
  };
}();
const c4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  add: cn,
  angle: YS,
  ceil: UF,
  clone: BF,
  copy: GF,
  create: zS,
  cross: YF,
  dist: s4,
  distance: bh,
  div: o4,
  divide: $S,
  dot: dy,
  equals: n4,
  exactEquals: vy,
  floor: jF,
  forEach: l4,
  fromValues: FF,
  inverse: VF,
  len: a4,
  length: XS,
  lerp: HF,
  max: ji,
  min: Ui,
  mul: i4,
  multiply: jS,
  negate: XF,
  normalize: qi,
  random: KF,
  rotate: e4,
  round: $F,
  scale: xn,
  scaleAndAdd: WF,
  set: zF,
  sqrDist: u4,
  sqrLen: f4,
  squaredDistance: WS,
  squaredLength: VS,
  str: r4,
  sub: Vc,
  subtract: US,
  transformMat2: qF,
  transformMat2d: ZF,
  transformMat3: QF,
  transformMat4: JF,
  zero: t4
}, Symbol.toStringTag, { value: "Module" })), h4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  glMatrix: bR,
  mat2: WR,
  mat2d: v3,
  mat3: WM,
  mat4: T5,
  quat: rF,
  quat2: RF,
  vec2: c4,
  vec3: fB,
  vec4: LB
}, Symbol.toStringTag, { value: "Module" }));
function d4(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return ty(n, t), ei(r, n, e);
}
function v4(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return ry(n, t), ei(r, n, e);
}
function p4(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return ny(n, t), ei(r, n, e);
}
function g4(r, e, t) {
  return ei(r, t, e);
}
function io(r, e) {
  for (var t = r ? [].concat(r) : [1, 0, 0, 0, 1, 0, 0, 0, 1], n = 0, a = e.length; n < a; n++) {
    var i = e[n];
    switch (i[0]) {
      case "t":
        d4(t, t, [i[1], i[2]]);
        break;
      case "s":
        p4(t, t, [i[1], i[2]]);
        break;
      case "r":
        v4(t, t, i[1]);
        break;
      case "m":
        g4(t, t, i[1]);
        break;
    }
  }
  return t;
}
var $o = function(e, t) {
  var n = e.nodes, a = e.edges, i = [], o = {};
  if (!n)
    throw new Error("invalid nodes data!");
  return n && n.forEach(function(s, u) {
    o[s.id] = u;
    var f = [];
    i.push(f);
  }), a && a.forEach(function(s) {
    var u = s.source, f = s.target, l = o[u], c = o[f];
    !l && l !== 0 || !c && c !== 0 || (i[l][c] = 1, t || (i[c][l] = 1));
  }), i;
}, y4 = function(e, t) {
  return e === t;
}, Qb = (
  /** @class */
  function() {
    function r(e, t) {
      t === void 0 && (t = null), this.value = e, this.next = t;
    }
    return r.prototype.toString = function(e) {
      return e ? e(this.value) : "".concat(this.value);
    }, r;
  }()
), HS = (
  /** @class */
  function() {
    function r(e) {
      e === void 0 && (e = y4), this.head = null, this.tail = null, this.compare = e;
    }
    return r.prototype.prepend = function(e) {
      var t = new Qb(e, this.head);
      return this.head = t, this.tail || (this.tail = t), this;
    }, r.prototype.append = function(e) {
      var t = new Qb(e);
      return this.head ? (this.tail.next = t, this.tail = t, this) : (this.head = t, this.tail = t, this);
    }, r.prototype.delete = function(e) {
      if (!this.head)
        return null;
      for (var t = null; this.head && this.compare(this.head.value, e); )
        t = this.head, this.head = this.head.next;
      var n = this.head;
      if (n !== null)
        for (; n.next; )
          this.compare(n.next.value, e) ? (t = n.next, n.next = n.next.next) : n = n.next;
      return this.compare(this.tail.value, e) && (this.tail = n), t;
    }, r.prototype.find = function(e) {
      var t = e.value, n = t === void 0 ? void 0 : t, a = e.callback, i = a === void 0 ? void 0 : a;
      if (!this.head)
        return null;
      for (var o = this.head; o; ) {
        if (i && i(o.value) || n !== void 0 && this.compare(o.value, n))
          return o;
        o = o.next;
      }
      return null;
    }, r.prototype.deleteTail = function() {
      var e = this.tail;
      if (this.head === this.tail)
        return this.head = null, this.tail = null, e;
      for (var t = this.head; t.next; )
        t.next.next ? t = t.next : t.next = null;
      return this.tail = t, e;
    }, r.prototype.deleteHead = function() {
      if (!this.head)
        return null;
      var e = this.head;
      return this.head.next ? this.head = this.head.next : (this.head = null, this.tail = null), e;
    }, r.prototype.fromArray = function(e) {
      var t = this;
      return e.forEach(function(n) {
        return t.append(n);
      }), this;
    }, r.prototype.toArray = function() {
      for (var e = [], t = this.head; t; )
        e.push(t), t = t.next;
      return e;
    }, r.prototype.reverse = function() {
      for (var e = this.head, t = null, n = null; e; )
        n = e.next, e.next = t, t = e, e = n;
      this.tail = this.head, this.head = t;
    }, r.prototype.toString = function(e) {
      return e === void 0 && (e = void 0), this.toArray().map(function(t) {
        return t.toString(e);
      }).toString();
    }, r;
  }()
), m4 = (
  /** @class */
  function() {
    function r() {
      this.linkedList = new HS();
    }
    return r.prototype.isEmpty = function() {
      return !this.linkedList.head;
    }, r.prototype.peek = function() {
      return this.linkedList.head ? this.linkedList.head.value : null;
    }, r.prototype.enqueue = function(e) {
      this.linkedList.append(e);
    }, r.prototype.dequeue = function() {
      var e = this.linkedList.deleteHead();
      return e ? e.value : null;
    }, r.prototype.toString = function(e) {
      return this.linkedList.toString(e);
    }, r;
  }()
), Wn = function(e, t, n) {
  t === void 0 && (t = []);
  var a = t.filter(function(u) {
    return u.source === e || u.target === e;
  });
  if (n === "target") {
    var i = function(f) {
      return f.source === e;
    };
    return a.filter(i).map(function(u) {
      return u.target;
    });
  }
  if (n === "source") {
    var o = function(f) {
      return f.target === e;
    };
    return a.filter(o).map(function(u) {
      return u.source;
    });
  }
  var s = function(f) {
    return f.source === e ? f.target : f.source;
  };
  return a.map(s);
}, b4 = function(e, t) {
  return t.filter(function(n) {
    return n.source === e;
  });
}, Yc = function(e, t) {
  return t.filter(function(n) {
    return n.source === e || n.target === e;
  });
}, KS = function(e) {
  e === void 0 && (e = 0);
  var t = "".concat(Math.random()).split(".")[1].substr(0, 5), n = "".concat(Math.random()).split(".")[1].substr(0, 5);
  return "".concat(e, "-").concat(t).concat(n);
};
function E4(r) {
  r === void 0 && (r = {});
  var e = r, t = function() {
  }, n = /* @__PURE__ */ function() {
    var a = {};
    return function(i) {
      var o = i.next, s = o;
      return a[s] ? !1 : (a[s] = !0, !0);
    };
  }();
  return e.allowTraversal = r.allowTraversal || n, e.enter = r.enter || t, e.leave = r.leave || t, e;
}
var qS = function(e, t, n, a) {
  a === void 0 && (a = !0);
  var i = E4(n), o = new m4(), s = e.edges, u = s === void 0 ? [] : s;
  o.enqueue(t);
  for (var f = "", l = function() {
    var h = o.dequeue();
    i.enter({
      current: h,
      previous: f
    }), Wn(h, u, a ? "target" : void 0).forEach(function(d) {
      i.allowTraversal({
        previous: f,
        current: h,
        next: d
      }) && o.enqueue(d);
    }), i.leave({
      current: h,
      previous: f
    }), f = h;
  }; !o.isEmpty(); )
    l();
}, x4 = function(e) {
  for (var t = e.nodes, n = t === void 0 ? [] : t, a = e.edges, i = a === void 0 ? [] : a, o = [], s = {}, u = [], f = function d(v) {
    u.push(v), s[v.id] = !0;
    for (var p = Wn(v.id, i), g = function(b) {
      var E = p[b];
      if (!s[E]) {
        var x = n.filter(function(w) {
          return w.id === E;
        });
        x.length > 0 && d(x[0]);
      }
    }, y = 0; y < p.length; ++y)
      g(y);
  }, l = 0; l < n.length; l++) {
    var c = n[l];
    if (!s[c.id]) {
      f(c);
      for (var h = []; u.length > 0; )
        h.push(u.pop());
      o.push(h);
    }
  }
  return o;
}, ZS = function(e) {
  for (var t = e.nodes, n = t === void 0 ? [] : t, a = e.edges, i = a === void 0 ? [] : a, o = [], s = {}, u = {}, f = {}, l = [], c = 0, h = function g(y) {
    u[y.id] = c, f[y.id] = c, c += 1, o.push(y), s[y.id] = !0;
    for (var m = Wn(y.id, i, "target").filter(function(_) {
      return n.map(function(M) {
        return M.id;
      }).indexOf(_) > -1;
    }), b = function(M) {
      var A = m[M];
      if (!u[A] && u[A] !== 0) {
        var S = n.filter(function(T) {
          return T.id === A;
        });
        S.length > 0 && g(S[0]), f[y.id] = Math.min(f[y.id], f[A]);
      } else
        s[A] && (f[y.id] = Math.min(f[y.id], u[A]));
    }, E = 0; E < m.length; E++)
      b(E);
    if (f[y.id] === u[y.id]) {
      for (var x = []; o.length > 0; ) {
        var w = o.pop();
        if (s[w.id] = !1, x.push(w), w === y)
          break;
      }
      x.length > 0 && l.push(x);
    }
  }, d = 0, v = n; d < v.length; d++) {
    var p = v[d];
    !u[p.id] && u[p.id] !== 0 && h(p);
  }
  return l;
};
function py(r, e) {
  return e ? ZS(r) : x4(r);
}
var Mi = function(e) {
  var t = {}, n = e.nodes, a = n === void 0 ? [] : n, i = e.edges, o = i === void 0 ? [] : i;
  return a.forEach(function(s) {
    t[s.id] = {
      degree: 0,
      inDegree: 0,
      outDegree: 0
    };
  }), o.forEach(function(s) {
    t[s.source].degree++, t[s.source].outDegree++, t[s.target].degree++, t[s.target].inDegree++;
  }), t;
}, QS = function(e, t) {
  var n = Mi(e);
  return n[t] ? Mi(e)[t].inDegree : 0;
}, JS = function(e, t) {
  var n = Mi(e);
  return n[t] ? Mi(e)[t].outDegree : 0;
};
function w4(r) {
  r === void 0 && (r = {});
  var e = r, t = function() {
  }, n = /* @__PURE__ */ function() {
    var a = {};
    return function(i) {
      var o = i.next;
      return a[o] ? !1 : (a[o] = !0, !0);
    };
  }();
  return e.allowTraversal = r.allowTraversal || n, e.enter = r.enter || t, e.leave = r.leave || t, e;
}
function eA(r, e, t, n, a) {
  a === void 0 && (a = !0), n.enter({
    current: e,
    previous: t
  });
  var i = r.edges, o = i === void 0 ? [] : i;
  Wn(e, o, a ? "target" : void 0).forEach(function(s) {
    n.allowTraversal({
      previous: t,
      current: e,
      next: s
    }) && eA(r, s, e, n, a);
  }), n.leave({
    current: e,
    previous: t
  });
}
function gy(r, e, t, n) {
  n === void 0 && (n = !0), eA(r, e, "", w4(t), n);
}
var yy = function(e) {
  var t = null, n = e.nodes, a = n === void 0 ? [] : n, i = {}, o = {}, s = {}, u = {};
  a.forEach(function(c) {
    o[c.id] = c;
  });
  for (var f = {
    enter: function(h) {
      var d = h.current, v = h.previous;
      if (s[d]) {
        t = {};
        for (var p = d, g = v; g !== d; )
          t[p] = g, p = g, g = i[g];
        t[p] = g;
      } else
        s[d] = d, delete o[d], i[d] = v;
    },
    leave: function(h) {
      var d = h.current;
      u[d] = d, delete s[d];
    },
    allowTraversal: function(h) {
      var d = h.next;
      return t ? !1 : !u[d];
    }
  }; Object.keys(o).length; ) {
    var l = Object.keys(o)[0];
    gy(e, l, f);
  }
  return t;
}, my = function(e, t, n) {
  var a, i;
  n === void 0 && (n = !0);
  for (var o = [], s = py(e, !1), u = 0, f = s; u < f.length; u++) {
    var l = f[u];
    if (l.length)
      for (var c = l[0], h = c.id, d = [c], v = (a = {}, a[h] = c, a), p = (i = {}, i[h] = /* @__PURE__ */ new Set(), i); d.length > 0; )
        for (var g = d.pop(), y = g.id, m = Wn(y, e.edges), b = function(w) {
          var _, M = m[w], A = e.nodes.find(function(R) {
            return R.id === M;
          });
          if (M === y)
            o.push((_ = {}, _[M] = g, _));
          else if (!(M in p))
            v[M] = g, d.push(A), p[M] = /* @__PURE__ */ new Set([g]);
          else if (!p[y].has(A)) {
            for (var S = !0, T = [A, g], C = v[y]; p[M].size && !p[M].has(C) && (T.push(C), C !== v[C.id]); )
              C = v[C.id];
            if (T.push(C), t && n ? (S = !1, T.findIndex(function(R) {
              return t.indexOf(R.id) > -1;
            }) > -1 && (S = !0)) : t && !n && T.findIndex(function(R) {
              return t.indexOf(R.id) > -1;
            }) > -1 && (S = !1), S) {
              for (var O = {}, L = 1; L < T.length; L += 1)
                O[T[L - 1].id] = T[L];
              T.length && (O[T[T.length - 1].id] = T[0]), o.push(O);
            }
            p[M].add(g);
          }
        }, E = 0; E < m.length; E += 1)
          b(E);
  }
  return o;
}, by = function(e, t, n) {
  n === void 0 && (n = !0);
  for (var a = [], i = /* @__PURE__ */ new Set(), o = [], s = [], u = {}, f = {}, l = function(C) {
    for (var O = [C]; O.length > 0; ) {
      var L = O.pop();
      i.has(L) && (i.delete(L), o[L.id].forEach(function(R) {
        O.push(R);
      }), o[L.id].clear());
    }
  }, c = function T(C, O, L) {
    var R = !1;
    if (t && n === !1 && t.indexOf(C.id) > -1)
      return R;
    a.push(C), i.add(C);
    for (var P = L[C.id], z = 0; z < P.length; z += 1) {
      var V = u[P[z]];
      if (V === O) {
        for (var N = {}, F = 1; F < a.length; F += 1)
          N[a[F - 1].id] = a[F];
        a.length && (N[a[a.length - 1].id] = a[0]), s.push(N), R = !0;
      } else
        i.has(V) || T(V, O, L) && (R = !0);
    }
    if (R)
      l(C);
    else
      for (var z = 0; z < P.length; z += 1) {
        var V = u[P[z]];
        o[V.id].has(C) || o[V.id].add(C);
      }
    return a.pop(), R;
  }, h = e.nodes, d = h === void 0 ? [] : h, v = 0; v < d.length; v += 1) {
    var p = d[v], g = p.id;
    f[g] = v, u[v] = p;
  }
  if (t && n)
    for (var y = function(C) {
      var O = t[C];
      f[d[C].id] = f[O], f[O] = 0, u[0] = d.find(function(L) {
        return L.id === O;
      }), u[f[d[C].id]] = d[C];
    }, v = 0; v < t.length; v++)
      y(v);
  for (var m = function(C) {
    for (var O, L, R = 1 / 0, P = 0; P < C.length; P += 1)
      for (var z = C[P], V = 0; V < z.length; V++) {
        var N = f[z[V].id];
        N < R && (R = N, L = P);
      }
    for (var F = C[L], q = [], P = 0; P < F.length; P += 1) {
      var te = F[P];
      q[te.id] = [];
      for (var re = 0, J = Wn(te.id, e.edges, "target").filter(function(Pe) {
        return F.map(function(et) {
          return et.id;
        }).indexOf(Pe) > -1;
      }); re < J.length; re++) {
        var ye = J[re];
        ye === te.id && !(n === !1 && t.indexOf(te.id) > -1) ? s.push((O = {}, O[te.id] = te, O)) : q[te.id].push(f[ye]);
      }
    }
    return {
      component: F,
      adjList: q,
      minIdx: R
    };
  }, b = 0; b < d.length; ) {
    var E = d.filter(function(T) {
      return f[T.id] >= b;
    }), x = ZS({
      nodes: E,
      edges: e.edges
    }).filter(function(T) {
      return T.length > 1;
    });
    if (x.length === 0)
      break;
    var w = m(x), _ = w.minIdx, M = w.adjList, A = w.component;
    if (A.length > 1) {
      A.forEach(function(T) {
        o[T.id] = /* @__PURE__ */ new Set();
      });
      var S = u[_];
      if (t && n && t.indexOf(S.id) === -1)
        return s;
      c(S, S, M), b = _ + 1;
    } else
      break;
  }
  return s;
}, tA = function(e, t, n, a) {
  return a === void 0 && (a = !0), t ? by(e, n, a) : my(e, n, a);
}, _4 = function(e, t, n) {
  for (var a = 1 / 0, i, o = 0; o < t.length; o++) {
    var s = t[o].id;
    !n[s] && e[s] <= a && (a = e[s], i = t[o]);
  }
  return i;
}, Mf = function(e, t, n, a) {
  var i = e.nodes, o = i === void 0 ? [] : i, s = e.edges, u = s === void 0 ? [] : s, f = {}, l = {}, c = {};
  o.forEach(function(m, b) {
    var E = m.id;
    l[E] = 1 / 0, E === t && (l[E] = 0);
  });
  for (var h = o.length, d = function(b) {
    var E = _4(l, o, f), x = E.id;
    if (f[x] = !0, l[x] === 1 / 0)
      return "continue";
    var w = [];
    n ? w = b4(x, u) : w = Yc(x, u), w.forEach(function(_) {
      var M = _.target, A = _.source, S = M === x ? A : M, T = a && _[a] ? _[a] : 1;
      l[S] > l[E.id] + T ? (l[S] = l[E.id] + T, c[S] = [E.id]) : l[S] === l[E.id] + T && c[S].push(E.id);
    });
  }, v = 0; v < h; v++)
    d();
  c[t] = [t];
  var p = {};
  for (var g in l)
    l[g] !== 1 / 0 && rA(t, g, c, p);
  var y = {};
  for (var g in p)
    y[g] = p[g][0];
  return {
    length: l,
    path: y,
    allPath: p
  };
};
function rA(r, e, t, n) {
  if (r === e)
    return [r];
  if (n[e])
    return n[e];
  for (var a = [], i = 0, o = t[e]; i < o.length; i++) {
    var s = o[i], u = rA(r, s, t, n);
    if (!u)
      return;
    for (var f = 0, l = u; f < l.length; f++) {
      var c = l[f];
      bt(c) ? a.push(Yn(Yn([], c, !0), [e], !1)) : a.push([c, e]);
    }
  }
  return n[e] = a, n[e];
}
var nA = function(e, t, n, a, i) {
  var o = Mf(e, t, a, i), s = o.length, u = o.path, f = o.allPath;
  return {
    length: s[n],
    path: u[n],
    allPath: f[n]
  };
}, aA = function(e, t, n, a) {
  var i;
  if (t === n)
    return [[t]];
  var o = e.edges, s = o === void 0 ? [] : o, u = [t], f = (i = {}, i[t] = !0, i), l = [], c = [], h = a ? Wn(t, s, "target") : Wn(t, s);
  for (l.push(h); u.length > 0 && l.length > 0; ) {
    var d = l[l.length - 1];
    if (d.length) {
      var v = d.shift();
      v && (u.push(v), f[v] = !0, h = a ? Wn(v, s, "target") : Wn(v, s), l.push(h.filter(function(y) {
        return !f[y];
      })));
    } else {
      var p = u.pop();
      f[p] = !1, l.pop();
      continue;
    }
    if (u[u.length - 1] === n) {
      var g = u.map(function(m) {
        return m;
      });
      c.push(g);
      var p = u.pop();
      f[p] = !1, l.pop();
    }
  }
  return c;
}, Sf = function(e, t) {
  for (var n = $o(e, t), a = [], i = n.length, o = 0; o < i; o += 1) {
    a[o] = [];
    for (var s = 0; s < i; s += 1)
      o === s ? a[o][s] = 0 : n[o][s] === 0 || !n[o][s] ? a[o][s] = 1 / 0 : a[o][s] = n[o][s];
  }
  for (var u = 0; u < i; u += 1)
    for (var o = 0; o < i; o += 1)
      for (var s = 0; s < i; s += 1)
        a[o][s] > a[o][u] + a[u][s] && (a[o][s] = a[o][u] + a[u][s]);
  return a;
}, iA = function(e, t, n, a) {
  t === void 0 && (t = !1), n === void 0 && (n = "weight"), a === void 0 && (a = 1e3);
  var i = e.nodes, o = i === void 0 ? [] : i, s = e.edges, u = s === void 0 ? [] : s, f = {}, l = {};
  o.forEach(function(b, E) {
    var x = KS();
    b.clusterId = x, f[x] = {
      id: x,
      nodes: [b]
    }, l[b.id] = {
      node: b,
      idx: E
    };
  });
  var c = $o(e, t), h = {};
  c.forEach(function(b, E) {
    var x = o[E].id;
    h[x] = {}, b.forEach(function(w, _) {
      if (w) {
        var M = o[_].id;
        h[x][M] = w;
      }
    });
  });
  for (var d = 0, v = function() {
    var E = !1;
    if (o.forEach(function(x) {
      var w = {};
      Object.keys(h[x.id]).forEach(function(L) {
        var R = h[x.id][L], P = l[L].node, z = P.clusterId;
        w[z] || (w[z] = 0), w[z] += R;
      });
      var _ = -1 / 0, M = [];
      if (Object.keys(w).forEach(function(L) {
        _ < w[L] ? (_ = w[L], M = [L]) : _ === w[L] && M.push(L);
      }), !(M.length === 1 && M[0] === x.clusterId)) {
        var A = M.indexOf(x.clusterId);
        if (A >= 0 && M.splice(A, 1), M && M.length) {
          E = !0;
          var S = f[x.clusterId], T = S.nodes.indexOf(x);
          S.nodes.splice(T, 1);
          var C = Math.floor(Math.random() * M.length), O = f[M[C]];
          O.nodes.push(x), x.clusterId = O.id;
        }
      }
    }), !E)
      return "break";
    d++;
  }; d < a; ) {
    var p = v();
    if (p === "break")
      break;
  }
  Object.keys(f).forEach(function(b) {
    var E = f[b];
    (!E.nodes || !E.nodes.length) && delete f[b];
  });
  var g = [], y = {};
  u.forEach(function(b) {
    var E = b.source, x = b.target, w = b[n] || 1, _ = l[E].node.clusterId, M = l[x].node.clusterId, A = "".concat(_, "---").concat(M);
    if (y[A])
      y[A].weight += w, y[A].count++;
    else {
      var S = {
        source: _,
        target: M,
        weight: w,
        count: 1
      };
      y[A] = S, g.push(S);
    }
  });
  var m = [];
  return Object.keys(f).forEach(function(b) {
    m.push(f[b]);
  }), {
    clusters: m,
    clusterEdges: g
  };
}, ia = (
  /** @class */
  function() {
    function r(e) {
      this.arr = e;
    }
    return r.prototype.getArr = function() {
      return this.arr || [];
    }, r.prototype.add = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length))
        return new r(n);
      if (!(n != null && n.length))
        return new r(this.arr);
      if (this.arr.length === n.length) {
        var a = [];
        for (var i in this.arr)
          a[i] = this.arr[i] + n[i];
        return new r(a);
      }
    }, r.prototype.subtract = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length))
        return new r(n);
      if (!(n != null && n.length))
        return new r(this.arr);
      if (this.arr.length === n.length) {
        var a = [];
        for (var i in this.arr)
          a[i] = this.arr[i] - n[i];
        return new r(a);
      }
    }, r.prototype.avg = function(e) {
      var t = [];
      if (e !== 0)
        for (var n in this.arr)
          t[n] = this.arr[n] / e;
      return new r(t);
    }, r.prototype.negate = function() {
      var e = [];
      for (var t in this.arr)
        e[t] = -this.arr[t];
      return new r(e);
    }, r.prototype.squareEuclideanDistance = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length) || !(n != null && n.length))
        return 0;
      if (this.arr.length === n.length) {
        var a = 0;
        for (var i in this.arr)
          a += Math.pow(this.arr[i] - e.arr[i], 2);
        return a;
      }
    }, r.prototype.euclideanDistance = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length) || !(n != null && n.length))
        return 0;
      if (this.arr.length === n.length) {
        var a = 0;
        for (var i in this.arr)
          a += Math.pow(this.arr[i] - e.arr[i], 2);
        return Math.sqrt(a);
      } else
        console.error("The two vectors are unequal in length.");
    }, r.prototype.normalize = function() {
      var e = [], t = nr(this.arr);
      t.sort(function(o, s) {
        return o - s;
      });
      var n = t[t.length - 1], a = t[0];
      for (var i in this.arr)
        e[i] = (this.arr[i] - a) / (n - a);
      return new r(e);
    }, r.prototype.norm2 = function() {
      var e;
      if (!(!((e = this.arr) === null || e === void 0) && e.length))
        return 0;
      var t = 0;
      for (var n in this.arr)
        t += Math.pow(this.arr[n], 2);
      return Math.sqrt(t);
    }, r.prototype.dot = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length) || !(n != null && n.length))
        return 0;
      if (this.arr.length === n.length) {
        var a = 0;
        for (var i in this.arr)
          a += this.arr[i] * e.arr[i];
        return a;
      } else
        console.error("The two vectors are unequal in length.");
    }, r.prototype.equal = function(e) {
      var t, n = e.arr;
      if (((t = this.arr) === null || t === void 0 ? void 0 : t.length) !== (n == null ? void 0 : n.length))
        return !1;
      for (var a in this.arr)
        if (this.arr[a] !== n[a])
          return !1;
      return !0;
    }, r;
  }()
), Ey = function(e, t) {
  t === void 0 && (t = void 0);
  var n = [];
  return e.forEach(function(a) {
    t === void 0 && n.push(a), a[t] !== void 0 && n.push(a[t]);
  }), n;
}, ya;
(function(r) {
  r.EuclideanDistance = "euclideanDistance";
})(ya || (ya = {}));
var M4 = function(e, t, n) {
  var a = [];
  t != null && t.length ? a = t : (e.forEach(function(o) {
    a = a.concat(Object.keys(o));
  }), a = _f(a));
  var i = {};
  return a.forEach(function(o) {
    var s = [];
    e.forEach(function(u) {
      u[o] !== void 0 && u[o] !== "" && s.push(u[o]);
    }), s.length && !(n != null && n.includes(o)) && (i[o] = _f(s));
  }), i;
}, xy = function(e, t, n) {
  var a = M4(e, t, n), i = [];
  if (!Object.keys(a).length)
    return i;
  var o = Object.values(a), s = o.every(function(u) {
    return u.every(function(f) {
      return typeof f == "number";
    });
  });
  return e.forEach(function(u, f) {
    var l = [];
    Object.keys(a).forEach(function(c) {
      var h = u[c], d = a[c], v = d.findIndex(function(y) {
        return h === y;
      }), p = [];
      if (s)
        p.push(h);
      else
        for (var g = 0; g < d.length; g++)
          g === v ? p.push(1) : p.push(0);
      l = l.concat(p);
    }), i[f] = l;
  }), i;
}, Jb = function(e, t, n, a) {
  n === void 0 && (n = ya.EuclideanDistance);
  var i = 0;
  switch (n) {
    case ya.EuclideanDistance:
      i = new ia(e).euclideanDistance(new ia(t));
      break;
  }
  return i;
}, eE = function(e, t, n, a) {
  for (var i = t.length, o = 2 * a, s = 0, u = 0; u < i; u++)
    for (var f = e[u].clusterId, l = 0; l < i; l++) {
      var c = e[l].clusterId;
      if (f === c) {
        var h = t[u][l] || 0, d = n[u] || 0, v = n[l] || 0;
        s += h - d * v / o;
      }
    }
  return s *= 1 / o, s;
}, op = function(e, t) {
  e === void 0 && (e = []);
  for (var n = e.length, a = new ia([]), i = 0; i < n; i++)
    a = a.add(new ia(t[i]));
  var o = a.avg(n);
  o.normalize();
  for (var s = 0, i = 0; i < n; i++) {
    var u = new ia(t[i]), f = u.squareEuclideanDistance(o);
    s += f;
  }
  var l = [];
  e.forEach(function() {
    l.push([]);
  });
  for (var i = 0; i < n; i++) {
    var u = new ia(t[i]);
    e[i].clusterInertial = 0;
    for (var c = 0; c < n; c++) {
      if (i === c) {
        l[i][c] = 0;
        continue;
      }
      var h = new ia(t[c]);
      l[i][c] = u.squareEuclideanDistance(h), e[i].clusterInertial += l[i][c];
    }
  }
  for (var d = 0, v = 2 * n * s, i = 0; i < n; i++)
    for (var p = e[i].clusterId, c = 0; c < n; c++) {
      var g = e[c].clusterId;
      if (!(i === c || p !== g)) {
        var y = e[i].clusterInertial * e[c].clusterInertial / Math.pow(v, 2) - l[i][c] / v;
        d += y;
      }
    }
  return Number(d.toFixed(4));
}, wy = function(e, t, n, a, i, o, s, u, f) {
  t === void 0 && (t = !1), n === void 0 && (n = "weight"), a === void 0 && (a = 1e-4), i === void 0 && (i = !1), o === void 0 && (o = void 0), s === void 0 && (s = []), u === void 0 && (u = ["id"]), f === void 0 && (f = 1);
  var l = e.nodes, c = l === void 0 ? [] : l, h = e.edges, d = h === void 0 ? [] : h, v = [];
  if (i) {
    c.forEach(function(N, F) {
      N.properties = N.properties || {}, N.originIndex = F;
    });
    var p = [];
    c.every(function(N) {
      return N.hasOwnProperty("nodeType");
    }) && (p = Array.from(new Set(c.map(function(N) {
      return N.nodeType;
    }))), c.forEach(function(N) {
      N.properties.nodeType = p.findIndex(function(F) {
        return F === N.nodeType;
      });
    }));
    var g = Ey(c, o);
    v = xy(g, s, u);
  }
  var y = 1, m = {}, b = {};
  c.forEach(function(N, F) {
    var q = String(y++);
    N.clusterId = q, m[q] = {
      id: q,
      nodes: [N]
    }, b[N.id] = {
      node: N,
      idx: F
    };
  });
  var E = $o(e, t), x = [], w = {}, _ = 0;
  E.forEach(function(N, F) {
    var q = 0, te = c[F].id;
    w[te] = {}, N.forEach(function(re, J) {
      if (re) {
        q += re;
        var ye = c[J].id;
        w[te][ye] = re, _ += re;
      }
    }), x.push(q);
  }), _ /= 2;
  for (var M = 1 / 0, A = 1 / 0, S = 0, T = [], C = {}; ; ) {
    i && c.every(function(N) {
      return N.hasOwnProperty("properties");
    }) ? M = eE(c, E, x, _) + op(c, v) * f : M = eE(c, E, x, _), S === 0 && (A = M, T = c, C = m);
    var O = M > 0 && M > A && M - A < a;
    if (M > A && (T = c.map(function(N) {
      return {
        node: N,
        clusterId: N.clusterId
      };
    }), C = nr(m), A = M), O || S > 100)
      break;
    S++, Object.keys(m).forEach(function(N) {
      var F = 0;
      d.forEach(function(q) {
        var te = q.source, re = q.target, J = b[te].node.clusterId, ye = b[re].node.clusterId;
        (J === N && ye !== N || ye === N && J !== N) && (F = F + (q[n] || 1));
      }), m[N].sumTot = F;
    }), c.forEach(function(N, F) {
      var q = m[N.clusterId], te = 0, re, J = x[F] / (2 * _), ye = 0, Be = q.nodes;
      Be.forEach(function(Wt) {
        var vr = b[Wt.id].idx;
        ye += E[F][vr] || 0;
      });
      var Pe = ye - q.sumTot * J, et = Be.filter(function(Wt) {
        return Wt.id !== N.id;
      });
      et.forEach(function(Wt, vr) {
        v[Wt.originIndex];
      });
      var ut = op(et, v) * f, at = w[N.id];
      if (Object.keys(at).forEach(function(Wt) {
        var vr = b[Wt].node, cr = vr.clusterId;
        if (cr !== N.clusterId) {
          var jt = m[cr], or = jt.nodes;
          if (!(!or || !or.length)) {
            var Wr = 0;
            or.forEach(function(Fe) {
              var ge = b[Fe.id].idx;
              Wr += E[F][ge] || 0;
            });
            var rt = Wr - jt.sumTot * J, ie = or.concat([N]);
            ie.forEach(function(Fe, ge) {
              v[Fe.originIndex];
            });
            var D = op(ie, v) * f, _e = rt - Pe;
            i && (_e = rt + D - (Pe + ut)), _e > te && (te = _e, re = jt);
          }
        }
      }), te > 0) {
        re.nodes.push(N);
        var At = N.clusterId;
        N.clusterId = re.id;
        var xt = q.nodes.indexOf(N);
        q.nodes.splice(xt, 1);
        var lr = 0, Rt = 0;
        d.forEach(function(Wt) {
          var vr = Wt.source, cr = Wt.target, jt = b[vr].node.clusterId, or = b[cr].node.clusterId;
          (jt === re.id && or !== re.id || or === re.id && jt !== re.id) && (lr = lr + (Wt[n] || 1)), (jt === At && or !== At || or === At && jt !== At) && (Rt = Rt + (Wt[n] || 1));
        }), re.sumTot = lr, q.sumTot = Rt;
      }
    });
  }
  var L = {}, R = 0;
  Object.keys(C).forEach(function(N) {
    var F = C[N];
    if (!F.nodes || !F.nodes.length) {
      delete C[N];
      return;
    }
    var q = String(R + 1);
    q !== N && (F.id = q, F.nodes = F.nodes.map(function(te) {
      return {
        id: te.id,
        clusterId: q
      };
    }), C[q] = F, L[N] = q, delete C[N], R++);
  }), T.forEach(function(N) {
    var F = N.node, q = N.clusterId;
    F && (F.clusterId = q, F.clusterId && L[F.clusterId] && (F.clusterId = L[F.clusterId]));
  });
  var P = [], z = {};
  d.forEach(function(N) {
    var F = N.source, q = N.target, te = N[n] || 1, re = b[F].node.clusterId, J = b[q].node.clusterId;
    if (!(!re || !J)) {
      var ye = "".concat(re, "---").concat(J);
      if (z[ye])
        z[ye].weight += te, z[ye].count++;
      else {
        var Be = {
          source: re,
          target: J,
          weight: te,
          count: 1
        };
        z[ye] = Be, P.push(Be);
      }
    }
  });
  var V = [];
  return Object.keys(C).forEach(function(N) {
    V.push(C[N]);
  }), {
    clusters: V,
    clusterEdges: P
  };
}, oA = function(e, t, n, a, i, o, s, u) {
  return t === void 0 && (t = !1), n === void 0 && (n = "weight"), a === void 0 && (a = 1e-4), i === void 0 && (i = void 0), o === void 0 && (o = []), s === void 0 && (s = ["id"]), u === void 0 && (u = 1), wy(e, t, n, a, !0, i, o, s, u);
}, sA = function(e, t) {
  var n;
  t === void 0 && (t = 1);
  for (var a = nr(e), i = a.nodes, o = i === void 0 ? [] : i, s = a.edges, u = s === void 0 ? [] : s, f = function() {
    var h = Mi({
      nodes: o,
      edges: u
    }), d = Object.keys(h);
    d.sort(function(g, y) {
      var m, b;
      return ((m = h[g]) === null || m === void 0 ? void 0 : m.degree) - ((b = h[y]) === null || b === void 0 ? void 0 : b.degree);
    });
    var v = d[0];
    if (!o.length || ((n = h[v]) === null || n === void 0 ? void 0 : n.degree) >= t)
      return "break";
    var p = o.findIndex(function(g) {
      return g.id === v;
    });
    o.splice(p, 1), u = u.filter(function(g) {
      return !(g.source === v || g.target === v);
    });
  }; ; ) {
    var l = f();
    if (l === "break")
      break;
  }
  return {
    nodes: o,
    edges: u
  };
}, tE = function(e, t, n) {
  var a = [];
  switch (e) {
    case ya.EuclideanDistance:
      a = t[n];
      break;
    default:
      a = [];
      break;
  }
  return a;
}, uA = function(e, t, n, a, i, o) {
  t === void 0 && (t = 3), n === void 0 && (n = void 0), a === void 0 && (a = []), i === void 0 && (i = ["id"]), o === void 0 && (o = ya.EuclideanDistance);
  var s = e.nodes, u = s === void 0 ? [] : s, f = e.edges, l = f === void 0 ? [] : f, c = {
    clusters: [{
      id: "0",
      nodes: u
    }],
    clusterEdges: []
  };
  if (o === ya.EuclideanDistance && !u.every(function(q) {
    return q.hasOwnProperty(n);
  }))
    return c;
  var h = [], d = [];
  if (o === ya.EuclideanDistance && (h = Ey(u, n), d = xy(h, a, i)), !d.length)
    return c;
  for (var v = _f(d.map(function(q) {
    return q.join("");
  })), p = Math.min(t, u.length, v.length), g = 0; g < u.length; g++)
    u[g].originIndex = g;
  for (var y = [], m = [], b = [], g = 0; g < p; g++)
    if (g === 0) {
      var E = Math.floor(Math.random() * u.length);
      switch (o) {
        case ya.EuclideanDistance:
          y[g] = d[E];
          break;
        default:
          y[g] = [];
          break;
      }
      m.push(E), b[g] = [u[E]], u[E].clusterId = String(g);
    } else {
      for (var x = -1 / 0, w = 0, _ = function(re) {
        if (!m.includes(re)) {
          for (var J = 0, ye = 0; ye < y.length; ye++) {
            var Be = 0;
            switch (o) {
              case ya.EuclideanDistance:
                Be = Jb(d[u[re].originIndex], y[ye], o);
                break;
            }
            J += Be;
          }
          var Pe = J / y.length;
          Pe > x && !y.find(function(et) {
            return jo(et, tE(o, d, u[re].originIndex));
          }) && (x = Pe, w = re);
        }
      }, M = 0; M < u.length; M++)
        _(M);
      y[g] = tE(o, d, w), m.push(w), b[g] = [u[w]], u[w].clusterId = String(g);
    }
  for (var A = 0; ; ) {
    for (var g = 0; g < u.length; g++) {
      var S = 0, T = 1 / 0;
      if (!(A === 0 && m.includes(g))) {
        for (var C = 0; C < y.length; C++) {
          var O = 0;
          switch (o) {
            case ya.EuclideanDistance:
              O = Jb(d[g], y[C], o);
              break;
          }
          O < T && (T = O, S = C);
        }
        if (u[g].clusterId !== void 0)
          for (var L = b[Number(u[g].clusterId)].length - 1; L >= 0; L--)
            b[Number(u[g].clusterId)][L].id === u[g].id && b[Number(u[g].clusterId)].splice(L, 1);
        u[g].clusterId = String(S), b[S].push(u[g]);
      }
    }
    for (var R = !1, g = 0; g < b.length; g++) {
      for (var P = b[g], z = new ia([]), C = 0; C < P.length; C++)
        z = z.add(new ia(d[P[C].originIndex]));
      var V = z.avg(P.length);
      V.equal(new ia(y[g])) || (R = !0, y[g] = V.getArr());
    }
    if (A++, u.every(function(q) {
      return q.clusterId !== void 0;
    }) && R || A >= 1e3)
      break;
  }
  var N = [], F = {};
  return l.forEach(function(q) {
    var te, re, J = q.source, ye = q.target, Be = (te = u.find(function(at) {
      return at.id === J;
    })) === null || te === void 0 ? void 0 : te.clusterId, Pe = (re = u.find(function(at) {
      return at.id === ye;
    })) === null || re === void 0 ? void 0 : re.clusterId, et = "".concat(Be, "---").concat(Pe);
    if (F[et])
      F[et].count++;
    else {
      var ut = {
        source: Be,
        target: Pe,
        count: 1
      };
      F[et] = ut, N.push(ut);
    }
  }), {
    clusters: b,
    clusterEdges: N
  };
}, _y = function(e, t) {
  var n = new ia(t), a = n.norm2(), i = new ia(e), o = i.norm2(), s = n.dot(i), u = a * o, f = u ? s / u : 0;
  return f;
}, fA = function(e, t, n, a, i) {
  e === void 0 && (e = []), n === void 0 && (n = void 0), a === void 0 && (a = []), i === void 0 && (i = []);
  var o = nr(e.filter(function(h) {
    return h.id !== t.id;
  })), s = e.findIndex(function(h) {
    return h.id === t.id;
  }), u = Ey(e, n), f = xy(u, a, i), l = f[s], c = [];
  return o.forEach(function(h, d) {
    if (h.id !== t.id) {
      var v = f[d], p = _y(v, l);
      c.push(p), h.cosineSimilarity = p;
    }
  }), o.sort(function(h, d) {
    return d.cosineSimilarity - h.cosineSimilarity;
  }), {
    allCosineSimilarity: c,
    similarNodes: o
  };
}, S4 = (
  /** @class */
  function() {
    function r(e) {
      this.count = e.length, this.parent = {};
      for (var t = 0, n = e; t < n.length; t++) {
        var a = n[t];
        this.parent[a] = a;
      }
    }
    return r.prototype.find = function(e) {
      for (; this.parent[e] !== e; )
        e = this.parent[e];
      return e;
    }, r.prototype.union = function(e, t) {
      var n = this.find(e), a = this.find(t);
      n !== a && (n < a ? (this.parent[t] !== t && this.union(this.parent[t], e), this.parent[t] = this.parent[e]) : (this.parent[e] !== e && this.union(this.parent[e], t), this.parent[e] = this.parent[t]));
    }, r.prototype.connected = function(e, t) {
      return this.find(e) === this.find(t);
    }, r;
  }()
), A4 = function(e, t) {
  return e - t;
}, C4 = (
  /** @class */
  function() {
    function r(e) {
      e === void 0 && (e = A4), this.compareFn = e, this.list = [];
    }
    return r.prototype.getLeft = function(e) {
      return 2 * e + 1;
    }, r.prototype.getRight = function(e) {
      return 2 * e + 2;
    }, r.prototype.getParent = function(e) {
      return e === 0 ? null : Math.floor((e - 1) / 2);
    }, r.prototype.isEmpty = function() {
      return this.list.length <= 0;
    }, r.prototype.top = function() {
      return this.isEmpty() ? void 0 : this.list[0];
    }, r.prototype.delMin = function() {
      var e = this.top(), t = this.list.pop();
      return this.list.length > 0 && (this.list[0] = t, this.moveDown(0)), e;
    }, r.prototype.insert = function(e) {
      if (e !== null) {
        this.list.push(e);
        var t = this.list.length - 1;
        return this.moveUp(t), !0;
      }
      return !1;
    }, r.prototype.moveUp = function(e) {
      for (var t = this.getParent(e); e && e > 0 && this.compareFn(this.list[t], this.list[e]) > 0; ) {
        var n = this.list[t];
        this.list[t] = this.list[e], this.list[e] = n, e = t, t = this.getParent(e);
      }
    }, r.prototype.moveDown = function(e) {
      var t, n = e, a = this.getLeft(e), i = this.getRight(e), o = this.list.length;
      a !== null && a < o && this.compareFn(this.list[n], this.list[a]) > 0 ? n = a : i !== null && i < o && this.compareFn(this.list[n], this.list[i]) > 0 && (n = i), e !== n && (t = [this.list[n], this.list[e]], this.list[e] = t[0], this.list[n] = t[1], this.moveDown(n));
    }, r;
  }()
), T4 = function(e, t) {
  var n = [], a = e.nodes, i = a === void 0 ? [] : a, o = e.edges, s = o === void 0 ? [] : o;
  if (i.length === 0)
    return n;
  var u = i[0], f = /* @__PURE__ */ new Set();
  f.add(u);
  var l = function(g, y) {
    return t ? g.weight - y.weight : 0;
  }, c = new C4(l);
  for (Yc(u.id, s).forEach(function(p) {
    c.insert(p);
  }); !c.isEmpty(); ) {
    var h = c.delMin(), d = h.source, v = h.target;
    f.has(d) && f.has(v) || (n.push(h), f.has(d) || (f.add(d), Yc(d, s).forEach(function(p) {
      c.insert(p);
    })), f.has(v) || (f.add(v), Yc(v, s).forEach(function(p) {
      c.insert(p);
    })));
  }
  return n;
}, rE = function(e, t) {
  var n = [], a = e.nodes, i = a === void 0 ? [] : a, o = e.edges, s = o === void 0 ? [] : o;
  if (i.length === 0)
    return n;
  var u = s.map(function(d) {
    return d;
  });
  t && u.sort(function(d, v) {
    return d.weight - v.weight;
  });
  for (var f = new S4(i.map(function(d) {
    return d.id;
  })); u.length > 0; ) {
    var l = u.shift(), c = l.source, h = l.target;
    f.connected(c, h) || (n.push(l), f.union(c, h));
  }
  return n;
}, lA = function(e, t, n) {
  var a = {
    prim: T4,
    kruskal: rE
  };
  return n ? a[n](e, t) : rE(e, t);
}, cA = function(e, t, n) {
  typeof t != "number" && (t = 1e-6), typeof n != "number" && (n = 0.85);
  for (var a = 1, i = 0, o = 1e3, s = e.nodes, u = s === void 0 ? [] : s, f = e.edges, l = f === void 0 ? [] : f, c = u.length, h, d = {}, v = {}, p = 0; p < c; ++p) {
    var g = u[p], y = g.id;
    d[y] = 1 / c, v[y] = 1 / c;
  }
  for (var m = Mi(e); o > 0 && a > t; ) {
    i = 0;
    for (var p = 0; p < c; ++p) {
      var g = u[p], y = g.id;
      if (h = 0, m[g.id].inDegree === 0)
        d[y] = 0;
      else {
        for (var b = Wn(y, l, "source"), E = 0; E < b.length; ++E) {
          var x = b[E], w = m[x].outDegree;
          w > 0 && (h += v[x] / w);
        }
        d[y] = n * h, i += d[y];
      }
    }
    i = (1 - i) / c, a = 0;
    for (var p = 0; p < c; ++p) {
      var g = u[p], y = g.id;
      h = d[y] + i, a += Math.abs(h - v[y]), v[y] = h;
    }
    o -= 1;
  }
  return v;
}, I4 = -1, Eh = -1, hA = "-1", $a = "-1", dA = -1, nE = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e, t, n, a) {
      e === void 0 && (e = I4), t === void 0 && (t = Eh), n === void 0 && (n = Eh), a === void 0 && (a = hA), this.id = e, this.from = t, this.to = n, this.label = a;
    }
    return r;
  }()
), O4 = (
  /** @class */
  function() {
    function r(e, t) {
      e === void 0 && (e = Eh), t === void 0 && (t = $a), this.id = e, this.label = t, this.edges = [], this.edgeMap = {};
    }
    return r.prototype.addEdge = function(e) {
      this.edges.push(e), this.edgeMap[e.id] = e;
    }, r;
  }()
), vA = (
  /** @class */
  function() {
    function r(e, t, n) {
      e === void 0 && (e = Eh), t === void 0 && (t = !0), n === void 0 && (n = !1), this.id = e, this.edgeIdAutoIncrease = t, this.edges = [], this.nodes = [], this.nodeMap = {}, this.edgeMap = {}, this.nodeLabelMap = {}, this.edgeLabelMap = {}, this.counter = 0, this.directed = n;
    }
    return r.prototype.getNodeNum = function() {
      return this.nodes.length;
    }, r.prototype.addNode = function(e, t) {
      if (!this.nodeMap[e]) {
        var n = new O4(e, t);
        this.nodes.push(n), this.nodeMap[e] = n, this.nodeLabelMap[t] || (this.nodeLabelMap[t] = []), this.nodeLabelMap[t].push(e);
      }
    }, r.prototype.addEdge = function(e, t, n, a) {
      if ((this.edgeIdAutoIncrease || e === void 0) && (e = this.counter++), !(this.nodeMap[t] && this.nodeMap[n] && this.nodeMap[n].edgeMap[e])) {
        var i = new nE(e, t, n, a);
        if (this.edges.push(i), this.edgeMap[e] = i, this.nodeMap[t].addEdge(i), this.edgeLabelMap[a] || (this.edgeLabelMap[a] = []), this.edgeLabelMap[a].push(i), !this.directed) {
          var o = new nE(e, n, t, a);
          this.nodeMap[n].addEdge(o), this.edgeLabelMap[a].push(o);
        }
      }
    }, r;
  }()
), No = (
  /** @class */
  function() {
    function r(e, t, n, a, i) {
      this.fromNode = e, this.toNode = t, this.nodeEdgeNodeLabel = {
        nodeLabel1: n || $a,
        edgeLabel: a || hA,
        nodeLabel2: i || $a
      };
    }
    return r.prototype.equalTo = function(e) {
      return this.fromNode === e.formNode && this.toNode === e.toNode && this.nodeEdgeNodeLabel === e.nodeEdgeNodeLabel;
    }, r.prototype.notEqualTo = function(e) {
      return !this.equalTo(e);
    }, r;
  }()
), aE = (
  /** @class */
  function() {
    function r() {
      this.rmpath = [], this.dfsEdgeList = [];
    }
    return r.prototype.equalTo = function(e) {
      var t = this.dfsEdgeList.length, n = e.length;
      if (t !== n)
        return !1;
      for (var a = 0; a < t; a++)
        if (this.dfsEdgeList[a] !== e[a])
          return !1;
      return !0;
    }, r.prototype.notEqualTo = function(e) {
      return !this.equalTo(e);
    }, r.prototype.pushBack = function(e, t, n, a, i) {
      return this.dfsEdgeList.push(new No(e, t, n, a, i)), this.dfsEdgeList;
    }, r.prototype.toGraph = function(e, t) {
      e === void 0 && (e = dA), t === void 0 && (t = !1);
      var n = new vA(e, !0, t);
      return this.dfsEdgeList.forEach(function(a) {
        var i = a.fromNode, o = a.toNode, s = a.nodeEdgeNodeLabel, u = s.nodeLabel1, f = s.edgeLabel, l = s.nodeLabel2;
        u !== $a && n.addNode(i, u), l !== $a && n.addNode(o, l), u !== $a && l !== u && n.addEdge(void 0, i, o, f);
      }), n;
    }, r.prototype.buildRmpath = function() {
      this.rmpath = [];
      for (var e = void 0, t = this.dfsEdgeList.length, n = t - 1; n >= 0; n--) {
        var a = this.dfsEdgeList[n], i = a.fromNode, o = a.toNode;
        i < o && (e === void 0 || o === e) && (this.rmpath.push(n), e = i);
      }
      return this.rmpath;
    }, r.prototype.getNodeNum = function() {
      var e = {};
      return this.dfsEdgeList.forEach(function(t) {
        e[t.fromNode] || (e[t.fromNode] = !0), e[t.toNode] || (e[t.toNode] = !0);
      }), Object.keys(e).length;
    }, r;
  }()
), Zl = (
  /** @class */
  function() {
    function r(e) {
      if (this.his = {}, this.nodesUsed = {}, this.edgesUsed = {}, this.edges = [], !!e) {
        for (; e; ) {
          var t = e.edge;
          this.edges.push(t), this.nodesUsed[t.from] = 1, this.nodesUsed[t.to] = 1, this.edgesUsed[t.id] = 1, e = e.preNode;
        }
        this.edges = this.edges.reverse();
      }
    }
    return r.prototype.hasNode = function(e) {
      return this.nodesUsed[e.id] === 1;
    }, r.prototype.hasEdge = function(e) {
      return this.edgesUsed[e.id] === 1;
    }, r;
  }()
), D4 = (
  /** @class */
  function() {
    function r(e) {
      var t = e.graphs, n = e.minSupport, a = n === void 0 ? 2 : n, i = e.minNodeNum, o = i === void 0 ? 1 : i, s = e.maxNodeNum, u = s === void 0 ? 4 : s, f = e.top, l = f === void 0 ? 10 : f, c = e.directed, h = c === void 0 ? !1 : c, d = e.verbose, v = d === void 0 ? !1 : d;
      this.graphs = t, this.dfsCode = new aE(), this.support = 0, this.frequentSize1Subgraphs = [], this.frequentSubgraphs = [], this.minSupport = a, this.top = l, this.directed = h, this.counter = 0, this.maxNodeNum = u, this.minNodeNum = o, this.verbose = v, this.maxNodeNum < this.minNodeNum && (this.maxNodeNum = this.minNodeNum), this.reportDF = [];
    }
    return r.prototype.findForwardRootEdges = function(e, t) {
      var n = this, a = [], i = e.nodeMap;
      return t.edges.forEach(function(o) {
        (n.directed || t.label <= i[o.to].label) && a.push(o);
      }), a;
    }, r.prototype.findBackwardEdge = function(e, t, n, a) {
      if (!this.directed && t === n)
        return null;
      for (var i = e.nodeMap, o = i[n.to], s = o.edges, u = s.length, f = 0; f < u; f++) {
        var l = s[f];
        if (!(a.hasEdge(l) || l.to !== t.from)) {
          if (this.directed) {
            if (i[t.from].label < i[n.to].label || i[t.from].label === i[n.to].label && t.label <= l.label)
              return l;
          } else if (t.label < l.label || t.label === l.label && i[t.to].label <= i[n.to].label)
            return l;
        }
      }
      return null;
    }, r.prototype.findForwardPureEdges = function(e, t, n, a) {
      for (var i = [], o = t.to, s = e.nodeMap[o].edges, u = s.length, f = 0; f < u; f++) {
        var l = s[f], c = e.nodeMap[l.to];
        n <= c.label && !a.hasNode(c) && i.push(l);
      }
      return i;
    }, r.prototype.findForwardRmpathEdges = function(e, t, n, a) {
      for (var i = [], o = e.nodeMap, s = o[t.to].label, u = o[t.from], f = u.edges, l = f.length, c = 0; c < l; c++) {
        var h = f[c], d = o[h.to].label;
        t.to === h.to || n > d || a.hasNode(o[h.to]) || (t.label < h.label || t.label === h.label && s <= d) && i.push(h);
      }
      return i;
    }, r.prototype.getSupport = function(e) {
      var t = {};
      return e.forEach(function(n) {
        t[n.graphId] || (t[n.graphId] = !0);
      }), Object.keys(t).length;
    }, r.prototype.findMinLabel = function(e) {
      var t = void 0;
      return Object.keys(e).forEach(function(n) {
        var a = e[n], i = a.nodeLabel1, o = a.edgeLabel, s = a.nodeLabel2;
        if (!t) {
          t = {
            nodeLabel1: i,
            edgeLabel: o,
            nodeLabel2: s
          };
          return;
        }
        (i < t.nodeLabel1 || i === t.nodeLabel1 && o < t.edgeLabel || i === t.nodeLabel1 && o === t.edgeLabel && s < t.nodeLabel2) && (t = {
          nodeLabel1: i,
          edgeLabel: o,
          nodeLabel2: s
        });
      }), t;
    }, r.prototype.isMin = function() {
      var e = this, t = this.dfsCode;
      if (this.verbose && console.log("isMin checking", t), t.dfsEdgeList.length === 1)
        return !0;
      var n = this.directed, a = t.toGraph(dA, n), i = a.nodeMap, o = new aE(), s = {};
      a.nodes.forEach(function(c) {
        var h = e.findForwardRootEdges(a, c);
        h.forEach(function(d) {
          var v = i[d.to], p = "".concat(c.label, "-").concat(d.label, "-").concat(v.label);
          s[p] || (s[p] = {
            projected: [],
            nodeLabel1: c.label,
            edgeLabel: d.label,
            nodeLabel2: v.label
          });
          var g = {
            graphId: a.id,
            edge: d,
            preNode: null
          };
          s[p].projected.push(g);
        });
      });
      var u = this.findMinLabel(s);
      if (u) {
        o.dfsEdgeList.push(new No(0, 1, u.nodeLabel1, u.edgeLabel, u.nodeLabel2));
        var f = function c(h) {
          for (var d = o.buildRmpath(), v = o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1, p = o.dfsEdgeList[d[0]].toNode, g = {}, y = !1, m = 0, b = n ? -1 : 0, E = function(z) {
            if (y)
              return "break";
            h.forEach(function(V) {
              var N = new Zl(V), F = e.findBackwardEdge(a, N.edges[d[z]], N.edges[d[0]], N);
              F && (g[F.label] || (g[F.label] = {
                projected: [],
                edgeLabel: F.label
              }), g[F.label].projected.push({
                graphId: a.id,
                edge: g,
                preNode: V
              }), m = o.dfsEdgeList[d[z]].fromNode, y = !0);
            });
          }, x = d.length - 1; x > b; x--) {
            var w = E(x);
            if (w === "break")
              break;
          }
          if (y) {
            var _ = e.findMinLabel(g);
            o.dfsEdgeList.push(new No(p, m, $a, _.edgeLabel, $a));
            var M = o.dfsEdgeList.length - 1;
            return e.dfsCode.dfsEdgeList[M] !== o.dfsEdgeList[M] ? !1 : c(g[_.edgeLabel].projected);
          }
          var A = {};
          y = !1;
          var S = 0;
          h.forEach(function(P) {
            var z = new Zl(P), V = e.findForwardPureEdges(a, z.edges[d[0]], v, z);
            V.length > 0 && (y = !0, S = p, V.forEach(function(N) {
              var F = "".concat(N.label, "-").concat(i[N.to].label);
              A[F] || (A[F] = {
                projected: [],
                edgeLabel: N.label,
                nodeLabel2: i[N.to].label
              }), A[F].projected.push({
                graphId: a.id,
                edge: N,
                preNode: P
              });
            }));
          });
          for (var T = d.length, C = function(z) {
            if (y)
              return "break";
            var V = d[z];
            h.forEach(function(N) {
              var F = new Zl(N), q = e.findForwardRmpathEdges(a, F.edges[V], v, F);
              q.length > 0 && (y = !0, S = o.dfsEdgeList[V].fromNode, q.forEach(function(te) {
                var re = "".concat(te.label, "-").concat(i[te.to].label);
                A[re] || (A[re] = {
                  projected: [],
                  edgeLabel: te.label,
                  nodeLabel2: i[te.to].label
                }), A[re].projected.push({
                  graphId: a.id,
                  edge: te,
                  preNode: N
                });
              }));
            });
          }, x = 0; x < T; x++) {
            var O = C(x);
            if (O === "break")
              break;
          }
          if (!y)
            return !0;
          var L = e.findMinLabel(A);
          o.dfsEdgeList.push(new No(S, p + 1, $a, L.edgeLabel, L.nodeLabel2));
          var R = o.dfsEdgeList.length - 1;
          return t.dfsEdgeList[R] !== o.dfsEdgeList[R] ? !1 : c(A["".concat(L.edgeLabel, "-").concat(L.nodeLabel2)].projected);
        }, l = "".concat(u.nodeLabel1, "-").concat(u.edgeLabel, "-").concat(u.nodeLabel2);
        return f(s[l].projected);
      }
    }, r.prototype.report = function() {
      if (!(this.dfsCode.getNodeNum() < this.minNodeNum)) {
        this.counter++;
        var e = this.dfsCode.toGraph(this.counter, this.directed);
        this.frequentSubgraphs.push(nr(e));
      }
    }, r.prototype.subGraphMining = function(e) {
      var t = this, n = this.getSupport(e);
      if (!(n < this.minSupport) && this.isMin()) {
        this.report();
        var a = this.dfsCode.getNodeNum(), i = this.dfsCode.buildRmpath(), o = this.dfsCode.dfsEdgeList[i[0]].toNode, s = this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1, u = {}, f = {};
        e.forEach(function(l) {
          for (var c = t.graphs[l.graphId], h = c.nodeMap, d = new Zl(l), v = i.length - 1; v >= 0; v--) {
            var p = t.findBackwardEdge(c, d.edges[i[v]], d.edges[i[0]], d);
            if (p) {
              var g = "".concat(t.dfsCode.dfsEdgeList[i[v]].fromNode, "-").concat(p.label);
              f[g] || (f[g] = {
                projected: [],
                toNodeId: t.dfsCode.dfsEdgeList[i[v]].fromNode,
                edgeLabel: p.label
              }), f[g].projected.push({
                graphId: l.graphId,
                edge: p,
                preNode: l
              });
            }
          }
          if (!(a >= t.maxNodeNum)) {
            var y = t.findForwardPureEdges(c, d.edges[i[0]], s, d);
            y.forEach(function(b) {
              var E = "".concat(o, "-").concat(b.label, "-").concat(h[b.to].label);
              u[E] || (u[E] = {
                projected: [],
                fromNodeId: o,
                edgeLabel: b.label,
                nodeLabel2: h[b.to].label
              }), u[E].projected.push({
                graphId: l.graphId,
                edge: b,
                preNode: l
              });
            });
            for (var m = function(E) {
              var x = t.findForwardRmpathEdges(c, d.edges[i[E]], s, d);
              x.forEach(function(w) {
                var _ = "".concat(t.dfsCode.dfsEdgeList[i[E]].fromNode, "-").concat(w.label, "-").concat(h[w.to].label);
                u[_] || (u[_] = {
                  projected: [],
                  fromNodeId: t.dfsCode.dfsEdgeList[i[E]].fromNode,
                  edgeLabel: w.label,
                  nodeLabel2: h[w.to].label
                }), u[_].projected.push({
                  graphId: l.graphId,
                  edge: w,
                  preNode: l
                });
              });
            }, v = 0; v < i.length; v++)
              m(v);
          }
        }), Object.keys(f).forEach(function(l) {
          var c = f[l], h = c.toNodeId, d = c.edgeLabel;
          t.dfsCode.dfsEdgeList.push(new No(o, h, "-1", d, "-1")), t.subGraphMining(f[l].projected), t.dfsCode.dfsEdgeList.pop();
        }), Object.keys(u).forEach(function(l) {
          var c = u[l], h = c.fromNodeId, d = c.edgeLabel, v = c.nodeLabel2;
          t.dfsCode.dfsEdgeList.push(new No(h, o + 1, $a, d, v)), t.subGraphMining(u[l].projected), t.dfsCode.dfsEdgeList.pop();
        });
      }
    }, r.prototype.generate1EdgeFrequentSubGraphs = function() {
      var e = this.graphs, t = this.directed, n = this.minSupport, a = this.frequentSize1Subgraphs, i = {}, o = {}, s = {};
      return Object.keys(e).forEach(function(u) {
        var f = e[u], l = f.nodeMap;
        f.nodes.forEach(function(c, h) {
          var d = c.label, v = "".concat(u, "-").concat(d);
          if (!s[v]) {
            var p = i[d] || 0;
            p++, i[d] = p;
          }
          s[v] = {
            graphKey: u,
            label: d
          }, c.edges.forEach(function(g) {
            var y = d, m = l[g.to].label;
            if (!t && y > m) {
              var b = m;
              m = y, y = b;
            }
            var E = g.label, x = "".concat(y, "-").concat(E, "-").concat(m);
            if (!o[x]) {
              var w = o[x] || 0;
              w++, o[x] = w;
            }
          });
        });
      }), Object.keys(i).forEach(function(u) {
        var f = i[u];
        if (!(f < n)) {
          var l = {
            nodes: [],
            edges: []
          };
          l.nodes.push({
            id: "0",
            label: u
          }), a.push(l);
        }
      }), a;
    }, r.prototype.run = function() {
      var e = this;
      if (this.frequentSize1Subgraphs = this.generate1EdgeFrequentSubGraphs(), !(this.maxNodeNum < 2)) {
        var t = this.graphs;
        this.directed;
        var n = {};
        Object.keys(t).forEach(function(a) {
          var i = t[a], o = i.nodeMap;
          i.nodes.forEach(function(s) {
            var u = e.findForwardRootEdges(i, s);
            u.forEach(function(f) {
              var l = o[f.to], c = "".concat(s.label, "-").concat(f.label, "-").concat(l.label);
              n[c] || (n[c] = {
                projected: [],
                nodeLabel1: s.label,
                edgeLabel: f.label,
                nodeLabel2: l.label
              });
              var h = {
                graphId: a,
                edge: f,
                preNode: null
              };
              n[c].projected.push(h);
            });
          });
        }), Object.keys(n).forEach(function(a) {
          var i = n[a], o = i.projected, s = i.nodeLabel1, u = i.edgeLabel, f = i.nodeLabel2;
          e.dfsCode.dfsEdgeList.push(new No(0, 1, s, u, f)), e.subGraphMining(o), e.dfsCode.dfsEdgeList.pop();
        });
      }
    }, r;
  }()
), L4 = function(e, t, n, a) {
  var i = {};
  return Object.keys(e).forEach(function(o, s) {
    var u = e[o], f = new vA(s, !0, t), l = {};
    u.nodes.forEach(function(c, h) {
      f.addNode(h, c[n]), l[c.id] = h;
    }), u.edges.forEach(function(c, h) {
      var d = l[c.source], v = l[c.target];
      f.addEdge(-1, d, v, c[a]);
    }), f && f.getNodeNum() && (i[f.id] = f);
  }), i;
}, N4 = function(e, t, n) {
  var a = [];
  return e.forEach(function(i) {
    var o = {
      nodes: [],
      edges: []
    };
    i.nodes.forEach(function(s) {
      var u;
      o.nodes.push((u = {
        id: "".concat(s.id)
      }, u[t] = s.label, u));
    }), i.edges.forEach(function(s) {
      var u;
      o.edges.push((u = {
        source: "".concat(s.from),
        target: "".concat(s.to)
      }, u[n] = s.label, u));
    }), a.push(o);
  }), a;
}, iE = "cluster", P4 = function(e) {
  var t = e.graphs, n = e.directed, a = n === void 0 ? !1 : n, i = e.nodeLabelProp, o = i === void 0 ? iE : i, s = e.edgeLabelProp, u = s === void 0 ? iE : s, f = L4(t, a, o, u), l = e.minSupport, c = e.maxNodeNum, h = e.minNodeNum, d = e.verbose, v = e.top, p = {
    graphs: f,
    minSupport: l,
    maxNodeNum: c,
    minNodeNum: h,
    top: v,
    verbose: d,
    directed: a
  }, g = new D4(p);
  g.run();
  var y = N4(g.frequentSubgraphs, o, u);
  return y;
}, oE = function(e, t, n, a) {
  n === void 0 && (n = "cluster"), a === void 0 && (a = 2);
  var i = [], o = e.nodes;
  return t.forEach(function(s, u) {
    i.push(pA(o, s, u, n, a));
  }), i;
}, pA = function(e, t, n, a, i) {
  var o = [n], s = [], u = {};
  return t.forEach(function(f, l) {
    if (f <= i && n !== l) {
      o.push(l), s.push(e[l]);
      var c = e[l][a];
      u[c] ? (u[c].count++, u[c].dists.push(f)) : u[c] = {
        count: 1,
        dists: [f]
      };
    }
  }), Object.keys(u).forEach(function(f) {
    u[f].dists = u[f].dists.sort(function(l, c) {
      return l - c;
    });
  }), {
    nodeIdx: n,
    nodeId: e[n].id,
    nodeIdxs: o,
    neighbors: s,
    neighborNum: o.length - 1,
    nodeLabelCountMap: u
  };
}, k4 = function(e, t, n, a, i) {
  var o = Math.ceil(n / t), s = {}, u = 0;
  return a.forEach(function(f, l) {
    for (var c = 0, h = 0, d = f.nodeIdxs, v = f.neighborNum - 1; c < o; ) {
      for (var p = d[1 + Math.floor(Math.random() * v)], g = 0; (s["".concat(l, "-").concat(p)] || s["".concat(p, "-").concat(l)]) && (p = Math.floor(Math.random() * t), g++, !(g > 2 * t)); )
        ;
      if (g < 2 * t && (s["".concat(l, "-").concat(p)] = {
        start: l,
        end: p,
        distance: i[l][p]
      }, c++, u++, u >= n))
        return s;
      if (h++, h > 2 * t)
        break;
    }
    if (c < o) {
      var y = o - c;
      o = (o + y) / (t - l - 1);
    }
  }), s;
}, Hc = function(e, t, n, a) {
  var i = n.nodes;
  return a || (a = {}), Object.keys(e).forEach(function(o) {
    var s, u;
    if (!(a && a[o])) {
      a[o] = {
        nodes: [],
        edges: []
      };
      var f = e[o], l = (s = t[f.start]) === null || s === void 0 ? void 0 : s.nodeIdxs, c = (u = t[f.end]) === null || u === void 0 ? void 0 : u.nodeIdxs;
      if (!(!l || !c)) {
        var h = new Set(c), d = l.filter(function(m) {
          return h.has(m);
        });
        if (!(!d || !d.length)) {
          for (var v = {}, p = d.length, g = 0; g < p; g++) {
            var y = i[d[g]];
            a[o].nodes.push(y), v[y.id] = !0;
          }
          n.edges.forEach(function(m) {
            v[m.source] && v[m.target] && a[o].edges.push(m);
          });
        }
      }
    }
  }), a;
}, Kc = function(e, t, n, a) {
  var i, o, s = {};
  e.nodes.forEach(function(f) {
    s[f.id] = f;
  });
  var u = 0;
  return !(!((i = t == null ? void 0 : t.edges) === null || i === void 0) && i.length) || ((o = t == null ? void 0 : t.nodes) === null || o === void 0 ? void 0 : o.length) < 2 ? 0 : (e.edges.forEach(function(f) {
    var l = s[f.source][n], c = s[f.target][n], h = t == null ? void 0 : t.nodes[0][n], d = t == null ? void 0 : t.nodes[1][n], v = t == null ? void 0 : t.edges[0][a];
    f[a] === v && (l === h && c === d || l === d && c === h) && u++;
  }), u);
}, R4 = function(e, t, n) {
  for (var a = 1 / 0, i = 0, o = function(f) {
    var l = e[f], c = Object.keys(l).sort(function(m, b) {
      return l[m] - l[b];
    }), h = 10, d = [];
    c.forEach(function(m, b) {
      d[b % h] || (d[b % h] = {
        graphs: [],
        totalCount: 0,
        aveCount: 0
      }), d[b % h].graphs.push(m), d[b % h].totalCount += l[m];
    });
    var v = 0, p = [];
    d.forEach(function(m) {
      var b = m.totalCount / m.graphs.length;
      m.aveCount = b, p.push(b);
      var E = 0, x = m.length;
      m.graphs.forEach(function(w, _) {
        var M = l[w];
        m.graphs.forEach(function(A, S) {
          _ !== S && (E += Math.abs(M - l[A]));
        });
      }), E /= x * (x - 1) / 2, v += E;
    }), v /= d.length;
    var g = 0;
    p.forEach(function(m, b) {
      p.forEach(function(E, x) {
        b !== x && (g += Math.abs(m - E));
      }), g /= p.length * (p.length - 1) / 2;
    });
    var y = g - v;
    a < y && (a = y, i = f);
  }, s = 0; s < t; s++)
    o(s);
  return {
    structure: n[i],
    structureCountMap: e[i]
  };
}, sE = function(e, t) {
  var n = {}, a = {};
  return e.forEach(function(i, o) {
    n[i.id] = {
      idx: o,
      node: i,
      degree: 0,
      inDegree: 0,
      outDegree: 0
    };
    var s = i[t];
    a[s] || (a[s] = []), a[s].push(i);
  }), {
    nodeMap: n,
    nodeLabelMap: a
  };
}, uE = function(e, t, n) {
  var a = {}, i = {};
  return e.forEach(function(o, s) {
    a["".concat(KS)] = {
      idx: s,
      edge: o
    };
    var u = o[t];
    i[u] || (i[u] = []), i[u].push(o);
    var f = n[o.source];
    f && (f.degree++, f.outDegree++);
    var l = n[o.target];
    l && (l.degree++, l.inDegree++);
  }), {
    edgeMap: a,
    edgeLabelMap: i
  };
}, fE = function(e, t, n) {
  var a = t.length, i = {};
  return t.forEach(function(o, s) {
    for (var u = n ? 0 : s + 1, f = e[s].id, l = u; l < a; l++)
      if (s !== l) {
        var c = e[l].id, h = o[l];
        i["".concat(f, "-").concat(c)] = h, n || (i["".concat(c, "-").concat(f)] = h);
      }
  }), i;
}, B4 = function(e, t, n, a, i, o, s, u, f, l, c) {
  var h, d = "".concat(t.id, "-").concat(n.id);
  if (l && l[d])
    return l[d];
  var v = c ? c[d] : void 0;
  if (!v) {
    var p = (h = {}, h[d] = {
      start: a[t.id].idx,
      end: a[n.id].idx,
      distance: i
    }, h);
    c = Hc(p, o, e, c), v = c[d];
  }
  return Kc(v, s, u, f);
}, lE = function(e, t, n, a) {
  var i, o, s, u = (i = e[t]) === null || i === void 0 ? void 0 : i.degree, f = (o = e[t]) === null || o === void 0 ? void 0 : o.inDegree, l = (s = e[t]) === null || s === void 0 ? void 0 : s.outDegree;
  return e[t] === void 0 && (u = 1 / 0, f = 1 / 0, l = 1 / 0, a[t].forEach(function(c) {
    var h = n[c.id].degree;
    u > h && (u = h);
    var d = n[c.id].inDegree;
    f > d && (f = d);
    var v = n[c.id].outDegree;
    l > v && (l = v);
  }), e[t] = {
    degree: u,
    inDegree: f,
    outDegree: l
  }), {
    minPatternNodeLabelDegree: u,
    minPatternNodeLabelInDegree: f,
    minPatternNodeLabelOutDegree: l
  };
}, gA = function(e, t, n, a, i, o, s) {
  var u;
  if (n === void 0 && (n = !1), o === void 0 && (o = "cluster"), s === void 0 && (s = "cluster"), !(!e || !e.nodes)) {
    var f = e.nodes.length;
    if (f) {
      var l = Sf(e, n), c = Sf(t, n), h = fE(e.nodes, l, n), d = fE(t.nodes, c, n), v = sE(e.nodes, o), p = v.nodeMap, g = v.nodeLabelMap, y = sE(t.nodes, o), m = y.nodeMap, b = y.nodeLabelMap;
      uE(e.edges, s, p);
      var E = uE(t.edges, s, m).edgeLabelMap, x = [];
      c == null || c.forEach(function(rt) {
        x = x.concat(rt);
      }), i || (i = Math.max.apply(Math, Yn(Yn([], x, !1), [2], !1))), a || (a = i);
      var w = oE(e, l, o, a), _ = oE(t, c, o, a), M = Math.min(100, f * (f - 1) / 2), A = k4(a, f, M, w, l), S = Hc(A, w, e), T = 10, C = 1, O = 1, L = 4, R = {
        graphs: S,
        nodeLabelProp: o,
        edgeLabelProp: s,
        minSupport: C,
        minNodeNum: O,
        maxNodeNum: L,
        directed: n
      }, P = P4(R).slice(0, T), z = P.length, V = [];
      P.forEach(function(rt, ie) {
        V[ie] = {}, Object.keys(S).forEach(function(D) {
          var _e = S[D], Fe = Kc(_e, rt, o, s);
          V[ie][D] = Fe;
        });
      });
      var N = R4(V, z, P), F = N.structure, q = N.structureCountMap, te = t.nodes[0], re = [], J = (u = t.nodes[0]) === null || u === void 0 ? void 0 : u[o], ye = -1 / 0;
      t.nodes.forEach(function(rt) {
        var ie = rt[o], D = g[ie];
        (D == null ? void 0 : D.length) > ye && (ye = D.length, re = D, J = ie, te = rt);
      });
      var Be = {}, Pe = {}, et = {}, ut = {}, at = {}, At = {};
      Object.keys(b).forEach(function(rt, ie) {
        at[rt] = [], n && (At[rt] = []);
        var D = b[rt], _e = {};
        D.forEach(function(Ke) {
          var Ze = d["".concat(te.id, "-").concat(Ke.id)];
          if (Ze && at[rt].push(Ze), _e["".concat(te.id, "-").concat(Ke.id)] = {
            start: 0,
            end: m[Ke.id].idx,
            distance: Ze
          }, n) {
            var ht = d["".concat(Ke.id, "-").concat(te.id)];
            ht && At[rt].push(ht);
          }
        }), at[rt] = at[rt].sort(function(Ke, Ze) {
          return Ke - Ze;
        }), n && (At[rt] = At[rt].sort(function(Ke, Ze) {
          return Ke - Ze;
        })), Pe = Hc(_e, _, t, Pe);
        var Fe = [];
        if (Object.keys(_e).forEach(function(Ke) {
          if (et[Ke]) {
            Fe.push(et[Ke]);
            return;
          }
          var Ze = Pe[Ke];
          et[Ke] = Kc(Ze, F, o, s), Fe.push(et[Ke]);
        }), Fe = Fe.sort(function(Ke, Ze) {
          return Ze - Ke;
        }), ut["".concat(te.id, "-").concat(rt)] = Fe, rt !== J)
          for (var ge = (re == null ? void 0 : re.length) || 0, We = function(Ze) {
            var ht = re[Ze], It = w[p[ht.id].idx], sr = It.nodeLabelCountMap[rt], Ot = b[rt].length;
            if (!sr || sr.count < Ot)
              return re.splice(Ze, 1), "continue";
            for (var fr = !1, ar = 0; ar < Ot; ar++)
              if (sr.dists[ar] > at[rt][ar]) {
                fr = !0;
                break;
              }
            if (fr)
              return re.splice(Ze, 1), "continue";
            var pr = {};
            It.neighbors.forEach(function(Kt) {
              var Sr = h["".concat(ht.id, "-").concat(Kt.id)];
              pr["".concat(ht.id, "-").concat(Kt.id)] = {
                start: p[ht.id].idx,
                end: p[Kt.id].idx,
                distance: Sr
              };
            }), S = Hc(pr, w, e, S);
            var hr = [];
            Object.keys(pr).forEach(function(Kt) {
              if (q[Kt]) {
                hr.push(q[Kt]);
                return;
              }
              var Sr = S[Kt];
              q[Kt] = Kc(Sr, F, o, s), hr.push(q[Kt]);
            }), hr = hr.sort(function(Kt, Sr) {
              return Sr - Kt;
            });
            for (var Kr = !1, ar = 0; ar < Ot; ar++)
              if (hr[ar] < Fe[ar]) {
                Kr = !0;
                break;
              }
            if (Kr)
              return re.splice(Ze, 1), "continue";
          }, Xe = ge - 1; Xe >= 0; Xe--)
            We(Xe);
      });
      var xt = [];
      re == null || re.forEach(function(rt) {
        for (var ie = p[rt.id].idx, D = pA(e.nodes, l[ie], ie, o, i), _e = D.neighbors, Fe = _e.length, ge = !1, We = Fe - 1; We >= 0; We--) {
          if (_e.length + 1 < t.nodes.length) {
            ge = !0;
            return;
          }
          var Xe = _e[We], Ke = Xe[o];
          if (!b[Ke] || !b[Ke].length) {
            _e.splice(We, 1);
            continue;
          }
          if (!at[Ke] || !at[Ke].length) {
            _e.splice(We, 1);
            continue;
          }
          var Ze = "".concat(rt.id, "-").concat(Xe.id), ht = h[Ze], It = at[Ke].length - 1, sr = at[Ke][It];
          if (ht > sr) {
            _e.splice(We, 1);
            continue;
          }
          if (n) {
            var Ot = "".concat(Xe.id, "-").concat(rt.id), fr = h[Ot];
            It = At[Ke].length - 1;
            var ar = At[Ke][It];
            if (fr > ar) {
              _e.splice(We, 1);
              continue;
            }
          }
          var pr = q[Ze] ? q[Ze] : B4(e, rt, Xe, p, ht, w, F, o, s, q, S), hr = "".concat(te.id, "-").concat(Ke), Kr = ut[hr][ut[hr].length - 1];
          if (pr < Kr) {
            _e.splice(We, 1);
            continue;
          }
          var Kt = lE(Be, Ke, m, b), Sr = Kt.minPatternNodeLabelDegree;
          if (Kt.minPatternNodeLabelInDegree, Kt.minPatternNodeLabelOutDegree, p[Xe.id].degree < Sr) {
            _e.splice(We, 1);
            continue;
          }
        }
        ge || xt.push({
          nodes: [rt].concat(_e)
        });
      });
      var lr = Mf(t, te.id, !1).length, Rt = {};
      n ? (Object.keys(lr).forEach(function(rt) {
        var ie = m[rt].node[o];
        Rt[ie] ? Rt[ie].push(lr[rt]) : Rt[ie] = [lr[rt]];
      }), Object.keys(Rt).forEach(function(rt) {
        Rt[rt].sort(function(ie, D) {
          return ie - D;
        });
      })) : Rt = at;
      for (var Wt = xt.length, vr = function(ie) {
        var D = xt[ie], _e = D.nodes[0], Fe = {}, ge = {};
        D.nodes.forEach(function(Mt, dr) {
          ge[Mt.id] = {
            idx: dr,
            node: Mt,
            degree: 0,
            inDegree: 0,
            outDegree: 0
          };
          var vt = Mt[o];
          Fe[vt] ? Fe[vt]++ : Fe[vt] = 1;
        });
        var We = [], Xe = {};
        e.edges.forEach(function(Mt) {
          ge[Mt.source] && ge[Mt.target] && (We.push(Mt), Xe[Mt[s]] ? Xe[Mt[s]]++ : Xe[Mt[s]] = 1, ge[Mt.source].degree++, ge[Mt.target].degree++, ge[Mt.source].outDegree++, ge[Mt.target].inDegree++);
        });
        for (var Ke = Object.keys(E).length, Ze = !1, ht = 0; ht < Ke; ht++) {
          var It = Object.keys(E)[ht];
          if (!Xe[It] || Xe[It] < E[It].length) {
            Ze = !0;
            break;
          }
        }
        if (Ze)
          return xt.splice(ie, 1), "continue";
        var sr = We.length;
        if (sr < t.edges.length)
          return xt.splice(ie, 1), "break";
        for (var Ot = !1, fr = function(dr) {
          var vt = We[dr], br = vt[s], qr = E[br];
          if (!qr || !qr.length)
            return Xe[br]--, qr && Xe[br] < qr.length ? (Ot = !0, "break") : (We.splice(dr, 1), ge[vt.source].degree--, ge[vt.target].degree--, ge[vt.source].outDegree--, ge[vt.target].inDegree--, "continue");
          var oi = ge[vt.source].node[o], si = ge[vt.target].node[o], la = !1;
          if (qr.forEach(function(Oa) {
            var ui = m[Oa.source].node, fi = m[Oa.target].node;
            ui[o] === oi && fi[o] === si && (la = !0), !n && ui[o] === si && fi[o] === oi && (la = !0);
          }), !la)
            return Xe[br]--, qr && Xe[br] < qr.length ? (Ot = !0, "break") : (We.splice(dr, 1), ge[vt.source].degree--, ge[vt.target].degree--, ge[vt.source].outDegree--, ge[vt.target].inDegree--, "continue");
        }, ht = sr - 1; ht >= 0; ht--) {
          var ar = fr(ht);
          if (ar === "break")
            break;
        }
        if (Ot)
          return xt.splice(ie, 1), "continue";
        D.edges = We;
        var pr = Mf(D, D.nodes[0].id, !1).length;
        if (Object.keys(pr).reverse().forEach(function(Mt) {
          if (!(Mt === D.nodes[0].id || Ot)) {
            if (pr[Mt] === 1 / 0) {
              var dr = ge[Mt].node[o];
              if (Fe[dr]--, Fe[dr] < b[dr].length) {
                Ot = !0;
                return;
              }
              var vt = D.nodes.indexOf(ge[Mt].node);
              D.nodes.splice(vt, 1), ge[Mt] = void 0;
              return;
            }
            var br = p[Mt].node[o];
            if (!Rt[br] || !Rt[br].length || pr[Mt] > Rt[br][Rt[br].length - 1]) {
              var dr = ge[Mt].node[o];
              if (Fe[dr]--, Fe[dr] < b[dr].length) {
                Ot = !0;
                return;
              }
              var vt = D.nodes.indexOf(ge[Mt].node);
              D.nodes.splice(vt, 1), ge[Mt] = void 0;
            }
          }
        }), Ot)
          return xt.splice(ie, 1), "continue";
        for (var hr = !0, Kr = 0; hr && !Ot; ) {
          hr = !1;
          var Kt = n ? ge[_e.id].degree < m[te.id].degree || ge[_e.id].inDegree < m[te.id].inDegree || ge[_e.id].outDegree < m[te.id].outDegree : ge[_e.id].degree < m[te.id].degree;
          if (Kt) {
            Ot = !0;
            break;
          }
          if (Fe[_e[o]] < b[_e[o]].length) {
            Ot = !0;
            break;
          }
          for (var Sr = D.nodes.length, Pn = Sr - 1; Pn >= 0; Pn--) {
            var Lr = D.nodes[Pn], Ia = ge[Lr.id].degree, ho = ge[Lr.id].inDegree, vo = ge[Lr.id].outDegree, Xr = Lr[o], fa = lE(Be, Xr, m, b), ii = fa.minPatternNodeLabelDegree, po = fa.minPatternNodeLabelInDegree, go = fa.minPatternNodeLabelOutDegree, yo = n ? Ia < ii || ho < po || vo < go : Ia < ii;
            if (yo) {
              if (Fe[Lr[o]]--, Fe[Lr[o]] < b[Lr[o]].length) {
                Ot = !0;
                break;
              }
              D.nodes.splice(Pn, 1), ge[Lr.id] = void 0, hr = !0;
            }
          }
          if (Ot || !hr && Kr !== 0)
            break;
          sr = We.length;
          for (var kn = sr - 1; kn >= 0; kn--) {
            var Ar = We[kn];
            if (!ge[Ar.source] || !ge[Ar.target]) {
              We.splice(kn, 1);
              var Rn = Ar[s];
              if (Xe[Rn]--, ge[Ar.source] && (ge[Ar.source].degree--, ge[Ar.source].outDegree--), ge[Ar.target] && (ge[Ar.target].degree--, ge[Ar.target].inDegree--), E[Rn] && Xe[Rn] < E[Rn].length) {
                Ot = !0;
                break;
              }
              hr = !0;
            }
          }
          Kr++;
        }
        if (Ot || Ot || D.nodes.length < t.nodes.length || We.length < t.edges.length)
          return xt.splice(ie, 1), "continue";
      }, cr = Wt - 1; cr >= 0; cr--) {
        var jt = vr(cr);
        if (jt === "break")
          break;
      }
      for (var or = xt.length, Wr = function(ie) {
        var D = xt[ie], _e = {};
        D.edges.forEach(function(We) {
          var Xe = "".concat(We.source, "-").concat(We.target, "-").concat(We.label);
          _e[Xe] ? _e[Xe]++ : _e[Xe] = 1;
        });
        for (var Fe = function(Xe) {
          var Ke = xt[Xe], Ze = {};
          Ke.edges.forEach(function(It) {
            var sr = "".concat(It.source, "-").concat(It.target, "-").concat(It.label);
            Ze[sr] ? Ze[sr]++ : Ze[sr] = 1;
          });
          var ht = !0;
          Object.keys(Ze).length !== Object.keys(_e).length ? ht = !1 : Object.keys(_e).forEach(function(It) {
            Ze[It] !== _e[It] && (ht = !1);
          }), ht && xt.splice(Xe, 1);
        }, ge = or - 1; ge > ie; ge--)
          Fe(ge);
        or = xt.length;
      }, cr = 0; cr <= or - 1; cr++)
        Wr(cr);
      return xt;
    }
  }
}, zs = (
  /** @class */
  function() {
    function r(e) {
      e === void 0 && (e = 10), this.linkedList = new HS(), this.maxStep = e;
    }
    return Object.defineProperty(r.prototype, "length", {
      get: function() {
        return this.linkedList.toArray().length;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.isEmpty = function() {
      return !this.linkedList.head;
    }, r.prototype.isMaxStack = function() {
      return this.toArray().length >= this.maxStep;
    }, r.prototype.peek = function() {
      return this.isEmpty() ? null : this.linkedList.head.value;
    }, r.prototype.push = function(e) {
      this.linkedList.prepend(e), this.length > this.maxStep && this.linkedList.deleteTail();
    }, r.prototype.pop = function() {
      var e = this.linkedList.deleteHead();
      return e ? e.value : null;
    }, r.prototype.toArray = function() {
      return this.linkedList.toArray().map(function(e) {
        return e.value;
      });
    }, r.prototype.clear = function() {
      for (; !this.isEmpty(); )
        this.pop();
    }, r;
  }()
), yA = yy;
const F4 = {
  getAdjMatrix: $o,
  breadthFirstSearch: qS,
  connectedComponent: py,
  getDegree: Mi,
  getInDegree: QS,
  getOutDegree: JS,
  detectCycle: yy,
  detectDirectedCycle: yA,
  detectAllCycles: tA,
  detectAllDirectedCycle: by,
  detectAllUndirectedCycle: my,
  depthFirstSearch: gy,
  dijkstra: Mf,
  findAllPath: aA,
  findShortestPath: nA,
  floydWarshall: Sf,
  labelPropagation: iA,
  louvain: wy,
  iLouvain: oA,
  kCore: sA,
  kMeans: uA,
  cosineSimilarity: _y,
  nodesCosineSimilarity: fA,
  minimumSpanningTree: lA,
  pageRank: cA,
  getNeighbors: Wn,
  Stack: zs,
  GADDI: gA
}, G4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  GADDI: gA,
  Stack: zs,
  breadthFirstSearch: qS,
  connectedComponent: py,
  cosineSimilarity: _y,
  default: F4,
  depthFirstSearch: gy,
  detectAllCycles: tA,
  detectAllDirectedCycle: by,
  detectAllUndirectedCycle: my,
  detectCycle: yy,
  detectDirectedCycle: yA,
  dijkstra: Mf,
  findAllPath: aA,
  findShortestPath: nA,
  floydWarshall: Sf,
  getAdjMatrix: $o,
  getDegree: Mi,
  getInDegree: QS,
  getNeighbors: Wn,
  getOutDegree: JS,
  iLouvain: oA,
  kCore: sA,
  kMeans: uA,
  labelPropagation: iA,
  louvain: wy,
  minimumSpanningTree: lA,
  nodesCosineSimilarity: fA,
  pageRank: cA
}, Symbol.toStringTag, { value: "Module" }));
var xh = io, z4 = function(e) {
  return function(t, n) {
    return t[e] - n[e];
  };
}, cE = function(e, t, n) {
  return e >= t && e <= n;
}, sd = function(e, t, n, a) {
  var i = 1e-4, o = {
    x: n.x - e.x,
    y: n.y - e.y
  }, s = {
    x: t.x - e.x,
    y: t.y - e.y
  }, u = {
    x: a.x - n.x,
    y: a.y - n.y
  }, f = s.x * u.y - s.y * u.x, l = f * f, c = 1 / f, h = s.x * s.x + s.y * s.y, d = u.x * u.x + u.y * u.y;
  if (l > i * h * d) {
    var v = (o.x * u.y - o.y * u.x) * c, p = (o.x * s.y - o.y * s.x) * c;
    return !cE(v, 0, 1) || !cE(p, 0, 1) ? null : {
      x: e.x + v * s.x,
      y: e.y + v * s.y
    };
  }
  return null;
}, mA = function(e, t) {
  var n = e.x, a = e.y, i = e.width, o = e.height, s = n + i / 2, u = a + o / 2, f = [], l = {
    x: s,
    y: u
  };
  f.push({
    x: n,
    y: a
  }), f.push({
    x: n + i,
    y: a
  }), f.push({
    x: n + i,
    y: a + o
  }), f.push({
    x: n,
    y: a + o
  }), f.push({
    x: n,
    y: a
  });
  for (var c = null, h = 1; h < f.length && (c = sd(f[h - 1], f[h], l, t), !c); h++)
    ;
  return c;
}, bA = function(e, t) {
  var n = e.x, a = e.y, i = e.r, o = t.x, s = t.y, u = o - n, f = s - a;
  if (u * u + f * f < i * i)
    return null;
  var l = Math.atan(f / u);
  return {
    x: n + Math.abs(i * Math.cos(l)) * Math.sign(u),
    y: a + Math.abs(i * Math.sin(l)) * Math.sign(f)
  };
}, EA = function(e, t) {
  var n = e.rx, a = e.ry, i = e.x, o = e.y, s = t.x - i, u = t.y - o, f = Math.atan2(u / a, s / n);
  return f < 0 && (f += 2 * Math.PI), {
    x: i + n * Math.cos(f),
    y: o + a * Math.sin(f)
  };
}, $s = function(e, t, n) {
  n === void 0 && (n = 1);
  var a = [e.x, e.y, n];
  return (!t || isNaN(t[0])) && (t = [1, 0, 0, 0, 1, 0, 0, 0, 1]), id(a, a, t), {
    x: a[0],
    y: a[1]
  };
}, xA = function(e, t, n) {
  n === void 0 && (n = 1), (!t || isNaN(t[0])) && (t = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
  var a = jM([1, 0, 0, 0, 1, 0, 0, 0, 1], t);
  a || (a = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
  var i = [e.x, e.y, n];
  return id(i, i, a), {
    x: i[0],
    y: i[1]
  };
}, m0 = function(e, t, n) {
  var a = e.x - t.x, i = e.y - t.y, o = e.x - n.x, s = e.y - n.y, u = (e.x * e.x - t.x * t.x - t.y * t.y + e.y * e.y) / 2, f = (e.x * e.x - n.x * n.x - n.y * n.y + e.y * e.y) / 2, l = i * o - a * s;
  return {
    x: -(s * u - i * f) / l,
    y: -(a * f - o * u) / l
  };
}, wh = function(e, t) {
  var n = e.x - t.x, a = e.y - t.y;
  return Math.sqrt(n * n + a * a);
}, U4 = function(e, t) {
  var n = [];
  return e.forEach(function(a) {
    var i = [];
    a.forEach(function(o) {
      i.push(o * t);
    }), n.push(i);
  }), n;
}, j4 = function(e) {
  for (var t = [], n = e.length, a = 0; a < n; a += 1) {
    t[a] = [];
    for (var i = 0; i < n; i += 1)
      a === i ? t[a][i] = 0 : e[a][i] === 0 || !e[a][i] ? t[a][i] = 1 / 0 : t[a][i] = e[a][i];
  }
  for (var o = 0; o < n; o += 1)
    for (var a = 0; a < n; a += 1)
      for (var i = 0; i < n; i += 1)
        t[a][i] > t[a][o] + t[o][i] && (t[a][i] = t[a][o] + t[o][i]);
  return t;
}, $4 = function(e, t) {
  var n = e.nodes, a = e.edges, i = [], o = {};
  if (!n)
    throw new Error("invalid nodes data!");
  return n && n.forEach(function(s, u) {
    o[s.id] = u;
    var f = [];
    i.push(f);
  }), a && a.forEach(function(s) {
    var u = s.source, f = s.target, l = o[u], c = o[f];
    i[l][c] = 1, t || (i[c][l] = 1);
  }), i;
}, wA = function(e, t) {
  e.translate(t.x, t.y);
}, b0 = function(e, t, n, a) {
  a === void 0 && (a = {
    duration: 500
  });
  var i = e.getMatrix();
  i || (i = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
  var o = e.getCanvasBBox(), s = t.x - o.minX, u = t.y - o.minY;
  if (n) {
    var f = s * i[0], l = u * i[4], c = 0, h = 0, d = 0, v = 0;
    e.animate(function(g) {
      return d = f * g, v = l * g, i = xh(i, [["t", d - c, v - h]]), c = d, h = v, {
        matrix: i
      };
    }, a);
  } else {
    var p = xh(i, [["t", s, u]]);
    e.setMatrix(p);
  }
}, W4 = function(e, t) {
  var n = e.getMatrix();
  n || (n = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
  var a = t;
  bt(t) || (a = [t, t]), bt(t) && t.length === 1 && (a = [t[0], t[0]]), n = xh(n, [["s", a[0], a[1]]]), e.setMatrix(n);
}, X4 = function(e, t) {
  var n = e.getMatrix();
  n || (n = [1, 0, 0, 0, 1, 0, 0, 0, 1]), n = xh(n, [["r", t]]), e.setMatrix(n);
}, V4 = function(e, t, n) {
  for (var a = [], i = 0; i < e; i++)
    a[i] = 0;
  return n.forEach(function(o) {
    o.source && (a[t[o.source]] += 1), o.target && (a[t[o.target]] += 1);
  }), a;
};
function Y4(r, e, t) {
  return (t[0] - r[0]) * (e[1] - r[1]) === (e[0] - r[0]) * (t[1] - r[1]) && Math.min(r[0], e[0]) <= t[0] && t[0] <= Math.max(r[0], e[0]) && Math.min(r[1], e[1]) <= t[1] && t[1] <= Math.max(r[1], e[1]);
}
var Af = function(e, t, n) {
  var a = !1, i = e.length, o = 1e-6;
  function s(c) {
    return Math.abs(c) < o ? 0 : c < 0 ? -1 : 1;
  }
  if (i <= 2)
    return !1;
  for (var u = 0; u < i; u++) {
    var f = e[u], l = e[(u + 1) % i];
    if (Y4(f, l, [t, n]))
      return !0;
    s(f[1] - n) > 0 != s(l[1] - n) > 0 && s(t - (n - f[1]) * (f[0] - l[0]) / (f[1] - l[1]) - f[0]) < 0 && (a = !a);
  }
  return a;
}, _A = function(e, t) {
  return !(t.minX > e.maxX || t.maxX < e.minX || t.minY > e.maxY || t.maxY < e.minY);
}, H4 = function(e, t) {
  var n = !1;
  return Se(e, function(a) {
    if (sd(a.from, a.to, t.from, t.to))
      return n = !0, !1;
  }), n;
}, MA = function(e, t) {
  var n = function(h) {
    var d = h.map(function(p) {
      return p[0];
    }), v = h.map(function(p) {
      return p[1];
    });
    return {
      minX: Math.min.apply(null, d),
      maxX: Math.max.apply(null, d),
      minY: Math.min.apply(null, v),
      maxY: Math.max.apply(null, v)
    };
  }, a = function(h) {
    for (var d = [], v = h.length, p = 0; p < v - 1; p++) {
      var g = h[p], y = h[p + 1];
      d.push({
        from: {
          x: g[0],
          y: g[1]
        },
        to: {
          x: y[0],
          y: y[1]
        }
      });
    }
    if (d.length > 1) {
      var m = h[0], b = h[v - 1];
      d.push({
        from: {
          x: b[0],
          y: b[1]
        },
        to: {
          x: m[0],
          y: m[1]
        }
      });
    }
    return d;
  };
  if (e.length < 2 || t.length < 2)
    return !1;
  var i = n(e), o = n(t);
  if (!_A(i, o))
    return !1;
  var s = !1;
  if (Se(t, function(c) {
    if (Af(e, c[0], c[1]))
      return s = !0, !1;
  }), s || (Se(e, function(c) {
    if (Af(t, c[0], c[1]))
      return s = !0, !1;
  }), s))
    return !0;
  var u = a(e), f = a(t), l = !1;
  return Se(f, function(c) {
    if (H4(u, c))
      return l = !0, !1;
  }), l;
}, Wo = (
  /** @class */
  function() {
    function r(e, t, n, a) {
      this.x1 = e, this.y1 = t, this.x2 = n, this.y2 = a;
    }
    return r.prototype.getBBox = function() {
      var e = Math.min(this.x1, this.x2), t = Math.min(this.y1, this.y2), n = Math.max(this.x1, this.x2), a = Math.max(this.y1, this.y2), i = {
        x: e,
        y: t,
        minX: e,
        minY: t,
        maxX: n,
        maxY: a,
        width: n - e,
        height: a - t
      };
      return i;
    }, r;
  }()
), My = function(e, t) {
  var n = {
    top: [e.minX, e.minY, e.maxX, e.minY],
    left: [e.minX, e.minY, e.minX, e.maxY],
    bottom: [e.minX, e.maxY, e.maxX, e.maxY],
    right: [e.maxX, e.minY, e.maxX, e.maxY]
  };
  return n[t];
}, K4 = function(e, t) {
  var n = (t.x2 - t.x1) * (e.y1 - t.y1) - (t.y2 - t.y1) * (e.x1 - t.x1), a = (e.x2 - e.x1) * (e.y1 - t.y1) - (e.y2 - e.y1) * (e.x1 - t.x1), i = (t.y2 - t.y1) * (e.x2 - e.x1) - (t.x2 - t.x1) * (e.y2 - e.y1);
  if (i) {
    var o = n / i, s = a / i;
    if (o >= 0 && o <= 1 && s >= 0 && s <= 1)
      return o;
  }
  return Number.POSITIVE_INFINITY;
}, SA = function(e, t) {
  for (var n = ["top", "left", "bottom", "right"], a = e.getBBox(), i = 0, o = [], s = 0; s < 4; s++) {
    var u = My(a, n[s]), f = u[0], l = u[1], c = u[2], h = u[3];
    o[s] = sd({
      x: t.x1,
      y: t.y1
    }, {
      x: t.x2,
      y: t.y2
    }, {
      x: f,
      y: l
    }, {
      x: c,
      y: h
    }), o[s] && (i += 1);
  }
  return [o, i];
}, Sy = function(e, t) {
  for (var n = ["top", "left", "bottom", "right"], a = e.getBBox(), i = Number.POSITIVE_INFINITY, o = 0, s = 0; s < 4; s++) {
    var u = My(a, n[s]), f = u[0], l = u[1], c = u[2], h = u[3], d = K4(t, new Wo(f, l, c, h));
    d = Math.abs(d - 0.5), d >= 0 && d <= 1 && (o += 1, i = d < i ? d : i);
  }
  return o === 0 ? -1 : i;
}, AA = function(e) {
  var t = 0, n = 0;
  if (e.length > 0) {
    for (var a = 0, i = e; a < i.length; a++) {
      var o = i[a];
      t += o.x, n += o.y;
    }
    t /= e.length, n /= e.length;
  }
  return {
    x: t,
    y: n
  };
}, _h = function(e, t) {
  return Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2);
}, CA = function(e, t) {
  var n = t.x1, a = t.y1, i = t.x2 - n, o = t.y2 - a, s = e.x - n, u = e.y - a, f = s * i + u * o, l;
  f <= 0 ? l = 0 : (s = i - s, u = o - u, f = s * i + u * o, f <= 0 ? l = 0 : l = f * f / (i * i + o * o));
  var c = s * s + u * u - l;
  return c < 0 && (c = 0), c;
}, E0 = function(e, t, n) {
  return n === void 0 && (n = 1e-3), Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2) < Math.pow(n, 2);
}, TA = function(e, t) {
  var n = e.x < t.x, a = e.x > t.x + t.width, i = e.y > t.y + t.height, o = e.y < t.y, s = n || a || i || o;
  if (!s)
    return 0;
  if (i && !n && !a)
    return Math.pow(t.y + t.height - e.y, 2);
  if (o && !n && !a)
    return Math.pow(e.y - t.y, 2);
  if (n && !i && !o)
    return Math.pow(t.x - e.x, 2);
  if (a && !i && !o)
    return Math.pow(t.x + t.width - e.x, 2);
  var u = Math.min(Math.abs(t.x - e.x), Math.abs(t.x + t.width - e.x)), f = Math.min(Math.abs(t.y - e.y), Math.abs(t.y + t.height - e.y));
  return u * u + f * f;
}, q4 = function(e, t) {
  var n = e[0], a = e[1], i = e[2], o = e[3], s = t.x, u = t.y, f = [i - n, o - a];
  if (vy(f, [0, 0]))
    return NaN;
  var l = [-f[1], f[0]];
  qi(l, l);
  var c = [s - n, u - a];
  return Math.abs(dy(c, l));
}, Ay = function(e, t, n) {
  return e + (t - e) * n;
}, x0 = function(e, t, n) {
  for (var a = Math.min(e.length, t.length), i = new Array(a), o = 0; o < a; o++)
    i[o] = Ay(e[o], t[o], n);
  return i;
};
const Z4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Line: Wo,
  applyMatrix: $s,
  compare: z4,
  distance: wh,
  floydWarshall: j4,
  fractionToLine: Sy,
  getAdjMatrix: $4,
  getBBoxBoundLine: My,
  getCircleCenterByPoints: m0,
  getCircleIntersectByPoint: bA,
  getDegree: V4,
  getEllipseIntersectByPoint: EA,
  getLineIntersect: sd,
  getPointsCenter: AA,
  getRectIntersectByPoint: mA,
  intersectBBox: _A,
  invertMatrix: xA,
  isPointInPolygon: Af,
  isPointsOverlap: E0,
  isPolygonsIntersect: MA,
  itemIntersectByLine: SA,
  lerp: Ay,
  lerpArray: x0,
  move: b0,
  pointLineDistance: q4,
  pointLineSquareDist: CA,
  pointRectSquareDist: TA,
  rotate: X4,
  scale: W4,
  scaleMatrix: U4,
  squareDist: _h,
  translate: wA
}, Symbol.toStringTag, { value: "Module" }));
var Bi = "rgb(95, 149, 255)", Q4 = "rgb(255, 255, 255)", hE = "rgb(0, 0, 0)", sp = "rgb(247, 250, 255)", IA = "rgb(239, 244, 255)", Ql = "rgb(253, 253, 253)", dE = "rgb(250, 250, 250)", Jl = "rgb(224, 224, 224)", vE = "rgb(234, 234, 234)", J4 = "rgb(245, 245, 245)", eG = "rgb(191, 213, 255)", pE = "#4572d9", tG = "rgb(223, 234, 255)", tr = {
  // for nodes
  mainStroke: Bi,
  mainFill: IA,
  activeStroke: Bi,
  activeFill: sp,
  inactiveStroke: eG,
  inactiveFill: sp,
  selectedStroke: Bi,
  selectedFill: Q4,
  highlightStroke: pE,
  highlightFill: tG,
  disableStroke: Jl,
  disableFill: dE,
  // for edges
  edgeMainStroke: Jl,
  edgeActiveStroke: Bi,
  edgeInactiveStroke: vE,
  edgeSelectedStroke: Bi,
  edgeHighlightStroke: Bi,
  edgeDisableStroke: J4,
  // for combos
  comboMainStroke: Jl,
  comboMainFill: Ql,
  comboActiveStroke: Bi,
  comboActiveFill: sp,
  comboInactiveStroke: Jl,
  comboInactiveFill: Ql,
  comboSelectedStroke: Bi,
  comboSelectedFill: Ql,
  comboHighlightStroke: pE,
  comboHighlightFill: Ql,
  comboDisableStroke: vE,
  comboDisableFill: dE
};
const lt = {
  version: "0.8.21",
  rootContainerClassName: "root-container",
  nodeContainerClassName: "node-container",
  edgeContainerClassName: "edge-container",
  comboContainerClassName: "combo-container",
  delegateContainerClassName: "delegate-container",
  defaultLoopPosition: "top",
  nodeLabel: {
    style: {
      fill: "#000",
      fontSize: 12,
      textAlign: "center",
      textBaseline: "middle"
    },
    offset: 4
    // 节点的默认文本不居中时的偏移量
  },
  defaultNode: {
    type: "circle",
    style: {
      lineWidth: 1,
      stroke: tr.mainStroke,
      fill: IA
    },
    size: 20,
    color: tr.mainStroke,
    linkPoints: {
      size: 8,
      lineWidth: 1,
      fill: tr.activeFill,
      stroke: tr.activeStroke
    }
  },
  // 节点应用状态后的样式，默认仅提供 active、selected、highlight、inactive、disable，用户可以自己扩展
  nodeStateStyles: {
    active: {
      fill: tr.activeFill,
      stroke: tr.activeStroke,
      lineWidth: 2,
      shadowColor: tr.mainStroke,
      shadowBlur: 10
    },
    selected: {
      fill: tr.selectedFill,
      stroke: tr.selectedStroke,
      lineWidth: 4,
      shadowColor: tr.selectedStroke,
      shadowBlur: 10,
      "text-shape": {
        fontWeight: 500
      }
    },
    highlight: {
      fill: tr.highlightFill,
      stroke: tr.highlightStroke,
      lineWidth: 2,
      "text-shape": {
        fontWeight: 500
      }
    },
    inactive: {
      fill: tr.inactiveFill,
      stroke: tr.inactiveStroke,
      lineWidth: 1
    },
    disable: {
      fill: tr.disableFill,
      stroke: tr.disableStroke,
      lineWidth: 1
    }
  },
  edgeLabel: {
    style: {
      fill: hE,
      textAlign: "center",
      textBaseline: "middle",
      fontSize: 12
    }
  },
  defaultEdge: {
    type: "line",
    size: 1,
    style: {
      stroke: tr.edgeMainStroke,
      lineAppendWidth: 2
    },
    color: tr.edgeMainStroke
  },
  // 边应用状态后的样式，默认仅提供 active、selected、highlight、inactive、disable，用户可以自己扩展
  edgeStateStyles: {
    active: {
      stroke: tr.edgeActiveStroke,
      lineWidth: 1
    },
    selected: {
      stroke: tr.edgeSelectedStroke,
      lineWidth: 2,
      shadowColor: tr.edgeSelectedStroke,
      shadowBlur: 10,
      "text-shape": {
        fontWeight: 500
      }
    },
    highlight: {
      stroke: tr.edgeHighlightStroke,
      lineWidth: 2,
      "text-shape": {
        fontWeight: 500
      }
    },
    inactive: {
      stroke: tr.edgeInactiveStroke,
      lineWidth: 1
    },
    disable: {
      stroke: tr.edgeDisableStroke,
      lineWidth: 1
    }
  },
  comboLabel: {
    style: {
      fill: hE,
      // textAlign: 'center',
      textBaseline: "middle",
      fontSize: 12
    },
    refY: 10,
    refX: 10
    // Combo 的默认文本不居中时的偏移量
  },
  defaultCombo: {
    type: "circle",
    style: {
      fill: tr.comboMainFill,
      lineWidth: 1,
      stroke: tr.comboMainStroke,
      r: 5,
      width: 20,
      height: 10
    },
    size: [20, 5],
    color: tr.comboMainStroke,
    padding: [25, 20, 15, 20]
  },
  // combo 应用状态后的样式，默认仅提供 active、selected、highlight、inactive、disable，用户可以自己扩展
  comboStateStyles: {
    active: {
      stroke: tr.comboActiveStroke,
      lineWidth: 1,
      fill: tr.comboActiveFill
    },
    selected: {
      stroke: tr.comboSelectedStroke,
      lineWidth: 2,
      fill: tr.comboSelectedFill,
      shadowColor: tr.comboSelectedStroke,
      shadowBlur: 10,
      "text-shape": {
        fontWeight: 500
      }
    },
    highlight: {
      stroke: tr.comboHighlightStroke,
      lineWidth: 2,
      fill: tr.comboHighlightFill,
      "text-shape": {
        fontWeight: 500
      }
    },
    inactive: {
      stroke: tr.comboInactiveStroke,
      fill: tr.comboInactiveFill,
      lineWidth: 1
    },
    disable: {
      stroke: tr.comboDisableStroke,
      fill: tr.comboDisableFill,
      lineWidth: 1
    }
  },
  delegateStyle: {
    fill: "#F3F9FF",
    fillOpacity: 0.5,
    stroke: "#1890FF",
    strokeOpacity: 0.9,
    lineDash: [5, 5]
  },
  windowFontFamily: typeof window < "u" && window.getComputedStyle && document.body && window.getComputedStyle(document.body, null).getPropertyValue("font-family") || "Arial, sans-serif"
}, rG = {
  " ": 0.3329986572265625,
  a: 0.5589996337890625,
  A: 0.6569992065429687,
  b: 0.58599853515625,
  B: 0.6769989013671875,
  c: 0.5469985961914062,
  C: 0.7279998779296875,
  d: 0.58599853515625,
  D: 0.705999755859375,
  e: 0.554998779296875,
  E: 0.63699951171875,
  f: 0.37299957275390627,
  F: 0.5769989013671875,
  g: 0.5909988403320312,
  G: 0.7479995727539063,
  h: 0.555999755859375,
  H: 0.7199996948242188,
  i: 0.255999755859375,
  I: 0.23699951171875,
  j: 0.26699981689453123,
  J: 0.5169998168945312,
  k: 0.5289993286132812,
  K: 0.6899993896484375,
  l: 0.23499908447265624,
  L: 0.5879989624023437,
  m: 0.854998779296875,
  M: 0.8819992065429687,
  n: 0.5589996337890625,
  N: 0.7189987182617188,
  o: 0.58599853515625,
  O: 0.7669998168945312,
  p: 0.58599853515625,
  P: 0.6419998168945312,
  q: 0.58599853515625,
  Q: 0.7669998168945312,
  r: 0.3649993896484375,
  R: 0.6759994506835938,
  s: 0.504998779296875,
  S: 0.6319992065429687,
  t: 0.354998779296875,
  T: 0.6189987182617187,
  u: 0.5599990844726562,
  U: 0.7139999389648437,
  v: 0.48199920654296874,
  V: 0.6389999389648438,
  w: 0.754998779296875,
  W: 0.929998779296875,
  x: 0.5089996337890625,
  X: 0.63699951171875,
  y: 0.4959991455078125,
  Y: 0.66199951171875,
  z: 0.48699951171875,
  Z: 0.6239990234375,
  0: 0.6,
  1: 0.40099945068359377,
  2: 0.6,
  3: 0.6,
  4: 0.6,
  5: 0.6,
  6: 0.6,
  7: 0.5469985961914062,
  8: 0.6,
  9: 0.6,
  "[": 0.3329986572265625,
  "]": 0.3329986572265625,
  ",": 0.26399993896484375,
  ".": 0.26399993896484375,
  ";": 0.26399993896484375,
  ":": 0.26399993896484375,
  "{": 0.3329986572265625,
  "}": 0.3329986572265625,
  "\\": 0.5,
  "|": 0.19499969482421875,
  "=": 0.604998779296875,
  "+": 0.604998779296875,
  "-": 0.604998779296875,
  _: 0.5,
  "`": 0.3329986572265625,
  " ~": 0.8329986572265625,
  "!": 0.3329986572265625,
  "@": 0.8579986572265625,
  "#": 0.6,
  $: 0.6,
  "%": 0.9699996948242188,
  "^": 0.517999267578125,
  "&": 0.7259994506835937,
  "*": 0.505999755859375,
  "(": 0.3329986572265625,
  ")": 0.3329986572265625,
  "<": 0.604998779296875,
  ">": 0.604998779296875,
  "/": 0.5,
  "?": 0.53699951171875
};
var Ga = Math.PI, w0 = Math.sin, _0 = Math.cos, fn = w0(Ga / 8), ln = _0(Ga / 8), Mh = function(e, t) {
  var n = e.getBBox(), a = {
    x: n.minX,
    y: n.minY
  }, i = {
    x: n.maxX,
    y: n.maxY
  };
  if (t) {
    var o = t.getMatrix();
    o || (o = [1, 0, 0, 0, 1, 0, 0, 0, 1]), a = $s(a, o), i = $s(i, o);
  }
  var s = a.x, u = a.y, f = i.x, l = i.y;
  return {
    x: s,
    y: u,
    minX: s,
    minY: u,
    maxX: f,
    maxY: l,
    width: f - s,
    height: l - u
  };
}, OA = function(e) {
  var t = e.sourceNode || e.targetNode, n = t.get("group"), a = n.getMatrix();
  a || (a = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
  var i = t.getKeyShape(), o = i.getBBox(), s = e.loopCfg || {}, u = s.dist || Math.max(o.width, o.height) * 2, f = s.position || lt.defaultLoopPosition, l = [(o.minX + o.maxX) / 2 + a[6], (o.minY + o.maxY) / 2 + a[7]], c = [e.startPoint.x, e.startPoint.y], h = [e.endPoint.x, e.endPoint.y], d = o.height / 2, v = o.width / 2, p = d, g = d, y = p * fn, m = p * ln, b = g * fn, E = g * ln, x = i.get("type"), w = Math.min(d / 2, v / 2), _ = Math.min(d, v), M = s != null && s.pointPadding ? Math.min(_, s == null ? void 0 : s.pointPadding) : w;
  if (c[0] === h[0] && c[1] === h[1]) {
    switch (f) {
      case "top":
        x === "circle" ? (c = [l[0] - y, l[1] - m], h = [l[0] + b, l[1] - E]) : (c = [l[0] - M, l[1] - d], h = [l[0] + M, l[1] - d]);
        break;
      case "top-right":
        p = d, g = v, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] + y, l[1] - m], h = [l[0] + E, l[1] - b]) : (c = [l[0] + v - M, l[1] - d], h = [l[0] + v, l[1] - d + M]);
        break;
      case "right":
        p = v, g = v, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] + m, l[1] - y], h = [l[0] + E, l[1] + b]) : (c = [l[0] + v, l[1] - M], h = [l[0] + v, l[1] + M]);
        break;
      case "bottom-right":
        p = v, g = d, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] + m, l[1] + y], h = [l[0] + b, l[1] + E]) : (c = [l[0] + v, l[1] + d - M], h = [l[0] + v - M, l[1] + d]);
        break;
      case "bottom":
        p = d, g = d, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] + y, l[1] + m], h = [l[0] - b, l[1] + E]) : (c = [l[0] - M, l[1] + d], h = [l[0] + M, l[1] + d]);
        break;
      case "bottom-left":
        p = d, g = v, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] - y, l[1] + m], h = [l[0] - E, l[1] + b]) : (c = [l[0] - v, l[1] + d - M], h = [l[0] - v + M, l[1] + d]);
        break;
      case "left":
        p = v, g = v, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] - m, l[1] + y], h = [l[0] - E, l[1] - b]) : (c = [l[0] - v, l[1] - M], h = [l[0] - v, l[1] + M]);
        break;
      case "top-left":
        p = v, g = d, x === "circle" ? (y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] - m, l[1] - y], h = [l[0] - b, l[1] - E]) : (c = [l[0] - v + M, l[1] - d], h = [l[0] - v, l[1] - d + M]);
        break;
      default:
        p = v, g = v, y = p * fn, m = p * ln, b = g * fn, E = g * ln, c = [l[0] - y, l[1] - m], h = [l[0] + b, l[1] - E];
    }
    if (s.clockwise === !1) {
      var A = [c[0], c[1]];
      c = [h[0], h[1]], h = [A[0], A[1]];
    }
  }
  var S = [c[0] - l[0], c[1] - l[1]], T = (p + u) / p, C = (g + u) / g;
  s.clockwise === !1 && (T = (g + u) / g, C = (p + u) / p);
  var O = xn([0, 0], S, T), L = [l[0] + O[0], l[1] + O[1]], R = [h[0] - l[0], h[1] - l[1]], P = xn([0, 0], R, C), z = [l[0] + P[0], l[1] + P[1]];
  return e.startPoint = {
    x: c[0],
    y: c[1]
  }, e.endPoint = {
    x: h[0],
    y: h[1]
  }, e.controlPoints = [{
    x: L[0],
    y: L[1]
  }, {
    x: z[0],
    y: z[1]
  }], e;
}, DA = function(e, t, n, a, i) {
  var o = 1e-4, s = [], u = e == null ? void 0 : e.getPoint(t);
  if (!u)
    return {
      x: 0,
      y: 0,
      angle: 0
    };
  if (t < o)
    s = e.getStartTangent().reverse();
  else if (t > 1 - o)
    s = e.getEndTangent();
  else {
    var f = e == null ? void 0 : e.getPoint(t + o);
    s.push([u.x, u.y]), s.push([f.x, f.y]);
  }
  var l = Math.atan2(s[1][1] - s[0][1], s[1][0] - s[0][0]);
  if (l < 0 && (l += Ga * 2), n && (u.x += _0(l) * n, u.y += w0(l) * n), a) {
    var c = l - Ga / 2;
    l > 1 / 2 * Ga && l < 3 * 1 / 2 * Ga && (c -= Ga), u.x += _0(c) * a, u.y += w0(c) * a;
  }
  var h = {
    x: u.x,
    y: u.y,
    angle: l
  };
  return i ? (l > 0.5 * Ga && l < 1.5 * Ga && (l -= Ga), B({
    rotate: l
  }, h)) : h;
}, nG = function r(e, t, n, a) {
  if (a(e, t, n) === !1)
    return !1;
  if (e && e.children) {
    for (var i = e.children.length - 1; i >= 0; i--)
      if (!r(e.children[i], e, i, a))
        return !1;
  }
  return !0;
}, aG = function r(e, t, n, a) {
  if (e && e.children) {
    for (var i = e.children.length - 1; i >= 0; i--)
      if (!r(e.children[i], e, i, a))
        return;
  }
  return a(e, t, n) !== !1;
}, En = function(e, t) {
  typeof t == "function" && nG(e, null, -1, t);
}, za = function(e, t) {
  typeof t == "function" && aG(e, null, -1, t);
}, LA = function(e, t) {
  return t * (rG[e] || 1);
}, NA = function(e, t) {
  var n = 0, a = new RegExp("[一-龥]+");
  return e.split("").forEach(function(i) {
    a.test(i) ? n += t : n += LA(i, t);
  }), [n, t];
}, PA = function(e, t) {
  return typeof t != "number" || t <= 0 || t >= e.length ? e : e.substring(0, t) + "...";
}, M0 = function(e, t) {
  var n = [], a = {}, i = {};
  e.forEach(function(u) {
    i[u.id] = u;
  }), e.forEach(function(u, f) {
    var l = nr(u);
    l.itemType = "combo", l.children = void 0, l.parentId === l.id ? (console.warn("The parentId for combo ".concat(l.id, " can not be the same as the combo's id")), delete l.parentId) : l.parentId && !i[l.parentId] && (console.warn("The parent combo for combo ".concat(l.id, " does not exist!")), delete l.parentId);
    var c = a[l.id];
    if (c) {
      if (l.children = c.children, a[l.id] = l, c = l, !c.parentId) {
        n.push(c);
        return;
      }
      var h = a[c.parentId];
      if (h)
        h.children ? h.children.push(l) : h.children = [l];
      else {
        var d = {
          id: c.parentId,
          children: [c]
        };
        a[c.parentId] = d, a[l.id] = l;
      }
      return;
    }
    if (He(u.parentId)) {
      var v = a[u.parentId];
      if (v)
        v.children ? v.children.push(l) : v.children = [l], a[l.id] = l;
      else {
        var p = {
          id: u.parentId,
          children: [l]
        };
        a[p.id] = p, a[l.id] = l;
      }
    } else
      n.push(l), a[l.id] = l;
  });
  var o = {};
  (t || []).forEach(function(u) {
    o[u.id] = u;
    var f = a[u.comboId];
    if (f) {
      var l = {
        id: u.id,
        comboId: u.comboId
      };
      f.children ? f.children.push(l) : f.children = [l], l.itemType = "node", a[u.id] = l;
    }
  });
  var s = 0;
  return n.forEach(function(u) {
    u.depth = s + 10, En(u, function(f) {
      var l, c = a[f.id].itemType;
      c === "node" ? l = a[f.comboId] : l = a[f.parentId], l && c === "node" ? f.depth = s + 1 : f.depth = s + 10, s < f.depth && (s = f.depth);
      var h = o[f.id];
      return h && (h.depth = f.depth), !0;
    });
  }), n;
}, S0 = function(e, t, n) {
  var a, i = e, o, s = {
    root: {
      children: e
    }
  }, u = !1, f = "root";
  (e || []).forEach(function(v) {
    if (!u) {
      if (v.id === t) {
        o = v, v.itemType === "combo" ? o.parentId = n : o.comboId = n, u = !0;
        return;
      }
      En(v, function(p) {
        var g;
        return s[p.id] = {
          children: (p == null ? void 0 : p.children) || []
        }, i = (g = s[p.parentId || p.comboId || "root"]) === null || g === void 0 ? void 0 : g.children, p && (p.removed || t === p.id) && i ? (f = p.parentId || p.comboId || "root", o = p, p.itemType === "combo" ? o.parentId = n : o.comboId = n, u = !0, !1) : !0;
      });
    }
  }), i = (a = s[f]) === null || a === void 0 ? void 0 : a.children;
  var l = i ? i.indexOf(o) : -1;
  if (l > -1 && i.splice(l, 1), u || (o = {
    id: t,
    itemType: "node",
    comboId: n
  }, s[t] = {
    children: void 0
  }), t) {
    var c = !1;
    if (n) {
      var h = 0;
      (e || []).forEach(function(v) {
        c || En(v, function(p) {
          return n === p.id ? (c = !0, p.children ? p.children.push(o) : p.children = [o], h = p.depth, o.itemType === "node" ? o.depth = h + 2 : o.depth = h + 1, !1) : !0;
        });
      });
    } else
      (!n || !c) && o.itemType !== "node" && e.push(o);
    var d = o.depth;
    En(o, function(v) {
      return v.itemType === "node" ? d += 2 : d += 1, v.depth = d, !0;
    });
  }
  return e;
}, qc = function(e, t, n) {
  var a = {
    minX: 1 / 0,
    minY: 1 / 0,
    maxX: -1 / 0,
    maxY: -1 / 0,
    x: void 0,
    y: void 0,
    width: void 0,
    height: void 0,
    centerX: void 0,
    centerY: void 0
  };
  if (!e || e.length === 0) {
    var i = n == null ? void 0 : n.getModel(), o = i || {}, s = o.x, u = o.y, f = o.fixSize, l = o.collapsed, c = o.fixCollapseSize, h = l ? c : f, d = bt(h) ? h : [h, h], v = d[0], p = d[1], g = [v / 2, p / 2];
    return {
      minX: s - g[0],
      minY: u - g[1],
      maxX: s + g[0],
      maxY: u + g[1],
      x: s,
      y: u,
      width: v,
      height: p
    };
  }
  return e.forEach(function(y) {
    var m = t.findById(y.id);
    if (!(!m || !m.isVisible())) {
      m.set("bboxCanvasCache", void 0);
      var b = m.getCanvasBBox();
      b.x && a.minX > b.minX && (a.minX = b.minX), b.y && a.minY > b.minY && (a.minY = b.minY), b.x && a.maxX < b.maxX && (a.maxX = b.maxX), b.y && a.maxY < b.maxY && (a.maxY = b.maxY);
    }
  }), a.x = (a.minX + a.maxX) / 2, a.y = (a.minY + a.maxY) / 2, a.width = a.maxX - a.minX, a.height = a.maxY - a.minY, a.centerX = (a.minX + a.maxX) / 2, a.centerY = (a.minY + a.maxY) / 2, (n == null ? void 0 : n.getKeyShape().get("type")) === "circle" && (a.width = Math.hypot(a.height, a.width), a.height = a.width), Object.keys(a).forEach(function(y) {
    (a[y] === 1 / 0 || a[y] === -1 / 0) && (a[y] = void 0);
  }), a;
}, iG = function(e) {
  var t = Pt(e.x) || Pt(e.y) || e.type || e.anchorPoints || e.size;
  return e.style && (t = t || Pt(e.style.r) || Pt(e.style.width) || Pt(e.style.height) || Pt(e.style.rx) || Pt(e.style.ry)), t;
}, Zc = function(e) {
  var t = {};
  return Object.keys(e).forEach(function(n) {
    var a = e[n];
    if (!(n === "img" && !He(a)))
      if (yn(a) && !bt(a)) {
        var i = {};
        Object.keys(a).forEach(function(o) {
          var s = a[o];
          o === "img" && !He(s) || (i[o] = nr(s));
        }), t[n] = i;
      } else
        t[n] = nr(a);
  }), t;
}, Cf = function(e) {
  var t = e.animateCfg, n = e.callback, a;
  if (!t)
    a = {
      duration: 500,
      callback: n
    };
  else if (a = nr(t), t.callback) {
    var i = t.callback;
    a.callback = function() {
      n(), i();
    };
  } else
    a.callback = n;
  return a;
};
const oG = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  cloneBesidesImg: Zc,
  getAnimateCfgWithCallback: Cf,
  getBBox: Mh,
  getComboBBox: qc,
  getLabelPosition: DA,
  getLetterWidth: LA,
  getLoopCfgs: OA,
  getTextSize: NA,
  plainCombosToTrees: M0,
  reconstructTree: S0,
  shouldRefreshEdge: iG,
  traverseTree: En,
  traverseTreeUp: za,
  truncateLabelByLength: PA
}, Symbol.toStringTag, { value: "Module" }));
var gE = function(e) {
  if (!e)
    return console.error("G6 Error Tips: the data must be defined"), !1;
  var t = e.nodes, n = e.edges, a = e.combos, i = a === void 0 ? [] : a;
  if (!t && !n) {
    var o = !0;
    return En(e, function(h) {
      return He(h.id) ? !0 : (o = !1, !1);
    }), o;
  }
  var s = (t || []).find(function(h) {
    return !He(h.id);
  });
  if (s)
    return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id, "%c is not a string."), "font-size: 20px; color: red;", ""), !1;
  var u = (t || []).map(function(h) {
    return h.id;
  }), f = i == null ? void 0 : i.map(function(h) {
    return h.id;
  }), l = Yn(Yn([], u, !0), f, !0), c = (n || []).find(function(h) {
    return !l.includes(h.source) || !l.includes(h.target);
  });
  return c ? (console.warn("G6 Warning Tips: The source %c".concat(c.source, "%c or the target %c").concat(c.target, "%c of the edge do not exist in the nodes or combos."), "font-size: 20px; color: red;", "", "font-size: 20px; color: red;", ""), !1) : !0;
}, sG = function(e, t) {
  if (e === "node" || e === "combo") {
    if (t.id && !He(t.id))
      return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id, "%c is not a string."), "font-size: 20px; color: red;", ""), !1;
  } else if (e === "edge" && (!t.source || !t.target))
    return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."), !1;
  return !0;
}, uG = (
  /** @class */
  function() {
    function r(e) {
      this.graph = e, this.destroyed = !1, this.modes = e.get("modes") || {
        default: []
      }, this.formatModes(), this.mode = e.get("defaultMode") || "default", this.currentBehaves = [], this.setMode(this.mode);
    }
    return r.prototype.formatModes = function() {
      var e = this.modes;
      Se(e, function(t) {
        Se(t, function(n, a) {
          He(n) && (t[a] = {
            type: n
          });
        });
      });
    }, r.prototype.setBehaviors = function(e) {
      var t = this.graph, n = this.modes[e], a = [], i;
      Se(n || [], function(o) {
        var s = ey.getBehavior(o.type || o);
        s && (i = new s(o), i && (i.bind(t), a.push(i)));
      }), this.currentBehaves = a;
    }, r.mergeBehaviors = function(e, t) {
      return Se(t, function(n) {
        e.indexOf(n) < 0 && (He(n) && (n = {
          type: n
        }), e.push(n));
      }), e;
    }, r.filterBehaviors = function(e, t) {
      var n = [];
      return e.forEach(function(a) {
        var i = "";
        He(a) ? i = a : i = a.type, t.indexOf(i) < 0 && n.push(a);
      }), n;
    }, r.prototype.setMode = function(e) {
      var t = this, n = t.modes, a = t.graph, i = e, o = n[i];
      o && (a.emit("beforemodechange", {
        mode: e
      }), Se(this.currentBehaves, function(s) {
        s.delegate && s.delegate.remove(), s.unbind(a);
      }), this.setBehaviors(i), a.emit("aftermodechange", {
        mode: e
      }), this.mode = e);
    }, r.prototype.getMode = function() {
      return this.mode;
    }, r.prototype.manipulateBehaviors = function(e, t, n) {
      var a = this, i;
      if (bt(e) ? i = e : i = [e], bt(t))
        return Se(t, function(s) {
          a.modes[s] ? n ? a.modes[s] = r.mergeBehaviors(a.modes[s] || [], i) : a.modes[s] = r.filterBehaviors(a.modes[s] || [], i) : n && (a.modes[s] = i);
        }), this;
      var o = t;
      return t || (o = this.mode), this.modes[o] || n && (this.modes[o] = i), n ? this.modes[o] = r.mergeBehaviors(this.modes[o] || [], i) : this.modes[o] = r.filterBehaviors(this.modes[o] || [], i), this.formatModes(), this.setMode(this.mode), this;
    }, r.prototype.updateBehavior = function(e, t, n) {
      He(e) && (e = {
        type: e
      });
      var a = [];
      if (!n || n === this.mode || n === "default") {
        if (a = this.currentBehaves, !a || !a.length)
          return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."), this;
        for (var i = a.length, o = 0; o < i; o++) {
          var s = a[o];
          if (s.type === e.type)
            return s.updateCfg(t), this;
          o === i - 1 && console.warn("Update behavior failed! There is no such behavior in the mode");
        }
      } else {
        if (a = this.modes[n], !a || !a.length)
          return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."), this;
        for (var u = a.length, o = 0; o < u; o++) {
          var s = a[o];
          if (s.type === e.type || s === e.type)
            return s === e.type && (s = {
              type: s
            }), Object.assign(s, t), a[o] = s, this;
          o === u - 1 && console.warn("Update behavior failed! There is no such behavior in the mode");
        }
      }
      return this;
    }, r.prototype.destroy = function() {
      this.graph = null, this.modes = null, this.currentBehaves = null, this.destroyed = !0;
    }, r;
  }()
), df = `	
\v\f\r   ᠎             　\u2028\u2029`, fG = new RegExp("([a-z])[" + df + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + df + "]*,?[" + df + "]*)+)", "ig"), lG = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + df + "]*,?[" + df + "]*", "ig"), Us = function(r) {
  if (!r)
    return null;
  if (bt(r))
    return r;
  var e = {
    a: 7,
    c: 6,
    o: 2,
    h: 1,
    l: 2,
    m: 2,
    r: 4,
    q: 4,
    s: 4,
    t: 2,
    v: 1,
    u: 3,
    z: 0
  }, t = [];
  return String(r).replace(fG, function(n, a, i) {
    var o = [], s = a.toLowerCase();
    if (i.replace(lG, function(u, f) {
      f && o.push(+f);
    }), s === "m" && o.length > 2 && (t.push([a].concat(o.splice(0, 2))), s = "l", a = a === "m" ? "l" : "L"), s === "o" && o.length === 1 && t.push([a, o[0]]), s === "r")
      t.push([a].concat(o));
    else
      for (; o.length >= e[s] && (t.push([a].concat(o.splice(0, e[s]))), !!e[s]); )
        ;
    return r;
  }), t;
}, A0 = function(r, e) {
  for (var t = [], n = 0, a = r.length; a - 2 * !e > n; n += 2) {
    var i = [
      {
        x: +r[n - 2],
        y: +r[n - 1]
      },
      {
        x: +r[n],
        y: +r[n + 1]
      },
      {
        x: +r[n + 2],
        y: +r[n + 3]
      },
      {
        x: +r[n + 4],
        y: +r[n + 5]
      }
    ];
    e ? n ? a - 4 === n ? i[3] = {
      x: +r[0],
      y: +r[1]
    } : a - 2 === n && (i[2] = {
      x: +r[0],
      y: +r[1]
    }, i[3] = {
      x: +r[2],
      y: +r[3]
    }) : i[0] = {
      x: +r[a - 2],
      y: +r[a - 1]
    } : a - 4 === n ? i[3] = i[2] : n || (i[0] = {
      x: +r[n],
      y: +r[n + 1]
    }), t.push([
      "C",
      (-i[0].x + 6 * i[1].x + i[2].x) / 6,
      (-i[0].y + 6 * i[1].y + i[2].y) / 6,
      (i[1].x + 6 * i[2].x - i[3].x) / 6,
      (i[1].y + 6 * i[2].y - i[3].y) / 6,
      i[2].x,
      i[2].y
    ]);
  }
  return t;
}, ec = function(r, e, t, n, a) {
  var i = [];
  if (a === null && n === null && (n = t), r = +r, e = +e, t = +t, n = +n, a !== null) {
    var o = Math.PI / 180, s = r + t * Math.cos(-n * o), u = r + t * Math.cos(-a * o), f = e + t * Math.sin(-n * o), l = e + t * Math.sin(-a * o);
    i = [
      ["M", s, f],
      ["A", t, t, 0, +(a - n > 180), 0, u, l]
    ];
  } else
    i = [["M", r, e], ["m", 0, -n], ["a", t, n, 0, 1, 1, 0, 2 * n], ["a", t, n, 0, 1, 1, 0, -2 * n], ["z"]];
  return i;
}, C0 = function(r) {
  if (r = Us(r), !r || !r.length)
    return [["M", 0, 0]];
  var e = [], t = 0, n = 0, a = 0, i = 0, o = 0, s, u;
  r[0][0] === "M" && (t = +r[0][1], n = +r[0][2], a = t, i = n, o++, e[0] = ["M", t, n]);
  for (var f = r.length === 3 && r[0][0] === "M" && r[1][0].toUpperCase() === "R" && r[2][0].toUpperCase() === "Z", l = void 0, c = void 0, h = o, d = r.length; h < d; h++) {
    if (e.push(l = []), c = r[h], s = c[0], s !== s.toUpperCase())
      switch (l[0] = s.toUpperCase(), l[0]) {
        case "A":
          l[1] = c[1], l[2] = c[2], l[3] = c[3], l[4] = c[4], l[5] = c[5], l[6] = +c[6] + t, l[7] = +c[7] + n;
          break;
        case "V":
          l[1] = +c[1] + n;
          break;
        case "H":
          l[1] = +c[1] + t;
          break;
        case "R":
          u = [t, n].concat(c.slice(1));
          for (var v = 2, p = u.length; v < p; v++)
            u[v] = +u[v] + t, u[++v] = +u[v] + n;
          e.pop(), e = e.concat(A0(u, f));
          break;
        case "O":
          e.pop(), u = ec(t, n, c[1], c[2]), u.push(u[0]), e = e.concat(u);
          break;
        case "U":
          e.pop(), e = e.concat(ec(t, n, c[1], c[2], c[3])), l = ["U"].concat(e[e.length - 1].slice(-2));
          break;
        case "M":
          a = +c[1] + t, i = +c[2] + n;
          break;
        default:
          for (var v = 1, p = c.length; v < p; v++)
            l[v] = +c[v] + (v % 2 ? t : n);
      }
    else if (s === "R")
      u = [t, n].concat(c.slice(1)), e.pop(), e = e.concat(A0(u, f)), l = ["R"].concat(c.slice(-2));
    else if (s === "O")
      e.pop(), u = ec(t, n, c[1], c[2]), u.push(u[0]), e = e.concat(u);
    else if (s === "U")
      e.pop(), e = e.concat(ec(t, n, c[1], c[2], c[3])), l = ["U"].concat(e[e.length - 1].slice(-2));
    else
      for (var g = 0, y = c.length; g < y; g++)
        l[g] = c[g];
    if (s = s.toUpperCase(), s !== "O")
      switch (l[0]) {
        case "Z":
          t = +a, n = +i;
          break;
        case "H":
          t = l[1];
          break;
        case "V":
          n = l[1];
          break;
        case "M":
          a = l[l.length - 2], i = l[l.length - 1];
          break;
        default:
          t = l[l.length - 2], n = l[l.length - 1];
      }
  }
  return e;
}, tc = function(r, e, t, n) {
  return [r, e, t, n, t, n];
}, yE = function(r, e, t, n, a, i) {
  var o = 0.3333333333333333, s = 2 / 3;
  return [o * r + s * t, o * e + s * n, o * a + s * t, o * i + s * n, a, i];
}, kA = function(r, e, t, n, a, i, o, s, u, f) {
  t === n && (t += 1);
  var l = Math.PI * 120 / 180, c = Math.PI / 180 * (+a || 0), h = [], d, v, p, g, y, m = function(Pe, et, ut) {
    var at = Pe * Math.cos(ut) - et * Math.sin(ut), At = Pe * Math.sin(ut) + et * Math.cos(ut);
    return {
      x: at,
      y: At
    };
  };
  if (f)
    v = f[0], p = f[1], g = f[2], y = f[3];
  else {
    d = m(r, e, -c), r = d.x, e = d.y, d = m(s, u, -c), s = d.x, u = d.y, r === s && e === u && (s += 1, u += 1);
    var b = (r - s) / 2, E = (e - u) / 2, x = b * b / (t * t) + E * E / (n * n);
    x > 1 && (x = Math.sqrt(x), t = x * t, n = x * n);
    var w = t * t, _ = n * n, M = (i === o ? -1 : 1) * Math.sqrt(Math.abs((w * _ - w * E * E - _ * b * b) / (w * E * E + _ * b * b)));
    g = M * t * E / n + (r + s) / 2, y = M * -n * b / t + (e + u) / 2, v = Math.asin(((e - y) / n).toFixed(9)), p = Math.asin(((u - y) / n).toFixed(9)), v = r < g ? Math.PI - v : v, p = s < g ? Math.PI - p : p, v < 0 && (v = Math.PI * 2 + v), p < 0 && (p = Math.PI * 2 + p), o && v > p && (v = v - Math.PI * 2), !o && p > v && (p = p - Math.PI * 2);
  }
  var A = p - v;
  if (Math.abs(A) > l) {
    var S = p, T = s, C = u;
    p = v + l * (o && p > v ? 1 : -1), s = g + t * Math.cos(p), u = y + n * Math.sin(p), h = kA(s, u, t, n, a, 0, o, T, C, [p, S, g, y]);
  }
  A = p - v;
  var O = Math.cos(v), L = Math.sin(v), R = Math.cos(p), P = Math.sin(p), z = Math.tan(A / 4), V = 4 / 3 * t * z, N = 4 / 3 * n * z, F = [r, e], q = [r + V * L, e - N * O], te = [s + V * P, u - N * R], re = [s, u];
  if (q[0] = 2 * F[0] - q[0], q[1] = 2 * F[1] - q[1], f)
    return [q, te, re].concat(h);
  h = [q, te, re].concat(h).join().split(",");
  for (var J = [], ye = 0, Be = h.length; ye < Be; ye++)
    J[ye] = ye % 2 ? m(h[ye - 1], h[ye], c).y : m(h[ye], h[ye + 1], c).x;
  return J;
}, T0 = function(r, e) {
  var t = C0(r), n = e && C0(e), a = {
    x: 0,
    y: 0,
    bx: 0,
    by: 0,
    X: 0,
    Y: 0,
    qx: null,
    qy: null
  }, i = {
    x: 0,
    y: 0,
    bx: 0,
    by: 0,
    X: 0,
    Y: 0,
    qx: null,
    qy: null
  }, o = [], s = [], u = "", f = "", l, c = function(b, E, x) {
    var w, _;
    if (!b)
      return ["C", E.x, E.y, E.x, E.y, E.x, E.y];
    switch (!(b[0] in {
      T: 1,
      Q: 1
    }) && (E.qx = E.qy = null), b[0]) {
      case "M":
        E.X = b[1], E.Y = b[2];
        break;
      case "A":
        b = ["C"].concat(kA.apply(0, [E.x, E.y].concat(b.slice(1))));
        break;
      case "S":
        x === "C" || x === "S" ? (w = E.x * 2 - E.bx, _ = E.y * 2 - E.by) : (w = E.x, _ = E.y), b = ["C", w, _].concat(b.slice(1));
        break;
      case "T":
        x === "Q" || x === "T" ? (E.qx = E.x * 2 - E.qx, E.qy = E.y * 2 - E.qy) : (E.qx = E.x, E.qy = E.y), b = ["C"].concat(yE(E.x, E.y, E.qx, E.qy, b[1], b[2]));
        break;
      case "Q":
        E.qx = b[1], E.qy = b[2], b = ["C"].concat(yE(E.x, E.y, b[1], b[2], b[3], b[4]));
        break;
      case "L":
        b = ["C"].concat(tc(E.x, E.y, b[1], b[2]));
        break;
      case "H":
        b = ["C"].concat(tc(E.x, E.y, b[1], E.y));
        break;
      case "V":
        b = ["C"].concat(tc(E.x, E.y, E.x, b[1]));
        break;
      case "Z":
        b = ["C"].concat(tc(E.x, E.y, E.X, E.Y));
        break;
    }
    return b;
  }, h = function(b, E) {
    if (b[E].length > 7) {
      b[E].shift();
      for (var x = b[E]; x.length; )
        o[E] = "A", n && (s[E] = "A"), b.splice(E++, 0, ["C"].concat(x.splice(0, 6)));
      b.splice(E, 1), l = Math.max(t.length, n && n.length || 0);
    }
  }, d = function(b, E, x, w, _) {
    b && E && b[_][0] === "M" && E[_][0] !== "M" && (E.splice(_, 0, ["M", w.x, w.y]), x.bx = 0, x.by = 0, x.x = b[_][1], x.y = b[_][2], l = Math.max(t.length, n && n.length || 0));
  };
  l = Math.max(t.length, n && n.length || 0);
  for (var v = 0; v < l; v++) {
    t[v] && (u = t[v][0]), u !== "C" && (o[v] = u, v && (f = o[v - 1])), t[v] = c(t[v], a, f), o[v] !== "A" && u === "C" && (o[v] = "C"), h(t, v), n && (n[v] && (u = n[v][0]), u !== "C" && (s[v] = u, v && (f = s[v - 1])), n[v] = c(n[v], i, f), s[v] !== "A" && u === "C" && (s[v] = "C"), h(n, v)), d(t, n, a, i, v), d(n, t, i, a, v);
    var p = t[v], g = n && n[v], y = p.length, m = n && g.length;
    a.x = p[y - 2], a.y = p[y - 1], a.bx = parseFloat(p[y - 4]) || a.x, a.by = parseFloat(p[y - 3]) || a.y, i.bx = n && (parseFloat(g[m - 4]) || i.x), i.by = n && (parseFloat(g[m - 3]) || i.y), i.x = n && g[m - 2], i.y = n && g[m - 1];
  }
  return n ? [t, n] : t;
}, cG = /,?([a-z]),?/gi, RA = function(r) {
  return r.join(",").replace(cG, "$1");
}, mE = function(r, e, t, n, a) {
  var i = -3 * e + 9 * t - 9 * n + 3 * a, o = r * i + 6 * e - 12 * t + 6 * n;
  return r * o - 3 * e + 3 * t;
}, bE = function(r, e, t, n, a, i, o, s, u) {
  u === null && (u = 1), u = u > 1 ? 1 : u < 0 ? 0 : u;
  for (var f = u / 2, l = 12, c = [
    -0.1252,
    0.1252,
    -0.3678,
    0.3678,
    -0.5873,
    0.5873,
    -0.7699,
    0.7699,
    -0.9041,
    0.9041,
    -0.9816,
    0.9816
  ], h = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472], d = 0, v = 0; v < l; v++) {
    var p = f * c[v] + f, g = mE(p, r, t, a, o), y = mE(p, e, n, i, s), m = g * g + y * y;
    d += h[v] * Math.sqrt(m);
  }
  return f * d;
}, hG = function(r, e, t, n, a, i, o, s) {
  for (var u = [], f = [[], []], l, c, h, d, v = 0; v < 2; ++v) {
    if (v === 0 ? (c = 6 * r - 12 * t + 6 * a, l = -3 * r + 9 * t - 9 * a + 3 * o, h = 3 * t - 3 * r) : (c = 6 * e - 12 * n + 6 * i, l = -3 * e + 9 * n - 9 * i + 3 * s, h = 3 * n - 3 * e), Math.abs(l) < 1e-12) {
      if (Math.abs(c) < 1e-12)
        continue;
      d = -h / c, d > 0 && d < 1 && u.push(d);
      continue;
    }
    var p = c * c - 4 * h * l, g = Math.sqrt(p);
    if (!(p < 0)) {
      var y = (-c + g) / (2 * l);
      y > 0 && y < 1 && u.push(y);
      var m = (-c - g) / (2 * l);
      m > 0 && m < 1 && u.push(m);
    }
  }
  for (var b = u.length, E = b, x; b--; )
    d = u[b], x = 1 - d, f[0][b] = x * x * x * r + 3 * x * x * d * t + 3 * x * d * d * a + d * d * d * o, f[1][b] = x * x * x * e + 3 * x * x * d * n + 3 * x * d * d * i + d * d * d * s;
  return f[0][E] = r, f[1][E] = e, f[0][E + 1] = o, f[1][E + 1] = s, f[0].length = f[1].length = E + 2, {
    min: {
      x: Math.min.apply(0, f[0]),
      y: Math.min.apply(0, f[1])
    },
    max: {
      x: Math.max.apply(0, f[0]),
      y: Math.max.apply(0, f[1])
    }
  };
}, dG = function(r, e, t, n, a, i, o, s) {
  if (!(Math.max(r, t) < Math.min(a, o) || Math.min(r, t) > Math.max(a, o) || Math.max(e, n) < Math.min(i, s) || Math.min(e, n) > Math.max(i, s))) {
    var u = (r * n - e * t) * (a - o) - (r - t) * (a * s - i * o), f = (r * n - e * t) * (i - s) - (e - n) * (a * s - i * o), l = (r - t) * (i - s) - (e - n) * (a - o);
    if (l) {
      var c = u / l, h = f / l, d = +c.toFixed(2), v = +h.toFixed(2);
      if (!(d < +Math.min(r, t).toFixed(2) || d > +Math.max(r, t).toFixed(2) || d < +Math.min(a, o).toFixed(2) || d > +Math.max(a, o).toFixed(2) || v < +Math.min(e, n).toFixed(2) || v > +Math.max(e, n).toFixed(2) || v < +Math.min(i, s).toFixed(2) || v > +Math.max(i, s).toFixed(2)))
        return {
          x: c,
          y: h
        };
    }
  }
}, Fi = function(r, e, t) {
  return e >= r.x && e <= r.x + r.width && t >= r.y && t <= r.y + r.height;
}, BA = function(r, e, t, n, a) {
  if (a)
    return [
      ["M", +r + +a, e],
      ["l", t - a * 2, 0],
      ["a", a, a, 0, 0, 1, a, a],
      ["l", 0, n - a * 2],
      ["a", a, a, 0, 0, 1, -a, a],
      ["l", a * 2 - t, 0],
      ["a", a, a, 0, 0, 1, -a, -a],
      ["l", 0, a * 2 - n],
      ["a", a, a, 0, 0, 1, a, -a],
      ["z"]
    ];
  var i = [["M", r, e], ["l", t, 0], ["l", 0, n], ["l", -t, 0], ["z"]];
  return i.parsePathArray = RA, i;
}, I0 = function(r, e, t, n) {
  return r === null && (r = e = t = n = 0), e === null && (e = r.y, t = r.width, n = r.height, r = r.x), {
    x: r,
    y: e,
    width: t,
    w: t,
    height: n,
    h: n,
    x2: r + t,
    y2: e + n,
    cx: r + t / 2,
    cy: e + n / 2,
    r1: Math.min(t, n) / 2,
    r2: Math.max(t, n) / 2,
    r0: Math.sqrt(t * t + n * n) / 2,
    path: BA(r, e, t, n),
    vb: [r, e, t, n].join(" ")
  };
}, vG = function(r, e) {
  return r = I0(r), e = I0(e), Fi(e, r.x, r.y) || Fi(e, r.x2, r.y) || Fi(e, r.x, r.y2) || Fi(e, r.x2, r.y2) || Fi(r, e.x, e.y) || Fi(r, e.x2, e.y) || Fi(r, e.x, e.y2) || Fi(r, e.x2, e.y2) || (r.x < e.x2 && r.x > e.x || e.x < r.x2 && e.x > r.x) && (r.y < e.y2 && r.y > e.y || e.y < r.y2 && e.y > r.y);
}, EE = function(r, e, t, n, a, i, o, s) {
  bt(r) || (r = [r, e, t, n, a, i, o, s]);
  var u = hG.apply(null, r);
  return I0(u.min.x, u.min.y, u.max.x - u.min.x, u.max.y - u.min.y);
}, xE = function(r, e, t, n, a, i, o, s, u) {
  var f = 1 - u, l = Math.pow(f, 3), c = Math.pow(f, 2), h = u * u, d = h * u, v = l * r + c * 3 * u * t + f * 3 * u * u * a + d * o, p = l * e + c * 3 * u * n + f * 3 * u * u * i + d * s, g = r + 2 * u * (t - r) + h * (a - 2 * t + r), y = e + 2 * u * (n - e) + h * (i - 2 * n + e), m = t + 2 * u * (a - t) + h * (o - 2 * a + t), b = n + 2 * u * (i - n) + h * (s - 2 * i + n), E = f * r + u * t, x = f * e + u * n, w = f * a + u * o, _ = f * i + u * s, M = 90 - Math.atan2(g - m, y - b) * 180 / Math.PI;
  return {
    x: v,
    y: p,
    m: {
      x: g,
      y
    },
    n: {
      x: m,
      y: b
    },
    start: {
      x: E,
      y: x
    },
    end: {
      x: w,
      y: _
    },
    alpha: M
  };
}, pG = function(r, e, t) {
  var n = EE(r), a = EE(e);
  if (!vG(n, a))
    return t ? 0 : [];
  for (var i = bE.apply(0, r), o = bE.apply(0, e), s = ~~(i / 8), u = ~~(o / 8), f = [], l = [], c = {}, h = t ? 0 : [], d = 0; d < s + 1; d++) {
    var v = xE.apply(0, r.concat(d / s));
    f.push({
      x: v.x,
      y: v.y,
      t: d / s
    });
  }
  for (var d = 0; d < u + 1; d++) {
    var v = xE.apply(0, e.concat(d / u));
    l.push({
      x: v.x,
      y: v.y,
      t: d / u
    });
  }
  for (var d = 0; d < s; d++)
    for (var p = 0; p < u; p++) {
      var g = f[d], y = f[d + 1], m = l[p], b = l[p + 1], E = Math.abs(y.x - g.x) < 1e-3 ? "y" : "x", x = Math.abs(b.x - m.x) < 1e-3 ? "y" : "x", w = dG(g.x, g.y, y.x, y.y, m.x, m.y, b.x, b.y);
      if (w) {
        if (c[w.x.toFixed(4)] === w.y.toFixed(4))
          continue;
        c[w.x.toFixed(4)] = w.y.toFixed(4);
        var _ = g.t + Math.abs((w[E] - g[E]) / (y[E] - g[E])) * (y.t - g.t), M = m.t + Math.abs((w[x] - m[x]) / (b[x] - m[x])) * (b.t - m.t);
        _ >= 0 && _ <= 1 && M >= 0 && M <= 1 && (t ? h += 1 : h.push({
          x: w.x,
          y: w.y,
          t1: _,
          t2: M
        }));
      }
    }
  return h;
}, gG = function(r, e, t) {
  r = T0(r), e = T0(e);
  for (var n, a, i, o, s, u, f, l, c, h, d = t ? 0 : [], v = 0, p = r.length; v < p; v++) {
    var g = r[v];
    if (g[0] === "M")
      n = s = g[1], a = u = g[2];
    else {
      g[0] === "C" ? (c = [n, a].concat(g.slice(1)), n = c[6], a = c[7]) : (c = [n, a, n, a, s, u, s, u], n = s, a = u);
      for (var y = 0, m = e.length; y < m; y++) {
        var b = e[y];
        if (b[0] === "M")
          i = f = b[1], o = l = b[2];
        else {
          b[0] === "C" ? (h = [i, o].concat(b.slice(1)), i = h[6], o = h[7]) : (h = [i, o, i, o, f, l, f, l], i = f, o = l);
          var E = pG(c, h, t);
          if (t)
            d += E;
          else {
            for (var x = 0, w = E.length; x < w; x++)
              E[x].segment1 = v, E[x].segment2 = y, E[x].bez1 = c, E[x].bez2 = h;
            d = d.concat(E);
          }
        }
      }
    }
  }
  return d;
}, yG = function(r, e) {
  return gG(r, e);
};
function mG(r, e) {
  var t = [], n = [];
  function a(i, o) {
    if (i.length === 1)
      t.push(i[0]), n.push(i[0]);
    else {
      for (var s = [], u = 0; u < i.length - 1; u++)
        u === 0 && t.push(i[0]), u === i.length - 2 && n.push(i[u + 1]), s[u] = [
          (1 - o) * i[u][0] + o * i[u + 1][0],
          (1 - o) * i[u][1] + o * i[u + 1][1]
        ];
      a(s, o);
    }
  }
  return r.length && a(r, e), { left: t, right: n.reverse() };
}
function bG(r, e, t) {
  var n = [[r[1], r[2]]];
  t = t || 2;
  var a = [];
  e[0] === "A" ? (n.push(e[6]), n.push(e[7])) : e[0] === "C" ? (n.push([e[1], e[2]]), n.push([e[3], e[4]]), n.push([e[5], e[6]])) : e[0] === "S" || e[0] === "Q" ? (n.push([e[1], e[2]]), n.push([e[3], e[4]])) : n.push([e[1], e[2]]);
  for (var i = n, o = 1 / t, s = 0; s < t - 1; s++) {
    var u = o / (1 - o * s), f = mG(i, u);
    a.push(f.left), i = f.right;
  }
  a.push(i);
  var l = a.map(function(c) {
    var h = [];
    return c.length === 4 && (h.push("C"), h = h.concat(c[2])), c.length >= 3 && (c.length === 3 && h.push("Q"), h = h.concat(c[1])), c.length === 2 && h.push("L"), h = h.concat(c[c.length - 1]), h;
  });
  return l;
}
var EG = function(r, e, t) {
  if (t === 1)
    return [[].concat(r)];
  var n = [];
  if (e[0] === "L" || e[0] === "C" || e[0] === "Q")
    n = n.concat(bG(r, e, t));
  else {
    var a = [].concat(r);
    a[0] === "M" && (a[0] = "L");
    for (var i = 0; i <= t - 1; i++)
      n.push(a);
  }
  return n;
}, xG = function(r, e) {
  if (r.length === 1)
    return r;
  var t = r.length - 1, n = e.length - 1, a = t / n, i = [];
  if (r.length === 1 && r[0][0] === "M") {
    for (var o = 0; o < n - t; o++)
      r.push(r[0]);
    return r;
  }
  for (var o = 0; o < n; o++) {
    var s = Math.floor(a * o);
    i[s] = (i[s] || 0) + 1;
  }
  var u = i.reduce(function(f, l, c) {
    return c === t ? f.concat(r[t]) : f.concat(EG(r[c], r[c + 1], l));
  }, []);
  return u.unshift(r[0]), (e[n] === "Z" || e[n] === "z") && u.push("Z"), u;
}, wG = function(r, e) {
  if (r.length !== e.length)
    return !1;
  var t = !0;
  return Se(r, function(n, a) {
    if (n !== e[a])
      return t = !1, !1;
  }), t;
};
function _G(r, e, t) {
  var n = null, a = t;
  return e < a && (a = e, n = "add"), r < a && (a = r, n = "del"), {
    type: n,
    min: a
  };
}
var MG = function(r, e) {
  var t = r.length, n = e.length, a, i, o = 0;
  if (t === 0 || n === 0)
    return null;
  for (var s = [], u = 0; u <= t; u++)
    s[u] = [], s[u][0] = { min: u };
  for (var f = 0; f <= n; f++)
    s[0][f] = { min: f };
  for (var u = 1; u <= t; u++) {
    a = r[u - 1];
    for (var f = 1; f <= n; f++) {
      i = e[f - 1], wG(a, i) ? o = 0 : o = 1;
      var l = s[u - 1][f].min + 1, c = s[u][f - 1].min + 1, h = s[u - 1][f - 1].min + o;
      s[u][f] = _G(l, c, h);
    }
  }
  return s;
}, FA = function(r, e) {
  var t = MG(r, e), n = r.length, a = e.length, i = [], o = 1, s = 1;
  if (t[n][a].min !== n) {
    for (var u = 1; u <= n; u++) {
      var f = t[u][u].min;
      s = u;
      for (var l = o; l <= a; l++)
        t[u][l].min < f && (f = t[u][l].min, s = l);
      o = s, t[u][o].type && i.push({ index: u - 1, type: t[u][o].type });
    }
    for (var u = i.length - 1; u >= 0; u--)
      o = i[u].index, i[u].type === "add" ? r.splice(o, 0, [].concat(r[o])) : r.splice(o, 1);
  }
  n = r.length;
  var c = a - n;
  if (n < a)
    for (var u = 0; u < c; u++)
      r[n - 1][0] === "z" || r[n - 1][0] === "Z" ? r.splice(n - 2, 0, r[n - 2]) : r.push(r[n - 1]), n += 1;
  return r;
};
function up(r, e, t) {
  for (var n = [].concat(r), a, i = 1 / (t + 1), o = GA(e)[0], s = 1; s <= t; s++)
    i *= s, a = Math.floor(r.length * i), a === 0 ? n.unshift([o[0] * i + r[a][0] * (1 - i), o[1] * i + r[a][1] * (1 - i)]) : n.splice(a, 0, [
      o[0] * i + r[a][0] * (1 - i),
      o[1] * i + r[a][1] * (1 - i)
    ]);
  return n;
}
function GA(r) {
  var e = [];
  switch (r[0]) {
    case "M":
      e.push([r[1], r[2]]);
      break;
    case "L":
      e.push([r[1], r[2]]);
      break;
    case "A":
      e.push([r[6], r[7]]);
      break;
    case "Q":
      e.push([r[3], r[4]]), e.push([r[1], r[2]]);
      break;
    case "T":
      e.push([r[1], r[2]]);
      break;
    case "C":
      e.push([r[5], r[6]]), e.push([r[1], r[2]]), e.push([r[3], r[4]]);
      break;
    case "S":
      e.push([r[3], r[4]]), e.push([r[1], r[2]]);
      break;
    case "H":
      e.push([r[1], r[1]]);
      break;
    case "V":
      e.push([r[1], r[1]]);
      break;
  }
  return e;
}
var O0 = function(r, e) {
  if (r.length <= 1)
    return r;
  for (var t, n = 0; n < e.length; n++)
    if (r[n][0] !== e[n][0])
      switch (t = GA(r[n]), e[n][0]) {
        case "M":
          r[n] = ["M"].concat(t[0]);
          break;
        case "L":
          r[n] = ["L"].concat(t[0]);
          break;
        case "A":
          r[n] = [].concat(e[n]), r[n][6] = t[0][0], r[n][7] = t[0][1];
          break;
        case "Q":
          if (t.length < 2)
            if (n > 0)
              t = up(t, r[n - 1], 1);
            else {
              r[n] = e[n];
              break;
            }
          r[n] = ["Q"].concat(t.reduce(function(a, i) {
            return a.concat(i);
          }, []));
          break;
        case "T":
          r[n] = ["T"].concat(t[0]);
          break;
        case "C":
          if (t.length < 3)
            if (n > 0)
              t = up(t, r[n - 1], 2);
            else {
              r[n] = e[n];
              break;
            }
          r[n] = ["C"].concat(t.reduce(function(a, i) {
            return a.concat(i);
          }, []));
          break;
        case "S":
          if (t.length < 2)
            if (n > 0)
              t = up(t, r[n - 1], 1);
            else {
              r[n] = e[n];
              break;
            }
          r[n] = ["S"].concat(t.reduce(function(a, i) {
            return a.concat(i);
          }, []));
          break;
        default:
          r[n] = e[n];
      }
  return r;
};
const SG = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  catmullRomToBezier: A0,
  fillPath: xG,
  fillPathByDiff: FA,
  formatPath: O0,
  intersection: yG,
  parsePathArray: RA,
  parsePathString: Us,
  pathToAbsolute: C0,
  pathToCurve: T0,
  rectPath: BA
}, Symbol.toStringTag, { value: "Module" }));
var zA = (
  /** @class */
  function() {
    function r(e, t) {
      this.bubbles = !0, this.target = null, this.currentTarget = null, this.delegateTarget = null, this.delegateObject = null, this.defaultPrevented = !1, this.propagationStopped = !1, this.shape = null, this.fromShape = null, this.toShape = null, this.propagationPath = [], this.type = e, this.name = e, this.originalEvent = t, this.timeStamp = t.timeStamp;
    }
    return r.prototype.preventDefault = function() {
      this.defaultPrevented = !0, this.originalEvent.preventDefault && this.originalEvent.preventDefault();
    }, r.prototype.stopPropagation = function() {
      this.propagationStopped = !0;
    }, r.prototype.toString = function() {
      var e = this.type;
      return "[Event (type=" + e + ")]";
    }, r.prototype.save = function() {
    }, r.prototype.restore = function() {
    }, r;
  }()
);
function UA(r, e) {
  var t = r.indexOf(e);
  t !== -1 && r.splice(t, 1);
}
var wE = typeof window < "u" && typeof window.document < "u";
function jA(r, e) {
  if (r.isCanvas())
    return !0;
  for (var t = e.getParent(), n = !1; t; ) {
    if (t === r) {
      n = !0;
      break;
    }
    t = t.getParent();
  }
  return n;
}
function D0(r) {
  return r.cfg.visible && r.cfg.capture;
}
var AG = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this) || this;
      n.destroyed = !1;
      var a = n.getDefaultCfg();
      return n.cfg = _t(a, t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {};
    }, e.prototype.get = function(t) {
      return this.cfg[t];
    }, e.prototype.set = function(t, n) {
      this.cfg[t] = n;
    }, e.prototype.destroy = function() {
      this.cfg = {
        destroyed: !0
      }, this.off(), this.destroyed = !0;
    }, e;
  }(RM)
), _E = function(r, e, t) {
  if (t || arguments.length === 2)
    for (var n = 0, a = e.length, i; n < a; n++)
      (i || !(n in e)) && (i || (i = Array.prototype.slice.call(e, 0, n)), i[n] = e[n]);
  return r.concat(i || Array.prototype.slice.call(e));
}, CG = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e, t, n) {
      this.name = e, this.version = t, this.os = n, this.type = "browser";
    }
    return r;
  }()
), TG = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e) {
      this.version = e, this.type = "node", this.name = "node", this.os = process.platform;
    }
    return r;
  }()
), IG = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e, t, n, a) {
      this.name = e, this.version = t, this.os = n, this.bot = a, this.type = "bot-device";
    }
    return r;
  }()
), OG = (
  /** @class */
  /* @__PURE__ */ function() {
    function r() {
      this.type = "bot", this.bot = !0, this.name = "bot", this.version = null, this.os = null;
    }
    return r;
  }()
), DG = (
  /** @class */
  /* @__PURE__ */ function() {
    function r() {
      this.type = "react-native", this.name = "react-native", this.version = null, this.os = null;
    }
    return r;
  }()
), LG = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/, NG = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/, ME = 3, PG = [
  ["aol", /AOLShield\/([0-9\._]+)/],
  ["edge", /Edge\/([0-9\._]+)/],
  ["edge-ios", /EdgiOS\/([0-9\._]+)/],
  ["yandexbrowser", /YaBrowser\/([0-9\._]+)/],
  ["kakaotalk", /KAKAOTALK\s([0-9\.]+)/],
  ["samsung", /SamsungBrowser\/([0-9\.]+)/],
  ["silk", /\bSilk\/([0-9._-]+)\b/],
  ["miui", /MiuiBrowser\/([0-9\.]+)$/],
  ["beaker", /BeakerBrowser\/([0-9\.]+)/],
  ["edge-chromium", /EdgA?\/([0-9\.]+)/],
  [
    "chromium-webview",
    /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/
  ],
  ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],
  ["phantomjs", /PhantomJS\/([0-9\.]+)(:?\s|$)/],
  ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/],
  ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/],
  ["fxios", /FxiOS\/([0-9\.]+)/],
  ["opera-mini", /Opera Mini.*Version\/([0-9\.]+)/],
  ["opera", /Opera\/([0-9\.]+)(?:\s|$)/],
  ["opera", /OPR\/([0-9\.]+)(:?\s|$)/],
  ["pie", /^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],
  ["pie", /^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],
  ["netfront", /^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],
  ["ie", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],
  ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],
  ["ie", /MSIE\s(7\.0)/],
  ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/],
  ["android", /Android\s([0-9\.]+)/],
  ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/],
  ["safari", /Version\/([0-9\._]+).*Safari/],
  ["facebook", /FB[AS]V\/([0-9\.]+)/],
  ["instagram", /Instagram\s([0-9\.]+)/],
  ["ios-webview", /AppleWebKit\/([0-9\.]+).*Mobile/],
  ["ios-webview", /AppleWebKit\/([0-9\.]+).*Gecko\)$/],
  ["curl", /^curl\/([0-9\.]+)$/],
  ["searchbot", LG]
], SE = [
  ["iOS", /iP(hone|od|ad)/],
  ["Android OS", /Android/],
  ["BlackBerry OS", /BlackBerry|BB10/],
  ["Windows Mobile", /IEMobile/],
  ["Amazon OS", /Kindle/],
  ["Windows 3.11", /Win16/],
  ["Windows 95", /(Windows 95)|(Win95)|(Windows_95)/],
  ["Windows 98", /(Windows 98)|(Win98)/],
  ["Windows 2000", /(Windows NT 5.0)|(Windows 2000)/],
  ["Windows XP", /(Windows NT 5.1)|(Windows XP)/],
  ["Windows Server 2003", /(Windows NT 5.2)/],
  ["Windows Vista", /(Windows NT 6.0)/],
  ["Windows 7", /(Windows NT 6.1)/],
  ["Windows 8", /(Windows NT 6.2)/],
  ["Windows 8.1", /(Windows NT 6.3)/],
  ["Windows 10", /(Windows NT 10.0)/],
  ["Windows ME", /Windows ME/],
  ["Windows CE", /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],
  ["Open BSD", /OpenBSD/],
  ["Sun OS", /SunOS/],
  ["Chrome OS", /CrOS/],
  ["Linux", /(Linux)|(X11)/],
  ["Mac OS", /(Mac_PowerPC)|(Macintosh)/],
  ["QNX", /QNX/],
  ["BeOS", /BeOS/],
  ["OS/2", /OS\/2/]
];
function $A(r) {
  return r ? AE(r) : typeof document > "u" && typeof navigator < "u" && navigator.product === "ReactNative" ? new DG() : typeof navigator < "u" ? AE(navigator.userAgent) : BG();
}
function kG(r) {
  return r !== "" && PG.reduce(function(e, t) {
    var n = t[0], a = t[1];
    if (e)
      return e;
    var i = a.exec(r);
    return !!i && [n, i];
  }, !1);
}
function AE(r) {
  var e = kG(r);
  if (!e)
    return null;
  var t = e[0], n = e[1];
  if (t === "searchbot")
    return new OG();
  var a = n[1] && n[1].split(".").join("_").split("_").slice(0, 3);
  a ? a.length < ME && (a = _E(_E([], a, !0), FG(ME - a.length), !0)) : a = [];
  var i = a.join("."), o = RG(r), s = NG.exec(r);
  return s && s[1] ? new IG(t, i, o, s[1]) : new CG(t, i, o);
}
function RG(r) {
  for (var e = 0, t = SE.length; e < t; e++) {
    var n = SE[e], a = n[0], i = n[1], o = i.exec(r);
    if (o)
      return a;
  }
  return null;
}
function BG() {
  var r = typeof process < "u" && process.version;
  return r ? new TG(process.version.slice(1)) : null;
}
function FG(r) {
  for (var e = [], t = 0; t < r; t++)
    e.push("0");
  return e;
}
function CE(r, e) {
  var t = [], n = r[0], a = r[1], i = r[2], o = r[3], s = r[4], u = r[5], f = r[6], l = r[7], c = r[8], h = e[0], d = e[1], v = e[2], p = e[3], g = e[4], y = e[5], m = e[6], b = e[7], E = e[8];
  return t[0] = h * n + d * o + v * f, t[1] = h * a + d * s + v * l, t[2] = h * i + d * u + v * c, t[3] = p * n + g * o + y * f, t[4] = p * a + g * s + y * l, t[5] = p * i + g * u + y * c, t[6] = m * n + b * o + E * f, t[7] = m * a + b * s + E * l, t[8] = m * i + b * u + E * c, t;
}
function Bo(r, e) {
  var t = [], n = e[0], a = e[1];
  return t[0] = r[0] * n + r[3] * a + r[6], t[1] = r[1] * n + r[4] * a + r[7], t;
}
function WA(r) {
  var e = [], t = r[0], n = r[1], a = r[2], i = r[3], o = r[4], s = r[5], u = r[6], f = r[7], l = r[8], c = l * o - s * f, h = -l * i + s * u, d = f * i - o * u, v = t * c + n * h + a * d;
  return v ? (v = 1 / v, e[0] = c * v, e[1] = (-l * n + a * f) * v, e[2] = (s * n - a * o) * v, e[3] = h * v, e[4] = (l * t - a * u) * v, e[5] = (-s * t + a * i) * v, e[6] = d * v, e[7] = (-f * t + n * u) * v, e[8] = (o * t - n * i) * v, e) : null;
}
var Fu = io, fp = "matrix", GG = ["zIndex", "capture", "visible", "type"], zG = ["repeat"], UG = ":", jG = "*";
function $G(r) {
  for (var e = [], t = 0; t < r.length; t++)
    bt(r[t]) ? e.push([].concat(r[t])) : e.push(r[t]);
  return e;
}
function WG(r, e) {
  var t = {}, n = e.attrs;
  for (var a in r)
    t[a] = n[a];
  return t;
}
function XG(r, e) {
  var t = {}, n = e.attr();
  return Se(r, function(a, i) {
    zG.indexOf(i) === -1 && !jo(n[i], a) && (t[i] = a);
  }), t;
}
function VG(r, e) {
  if (e.onFrame)
    return r;
  var t = e.startTime, n = e.delay, a = e.duration, i = Object.prototype.hasOwnProperty;
  return Se(r, function(o) {
    t + n < o.startTime + o.delay + o.duration && a > o.delay && Se(e.toAttrs, function(s, u) {
      i.call(o.toAttrs, u) && (delete o.toAttrs[u], delete o.fromAttrs[u]);
    });
  }), r;
}
var XA = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this, t) || this;
      n.attrs = {};
      var a = n.getDefaultAttrs();
      return _t(a, t.attrs), n.attrs = a, n.initAttrs(a), n.initAnimate(), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        visible: !0,
        capture: !0,
        zIndex: 0
      };
    }, e.prototype.getDefaultAttrs = function() {
      return {
        matrix: this.getDefaultMatrix(),
        opacity: 1
      };
    }, e.prototype.onCanvasChange = function(t) {
    }, e.prototype.initAttrs = function(t) {
    }, e.prototype.initAnimate = function() {
      this.set("animable", !0), this.set("animating", !1);
    }, e.prototype.isGroup = function() {
      return !1;
    }, e.prototype.getParent = function() {
      return this.get("parent");
    }, e.prototype.getCanvas = function() {
      return this.get("canvas");
    }, e.prototype.attr = function() {
      for (var t, n = [], a = 0; a < arguments.length; a++)
        n[a] = arguments[a];
      var i = n[0], o = n[1];
      if (!i)
        return this.attrs;
      if (yn(i)) {
        for (var s in i)
          this.setAttr(s, i[s]);
        return this.afterAttrsChange(i), this;
      }
      return n.length === 2 ? (this.setAttr(i, o), this.afterAttrsChange((t = {}, t[i] = o, t)), this) : this.attrs[i];
    }, e.prototype.isClipped = function(t, n) {
      var a = this.getClip();
      return a && !a.isHit(t, n);
    }, e.prototype.setAttr = function(t, n) {
      var a = this.attrs[t];
      a !== n && (this.attrs[t] = n, this.onAttrChange(t, n, a));
    }, e.prototype.onAttrChange = function(t, n, a) {
      t === "matrix" && this.set("totalMatrix", null);
    }, e.prototype.afterAttrsChange = function(t) {
      if (this.cfg.isClipShape) {
        var n = this.cfg.applyTo;
        n && n.onCanvasChange("clip");
      } else
        this.onCanvasChange("attr");
    }, e.prototype.show = function() {
      return this.set("visible", !0), this.onCanvasChange("show"), this;
    }, e.prototype.hide = function() {
      return this.set("visible", !1), this.onCanvasChange("hide"), this;
    }, e.prototype.setZIndex = function(t) {
      this.set("zIndex", t);
      var n = this.getParent();
      return n && n.sort(), this;
    }, e.prototype.toFront = function() {
      var t = this.getParent();
      if (t) {
        var n = t.getChildren();
        this.get("el");
        var a = n.indexOf(this);
        n.splice(a, 1), n.push(this), this.onCanvasChange("zIndex");
      }
    }, e.prototype.toBack = function() {
      var t = this.getParent();
      if (t) {
        var n = t.getChildren();
        this.get("el");
        var a = n.indexOf(this);
        n.splice(a, 1), n.unshift(this), this.onCanvasChange("zIndex");
      }
    }, e.prototype.remove = function(t) {
      t === void 0 && (t = !0);
      var n = this.getParent();
      n ? (UA(n.getChildren(), this), n.get("clearing") || this.onCanvasChange("remove")) : this.onCanvasChange("remove"), t && this.destroy();
    }, e.prototype.resetMatrix = function() {
      this.attr(fp, this.getDefaultMatrix()), this.onCanvasChange("matrix");
    }, e.prototype.getMatrix = function() {
      return this.attr(fp);
    }, e.prototype.setMatrix = function(t) {
      this.attr(fp, t), this.onCanvasChange("matrix");
    }, e.prototype.getTotalMatrix = function() {
      var t = this.cfg.totalMatrix;
      if (!t) {
        var n = this.attr("matrix"), a = this.cfg.parentMatrix;
        a && n ? t = CE(a, n) : t = n || a, this.set("totalMatrix", t);
      }
      return t;
    }, e.prototype.applyMatrix = function(t) {
      var n = this.attr("matrix"), a = null;
      t && n ? a = CE(t, n) : a = n || t, this.set("totalMatrix", a), this.set("parentMatrix", t);
    }, e.prototype.getDefaultMatrix = function() {
      return null;
    }, e.prototype.applyToMatrix = function(t) {
      var n = this.attr("matrix");
      return n ? Bo(n, t) : t;
    }, e.prototype.invertFromMatrix = function(t) {
      var n = this.attr("matrix");
      if (n) {
        var a = WA(n);
        if (a)
          return Bo(a, t);
      }
      return t;
    }, e.prototype.setClip = function(t) {
      var n = this.getCanvas(), a = null;
      if (t) {
        var i = this.getShapeBase(), o = Zs(t.type), s = i[o];
        s && (a = new s({
          type: t.type,
          isClipShape: !0,
          applyTo: this,
          attrs: t.attrs,
          canvas: n
        }));
      }
      return this.set("clipShape", a), this.onCanvasChange("clip"), a;
    }, e.prototype.getClip = function() {
      var t = this.cfg.clipShape;
      return t || null;
    }, e.prototype.clone = function() {
      var t = this, n = this.attrs, a = {};
      Se(n, function(s, u) {
        bt(n[u]) ? a[u] = $G(n[u]) : a[u] = n[u];
      });
      var i = this.constructor, o = new i({ attrs: a });
      return Se(GG, function(s) {
        o.set(s, t.get(s));
      }), o;
    }, e.prototype.destroy = function() {
      var t = this.destroyed;
      t || (this.attrs = {}, r.prototype.destroy.call(this));
    }, e.prototype.isAnimatePaused = function() {
      return this.get("_pause").isPaused;
    }, e.prototype.animate = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      if (!(!this.get("timeline") && !this.get("canvas"))) {
        this.set("animating", !0);
        var a = this.get("timeline");
        a || (a = this.get("canvas").get("timeline"), this.set("timeline", a));
        var i = this.get("animations") || [];
        a.timer || a.initTimer();
        var o = t[0], s = t[1], u = t[2], f = u === void 0 ? "easeLinear" : u, l = t[3], c = l === void 0 ? tf : l, h = t[4], d = h === void 0 ? 0 : h, v, p, g, y, m;
        Or(o) ? (v = o, o = {}) : yn(o) && o.onFrame && (v = o.onFrame, p = o.repeat), yn(s) ? (m = s, s = m.duration, f = m.easing || "easeLinear", d = m.delay || 0, p = m.repeat || p || !1, c = m.callback || tf, g = m.pauseCallback || tf, y = m.resumeCallback || tf) : (Pt(c) && (d = c, c = null), Or(f) ? (c = f, f = "easeLinear") : f = f || "easeLinear");
        var b = XG(o, this), E = {
          fromAttrs: WG(b, this),
          toAttrs: b,
          duration: s,
          easing: f,
          repeat: p,
          callback: c,
          pauseCallback: g,
          resumeCallback: y,
          delay: d,
          startTime: a.getTime(),
          id: ao(),
          onFrame: v,
          pathFormatted: !1
        };
        i.length > 0 ? i = VG(i, E) : a.addAnimator(this), i.push(E), this.set("animations", i), this.set("_pause", { isPaused: !1 });
      }
    }, e.prototype.stopAnimate = function(t) {
      var n = this;
      t === void 0 && (t = !0);
      var a = this.get("animations");
      Se(a, function(i) {
        t && (i.onFrame ? n.attr(i.onFrame(1)) : n.attr(i.toAttrs)), i.callback && i.callback();
      }), this.set("animating", !1), this.set("animations", []);
    }, e.prototype.pauseAnimate = function() {
      var t = this.get("timeline"), n = this.get("animations"), a = t.getTime();
      return Se(n, function(i) {
        i._paused = !0, i._pauseTime = a, i.pauseCallback && i.pauseCallback();
      }), this.set("_pause", {
        isPaused: !0,
        pauseTime: a
      }), this;
    }, e.prototype.resumeAnimate = function() {
      var t = this.get("timeline"), n = t.getTime(), a = this.get("animations"), i = this.get("_pause").pauseTime;
      return Se(a, function(o) {
        o.startTime = o.startTime + (n - i), o._paused = !1, o._pauseTime = null, o.resumeCallback && o.resumeCallback();
      }), this.set("_pause", {
        isPaused: !1
      }), this.set("animations", a), this;
    }, e.prototype.emitDelegation = function(t, n) {
      var a = this, i = n.propagationPath;
      this.getEvents();
      var o;
      t === "mouseenter" ? o = n.fromShape : t === "mouseleave" && (o = n.toShape);
      for (var s = function(c) {
        var h = i[c], d = h.get("name");
        if (d) {
          if (
            // 只有 element 是 Group 或者 Canvas 的时候，才需要判断 isParent
            (h.isGroup() || h.isCanvas && h.isCanvas()) && o && jA(h, o)
          )
            return "break";
          bt(d) ? Se(d, function(v) {
            a.emitDelegateEvent(h, v, n);
          }) : u.emitDelegateEvent(h, d, n);
        }
      }, u = this, f = 0; f < i.length; f++) {
        var l = s(f);
        if (l === "break")
          break;
      }
    }, e.prototype.emitDelegateEvent = function(t, n, a) {
      var i = this.getEvents(), o = n + UG + a.type;
      (i[o] || i[jG]) && (a.name = o, a.currentTarget = t, a.delegateTarget = this, a.delegateObject = t.get("delegateObject"), this.emit(o, a));
    }, e.prototype.translate = function(t, n) {
      t === void 0 && (t = 0), n === void 0 && (n = 0);
      var a = this.getMatrix(), i = Fu(a, [["t", t, n]]);
      return this.setMatrix(i), this;
    }, e.prototype.move = function(t, n) {
      var a = this.attr("x") || 0, i = this.attr("y") || 0;
      return this.translate(t - a, n - i), this;
    }, e.prototype.moveTo = function(t, n) {
      return this.move(t, n);
    }, e.prototype.scale = function(t, n) {
      var a = this.getMatrix(), i = Fu(a, [["s", t, n || t]]);
      return this.setMatrix(i), this;
    }, e.prototype.rotate = function(t) {
      var n = this.getMatrix(), a = Fu(n, [["r", t]]);
      return this.setMatrix(a), this;
    }, e.prototype.rotateAtStart = function(t) {
      var n = this.attr(), a = n.x, i = n.y, o = this.getMatrix(), s = Fu(o, [
        ["t", -a, -i],
        ["r", t],
        ["t", a, i]
      ]);
      return this.setMatrix(s), this;
    }, e.prototype.rotateAtPoint = function(t, n, a) {
      var i = this.getMatrix(), o = Fu(i, [
        ["t", -t, -n],
        ["r", a],
        ["t", t, n]
      ]);
      return this.setMatrix(o), this;
    }, e;
  }(AG)
), TE = {}, L0 = "_INDEX";
function VA(r, e) {
  if (r.set("canvas", e), r.isGroup()) {
    var t = r.get("children");
    t.length && t.forEach(function(n) {
      VA(n, e);
    });
  }
}
function YA(r, e) {
  if (r.set("timeline", e), r.isGroup()) {
    var t = r.get("children");
    t.length && t.forEach(function(n) {
      YA(n, e);
    });
  }
}
function YG(r, e, t) {
  t === void 0 && (t = !0), t ? e.destroy() : (e.set("parent", null), e.set("canvas", null)), UA(r.getChildren(), e);
}
function HG(r) {
  return function(e, t) {
    var n = r(e, t);
    return n === 0 ? e[L0] - t[L0] : n;
  };
}
var HA = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.isCanvas = function() {
      return !1;
    }, e.prototype.getBBox = function() {
      var t = 1 / 0, n = -1 / 0, a = 1 / 0, i = -1 / 0, o = this.getChildren().filter(function(u) {
        return u.get("visible") && (!u.isGroup() || u.isGroup() && u.getChildren().length > 0);
      });
      o.length > 0 ? Se(o, function(u) {
        var f = u.getBBox(), l = f.minX, c = f.maxX, h = f.minY, d = f.maxY;
        l < t && (t = l), c > n && (n = c), h < a && (a = h), d > i && (i = d);
      }) : (t = 0, n = 0, a = 0, i = 0);
      var s = {
        x: t,
        y: a,
        minX: t,
        minY: a,
        maxX: n,
        maxY: i,
        width: n - t,
        height: i - a
      };
      return s;
    }, e.prototype.getCanvasBBox = function() {
      var t = 1 / 0, n = -1 / 0, a = 1 / 0, i = -1 / 0, o = this.getChildren().filter(function(u) {
        return u.get("visible") && (!u.isGroup() || u.isGroup() && u.getChildren().length > 0);
      });
      o.length > 0 ? Se(o, function(u) {
        var f = u.getCanvasBBox(), l = f.minX, c = f.maxX, h = f.minY, d = f.maxY;
        l < t && (t = l), c > n && (n = c), h < a && (a = h), d > i && (i = d);
      }) : (t = 0, n = 0, a = 0, i = 0);
      var s = {
        x: t,
        y: a,
        minX: t,
        minY: a,
        maxX: n,
        maxY: i,
        width: n - t,
        height: i - a
      };
      return s;
    }, e.prototype.getDefaultCfg = function() {
      var t = r.prototype.getDefaultCfg.call(this);
      return t.children = [], t;
    }, e.prototype.onAttrChange = function(t, n, a) {
      if (r.prototype.onAttrChange.call(this, t, n, a), t === "matrix") {
        var i = this.getTotalMatrix();
        this._applyChildrenMarix(i);
      }
    }, e.prototype.applyMatrix = function(t) {
      var n = this.getTotalMatrix();
      r.prototype.applyMatrix.call(this, t);
      var a = this.getTotalMatrix();
      a !== n && this._applyChildrenMarix(a);
    }, e.prototype._applyChildrenMarix = function(t) {
      var n = this.getChildren();
      Se(n, function(a) {
        a.applyMatrix(t);
      });
    }, e.prototype.addShape = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var a = t[0], i = t[1];
      yn(a) ? i = a : i.type = a;
      var o = TE[i.type];
      o || (o = Zs(i.type), TE[i.type] = o);
      var s = this.getShapeBase(), u = new s[o](i);
      return this.add(u), u;
    }, e.prototype.addGroup = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var a = t[0], i = t[1], o;
      if (Or(a))
        i ? o = new a(i) : o = new a({
          // canvas,
          parent: this
        });
      else {
        var s = a || {}, u = this.getGroupBase();
        o = new u(s);
      }
      return this.add(o), o;
    }, e.prototype.getCanvas = function() {
      var t;
      return this.isCanvas() ? t = this : t = this.get("canvas"), t;
    }, e.prototype.getShape = function(t, n, a) {
      if (!D0(this))
        return null;
      var i = this.getChildren(), o;
      if (this.isCanvas())
        o = this._findShape(i, t, n, a);
      else {
        var s = [t, n, 1];
        s = this.invertFromMatrix(s), this.isClipped(s[0], s[1]) || (o = this._findShape(i, s[0], s[1], a));
      }
      return o;
    }, e.prototype._findShape = function(t, n, a, i) {
      for (var o = null, s = t.length - 1; s >= 0; s--) {
        var u = t[s];
        if (D0(u) && (u.isGroup() ? o = u.getShape(n, a, i) : u.isHit(n, a) && (o = u)), o)
          break;
      }
      return o;
    }, e.prototype.add = function(t) {
      var n = this.getCanvas(), a = this.getChildren(), i = this.get("timeline"), o = t.getParent();
      o && YG(o, t, !1), t.set("parent", this), n && VA(t, n), i && YA(t, i), a.push(t), t.onCanvasChange("add"), this._applyElementMatrix(t);
    }, e.prototype._applyElementMatrix = function(t) {
      var n = this.getTotalMatrix();
      n && t.applyMatrix(n);
    }, e.prototype.getChildren = function() {
      return this.get("children") || [];
    }, e.prototype.sort = function() {
      var t = this.getChildren();
      Se(t, function(n, a) {
        return n[L0] = a, n;
      }), t.sort(HG(function(n, a) {
        return n.get("zIndex") - a.get("zIndex");
      })), this.onCanvasChange("sort");
    }, e.prototype.clear = function() {
      if (this.set("clearing", !0), !this.destroyed) {
        for (var t = this.getChildren(), n = t.length - 1; n >= 0; n--)
          t[n].destroy();
        this.set("children", []), this.onCanvasChange("clear"), this.set("clearing", !1);
      }
    }, e.prototype.destroy = function() {
      this.get("destroyed") || (this.clear(), r.prototype.destroy.call(this));
    }, e.prototype.getFirst = function() {
      return this.getChildByIndex(0);
    }, e.prototype.getLast = function() {
      var t = this.getChildren();
      return this.getChildByIndex(t.length - 1);
    }, e.prototype.getChildByIndex = function(t) {
      var n = this.getChildren();
      return n[t];
    }, e.prototype.getCount = function() {
      var t = this.getChildren();
      return t.length;
    }, e.prototype.contain = function(t) {
      var n = this.getChildren();
      return n.indexOf(t) > -1;
    }, e.prototype.removeChild = function(t, n) {
      n === void 0 && (n = !0), this.contain(t) && t.remove(n);
    }, e.prototype.findAll = function(t) {
      var n = [], a = this.getChildren();
      return Se(a, function(i) {
        t(i) && n.push(i), i.isGroup() && (n = n.concat(i.findAll(t)));
      }), n;
    }, e.prototype.find = function(t) {
      var n = null, a = this.getChildren();
      return Se(a, function(i) {
        if (t(i) ? n = i : i.isGroup() && (n = i.find(t)), n)
          return !1;
      }), n;
    }, e.prototype.findById = function(t) {
      return this.find(function(n) {
        return n.get("id") === t;
      });
    }, e.prototype.findByClassName = function(t) {
      return this.find(function(n) {
        return n.get("className") === t;
      });
    }, e.prototype.findAllByName = function(t) {
      return this.findAll(function(n) {
        return n.get("name") === t;
      });
    }, e;
  }(XA)
), Qs = 0, nf = 0, Gu = 0, KA = 1e3, Sh, af, Ah = 0, Xo = 0, ud = 0, Tf = typeof performance == "object" && performance.now ? performance : Date, qA = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(r) {
  setTimeout(r, 17);
};
function ZA() {
  return Xo || (qA(KG), Xo = Tf.now() + ud);
}
function KG() {
  Xo = 0;
}
function N0() {
  this._call = this._time = this._next = null;
}
N0.prototype = QA.prototype = {
  constructor: N0,
  restart: function(r, e, t) {
    if (typeof r != "function")
      throw new TypeError("callback is not a function");
    t = (t == null ? ZA() : +t) + (e == null ? 0 : +e), !this._next && af !== this && (af ? af._next = this : Sh = this, af = this), this._call = r, this._time = t, P0();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, P0());
  }
};
function QA(r, e, t) {
  var n = new N0();
  return n.restart(r, e, t), n;
}
function qG() {
  ZA(), ++Qs;
  for (var r = Sh, e; r; )
    (e = Xo - r._time) >= 0 && r._call.call(null, e), r = r._next;
  --Qs;
}
function IE() {
  Xo = (Ah = Tf.now()) + ud, Qs = nf = 0;
  try {
    qG();
  } finally {
    Qs = 0, QG(), Xo = 0;
  }
}
function ZG() {
  var r = Tf.now(), e = r - Ah;
  e > KA && (ud -= e, Ah = r);
}
function QG() {
  for (var r, e = Sh, t, n = 1 / 0; e; )
    e._call ? (n > e._time && (n = e._time), r = e, e = e._next) : (t = e._next, e._next = null, e = r ? r._next = t : Sh = t);
  af = r, P0(n);
}
function P0(r) {
  if (!Qs) {
    nf && (nf = clearTimeout(nf));
    var e = r - Xo;
    e > 24 ? (r < 1 / 0 && (nf = setTimeout(IE, r - Tf.now() - ud)), Gu && (Gu = clearInterval(Gu))) : (Gu || (Ah = Tf.now(), Gu = setInterval(ZG, KA)), Qs = 1, qA(IE));
  }
}
function Cy(r, e, t) {
  r.prototype = e.prototype = t, t.constructor = r;
}
function JA(r, e) {
  var t = Object.create(r.prototype);
  for (var n in e)
    t[n] = e[n];
  return t;
}
function Vf() {
}
var If = 0.7, Ch = 1 / If, Ws = "\\s*([+-]?\\d+)\\s*", Of = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", qa = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", JG = /^#([0-9a-f]{3,8})$/, ez = new RegExp("^rgb\\(" + [Ws, Ws, Ws] + "\\)$"), tz = new RegExp("^rgb\\(" + [qa, qa, qa] + "\\)$"), rz = new RegExp("^rgba\\(" + [Ws, Ws, Ws, Of] + "\\)$"), nz = new RegExp("^rgba\\(" + [qa, qa, qa, Of] + "\\)$"), az = new RegExp("^hsl\\(" + [Of, qa, qa] + "\\)$"), iz = new RegExp("^hsla\\(" + [Of, qa, qa, Of] + "\\)$"), OE = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
Cy(Vf, Df, {
  copy: function(r) {
    return Object.assign(new this.constructor(), this, r);
  },
  displayable: function() {
    return this.rgb().displayable();
  },
  hex: DE,
  // Deprecated! Use color.formatHex.
  formatHex: DE,
  formatHsl: oz,
  formatRgb: LE,
  toString: LE
});
function DE() {
  return this.rgb().formatHex();
}
function oz() {
  return eC(this).formatHsl();
}
function LE() {
  return this.rgb().formatRgb();
}
function Df(r) {
  var e, t;
  return r = (r + "").trim().toLowerCase(), (e = JG.exec(r)) ? (t = e[1].length, e = parseInt(e[1], 16), t === 6 ? NE(e) : t === 3 ? new Xn(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, (e & 15) << 4 | e & 15, 1) : t === 8 ? rc(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (e & 255) / 255) : t === 4 ? rc(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, ((e & 15) << 4 | e & 15) / 255) : null) : (e = ez.exec(r)) ? new Xn(e[1], e[2], e[3], 1) : (e = tz.exec(r)) ? new Xn(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, 1) : (e = rz.exec(r)) ? rc(e[1], e[2], e[3], e[4]) : (e = nz.exec(r)) ? rc(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, e[4]) : (e = az.exec(r)) ? RE(e[1], e[2] / 100, e[3] / 100, 1) : (e = iz.exec(r)) ? RE(e[1], e[2] / 100, e[3] / 100, e[4]) : OE.hasOwnProperty(r) ? NE(OE[r]) : r === "transparent" ? new Xn(NaN, NaN, NaN, 0) : null;
}
function NE(r) {
  return new Xn(r >> 16 & 255, r >> 8 & 255, r & 255, 1);
}
function rc(r, e, t, n) {
  return n <= 0 && (r = e = t = NaN), new Xn(r, e, t, n);
}
function sz(r) {
  return r instanceof Vf || (r = Df(r)), r ? (r = r.rgb(), new Xn(r.r, r.g, r.b, r.opacity)) : new Xn();
}
function k0(r, e, t, n) {
  return arguments.length === 1 ? sz(r) : new Xn(r, e, t, n ?? 1);
}
function Xn(r, e, t, n) {
  this.r = +r, this.g = +e, this.b = +t, this.opacity = +n;
}
Cy(Xn, k0, JA(Vf, {
  brighter: function(r) {
    return r = r == null ? Ch : Math.pow(Ch, r), new Xn(this.r * r, this.g * r, this.b * r, this.opacity);
  },
  darker: function(r) {
    return r = r == null ? If : Math.pow(If, r), new Xn(this.r * r, this.g * r, this.b * r, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: PE,
  // Deprecated! Use color.formatHex.
  formatHex: PE,
  formatRgb: kE,
  toString: kE
}));
function PE() {
  return "#" + lp(this.r) + lp(this.g) + lp(this.b);
}
function kE() {
  var r = this.opacity;
  return r = isNaN(r) ? 1 : Math.max(0, Math.min(1, r)), (r === 1 ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (r === 1 ? ")" : ", " + r + ")");
}
function lp(r) {
  return r = Math.max(0, Math.min(255, Math.round(r) || 0)), (r < 16 ? "0" : "") + r.toString(16);
}
function RE(r, e, t, n) {
  return n <= 0 ? r = e = t = NaN : t <= 0 || t >= 1 ? r = e = NaN : e <= 0 && (r = NaN), new Ua(r, e, t, n);
}
function eC(r) {
  if (r instanceof Ua)
    return new Ua(r.h, r.s, r.l, r.opacity);
  if (r instanceof Vf || (r = Df(r)), !r)
    return new Ua();
  if (r instanceof Ua)
    return r;
  r = r.rgb();
  var e = r.r / 255, t = r.g / 255, n = r.b / 255, a = Math.min(e, t, n), i = Math.max(e, t, n), o = NaN, s = i - a, u = (i + a) / 2;
  return s ? (e === i ? o = (t - n) / s + (t < n) * 6 : t === i ? o = (n - e) / s + 2 : o = (e - t) / s + 4, s /= u < 0.5 ? i + a : 2 - i - a, o *= 60) : s = u > 0 && u < 1 ? 0 : o, new Ua(o, s, u, r.opacity);
}
function uz(r, e, t, n) {
  return arguments.length === 1 ? eC(r) : new Ua(r, e, t, n ?? 1);
}
function Ua(r, e, t, n) {
  this.h = +r, this.s = +e, this.l = +t, this.opacity = +n;
}
Cy(Ua, uz, JA(Vf, {
  brighter: function(r) {
    return r = r == null ? Ch : Math.pow(Ch, r), new Ua(this.h, this.s, this.l * r, this.opacity);
  },
  darker: function(r) {
    return r = r == null ? If : Math.pow(If, r), new Ua(this.h, this.s, this.l * r, this.opacity);
  },
  rgb: function() {
    var r = this.h % 360 + (this.h < 0) * 360, e = isNaN(r) || isNaN(this.s) ? 0 : this.s, t = this.l, n = t + (t < 0.5 ? t : 1 - t) * e, a = 2 * t - n;
    return new Xn(
      cp(r >= 240 ? r - 240 : r + 120, a, n),
      cp(r, a, n),
      cp(r < 120 ? r + 240 : r - 120, a, n),
      this.opacity
    );
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl: function() {
    var r = this.opacity;
    return r = isNaN(r) ? 1 : Math.max(0, Math.min(1, r)), (r === 1 ? "hsl(" : "hsla(") + (this.h || 0) + ", " + (this.s || 0) * 100 + "%, " + (this.l || 0) * 100 + "%" + (r === 1 ? ")" : ", " + r + ")");
  }
}));
function cp(r, e, t) {
  return (r < 60 ? e + (t - e) * r / 60 : r < 180 ? t : r < 240 ? e + (t - e) * (240 - r) / 60 : e) * 255;
}
const Ty = (r) => () => r;
function fz(r, e) {
  return function(t) {
    return r + t * e;
  };
}
function lz(r, e, t) {
  return r = Math.pow(r, t), e = Math.pow(e, t) - r, t = 1 / t, function(n) {
    return Math.pow(r + n * e, t);
  };
}
function cz(r) {
  return (r = +r) == 1 ? tC : function(e, t) {
    return t - e ? lz(e, t, r) : Ty(isNaN(e) ? t : e);
  };
}
function tC(r, e) {
  var t = e - r;
  return t ? fz(r, t) : Ty(isNaN(r) ? e : r);
}
const BE = function r(e) {
  var t = cz(e);
  function n(a, i) {
    var o = t((a = k0(a)).r, (i = k0(i)).r), s = t(a.g, i.g), u = t(a.b, i.b), f = tC(a.opacity, i.opacity);
    return function(l) {
      return a.r = o(l), a.g = s(l), a.b = u(l), a.opacity = f(l), a + "";
    };
  }
  return n.gamma = r, n;
}(1);
function rC(r, e) {
  e || (e = []);
  var t = r ? Math.min(e.length, r.length) : 0, n = e.slice(), a;
  return function(i) {
    for (a = 0; a < t; ++a)
      n[a] = r[a] * (1 - i) + e[a] * i;
    return n;
  };
}
function nC(r) {
  return ArrayBuffer.isView(r) && !(r instanceof DataView);
}
function hz(r, e) {
  return (nC(e) ? rC : aC)(r, e);
}
function aC(r, e) {
  var t = e ? e.length : 0, n = r ? Math.min(t, r.length) : 0, a = new Array(n), i = new Array(t), o;
  for (o = 0; o < n; ++o)
    a[o] = Th(r[o], e[o]);
  for (; o < t; ++o)
    i[o] = e[o];
  return function(s) {
    for (o = 0; o < n; ++o)
      i[o] = a[o](s);
    return i;
  };
}
function dz(r, e) {
  var t = /* @__PURE__ */ new Date();
  return r = +r, e = +e, function(n) {
    return t.setTime(r * (1 - n) + e * n), t;
  };
}
function R0(r, e) {
  return r = +r, e = +e, function(t) {
    return r * (1 - t) + e * t;
  };
}
function vz(r, e) {
  var t = {}, n = {}, a;
  (r === null || typeof r != "object") && (r = {}), (e === null || typeof e != "object") && (e = {});
  for (a in e)
    a in r ? t[a] = Th(r[a], e[a]) : n[a] = e[a];
  return function(i) {
    for (a in t)
      n[a] = t[a](i);
    return n;
  };
}
var B0 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, hp = new RegExp(B0.source, "g");
function pz(r) {
  return function() {
    return r;
  };
}
function gz(r) {
  return function(e) {
    return r(e) + "";
  };
}
function yz(r, e) {
  var t = B0.lastIndex = hp.lastIndex = 0, n, a, i, o = -1, s = [], u = [];
  for (r = r + "", e = e + ""; (n = B0.exec(r)) && (a = hp.exec(e)); )
    (i = a.index) > t && (i = e.slice(t, i), s[o] ? s[o] += i : s[++o] = i), (n = n[0]) === (a = a[0]) ? s[o] ? s[o] += a : s[++o] = a : (s[++o] = null, u.push({ i: o, x: R0(n, a) })), t = hp.lastIndex;
  return t < e.length && (i = e.slice(t), s[o] ? s[o] += i : s[++o] = i), s.length < 2 ? u[0] ? gz(u[0].x) : pz(e) : (e = u.length, function(f) {
    for (var l = 0, c; l < e; ++l)
      s[(c = u[l]).i] = c.x(f);
    return s.join("");
  });
}
function Th(r, e) {
  var t = typeof e, n;
  return e == null || t === "boolean" ? Ty(e) : (t === "number" ? R0 : t === "string" ? (n = Df(e)) ? (e = n, BE) : yz : e instanceof Df ? BE : e instanceof Date ? dz : nC(e) ? rC : Array.isArray(e) ? aC : typeof e.valueOf != "function" && typeof e.toString != "function" || isNaN(e) ? vz : R0)(r, e);
}
function mz(r) {
  return +r;
}
function bz(r) {
  return r * r;
}
function Ez(r) {
  return r * (2 - r);
}
function FE(r) {
  return ((r *= 2) <= 1 ? r * r : --r * (2 - r) + 1) / 2;
}
function xz(r) {
  return r * r * r;
}
function wz(r) {
  return --r * r * r + 1;
}
function GE(r) {
  return ((r *= 2) <= 1 ? r * r * r : (r -= 2) * r * r + 2) / 2;
}
var Iy = 3, _z = function r(e) {
  e = +e;
  function t(n) {
    return Math.pow(n, e);
  }
  return t.exponent = r, t;
}(Iy), Mz = function r(e) {
  e = +e;
  function t(n) {
    return 1 - Math.pow(1 - n, e);
  }
  return t.exponent = r, t;
}(Iy), zE = function r(e) {
  e = +e;
  function t(n) {
    return ((n *= 2) <= 1 ? Math.pow(n, e) : 2 - Math.pow(2 - n, e)) / 2;
  }
  return t.exponent = r, t;
}(Iy), iC = Math.PI, oC = iC / 2;
function Sz(r) {
  return +r == 1 ? 1 : 1 - Math.cos(r * oC);
}
function Az(r) {
  return Math.sin(r * oC);
}
function UE(r) {
  return (1 - Math.cos(iC * r)) / 2;
}
function Qi(r) {
  return (Math.pow(2, -10 * r) - 9765625e-10) * 1.0009775171065494;
}
function Cz(r) {
  return Qi(1 - +r);
}
function Tz(r) {
  return 1 - Qi(r);
}
function jE(r) {
  return ((r *= 2) <= 1 ? Qi(1 - r) : 2 - Qi(r - 1)) / 2;
}
function Iz(r) {
  return 1 - Math.sqrt(1 - r * r);
}
function Oz(r) {
  return Math.sqrt(1 - --r * r);
}
function $E(r) {
  return ((r *= 2) <= 1 ? 1 - Math.sqrt(1 - r * r) : Math.sqrt(1 - (r -= 2) * r) + 1) / 2;
}
var F0 = 4 / 11, Dz = 6 / 11, Lz = 8 / 11, Nz = 3 / 4, Pz = 9 / 11, kz = 10 / 11, Rz = 15 / 16, Bz = 21 / 22, Fz = 63 / 64, nc = 1 / F0 / F0;
function Gz(r) {
  return 1 - Lf(1 - r);
}
function Lf(r) {
  return (r = +r) < F0 ? nc * r * r : r < Lz ? nc * (r -= Dz) * r + Nz : r < kz ? nc * (r -= Pz) * r + Rz : nc * (r -= Bz) * r + Fz;
}
function zz(r) {
  return ((r *= 2) <= 1 ? 1 - Lf(1 - r) : Lf(r - 1) + 1) / 2;
}
var Oy = 1.70158, Uz = function r(e) {
  e = +e;
  function t(n) {
    return (n = +n) * n * (e * (n - 1) + n);
  }
  return t.overshoot = r, t;
}(Oy), jz = function r(e) {
  e = +e;
  function t(n) {
    return --n * n * ((n + 1) * e + n) + 1;
  }
  return t.overshoot = r, t;
}(Oy), WE = function r(e) {
  e = +e;
  function t(n) {
    return ((n *= 2) < 1 ? n * n * ((e + 1) * n - e) : (n -= 2) * n * ((e + 1) * n + e) + 2) / 2;
  }
  return t.overshoot = r, t;
}(Oy), Js = 2 * Math.PI, Dy = 1, Ly = 0.3, $z = function r(e, t) {
  var n = Math.asin(1 / (e = Math.max(1, e))) * (t /= Js);
  function a(i) {
    return e * Qi(- --i) * Math.sin((n - i) / t);
  }
  return a.amplitude = function(i) {
    return r(i, t * Js);
  }, a.period = function(i) {
    return r(e, i);
  }, a;
}(Dy, Ly), XE = function r(e, t) {
  var n = Math.asin(1 / (e = Math.max(1, e))) * (t /= Js);
  function a(i) {
    return 1 - e * Qi(i = +i) * Math.sin((i + n) / t);
  }
  return a.amplitude = function(i) {
    return r(i, t * Js);
  }, a.period = function(i) {
    return r(e, i);
  }, a;
}(Dy, Ly), Wz = function r(e, t) {
  var n = Math.asin(1 / (e = Math.max(1, e))) * (t /= Js);
  function a(i) {
    return ((i = i * 2 - 1) < 0 ? e * Qi(-i) * Math.sin((n - i) / t) : 2 - e * Qi(i) * Math.sin((n + i) / t)) / 2;
  }
  return a.amplitude = function(i) {
    return r(i, t * Js);
  }, a.period = function(i) {
    return r(e, i);
  }, a;
}(Dy, Ly);
const Xz = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  easeBack: WE,
  easeBackIn: Uz,
  easeBackInOut: WE,
  easeBackOut: jz,
  easeBounce: Lf,
  easeBounceIn: Gz,
  easeBounceInOut: zz,
  easeBounceOut: Lf,
  easeCircle: $E,
  easeCircleIn: Iz,
  easeCircleInOut: $E,
  easeCircleOut: Oz,
  easeCubic: GE,
  easeCubicIn: xz,
  easeCubicInOut: GE,
  easeCubicOut: wz,
  easeElastic: XE,
  easeElasticIn: $z,
  easeElasticInOut: Wz,
  easeElasticOut: XE,
  easeExp: jE,
  easeExpIn: Cz,
  easeExpInOut: jE,
  easeExpOut: Tz,
  easeLinear: mz,
  easePoly: zE,
  easePolyIn: _z,
  easePolyInOut: zE,
  easePolyOut: Mz,
  easeQuad: FE,
  easeQuadIn: bz,
  easeQuadInOut: FE,
  easeQuadOut: Ez,
  easeSin: UE,
  easeSinIn: Sz,
  easeSinInOut: UE,
  easeSinOut: Az
}, Symbol.toStringTag, { value: "Module" }));
var Vz = {};
function Yz(r) {
  return Vz[r.toLowerCase()] || Xz[r];
}
var Hz = function(r) {
  return ["fill", "stroke", "fillStyle", "strokeStyle"].includes(r);
}, Kz = function(r) {
  return /^[r,R,L,l]{1}[\s]*\(/.test(r);
}, VE = [1, 0, 0, 0, 1, 0, 0, 0, 1];
function qz(r, e, t) {
  var n = {}, a = e.fromAttrs, i = e.toAttrs;
  if (!r.destroyed) {
    var o;
    for (var s in i)
      if (!jo(a[s], i[s]))
        if (s === "path") {
          var u = i[s], f = a[s];
          u.length > f.length ? (u = Us(i[s]), f = Us(a[s]), f = FA(f, u), f = O0(f, u), e.fromAttrs.path = f, e.toAttrs.path = u) : e.pathFormatted || (u = Us(i[s]), f = Us(a[s]), f = O0(f, u), e.fromAttrs.path = f, e.toAttrs.path = u, e.pathFormatted = !0), n[s] = [];
          for (var l = 0; l < u.length; l++) {
            for (var c = u[l], h = f[l], d = [], v = 0; v < c.length; v++)
              Pt(c[v]) && h && Pt(h[v]) ? (o = Th(h[v], c[v]), d.push(o(t))) : d.push(c[v]);
            n[s].push(d);
          }
        } else if (s === "matrix") {
          var p = hz(a[s] || VE, i[s] || VE), g = p(t);
          n[s] = g;
        } else
          Hz(s) && Kz(i[s]) ? n[s] = i[s] : Or(i[s]) || (o = Th(a[s], i[s]), n[s] = o(t));
    r.attr(n);
  }
}
function Zz(r, e, t) {
  var n = e.startTime, a = e.delay;
  if (t < n + a || e._paused)
    return !1;
  var i, o = e.duration, s = e.easing, u = Yz(s);
  if (t = t - n - e.delay, e.repeat)
    i = t % o / o, i = u(i);
  else if (i = t / o, i < 1)
    i = u(i);
  else
    return e.onFrame ? r.attr(e.onFrame(1)) : r.attr(e.toAttrs), !0;
  if (e.onFrame) {
    var f = e.onFrame(i);
    r.attr(f);
  } else
    qz(r, e, i);
  return !1;
}
var Qz = (
  /** @class */
  function() {
    function r(e) {
      this.animators = [], this.current = 0, this.timer = null, this.canvas = e;
    }
    return r.prototype.initTimer = function() {
      var e = this, t = !1, n, a, i;
      this.timer = QA(function(o) {
        if (e.current = o, e.animators.length > 0) {
          for (var s = e.animators.length - 1; s >= 0; s--) {
            if (n = e.animators[s], n.destroyed) {
              e.removeAnimator(s);
              continue;
            }
            if (!n.isAnimatePaused()) {
              a = n.get("animations");
              for (var u = a.length - 1; u >= 0; u--)
                i = a[u], t = Zz(n, i, o), t && (a.splice(u, 1), t = !1, i.callback && i.callback());
            }
            a.length === 0 && e.removeAnimator(s);
          }
          var f = e.canvas.get("autoDraw");
          f || e.canvas.draw();
        }
      });
    }, r.prototype.addAnimator = function(e) {
      this.animators.push(e);
    }, r.prototype.removeAnimator = function(e) {
      this.animators.splice(e, 1);
    }, r.prototype.isAnimating = function() {
      return !!this.animators.length;
    }, r.prototype.stop = function() {
      this.timer && this.timer.stop();
    }, r.prototype.stopAllAnimations = function(e) {
      e === void 0 && (e = !0), this.animators.forEach(function(t) {
        t.stopAnimate(e);
      }), this.animators = [], this.canvas.draw();
    }, r.prototype.getTime = function() {
      return this.current;
    }, r;
  }()
), Jz = 40, YE = 0, HE = [
  "mousedown",
  "mouseup",
  "dblclick",
  "mouseout",
  "mouseover",
  "mousemove",
  "mouseleave",
  "mouseenter",
  "touchstart",
  "touchmove",
  "touchend",
  "dragenter",
  "dragover",
  "dragleave",
  "drop",
  "contextmenu",
  "mousewheel"
];
function KE(r, e, t) {
  t.name = e, t.target = r, t.currentTarget = r, t.delegateTarget = r, r.emit(e, t);
}
function e6(r, e, t) {
  if (t.bubbles) {
    var n = void 0, a = !1;
    if (e === "mouseenter" ? (n = t.fromShape, a = !0) : e === "mouseleave" && (a = !0, n = t.toShape), r.isCanvas() && a)
      return;
    if (n && jA(r, n)) {
      t.bubbles = !1;
      return;
    }
    t.name = e, t.currentTarget = r, t.delegateTarget = r, r.emit(e, t);
  }
}
var t6 = (
  /** @class */
  function() {
    function r(e) {
      var t = this;
      this.draggingShape = null, this.dragging = !1, this.currentShape = null, this.mousedownShape = null, this.mousedownPoint = null, this._eventCallback = function(n) {
        var a = n.type;
        t._triggerEvent(a, n);
      }, this._onDocumentMove = function(n) {
        var a = t.canvas, i = a.get("el");
        if (i !== n.target && (t.dragging || t.currentShape)) {
          var o = t._getPointInfo(n);
          t.dragging && t._emitEvent("drag", n, o, t.draggingShape);
        }
      }, this._onDocumentMouseUp = function(n) {
        var a = t.canvas, i = a.get("el");
        if (i !== n.target && t.dragging) {
          var o = t._getPointInfo(n);
          t.draggingShape && t._emitEvent("drop", n, o, null), t._emitEvent("dragend", n, o, t.draggingShape), t._afterDrag(t.draggingShape, o, n);
        }
      }, this.canvas = e.canvas;
    }
    return r.prototype.init = function() {
      this._bindEvents();
    }, r.prototype._bindEvents = function() {
      var e = this, t = this.canvas.get("el");
      Se(HE, function(n) {
        t.addEventListener(n, e._eventCallback);
      }), document && (document.addEventListener("mousemove", this._onDocumentMove), document.addEventListener("mouseup", this._onDocumentMouseUp));
    }, r.prototype._clearEvents = function() {
      var e = this, t = this.canvas.get("el");
      Se(HE, function(n) {
        t.removeEventListener(n, e._eventCallback);
      }), document && (document.removeEventListener("mousemove", this._onDocumentMove), document.removeEventListener("mouseup", this._onDocumentMouseUp));
    }, r.prototype._getEventObj = function(e, t, n, a, i, o) {
      var s = new zA(e, t);
      return s.fromShape = i, s.toShape = o, s.x = n.x, s.y = n.y, s.clientX = n.clientX, s.clientY = n.clientY, s.propagationPath.push(a), s;
    }, r.prototype._getShape = function(e, t) {
      return this.canvas.getShape(e.x, e.y, t);
    }, r.prototype._getPointInfo = function(e) {
      var t = this.canvas, n = t.getClientByEvent(e), a = t.getPointByEvent(e);
      return {
        x: a.x,
        y: a.y,
        clientX: n.x,
        clientY: n.y
      };
    }, r.prototype._triggerEvent = function(e, t) {
      var n = this._getPointInfo(t), a = this._getShape(n, t), i = this["_on" + e], o = !1;
      if (i)
        i.call(this, n, a, t);
      else {
        var s = this.currentShape;
        e === "mouseenter" || e === "dragenter" || e === "mouseover" ? (this._emitEvent(e, t, n, null, null, a), a && this._emitEvent(e, t, n, a, null, a), e === "mouseenter" && this.draggingShape && this._emitEvent("dragenter", t, n, null)) : e === "mouseleave" || e === "dragleave" || e === "mouseout" ? (o = !0, s && this._emitEvent(e, t, n, s, s, null), this._emitEvent(e, t, n, null, s, null), e === "mouseleave" && this.draggingShape && this._emitEvent("dragleave", t, n, null)) : this._emitEvent(e, t, n, a, null, null);
      }
      if (o || (this.currentShape = a), a && !a.get("destroyed")) {
        var u = this.canvas, f = u.get("el");
        f.style.cursor = a.attr("cursor") || u.get("cursor");
      }
    }, r.prototype._onmousedown = function(e, t, n) {
      n.button === YE && (this.mousedownShape = t, this.mousedownPoint = e, this.mousedownTimeStamp = n.timeStamp), this._emitEvent("mousedown", n, e, t, null, null);
    }, r.prototype._emitMouseoverEvents = function(e, t, n, a) {
      var i = this.canvas.get("el");
      n !== a && (n && (this._emitEvent("mouseout", e, t, n, n, a), this._emitEvent("mouseleave", e, t, n, n, a), (!a || a.get("destroyed")) && (i.style.cursor = this.canvas.get("cursor"))), a && (this._emitEvent("mouseover", e, t, a, n, a), this._emitEvent("mouseenter", e, t, a, n, a)));
    }, r.prototype._emitDragoverEvents = function(e, t, n, a, i) {
      a ? (a !== n && (n && this._emitEvent("dragleave", e, t, n, n, a), this._emitEvent("dragenter", e, t, a, n, a)), i || this._emitEvent("dragover", e, t, a)) : n && this._emitEvent("dragleave", e, t, n, n, a), i && this._emitEvent("dragover", e, t, a);
    }, r.prototype._afterDrag = function(e, t, n) {
      e && (e.set("capture", !0), this.draggingShape = null), this.dragging = !1;
      var a = this._getShape(t, n);
      a !== e && this._emitMouseoverEvents(n, t, e, a), this.currentShape = a;
    }, r.prototype._onmouseup = function(e, t, n) {
      if (n.button === YE) {
        var a = this.draggingShape;
        this.dragging ? (a && this._emitEvent("drop", n, e, t), this._emitEvent("dragend", n, e, a), this._afterDrag(a, e, n)) : (this._emitEvent("mouseup", n, e, t), t === this.mousedownShape && this._emitEvent("click", n, e, t), this.mousedownShape = null, this.mousedownPoint = null);
      }
    }, r.prototype._ondragover = function(e, t, n) {
      n.preventDefault();
      var a = this.currentShape;
      this._emitDragoverEvents(n, e, a, t, !0);
    }, r.prototype._onmousemove = function(e, t, n) {
      var a = this.canvas, i = this.currentShape, o = this.draggingShape;
      if (this.dragging)
        o && this._emitDragoverEvents(n, e, i, t, !1), this._emitEvent("drag", n, e, o);
      else {
        var s = this.mousedownPoint;
        if (s) {
          var u = this.mousedownShape, f = n.timeStamp, l = f - this.mousedownTimeStamp, c = s.clientX - e.clientX, h = s.clientY - e.clientY, d = c * c + h * h;
          l > 120 || d > Jz ? u && u.get("draggable") ? (o = this.mousedownShape, o.set("capture", !1), this.draggingShape = o, this.dragging = !0, this._emitEvent("dragstart", n, e, o), this.mousedownShape = null, this.mousedownPoint = null) : !u && a.get("draggable") ? (this.dragging = !0, this._emitEvent("dragstart", n, e, null), this.mousedownShape = null, this.mousedownPoint = null) : (this._emitMouseoverEvents(n, e, i, t), this._emitEvent("mousemove", n, e, t)) : (this._emitMouseoverEvents(n, e, i, t), this._emitEvent("mousemove", n, e, t));
        } else
          this._emitMouseoverEvents(n, e, i, t), this._emitEvent("mousemove", n, e, t);
      }
    }, r.prototype._emitEvent = function(e, t, n, a, i, o) {
      var s = this._getEventObj(e, t, n, a, i, o);
      if (a) {
        s.shape = a, KE(a, e, s);
        for (var u = a.getParent(); u; )
          u.emitDelegation(e, s), s.propagationStopped || e6(u, e, s), s.propagationPath.push(u), u = u.getParent();
      } else {
        var f = this.canvas;
        KE(f, e, s);
      }
    }, r.prototype.destroy = function() {
      this._clearEvents(), this.canvas = null, this.currentShape = null, this.draggingShape = null, this.mousedownPoint = null, this.mousedownShape = null, this.mousedownTimeStamp = null;
    }, r;
  }()
), qE = "px", ZE = $A(), r6 = ZE && ZE.name === "firefox", sC = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this, t) || this;
      return n.initContainer(), n.initDom(), n.initEvents(), n.initTimeline(), n;
    }
    return e.prototype.getDefaultCfg = function() {
      var t = r.prototype.getDefaultCfg.call(this);
      return t.cursor = "default", t.supportCSSTransform = !1, t;
    }, e.prototype.initContainer = function() {
      var t = this.get("container");
      He(t) && (t = document.getElementById(t), this.set("container", t));
    }, e.prototype.initDom = function() {
      var t = this.createDom();
      this.set("el", t);
      var n = this.get("container");
      n.appendChild(t), this.setDOMSize(this.get("width"), this.get("height"));
    }, e.prototype.initEvents = function() {
      var t = new t6({
        canvas: this
      });
      t.init(), this.set("eventController", t);
    }, e.prototype.initTimeline = function() {
      var t = new Qz(this);
      this.set("timeline", t);
    }, e.prototype.setDOMSize = function(t, n) {
      var a = this.get("el");
      wE && (a.style.width = t + qE, a.style.height = n + qE);
    }, e.prototype.changeSize = function(t, n) {
      this.setDOMSize(t, n), this.set("width", t), this.set("height", n), this.onCanvasChange("changeSize");
    }, e.prototype.getRenderer = function() {
      return this.get("renderer");
    }, e.prototype.getCursor = function() {
      return this.get("cursor");
    }, e.prototype.setCursor = function(t) {
      this.set("cursor", t);
      var n = this.get("el");
      wE && n && (n.style.cursor = t);
    }, e.prototype.getPointByEvent = function(t) {
      var n = this.get("supportCSSTransform");
      if (n) {
        if (r6 && !Zt(t.layerX) && t.layerX !== t.offsetX)
          return {
            x: t.layerX,
            y: t.layerY
          };
        if (!Zt(t.offsetX))
          return {
            x: t.offsetX,
            y: t.offsetY
          };
      }
      var a = this.getClientByEvent(t), i = a.x, o = a.y;
      return this.getPointByClient(i, o);
    }, e.prototype.getClientByEvent = function(t) {
      var n = t;
      return t.touches && (t.type === "touchend" ? n = t.changedTouches[0] : n = t.touches[0]), {
        x: n.clientX,
        y: n.clientY
      };
    }, e.prototype.getPointByClient = function(t, n) {
      var a = this.get("el"), i = a.getBoundingClientRect();
      return {
        x: t - i.left,
        y: n - i.top
      };
    }, e.prototype.getClientByPoint = function(t, n) {
      var a = this.get("el"), i = a.getBoundingClientRect();
      return {
        x: t + i.left,
        y: n + i.top
      };
    }, e.prototype.draw = function() {
    }, e.prototype.removeDom = function() {
      var t = this.get("el");
      t.parentNode.removeChild(t);
    }, e.prototype.clearEvents = function() {
      var t = this.get("eventController");
      t.destroy();
    }, e.prototype.isCanvas = function() {
      return !0;
    }, e.prototype.getParent = function() {
      return null;
    }, e.prototype.destroy = function() {
      var t = this.get("timeline");
      this.get("destroyed") || (this.clear(), t && t.stop(), this.clearEvents(), this.removeDom(), r.prototype.destroy.call(this));
    }, e;
  }(HA)
), uC = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.isGroup = function() {
      return !0;
    }, e.prototype.isEntityGroup = function() {
      return !1;
    }, e.prototype.clone = function() {
      for (var t = r.prototype.clone.call(this), n = this.getChildren(), a = 0; a < n.length; a++) {
        var i = n[a];
        t.add(i.clone());
      }
      return t;
    }, e;
  }(HA)
), fC = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      return r.call(this, t) || this;
    }
    return e.prototype._isInBBox = function(t, n) {
      var a = this.getBBox();
      return a.minX <= t && a.maxX >= t && a.minY <= n && a.maxY >= n;
    }, e.prototype.afterAttrsChange = function(t) {
      r.prototype.afterAttrsChange.call(this, t), this.clearCacheBBox();
    }, e.prototype.getBBox = function() {
      var t = this.cfg.bbox;
      return t || (t = this.calculateBBox(), this.set("bbox", t)), t;
    }, e.prototype.getCanvasBBox = function() {
      var t = this.cfg.canvasBBox;
      return t || (t = this.calculateCanvasBBox(), this.set("canvasBBox", t)), t;
    }, e.prototype.applyMatrix = function(t) {
      r.prototype.applyMatrix.call(this, t), this.set("canvasBBox", null);
    }, e.prototype.calculateCanvasBBox = function() {
      var t = this.getBBox(), n = this.getTotalMatrix(), a = t.minX, i = t.minY, o = t.maxX, s = t.maxY;
      if (n) {
        var u = Bo(n, [t.minX, t.minY]), f = Bo(n, [t.maxX, t.minY]), l = Bo(n, [t.minX, t.maxY]), c = Bo(n, [t.maxX, t.maxY]);
        a = Math.min(u[0], f[0], l[0], c[0]), o = Math.max(u[0], f[0], l[0], c[0]), i = Math.min(u[1], f[1], l[1], c[1]), s = Math.max(u[1], f[1], l[1], c[1]);
      }
      var h = this.attrs;
      if (h.shadowColor) {
        var d = h.shadowBlur, v = d === void 0 ? 0 : d, p = h.shadowOffsetX, g = p === void 0 ? 0 : p, y = h.shadowOffsetY, m = y === void 0 ? 0 : y, b = a - v + g, E = o + v + g, x = i - v + m, w = s + v + m;
        a = Math.min(a, b), o = Math.max(o, E), i = Math.min(i, x), s = Math.max(s, w);
      }
      return {
        x: a,
        y: i,
        minX: a,
        minY: i,
        maxX: o,
        maxY: s,
        width: o - a,
        height: s - i
      };
    }, e.prototype.clearCacheBBox = function() {
      this.set("bbox", null), this.set("canvasBBox", null);
    }, e.prototype.isClipShape = function() {
      return this.get("isClipShape");
    }, e.prototype.isInShape = function(t, n) {
      return !1;
    }, e.prototype.isOnlyHitBox = function() {
      return !1;
    }, e.prototype.isHit = function(t, n) {
      var a = this.get("startArrowShape"), i = this.get("endArrowShape"), o = [t, n, 1];
      o = this.invertFromMatrix(o);
      var s = o[0], u = o[1], f = this._isInBBox(s, u);
      return this.isOnlyHitBox() ? f : !!(f && !this.isClipped(s, u) && (this.isInShape(s, u) || a && a.isHit(s, u) || i && i.isHit(s, u)));
    }, e;
  }(XA)
), lC = /* @__PURE__ */ new Map();
function ti(r, e) {
  lC.set(r, e);
}
function cC(r) {
  return lC.get(r);
}
function hC(r) {
  var e = r.attr(), t = e.x, n = e.y, a = e.width, i = e.height;
  return {
    x: t,
    y: n,
    width: a,
    height: i
  };
}
function dC(r) {
  var e = r.attr(), t = e.x, n = e.y, a = e.r;
  return {
    x: t - a,
    y: n - a,
    width: a * 2,
    height: a * 2
  };
}
function wn(r, e, t, n) {
  var a = r - t, i = e - n;
  return Math.sqrt(a * a + i * i);
}
function Qc(r, e) {
  return Math.abs(r - e) < 1e-3;
}
function gu(r, e) {
  var t = Ja(r), n = Ja(e), a = Qa(r), i = Qa(e);
  return {
    x: t,
    y: n,
    width: a - t,
    height: i - n
  };
}
function fd(r) {
  return (r + Math.PI * 2) % (Math.PI * 2);
}
const dn = {
  /**
   * 计算线段的包围盒
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @return {object} 包围盒对象
   */
  box: function(r, e, t, n) {
    return gu([r, t], [e, n]);
  },
  /**
   * 线段的长度
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @return {number} 距离
   */
  length: function(r, e, t, n) {
    return wn(r, e, t, n);
  },
  /**
   * 根据比例获取点
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @param {number} t 指定比例
   * @return {object} 包含 x, y 的点
   */
  pointAt: function(r, e, t, n, a) {
    return {
      x: (1 - a) * r + a * t,
      y: (1 - a) * e + a * n
    };
  },
  /**
   * 点到线段的距离
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @param {number} x  测试点 x
   * @param {number} y  测试点 y
   * @return {number} 距离
   */
  pointDistance: function(r, e, t, n, a, i) {
    var o = (t - r) * (a - r) + (n - e) * (i - e);
    if (o < 0)
      return wn(r, e, a, i);
    var s = (t - r) * (t - r) + (n - e) * (n - e);
    return o > s ? wn(t, n, a, i) : this.pointToLine(r, e, t, n, a, i);
  },
  /**
   * 点到直线的距离，而不是点到线段的距离
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @param {number} x  测试点 x
   * @param {number} y  测试点 y
   * @return {number} 距离
   */
  pointToLine: function(r, e, t, n, a, i) {
    var o = [t - r, n - e];
    if (vy(o, [0, 0]))
      return Math.sqrt((a - r) * (a - r) + (i - e) * (i - e));
    var s = [-o[1], o[0]];
    qi(s, s);
    var u = [a - r, i - e];
    return Math.abs(dy(u, s));
  },
  /**
   * 线段的角度
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @return {number} 导数
   */
  tangentAngle: function(r, e, t, n) {
    return Math.atan2(n - e, t - r);
  }
};
var n6 = 1e-4;
function vC(r, e, t, n, a, i) {
  var o, s = 1 / 0, u = [t, n], f = 20;
  i && i > 200 && (f = i / 10);
  for (var l = 1 / f, c = l / 10, h = 0; h <= f; h++) {
    var d = h * l, v = [a.apply(null, r.concat([d])), a.apply(null, e.concat([d]))], p = wn(u[0], u[1], v[0], v[1]);
    p < s && (o = d, s = p);
  }
  if (o === 0)
    return {
      x: r[0],
      y: e[0]
    };
  if (o === 1) {
    var g = r.length;
    return {
      x: r[g - 1],
      y: e[g - 1]
    };
  }
  s = 1 / 0;
  for (var h = 0; h < 32 && !(c < n6); h++) {
    var y = o - c, m = o + c, v = [a.apply(null, r.concat([y])), a.apply(null, e.concat([y]))], p = wn(u[0], u[1], v[0], v[1]);
    if (y >= 0 && p < s)
      o = y, s = p;
    else {
      var b = [a.apply(null, r.concat([m])), a.apply(null, e.concat([m]))], E = wn(u[0], u[1], b[0], b[1]);
      m <= 1 && E < s ? (o = m, s = E) : c *= 0.5;
    }
  }
  return {
    x: a.apply(null, r.concat([o])),
    y: a.apply(null, e.concat([o]))
  };
}
function a6(r, e) {
  for (var t = 0, n = r.length, a = 0; a < n; a++) {
    var i = r[a], o = e[a], s = r[(a + 1) % n], u = e[(a + 1) % n];
    t += wn(i, o, s, u);
  }
  return t / 2;
}
function $i(r, e, t, n) {
  var a = 1 - n;
  return a * a * r + 2 * n * a * e + n * n * t;
}
function QE(r, e, t) {
  var n = r + t - 2 * e;
  if (Qc(n, 0))
    return [0.5];
  var a = (r - e) / n;
  return a <= 1 && a >= 0 ? [a] : [];
}
function JE(r, e, t, n) {
  return 2 * (1 - n) * (e - r) + 2 * n * (t - e);
}
function pC(r, e, t, n, a, i, o) {
  var s = $i(r, t, a, o), u = $i(e, n, i, o), f = dn.pointAt(r, e, t, n, o), l = dn.pointAt(t, n, a, i, o);
  return [
    [r, e, f.x, f.y, s, u],
    [s, u, l.x, l.y, a, i]
  ];
}
function G0(r, e, t, n, a, i, o) {
  if (o === 0)
    return (wn(r, e, t, n) + wn(t, n, a, i) + wn(r, e, a, i)) / 2;
  var s = pC(r, e, t, n, a, i, 0.5), u = s[0], f = s[1];
  return u.push(o - 1), f.push(o - 1), G0.apply(null, u) + G0.apply(null, f);
}
const gC = {
  box: function(r, e, t, n, a, i) {
    var o = QE(r, t, a)[0], s = QE(e, n, i)[0], u = [r, a], f = [e, i];
    return o !== void 0 && u.push($i(r, t, a, o)), s !== void 0 && f.push($i(e, n, i, s)), gu(u, f);
  },
  length: function(r, e, t, n, a, i) {
    return G0(r, e, t, n, a, i, 3);
  },
  nearestPoint: function(r, e, t, n, a, i, o, s) {
    return vC([r, t, a], [e, n, i], o, s, $i);
  },
  pointDistance: function(r, e, t, n, a, i, o, s) {
    var u = this.nearestPoint(r, e, t, n, a, i, o, s);
    return wn(u.x, u.y, o, s);
  },
  interpolationAt: $i,
  pointAt: function(r, e, t, n, a, i, o) {
    return {
      x: $i(r, t, a, o),
      y: $i(e, n, i, o)
    };
  },
  divide: function(r, e, t, n, a, i, o) {
    return pC(r, e, t, n, a, i, o);
  },
  tangentAngle: function(r, e, t, n, a, i, o) {
    var s = JE(r, t, a, o), u = JE(e, n, i, o), f = Math.atan2(u, s);
    return fd(f);
  }
};
function Wi(r, e, t, n, a) {
  var i = 1 - a;
  return i * i * i * r + 3 * e * a * i * i + 3 * t * a * a * i + n * a * a * a;
}
function ex(r, e, t, n, a) {
  var i = 1 - a;
  return 3 * (i * i * (e - r) + 2 * i * a * (t - e) + a * a * (n - t));
}
function dp(r, e, t, n) {
  var a = -3 * r + 9 * e - 9 * t + 3 * n, i = 6 * r - 12 * e + 6 * t, o = 3 * e - 3 * r, s = [], u, f, l;
  if (Qc(a, 0))
    Qc(i, 0) || (u = -o / i, u >= 0 && u <= 1 && s.push(u));
  else {
    var c = i * i - 4 * a * o;
    Qc(c, 0) ? s.push(-i / (2 * a)) : c > 0 && (l = Math.sqrt(c), u = (-i + l) / (2 * a), f = (-i - l) / (2 * a), u >= 0 && u <= 1 && s.push(u), f >= 0 && f <= 1 && s.push(f));
  }
  return s;
}
function yC(r, e, t, n, a, i, o, s, u) {
  var f = Wi(r, t, a, o, u), l = Wi(e, n, i, s, u), c = dn.pointAt(r, e, t, n, u), h = dn.pointAt(t, n, a, i, u), d = dn.pointAt(a, i, o, s, u), v = dn.pointAt(c.x, c.y, h.x, h.y, u), p = dn.pointAt(h.x, h.y, d.x, d.y, u);
  return [
    [r, e, c.x, c.y, v.x, v.y, f, l],
    [f, l, p.x, p.y, d.x, d.y, o, s]
  ];
}
function z0(r, e, t, n, a, i, o, s, u) {
  if (u === 0)
    return a6([r, t, a, o], [e, n, i, s]);
  var f = yC(r, e, t, n, a, i, o, s, 0.5), l = f[0], c = f[1];
  return l.push(u - 1), c.push(u - 1), z0.apply(null, l) + z0.apply(null, c);
}
const vf = {
  extrema: dp,
  box: function(r, e, t, n, a, i, o, s) {
    for (var u = [r, o], f = [e, s], l = dp(r, t, a, o), c = dp(e, n, i, s), h = 0; h < l.length; h++)
      u.push(Wi(r, t, a, o, l[h]));
    for (var h = 0; h < c.length; h++)
      f.push(Wi(e, n, i, s, c[h]));
    return gu(u, f);
  },
  length: function(r, e, t, n, a, i, o, s) {
    return z0(r, e, t, n, a, i, o, s, 3);
  },
  nearestPoint: function(r, e, t, n, a, i, o, s, u, f, l) {
    return vC([r, t, a, o], [e, n, i, s], u, f, Wi, l);
  },
  pointDistance: function(r, e, t, n, a, i, o, s, u, f, l) {
    var c = this.nearestPoint(r, e, t, n, a, i, o, s, u, f, l);
    return wn(c.x, c.y, u, f);
  },
  interpolationAt: Wi,
  pointAt: function(r, e, t, n, a, i, o, s, u) {
    return {
      x: Wi(r, t, a, o, u),
      y: Wi(e, n, i, s, u)
    };
  },
  divide: function(r, e, t, n, a, i, o, s, u) {
    return yC(r, e, t, n, a, i, o, s, u);
  },
  tangentAngle: function(r, e, t, n, a, i, o, s, u) {
    var f = ex(r, t, a, o, u), l = ex(e, n, i, s, u);
    return fd(Math.atan2(l, f));
  }
};
function tx(r, e) {
  var t = Math.abs(r);
  return e > 0 ? t : t * -1;
}
const i6 = {
  /**
   * 包围盒计算
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @return {object} 包围盒
   */
  box: function(r, e, t, n) {
    return {
      x: r - t,
      y: e - n,
      width: t * 2,
      height: n * 2
    };
  },
  /**
   * 计算周长，使用近似法
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @return {number} 椭圆周长
   */
  length: function(r, e, t, n) {
    return Math.PI * (3 * (t + n) - Math.sqrt((3 * t + n) * (t + 3 * n)));
  },
  /**
   * 距离椭圆最近的点
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} x0  指定的点 x
   * @param {number} y0  指定的点 y
   * @return {object} 椭圆上距离指定点最近的点
   */
  nearestPoint: function(r, e, t, n, a, i) {
    var o = t, s = n;
    if (o === 0 || s === 0)
      return {
        x: r,
        y: e
      };
    for (var u = a - r, f = i - e, l = Math.abs(u), c = Math.abs(f), h = o * o, d = s * s, v = Math.PI / 4, p, g, y = 0; y < 4; y++) {
      p = o * Math.cos(v), g = s * Math.sin(v);
      var m = (h - d) * Math.pow(Math.cos(v), 3) / o, b = (d - h) * Math.pow(Math.sin(v), 3) / s, E = p - m, x = g - b, w = l - m, _ = c - b, M = Math.hypot(x, E), A = Math.hypot(_, w), S = M * Math.asin((E * _ - x * w) / (M * A)), T = S / Math.sqrt(h + d - p * p - g * g);
      v += T, v = Math.min(Math.PI / 2, Math.max(0, v));
    }
    return {
      x: r + tx(p, u),
      y: e + tx(g, f)
    };
  },
  /**
   * 点到椭圆最近的距离
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} x0  指定的点 x
   * @param {number} y0  指定的点 y
   * @return {number} 点到椭圆的距离
   */
  pointDistance: function(r, e, t, n, a, i) {
    var o = this.nearestPoint(r, e, t, n, a, i);
    return wn(o.x, o.y, a, i);
  },
  /**
   * 根据比例获取点
   * @param {number} x 椭圆中心 x
   * @param {number} y 椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} t 指定比例，x轴方向为 0
   * @return {object} 点
   */
  pointAt: function(r, e, t, n, a) {
    var i = 2 * Math.PI * a;
    return {
      x: r + t * Math.cos(i),
      y: e + n * Math.sin(i)
    };
  },
  /**
   * 根据比例计算切线角度
   * @param {number} x 椭圆中心 x
   * @param {number} y 椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} t 指定比例 0 - 1 之间，x轴方向为 0。在 0-1 范围之外是循环还是返回 null，还需要调整
   * @return {number} 角度，在 0 - 2PI 之间
   */
  tangentAngle: function(r, e, t, n, a) {
    var i = 2 * Math.PI * a, o = Math.atan2(n * Math.cos(i), -t * Math.sin(i));
    return fd(o);
  }
};
function o6(r, e, t, n, a, i, o, s) {
  return -1 * t * Math.cos(a) * Math.sin(s) - n * Math.sin(a) * Math.cos(s);
}
function s6(r, e, t, n, a, i, o, s) {
  return -1 * t * Math.sin(a) * Math.sin(s) + n * Math.cos(a) * Math.cos(s);
}
function u6(r, e, t) {
  return Math.atan(-e / r * Math.tan(t));
}
function f6(r, e, t) {
  return Math.atan(e / (r * Math.tan(t)));
}
function rx(r, e, t, n, a, i) {
  return t * Math.cos(a) * Math.cos(i) - n * Math.sin(a) * Math.sin(i) + r;
}
function nx(r, e, t, n, a, i) {
  return t * Math.sin(a) * Math.cos(i) + n * Math.cos(a) * Math.sin(i) + e;
}
function l6(r, e, t, n) {
  var a = Math.atan2(n * r, t * e);
  return (a + Math.PI * 2) % (Math.PI * 2);
}
function ax(r, e, t) {
  return {
    x: r * Math.cos(t),
    y: e * Math.sin(t)
  };
}
function ix(r, e, t) {
  var n = Math.cos(t), a = Math.sin(t);
  return [r * n - e * a, r * a + e * n];
}
const c6 = {
  /**
   * 计算包围盒
   * @param {number} cx         圆心 x
   * @param {number} cy         圆心 y
   * @param {number} rx         x 轴方向的半径
   * @param {number} ry         y 轴方向的半径
   * @param {number} xRotation  旋转角度
   * @param {number} startAngle 起始角度
   * @param {number} endAngle   结束角度
   * @return {object} 包围盒对象
   */
  box: function(r, e, t, n, a, i, o) {
    for (var s = u6(t, n, a), u = 1 / 0, f = -1 / 0, l = [i, o], c = -Math.PI * 2; c <= Math.PI * 2; c += Math.PI) {
      var h = s + c;
      i < o ? i < h && h < o && l.push(h) : o < h && h < i && l.push(h);
    }
    for (var c = 0; c < l.length; c++) {
      var d = rx(r, e, t, n, a, l[c]);
      d < u && (u = d), d > f && (f = d);
    }
    for (var v = f6(t, n, a), p = 1 / 0, g = -1 / 0, y = [i, o], c = -Math.PI * 2; c <= Math.PI * 2; c += Math.PI) {
      var m = v + c;
      i < o ? i < m && m < o && y.push(m) : o < m && m < i && y.push(m);
    }
    for (var c = 0; c < y.length; c++) {
      var b = nx(r, e, t, n, a, y[c]);
      b < p && (p = b), b > g && (g = b);
    }
    return {
      x: u,
      y: p,
      width: f - u,
      height: g - p
    };
  },
  /**
   * 获取圆弧的长度，计算圆弧长度时不考虑旋转角度，
   * 仅跟 rx, ry, startAngle, endAngle 相关
   * @param {number} cx         圆心 x
   * @param {number} cy         圆心 y
   * @param {number} rx         x 轴方向的半径
   * @param {number} ry         y 轴方向的半径
   * @param {number} xRotation  旋转角度
   * @param {number} startAngle 起始角度
   * @param {number} endAngle   结束角度
   */
  length: function(r, e, t, n, a, i, o) {
  },
  /**
   * 获取指定点到圆弧的最近距离的点
   * @param {number} cx         圆心 x
   * @param {number} cy         圆心 y
   * @param {number} rx         x 轴方向的半径
   * @param {number} ry         y 轴方向的半径
   * @param {number} xRotation  旋转角度
   * @param {number} startAngle 起始角度
   * @param {number} endAngle   结束角度
   * @param {number} x0         指定点的 x
   * @param {number} y0         指定点的 y
   * @return {object} 到指定点最近距离的点
   */
  nearestPoint: function(r, e, t, n, a, i, o, s, u) {
    var f = ix(s - r, u - e, -a), l = f[0], c = f[1], h = i6.nearestPoint(0, 0, t, n, l, c), d = l6(t, n, h.x, h.y);
    d < i ? h = ax(t, n, i) : d > o && (h = ax(t, n, o));
    var v = ix(h.x, h.y, a);
    return {
      x: v[0] + r,
      y: v[1] + e
    };
  },
  pointDistance: function(r, e, t, n, a, i, o, s, u) {
    var f = this.nearestPoint(r, e, t, n, s, u);
    return wn(f.x, f.y, s, u);
  },
  pointAt: function(r, e, t, n, a, i, o, s) {
    var u = (o - i) * s + i;
    return {
      x: rx(r, e, t, n, a, u),
      y: nx(r, e, t, n, a, u)
    };
  },
  tangentAngle: function(r, e, t, n, a, i, o, s) {
    var u = (o - i) * s + i, f = o6(r, e, t, n, a, i, o, u), l = s6(r, e, t, n, a, i, o, u);
    return fd(Math.atan2(l, f));
  }
};
function mC(r) {
  for (var e = 0, t = [], n = 0; n < r.length - 1; n++) {
    var a = r[n], i = r[n + 1], o = wn(a[0], a[1], i[0], i[1]), s = {
      from: a,
      to: i,
      length: o
    };
    t.push(s), e += o;
  }
  return { segments: t, totalLength: e };
}
function h6(r) {
  if (r.length < 2)
    return 0;
  for (var e = 0, t = 0; t < r.length - 1; t++) {
    var n = r[t], a = r[t + 1];
    e += wn(n[0], n[1], a[0], a[1]);
  }
  return e;
}
function d6(r, e) {
  if (e > 1 || e < 0 || r.length < 2)
    return null;
  var t = mC(r), n = t.segments, a = t.totalLength;
  if (a === 0)
    return {
      x: r[0][0],
      y: r[0][1]
    };
  for (var i = 0, o = null, s = 0; s < n.length; s++) {
    var u = n[s], f = u.from, l = u.to, c = u.length / a;
    if (e >= i && e <= i + c) {
      var h = (e - i) / c;
      o = dn.pointAt(f[0], f[1], l[0], l[1], h);
      break;
    }
    i += c;
  }
  return o;
}
function v6(r, e) {
  if (e > 1 || e < 0 || r.length < 2)
    return 0;
  for (var t = mC(r), n = t.segments, a = t.totalLength, i = 0, o = 0, s = 0; s < n.length; s++) {
    var u = n[s], f = u.from, l = u.to, c = u.length / a;
    if (e >= i && e <= i + c) {
      o = Math.atan2(l[1] - f[1], l[0] - f[0]);
      break;
    }
    i += c;
  }
  return o;
}
function p6(r, e, t) {
  for (var n = 1 / 0, a = 0; a < r.length - 1; a++) {
    var i = r[a], o = r[a + 1], s = dn.pointDistance(i[0], i[1], o[0], o[1], e, t);
    s < n && (n = s);
  }
  return n;
}
const bC = {
  /**
   * 计算多折线的包围盒
   * @param {array} points 点的集合 [x,y] 的形式
   * @return {object} 包围盒
   */
  box: function(r) {
    for (var e = [], t = [], n = 0; n < r.length; n++) {
      var a = r[n];
      e.push(a[0]), t.push(a[1]);
    }
    return gu(e, t);
  },
  /**
   * 计算多折线的长度
   * @param {array} points 点的集合 [x,y] 的形式
   * @return {object} 多条边的长度
   */
  length: function(r) {
    return h6(r);
  },
  /**
   * 根据比例获取多折线的点
   * @param {array} points 点的集合 [x,y] 的形式
   * @param {number} t 在多折线的长度上的比例
   * @return {object} 根据比例值计算出来的点
   */
  pointAt: function(r, e) {
    return d6(r, e);
  },
  /**
   * 指定点到多折线的距离
   * @param {array} points 点的集合 [x,y] 的形式
   * @param {number} x 指定点的 x
   * @param {number} y 指定点的 y
   * @return {number} 点到多折线的距离
   */
  pointDistance: function(r, e, t) {
    return p6(r, e, t);
  },
  /**
   * 根据比例获取多折线的切线角度
   * @param {array} points 点的集合 [x,y] 的形式
   * @param {number} t 在多折线的长度上的比例
   * @return {object} 根据比例值计算出来的角度
   */
  tangentAngle: function(r, e) {
    return v6(r, e);
  }
};
function ox(r, e) {
  return !r || !e ? r || e : {
    minX: Math.min(r.minX, e.minX),
    minY: Math.min(r.minY, e.minY),
    maxX: Math.max(r.maxX, e.maxX),
    maxY: Math.max(r.maxY, e.maxY)
  };
}
function Ny(r, e) {
  var t = r.get("startArrowShape"), n = r.get("endArrowShape"), a = null, i = null;
  return t && (a = t.getCanvasBBox(), e = ox(e, a)), n && (i = n.getCanvasBBox(), e = ox(e, i)), e;
}
function g6(r) {
  for (var e = r.attr(), t = e.points, n = [], a = [], i = 0; i < t.length; i++) {
    var o = t[i];
    n.push(o[0]), a.push(o[1]);
  }
  var s = gu(n, a), u = s.x, f = s.y, l = s.width, c = s.height, h = {
    minX: u,
    minY: f,
    maxX: u + l,
    maxY: f + c
  };
  return h = Ny(r, h), {
    x: h.minX,
    y: h.minY,
    width: h.maxX - h.minX,
    height: h.maxY - h.minY
  };
}
function y6(r) {
  for (var e = r.attr(), t = e.points, n = [], a = [], i = 0; i < t.length; i++) {
    var o = t[i];
    n.push(o[0]), a.push(o[1]);
  }
  return gu(n, a);
}
var vp = null;
function EC() {
  if (!vp) {
    var r = document.createElement("canvas");
    r.width = 1, r.height = 1, vp = r.getContext("2d");
  }
  return vp;
}
function xC(r, e, t) {
  var n = 1;
  if (He(r) && (n = r.split(`
`).length), n > 1) {
    var a = m6(e, t);
    return e * n + a * (n - 1);
  }
  return e;
}
function m6(r, e) {
  return e ? e - r : r * 0.14;
}
function b6(r, e) {
  var t = EC(), n = 0;
  if (Zt(r) || r === "")
    return n;
  if (t.save(), t.font = e, He(r) && r.includes(`
`)) {
    var a = r.split(`
`);
    Se(a, function(i) {
      var o = t.measureText(i).width;
      n < o && (n = o);
    });
  } else
    n = t.measureText(r).width;
  return t.restore(), n;
}
function wC(r) {
  var e = r.fontSize, t = r.fontFamily, n = r.fontWeight, a = r.fontStyle, i = r.fontVariant;
  return [a, i, n, e + "px", t].join(" ").trim();
}
function E6(r) {
  var e = r.attr(), t = e.x, n = e.y, a = e.text, i = e.fontSize, o = e.lineHeight, s = e.font;
  s || (s = wC(e));
  var u = b6(a, s), f;
  if (!u)
    f = {
      x: t,
      y: n,
      width: 0,
      height: 0
    };
  else {
    var l = e.textAlign, c = e.textBaseline, h = xC(a, i, o), d = {
      x: t,
      y: n - h
    };
    l && (l === "end" || l === "right" ? d.x -= u : l === "center" && (d.x -= u / 2)), c && (c === "top" ? d.y += h : c === "middle" && (d.y += h / 2)), f = {
      x: d.x,
      y: d.y,
      width: u,
      height: h
    };
  }
  return f;
}
var x6 = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig, w6 = /[^\s\,]+/ig;
function _6(r) {
  var e = r || [];
  if (bt(e))
    return e;
  if (He(e))
    return e = e.match(x6), Se(e, function(t, n) {
      if (t = t.match(w6), t[0].length > 1) {
        var a = t[0].charAt(0);
        t.splice(1, 0, t[0].substr(1)), t[0] = a;
      }
      Se(t, function(i, o) {
        isNaN(i) || (t[o] = +i);
      }), e[n] = t;
    }), e;
}
function M6(r, e, t, n) {
  var a = [], i = !!n, o, s, u, f, l, c, h;
  if (i) {
    u = n[0], f = n[1];
    for (var d = 0, v = r.length; d < v; d += 1) {
      var p = r[d];
      u = Ui([0, 0], u, p), f = ji([0, 0], f, p);
    }
  }
  for (var d = 0, g = r.length; d < g; d += 1) {
    var p = r[d];
    if (d === 0 && !t)
      h = p;
    else if (d === g - 1 && !t)
      c = p, a.push(h), a.push(c);
    else {
      var y = [d ? d - 1 : g - 1, d - 1][t ? 0 : 1];
      o = r[y], s = r[t ? (d + 1) % g : d + 1];
      var m = [0, 0];
      m = Vc(m, s, o), m = xn(m, m, e);
      var b = bh(p, o), E = bh(p, s), x = b + E;
      x !== 0 && (b /= x, E /= x);
      var w = xn([0, 0], m, -b), _ = xn([0, 0], m, E);
      c = cn([0, 0], p, w), l = cn([0, 0], p, _), l = Ui([0, 0], l, ji([0, 0], s, p)), l = ji([0, 0], l, Ui([0, 0], s, p)), w = Vc([0, 0], l, p), w = xn([0, 0], w, -b / E), c = cn([0, 0], p, w), c = Ui([0, 0], c, ji([0, 0], o, p)), c = ji([0, 0], c, Ui([0, 0], o, p)), _ = Vc([0, 0], p, c), _ = xn([0, 0], _, E / b), l = cn([0, 0], p, _), i && (c = ji([0, 0], c, u), c = Ui([0, 0], c, f), l = ji([0, 0], l, u), l = Ui([0, 0], l, f)), a.push(h), a.push(c), h = l;
    }
  }
  return t && a.push(a.shift()), a;
}
function S6(r, e, t) {
  e === void 0 && (e = !1), t === void 0 && (t = [
    [0, 0],
    [1, 1]
  ]);
  for (var n = !!e, a = [], i = 0, o = r.length; i < o; i += 2)
    a.push([r[i], r[i + 1]]);
  for (var s = M6(a, 0.4, n, t), u = a.length, f = [], l, c, h, i = 0; i < u - 1; i += 1)
    l = s[i * 2], c = s[i * 2 + 1], h = a[i + 1], f.push(["C", l[0], l[1], c[0], c[1], h[0], h[1]]);
  return n && (l = s[u], c = s[u + 1], h = a[0], f.push(["C", l[0], l[1], c[0], c[1], h[0], h[1]])), f;
}
var pf = `	
\v\f\r   ᠎             　\u2028\u2029`, A6 = new RegExp("([a-z])[" + pf + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + pf + "]*,?[" + pf + "]*)+)", "ig"), C6 = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + pf + "]*,?[" + pf + "]*", "ig");
function U0(r) {
  if (!r)
    return null;
  if (bt(r))
    return r;
  var e = {
    a: 7,
    c: 6,
    o: 2,
    h: 1,
    l: 2,
    m: 2,
    r: 4,
    q: 4,
    s: 4,
    t: 2,
    v: 1,
    u: 3,
    z: 0
  }, t = [];
  return String(r).replace(A6, function(n, a, i) {
    var o = [], s = a.toLowerCase();
    if (i.replace(C6, function(u, f) {
      f && o.push(+f);
    }), s === "m" && o.length > 2 && (t.push([a].concat(o.splice(0, 2))), s = "l", a = a === "m" ? "l" : "L"), s === "o" && o.length === 1 && t.push([a, o[0]]), s === "r")
      t.push([a].concat(o));
    else
      for (; o.length >= e[s] && (t.push([a].concat(o.splice(0, e[s]))), !!e[s]); )
        ;
    return "";
  }), t;
}
var T6 = /[a-z]/;
function sx(r, e) {
  return [
    e[0] + (e[0] - r[0]),
    e[1] + (e[1] - r[1])
  ];
}
function _C(r) {
  var e = U0(r);
  if (!e || !e.length)
    return [
      ["M", 0, 0]
    ];
  for (var t = !1, n = 0; n < e.length; n++) {
    var a = e[n][0];
    if (T6.test(a) || ["V", "H", "T", "S"].indexOf(a) >= 0) {
      t = !0;
      break;
    }
  }
  if (!t)
    return e;
  var i = [], o = 0, s = 0, u = 0, f = 0, l = 0, c = e[0];
  (c[0] === "M" || c[0] === "m") && (o = +c[1], s = +c[2], u = o, f = s, l++, i[0] = ["M", o, s]);
  for (var n = l, h = e.length; n < h; n++) {
    var d = e[n], v = i[n - 1], p = [], a = d[0], g = a.toUpperCase();
    if (a !== g)
      switch (p[0] = g, g) {
        case "A":
          p[1] = d[1], p[2] = d[2], p[3] = d[3], p[4] = d[4], p[5] = d[5], p[6] = +d[6] + o, p[7] = +d[7] + s;
          break;
        case "V":
          p[1] = +d[1] + s;
          break;
        case "H":
          p[1] = +d[1] + o;
          break;
        case "M":
          u = +d[1] + o, f = +d[2] + s, p[1] = u, p[2] = f;
          break;
        default:
          for (var y = 1, m = d.length; y < m; y++)
            p[y] = +d[y] + (y % 2 ? o : s);
      }
    else
      p = e[n];
    switch (g) {
      case "Z":
        o = +u, s = +f;
        break;
      case "H":
        o = p[1], p = ["L", o, s];
        break;
      case "V":
        s = p[1], p = ["L", o, s];
        break;
      case "T":
        o = p[1], s = p[2];
        var b = sx([v[1], v[2]], [v[3], v[4]]);
        p = ["Q", b[0], b[1], o, s];
        break;
      case "S":
        o = p[p.length - 2], s = p[p.length - 1];
        var E = v.length, x = sx([v[E - 4], v[E - 3]], [v[E - 2], v[E - 1]]);
        p = ["C", x[0], x[1], p[1], p[2], o, s];
        break;
      case "M":
        u = p[p.length - 2], f = p[p.length - 1];
        break;
      default:
        o = p[p.length - 2], s = p[p.length - 1];
    }
    i.push(p);
  }
  return i;
}
function ac(r) {
  return Math.sqrt(r[0] * r[0] + r[1] * r[1]);
}
function j0(r, e) {
  return ac(r) * ac(e) ? (r[0] * e[0] + r[1] * e[1]) / (ac(r) * ac(e)) : 1;
}
function ux(r, e) {
  return (r[0] * e[1] < r[1] * e[0] ? -1 : 1) * Math.acos(j0(r, e));
}
function $0(r, e) {
  return r[0] === e[0] && r[1] === e[1];
}
function I6(r, e) {
  var t = e[1], n = e[2], a = nd(ad(e[3]), Math.PI * 2), i = e[4], o = e[5], s = r[0], u = r[1], f = e[6], l = e[7], c = Math.cos(a) * (s - f) / 2 + Math.sin(a) * (u - l) / 2, h = -1 * Math.sin(a) * (s - f) / 2 + Math.cos(a) * (u - l) / 2, d = c * c / (t * t) + h * h / (n * n);
  d > 1 && (t *= Math.sqrt(d), n *= Math.sqrt(d));
  var v = t * t * (h * h) + n * n * (c * c), p = v ? Math.sqrt((t * t * (n * n) - v) / v) : 1;
  i === o && (p *= -1), isNaN(p) && (p = 0);
  var g = n ? p * t * h / n : 0, y = t ? p * -n * c / t : 0, m = (s + f) / 2 + Math.cos(a) * g - Math.sin(a) * y, b = (u + l) / 2 + Math.sin(a) * g + Math.cos(a) * y, E = [(c - g) / t, (h - y) / n], x = [(-1 * c - g) / t, (-1 * h - y) / n], w = ux([1, 0], E), _ = ux(E, x);
  return j0(E, x) <= -1 && (_ = Math.PI), j0(E, x) >= 1 && (_ = 0), o === 0 && _ > 0 && (_ = _ - 2 * Math.PI), o === 1 && _ < 0 && (_ = _ + 2 * Math.PI), {
    cx: m,
    cy: b,
    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理
    rx: $0(r, [f, l]) ? 0 : t,
    ry: $0(r, [f, l]) ? 0 : n,
    startAngle: w,
    endAngle: w + _,
    xRotation: a,
    arcFlag: i,
    sweepFlag: o
  };
}
function fx(r, e) {
  return [e[0] + (e[0] - r[0]), e[1] + (e[1] - r[1])];
}
function MC(r) {
  r = _6(r);
  for (var e = [], t = null, n = null, a = null, i = 0, o = r.length, s = 0; s < o; s++) {
    var u = r[s];
    n = r[s + 1];
    var f = u[0], l = {
      command: f,
      prePoint: t,
      params: u,
      startTangent: null,
      endTangent: null
    };
    switch (f) {
      case "M":
        a = [u[1], u[2]], i = s;
        break;
      case "A":
        var c = I6(t, u);
        l.arcParams = c;
        break;
    }
    if (f === "Z")
      t = a, n = r[i + 1];
    else {
      var h = u.length;
      t = [u[h - 2], u[h - 1]];
    }
    n && n[0] === "Z" && (n = r[i], e[i] && (e[i].prePoint = t)), l.currentPoint = t, e[i] && $0(t, e[i].currentPoint) && (e[i].prePoint = l.prePoint);
    var d = n ? [n[n.length - 2], n[n.length - 1]] : null;
    l.nextPoint = d;
    var v = l.prePoint;
    if (["L", "H", "V"].includes(f))
      l.startTangent = [v[0] - t[0], v[1] - t[1]], l.endTangent = [t[0] - v[0], t[1] - v[1]];
    else if (f === "Q") {
      var p = [u[1], u[2]];
      l.startTangent = [v[0] - p[0], v[1] - p[1]], l.endTangent = [t[0] - p[0], t[1] - p[1]];
    } else if (f === "T") {
      var g = e[s - 1], p = fx(g.currentPoint, v);
      g.command === "Q" ? (l.command = "Q", l.startTangent = [v[0] - p[0], v[1] - p[1]], l.endTangent = [t[0] - p[0], t[1] - p[1]]) : (l.command = "TL", l.startTangent = [v[0] - t[0], v[1] - t[1]], l.endTangent = [t[0] - v[0], t[1] - v[1]]);
    } else if (f === "C") {
      var y = [u[1], u[2]], m = [u[3], u[4]];
      l.startTangent = [v[0] - y[0], v[1] - y[1]], l.endTangent = [t[0] - m[0], t[1] - m[1]], l.startTangent[0] === 0 && l.startTangent[1] === 0 && (l.startTangent = [y[0] - m[0], y[1] - m[1]]), l.endTangent[0] === 0 && l.endTangent[1] === 0 && (l.endTangent = [m[0] - y[0], m[1] - y[1]]);
    } else if (f === "S") {
      var g = e[s - 1], y = fx(g.currentPoint, v), m = [u[1], u[2]];
      g.command === "C" ? (l.command = "C", l.startTangent = [v[0] - y[0], v[1] - y[1]], l.endTangent = [t[0] - m[0], t[1] - m[1]]) : (l.command = "SQ", l.startTangent = [v[0] - m[0], v[1] - m[1]], l.endTangent = [t[0] - m[0], t[1] - m[1]]);
    } else if (f === "A") {
      var b = 1e-3, E = l.arcParams || {}, x = E.cx, w = x === void 0 ? 0 : x, _ = E.cy, M = _ === void 0 ? 0 : _, A = E.rx, S = A === void 0 ? 0 : A, T = E.ry, C = T === void 0 ? 0 : T, O = E.sweepFlag, L = O === void 0 ? 0 : O, R = E.startAngle, P = R === void 0 ? 0 : R, z = E.endAngle, V = z === void 0 ? 0 : z;
      L === 0 && (b *= -1);
      var N = S * Math.cos(P - b) + w, F = C * Math.sin(P - b) + M;
      l.startTangent = [N - a[0], F - a[1]];
      var q = S * Math.cos(P + V + b) + w, te = C * Math.sin(P + V - b) + M;
      l.endTangent = [v[0] - q, v[1] - te];
    }
    e.push(l);
  }
  return e;
}
function O6(r, e) {
  for (var t = [], n = [], a = [], i = 0; i < r.length; i++) {
    var o = r[i], s = o.currentPoint, u = o.params, f = o.prePoint, l = void 0;
    switch (o.command) {
      case "Q":
        l = gC.box(f[0], f[1], u[1], u[2], u[3], u[4]);
        break;
      case "C":
        l = vf.box(f[0], f[1], u[1], u[2], u[3], u[4], u[5], u[6]);
        break;
      case "A":
        var c = o.arcParams;
        l = c6.box(c.cx, c.cy, c.rx, c.ry, c.xRotation, c.startAngle, c.endAngle);
        break;
      default:
        t.push(s[0]), n.push(s[1]);
        break;
    }
    l && (o.box = l, t.push(l.x, l.x + l.width), n.push(l.y, l.y + l.height)), e && (o.command === "L" || o.command === "M") && o.prePoint && o.nextPoint && a.push(o);
  }
  t = t.filter(function(y) {
    return !Number.isNaN(y) && y !== 1 / 0 && y !== -1 / 0;
  }), n = n.filter(function(y) {
    return !Number.isNaN(y) && y !== 1 / 0 && y !== -1 / 0;
  });
  var h = Ja(t), d = Ja(n), v = Qa(t), p = Qa(n);
  if (a.length === 0)
    return {
      x: h,
      y: d,
      width: v - h,
      height: p - d
    };
  for (var i = 0; i < a.length; i++) {
    var o = a[i], s = o.currentPoint, g = void 0;
    s[0] === h ? (g = ic(o, e), h = h - g.xExtra) : s[0] === v && (g = ic(o, e), v = v + g.xExtra), s[1] === d ? (g = ic(o, e), d = d - g.yExtra) : s[1] === p && (g = ic(o, e), p = p + g.yExtra);
  }
  return {
    x: h,
    y: d,
    width: v - h,
    height: p - d
  };
}
function ic(r, e) {
  var t = r.prePoint, n = r.currentPoint, a = r.nextPoint, i = Math.pow(n[0] - t[0], 2) + Math.pow(n[1] - t[1], 2), o = Math.pow(n[0] - a[0], 2) + Math.pow(n[1] - a[1], 2), s = Math.pow(t[0] - a[0], 2) + Math.pow(t[1] - a[1], 2), u = Math.acos((i + o - s) / (2 * Math.sqrt(i) * Math.sqrt(o)));
  if (!u || Math.sin(u) === 0 || CM(u, 0))
    return {
      xExtra: 0,
      yExtra: 0
    };
  var f = Math.abs(Math.atan2(a[1] - n[1], a[0] - n[0])), l = Math.abs(Math.atan2(a[0] - n[0], a[1] - n[1]));
  f = f > Math.PI / 2 ? Math.PI - f : f, l = l > Math.PI / 2 ? Math.PI - l : l;
  var c = {
    // 水平方向投影
    xExtra: Math.cos(u / 2 - f) * (e / 2 * (1 / Math.sin(u / 2))) - e / 2 || 0,
    // 垂直方向投影
    yExtra: Math.cos(l - u / 2) * (e / 2 * (1 / Math.sin(u / 2))) - e / 2 || 0
  };
  return c;
}
function D6(r) {
  var e = r.attr(), t = e.path, n = e.stroke, a = n ? e.lineWidth : 0, i = r.get("segments") || MC(t), o = O6(i, a), s = o.x, u = o.y, f = o.width, l = o.height, c = {
    minX: s,
    minY: u,
    maxX: s + f,
    maxY: u + l
  };
  return c = Ny(r, c), {
    x: c.minX,
    y: c.minY,
    width: c.maxX - c.minX,
    height: c.maxY - c.minY
  };
}
function L6(r) {
  var e = r.attr(), t = e.x1, n = e.y1, a = e.x2, i = e.y2, o = Math.min(t, a), s = Math.max(t, a), u = Math.min(n, i), f = Math.max(n, i), l = {
    minX: o,
    maxX: s,
    minY: u,
    maxY: f
  };
  return l = Ny(r, l), {
    x: l.minX,
    y: l.minY,
    width: l.maxX - l.minX,
    height: l.maxY - l.minY
  };
}
function N6(r) {
  var e = r.attr(), t = e.x, n = e.y, a = e.rx, i = e.ry;
  return {
    x: t - a,
    y: n - i,
    width: a * 2,
    height: i * 2
  };
}
ti("rect", hC);
ti("image", hC);
ti("circle", dC);
ti("marker", dC);
ti("polyline", g6);
ti("polygon", y6);
ti("text", E6);
ti("path", D6);
ti("line", L6);
ti("ellipse", N6);
var P6 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t, n) {
      var a = r.call(this, t, n) || this;
      return a.item = n.item, a.canvasX = n.canvasX, a.canvasY = n.canvasY, a.wheelDelta = n.wheelDelta, a.detail = n.detail, a;
    }
    return e;
  }(zA)
), W0 = function(e) {
  return "".concat(e, "-").concat(Math.random()).concat(Date.now());
}, Py = function(e) {
  if (bt(e))
    switch (e.length) {
      case 4:
        return e;
      case 3:
        return e.push(e[1]), e;
      case 2:
        return e.concat(e);
      case 1:
        return [e[0], e[0], e[0], e[0]];
      default:
        return [0, 0, 0, 0];
    }
  if (Pt(e))
    return [e, e, e, e];
  if (He(e)) {
    var t = parseInt(e, 10);
    return [t, t, t, t];
  }
  return [0, 0, 0, 0];
}, k6 = function(e) {
  var t = new P6(e.type, e);
  return t.clientX = e.clientX, t.clientY = e.clientY, t.x = e.x, t.y = e.y, t.target = e.target, t.currentTarget = e.currentTarget, t.bubbles = !0, t.item = e.item, t;
}, R6 = function(e) {
  if (!e)
    return !1;
  for (var t = 9, n = [1, 0, 0, 0, 1, 0, 0, 0, 1], a = 0; a < t; a++)
    if (e[a] !== n[a])
      return !0;
  return !1;
}, ja = function(e) {
  return Number.isNaN(Number(e));
}, SC = function(e) {
  for (var t = 1 / 0, n = -1 / 0, a = 1 / 0, i = -1 / 0, o = 0; o < e.length; o++) {
    var s = e[o], u = s.getBBox(), f = u.minX, l = u.minY, c = u.maxX, h = u.maxY;
    f < t && (t = f), l < a && (a = l), c > n && (n = c), h > i && (i = h);
  }
  var d = Math.floor(t), v = Math.floor(a), p = Math.ceil(n) - Math.floor(t), g = Math.ceil(i) - Math.floor(a);
  return {
    x: d,
    y: v,
    width: p,
    height: g,
    minX: t,
    minY: a,
    maxX: n,
    maxY: i
  };
}, B6 = function(e, t, n, a, i) {
  t === void 0 && (t = 15), n === void 0 && (n = "quadratic"), a === void 0 && (a = void 0), i === void 0 && (i = void 0);
  for (var o = e.length, s = t * 2, u = ["top", "top-right", "right", "bottom-right", "bottom", "bottom-left", "left", "top-left"], f = {}, l = [], c = {}, h = 0; h < o; h++) {
    var d = e[h], v = d.source, p = d.target, g = "".concat(v, "-").concat(p);
    if (!l[h]) {
      f[g] || (f[g] = []), l[h] = !0, f[g].push(d);
      for (var y = 0; y < o; y++)
        if (h !== y) {
          var m = e[y], b = m.source, E = m.target;
          l[y] || (v === E && p === b ? (f[g].push(m), l[y] = !0, c["".concat(b, "|").concat(E, "|").concat(f[g].length - 1)] = !0) : v === b && p === E && (f[g].push(m), l[y] = !0));
        }
    }
  }
  for (var x in f)
    for (var w = f[x], _ = w.length, M = 0; M < _; M++) {
      var A = w[M];
      if (A.source === A.target) {
        i && (A.type = i), A.loopCfg = {
          position: u[M % 8],
          dist: Math.floor(M / 8) * 20 + 50
        };
        continue;
      }
      if (_ === 1 && a && A.source !== A.target) {
        A.type = a;
        continue;
      }
      A.type = n;
      var S = (M % 2 === 0 ? 1 : -1) * (c["".concat(A.source, "|").concat(A.target, "|").concat(M)] ? -1 : 1);
      _ % 2 === 1 ? A.curveOffset = S * Math.ceil(M / 2) * s : A.curveOffset = S * (Math.floor(M / 2) * s + t);
    }
  return e;
};
const F6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  calculationItemsBBox: SC,
  cloneEvent: k6,
  formatPadding: Py,
  isNaN: ja,
  isViewportChanged: R6,
  processParallelEdges: B6,
  uniqueId: W0
}, Symbol.toStringTag, { value: "Module" }));
var be = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Ai(r) {
  return r && r.__esModule && Object.prototype.hasOwnProperty.call(r, "default") ? r.default : r;
}
function ri(r) {
  if (r.__esModule)
    return r;
  var e = r.default;
  if (typeof e == "function") {
    var t = function n() {
      return this instanceof n ? Reflect.construct(e, arguments, this.constructor) : e.apply(this, arguments);
    };
    t.prototype = e.prototype;
  } else
    t = {};
  return Object.defineProperty(t, "__esModule", { value: !0 }), Object.keys(r).forEach(function(n) {
    var a = Object.getOwnPropertyDescriptor(r, n);
    Object.defineProperty(t, n, a.get ? a : {
      enumerable: !0,
      get: function() {
        return r[n];
      }
    });
  }), t;
}
var oo = {};
const G6 = /* @__PURE__ */ ri(h4);
Object.defineProperty(oo, "__esModule", { value: !0 });
var Ji = G6;
function AC(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return Ji.mat3.fromTranslation(n, t), Ji.mat3.multiply(r, n, e);
}
oo.leftTranslate = AC;
function CC(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return Ji.mat3.fromRotation(n, t), Ji.mat3.multiply(r, n, e);
}
oo.leftRotate = CC;
function TC(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return Ji.mat3.fromScaling(n, t), Ji.mat3.multiply(r, n, e);
}
oo.leftScale = TC;
function z6(r, e, t) {
  return Ji.mat3.multiply(r, t, e);
}
function U6(r, e) {
  for (var t = r ? [].concat(r) : [1, 0, 0, 0, 1, 0, 0, 0, 1], n = 0, a = e.length; n < a; n++) {
    var i = e[n];
    switch (i[0]) {
      case "t":
        AC(t, t, [i[1], i[2]]);
        break;
      case "s":
        TC(t, t, [i[1], i[2]]);
        break;
      case "r":
        CC(t, t, i[1]);
        break;
      case "m":
        z6(t, t, i[1]);
        break;
    }
  }
  return t;
}
var lx = oo.transform = U6;
function IC(r, e) {
  return r[0] * e[1] - e[0] * r[1];
}
oo.direction = IC;
function j6(r, e, t) {
  var n = Ji.vec2.angle(r, e), a = IC(r, e) >= 0;
  return t ? a ? Math.PI * 2 - n : n : a ? n : Math.PI * 2 - n;
}
oo.angleTo = j6;
function $6(r, e, t) {
  return t ? (r[0] = e[1], r[1] = -1 * e[0]) : (r[0] = -1 * e[1], r[1] = e[0]), r;
}
oo.vertical = $6;
var W6 = (
  /** @class */
  function() {
    function r(e) {
      this.destroyed = !1, this.graph = e, this.destroyed = !1;
    }
    return r.prototype.getViewCenter = function() {
      var e = this.getFormatPadding(), t = this.graph, n = this.graph.get("width"), a = t.get("height");
      return {
        x: (n - e[1] - e[3]) / 2 + e[3],
        y: (a - e[0] - e[2]) / 2 + e[0]
      };
    }, r.prototype.fitCenter = function(e, t) {
      var n = this.graph, a = n.get("group"), i, o = n.getNodes();
      if (o.length > n.get("optimizeThreshold")) {
        var s = 1 / 0, u = 1 / 0, f = -1 / 0, l = -1 / 0;
        o.forEach(function(E) {
          var x = E.getModel(), w = x.x, _ = x.y;
          s > w && (s = w), u > _ && (u = _), f < w && (f = w), l < _ && (l = _);
        });
        var c = a.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1], h = $s({
          x: s,
          y: u
        }, c), d = h.x, v = h.y, p = $s({
          x: f,
          y: l
        }, c), g = p.x, y = p.y;
        i = {
          minX: d,
          maxX: g,
          minY: v,
          maxY: y,
          width: g - d,
          height: y - v,
          x: d,
          y: v
        };
      } else
        i = a.getCanvasBBox();
      if (!(i.width === 0 || i.height === 0)) {
        var m = this.getViewCenter(), b = {
          x: i.x + i.width / 2,
          y: i.y + i.height / 2
        };
        n.translate(m.x - b.x, m.y - b.y, e, t);
      }
    }, r.prototype.animatedFitView = function(e, t, n, a, i, o, s, u) {
      var f = this.graph;
      n = n || {
        duration: 500,
        easing: "easeCubic"
      };
      var l = [1, 0, 0, 0, 1, 0, 0, 0, 1], c = a.x + i.x - o.x - a.minX, h = a.y + i.y - o.y - a.minY;
      if (!(ja(c) || ja(h))) {
        var d = lx(l, [["t", c, h]]);
        if (!u) {
          var v = Cf({
            animateCfg: n,
            callback: function() {
              f.emit("viewportchange", {
                action: "translate",
                matrix: d
              });
            }
          });
          e.animate(function(E) {
            return {
              matrix: x0(t, d, E)
            };
          }, v);
          return;
        }
        var p = f.get("minZoom"), g = f.get("maxZoom"), y = s;
        p && s < p ? (y = p, console.warn("fitview failed, ratio out of range, ratio: %f", s, "graph minzoom has been used instead")) : g && s > g && (y = g, console.warn("fitview failed, ratio out of range, ratio: %f", s, "graph maxzoom has been used instead"));
        var m = lx(d, [["t", -i.x, -i.y], ["s", y, y], ["t", i.x, i.y]]), b = Cf({
          animateCfg: n,
          callback: function() {
            e.setMatrix(m), f.emit("viewportchange", {
              action: "translate",
              matrix: d
            }), f.emit("viewportchange", {
              action: "zoom",
              matrix: m
            });
          }
        });
        e.stopAnimate(), e.setMatrix(t), e.animate(function(E) {
          return {
            matrix: x0(t, m, E)
          };
        }, b);
      }
    }, r.prototype.fitView = function(e, t) {
      var n = this.graph, a = this.getFormatPadding(), i = n.get("width"), o = n.get("height"), s = n.get("group"), u = s.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];
      s.resetMatrix();
      var f, l = n.getNodes();
      if (l.length > n.get("optimizeThreshold")) {
        var c = 1 / 0, h = 1 / 0, d = -1 / 0, v = -1 / 0;
        l.forEach(function(w) {
          var _ = w.getModel(), M = _.x, A = _.y;
          c > M && (c = M), h > A && (h = A), d < M && (d = M), v < A && (v = A);
        }), f = {
          minX: c,
          maxX: d,
          minY: h,
          maxY: v,
          width: d - c,
          height: v - h,
          x: c,
          y: h
        };
      } else
        f = s.getCanvasBBox();
      if (!(f.width === 0 || f.height === 0)) {
        var p = this.getViewCenter(), g = {
          x: f.x + f.width / 2,
          y: f.y + f.height / 2
        }, y = (i - a[1] - a[3]) / f.width, m = (o - a[0] - a[2]) / f.height, b = y;
        if (y > m && (b = m), e)
          this.animatedFitView(s, u, t, f, p, g, b, !0);
        else {
          var E = p.x - g.x, x = p.y - g.y;
          if (ja(E) || ja(x))
            return;
          n.translate(E, x), n.zoom(b, p) || console.warn("zoom failed, ratio out of range, ratio: %f", b);
        }
      }
    }, r.prototype.fitViewByRules = function(e, t, n) {
      var a = e.onlyOutOfViewPort, i = a === void 0 ? !1 : a, o = e.direction, s = o === void 0 ? "both" : o, u = e.ratioRule, f = u === void 0 ? "min" : u, l = this.graph, c = this.getFormatPadding(), h = l.get("width"), d = l.get("height"), v = l.get("group"), p = v.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];
      v.resetMatrix();
      var g, y = l.getNodes();
      if (y.length > l.get("optimizeThreshold")) {
        var m = 1 / 0, b = 1 / 0, E = -1 / 0, x = -1 / 0;
        y.forEach(function(L) {
          var R = L.getModel(), P = R.x, z = R.y;
          m > P && (m = P), b > z && (b = z), E < P && (E = P), x < z && (x = z);
        }), g = {
          minX: m,
          maxX: E,
          minY: b,
          maxY: x,
          width: E - m,
          height: x - b,
          x: m,
          y: b
        };
      } else
        g = v.getCanvasBBox();
      if (!(g.width === 0 || g.height === 0)) {
        var w = this.getViewCenter(), _ = {
          x: g.x + g.width / 2,
          y: g.y + g.height / 2
        }, M = (h - c[1] - c[3]) / g.width, A = (d - c[0] - c[2]) / g.height, S;
        if (s === "x" ? S = M : s === "y" ? S = A : S = f === "max" ? Math.max(M, A) : Math.min(M, A), i && (S = S < 1 ? S : 1), t)
          this.animatedFitView(v, p, n, g, w, _, S, !0);
        else {
          var T = l.getZoom(), C = T * S, O = l.get("minZoom");
          C < O && (C = O, console.warn("fitview failed, ratio out of range, ratio: %f", S, "graph minzoom has been used instead")), l.translate(w.x - _.x, w.y - _.y), l.zoomTo(C, w);
        }
      }
    }, r.prototype.getFormatPadding = function() {
      var e = this.graph.get("fitViewPadding");
      return Py(e);
    }, r.prototype.focusPoint = function(e, t, n) {
      var a = this, i = this.getViewCenter(), o = this.getPointByCanvas(i.x, i.y), s = this.graph.get("group").getMatrix();
      if (s || (s = [1, 0, 0, 0, 1, 0, 0, 0, 1]), t) {
        var u = (o.x - e.x) * s[0], f = (o.y - e.y) * s[4], l = 0, c = 0, h = 0, d = 0;
        this.graph.get("canvas").animate(function(v) {
          h = u * v, d = f * v, a.graph.translate(h - l, d - c), l = h, c = d;
        }, B({}, n));
      } else
        this.graph.translate((o.x - e.x) * s[0], (o.y - e.y) * s[4]);
    }, r.prototype.getPointByCanvas = function(e, t) {
      var n = this.graph.get("group").getMatrix();
      n || (n = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
      var a = xA({
        x: e,
        y: t
      }, n);
      return a;
    }, r.prototype.getPointByClient = function(e, t) {
      var n = this.graph.get("canvas"), a = n.getPointByClient(e, t);
      return this.getPointByCanvas(a.x, a.y);
    }, r.prototype.getClientByPoint = function(e, t) {
      var n = this.graph.get("canvas"), a = this.getCanvasByPoint(e, t), i = n.getClientByPoint(a.x, a.y);
      return {
        x: i.x,
        y: i.y
      };
    }, r.prototype.getCanvasByPoint = function(e, t) {
      var n = this.graph.get("group").getMatrix();
      return n || (n = [1, 0, 0, 0, 1, 0, 0, 0, 1]), $s({
        x: e,
        y: t
      }, n);
    }, r.prototype.focus = function(e, t, n) {
      if (He(e) && (e = this.graph.findById(e)), e) {
        var a = 0, i = 0;
        if (e.getType && e.getType() === "edge") {
          var o = e.getSource().get("group").getMatrix(), s = e.getTarget().get("group").getMatrix();
          o && s ? (a = (o[6] + s[6]) / 2, i = (o[7] + s[7]) / 2) : (o || s) && (a = o ? o[6] : s[6], i = o ? o[7] : s[7]);
        } else {
          var u = e.get("group"), f = u.getMatrix();
          f || (f = [1, 0, 0, 0, 1, 0, 0, 0, 1]), a = f[6], i = f[7];
        }
        this.focusPoint({
          x: a,
          y: i
        }, t, n);
      }
    }, r.prototype.focusItems = function(e, t, n, a) {
      if (e.length) {
        var i = this.graph, o = this.getFormatPadding(), s = i.get("width"), u = i.get("height"), f = i.get("group"), l = f.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];
        f.resetMatrix();
        for (var c = {
          x: 0,
          y: 0,
          minX: Number.MAX_SAFE_INTEGER,
          minY: Number.MAX_SAFE_INTEGER,
          maxX: Number.MIN_SAFE_INTEGER,
          maxY: Number.MIN_SAFE_INTEGER,
          width: 0,
          height: 0
        }, h = 0, d = e; h < d.length; h++) {
          var v = d[h], p = v.getBBox();
          p.minX < c.minX && (c.minX = p.minX), p.minY < c.minY && (c.minY = p.minY), p.maxX > c.maxX && (c.maxX = p.maxX), p.maxY > c.maxY && (c.maxY = p.maxY);
        }
        if (c.x = c.minX, c.y = c.minY, c.width = c.maxX - c.minX, c.height = c.maxY - c.minY, !(c.width === 0 || c.height === 0)) {
          var g = this.getViewCenter(), y = {
            x: c.x + c.width / 2,
            y: c.y + c.height / 2
          }, m = (s - o[1] - o[3]) / c.width, b = (u - o[0] - o[2]) / c.height, E = m;
          m > b && (E = b), n ? this.animatedFitView(f, l, a, c, g, y, E, t) : (i.translate(g.x - y.x, g.y - y.y), t && !i.zoom(E, g) && console.warn("zoom failed, ratio out of range, ratio: %f", E));
        }
      }
    }, r.prototype.changeSize = function(e, t) {
      var n = this.graph;
      if (!Pt(e) || !Pt(t))
        throw Error("invalid canvas width & height, please make sure width & height type is number");
      n.set({
        width: e,
        height: t
      });
      var a = n.get("canvas");
      a.changeSize(e, t);
      var i = n.get("plugins");
      i.forEach(function(o) {
        o.get("gridContainer") && o.positionInit();
      });
    }, r.prototype.destroy = function() {
      this.graph = null, this.destroyed = !1;
    }, r;
  }()
);
function X0(r) {
  "@babel/helpers - typeof";
  return X0 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, X0(r);
}
function cx(r) {
  if (typeof r != "string")
    return r;
  var e = function(_) {
    if (typeof _ != "string")
      return _;
    try {
      return JSON.parse(_.trim());
    } catch {
      return _.trim();
    }
  }, t = e(r);
  if (typeof t != "string")
    return t;
  for (var n = function(_) {
    return _[_.length - 1];
  }, a = r.trim(), i = [], o = [], s = function() {
    for (var _ = [], M = 0; M < arguments.length; M++)
      _[M] = arguments[M];
    return _.some(function(A) {
      return n(o) === A;
    });
  }, u = function() {
    return n(i);
  }, f = null, l = 0, c = ""; l < a.length; ) {
    var h = a[l], d = s('"', "'");
    if (!d && !h.trim()) {
      l += 1;
      continue;
    }
    var v = a[l - 1] === "\\", p = s("}"), g = s("]"), y = s(","), m = u();
    if (d)
      if (n(o) === h && !v) {
        o.pop();
        var b = e(c);
        m.push(b), f = b, c = "";
      } else
        c += h;
    else if (g && h === ",")
      c && (m.push(e(c)), c = "");
    else if (p && h === ":")
      o.push(","), c && (m.push(c), c = "");
    else if (y && h === ",")
      c && (m.push(e(c)), c = ""), o.pop();
    else if (h === "}" && (p || y)) {
      c && (m.push(e(c)), c = ""), y && o.pop();
      for (var E = {}, x = 1; x < m.length; x += 2)
        E[m[x - 1]] = m[x];
      i.pop(), i.length && n(i).push(E), o.pop(), f = E;
    } else
      h === "]" && g ? (c && (m.push(e(c)), c = ""), i.pop(), i.length && n(i).push(m), o.pop(), f = m) : h === "{" ? (i.push([]), o.push("}")) : h === "[" ? (i.push([]), o.push("]")) : h === '"' ? o.push('"') : h === "'" ? o.push("'") : c += h;
    l += 1;
  }
  return f || c;
}
var X6 = function(e) {
  return e.split("-").reduce(function(t, n) {
    return t + n.charAt(0).toUpperCase() + n.slice(1);
  });
}, V6 = function(e) {
  return function(t) {
    for (var n = e.length, a = [], i = 0, o = ""; i < n; )
      if (e[i] === "{" && e[i + 1] === "{")
        a.push(o), o = "", i += 2;
      else if (e[i] === "}" && e[i + 1] === "}") {
        if (a.length) {
          var s = a.pop();
          o = PM(t, o, s.endsWith("=") ? '"{'.concat(o, '}"') : o), a.push(s + o);
        }
        i += 2, o = "";
      } else
        o += e[i], i += 1;
    return a.push(o), a.map(function(u, f) {
      return a[f - 1] && a[f - 1].endsWith("=") ? '"{'.concat(u, '}"') : u;
    }).join("");
  };
};
function OC(r, e) {
  var t = {}, n = r.getAttributeNames && r.getAttributeNames() || [], a = r.children && Array.from(r.children).map(function(s) {
    return OC(s, e);
  }), i = {}, o = r.tagName ? r.tagName.toLowerCase() : "group";
  return o === "text" && (t.text = r.innerText), i.type = o, o === "img" && (i.type = "image"), Array.from(n).forEach(function(s) {
    var u = X6(s), f = r.getAttribute(s);
    try {
      if (u === "style" || u === "attrs") {
        var l = cx(f);
        t = B(B({}, t), l);
      } else
        i[u] = cx(f);
    } catch (c) {
      if (u === "style")
        throw c;
      i[u] = f;
    }
  }), i.attrs = t, e && e.style && i.name && X0(e.style[i.name]) === "object" && (i.attrs = B(B({}, i.attrs), e.style[i.name])), e && e.style && i.keyshape && (i.attrs = B(B({}, i.attrs), e.style)), a.length && (i.children = a), i;
}
function Y6(r, e, t) {
  var n = r.attrs, a = n === void 0 ? {} : n, i = {
    x: e.x || 0,
    y: e.y || 0,
    width: t.width || 0,
    height: t.height || 0
  }, o, s;
  switch (r.type) {
    case "maker":
    case "circle":
      a.r && (s = 2 * a.r, o = 2 * a.r);
      break;
    case "text":
      a.text && (s = NA(a.text, a.fontSize || 12)[0], o = 16, i.y += o, i.height = o, i.width = s, r.attrs = B({
        fontSize: 12,
        fill: "#000"
      }, a));
      break;
    default:
      a.width && (s = a.width), a.height && (o = a.height);
  }
  return o >= 0 && (i.height = o), s >= 0 && (i.width = s), a.marginTop && (i.y += a.marginTop), a.marginLeft && (i.x += a.marginLeft), i;
}
function DC(r, e) {
  var t;
  e === void 0 && (e = {
    x: 0,
    y: 0
  });
  var n = B({
    x: 0,
    y: 0,
    width: 0,
    height: 0
  }, e);
  if (!((t = r.children) === null || t === void 0) && t.length) {
    var a = r.attrs, i = a === void 0 ? {} : a, o = i.marginTop, s = B({}, e);
    o && (s.y += o);
    for (var u = 0; u < r.children.length; u++) {
      r.children[u].attrs.key = "".concat(i.key || "root", " -").concat(u, " ");
      var f = DC(r.children[u], s);
      if (f.bbox) {
        var l = f.bbox;
        f.attrs.next === "inline" ? s.x += f.bbox.width : s.y += f.bbox.height, l.width + l.x > n.width && (n.width = l.width + l.x), l.height + l.y > n.height && (n.height = l.height + l.y);
      }
    }
  }
  return r.bbox = Y6(r, e, n), r.attrs = B(B({}, r.attrs), r.bbox), r;
}
function LC(r, e) {
  var t, n, a, i, o = (r || {}).type, s = ((e == null ? void 0 : e.attrs) || {}).key;
  if (s && r && (r.attrs.key = s), !r && e)
    return {
      action: "delete",
      val: e,
      type: o,
      key: s
    };
  if (r && !e)
    return {
      action: "add",
      val: r,
      type: o
    };
  if (!r && !e)
    return {
      action: "same",
      type: o
    };
  var u = [];
  if (((t = r.children) === null || t === void 0 ? void 0 : t.length) > 0 || ((n = e.children) === null || n === void 0 ? void 0 : n.length) > 0)
    for (var f = Math.max((a = r.children) === null || a === void 0 ? void 0 : a.length, (i = e.children) === null || i === void 0 ? void 0 : i.length), l = e.children || [], c = r.children || [], h = 0; h < f; h += 1)
      u.push(LC(c[h], l[h]));
  var d = Object.keys(e.attrs), v = Object.keys(r.attrs);
  return e.type !== r.type ? {
    action: "restructure",
    nowTarget: r,
    formerTarget: e,
    key: s,
    children: u
  } : d.filter(function(p) {
    return p !== "children";
  }).some(function(p) {
    return r.attrs[p] !== e.attrs[p] || !v.includes(p);
  }) ? {
    action: "change",
    val: r,
    children: u,
    type: o,
    key: s
  } : {
    action: "same",
    children: u,
    type: o,
    key: s
  };
}
function hx(r) {
  var e = {}, t = function(a) {
    var i = typeof r == "function" ? r(a) : r, o = V6(i)(a), s = document.createElement("div");
    s.innerHTML = o;
    var u = s.children[0], f = DC(OC(u, a));
    return s.remove(), f;
  };
  return {
    draw: function(a, i) {
      var o = t(a), s = i, u = function f(l) {
        var c = l.attrs, h = c === void 0 ? {} : c, d = l.bbox, v = l.type, p = l.children, g = tn(l, ["attrs", "bbox", "type", "children"]);
        if (l.type !== "group") {
          var y = i.addShape(l.type, B({
            attrs: h,
            origin: {
              bbox: d,
              type: v,
              children: p
            }
          }, g));
          l.keyshape && (s = y);
        }
        l.children && l.children.forEach(function(m) {
          return f(m);
        });
      };
      return u(o), e[a.id] = [o], s;
    },
    update: function(a, i) {
      e[a.id] || (e[a.id] = []);
      var o = i.getContainer(), s = o.get("children"), u = t(a), f = e[a.id].pop(), l = LC(u, f), c = function v(p) {
        var g;
        p.type !== "group" && o.addShape(p.type, {
          attrs: p.attrs
        }), !((g = p.children) === null || g === void 0) && g.length && p.children.map(function(y) {
          return v(y);
        });
      }, h = function v(p) {
        var g, y = s.find(function(m) {
          return m.attrs.key === p.attrs.key;
        });
        y && o.removeChild(y), !((g = p.children) === null || g === void 0) && g.length && p.children.map(function(m) {
          return v(m);
        });
      }, d = function v(p) {
        var g = p.key;
        if (p.type !== "group") {
          var y = s.find(function(b) {
            return b.attrs.key === g;
          });
          switch (p.action) {
            case "change":
              if (y) {
                var m = p.val.keyshape ? i.getOriginStyle() : {};
                y.attr(B(B({}, m), p.val.attrs));
              }
              break;
            case "add":
              c(p.val);
              break;
            case "delete":
              h(p.val);
              break;
            case "restructure":
              h(p.formerTarget), c(p.nowTarget);
              break;
          }
        }
        p.children && p.children.forEach(function(b) {
          return v(b);
        });
      };
      d(l), e[a.id].push(u);
    },
    getAnchorPoints: function() {
      return [[0, 0.5], [1, 0.5], [0.5, 1], [0.5, 0]];
    }
  };
}
var pp = {};
function dx(r) {
  return pp[r] || (pp[r] = Zs(r)), pp[r];
}
var H6 = {
  /**
   * 默认的形状，当没有指定/匹配 shapeType 时，使用默认的
   * @type {String}
   */
  defaultShapeType: "defaultType",
  /**
   * 形状的 className，用于搜索
   * @type {String}
   */
  className: null,
  /**
   * 获取绘制 Shape 的工具类，无状态
   * @param  {String} type 类型
   * @return {Shape} 工具类
   */
  getShape: function(e) {
    var t = this, n = t[e] || t[t.defaultShapeType] || t["simple-circle"];
    return n;
  },
  /**
   * 绘制图形
   * @param  {String} type  类型
   * @param  {Object} cfg 配置项
   * @param  {G.Group} group 图形的分组
   * @return {IShape} 图形对象
   */
  draw: function(e, t, n) {
    var a = this.getShape(e);
    n.shapeMap = {};
    var i = a.draw(t, n);
    return a.afterDraw && a.afterDraw(t, n, i), i;
  },
  /**
   * 更新
   * @param  {String} type  类型
   * @param  {Object} cfg 配置项
   * @param  {G6.Item} item 节点、边、分组等
   */
  baseUpdate: function(e, t, n, a) {
    var i, o, s = this.getShape(e);
    s.update && (s.mergeStyle = (i = s.getOptions) === null || i === void 0 ? void 0 : i.call(s, t, a), (o = s.update) === null || o === void 0 || o.call(s, t, n, a)), s.afterUpdate && s.afterUpdate(t, n);
  },
  /**
   * 设置状态
   * @param {String} type  类型
   * @param {String} name  状态名
   * @param {String | Boolean} value 状态值
   * @param {G6.Item} item  节点、边、分组等
   */
  setState: function(e, t, n, a) {
    var i = this.getShape(e);
    i.setState(t, n, a);
  },
  /**
   * 是否允许更新，不重新绘制图形
   * @param  {String} type 类型
   * @return {Boolean} 是否允许使用更新
   */
  shouldUpdate: function(e) {
    var t = this.getShape(e);
    return !!t.update;
  },
  getControlPoints: function(e, t) {
    var n = this.getShape(e);
    return n.getControlPoints(t);
  },
  /**
   * 获取控制点
   * @param {String} type 节点、边类型
   * @param  {Object} cfg 节点、边的配置项
   * @return {Array|null} 控制点的数组,如果为 null，则没有控制点
   */
  getAnchorPoints: function(e, t) {
    var n = this.getShape(e);
    return n.getAnchorPoints(t);
  }
}, gp = {
  // 默认样式及配置
  options: {},
  /**
   * 绘制
   */
  draw: function(e, t) {
    return this.drawShape(e, t);
  },
  /**
   * 绘制
   */
  drawShape: function() {
  },
  /**
   * 绘制完成后的操作，便于用户继承现有的节点、边
   */
  afterDraw: function() {
  },
  // update(cfg, item) // 默认不定义
  afterUpdate: function() {
  },
  /**
   * 设置节点、边状态
   */
  setState: function() {
  },
  /**
   * 获取控制点
   * @param  {Object} cfg 节点、边的配置项
   * @return {Array|null} 控制点的数组,如果为 null，则没有控制点
   */
  getControlPoints: function(e) {
    return e.controlPoints;
  },
  /**
   * 获取控制点
   * @param  {Object} cfg 节点、边的配置项
   * @return {Array|null} 控制点的数组,如果为 null，则没有控制点
   */
  getAnchorPoints: function(e) {
    var t = this.options.anchorPoints, n = e.anchorPoints || t;
    return n;
  }
  /* 如果没定义 update 方法，每次都调用 draw 方法
  update(cfg, item) {
     }
  */
}, yr = (
  /** @class */
  function() {
    function r() {
    }
    return r.registerFactory = function(e, t) {
      var n = dx(e), a = H6, i = B(B({}, a), t);
      return r[n] = i, i.className = n, i;
    }, r.getFactory = function(e) {
      var t = dx(e);
      return r[t];
    }, r.registerNode = function(e, t, n) {
      var a = r.Node, i;
      if (typeof t == "string" || typeof t == "function") {
        var o = hx(t);
        i = B(B({}, a.getShape("single-node")), o);
      } else if (t.jsx) {
        var s = t.jsx, o = hx(s);
        i = B(B(B({}, a.getShape("single-node")), o), t);
      } else {
        a.getShape(n);
        var u = n ? a.getShape(n) : gp;
        i = B(B({}, u), t);
      }
      return i.type = e, i.itemType = "node", a[e] = i, i;
    }, r.registerEdge = function(e, t, n) {
      var a = r.Edge, i = n ? a.getShape(n) : gp, o = B(B({}, i), t);
      return o.type = e, o.itemType = "edge", a[e] = o, o;
    }, r.registerCombo = function(e, t, n) {
      var a = r.Combo, i = n ? a.getShape(n) : gp, o = B(B({}, i), t);
      return o.type = e, o.itemType = "combo", a[e] = o, o;
    }, r;
  }()
);
yr.registerFactory("node", {
  defaultShapeType: "circle"
});
yr.registerFactory("edge", {
  defaultShapeType: "line"
});
yr.registerFactory("combo", {
  defaultShapeType: "circle"
});
var yp = "bboxCache", mp = "bboxCanvasCache", NC = (
  /** @class */
  function() {
    function r(e) {
      this._cfg = {}, this.destroyed = !1, this.optimize = !1;
      var t = {
        /**
         * id
         * @type {string}
         */
        id: void 0,
        /**
         * 类型
         * @type {string}
         */
        type: "item",
        /**
         * data model
         * @type {object}
         */
        model: {},
        /**
         * g group
         * @type {G.Group}
         */
        group: void 0,
        /**
         * is open animate
         * @type {boolean}
         */
        animate: !1,
        /**
         * visible - not group visible
         * @type {boolean}
         */
        visible: !0,
        /**
         * locked - lock node
         * @type {boolean}
         */
        locked: !1,
        /**
         * capture event
         * @type {boolean}
         */
        event: !0,
        /**
         * key shape to calculate item's bbox
         * @type object
         */
        keyShape: void 0,
        /**
         * item's states, such as selected or active
         * @type Array
         */
        states: []
      };
      this._cfg = Object.assign(t, this.getDefaultCfg(), e);
      var n = this.get("model"), a = n.id, i = this.get("type");
      typeof a > "u" ? a = W0(i) : typeof a != "string" && (a = String(a)), this.get("model").id = a, this.set("id", a);
      var o = e.group;
      o && (o.set("item", this), o.set("id", a)), this.init(), this.draw();
      var s = n.shape || n.type || (i === "edge" ? "line" : "circle"), u = this.get("shapeFactory");
      if (u && u[s]) {
        var f = u[s].options;
        if (f && f.stateStyles) {
          var l = this.get("styles") || n.stateStyles;
          l = Mr({}, f.stateStyles, l), this.set("styles", l);
        }
      }
    }
    return r.prototype.calculateBBox = function() {
      var e = this.get("keyShape"), t = this.get("group"), n = Mh(e, t);
      return n.x = n.minX, n.y = n.minY, n.width = n.maxX - n.minX, n.height = n.maxY - n.minY, n.centerX = (n.minX + n.maxX) / 2, n.centerY = (n.minY + n.maxY) / 2, n;
    }, r.prototype.calculateCanvasBBox = function() {
      var e = this.get("keyShape"), t = this.get("group"), n = Mh(e, t);
      return n.x = n.minX, n.y = n.minY, n.width = n.maxX - n.minX, n.height = n.maxY - n.minY, n.centerX = (n.minX + n.maxX) / 2, n.centerY = (n.minY + n.maxY) / 2, n;
    }, r.prototype.drawInner = function() {
      var e = this, t = e.get("shapeFactory"), n = e.get("group"), a = e.get("model");
      n.clear();
      var i = a.visible;
      if (i !== void 0 && !i && e.changeVisibility(i), !!t) {
        e.updatePosition(a);
        var o = e.getShapeCfg(a), s = o.type, u = t.draw(s, o, n);
        u && (e.set("keyShape", u), u.set("isKeyShape", !0), u.set("draggable", !0)), this.setOriginStyle(), this.set("currentShape", s), this.restoreStates(t, s);
      }
    }, r.prototype.setOriginStyle = function() {
      var e = this.get("group"), t = e.get("children"), n = this.getKeyShape(), a = this, i = n.get("name");
      if (this.get("originStyle")) {
        var d = this.get("originStyle");
        i && !d[i] && (d[i] = {});
        for (var v = this.getCurrentStatesStyle(), p = function(y) {
          var m = t[y], b = m.get("name"), E = m.attr();
          if (b && b !== i) {
            var x = v[b];
            d[b] || (d[b] = {}), x ? Object.keys(E).forEach(function(M) {
              var A = E[M];
              A !== x[M] && (d[b][M] = A);
            }) : d[b] = m.get("type") !== "image" ? nr(E) : a.getShapeStyleByName(b);
          } else {
            var w = m.attr(), _ = {};
            Object.keys(v).forEach(function(M) {
              var A = v[M];
              (M === i || !hn(A)) && (_[M] = A);
            }), Object.keys(w).forEach(function(M) {
              var A = w[M];
              _[M] !== A && (i ? d[i][M] = A : d[M] = A);
            });
          }
        }, s = 0; s < t.length; s++)
          p(s);
        delete d.path, delete d.matrix, delete d.x, delete d.y, d[i] && (delete d[i].x, delete d[i].y, delete d[i].matrix, delete d[i].path), a.set("originStyle", d);
      } else {
        for (var o = {}, s = 0; s < t.length; s++) {
          var u = t[s], f = u.get("type"), l = u.get("name");
          if (l && l !== i)
            o[l] = f !== "image" ? nr(u.attr()) : a.getShapeStyleByName(l), f === "text" && o[l] && (delete o[l].x, delete o[l].y, delete o[l].matrix);
          else {
            var c = a.getShapeStyleByName();
            if (delete c.path, delete c.matrix, !i)
              Object.assign(o, c);
            else if (l)
              o[i] = c;
            else {
              var h = W0("shape");
              u.set("name", h), e.shapeMap[h] = u, o[h] = f !== "image" ? nr(u.attr()) : a.getShapeStyleByName(l);
            }
          }
        }
        a.set("originStyle", o);
      }
    }, r.prototype.restoreStates = function(e, t) {
      var n = this, a = n.get("states");
      Se(a, function(i) {
        e.setState(t, i, !0, n);
      });
    }, r.prototype.init = function() {
      var e = yr.getFactory(this.get("type"));
      this.set("shapeFactory", e);
    }, r.prototype.get = function(e) {
      return this._cfg[e];
    }, r.prototype.set = function(e, t) {
      hn(e) ? this._cfg = B(B({}, this._cfg), e) : this._cfg[e] = t;
    }, r.prototype.getDefaultCfg = function() {
      return {};
    }, r.prototype.clearCache = function() {
      this.set(yp, null), this.set(mp, null);
    }, r.prototype.beforeDraw = function() {
    }, r.prototype.afterDraw = function() {
    }, r.prototype.afterUpdate = function() {
    }, r.prototype.draw = function() {
      this.beforeDraw(), this.drawInner(), this.afterDraw();
    }, r.prototype.getShapeStyleByName = function(e) {
      var t = this.get("group"), n;
      if (e ? n = t.shapeMap[e] || t.find(function(i) {
        return i.get("name") === e;
      }) : n = this.getKeyShape(), n) {
        var a = {};
        return Se(n.attr(), function(i, o) {
          (o !== "img" || He(i)) && (a[o] = i);
        }), a;
      }
      return {};
    }, r.prototype.getShapeCfg = function(e, t) {
      var n = this.get("styles");
      if (n) {
        var a = e;
        return a.style = B(B({}, n), e.style), a;
      }
      return e;
    }, r.prototype.getStateStyle = function(e) {
      var t = this.get("styles"), n = t && t[e];
      return n;
    }, r.prototype.getOriginStyle = function() {
      return this.get("originStyle");
    }, r.prototype.getCurrentStatesStyle = function() {
      var e = this, t = {}, n = e.getStates();
      return !n || !n.length ? this.get("originStyle") : (Se(e.getStates(), function(a) {
        t = Object.assign(t, e.getStateStyle(a));
      }), t);
    }, r.prototype.setState = function(e, t) {
      var n = this.get("states"), a = this.get("shapeFactory"), i = e, o = e;
      He(t) && (i = "".concat(e, ":").concat(t), o = "".concat(e, ":"));
      var s = n;
      if (Xf(t)) {
        var u = n.indexOf(o);
        if (t) {
          if (u > -1)
            return;
          n.push(i);
        } else
          u > -1 && n.splice(u, 1);
      } else if (He(t)) {
        var f = n.filter(function(h) {
          return h.includes(o);
        });
        f.length > 0 && this.clearStates(f), s = s.filter(function(h) {
          return !h.includes(o);
        }), s.push(i), this.set("states", s);
      }
      if (a) {
        var l = this.get("model"), c = l.type;
        a.setState(c, e, t, this);
      }
    }, r.prototype.clearStates = function(e) {
      var t = this, n = t.getStates(), a = t.get("shapeFactory"), i = t.get("model"), o = i.type;
      e || (e = n), He(e) && (e = [e]);
      var s = n.filter(function(u) {
        return e.indexOf(u) === -1;
      });
      t.set("states", s), e.forEach(function(u) {
        a.setState(o, u, !1, t);
      });
    }, r.prototype.setOptimize = function(e) {
      this.optimize = e;
    }, r.prototype.getContainer = function() {
      return this.get("group");
    }, r.prototype.getKeyShape = function() {
      return this.get("keyShape");
    }, r.prototype.getModel = function() {
      return this.get("model");
    }, r.prototype.getType = function() {
      return this.get("type");
    }, r.prototype.getID = function() {
      return this.get("id");
    }, r.prototype.isItem = function() {
      return !0;
    }, r.prototype.getStates = function() {
      return this.get("states");
    }, r.prototype.hasState = function(e) {
      var t = this.getStates();
      return t.indexOf(e) >= 0;
    }, r.prototype.refresh = function(e) {
      var t = this.get("model");
      this.updatePosition(t), this.updateShape(e), this.afterUpdate(), this.clearCache();
    }, r.prototype.getUpdateType = function(e) {
    }, r.prototype.update = function(e, t) {
      t === void 0 && (t = void 0);
      var n = this.get("model");
      if (t === "move")
        this.updatePosition(e);
      else {
        var a = n.visible, i = e.visible;
        a !== i && i !== void 0 && this.changeVisibility(i);
        var o = {
          x: n.x,
          y: n.y
        };
        e.x = isNaN(+e.x) ? n.x : +e.x, e.y = isNaN(+e.y) ? n.y : +e.y;
        var s = this.get("styles");
        if (e.stateStyles) {
          var u = e.stateStyles;
          _t(s, u), delete e.stateStyles;
        }
        Object.assign(n, e), (o.x !== e.x || o.y !== e.y) && this.updatePosition(e), this.updateShape(t);
      }
      this.afterUpdate(), this.clearCache();
    }, r.prototype.updateShape = function(e) {
      var t = this.get("shapeFactory"), n = this.get("model"), a = n.type;
      if (t.shouldUpdate(a) && a === this.get("currentShape")) {
        var i = this.getShapeCfg(n, e);
        t.baseUpdate(a, i, this, e), e !== "move" && this.setOriginStyle();
      } else
        this.draw();
      this.restoreStates(t, a);
    }, r.prototype.updatePosition = function(e) {
      var t = this.get("model"), n = isNaN(+e.x) ? +t.x : +e.x, a = isNaN(+e.y) ? +t.y : +e.y, i = this.get("group");
      if (isNaN(n) || isNaN(a))
        return !1;
      t.x = n, t.y = a;
      var o = i.getMatrix();
      return o && o[6] === n && o[7] === a ? !1 : (i.resetMatrix(), wA(i, {
        x: n,
        y: a
      }), this.clearCache(), !0);
    }, r.prototype.getBBox = function() {
      var e = this.get(yp);
      return e || (e = this.calculateBBox(), this.set(yp, e)), e;
    }, r.prototype.getCanvasBBox = function() {
      var e = this.get(mp);
      return e || (e = this.calculateCanvasBBox(), this.set(mp, e)), e;
    }, r.prototype.toFront = function() {
      var e = this.get("group");
      e.toFront();
    }, r.prototype.toBack = function() {
      var e = this.get("group");
      e.toBack();
    }, r.prototype.show = function() {
      this.changeVisibility(!0);
    }, r.prototype.hide = function() {
      this.changeVisibility(!1);
    }, r.prototype.changeVisibility = function(e) {
      var t = this.get("group");
      e ? t.show() : t.hide(), this.set("visible", e);
    }, r.prototype.isVisible = function() {
      return this.get("visible");
    }, r.prototype.enableCapture = function(e) {
      var t = this.get("group");
      t && t.set("capture", e);
    }, r.prototype.destroy = function() {
      if (!this.destroyed) {
        var e = this.get("animate"), t = this.get("group");
        e && t.stopAnimate(), t.shapeMap = {}, this.clearCache(), t.remove(), this._cfg = null, this.destroyed = !0;
      }
    }, r;
  }()
), oc = {
  source: "start",
  target: "end"
}, Pa = "Node", Es = "Point", K6 = "Anchor", PC = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        type: "edge",
        sourceNode: null,
        targetNode: null,
        startPoint: null,
        endPoint: null,
        linkCenter: !1
      };
    }, e.prototype.setEnd = function(t, n) {
      var a = oc[t] + Es, i = t + Pa, o = this.get(i);
      o && !o.destroyed && o.removeEdge(this), hn(n) ? (this.set(a, n), this.set(i, null)) : n && (n.addEdge(this), this.set(i, n), this.set(a, null));
    }, e.prototype.getLinkPoint = function(t, n, a) {
      var i = oc[t] + Es, o = t + Pa, s = this.get(i);
      if (!s) {
        var u = this.get(o), f = t + K6, l = this.getPrePoint(t, a), c = n[f];
        Zt(c) || (s = u.getLinkPointByAnchor(c)), s = s || u.getLinkPoint(l), Zt(s.index) || this.set("".concat(t, "AnchorIndex"), s.index);
      }
      return s;
    }, e.prototype.getPrePoint = function(t, n) {
      if (n && n.length) {
        var a = t === "source" ? 0 : n.length - 1;
        return n[a];
      }
      var i = t === "source" ? "target" : "source";
      return this.getEndPoint(i);
    }, e.prototype.getEndPoint = function(t) {
      var n = t + Pa, a = oc[t] + Es, i = this.get(n);
      return i && !i.destroyed ? i.get("model") : this.get(a);
    }, e.prototype.getControlPointsByCenter = function(t) {
      var n = this.getEndPoint("source"), a = this.getEndPoint("target"), i = this.get("shapeFactory"), o = t.type;
      return i.getControlPoints(o, {
        startPoint: n,
        endPoint: a
      });
    }, e.prototype.getEndCenter = function(t) {
      var n = t + Pa, a = oc[t] + Es, i = this.get(n);
      if (i) {
        var o = i.getBBox();
        return {
          x: o.centerX,
          y: o.centerY
        };
      }
      return this.get(a);
    }, e.prototype.init = function() {
      r.prototype.init.call(this), this.setSource(this.get("source")), this.setTarget(this.get("target"));
    }, e.prototype.getShapeCfg = function(t, n) {
      var a = this, i = a.get("linkCenter"), o = n != null && n.includes("move") ? t : r.prototype.getShapeCfg.call(this, t);
      if (i)
        o.startPoint = a.getEndCenter("source"), o.endPoint = a.getEndCenter("target");
      else {
        var s = o.controlPoints || a.getControlPointsByCenter(o);
        o.startPoint = a.getLinkPoint("source", t, s), o.endPoint = a.getLinkPoint("target", t, s);
      }
      return o.sourceNode = a.get("sourceNode"), o.targetNode = a.get("targetNode"), o;
    }, e.prototype.getModel = function() {
      var t = this.get("model"), n = this.get("source".concat(Pa)), a = this.get("target".concat(Pa));
      return n ? delete t["source".concat(Pa)] : t.source = this.get("start".concat(Es)), a ? delete t["target".concat(Pa)] : t.target = this.get("end".concat(Es)), !He(t.source) && !hn(t.source) && (t.source = t.source.getID()), !He(t.target) && !hn(t.target) && (t.target = t.target.getID()), t;
    }, e.prototype.setSource = function(t) {
      this.setEnd("source", t), this.set("source", t);
    }, e.prototype.setTarget = function(t) {
      this.setEnd("target", t), this.set("target", t);
    }, e.prototype.getSource = function() {
      return this.get("source");
    }, e.prototype.getTarget = function() {
      return this.get("target");
    }, e.prototype.updatePosition = function() {
      return !1;
    }, e.prototype.update = function(t, n) {
      n === void 0 && (n = void 0);
      var a = this.get("model"), i = a.visible, o = t.visible;
      i !== o && o !== void 0 && this.changeVisibility(o);
      var s = this.get("source"), u = this.get("target");
      if (!(!s || s.destroyed || !u || u.destroyed)) {
        var f = this.get("styles");
        if (t.stateStyles) {
          var l = t.stateStyles;
          _t(f, l), delete t.stateStyles;
        }
        Object.assign(a, t), this.updateShape(n), this.afterUpdate(), this.clearCache();
      }
    }, e.prototype.destroy = function() {
      var t = this.get("source".concat(Pa)), n = this.get("target".concat(Pa));
      t && !t.destroyed && t.removeEdge(this), n && !n.destroyed && n.removeEdge(this), r.prototype.destroy.call(this);
    }, e;
  }(NC)
), bp = "anchorPointsCache", q6 = "bboxCache", ky = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getNearestPoint = function(t, n) {
      for (var a = 0, i = t[0], o = wh(t[0], n), s = 0; s < t.length; s++) {
        var u = t[s], f = wh(u, n);
        f < o && (i = u, o = f, a = s);
      }
      return i.anchorIndex = a, i;
    }, e.prototype.getDefaultCfg = function() {
      return {
        type: "node",
        edges: []
      };
    }, e.prototype.getEdges = function() {
      return this.get("edges");
    }, e.prototype.getInEdges = function() {
      var t = this;
      return this.get("edges").filter(function(n) {
        return n.get("target") === t;
      });
    }, e.prototype.getOutEdges = function() {
      var t = this;
      return this.get("edges").filter(function(n) {
        return n.get("source") === t;
      });
    }, e.prototype.getNeighbors = function(t) {
      var n = this, a = this.get("edges");
      if (t === "target") {
        var i = function(f) {
          return f.getSource() === n;
        };
        return a.filter(i).map(function(u) {
          return u.getTarget();
        });
      }
      if (t === "source") {
        var o = function(f) {
          return f.getTarget() === n;
        };
        return a.filter(o).map(function(u) {
          return u.getSource();
        });
      }
      var s = function(f) {
        return f.getSource() === n ? f.getTarget() : f.getSource();
      };
      return a.map(s);
    }, e.prototype.getLinkPointByAnchor = function(t) {
      var n = this.getAnchorPoints();
      return n[t];
    }, e.prototype.getLinkPoint = function(t) {
      var n = this.get("keyShape"), a = n.get("type"), i = this.get("type"), o, s, u = this.getBBox();
      i === "combo" ? (o = u.centerX || (u.maxX + u.minX) / 2, s = u.centerY || (u.maxY + u.minY) / 2) : (o = u.centerX, s = u.centerY);
      var f = this.getAnchorPoints(), l;
      switch (a) {
        case "circle":
          l = bA({
            x: o,
            y: s,
            r: u.width / 2
          }, t);
          break;
        case "ellipse":
          l = EA({
            x: o,
            y: s,
            rx: u.width / 2,
            ry: u.height / 2
          }, t);
          break;
        default:
          l = mA(u, t);
      }
      var c = l;
      return f.length && (c || (c = t), c = this.getNearestPoint(f, c)), c || (c = {
        x: o,
        y: s
      }), c;
    }, e.prototype.getAnchorPoints = function() {
      var t = this.get(bp);
      if (!t) {
        t = [];
        var n = this.get("shapeFactory"), a = this.getBBox(), i = this.get("model"), o = this.getShapeCfg(i), s = i.type, u = n.getAnchorPoints(s, o) || [];
        Se(u, function(f, l) {
          var c = {
            x: a.minX + f[0] * a.width,
            y: a.minY + f[1] * a.height,
            anchorIndex: l
          };
          t.push(c);
        }), this.set(bp, t);
      }
      return t;
    }, e.prototype.addEdge = function(t) {
      this.get("edges").push(t);
    }, e.prototype.lock = function() {
      this.set("locked", !0);
    }, e.prototype.unlock = function() {
      this.set("locked", !1);
    }, e.prototype.hasLocked = function() {
      return this.get("locked");
    }, e.prototype.removeEdge = function(t) {
      var n = this.getEdges(), a = n.indexOf(t);
      a > -1 && n.splice(a, 1);
    }, e.prototype.clearCache = function() {
      this.set(q6, null), this.set(bp, null);
    }, e.prototype.getUpdateType = function(t) {
      var n, a, i, o, s;
      if (t) {
        var u = !Zt(t.x), f = !Zt(t.y), l = Object.keys(t);
        if (l.length === 1 && (u || f) || l.length === 2 && u && f)
          return "move";
        if (Pt(t.x) || Pt(t.y) || t.type || t.anchorPoints || t.size || t != null && t.style && (!((n = t == null ? void 0 : t.style) === null || n === void 0) && n.r || !((a = t == null ? void 0 : t.style) === null || a === void 0) && a.width || !((i = t == null ? void 0 : t.style) === null || i === void 0) && i.height || !((o = t == null ? void 0 : t.style) === null || o === void 0) && o.rx || !((s = t == null ? void 0 : t.style) === null || s === void 0) && s.ry))
          return "bbox|label";
        var c = l.includes("label") || l.includes("labelCfg");
        return c ? "style|label" : "style";
      }
    }, e.prototype.setState = function(t, n) {
      var a = this;
      if (this.optimize) {
        r.prototype.setState.call(this, t, n);
        return;
      }
      this.runWithBBoxAffected(function() {
        return r.prototype.setState.call(a, t, n);
      });
    }, e.prototype.clearStates = function(t) {
      var n = this;
      if (this.optimize) {
        r.prototype.clearStates.call(this, t);
        return;
      }
      this.runWithBBoxAffected(function() {
        return r.prototype.clearStates.call(n, t);
      });
    }, e.prototype.runWithBBoxAffected = function(t) {
      var n = ["r", "width", "height", "rx", "ry", "lineWidth"], a = this.getKeyShape().attr(), i = {};
      Object.keys(this.getKeyShape().attr()).forEach(function(f) {
        n.includes(f) && (i[f] = a[f]);
      }), t();
      for (var o = this.getKeyShape().attr(), s = 0; s < n.length; s++) {
        var u = n[s];
        if (o[u] !== i[u]) {
          this.clearCache(), this.getEdges().forEach(function(f) {
            return f.refresh();
          });
          break;
        }
      }
    }, e;
  }(NC)
), vx = "bboxCache", px = "bboxCanvasCache", sc = "sizeCache", gx = "anchorPointsCache", kC = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        type: "combo",
        nodes: [],
        edges: [],
        combos: []
      };
    }, e.prototype.getShapeCfg = function(t) {
      var n = this.get("styles"), a = this.get("bbox");
      if (n && a) {
        var i = t, o = Pt(t.size) ? [t.size, t.size] : t.size, s = Pt(t.fixSize) ? [t.fixSize, t.fixSize] : t.fixSize, u = o || s || lt.defaultCombo.size, f = {
          r: (Math.max(a.width, a.height) || Math.max(u[0], u[1])) / 2,
          width: a.width || u[0],
          height: a.height || u[1]
        };
        i.style = B(B(B({}, n), t.style), f);
        var l = t.padding || lt.defaultCombo.padding;
        return Pt(l) ? (f.r += l, f.width += l * 2, f.height += l * 2) : (f.r = f.r + Math.max.apply(Math, l), f.width += l[1] + l[3] || l[1] * 2, f.height += l[0] + l[2] || l[0] * 2), this.set(sc, f), i;
      }
      return t;
    }, e.prototype.calculateCanvasBBox = function() {
      if (!this.destroyed) {
        var t = this.get("keyShape"), n = this.get("group"), a = this.get(vx) || {}, i = a.x, o = a.x, s = this.get(sc), u = Mh(t, n);
        if (u.centerX = (u.minX + u.maxX) / 2, u.centerY = (u.minY + u.maxY) / 2, s) {
          s.width = Math.max(s.width, u.width), s.height = Math.max(s.height, u.height), this.set(sc, s);
          var f = t.get("type");
          f === "circle" ? (u.width = s.r * 2, u.height = s.r * 2) : (u.width = s.width, u.height = s.height), u.minX = u.centerX - u.width / 2, u.minY = u.centerY - u.height / 2, u.maxX = u.centerX + u.width / 2, u.maxY = u.centerY + u.height / 2;
        } else
          u.width = u.maxX - u.minX, u.height = u.maxY - u.minY, u.centerX = (u.minX + u.maxX) / 2, u.centerY = (u.minY + u.maxY) / 2;
        return u.x = u.minX, u.y = u.minY, (u.x !== i || u.y !== o) && this.set(gx, null), u;
      }
    }, e.prototype.getChildren = function() {
      var t = this;
      return {
        nodes: t.getNodes(),
        combos: t.getCombos()
      };
    }, e.prototype.getNodes = function() {
      var t = this;
      return t.get("nodes");
    }, e.prototype.getCombos = function() {
      var t = this;
      return t.get("combos");
    }, e.prototype.addChild = function(t) {
      var n = this, a = t.getType();
      switch (a) {
        case "node":
          n.addNode(t);
          break;
        case "combo":
          n.addCombo(t);
          break;
        default:
          return console.warn("Only node or combo items are allowed to be added into a combo"), !1;
      }
      return !0;
    }, e.prototype.addCombo = function(t) {
      var n = this;
      return n.get("combos").push(t), !0;
    }, e.prototype.addNode = function(t) {
      var n = this;
      return n.get("nodes").push(t), !0;
    }, e.prototype.removeChild = function(t) {
      var n = this, a = t.getType();
      switch (a) {
        case "node":
          n.removeNode(t);
          break;
        case "combo":
          n.removeCombo(t);
          break;
        default:
          return console.warn("Only node or combo items are allowed to be added into a combo"), !1;
      }
      return !0;
    }, e.prototype.removeCombo = function(t) {
      if (t) {
        var n = this.getCombos(), a = n.indexOf(t);
        return a > -1 ? (n.splice(a, 1), !0) : !1;
      }
    }, e.prototype.removeNode = function(t) {
      if (t) {
        var n = this.getNodes(), a = n.indexOf(t);
        return a > -1 ? (n.splice(a, 1), !0) : !1;
      }
    }, e.prototype.getUpdateType = function(t) {
    }, e.prototype.getBBox = function() {
      this.set(px, null);
      var t = this.calculateCanvasBBox();
      return t;
    }, e.prototype.clearCache = function() {
      this.set(vx, null), this.set(px, null), this.set(gx, null);
    }, e.prototype.destroy = function() {
      if (!this.destroyed) {
        var t = this.get("animate"), n = this.get("group");
        t && n.stopAnimate(), n.shapeMap = {}, this.clearCache(), this.set(sc, null), this.set("bbox", null), n.remove(), this._cfg = null, this.destroyed = !0;
      }
    }, e;
  }(ky)
), uc = "node", fc = "edge", yx = "vedge", zu = "combo", Z6 = "default", mx = "Mapper", hi = "stateStyles", Q6 = (
  /** @class */
  function() {
    function r(e) {
      var t = this;
      this.edgeToBeUpdateMap = {}, this.throttleRefresh = yh(function(n) {
        var a = t.graph;
        if (!(!a || a.get("destroyed"))) {
          var i = t.edgeToBeUpdateMap;
          if (i) {
            var o = Object.values(i);
            o.length && (o.forEach(function(s) {
              var u = s.edge;
              if (!(!u || u.destroyed)) {
                var f = u.getSource(), l = u.getTarget();
                !f || f.destroyed || !l || l.destroyed || u.refresh(s.updateType);
              }
            }), t.edgeToBeUpdateMap = {});
          }
        }
      }, 16, {
        trailing: !0,
        leading: !0
      }), this.graph = e, this.destroyed = !1;
    }
    return r.prototype.addItem = function(e, t) {
      var n = this.graph, a = e === yx ? fc : e, i = n.get("".concat(a, "Group")) || n.get("group"), o = Zs(a), s = null, u = n.get(a + Zs(hi)) || {}, f = n.get(Z6 + o);
      t[hi] && (u = t[hi]), f && Se(f, function(w, _) {
        yn(w) && !bt(w) ? t[_] = Mr({}, w, t[_]) : bt(w) ? t[_] = t[_] || nr(f[_]) : t[_] = t[_] || f[_];
      });
      var l = n.get(a + mx);
      if (l) {
        var c = l(t);
        c[hi] && (u = c[hi], delete c[hi]), Se(c, function(w, _) {
          yn(w) && !bt(w) ? t[_] = Mr({}, t[_], w) : t[_] = c[_] || t[_];
        });
      }
      if (n.emit("beforeadditem", {
        type: e,
        model: t
      }), e === fc || e === yx) {
        var h = void 0, d = void 0;
        if (h = t.source, d = t.target, h && He(h) && (h = n.findById(h)), d && He(d) && (d = n.findById(d)), !h || !d) {
          console.warn("The source or target node of edge ".concat(t.id, " does not exist!"));
          return;
        }
        h.getType && h.getType() === "combo" && (t.isComboEdge = !0), d.getType && d.getType() === "combo" && (t.isComboEdge = !0), s = new PC({
          model: t,
          source: h,
          target: d,
          styles: u,
          linkCenter: n.get("linkCenter"),
          group: i.addGroup()
        });
      } else if (e === uc)
        s = new ky({
          model: t,
          styles: u,
          group: i.addGroup()
        });
      else if (e === zu) {
        var v = t.children, p = qc(v, n), g = void 0, y = void 0;
        if (isNaN(p.x) ? isNaN(t.x) && (g = Math.random() * 100) : g = p.x, isNaN(p.y) ? isNaN(t.y) && (y = Math.random() * 100) : y = p.y, isNaN(t.x) || isNaN(t.y))
          t.x = g, t.y = y;
        else {
          var m = t.x - g, b = t.y - y;
          this.updateComboSucceeds(t.id, m, b, v);
        }
        var E = i.addGroup();
        E.setZIndex(t.depth), s = new kC({
          model: t,
          styles: u,
          animate: n.get("animate"),
          bbox: t.collapsed ? qc([], n) : p,
          group: E
        }), !t.collapsed && s.getKeyShape().get("type") === "circle" && (p.width = Math.hypot(p.height, p.width), p.height = p.width, s.set("bbox", p), s.refresh());
        var x = s.getModel();
        (v || []).forEach(function(w) {
          var _ = n.findById(w.id);
          s.addChild(_), w.depth = x.depth + 2;
        });
      }
      if (s)
        return s.setOptimize(n.getNodes().length > n.get("optimizeThreshold")), n.get("".concat(e, "s")).push(s), n.get("itemMap")[s.get("id")] = s, n.emit("afteradditem", {
          item: s,
          model: t
        }), s;
    }, r.prototype.updateItem = function(e, t) {
      var n = this, a, i, o = this.graph;
      if (He(e) && (e = o.findById(e)), !(!e || e.destroyed)) {
        var s = "";
        e.getType && (s = e.getType());
        var u = o.get(s + mx), f = e.getModel(), l = f.x, c = f.y, h = e.getUpdateType(t);
        if (u) {
          var d = Mr({}, f, t), v = u(d), p = Mr({}, f, v, t);
          v[hi] && (e.set("styles", p[hi]), delete p[hi]), Se(p, function(S, T) {
            t[T] = S;
          });
        } else
          Se(t, function(S, T) {
            f[T] && yn(S) && !bt(S) && (t[T] = B(B({}, f[T]), t[T]));
          });
        if (o.emit("beforeupdateitem", {
          item: e,
          cfg: t
        }), s === fc) {
          if (t.source) {
            var g = t.source;
            He(g) && (g = o.findById(g)), e.setSource(g);
          }
          if (t.target) {
            var y = t.target;
            He(y) && (y = o.findById(y)), e.setTarget(y);
          }
          e.update(t);
        } else if (s === uc) {
          e.update(t, h);
          var m = e.getEdges();
          h === "move" ? Se(m, function(S) {
            n.edgeToBeUpdateMap[S.getID()] = {
              edge: S,
              updateType: h
            }, n.throttleRefresh();
          }) : h != null && h.includes("bbox") && Se(m, function(S) {
            S.refresh(h);
          });
        } else if (s === zu) {
          if (e.update(t, h), !isNaN(t.x) || !isNaN(t.y)) {
            var b = t.x - l || 0, E = t.y - c || 0;
            this.updateComboSucceeds(f.id, b, E);
          }
          var x = e.getEdges(), w = (h == null ? void 0 : h.includes("bbox")) || h === "move";
          if (w && s === zu) {
            var _ = e.get("shapeFactory"), M = f.type || "circle", A = f.animate === void 0 || t.animate === void 0 ? (i = (a = _[M]) === null || a === void 0 ? void 0 : a.options) === null || i === void 0 ? void 0 : i.animate : f.animate || t.animate;
            A ? setTimeout(function() {
              if (!(!e || e.destroyed)) {
                var S = e.getKeyShape();
                !S || S.destroyed || Se(x, function(T) {
                  T && !T.destroyed && T.refresh();
                });
              }
            }, 201) : Se(x, function(S) {
              S.refresh();
            });
          }
        }
        e.setOptimize(o.getNodes().length > o.get("optimizeThreshold")), o.emit("afterupdateitem", {
          item: e,
          cfg: t
        });
      }
    }, r.prototype.updateCombo = function(e, t, n) {
      var a = this, i, o, s = this.graph;
      if (He(e) && (e = s.findById(e)), !(!e || e.destroyed)) {
        var u = e.getModel(), f = qc(t, s, e), l = f.x, c = f.y;
        e.set("bbox", f);
        var h = l, d = c;
        n ? (h = isNaN(u.x) ? l : u.x, d = isNaN(u.y) ? c : u.y) : (h = isNaN(l) ? u.x : l, d = isNaN(c) ? u.y : c), e.update({
          x: h,
          y: d
        });
        var v = e.get("shapeFactory"), p = u.type || "circle", g = u.animate === void 0 ? (o = (i = v[p]) === null || i === void 0 ? void 0 : i.options) === null || o === void 0 ? void 0 : o.animate : u.animate;
        g ? setTimeout(function() {
          if (!(!e || e.destroyed)) {
            var y = e.getKeyShape();
            !y || y.destroyed || (e.getShapeCfg(u), a.updateComboEdges(e));
          }
        }, 201) : this.updateComboEdges(e);
      }
    }, r.prototype.updateComboEdges = function(e) {
      for (var t, n, a = e.getEdges() || [], i = 0; i < a.length; i++) {
        var o = a[i];
        !(o != null && o.destroyed) && !(!((t = o == null ? void 0 : o.getSource()) === null || t === void 0) && t.destroyed) && !(!((n = o == null ? void 0 : o.getTarget()) === null || n === void 0) && n.destroyed) && o.refresh();
      }
    }, r.prototype.collapseCombo = function(e, t) {
      t === void 0 && (t = !0);
      var n = this.graph;
      He(e) && (e = n.findById(e));
      var a = e.getChildren();
      a.nodes.forEach(function(i) {
        n.hideItem(i, t);
      }), a.combos.forEach(function(i) {
        n.hideItem(i, t);
      });
    }, r.prototype.updateComboSucceeds = function(e, t, n, a) {
      var i = this;
      a === void 0 && (a = []);
      var o = this.graph;
      if (!(!t && !n)) {
        var s = a;
        if (!(s != null && s.length)) {
          var u = o.get("comboTrees");
          u == null || u.forEach(function(f) {
            En(f, function(l) {
              return l.id === e ? (s = l.children, !1) : !0;
            });
          });
        }
        s == null || s.forEach(function(f) {
          var l = o.findById(f.id);
          if (l) {
            var c = l.getModel();
            i.updateItem(f.id, {
              x: (c.x || 0) + t,
              y: (c.y || 0) + n
            });
          }
        });
      }
    }, r.prototype.expandCombo = function(e, t) {
      t === void 0 && (t = !0);
      var n = this.graph;
      He(e) && (e = n.findById(e));
      var a = e.getChildren(), i = /* @__PURE__ */ new Set();
      a.nodes.forEach(function(o) {
        n.showItem(o, t), o.getEdges().forEach(function(s) {
          return i.add(s);
        });
      }), a.combos.forEach(function(o) {
        o.getModel().collapsed ? o.show() : n.showItem(o, t), o.getEdges().forEach(function(s) {
          return i.add(s);
        });
      }), i.forEach(function(o) {
        return o.refresh();
      });
    }, r.prototype.removeItem = function(e) {
      var t = this, n = this.graph;
      if (He(e) && (e = n.findById(e)), !(!e || e.destroyed)) {
        var a = nr(e.getModel()), i = "";
        e.getType && (i = e.getType()), n.emit("beforeremoveitem", {
          item: a,
          type: i
        });
        var o = n.get("".concat(i, "s")), s = o.indexOf(e);
        if (s > -1 && o.splice(s, 1), i === fc) {
          var u = n.get("v".concat(i, "s")), f = u.indexOf(e);
          f > -1 && u.splice(f, 1);
        }
        var l = e.get("id"), c = n.get("itemMap");
        delete c[l];
        var h = n.get("comboTrees"), d = e.get("id");
        if (i === uc) {
          var v = e.getModel().comboId;
          if (h && v) {
            var p = h, g = !1;
            h.forEach(function(w) {
              g || En(w, function(_) {
                if (_.id === d && p) {
                  var M = p.indexOf(_);
                  return p.splice(M, 1), g = !0, !1;
                }
                return p = _.children, !0;
              });
            });
          }
          for (var y = e.getEdges(), m = y.length - 1; m >= 0; m--)
            n.removeItem(y[m], !1);
          v && n.updateCombo(v);
        } else if (i === zu) {
          var b = e.getModel().parentId, E, x = !1;
          (h || []).forEach(function(_) {
            x || En(_, function(M) {
              return M.id === d ? (E = M, x = !0, !1) : !0;
            });
          }), E.removed = !0, E && E.children && E.children.forEach(function(_) {
            t.removeItem(_.id);
          });
          for (var y = e.getEdges(), m = y.length; m >= 0; m--)
            n.removeItem(y[m], !1);
          b && n.updateCombo(b);
        }
        e.destroy(), n.emit("afterremoveitem", {
          item: a,
          type: i
        });
      }
    }, r.prototype.setItemState = function(e, t, n) {
      var a = this.graph, i = t;
      He(n) && (i = "".concat(t, ":").concat(n)), !(e.hasState(i) === n && n || // 当该状态已经存在且现在需要设置为 true 时，不需要继续。当该状态不存在，且设置为 false 时，需要继续
      He(n) && e.hasState(i)) && (a.emit("beforeitemstatechange", {
        item: e,
        state: i,
        enabled: n
      }), e.setState(t, n), a.autoPaint(), a.emit("afteritemstatechange", {
        item: e,
        state: i,
        enabled: n
      }));
    }, r.prototype.priorityState = function(e, t) {
      var n = this.graph, a = e;
      He(e) && (a = n.findById(e)), this.setItemState(a, t, !1), this.setItemState(a, t, !0);
    }, r.prototype.clearItemStates = function(e, t) {
      var n = this.graph;
      He(e) && (e = n.findById(e)), n.emit("beforeitemstatesclear", {
        item: e,
        states: t
      }), e.clearStates(t), n.emit("afteritemstatesclear", {
        item: e,
        states: t
      });
    }, r.prototype.refreshItem = function(e) {
      var t = this.graph;
      He(e) && (e = t.findById(e)), t.emit("beforeitemrefresh", {
        item: e
      }), e.refresh(), t.emit("afteritemrefresh", {
        item: e
      });
    }, r.prototype.addCombos = function(e, t) {
      var n = this, a = this.graph;
      (e || []).forEach(function(o) {
        za(o, function(s) {
          var u;
          return t.forEach(function(f) {
            f.id === s.id && (f.children = s.children, f.depth = s.depth, u = f);
          }), u && n.addItem("combo", u), !0;
        });
      });
      var i = a.get("comboGroup");
      i && i.sort();
    }, r.prototype.changeItemVisibility = function(e, t) {
      var n = this, a = this.graph;
      if (He(e) && (e = a.findById(e)), !e) {
        console.warn("The item to be shown or hidden does not exist!");
        return;
      }
      if (a.emit("beforeitemvisibilitychange", {
        item: e,
        visible: t
      }), e.changeVisibility(t), e.getType && e.getType() === uc) {
        var i = e.getEdges();
        Se(i, function(l) {
          t && !(l.get("source").isVisible() && l.get("target").isVisible()) || n.changeItemVisibility(l, t);
        });
      } else if (e.getType && e.getType() === zu) {
        var o = a.get("comboTrees"), s = e.get("id"), u = [], f = !1;
        (o || []).forEach(function(c) {
          f || !c.children || c.children.length === 0 || En(c, function(h) {
            return h.id === s ? (u = h.children, f = !0, !1) : !0;
          });
        }), u && (!t || t && !e.getModel().collapsed) && u.forEach(function(c) {
          var h = a.findById(c.id);
          n.changeItemVisibility(h, t);
        });
        var i = e.getEdges();
        Se(i, function(c) {
          t && !(c.get("source").isVisible() && c.get("target").isVisible()) || n.changeItemVisibility(c, t);
        });
      }
      return a.emit("afteritemvisibilitychange", {
        item: e,
        visible: t
      }), e;
    }, r.prototype.destroy = function() {
      this.graph = null, this.destroyed = !0;
    }, r;
  }()
), J6 = (
  /** @class */
  function() {
    function r(e) {
      this.graph = e, this.destroyed = !1;
    }
    return r.prototype.updateState = function(e, t, n) {
      var a = this.graph.get("states"), i = t;
      He(n) && (i = "".concat(t, ":").concat(n)), a[i] || (a[i] = []), n ? a[i].push(e) : a[i] = a[i].filter(function(o) {
        return o !== e;
      }), this.graph.set("states", a), this.graph.emit("graphstatechange", {
        states: a
      });
    }, r.prototype.updateStates = function(e, t, n) {
      var a = this.graph.get("states"), i = He(t) ? [t] : t;
      i.forEach(function(o) {
        var s = o;
        a[s] || (a[s] = []), He(n) && (s = "".concat(o, ":").concat(n)), n ? a[s].push(e) : a[s] = a[s].filter(function(u) {
          return u !== e;
        });
      }), this.graph.set("states", a), this.graph.emit("graphstatechange", {
        states: t
      });
    }, r.prototype.destroy = function() {
      this.graph = null, this.destroyed = !0;
    }, r;
  }()
), eU = function(e, t) {
  return !e || !t ? e : e.replace(/\\?\{([^{}]+)\}/g, function(n, a) {
    if (n.charAt(0) === "\\")
      return n.slice(1);
    var i = t[a];
    return i === 0 && (i = "0"), i || "";
  });
}, RC = function(e) {
  var t = [];
  if (e.length < 2)
    throw new Error("point length must largn than 2, now it's ".concat(e.length));
  for (var n = 0, a = e; n < a.length; n++) {
    var i = a[n], o = i.x, s = i.y;
    t.push(o), t.push(s);
  }
  var u = S6(t);
  return u.unshift(["M", e[0].x, e[0].y]), u;
}, Ih = function(e, t, n, a) {
  n === void 0 && (n = 0), a === void 0 && (a = 0);
  var i = {
    x: (1 - n) * e.x + n * t.x,
    y: (1 - n) * e.y + n * t.y
  }, o = [0, 0];
  qi(o, [t.x - e.x, t.y - e.y]), (!o || !o[0] && !o[1]) && (o = [0, 0]);
  var s = [-o[1] * a, o[0] * a];
  return i.x += s[0], i.y += s[1], i;
}, tU = function(e, t) {
  var n = e.length;
  if (!n)
    return "";
  for (var a = "", i = "", o = 0; o < n; o++) {
    var s = e[o];
    o === 0 ? i = "M{x} {y}" : i = "L{x} {y}", a += eU(i, s);
  }
  return t && (a += "Z"), a;
}, V0 = function(e) {
  var t = [];
  return e.forEach(function(n) {
    var a = n[0];
    if (a !== "A")
      for (var i = 1; i < n.length; i = i + 2)
        t.push([n[i], n[i + 1]]);
    else {
      var o = n.length;
      t.push([n[o - 2], n[o - 1]]);
    }
  }), t;
}, Y0 = function(e) {
  if (e.length < 2)
    throw new Error("point length must largn than 2, now it's ".concat(e.length));
  var t = e[0], n = e[1], a = e[e.length - 1], i = e[e.length - 2];
  e.unshift(a), e.unshift(i), e.push(t), e.push(n);
  for (var o = [], s = 1; s < e.length - 2; s += 1) {
    var u = e[s - 1].x, f = e[s - 1].y, l = e[s].x, c = e[s].y, h = e[s + 1].x, d = e[s + 1].y, v = s !== e.length - 2 ? e[s + 2].x : h, p = s !== e.length - 2 ? e[s + 2].y : d, g = l + (h - u) / 6, y = c + (d - f) / 6, m = h - (v - l) / 6, b = d - (p - c) / 6;
    o.push(["C", g, y, m, b, h, d]);
  }
  return o.unshift(["M", a.x, a.y]), o;
}, bx = function(e, t) {
  return xn([0, 0], qi([0, 0], e), t);
}, Ex = function(e, t) {
  var n = [e[1] - t[1], t[0] - e[0]], a = Math.sqrt(n[0] * n[0] + n[1] * n[1]);
  if (a === 0)
    throw new Error("p0 should not be equal to p1");
  return [n[0] / a, n[1] / a];
}, xx = function(e, t) {
  return [t[0] - e[0], t[1] - e[1]];
};
function H0(r, e) {
  var t = function(c) {
    var h = [c[0][0], c[0][1] - e], d = [c[0][0], c[0][1] + e];
    return "M ".concat(h, " A ").concat(e, ",").concat(e, ",0,0,0,").concat(d, " A ").concat(e, ",").concat(e, ",0,0,0,").concat(h);
  }, n = function(c) {
    var h = xn([0, 0], Ex(c[0], c[1]), e), d = xn([0, 0], h, -1), v = cn([0, 0], c[0], h), p = cn([0, 0], c[1], h), g = cn([0, 0], c[1], d), y = cn([0, 0], c[0], d);
    return "M ".concat(v, " L ").concat(p, " A ").concat([e, e, "0,0,0", g].join(","), " L ").concat(y, " A ").concat([e, e, "0,0,0", v].join(","));
  };
  if (!r || r.length < 1)
    return "";
  if (r.length === 1)
    return t(r);
  if (r.length === 2)
    return n(r);
  for (var a = new Array(r.length), i = 0; i < a.length; ++i) {
    var o = i === 0 ? r[r.length - 1] : r[i - 1], s = r[i], u = xn([0, 0], Ex(o, s), e);
    a[i] = [cn([0, 0], o, u), cn([0, 0], s, u)];
  }
  var f = "A ".concat([e, e, "0,0,0,"].join(","));
  return a = a.map(function(l, c) {
    var h = "";
    return c === 0 && (h = "M ".concat(a[a.length - 1][1], " ")), h += "".concat(f + l[0], " L ").concat(l[1]), h;
  }), a.join(" ");
}
function BC(r, e) {
  var t = r.length, n = function(l) {
    var c = [l[0][0], l[0][1] - e], h = [l[0][0], l[0][1] + e];
    return "M ".concat(c, " A ").concat([e, e, "0,0,0", h].join(","), " A ").concat([e, e, "0,0,0", c].join(","));
  }, a = function(l) {
    var c = xx(l[0], l[1]), h = bx(c, e), d = cn([0, 0], l[0], xn([0, 0], h, -1)), v = cn([0, 0], l[1], h), p = 1.2 * e, g = bx(qi([0, 0], c), p), y = xn([0, 0], g, -1), m = cn([0, 0], d, y), b = cn([0, 0], v, y), E = cn([0, 0], d, g);
    return "M ".concat(d, " C ").concat([m, b, v].join(","), " S ").concat([E, d].join(","), " Z");
  };
  if (!r || t < 1)
    return "";
  if (t === 1)
    return n(r);
  if (t === 2)
    return a(r);
  for (var i = r.map(function(f, l) {
    var c = r[(l + 1) % t];
    return {
      p: f,
      v: qi([0, 0], xx(f, c))
    };
  }), o = 0; o < i.length; ++o) {
    var s = o > 0 ? o - 1 : t - 1, u = qi([0, 0], cn([0, 0], i[s].v, xn([0, 0], i[o].v, -1)));
    i[o].p = cn([0, 0], i[o].p, xn([0, 0], u, e));
  }
  return i.map(function(f) {
    var l = f.p;
    return {
      x: l[0],
      y: l[1]
    };
  });
}
var rU = function(e, t) {
  for (var n = [], a = 0; a < 5; a++) {
    var i = Math.cos((18 + 72 * a) / 180 * Math.PI) * e, o = Math.sin((18 + 72 * a) / 180 * Math.PI) * e, s = Math.cos((54 + 72 * a) / 180 * Math.PI) * t, u = Math.sin((54 + 72 * a) / 180 * Math.PI) * t;
    a === 0 ? n.push(["M", i, -o]) : n.push(["L", i, -o]), n.push(["L", s, -u]);
  }
  return n.push(["Z"]), n;
};
const nU = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getClosedSpline: Y0,
  getControlPoint: Ih,
  getSpline: RC,
  getStarPath: rU,
  paddedHull: BC,
  pathToPoints: V0,
  pointsToPolygon: tU,
  roundedHull: H0
}, Symbol.toStringTag, { value: "Module" }));
var wx = function(e, t, n) {
  return (e.y - n.y) * (t.x - n.x) - (e.x - n.x) * (t.y - n.y);
}, _x = function(e) {
  var t = e.map(function(c) {
    return {
      x: c.getModel().x,
      y: c.getModel().y
    };
  });
  t.sort(function(c, h) {
    return c.x === h.x ? c.y - h.y : c.x - h.x;
  });
  for (var n = {}, a = t.length - 1; a >= 0; a--) {
    var i = t[a], o = i.x, s = i.y;
    n["".concat(o, "-").concat(s)] && t.splice(a, 1), n["".concat(o, "-").concat(s)] = !0;
  }
  if (t.length === 1)
    return t;
  for (var u = [], a = 0; a < t.length; a++) {
    for (; u.length >= 2 && wx(u[u.length - 2], u[u.length - 1], t[a]) <= 0; )
      u.pop();
    u.push(t[a]);
  }
  for (var f = [], a = t.length - 1; a >= 0; a--) {
    for (; f.length >= 2 && wx(f[f.length - 2], f[f.length - 1], t[a]) <= 0; )
      f.pop();
    f.push(t[a]);
  }
  f.pop(), u.pop();
  var l = u.concat(f);
  return l;
}, aU = {
  maxRoutingIterations: 100,
  maxMarchingIterations: 100,
  pixelGroupSize: 2,
  edgeR0: 10,
  edgeR1: 10,
  nodeR0: 5,
  nodeR1: 10,
  morphBuffer: 5,
  threshold: 1e-3,
  skip: 16,
  nodeInfluenceFactor: 1,
  edgeInfluenceFactor: 1,
  negativeNodeInfluenceFactor: -0.5
};
function iU(r, e, t) {
  var n = !1, a = function(u, f) {
    return e.cells[u + f * e.width];
  }, i = function(u, f) {
    var l = 0;
    return a(u - 1, f - 1) >= t && (l += 1), a(u, f - 1) > t && (l += 2), a(u - 1, f) > t && (l += 4), a(u, f) > t && (l += 8), l;
  }, o = function(u, f) {
    for (var l = u, c = f, h, d, v = 0; v < e.width * e.height; v++) {
      if (h = l, d = c, r.findIndex(function(g) {
        return g.x === l && g.y === c;
      }) > -1) {
        if (!(r[0].x !== l || r[0].y !== c))
          return !0;
      } else
        r.push({
          x: l,
          y: c
        });
      var p = i(l, c);
      switch (p) {
        case -1:
          return console.warn("Marched out of bounds"), !0;
        case 0:
        case 3:
        case 2:
        case 7:
          l++;
          break;
        case 12:
        case 14:
        case 4:
          l--;
          break;
        case 6:
          h === 0 && (d === -1 ? l -= 1 : l += 1);
          break;
        case 1:
        case 13:
        case 5:
          c--;
          break;
        case 9:
          h === 1 && (d === 0 ? c -= 1 : c += 1);
          break;
        case 10:
        case 8:
        case 11:
          c++;
          break;
        default:
          return console.warn("Marching squares invalid state: ".concat(p)), !0;
      }
    }
  };
  this.march = function() {
    for (var s = 0; s < e.width && !n; s += 1)
      for (var u = 0; u < e.height && !n; u += 1)
        a(s, u) > t && i(s, u) !== 15 && (n = o(s, u));
    return n;
  };
}
var oU = function(e, t, n) {
  var a = Math.ceil(e / n), i = Math.ceil(t / n), o = new Float32Array(Math.max(0, a * i)).fill(0);
  return {
    cells: o,
    width: a,
    height: i
  };
}, sU = function(e, t, n) {
  var a = null, i = Number.POSITIVE_INFINITY;
  return t.forEach(function(o) {
    var s = {
      x: e.getModel().x,
      y: e.getModel().y
    }, u = {
      x: o.getModel().x,
      y: o.getModel().y
    }, f = _h(s, u), l = new Wo(s.x, s.y, u.x, u.y), c = n.reduce(function(h, d) {
      return Sy(d, l) > 0 ? h + 1 : h;
    }, 0);
    f * Math.pow(c + 1, 2) < i && (a = o, i = f * Math.pow(c + 1, 2));
  }), a;
}, FC = function(e, t) {
  var n = Number.POSITIVE_INFINITY, a = null;
  return e.forEach(function(i) {
    var o = Sy(i, t);
    o >= 0 && o < n && (a = i, n = o);
  }), a;
}, uU = function(e, t, n, a) {
  var i = [], o = [];
  o.push(e);
  for (var s = !0, u = 0, f = function(d, v) {
    var p = !1;
    return v.forEach(function(g) {
      p || (E0(d, {
        x: g.x1,
        y: g.y1
      }) || E0(d, {
        x: g.x2,
        y: g.y2
      })) && (p = !0);
    }), p;
  }, l = function(d, v) {
    for (var p = 0, g = v; p < g.length; p++) {
      var y = g[p], m = y.getBBox(), b = [[m.x, m.y], [m.x + m.width, m.y], [m.x, m.y + m.height], [m.x + m.width, m.y + m.height]];
      if (Af(b, d.x, d.y))
        return !0;
    }
    return !1;
  }; s && u < n; ) {
    s = !1;
    for (var c = function() {
      var d = o.pop(), v = FC(t, d);
      if (v) {
        var p = SA(v, d), g = p[0], y = p[1];
        if (y === 2) {
          var m = function(E) {
            for (var x = a, w = Mx(v, x, g, E), _ = f(w, o) || f(w, i), M = l(w, t); !_ && M && x >= 1; )
              x /= 1.5, w = Mx(v, x, g, E), _ = f(w, o) || f(w, i), M = l(w, t);
            w && !_ && (!E || !M) && (o.push(new Wo(d.x1, d.y1, w.x, w.y)), o.push(new Wo(w.x, w.y, d.x2, d.y2)), s = !0);
          };
          m(!0), s || m(!1);
        }
      }
      s || i.push(d), u += 1;
    }; !s && o.length; )
      c();
  }
  for (; o.length; )
    i.push(o.pop());
  return i;
};
function fU(r, e, t, n, a) {
  var i = sU(r, t, e);
  if (i === null)
    return [];
  var o = function(c) {
    for (var h = []; c.length > 0; ) {
      var d = c.pop();
      if (c.length === 0) {
        h.push(d);
        break;
      }
      var v = c.pop(), p = new Wo(d.x1, d.y1, v.x2, v.y2), g = FC(e, p);
      g ? (h.push(d), c.push(v)) : c.push(p);
    }
    return h;
  }, s = new Wo(r.getModel().x, r.getModel().y, i.getModel().x, i.getModel().y), u = uU(s, e, n, a), f = o(u);
  return f;
}
var lU = function(e, t, n) {
  var a = Object.assign(aU, n), i = AA(e.map(function(m) {
    return {
      x: m.getModel().x,
      y: m.getModel().y
    };
  }));
  e = e.sort(function(m, b) {
    return _h({
      x: m.getModel().x,
      y: m.getModel().y
    }, i) - _h({
      x: b.getModel().x,
      y: b.getModel().y
    }, i);
  });
  var o = [], s = [];
  e.forEach(function(m) {
    var b = fU(m, t, o, a.maxRoutingIterations, a.morphBuffer);
    b.forEach(function(E) {
      s.push(E);
    }), o.push(m);
  });
  for (var u = cU(e, s, a.nodeR0), f = oU(u.width, u.height, a.pixelGroupSize), l = [], c = [], h = 0; h < a.maxMarchingIterations; h++)
    if (hU(e, t, s, u, f, a), l = [], c = [], !!new iU(l, f, a.threshold).march()) {
      var d = l.map(function(m) {
        return {
          x: Math.round(m.x * a.pixelGroupSize + u.minX),
          y: Math.round(m.y * a.pixelGroupSize + u.minY)
        };
      });
      if (d) {
        var v = d.length;
        if (a.skip > 1)
          for (v = Math.floor(d.length / a.skip); v < 3 && a.skip > 1; )
            a.skip -= 1, v = Math.floor(d.length / a.skip);
        for (var p = 0, g = 0; g < v; g += 1, p += a.skip)
          c.push({
            x: d[p].x,
            y: d[p].y
          });
      }
      var y = function() {
        for (var b = 0, E = e; b < E.length; b++) {
          var x = E[b], w = c.map(function(_) {
            return [_.x, _.y];
          });
          if (!Af(w, x.getBBox().centerX, x.getBBox().centerY))
            return !1;
        }
        return !0;
      };
      if (c && y())
        return c;
      if (a.threshold *= 0.9, h <= a.maxMarchingIterations * 0.5)
        a.memberInfluenceFactor *= 1.2, a.edgeInfluenceFactor *= 1.2;
      else if (a.nonMemberInfluenceFactor !== 0 && t.length > 0)
        a.nonMemberInfluenceFactor *= 0.8;
      else
        break;
    }
  return c;
};
function cU(r, e, t) {
  var n = {
    minX: Number.POSITIVE_INFINITY,
    minY: Number.POSITIVE_INFINITY,
    maxX: Number.NEGATIVE_INFINITY,
    maxY: Number.NEGATIVE_INFINITY,
    width: 0,
    height: 0,
    x: 0,
    y: 0
  }, a = [];
  r.forEach(function(u) {
    a.push(u.getBBox());
  }), e.forEach(function(u) {
    a.push(u.getBBox());
  });
  for (var i = 0, o = a; i < o.length; i++) {
    var s = o[i];
    n.minX = (s.minX < n.minX ? s.minX : n.minX) - t, n.minY = (s.minY < n.minY ? s.minY : n.minY) - t, n.maxX = (s.maxX > n.maxX ? s.maxX : n.maxX) + t, n.maxY = (s.maxY > n.maxY ? s.maxY : n.maxY) + t;
  }
  return n.width = n.maxX - n.minX, n.height = n.maxY - n.minY, n.x = n.minX, n.y = n.minY, n;
}
function hU(r, e, t, n, a, i) {
  function o(d, v) {
    var p = Math.floor((d - v) / i.pixelGroupSize);
    return p < 0 ? 0 : p;
  }
  function s(d, v) {
    return d * i.pixelGroupSize + v;
  }
  var u = (i.nodeR0 - i.nodeR1) * (i.nodeR0 - i.nodeR1), f = (i.edgeR0 - i.edgeR1) * (i.edgeR0 - i.edgeR1), l = function(v, p) {
    var g = Math.min(o(v.minX, p + n.minX), a.width), y = Math.min(o(v.minY, p + n.minY), a.height), m = Math.min(o(v.maxX, -p + n.minX), a.width), b = Math.min(o(v.maxY, -p + n.minY), a.height);
    return [g, y, m, b];
  }, c = function(v, p) {
    for (var g = v.getBBox(), y = l(g, i.nodeR1), m = y[0], b = y[1], E = y[2], x = y[3], w = b; w < x; w += 1)
      for (var _ = m; _ < E; _ += 1)
        if (!(p < 0 && a[_ + w * a.width] <= 0)) {
          var M = s(_, n.minX), A = s(w, n.minY), S = TA({
            x: M,
            y: A
          }, {
            x: g.minX,
            y: g.minY,
            width: g.width,
            height: g.height
          });
          if (S < Math.pow(i.nodeR1, 2)) {
            var T = Math.sqrt(S) - i.nodeR1;
            a.cells[_ + w * a.width] += p * T * T;
          }
        }
  }, h = function(v, p) {
    for (var g = v.getBBox(), y = l(g, i.edgeR1), m = y[0], b = y[1], E = y[2], x = y[3], w = b; w < x; w += 1)
      for (var _ = m; _ < E; _ += 1)
        if (!(p < 0 && a.cells[_ + w * a.width] <= 0)) {
          var M = s(_, n.minX), A = s(w, n.minY), S = CA({
            x: M,
            y: A
          }, v);
          if (S < Math.pow(i.edgeR1, 2)) {
            var T = Math.sqrt(S) - i.edgeR1;
            a.cells[_ + w * a.width] += p * T * T;
          }
        }
  };
  i.nodeInfluenceFactor && r.forEach(function(d) {
    c(d, i.nodeInfluenceFactor / u);
  }), i.edgeInfluenceFactor && t.forEach(function(d) {
    h(d, i.edgeInfluenceFactor / f);
  }), i.negativeNodeInfluenceFactor && e.forEach(function(d) {
    c(d, i.negativeNodeInfluenceFactor / u);
  });
}
function Mx(r, e, t, n) {
  var a = r.getBBox(), i = t[0], o = t[1], s = t[2], u = t[3], f = {
    topLeft: {
      x: a.minX - e,
      y: a.minY - e
    },
    topRight: {
      x: a.maxX + e,
      y: a.minY - e
    },
    bottomLeft: {
      x: a.minX - e,
      y: a.maxY + e
    },
    bottomRight: {
      x: a.maxX + e,
      y: a.maxY + e
    }
  }, l = a.height * a.width;
  function c(v, p) {
    return a.width * ((v.y - a.minY + (p.y - a.minY)) * 0.5);
  }
  if (o) {
    if (i)
      return n ? f.topLeft : f.bottomRight;
    if (s)
      return n ? f.bottomLeft : f.topRight;
    var h = c(o, u);
    return h < l * 0.5 ? o.y > u.y ? n ? f.topLeft : f.bottomRight : n ? f.topRight : f.bottomLeft : o.y < u.y ? n ? f.bottomLeft : f.topRight : n ? f.bottomRight : f.topLeft;
  }
  if (u) {
    if (i)
      return n ? f.topRight : f.bottomLeft;
    if (s)
      return n ? f.bottomRight : f.topLeft;
  }
  var d = c(i, s);
  return d < l * 0.5 ? i.x > s.x ? n ? f.topLeft : f.bottomRight : n ? f.bottomLeft : f.topRight : i.x < s.x ? n ? f.topRight : f.bottomLeft : n ? f.bottomRight : f.topLeft;
}
var GC = (
  /** @class */
  function() {
    function r(e, t) {
      this.cfg = Mr(this.getDefaultCfg(), t), this.graph = e, this.id = this.cfg.id, this.group = this.cfg.group, this.members = this.cfg.members.map(function(n) {
        return He(n) ? e.findById(n) : n;
      }), this.nonMembers = this.cfg.nonMembers.map(function(n) {
        return He(n) ? e.findById(n) : n;
      }), this.setPadding(), this.setType(), this.path = this.calcPath(this.members, this.nonMembers), this.render();
    }
    return r.prototype.getDefaultCfg = function() {
      return {
        id: "g6-hull",
        type: "round-convex",
        members: [],
        nonMembers: [],
        style: {
          fill: "lightblue",
          stroke: "blue",
          opacity: 0.2
        },
        padding: 10
      };
    }, r.prototype.setPadding = function() {
      var e = this.members.length && this.members[0].getKeyShape().getCanvasBBox().width / 2;
      this.padding = this.cfg.padding > 0 ? this.cfg.padding + e : 10 + e, this.cfg.bubbleCfg = {
        nodeR0: this.padding - e,
        nodeR1: this.padding - e,
        morphBuffer: this.padding - e
      };
    }, r.prototype.setType = function() {
      this.type = this.cfg.type, this.members.length < 3 && (this.type = "round-convex"), this.type !== "round-convex" && this.type !== "smooth-convex" && this.type !== "bubble" && (console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."), this.type = "round-convex");
    }, r.prototype.calcPath = function(e, t) {
      var n, a, i;
      switch (this.type) {
        case "round-convex":
          n = _x(e), i = H0(n.map(function(o) {
            return [o.x, o.y];
          }), this.padding), a = U0(i);
          break;
        case "smooth-convex":
          n = _x(e), n.length === 2 ? (i = H0(n.map(function(o) {
            return [o.x, o.y];
          }), this.padding), a = U0(i)) : n.length > 2 && (i = BC(n.map(function(o) {
            return [o.x, o.y];
          }), this.padding), a = Y0(i));
          break;
        case "bubble":
          n = lU(e, t, this.cfg.bubbleCfg), a = n.length >= 2 && Y0(n);
          break;
      }
      return a;
    }, r.prototype.render = function() {
      this.group.addShape("path", {
        attrs: B({
          path: this.path
        }, this.cfg.style),
        id: this.id,
        name: this.cfg.id,
        capture: !1
      }), this.group.toBack();
    }, r.prototype.addMember = function(e) {
      if (e) {
        He(e) && (e = this.graph.findById(e)), this.members.push(e);
        var t = this.nonMembers.indexOf(e);
        return t > -1 && this.nonMembers.splice(t, 1), this.updateData(this.members, this.nonMembers), !0;
      }
    }, r.prototype.addNonMember = function(e) {
      if (e) {
        He(e) && (e = this.graph.findById(e)), this.nonMembers.push(e);
        var t = this.members.indexOf(e);
        return t > -1 && this.members.splice(t, 1), this.updateData(this.members, this.nonMembers), !0;
      }
    }, r.prototype.removeMember = function(e) {
      if (e) {
        He(e) && (e = this.graph.findById(e));
        var t = this.members.indexOf(e);
        return t > -1 ? (this.members.splice(t, 1), this.updateData(this.members, this.nonMembers), !0) : !1;
      }
    }, r.prototype.removeNonMember = function(e) {
      if (e) {
        He(e) && (e = this.graph.findById(e));
        var t = this.nonMembers.indexOf(e);
        return t > -1 ? (this.nonMembers.splice(t, 1), this.updateData(this.members, this.nonMembers), !0) : !1;
      }
    }, r.prototype.updateData = function(e, t) {
      var n = this;
      this.group.findById(this.id).remove(), e && (this.members = e.map(function(a) {
        return He(a) ? n.graph.findById(a) : a;
      })), t && (this.nonMembers = t.map(function(a) {
        return He(a) ? n.graph.findById(a) : a;
      })), this.path = this.calcPath(this.members, this.nonMembers), this.render();
    }, r.prototype.updateStyle = function(e) {
      var t = this.group.findById(this.id);
      t.attr(B({}, e));
    }, r.prototype.updateCfg = function(e) {
      var t = this;
      this.cfg = Mr(this.cfg, e), this.id = this.cfg.id, this.group = this.cfg.group, e.members && (this.members = this.cfg.members.map(function(n) {
        return He(n) ? t.graph.findById(n) : n;
      })), e.nonMembers && (this.nonMembers = this.cfg.nonMembers.map(function(n) {
        return He(n) ? t.graph.findById(n) : n;
      })), this.setPadding(), this.setType(), this.path = this.calcPath(this.members, this.nonMembers), this.render();
    }, r.prototype.contain = function(e) {
      var t = this, n;
      He(e) ? n = this.graph.findById(e) : n = e;
      var a, i = n.getKeyShape();
      if (n.get("type") === "path")
        a = V0(i.attr("path"));
      else {
        var o = i.getCanvasBBox();
        a = [[o.minX, o.minY], [o.maxX, o.minY], [o.maxX, o.maxY], [o.minX, o.maxY]];
      }
      return a = a.map(function(s) {
        var u = t.graph.getPointByCanvas(s[0], s[1]);
        return [u.x, u.y];
      }), MA(a, V0(this.path));
    }, r.prototype.destroy = function() {
      this.group.remove(), this.cfg = null;
    }, r;
  }()
), Uu = io, dU = "node", zC = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.sortCombos = Jg(function() {
        var a = n.get("comboSorted");
        if (!(!n || n.destroyed || a)) {
          n.set("comboSorted", !0);
          var i = [], o = {}, s = n.get("comboTrees");
          (s || []).forEach(function(f) {
            En(f, function(l) {
              return i[l.depth] ? i[l.depth].push(l.id) : i[l.depth] = [l.id], o[l.id] = l.depth, !0;
            });
          });
          var u = n.getEdges().concat(n.get("vedges"));
          (u || []).forEach(function(f) {
            var l = f.getModel(), c = o[l.source] || 0, h = o[l.target] || 0, d = Math.max(c, h);
            i[d] ? i[d].push(l.id) : i[d] = [l.id];
          }), i.forEach(function(f) {
            if (!(!f || !f.length))
              for (var l = f.length - 1; l >= 0; l--) {
                var c = n.findById(f[l]);
                c && c.toFront();
              }
          });
        }
      }, 500, !1), n.cfg = Mr(n.getDefaultCfg(), t), n.init(), n.animating = !1, n.destroyed = !1, n.cfg.enabledStack && (n.undoStack = new zs(n.cfg.maxStep), n.redoStack = new zs(n.cfg.maxStep)), n;
    }
    return e.prototype.init = function() {
      this.initCanvas();
      var t = new W6(this), n = new uG(this), a = new Q6(this), i = new J6(this);
      this.set({
        viewController: t,
        modeController: n,
        itemController: a,
        stateController: i
      }), this.initLayoutController(), this.initEventController(), this.initGroups(), this.initPlugins();
    }, e.prototype.initGroups = function() {
      var t = this.get("canvas");
      if (t) {
        var n = t.get("el"), a = (n || {}).id, i = a === void 0 ? "g6" : a, o = t.addGroup({
          id: "".concat(i, "-root"),
          className: lt.rootContainerClassName
        });
        if (this.get("groupByTypes")) {
          var s = o.addGroup({
            id: "".concat(i, "-edge"),
            className: lt.edgeContainerClassName
          }), u = o.addGroup({
            id: "".concat(i, "-node"),
            className: lt.nodeContainerClassName
          }), f = o.addGroup({
            id: "".concat(i, "-combo"),
            className: lt.comboContainerClassName
          });
          f.toBack(), this.set({
            nodeGroup: u,
            edgeGroup: s,
            comboGroup: f
          });
        }
        var l = o.addGroup({
          id: "".concat(i, "-delegate"),
          className: lt.delegateContainerClassName
        });
        this.set({
          delegateGroup: l
        }), this.set("group", o);
      }
    }, e.prototype.getDefaultCfg = function() {
      return {
        /**
         * Container could be dom object or dom id
         */
        container: void 0,
        /**
         * Canvas width
         * unit pixel if undefined force fit width
         */
        width: void 0,
        /**
         * Canvas height
         * unit pixel if undefined force fit height
         */
        height: void 0,
        /**
         * renderer canvas or svg
         * @type {string}
         */
        renderer: "canvas",
        /**
         * control graph behaviors
         */
        modes: {},
        /**
         * 注册插件
         */
        plugins: [],
        /**
         * source data
         */
        data: {},
        /**
         * Fit view padding (client scale)
         */
        fitViewPadding: 10,
        /**
         * Minimum scale size
         */
        minZoom: 0.02,
        /**
         * Maxmum scale size
         */
        maxZoom: 10,
        /**
         *  capture events
         */
        event: !0,
        /**
         * group node & edges into different graphic groups
         */
        groupByTypes: !0,
        /**
         * determine if it's a directed graph
         */
        directed: !1,
        /**
         * when data or shape changed, should canvas draw automatically
         */
        autoPaint: !0,
        /**
         * store all the node instances
         */
        nodes: [],
        /**
         * store all the edge instances
         */
        edges: [],
        /**
         * store all the combo instances
         */
        combos: [],
        /**
         * store all the edge instances which are virtual edges related to collapsed combo
         */
        vedges: [],
        /**
         * all the instances indexed by id
         */
        itemMap: {},
        /**
         * 边直接连接到节点的中心，不再考虑锚点
         */
        linkCenter: !1,
        /**
         * 默认的节点配置，data 上定义的配置会覆盖这些配置。例如：
         * defaultNode: {
         *  type: 'rect',
         *  size: [60, 40],
         *  style: {
         *    //... 样式配置项
         *  }
         * }
         * 若数据项为 { id: 'node', x: 100, y: 100 }
         * 实际创建的节点模型是 { id: 'node', x: 100, y: 100， type: 'rect', size: [60, 40] }
         * 若数据项为 { id: 'node', x: 100, y: 100, type: 'circle' }
         * 实际创建的节点模型是 { id: 'node', x: 100, y: 100， type: 'circle', size: [60, 40] }
         */
        defaultNode: {},
        /**
         * 默认边配置，data 上定义的配置会覆盖这些配置。用法同 defaultNode
         */
        defaultEdge: {},
        /**
         * 节点默认样式，也可以添加状态样式
         * 例如：
         * const graph = new G6.Graph({
         *  nodeStateStyles: {
         *    selected: { fill: '#ccc', stroke: '#666' },
         *    active: { lineWidth: 2 }
         *  },
         *  ...
         * });
         *
         */
        nodeStateStyles: {},
        /**
         * 边默认样式，用法同nodeStateStyle
         */
        edgeStateStyles: {},
        /**
         * graph 状态
         */
        states: {},
        /**
         * 是否启用全局动画
         */
        animate: !1,
        /**
         * 动画设置,仅在 animate 为 true 时有效
         */
        animateCfg: {
          /**
           * 帧回调函数，用于自定义节点运动路径，为空时线性运动
           */
          onFrame: void 0,
          /**
           * 动画时长(ms)
           */
          duration: 500,
          /**
           * 指定动画动效
           */
          easing: "easeLinear"
        },
        callback: void 0,
        // 默认不启用 undo & redo 功能
        enabledStack: !1,
        // 只有当 enabledStack 为 true 时才起作用
        maxStep: 10,
        // 存储图上的 tooltip dom，方便销毁
        tooltips: [],
        // 达到这一节点数量(默认值 1000)，将开启性能优化模式。目前包括：节点状态样式变更是否影响相关边的更新
        optimizeThreshold: 1e3
      };
    }, e.prototype.set = function(t, n) {
      return hn(t) ? this.cfg = B(B({}, this.cfg), t) : this.cfg[t] = n, t === "enabledStack" && n && !this.undoStack && !this.redoStack && (this.undoStack = new zs(this.cfg.maxStep), this.redoStack = new zs(this.cfg.maxStep)), this;
    }, e.prototype.get = function(t) {
      var n;
      return (n = this.cfg) === null || n === void 0 ? void 0 : n[t];
    }, e.prototype.getGroup = function() {
      return this.get("group");
    }, e.prototype.getContainer = function() {
      return this.get("container");
    }, e.prototype.getMinZoom = function() {
      return this.get("minZoom");
    }, e.prototype.setMinZoom = function(t) {
      return this.set("minZoom", t);
    }, e.prototype.getMaxZoom = function() {
      return this.get("maxZoom");
    }, e.prototype.setMaxZoom = function(t) {
      return this.set("maxZoom", t);
    }, e.prototype.getWidth = function() {
      return this.get("width");
    }, e.prototype.getHeight = function() {
      return this.get("height");
    }, e.prototype.clearItemStates = function(t, n) {
      He(t) && (t = this.findById(t));
      var a = this.get("itemController");
      n || (n = t.get("states")), a.clearItemStates(t, n);
      var i = this.get("stateController");
      i.updateStates(t, n, !1);
    }, e.prototype.node = function(t) {
      typeof t == "function" && this.set("nodeMapper", t);
    }, e.prototype.edge = function(t) {
      typeof t == "function" && this.set("edgeMapper", t);
    }, e.prototype.combo = function(t) {
      typeof t == "function" && this.set("comboMapper", t);
    }, e.prototype.findById = function(t) {
      return this.get("itemMap")[t];
    }, e.prototype.find = function(t, n) {
      var a, i = this.get("".concat(t, "s"));
      return Se(i, function(o, s) {
        if (n(o, s))
          return a = o, a;
      }), a;
    }, e.prototype.findAll = function(t, n) {
      var a = [];
      return Se(this.get("".concat(t, "s")), function(i, o) {
        n(i, o) && a.push(i);
      }), a;
    }, e.prototype.findAllByState = function(t, n, a) {
      return a ? this.findAll(t, function(i) {
        return i.hasState(n) && a(i);
      }) : this.findAll(t, function(i) {
        return i.hasState(n);
      });
    }, e.prototype.translate = function(t, n, a, i) {
      var o = this, s = this.get("group"), u = nr(s.getMatrix());
      if (u || (u = [1, 0, 0, 0, 1, 0, 0, 0, 1]), a) {
        var f = Cf({
          animateCfg: i,
          callback: function() {
            return o.emit("viewportchange", {
              action: "translate",
              matrix: s.getMatrix()
            });
          }
        });
        b0(s, {
          x: s.getCanvasBBox().x + t,
          y: s.getCanvasBBox().y + n
        }, a, f || {
          duration: 500,
          easing: "easeCubic"
        });
      } else
        u = Uu(u, [["t", t, n]]), s.setMatrix(u), this.emit("viewportchange", {
          action: "translate",
          matrix: u
        }), this.autoPaint();
    }, e.prototype.moveTo = function(t, n, a, i) {
      var o = this.get("group");
      b0(o, {
        x: t,
        y: n
      }, a, i || {
        duration: 500,
        easing: "easeCubic"
      }), this.emit("viewportchange", {
        action: "move",
        matrix: o.getMatrix()
      });
    }, e.prototype.fitView = function(t, n, a, i) {
      t && this.set("fitViewPadding", t);
      var o = this.get("viewController");
      n ? o.fitViewByRules(n, a, i) : o.fitView(a, i), this.autoPaint();
    }, e.prototype.fitCenter = function(t, n) {
      var a = this.get("viewController");
      a.fitCenter(t, n), this.autoPaint();
    }, e.prototype.addBehaviors = function(t, n) {
      var a = this.get("modeController");
      return a.manipulateBehaviors(t, n, !0), this;
    }, e.prototype.removeBehaviors = function(t, n) {
      var a = this.get("modeController");
      return a.manipulateBehaviors(t, n, !1), this;
    }, e.prototype.updateBehavior = function(t, n, a) {
      var i = this.get("modeController");
      return i.updateBehavior(t, n, a), this;
    }, e.prototype.zoom = function(t, n, a, i) {
      var o = this, s = this.get("group"), u = nr(s.getMatrix()) || [1, 0, 0, 0, 1, 0, 0, 0, 1], f = this.get("minZoom"), l = this.get("maxZoom"), c = this.getZoom() || 1, h = c * t, d = t, v = !1;
      if (f && h < f ? (d = f / c, v = !0) : l && h > l && (d = l / c, v = !0), n ? u = Uu(u, [["t", -n.x, -n.y], ["s", d, d], ["t", n.x, n.y]]) : u = Uu(u, [["s", d, d]]), a) {
        var p = nr(s.getMatrix());
        p || (p = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
        var g = p[0], y = g * d, m = Cf({
          animateCfg: i,
          callback: function() {
            return o.emit("viewportchange", {
              action: "zoom",
              matrix: s.getMatrix()
            });
          }
        });
        s.animate(function(b) {
          if (b === 1)
            p = u;
          else {
            var E = Ay(g, y, b) / p[0];
            n ? p = Uu(p, [["t", -n.x, -n.y], ["s", E, E], ["t", n.x, n.y]]) : p = Uu(p, [["s", E, E]]);
          }
          return {
            matrix: p
          };
        }, m);
      } else
        s.setMatrix(u), this.emit("viewportchange", {
          action: "zoom",
          matrix: u
        }), this.autoPaint();
      return !v;
    }, e.prototype.zoomTo = function(t, n, a, i) {
      var o = t / this.getZoom();
      return this.zoom(o, n, a, i);
    }, e.prototype.focusItem = function(t, n, a) {
      var i = this.get("viewController"), o = !1;
      n ? o = !0 : n === void 0 && (o = this.get("animate"));
      var s = {};
      a ? s = a : a === void 0 && (s = this.get("animateCfg")), i.focus(t, o, s), this.autoPaint();
    }, e.prototype.focusItems = function(t, n, a, i) {
      var o = this.get("viewController");
      o.focusItems(t, n, a, i);
    }, e.prototype.autoPaint = function() {
      this.get("autoPaint") && this.paint();
    }, e.prototype.paint = function() {
      this.emit("beforepaint"), this.get("canvas").draw(), this.emit("afterpaint");
    }, e.prototype.getPointByClient = function(t, n) {
      var a = this.get("viewController");
      return a.getPointByClient(t, n);
    }, e.prototype.getClientByPoint = function(t, n) {
      var a = this.get("viewController");
      return a.getClientByPoint(t, n);
    }, e.prototype.getPointByCanvas = function(t, n) {
      var a = this.get("viewController");
      return a.getPointByCanvas(t, n);
    }, e.prototype.getCanvasByPoint = function(t, n) {
      var a = this.get("viewController");
      return a.getCanvasByPoint(t, n);
    }, e.prototype.getGraphCenterPoint = function() {
      var t = this.get("group").getCanvasBBox();
      return {
        x: (t.minX + t.maxX) / 2,
        y: (t.minY + t.maxY) / 2
      };
    }, e.prototype.getViewPortCenterPoint = function() {
      return this.getPointByCanvas(this.get("width") / 2, this.get("height") / 2);
    }, e.prototype.showItem = function(t, n) {
      n === void 0 && (n = !0);
      var a = this.get("itemController"), i = a.changeItemVisibility(t, !0);
      if (n && this.get("enabledStack")) {
        var o = i.getID(), s = i.getType(), u = {}, f = {};
        switch (s) {
          case "node":
            u.nodes = [{
              id: o,
              visible: !1
            }], f.nodes = [{
              id: o,
              visible: !0
            }];
            break;
          case "edge":
            u.nodes = [{
              id: o,
              visible: !1
            }], f.edges = [{
              id: o,
              visible: !0
            }];
            break;
          case "combo":
            u.nodes = [{
              id: o,
              visible: !1
            }], f.combos = [{
              id: o,
              visible: !0
            }];
            break;
        }
        this.pushStack("visible", {
          before: u,
          after: f
        });
      }
    }, e.prototype.hideItem = function(t, n) {
      n === void 0 && (n = !0);
      var a = this.get("itemController"), i = a.changeItemVisibility(t, !1);
      if (n && this.get("enabledStack")) {
        var o = i.getID(), s = i.getType(), u = {}, f = {};
        switch (s) {
          case "node":
            u.nodes = [{
              id: o,
              visible: !0
            }], f.nodes = [{
              id: o,
              visible: !1
            }];
            break;
          case "edge":
            u.nodes = [{
              id: o,
              visible: !0
            }], f.edges = [{
              id: o,
              visible: !1
            }];
            break;
          case "combo":
            u.nodes = [{
              id: o,
              visible: !0
            }], f.combos = [{
              id: o,
              visible: !1
            }];
            break;
        }
        this.pushStack("visible", {
          before: u,
          after: f
        });
      }
    }, e.prototype.refreshItem = function(t) {
      var n = this.get("itemController");
      n.refreshItem(t);
    }, e.prototype.setAutoPaint = function(t) {
      var n = this;
      n.set("autoPaint", t);
      var a = n.get("canvas");
      a.set("autoDraw", t);
    }, e.prototype.remove = function(t, n) {
      n === void 0 && (n = !0), this.removeItem(t, n);
    }, e.prototype.removeItem = function(t, n) {
      n === void 0 && (n = !0);
      var a = t;
      if (He(t) && (a = this.findById(t)), !a && He(t))
        console.warn("The item ".concat(t, " to be removed does not exist!"));
      else if (a) {
        var i = "";
        if (a.getType && (i = a.getType()), n && this.get("enabledStack")) {
          var o = B(B({}, a.getModel()), {
            itemType: i
          }), s = {};
          switch (i) {
            case "node": {
              s.nodes = [o], s.edges = [];
              for (var u = a.getEdges(), f = u.length - 1; f >= 0; f--)
                s.edges.push(B(B({}, u[f].getModel()), {
                  itemType: "edge"
                }));
              break;
            }
            case "edge":
              s.edges = [o];
              break;
            case "combo":
              s.combos = [o];
              break;
          }
          this.pushStack("delete", {
            before: s,
            after: {}
          });
        }
        if (i === "node") {
          var l = a.getModel();
          l.comboId && this.updateComboTree(a, void 0, !1);
        }
        var c = this.get("itemController");
        if (c.removeItem(a), i === "combo") {
          var h = S0(this.get("comboTrees"));
          this.set("comboTrees", h);
        }
      }
    }, e.prototype.innerAddItem = function(t, n, a) {
      if (!sG(t, n))
        return !1;
      if (n.id && this.findById(n.id)) {
        console.warn("This item exists already. Be sure the id %c".concat(n.id, "%c is unique."), "font-size: 20px; color: red;", "");
        return;
      }
      var i, o = this.get("comboTrees") || [];
      if (t === "combo") {
        var s = this.get("itemMap"), u = !1;
        if (o.forEach(function(v) {
          u || za(v, function(p) {
            if (n.parentId === p.id) {
              u = !0;
              var g = B({
                id: n.id,
                depth: p.depth + 2
              }, n);
              p.children ? p.children.push(g) : p.children = [g], n.depth = g.depth, i = a.addItem(t, n);
            }
            var y = s[p.id];
            return u && y && y.getType && y.getType() === "combo" && a.updateCombo(y, p.children), !0;
          });
        }), !u) {
          var f = B({
            id: n.id,
            depth: 0
          }, n);
          n.depth = f.depth, o.push(f), i = a.addItem(t, n);
        }
        this.set("comboTrees", o), n.collapsed && (this.collapseCombo(i, !1), this.updateCombo(i));
      } else if (t === "node" && He(n.comboId) && o) {
        var l = this.findById(n.comboId);
        l && l.getType && l.getType() !== "combo" && console.warn("'".concat(n.comboId, "' is not a id of a combo in the graph, the node will be added without combo.")), i = a.addItem(t, n);
        var c = this.get("itemMap"), h = !1, d = !1;
        o.forEach(function(v) {
          d || h || za(v, function(p) {
            if (p.id === n.id)
              return d = !0, !1;
            if (n.comboId === p.id && !d) {
              h = !0;
              var g = nr(n);
              g.itemType = "node", p.children ? p.children.push(g) : p.children = [g], g.depth = p.depth + 1;
            }
            return h && c[p.id].getType && c[p.id].getType() === "combo" && a.updateCombo(c[p.id], p.children), !0;
          });
        });
      } else
        i = a.addItem(t, n);
      if (t === "node" && n.comboId || t === "combo" && n.parentId) {
        var l = this.findById(n.comboId || n.parentId);
        l && l.getType && l.getType() === "combo" && l.addChild(i);
      }
      return i;
    }, e.prototype.addItem = function(t, n, a, i) {
      a === void 0 && (a = !0), i === void 0 && (i = !0);
      var o = this.get("comboSorted");
      this.set("comboSorted", o && !i);
      var s = this.get("itemController"), u = this.innerAddItem(t, n, s);
      if (u === !1 || u === !0)
        return u;
      var f = this.get("combos");
      if (f && f.length > 0 && this.sortCombos(), this.autoPaint(), a && this.get("enabledStack")) {
        var l = B(B({}, u.getModel()), {
          itemType: t
        }), c = {};
        switch (t) {
          case "node":
            c.nodes = [l];
            break;
          case "edge":
            c.edges = [l];
            break;
          case "combo":
            c.combos = [l];
            break;
        }
        this.pushStack("add", {
          before: {},
          after: c
        });
      }
      return u;
    }, e.prototype.addItems = function(t, n, a) {
      t === void 0 && (t = []), n === void 0 && (n = !0), a === void 0 && (a = !0);
      var i = this.get("comboSorted");
      this.set("comboSorted", i && !a);
      for (var o = this.get("itemController"), s = [], u = 0; u < t.length; u++) {
        var f = t[u];
        f.type !== "edge" && f.type !== "vedge" ? s.push(this.innerAddItem(f.type, f.model, o)) : s.push(void 0);
      }
      for (var u = 0; u < t.length; u++) {
        var f = t[u];
        (f.type === "edge" || f.type === "vedge") && (s[u] = this.innerAddItem(f.type, f.model, o));
      }
      if (a) {
        var l = this.get("combos");
        l && l.length > 0 && this.sortCombos();
      }
      if (this.autoPaint(), n && this.get("enabledStack")) {
        for (var c = {
          nodes: [],
          edges: [],
          combos: []
        }, u = 0; u < t.length; u++) {
          var h = t[u].type, d = s[u];
          if (d && d !== !0) {
            var v = B(B({}, d.getModel()), {
              itemType: h
            });
            switch (h) {
              case "node":
                c.nodes.push(v);
                break;
              case "edge":
                c.edges.push(v);
                break;
              case "combo":
                c.combos.push(v);
                break;
            }
          }
        }
        this.pushStack("addItems", {
          before: {},
          after: c
        });
      }
      return s;
    }, e.prototype.add = function(t, n, a, i) {
      return a === void 0 && (a = !0), i === void 0 && (i = !0), this.addItem(t, n, a, i);
    }, e.prototype.updateItem = function(t, n, a) {
      var i = this;
      a === void 0 && (a = !0);
      var o = this.get("itemController"), s;
      He(t) ? s = this.findById(t) : s = t;
      var u = a && this.get("enabledStack"), f;
      u && (f = nr(s.getModel()));
      var l = "";
      s.getType && (l = s.getType());
      var c = Yn([], s.getStates(), !0);
      if (l === "combo" && Se(c, function(p) {
        return i.setItemState(s, p, !1);
      }), o.updateItem(s, n), l === "combo" && Se(c, function(p) {
        return i.setItemState(s, p, !0);
      }), u) {
        var h = {
          nodes: [],
          edges: [],
          combos: []
        }, d = {
          nodes: [],
          edges: [],
          combos: []
        }, v = B({
          id: f.id
        }, n);
        switch (l) {
          case "node":
            h.nodes.push(f), d.nodes.push(v);
            break;
          case "edge":
            h.edges.push(f), d.edges.push(v);
            break;
          case "combo":
            h.combos.push(f), d.combos.push(v);
            break;
        }
        this.pushStack("update", {
          before: h,
          after: d
        });
      }
    }, e.prototype.update = function(t, n, a) {
      a === void 0 && (a = !0), this.updateItem(t, n, a);
    }, e.prototype.setItemState = function(t, n, a) {
      He(t) && (t = this.findById(t));
      var i = this.get("itemController");
      i.setItemState(t, n, a);
      var o = this.get("stateController");
      o.updateState(t, n, a);
    }, e.prototype.priorityState = function(t, n) {
      var a = this.get("itemController");
      a.priorityState(t, n);
    }, e.prototype.data = function(t) {
      gE(t), this.set("data", t);
    }, e.prototype.render = function() {
      var t = this;
      this.set("comboSorted", !1);
      var n = this.get("data");
      if (this.get("enabledStack") && this.clearStack(), !n)
        throw new Error("data must be defined first");
      var a = n.nodes, i = a === void 0 ? [] : a, o = n.edges, s = o === void 0 ? [] : o, u = n.combos, f = u === void 0 ? [] : u;
      if (this.clear(!0), this.emit("beforerender"), t.addItems(i.map(function(g) {
        return {
          type: "node",
          model: g
        };
      }), !1, !1), (f == null ? void 0 : f.length) !== 0) {
        var l = M0(f, i);
        this.set("comboTrees", l), t.addCombos(f);
      }
      t.addItems(s.map(function(g) {
        return {
          type: "edge",
          model: g
        };
      }), !1, !1);
      var c = t.get("animate");
      (t.get("fitView") || t.get("fitCenter")) && t.set("animate", !1);
      var h = t.get("layoutController");
      if (h) {
        if (h.layout(d), this.destroyed)
          return;
      } else
        d();
      function d() {
        (t.get("comboTrees") || []).forEach(function(g) {
          za(g, function(y) {
            var m = t.findById(y.id);
            return m.getType() === "combo" && y.collapsed && (t.collapseCombo(y.id, !1), t.updateCombo(m)), !0;
          });
        }), t.get("fitView") ? t.fitView() : t.get("fitCenter") && t.fitCenter(), t.autoPaint(), t.emit("afterrender"), (t.get("fitView") || t.get("fitCenter")) && t.set("animate", c), setTimeout(function() {
          var g;
          (g = t.getCombos()) === null || g === void 0 || g.forEach(function(y) {
            y.set("animate", !0);
          });
        }, 0);
      }
      if (!this.get("groupByTypes"))
        if (f && f.length !== 0)
          this.sortCombos();
        else if (n.nodes && n.edges && n.nodes.length < n.edges.length) {
          var v = this.getNodes();
          v.forEach(function(g) {
            g.toFront();
          });
        } else {
          var p = this.getEdges();
          p.forEach(function(g) {
            g.toBack();
          });
        }
    }, e.prototype.read = function(t) {
      this.data(t), this.render();
    }, e.prototype.diffItems = function(t, n, a) {
      var i = this, o, s = this.get("itemMap");
      Se(a, function(u) {
        if (o = s[u.id], o) {
          if (i.get("animate") && t === dU) {
            var f = o.getContainer().getMatrix();
            f || (f = [1, 0, 0, 0, 1, 0, 0, 0, 1]), o.set("originAttrs", {
              x: f[6],
              y: f[7]
            });
          }
          i.updateItem(o, u, !1);
        } else
          o = i.addItem(t, u, !1);
        o && n["".concat(t, "s")].push(o);
      });
    }, e.prototype.changeData = function(t, n) {
      var a = this, i;
      n === void 0 && (n = !0);
      var o = this, s = t || o.get("data");
      if (!gE(s))
        return this;
      this.emit("beforechangedata"), n && this.get("enabledStack") && this.pushStack("changedata", {
        before: o.save(),
        after: s
      }), this.set("comboSorted", !1), this.removeHulls(), this.getNodes().map(function(E) {
        return o.clearItemStates(E);
      }), this.getEdges().map(function(E) {
        return o.clearItemStates(E);
      });
      var u = this.get("canvas"), f = u.get("localRefresh");
      u.set("localRefresh", !1), o.get("data") || (o.data(s), o.render());
      var l = this.get("itemMap"), c = {
        nodes: [],
        edges: []
      }, h = s.combos;
      if (h) {
        var d = M0(h, s.nodes);
        this.set("comboTrees", d);
      } else
        this.set("comboTrees", []);
      this.diffItems("node", c, s.nodes), Se(l, function(E, x) {
        l[x].getModel().depth = 0, !(E.getType && E.getType() === "edge") && (E.getType && E.getType() === "combo" ? (delete l[x], E.destroy()) : c.nodes.indexOf(E) < 0 && (delete l[x], o.remove(E, !1)));
      });
      for (var v = this.getCombos(), p = v.length, g = p - 1; g >= 0; g--)
        v[g].destroyed && v.splice(g, 1);
      h && (o.addCombos(h), this.get("groupByTypes") || this.sortCombos()), this.diffItems("edge", c, s.edges), Se(l, function(E, x) {
        E.getType && (E.getType() === "node" || E.getType() === "combo") || c.edges.indexOf(E) < 0 && (delete l[x], o.remove(E, !1));
      }), (this.get("comboTrees") || []).forEach(function(E) {
        za(E, function(x) {
          var w = a.findById(x.id);
          return w.getType() === "combo" && x.collapsed && a.collapseCombo(x.id, !1), !0;
        });
      }), this.set({
        nodes: c.nodes,
        edges: c.edges
      });
      var y = (this.get("layout") || {}).relayoutAtChangeData, m = y === void 0 ? !0 : y, b = this.get("layoutController");
      return m && b && (b.changeData(function() {
        setTimeout(function() {
          var E;
          (E = o.getCombos()) === null || E === void 0 || E.forEach(function(x) {
            x.set("animate", !0);
          });
        }, 0);
      }), o.get("animate") && !b.getLayoutType() ? (o.positionsAnimate(), (i = o.getCombos()) === null || i === void 0 || i.forEach(function(E) {
        return E.set("animate", !0);
      })) : o.autoPaint()), setTimeout(function() {
        u.set("localRefresh", f);
      }, 16), this.set("data", s), this.emit("afterchangedata"), this;
    }, e.prototype.addCombos = function(t) {
      var n = this, a = n.get("comboTrees"), i = this.get("itemController");
      i.addCombos(a, t);
    }, e.prototype.createCombo = function(t, n, a) {
      var i = this;
      a === void 0 && (a = !0);
      var o = this.get("itemController");
      this.set("comboSorted", !1);
      var s = "", u;
      if (t) {
        if (He(t))
          s = t, u = {
            id: t
          };
        else {
          if (s = t.id, !s) {
            console.warn("Create combo failed. Please assign a unique string id for the adding combo.");
            return;
          }
          u = t;
        }
        var f = a && this.get("enabledStack"), l = {
          nodes: [],
          combos: []
        };
        f && n.forEach(function(y) {
          var m = i.findById(y), b = m.getType();
          if (!(b !== "node" && b !== "combo")) {
            var E = m.getModel();
            l["".concat(b, "s")].push({
              id: y,
              parentId: b === "node" ? E.comboId : E.parentId
            });
          }
        });
        var c = this.get("comboTrees"), h = new Set(n), d = /* @__PURE__ */ new Map();
        c && (c.forEach(function(y) {
          za(y, function(m, b, E) {
            if (h.has(m.id)) {
              if (b) {
                var x = i.findById(b.id), w = i.findById(m.id);
                b.children.splice(E, 1), x.removeChild(w), o.updateCombo(x, b.children);
              }
              m.itemType === "combo" && d.set(m.id, m);
            }
            return !0;
          });
        }), c = c.filter(function(y) {
          return !h.has(y.id);
        }), this.set("comboTrees", c));
        var v = {
          nodes: [],
          combos: []
        }, p = n.map(function(y) {
          var m = i.findById(y), b = m.getModel(), E = "";
          m.getType && (E = m.getType());
          var x = d.get(y) || {
            id: m.getID(),
            itemType: E
          };
          return E === "combo" ? (x.parentId = s, b.parentId = s) : E === "node" && (x.comboId = s, b.comboId = s), f && v["".concat(E, "s")].push({
            id: b.id,
            parentId: s
          }), x;
        });
        u.children = p, this.addItem("combo", u, !1), this.set("comboSorted", !1), c && (c.forEach(function(y) {
          En(y, function(m) {
            return m.id === s ? (m.itemType = "combo", m.children = p, !1) : !0;
          });
        }), this.sortCombos()), f && (v.combos.push(u), this.pushStack("createCombo", {
          before: l,
          after: v
        }));
        var g = this.findById(s);
        !g.getModel().parentId && g.getChildren().combos.length && this.updateComboTree(g, void 0, !1), setTimeout(function() {
          g.set("animate", !0);
        }, 0);
      }
    }, e.prototype.uncombo = function(t, n) {
      var a = this, i, o;
      n === void 0 && (n = !0);
      var s = this, u = t;
      if (He(t) && (u = this.findById(t)), !u || u.getType && u.getType() !== "combo") {
        console.warn("The item is not a combo!");
        return;
      }
      var f = u.getModel(), l = u.getModel().parentId, c = s.get("comboTrees");
      c || (c = []);
      var h = this.get("itemMap"), d = u.get("id"), v, p = [], g = this.get("combos"), y = this.findById(l), m = n && this.get("enabledStack"), b = {};
      if (m && (b = nr(f), b.children = []), c.forEach(function(_) {
        v || za(_, function(M) {
          var A;
          if (M.id === d) {
            v = M;
            var S = u.getEdges().map(function(O) {
              return O.getID();
            });
            S.forEach(function(O) {
              a.removeItem(O, !1);
            });
            var T = g.indexOf(u);
            g.splice(T, 1), delete h[d];
            var C = nr(u.getModel());
            u.destroy(), a.emit("afterremoveitem", {
              item: C,
              type: "combo"
            });
          }
          if (l && v && M.id === l) {
            y.removeCombo(u), p = M.children;
            var T = p.indexOf(v);
            return T !== -1 && p.splice(T, 1), (A = v.children) === null || A === void 0 || A.forEach(function(L) {
              var R = a.findById(L.id), P = R.getModel();
              R.getType && R.getType() === "combo" ? (L.parentId = l, delete L.comboId, P.parentId = l, delete P.comboId) : R.getType && R.getType() === "node" && (L.comboId = l, P.comboId = l), y.addChild(R), p.push(L);
            }), a.updateCombo(y), !1;
          }
          return !0;
        });
      }), !l && v) {
        var E = c.indexOf(v);
        c.splice(E, 1), (i = v.children) === null || i === void 0 || i.forEach(function(_) {
          _.parentId = void 0;
          var M = a.findById(_.id).getModel();
          delete M.parentId, delete M.comboId, _.itemType !== "node" && c.push(_);
        });
      }
      if (m) {
        var x = {
          nodes: [],
          combos: []
        }, w = {
          nodes: [],
          combos: []
        };
        (o = v.children) === null || o === void 0 || o.forEach(function(_) {
          var M = a.findById(_.id), A = M.getType();
          A !== "node" && A !== "combo" || (x["".concat(A, "s")].push({
            id: _.id,
            parentId: d
          }), w["".concat(A, "s")].push({
            id: _.id,
            parentId: l
          }));
        }), x.combos.push(b), this.pushStack("uncombo", {
          before: x,
          after: w
        });
      }
    }, e.prototype.updateCombos = function(t) {
      var n = this;
      t === void 0 && (t = !1);
      var a = this, i = this.get("comboTrees"), o = a.get("itemController"), s = a.get("itemMap");
      (i || []).forEach(function(u) {
        za(u, function(f) {
          var l;
          if (!f)
            return !0;
          var c = s[f.id];
          if (((l = c == null ? void 0 : c.getType) === null || l === void 0 ? void 0 : l.call(c)) === "combo") {
            var h = Yn([], c.getStates(), !0);
            Se(h, function(d) {
              return n.setItemState(c, d, !1);
            }), o.updateCombo(c, f.children, t), Se(h, function(d) {
              return n.setItemState(c, d, !0);
            });
          }
          return !0;
        });
      }), a.sortCombos();
    }, e.prototype.updateCombo = function(t) {
      var n = this, a = this, i = t, o;
      if (He(t) && (i = this.findById(t)), !i || i.getType && i.getType() !== "combo") {
        console.warn("The item to be updated is not a combo!");
        return;
      }
      o = i.get("id");
      var s = this.get("comboTrees"), u = a.get("itemController"), f = a.get("itemMap");
      (s || []).forEach(function(l) {
        za(l, function(c) {
          if (!c)
            return !0;
          var h = f[c.id];
          if (o === c.id && h && h.getType && h.getType() === "combo") {
            var d = Yn([], h.getStates(), !0);
            Se(d, function(v) {
              h.getStateStyle(v) && n.setItemState(h, v, !1);
            }), u.updateCombo(h, c.children), Se(d, function(v) {
              h.getStateStyle(v) && n.setItemState(h, v, !0);
            }), o && (o = c.parentId);
          }
          return !0;
        });
      });
    }, e.prototype.updateComboTree = function(t, n, a) {
      a === void 0 && (a = !0);
      var i = this;
      this.set("comboSorted", !1);
      var o;
      He(t) ? o = i.findById(t) : o = t;
      var s = o.getModel(), u = s.comboId || s.parentId, f = "";
      if (o.getType && (f = o.getType()), n && f === "combo") {
        var l = this.get("comboTrees"), c = !0, h;
        if ((l || []).forEach(function(m) {
          h || En(m, function(b) {
            if (!h)
              return b.id === o.getID() && (h = b), !0;
          });
        }), En(h, function(m) {
          return m.id === n ? (c = !1, !1) : !0;
        }), !c) {
          console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");
          return;
        }
      }
      if (a && this.get("enabledStack")) {
        var d = {}, v = {};
        f === "combo" ? (d.combos = [{
          id: s.id,
          parentId: s.parentId
        }], v.combos = [{
          id: s.id,
          parentId: n
        }]) : f === "node" && (d.nodes = [{
          id: s.id,
          parentId: s.comboId
        }], v.nodes = [{
          id: s.id,
          parentId: n
        }]), this.pushStack("updateComboTree", {
          before: d,
          after: v
        });
      }
      if (s.parentId || s.comboId) {
        var p = this.findById(s.parentId || s.comboId);
        p && p.removeChild(o);
      }
      if (f === "combo" ? s.parentId = n : f === "node" && (s.comboId = n), n) {
        var g = this.findById(n);
        g && g.addChild(o);
      }
      if (u) {
        var g = this.findById(u);
        g && g.removeChild(o);
      }
      var y = S0(this.get("comboTrees"), s.id, n);
      this.set("comboTrees", y), this.updateCombos();
    }, e.prototype.save = function() {
      var t = [], n = [], a = [];
      return Se(this.get("nodes"), function(i) {
        t.push(i.getModel());
      }), Se(this.get("edges"), function(i) {
        n.push(i.getModel());
      }), Se(this.get("combos"), function(i) {
        a.push(i.getModel());
      }), {
        nodes: t,
        edges: n,
        combos: a
      };
    }, e.prototype.changeSize = function(t, n) {
      var a = this.get("viewController");
      return a.changeSize(t, n), this;
    }, e.prototype.refresh = function() {
      var t = this;
      if (t.emit("beforegraphrefresh"), t.get("animate"))
        t.positionsAnimate();
      else {
        var n = t.get("nodes"), a = t.get("edges"), i = t.get("edges");
        Se(n, function(o) {
          o.refresh();
        }), Se(a, function(o) {
          o.refresh();
        }), Se(i, function(o) {
          o.refresh();
        });
      }
      t.emit("aftergraphrefresh"), t.autoPaint();
    }, e.prototype.getNodes = function() {
      return this.get("nodes");
    }, e.prototype.getEdges = function() {
      return this.get("edges");
    }, e.prototype.getCombos = function() {
      return this.get("combos");
    }, e.prototype.getComboChildren = function(t) {
      if (He(t) && (t = this.findById(t)), !t || t.getType && t.getType() !== "combo") {
        console.warn("The combo does not exist!");
        return;
      }
      return t.getChildren();
    }, e.prototype.positionsAnimate = function(t) {
      var n = this;
      n.emit("beforeanimate");
      var a = n.get("animateCfg"), i = a.onFrame, o = t ? n.getNodes().concat(n.getCombos()) : n.getNodes(), s = o.map(function(f) {
        var l = f.getModel();
        return {
          id: l.id,
          x: l.x,
          y: l.y
        };
      });
      n.stopAnimate();
      var u = n.get("canvas");
      n.animating = !0, setTimeout(function() {
        u.animate(function(f) {
          Se(s, function(l) {
            var c = n.findById(l.id);
            if (!(!c || c.destroyed)) {
              var h = c.get("originAttrs"), d = c.get("model"), v = c.getContainer().getMatrix();
              if (h == null && (v && (h = {
                x: v[6],
                y: v[7]
              }), c.set("originAttrs", h || 0)), i) {
                var p = i(c, f, l, h || {
                  x: 0,
                  y: 0
                });
                c.set("model", Object.assign(d, p));
              } else
                h ? (d.x = h.x + (l.x - h.x) * f, d.y = h.y + (l.y - h.y) * f) : (d.x = l.x, d.y = l.y);
            }
          }), n.refreshPositions(t);
        }, {
          duration: a.duration,
          easing: a.easing,
          callback: function() {
            Se(o, function(l) {
              l.set("originAttrs", null);
            }), a.callback && a.callback(), n.emit("afteranimate"), n.animating = !1;
          }
        });
      }, 0);
    }, e.prototype.refreshPositions = function(t) {
      var n = this;
      n.emit("beforegraphrefreshposition");
      var a = n.get("nodes"), i = n.get("edges"), o = n.get("vedges"), s = n.get("combos"), u, f = {}, l = function(h) {
        Se(h, function(d) {
          u = d.getModel();
          var v = d.get("originAttrs");
          if (!(v && u.x === v.x && u.y === v.y)) {
            var p = d.updatePosition({
              x: u.x,
              y: u.y
            });
            f[u.id] = p, u.comboId && (f[u.comboId] = f[u.comboId] || p), u.parentId && (f[u.parentId] = f[u.parentId] || p);
          }
        });
      };
      l(s), l(a), s && s.length !== 0 && (t && l(s), n.updateCombos()), Se(i, function(c) {
        var h = c.getSource().getModel(), d = c.getTarget();
        if (!hn(d)) {
          var v = d.getModel();
          (f[h.id] || f[v.id] || c.getModel().isComboEdge) && c.refresh();
        }
      }), Se(o, function(c) {
        c.refresh();
      }), n.emit("aftergraphrefreshposition"), n.autoPaint();
    }, e.prototype.stopAnimate = function() {
      var t = this.get("canvas"), n = t.cfg.timeline;
      n && n.stopAllAnimations();
    }, e.prototype.isAnimating = function() {
      return this.animating;
    }, e.prototype.getZoom = function() {
      var t = this.get("group").getMatrix();
      return t ? t[0] : 1;
    }, e.prototype.getCurrentMode = function() {
      var t = this.get("modeController");
      return t.getMode();
    }, e.prototype.setMode = function(t) {
      var n = this.get("modeController");
      return n.setMode(t), this;
    }, e.prototype.clear = function(t) {
      var n;
      return t === void 0 && (t = !1), (n = this.get("canvas")) === null || n === void 0 || n.clear(), this.initGroups(), this.set({
        itemMap: {},
        nodes: [],
        edges: [],
        vedges: [],
        groups: [],
        combos: [],
        comboTrees: []
      }), t || this.emit("afterrender"), this;
    }, e.prototype.updateLayout = function(t, n, a, i) {
      var o = this;
      t === void 0 && (t = {}), i === void 0 && (i = !0);
      var s = this.get("layoutController");
      if (He(t) && (t = {
        type: t
      }), n) {
        var u = a;
        u || (n === "begin" ? u = {
          x: 0,
          y: 0
        } : u = {
          x: this.getWidth() / 2,
          y: this.getHeight() / 2
        }), u = this.getPointByCanvas(u.x, u.y);
        var f = ["force", "gForce", "fruchterman", "force2"];
        f.includes(t.type) || !t.type && f.includes(s == null ? void 0 : s.layoutType) ? t.center = [u.x, u.y] : this.once("afterlayout", function(h) {
          var d = o.getGroup().getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];
          u.x = u.x * d[0] + d[6], u.y = u.y * d[0] + d[7];
          var v = o.getGroup().getCanvasBBox(), p = v.minX, g = v.maxX, y = v.minY, m = v.maxY, b = {
            x: (p + g) / 2,
            y: (y + m) / 2
          };
          n === "begin" && (b.x = p, b.y = y), o.translate(u.x - b.x, u.y - b.y);
        });
      }
      var l = B({}, this.get("layout")), c = {};
      Object.assign(c, l, t), t.pipes && !t.type ? delete c.type : !t.pipes && c.type && delete c.pipes, this.set("layout", c), s && (s.isLayoutTypeSame(c) && c.gpuEnabled === l.gpuEnabled ? s.updateLayoutCfg(c) : s.changeLayout(c), i && this.get("enabledStack") && this.pushStack("layout", {
        before: l,
        after: c
      }));
    }, e.prototype.destroyLayout = function() {
      var t = this.get("layoutController");
      t == null || t.destroyLayout();
    }, e.prototype.layout = function() {
      var t, n = this.get("layoutController"), a = this.get("layout");
      if (!(!a || !n)) {
        if (a.workerEnabled) {
          n.layout();
          return;
        }
        !((t = n.layoutMethods) === null || t === void 0) && t.length ? n.relayout(!0) : n.layout();
      }
    }, e.prototype.collapseCombo = function(t, n) {
      var a = this;
      if (n === void 0 && (n = !0), !this.destroyed) {
        if (He(t) && (t = this.findById(t)), !t) {
          console.warn("The combo to be collapsed does not exist!");
          return;
        }
        this.emit("beforecollapseexpandcombo", {
          action: "collapse",
          item: t
        });
        var i = t.getModel(), o = this.get("itemController");
        o.collapseCombo(t, n), i.collapsed = !0;
        var s = this.getEdges().concat(this.get("vedges")), u = [], f = this.get("comboTrees"), l = !1;
        (f || []).forEach(function(h) {
          l || En(h, function(d) {
            if (l && d.depth <= i.depth)
              return !1;
            if (i.id === d.id && (l = !0), l) {
              var v = a.findById(d.id);
              v && v.getType && v.getType() === "combo" && (u = u.concat(v.getNodes()), u = u.concat(v.getCombos()));
            }
            return !0;
          });
        });
        var c = {};
        s.forEach(function(h) {
          var d = h.getModel(), v = d.isVEdge, p = d.size, g = p === void 0 ? 1 : p;
          if (!(h.isVisible() && !v)) {
            var y = h.getSource(), m = h.getTarget(), b = null, E;
            if (y.getModel().id === i.id || u.includes(y) && !u.includes(m) ? (b = m, E = !1) : (m.getModel().id === i.id || !u.includes(y) && u.includes(m)) && (b = y, E = !0), b) {
              if (v) {
                a.removeItem(h, !1);
                return;
              }
              for (var x = b.getModel(); !b.isVisible(); ) {
                var w = x.parentId, _ = x.comboId, M = w || _;
                if (b = a.findById(M), !b || !M)
                  return;
                x = b.getModel();
              }
              var A = x.id, S = E ? {
                source: A,
                target: i.id,
                size: g,
                isVEdge: !0
              } : {
                source: i.id,
                target: A,
                size: g,
                isVEdge: !0
              }, T = "".concat(S.source, "-").concat(S.target);
              if (c[T]) {
                c[T].size += g;
                return;
              }
              c[T] = S;
            }
          }
        }), this.addItems(Object.values(c).map(function(h) {
          return {
            type: "vedge",
            model: h
          };
        }), !1), this.emit("aftercollapseexpandcombo", {
          action: "collapse",
          item: t
        });
      }
    }, e.prototype.expandCombo = function(t, n) {
      var a = this;
      if (n === void 0 && (n = !0), He(t) && (t = this.findById(t)), !t || t.getType && t.getType() !== "combo") {
        console.warn("The combo to be collapsed does not exist!");
        return;
      }
      this.emit("beforecollapseexpandcombo", {
        action: "expand",
        item: t
      });
      var i = t.getModel(), o = this.get("itemController");
      o.expandCombo(t, n), i.collapsed = !1;
      var s = this.getEdges().concat(this.get("vedges")), u = [], f = this.get("comboTrees"), l = !1;
      (f || []).forEach(function(h) {
        l || En(h, function(d) {
          if (l && d.depth <= i.depth)
            return !1;
          if (i.id === d.id && (l = !0), l) {
            var v = a.findById(d.id);
            v && v.getType && v.getType() === "combo" && (u = u.concat(v.getNodes()), u = u.concat(v.getCombos()));
          }
          return !0;
        });
      });
      var c = {};
      s.forEach(function(h) {
        if (!(h.isVisible() && !h.getModel().isVEdge)) {
          var d = h.getSource(), v = h.getTarget(), p = d.get("id"), g = v.get("id"), y = null, m;
          if (p === i.id || u.includes(d) && !u.includes(v) ? (y = v, m = !1) : g === i.id || !u.includes(d) && u.includes(v) ? (y = d, m = !0) : u.includes(d) && u.includes(v) && d.isVisible() && v.isVisible() && h.show(), y) {
            var b = h.getModel(), E = b.isVEdge, x = b.size, w = x === void 0 ? 1 : x;
            if (E) {
              a.removeItem(h, !1);
              return;
            }
            for (var _ = y.getModel(); !y.isVisible(); ) {
              var M = _.parentId, A = _.comboId, S = M || A;
              if (y = a.findById(S), !y || !S)
                return;
              _ = y.getModel();
            }
            for (var T = _.id, C = m ? v : d, O = C.getModel(); !C.isVisible(); ) {
              var L = O.parentId, R = O.comboId, P = L || R;
              if (C = a.findById(P), !C || !P)
                return;
              if (O.comboId === i.id || O.parentId === i.id)
                break;
              O = C.getModel();
            }
            var z = O.id;
            if (T) {
              var V = m ? {
                source: T,
                target: z,
                isVEdge: !0,
                size: w
              } : {
                source: z,
                target: T,
                isVEdge: !0,
                size: w
              }, N = "".concat(V.source, "-").concat(V.target);
              if (c[N]) {
                c[N].size += w;
                return;
              }
              c[N] = V;
            }
          }
        }
      }), this.addItems(Object.values(c).map(function(h) {
        return {
          type: "vedge",
          model: h
        };
      }), !1), this.emit("aftercollapseexpandcombo", {
        action: "expand",
        item: t
      });
    }, e.prototype.collapseExpandCombo = function(t, n) {
      if (n === void 0 && (n = !0), He(t) && (t = this.findById(t)), !(!t || t.getType && t.getType() !== "combo")) {
        for (var a = t.getModel(), i = this.findById(a.parentId); i; ) {
          var o = i.getModel();
          if (o.collapsed) {
            console.warn("Fail to expand the combo since it's ancestor combo is collapsed."), i = void 0;
            return;
          }
          i = this.findById(o.parentId);
        }
        var s = a.collapsed;
        s ? this.expandCombo(t, n) : this.collapseCombo(t, n), this.updateCombo(t);
      }
    }, e.prototype.getNeighbors = function(t, n) {
      var a = t;
      return He(t) && (a = this.findById(t)), a.getNeighbors(n);
    }, e.prototype.getNodeDegree = function(t, n, a) {
      n === void 0 && (n = void 0), a === void 0 && (a = !1);
      var i = t;
      He(t) && (i = this.findById(t));
      var o = this.get("degrees");
      (!o || a) && (o = Mi(this.save()), this.set("degrees", o));
      var s = o[i.getID()], u = 0;
      if (!s)
        return 0;
      switch (n) {
        case "in":
          u = s.inDegree;
          break;
        case "out":
          u = s.outDegree;
          break;
        case "all":
          u = s;
          break;
        default:
          u = s.degree;
          break;
      }
      return u;
    }, e.prototype.getUndoStack = function() {
      return this.undoStack;
    }, e.prototype.getRedoStack = function() {
      return this.redoStack;
    }, e.prototype.getStackData = function() {
      return this.get("enabledStack") ? {
        undoStack: this.undoStack.toArray(),
        redoStack: this.redoStack.toArray()
      } : null;
    }, e.prototype.clearStack = function() {
      this.get("enabledStack") && (this.undoStack.clear(), this.redoStack.clear(), this.emit("stackchange", {
        undoStack: this.undoStack,
        redoStack: this.redoStack
      }));
    }, e.prototype.pushStack = function(t, n, a) {
      if (t === void 0 && (t = "update"), a === void 0 && (a = "undo"), !this.get("enabledStack")) {
        console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");
        return;
      }
      var i = n ? nr(n) : {
        before: {},
        after: nr(this.save())
      };
      a === "redo" ? this.redoStack.push({
        action: t,
        data: i
      }) : this.undoStack.push({
        action: t,
        data: i
      }), this.emit("stackchange", {
        action: t,
        stackType: a,
        undoStack: this.undoStack,
        redoStack: this.redoStack
      });
    }, e.prototype.getAdjMatrix = function(t, n) {
      t === void 0 && (t = !0), n === void 0 && (n = this.get("directed"));
      var a = this.get("adjMatrix");
      return (!a || !t) && (a = $o(this.save(), n), this.set("adjMatrix", a)), a;
    }, e.prototype.getShortestPathMatrix = function(t, n) {
      t === void 0 && (t = !0), n === void 0 && (n = this.get("directed"));
      var a = this.get("adjMatrix"), i = this.get("shortestPathMatrix");
      return (!a || !t) && (a = $o(this.save(), n), this.set("adjMatrix", a)), (!i || !t) && (i = Sf(this.save(), n), this.set("shortestPathMatrix", i)), i;
    }, e.prototype.on = function(t, n, a) {
      return r.prototype.on.call(this, t, n, a);
    }, e.prototype.destroy = function() {
      var t, n, a, i, o;
      this.emit("beforedestroy"), this.clear(), this.clearStack(), (t = this.get("itemController")) === null || t === void 0 || t.destroy(), (n = this.get("modeController")) === null || n === void 0 || n.destroy(), (a = this.get("viewController")) === null || a === void 0 || a.destroy(), (i = this.get("stateController")) === null || i === void 0 || i.destroy(), (o = this.get("canvas")) === null || o === void 0 || o.destroy(), this.cfg = null, this.destroyed = !0, this.redoStack = null, this.undoStack = null, this.emit("afterdestroy");
    }, e.prototype.createHull = function(t) {
      if (!t.members || t.members.length < 1) {
        console.warn("Create hull failed! The members is empty.");
        return;
      }
      var n = this.get("hullGroup"), a = this.get("hullMap");
      if (a || (a = {}, this.set("hullMap", a)), (!n || n.get("destroyed")) && (n = this.get("group").addGroup({
        id: "hullGroup"
      }), n.toBack(), this.set("hullGroup", n)), a[t.id])
        return console.warn("Existed hull id."), a[t.id];
      var i = n.addGroup({
        id: "".concat(t.id, "-container")
      }), o = new GC(this, B(B({}, t), {
        group: i
      })), s = o.id;
      return a[s] = o, o;
    }, e.prototype.getHulls = function() {
      return this.get("hullMap");
    }, e.prototype.getHullById = function(t) {
      return this.get("hullMap")[t];
    }, e.prototype.removeHull = function(t) {
      var n, a;
      He(t) ? a = this.getHullById(t) : a = t, (n = this.get("hullMap")) === null || n === void 0 || delete n[a.id], a.destroy();
    }, e.prototype.removeHulls = function() {
      var t = this.getHulls();
      !t || !Object.keys(t).length || (Object.keys(t).forEach(function(n) {
        var a = t[n];
        a.destroy();
      }), this.set("hullMap", {}));
    }, e;
  }(RM)
);
function K0(r) {
  "@babel/helpers - typeof";
  return K0 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, K0(r);
}
var xs = io, Sx = "-shape", Ep = "-label", lc = ["startArrow", "endArrow"], Ax = {
  lineWidth: 1,
  stroke: void 0,
  fill: void 0,
  lineAppendWidth: 1,
  opacity: void 0,
  strokeOpacity: void 0,
  fillOpacity: void 0,
  x: 0,
  y: 0,
  r: 10,
  width: 20,
  height: 20,
  shadowColor: void 0,
  shadowBlur: 0,
  shadowOffsetX: 0,
  shadowOffsetY: 0
}, vU = {
  lineWidth: 1,
  stroke: "#000",
  lineDash: void 0,
  startArrow: !1,
  endArrow: !1,
  opacity: void 0,
  strokeOpacity: void 0,
  fillOpacity: void 0,
  shadowColor: void 0,
  shadowBlur: 0,
  shadowOffsetX: 0,
  shadowOffsetY: 0
}, cc = {
  edge: vU,
  node: Ax,
  combo: Ax
}, q0 = "-label-bg", Ry = {
  // 默认样式及配置
  options: {
    labelCfg: {
      style: {
        fontFamily: lt.windowFontFamily
      }
    },
    descriptionCfg: {
      style: {
        fontFamily: lt.windowFontFamily
      }
    }
  },
  itemType: "",
  /**
   * 形状的类型，例如 circle，ellipse，polyline...
   */
  type: "",
  getCustomConfig: function(e) {
    return {};
  },
  getOptions: function(e, t) {
    return t === "move" || t != null && t.includes("bbox") ? e : Mr({}, this.options, this.getCustomConfig(e) || {}, e);
  },
  /**
   * 绘制节点/边，包含文本
   * @override
   * @param  {Object} cfg 节点的配置项
   * @param  {G.Group} group 节点的容器
   * @return {IShape} 绘制的图形
   */
  draw: function(e, t) {
    t.shapeMap = {}, this.mergeStyle = this.getOptions(e);
    var n = this.drawShape(e, t);
    if (n.set("className", this.itemType + Sx), t.shapeMap[this.itemType + Sx] = n, e.label) {
      var a = this.drawLabel(e, t);
      a.set("className", this.itemType + Ep), t.shapeMap[this.itemType + Ep] = a;
    }
    return n;
  },
  /**
   * 绘制完成后的操作，便于用户继承现有的节点、边
   * @param cfg
   * @param group
   * @param keyShape
   */
  afterDraw: function(e, t, n) {
  },
  drawShape: function(e, t) {
    return null;
  },
  drawLabel: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e) || {}).labelCfg, a = n || {}, i = this.getLabelStyle(e, a, t), o = i.rotate;
    delete i.rotate;
    var s = t.addShape("text", {
      attrs: i,
      draggable: !0,
      className: "text-shape",
      name: "text-shape",
      labelRelated: !0
    });
    if (t.shapeMap["text-shape"] = s, !isNaN(o) && o !== "") {
      var u = s.getBBox(), f = [1, 0, 0, 0, 1, 0, 0, 0, 1];
      if (i.rotateCenter)
        switch (i.rotateCenter) {
          case "center":
            f = xs(f, [["t", -u.width / 2, -u.height / 2], ["r", o], ["t", u.width / 2, u.height / 2]]);
            break;
          case "lefttop":
            f = xs(f, [["t", -i.x, -i.y], ["r", o], ["t", i.x, i.y]]);
            break;
          case "leftcenter":
            f = xs(f, [["t", -i.x, -i.y - u.height / 2], ["r", o], ["t", i.x, i.y + u.height / 2]]);
            break;
          default:
            f = xs(f, [["t", -u.width / 2, -u.height / 2], ["r", o], ["t", u.width / 2, u.height / 2]]);
            break;
        }
      else
        f = xs(f, [["t", -i.x, -i.y - u.height / 2], ["r", o], ["t", i.x, i.y + u.height / 2]]);
      s.setMatrix(f);
    }
    if (i.background) {
      var l = this.drawLabelBg(e, t, s), c = this.itemType + q0;
      l.set("classname", c), t.shapeMap[c] = l, s.toFront();
    }
    return s;
  },
  drawLabelBg: function(e, t, n) {
    var a = this.options.labelCfg, i = _t({}, a, e.labelCfg), o = this.getLabelBgStyleByPosition(n, i), s = t.addShape("rect", {
      name: "text-bg-shape",
      attrs: o,
      labelRelated: !0
    });
    return t.shapeMap["text-bg-shape"] = s, s;
  },
  getLabelStyleByPosition: function(e, t, n) {
    return {
      text: e.label
    };
  },
  getLabelBgStyleByPosition: function(e, t) {
    return {};
  },
  /**
   * 获取文本的配置项
   * @param cfg 节点的配置项
   * @param labelCfg 文本的配置项
   * @param group 父容器，label 的定位可能与图形相关
   */
  getLabelStyle: function(e, t, n) {
    var a = this.getLabelStyleByPosition(e, t, n), i = "".concat(this.itemType, "Label"), o = lt[i] ? lt[i].style : null;
    return B(B(B({}, o), a), t.style);
  },
  /**
   * 获取图形的配置项
   * @param cfg
   */
  getShapeStyle: function(e) {
    return e.style;
  },
  /**
   * 更新节点，包含文本
   * @override
   * @param  {Object} cfg 节点/边的配置项
   * @param  {G6.Item} item 节点/边
   */
  update: function(e, t, n) {
    this.updateShapeStyle(e, t, n), this.updateLabel(e, t, n);
  },
  updateShapeStyle: function(e, t, n) {
    var a, i = t.getContainer(), o = t.getKeyShape(), s = _t({}, o.attr(), e.style), u = function(c) {
      var h, d = s[c];
      if (hn(d)) {
        var v = ((a = i.shapeMap) === null || a === void 0 ? void 0 : a[c]) || i.find(function(p) {
          return p.get("name") === c;
        });
        v == null || v.attr(d);
      } else
        o.attr((h = {}, h[c] = d, h));
    };
    for (var f in s)
      u(f);
  },
  updateLabel: function(e, t, n) {
    var a, i, o = t.getContainer(), s = (this.mergeStyle || this.getOptions({}, n) || {}).labelCfg, u = s === void 0 ? {} : s, f = this.itemType + Ep, l = o.shapeMap[f] || o.find(function(E) {
      return E.get("className") === f;
    }), c = this.itemType + q0, h = o.shapeMap[c] || o.find(function(E) {
      return E.get("className") === c;
    });
    if (l && e.label === void 0 && (o.removeChild(l), delete o.shapeMap[f], h && (o.removeChild(h), delete o.shapeMap[c])), e.label || e.label === "")
      if (l) {
        (!n || n === "bbox|label" || this.itemType === "edge" && n !== "style") && (u = Mr(u, e.labelCfg));
        var v = this.getLabelStyleByPosition(e, u, o), p = (a = e.labelCfg) === null || a === void 0 ? void 0 : a.style, g = B(B({}, v), p), y = g.rotate;
        if (delete g.rotate, !isNaN(y) && y !== "") {
          var m = [1, 0, 0, 0, 1, 0, 0, 0, 1];
          m = xs(m, [["t", -g.x, -g.y], ["r", y], ["t", g.x, g.y]]), g.matrix = m, l.attr(g);
        } else
          ((i = l.getMatrix()) === null || i === void 0 ? void 0 : i[4]) !== 1 && l.resetMatrix(), l.attr(g);
        if (!h)
          g.background && (h = this.drawLabelBg(e, o, l), h.set("classname", c), o.shapeMap[c] = h, l.toFront());
        else if (g.background) {
          var b = this.getLabelBgStyleByPosition(l, u);
          h.attr(b);
        } else
          o.removeChild(h);
      } else {
        var d = this.drawLabel(e, o);
        d.set("className", f), o.shapeMap[f] = d;
      }
  },
  // update(cfg, item) // 默认不定义
  afterUpdate: function(e, t) {
  },
  /**
   * 设置节点的状态，主要是交互状态，业务状态请在 draw 方法中实现
   * 单图形的节点仅考虑 selected、active 状态，有其他状态需求的用户自己复写这个方法
   * @override
   * @param  {String} name 状态名称
   * @param  {String | Boolean} value 状态值
   * @param  {G6.Item} item 节点
   */
  setState: function(e, t, n) {
    var a, i, o, s = n.get("keyShape");
    if (!(!s || s.destroyed)) {
      var u = n.getType(), f = Xf(t) ? e : "".concat(e, ":").concat(t), l = this.getStateStyle(f, n), c = n.getStateStyle(f);
      if (!(!c && !l)) {
        var h = _t({}, c || l), d = n.getContainer(), v = {
          x: 1,
          y: 1,
          cx: 1,
          cy: 1,
          matrix: 1
        };
        if (u === "combo" && (v.r = 1, v.width = 1, v.height = 1), t) {
          var p = function(P) {
            var z, V = h[P];
            if (hn(V) && !lc.includes(P)) {
              var N = ((o = d.shapeMap) === null || o === void 0 ? void 0 : o[P]) || d.find(function(F) {
                return F.get("name") === P;
              });
              N == null || N.attr(V);
            } else
              s.attr((z = {}, z[P] = V, z));
          };
          for (var g in h)
            p(g);
        } else {
          var y = Zc(n.getCurrentStatesStyle()), m = n.getModel(), b = _t({}, m.style, Zc(n.getOriginStyle())), E = s.get("name"), x = s.attr(), w = {};
          Object.keys(x).forEach(function(R) {
            if (R !== "img") {
              var P = x[R];
              P && K0(P) === "object" ? w[R] = nr(P) : w[R] = P;
            }
          });
          var _ = {}, M = function(P) {
            var z = h[P];
            if (hn(z) && !lc.includes(P)) {
              var V = d.shapeMap[P] || d.find(function(q) {
                return q.get("name") === P;
              });
              if (V) {
                var N = Zc(V.attr());
                Se(z, function(q, te) {
                  if (P === E && w[te] && !v[te]) {
                    delete w[te];
                    var re = b[P][te] || cc[u][te];
                    s.attr(te, re);
                  } else if (N[te] || N[te] === 0) {
                    delete N[te];
                    var J = b[P][te] || cc[u][te];
                    V.attr(te, J);
                  }
                }), _[P] = N;
              }
            } else if (w[P] && !v[P]) {
              delete w[P];
              var F = b[P] || (b[E] ? b[E][P] : void 0) || cc[u][P];
              s.attr(P, F);
            }
          };
          for (var A in h)
            M(A);
          E ? _[E] = w : _t(_, w);
          for (var g in y)
            if (!v[g]) {
              var S = y[g];
              (!hn(S) || lc.includes(g)) && (E ? (_t(b[E], (i = {}, i[g] = S, i)), delete b[g]) : _t(b, (a = {}, a[g] = S, a)), delete y[g]);
            }
          var T = {};
          Mr(T, b, _, y);
          var C = !1, O = function(P) {
            var z, V, N = T[P];
            if (hn(N) && !lc.includes(P)) {
              var F = d.shapeMap[P] || d.find(function(te) {
                return te.get("name") === P;
              });
              F && ((F.get("type") === "text" || F.get("labelRelated")) && (delete N.x, delete N.y, delete N.matrix), P === E && (u === "combo" && (delete N.r, delete N.width, delete N.height), C = !0), F.attr(N));
            } else if (!C) {
              var q = N || cc[u][P];
              u === "combo" ? E || s.attr((z = {}, z[P] = q, z)) : s.attr((V = {}, V[P] = q, V));
            }
          };
          for (var L in T)
            O(L);
        }
      }
    }
  },
  /**
   * 获取不同状态下的样式
   *
   * @param {string} name 状态名称
   * @param {Item} item Node或Edge的实例
   * @return {object} 样式
   */
  getStateStyle: function(e, t) {
    var n = t.getModel(), a = t.getType(), i = this.getOptions(n), o = i.stateStyles, s = i.style, u = s === void 0 ? {} : s, f = n.stateStyles ? n.stateStyles[e] : o && o[e];
    return a === "combo" ? nr(f) : _t({}, u, f);
  },
  /**
   * 获取控制点
   * @param  {Object} cfg 节点、边的配置项
   * @return {Array|null} 控制点的数组,如果为 null，则没有控制点
   */
  getControlPoints: function(e) {
    return e.controlPoints;
  },
  /**
   * 获取控制点
   * @param  {Object} cfg 节点、边的配置项
   * @return {Array|null} 锚点的数组,如果为 null，则没有锚点
   */
  getAnchorPoints: function(e) {
    var t, n, a = (e == null ? void 0 : e.anchorPoints) || ((t = this.getCustomConfig(e)) === null || t === void 0 ? void 0 : t.anchorPoints) || ((n = this.options) === null || n === void 0 ? void 0 : n.anchorPoints);
    return a;
  }
}, pU = {
  itemType: "node",
  // 单个图形的类型
  shapeType: "single-node",
  /**
   * 文本相对图形的位置，默认以中心点
   * 位置包括： top, bottom, left, right, center
   * @type {String}
   */
  labelPosition: "center",
  /**
   * 文本相对偏移，当 labelPosition 不为 center 时有效
   * @type {Number}
   */
  offset: lt.nodeLabel.offset,
  /**
   * 获取节点宽高
   * @internal 返回节点的大小，以 [width, height] 的方式维护
   * @param  {Object} cfg 节点的配置项
   * @return {Array} 宽高
   */
  getSize: function(e) {
    var t, n = ((t = this.mergeStyle) === null || t === void 0 ? void 0 : t.size) || e.size || this.getOptions({}).size || lt.defaultNode.size;
    return bt(n) && n.length === 1 && (n = [n[0], n[0]]), bt(n) || (n = [n, n]), n;
  },
  // 私有方法，不希望扩展的节点复写这个方法
  getLabelStyleByPosition: function(e, t) {
    var n = t.maxLength, a = e.label;
    n && (a = PA(a, n));
    var i = t.position || this.labelPosition;
    if (i === "center")
      return {
        x: 0,
        y: 0,
        text: a,
        textBaseline: "middle",
        textAlign: "center"
      };
    var o = t.offset;
    Zt(o) && (o = this.offset);
    var s = this.getSize(e), u;
    switch (i) {
      case "top":
        u = {
          x: 0,
          y: -s[1] / 2 - o,
          textBaseline: "bottom",
          textAlign: "center"
        };
        break;
      case "bottom":
        u = {
          x: 0,
          y: s[1] / 2 + o,
          textBaseline: "top",
          textAlign: "center"
        };
        break;
      case "left":
        u = {
          x: -s[0] / 2 - o,
          y: 0,
          textBaseline: "middle",
          textAlign: "right"
        };
        break;
      default:
        u = {
          x: s[0] / 2 + o,
          y: 0,
          textBaseline: "middle",
          textAlign: "left"
        };
        break;
    }
    return u.text = a, u;
  },
  getLabelBgStyleByPosition: function(e, t) {
    var n;
    if (!e)
      return {};
    var a = (n = t.style) === null || n === void 0 ? void 0 : n.background;
    if (!a)
      return {};
    var i = e.getBBox(), o = Py(a.padding), s = i.width + o[1] + o[3], u = i.height + o[0] + o[2];
    return B(B({
      x: i.minX - o[3],
      y: i.minY - o[0]
    }, a), {
      width: s,
      height: u
    });
  },
  drawShape: function(e, t) {
    var n = this.shapeType, a = this.getShapeStyle(e), i = t.addShape(n, {
      attrs: a,
      draggable: !0,
      name: "node-shape"
    });
    return t.shapeMap["node-shape"] = i, i;
  },
  /**
   * 更新linkPoints
   * @param {Object} cfg 节点数据配置项
   * @param {Group} group Item所在的group
   */
  updateLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints, a = t.shapeMap["link-point-left"] || t.find(function(T) {
      return T.get("className") === "link-point-left";
    }), i = t.shapeMap["link-point-right"] || t.find(function(T) {
      return T.get("className") === "link-point-right";
    }), o = t.shapeMap["link-point-top"] || t.find(function(T) {
      return T.get("className") === "link-point-top";
    }), s = t.shapeMap["link-point-bottom"] || t.find(function(T) {
      return T.get("className") === "link-point-bottom";
    }), u;
    a && (u = a.attr()), i && !u && (u = i.attr()), o && !u && (u = o.attr()), s && !u && (u = s.attr()), u || (u = n);
    var f = _t({}, u, e.linkPoints), l = f.fill, c = f.stroke, h = f.lineWidth, d = f.size / 2;
    d || (d = f.r);
    var v = e.linkPoints ? e.linkPoints : {
      left: void 0,
      right: void 0,
      top: void 0,
      bottom: void 0
    }, p = v.left, g = v.right, y = v.top, m = v.bottom, b = this.getSize(e), E = b[0], x = b[1], w = {
      r: d,
      fill: l,
      stroke: c,
      lineWidth: h
    };
    if (a)
      !p && p !== void 0 ? (a.remove(), delete t.shapeMap["link-point-left"]) : a.attr(B(B({}, w), {
        x: -E / 2,
        y: 0
      }));
    else if (p) {
      var _ = "link-point-left";
      t.shapeMap[_] = t.addShape("circle", {
        attrs: B(B({}, w), {
          x: -E / 2,
          y: 0
        }),
        className: _,
        name: _,
        isAnchorPoint: !0
      });
    }
    if (i)
      !g && g !== void 0 && (i.remove(), delete t.shapeMap["link-point-right"]), i.attr(B(B({}, w), {
        x: E / 2,
        y: 0
      }));
    else if (g) {
      var M = "link-point-right";
      t.shapeMap[M] = t.addShape("circle", {
        attrs: B(B({}, w), {
          x: E / 2,
          y: 0
        }),
        className: M,
        name: M,
        isAnchorPoint: !0
      });
    }
    if (o)
      !y && y !== void 0 && (o.remove(), delete t.shapeMap["link-point-top"]), o.attr(B(B({}, w), {
        x: 0,
        y: -x / 2
      }));
    else if (y) {
      var A = "link-point-top";
      t.shapeMap[A] = t.addShape("circle", {
        attrs: B(B({}, w), {
          x: 0,
          y: -x / 2
        }),
        className: A,
        name: A,
        isAnchorPoint: !0
      });
    }
    if (s)
      !m && m !== void 0 ? (s.remove(), delete t.shapeMap["link-point-bottom"]) : s.attr(B(B({}, w), {
        x: 0,
        y: x / 2
      }));
    else if (m) {
      var S = "link-point-bottom";
      t.shapeMap[S] = t.addShape("circle", {
        attrs: B(B({}, w), {
          x: 0,
          y: x / 2
        }),
        className: S,
        name: S,
        isAnchorPoint: !0
      });
    }
  },
  updateShape: function(e, t, n, a, i) {
    var o = t.get("keyShape");
    o.attr(B({}, n)), this.updateLabel(e, t, i), a && this.updateIcon(e, t);
  },
  updateIcon: function(e, t) {
    var n = this, a = t.getContainer(), i = (this.mergeStyle || this.getOptions(e)).icon, o = e.icon ? e.icon : {
      show: void 0,
      text: void 0
    }, s = o.show, u = o.text, f = a.shapeMap["".concat(this.type, "-icon")] || a.find(function(y) {
      return y.get("name") === "".concat(n.type, "-icon");
    });
    if (f)
      if (s || s === void 0) {
        var l = _t({}, f.attr(), i), c = l.width, h = c === void 0 ? 20 : c, d = l.height, v = d === void 0 ? 20 : d;
        (l.fontFamily === "iconfont" || l.hasOwnProperty("text")) && (h = 0, v = 0), f.attr(B(B({}, l), {
          x: -h / 2,
          y: -v / 2
        }));
      } else
        f.remove(), delete a.shapeMap["".concat(this.type, "-icon")];
    else if (s) {
      var p = "".concat(this.type, "-icon");
      if (u)
        a.shapeMap[p] = a.addShape("text", {
          attrs: B({
            x: 0,
            y: 0,
            fontSize: 12,
            fill: "#000",
            stroke: "#000",
            textBaseline: "middle",
            textAlign: "center"
          }, i),
          className: p,
          name: p
        });
      else {
        var h = i.width, v = i.height;
        a.shapeMap[p] = a.addShape("image", {
          attrs: B(B({}, i), {
            x: -h / 2,
            y: -v / 2
          }),
          className: p,
          name: p
        });
      }
      var g = a.shapeMap["node-label"] || a.find(function(y) {
        return y.get("name") === "node-label";
      });
      g && g.toFront();
    }
  }
}, gU = B(B({}, Ry), pU);
yr.registerNode("single-node", gU);
var hc = "edge-shape";
function yU(r) {
  var e = r;
  return r === "start" ? e = "end" : r === "end" && (e = "start"), e;
}
var mU = {
  itemType: "edge",
  /**
   * 文本的位置
   * @type {String}
   */
  labelPosition: "center",
  /**
   * 文本的 x 偏移
   * @type {Number}
   */
  refX: 0,
  /**
   * 文本的 y 偏移
   * @type {Number}
   */
  refY: 0,
  /**
   * 文本是否跟着线自动旋转，默认 false
   * @type {Boolean}
   */
  labelAutoRotate: !1,
  // 自定义边时的配置
  options: {
    size: lt.defaultEdge.size,
    style: {
      x: 0,
      y: 0,
      stroke: lt.defaultEdge.style.stroke,
      lineAppendWidth: lt.defaultEdge.style.lineAppendWidth
    },
    labelCfg: {
      style: {
        fill: lt.edgeLabel.style.fill,
        fontSize: lt.edgeLabel.style.fontSize,
        fontFamily: lt.windowFontFamily
      }
    },
    stateStyles: B({}, lt.edgeStateStyles)
  },
  /**
   * 获取边的 path
   * @internal 供扩展的边覆盖
   * @param  {Array} points 构成边的点的集合
   * @return {Array} 构成 path 的数组
   */
  getPath: function(e) {
    var t = [];
    return Se(e, function(n, a) {
      a === 0 ? t.push(["M", n.x, n.y]) : t.push(["L", n.x, n.y]);
    }), t;
  },
  getShapeStyle: function(e) {
    var t = this.options.style, n = {
      stroke: e.color
    }, a = _t({}, t, n, e.style), i = e.size || lt.defaultEdge.size;
    e = this.getPathPoints(e);
    var o = e.startPoint, s = e.endPoint, u = this.getControlPoints(e), f = [o];
    u && (f = f.concat(u)), f.push(s);
    var l = this.getPath(f), c = _t({}, lt.defaultEdge.style, {
      stroke: lt.defaultEdge.color,
      lineWidth: i,
      path: l
    }, a);
    return c;
  },
  updateShapeStyle: function(e, t, n) {
    var a, i = t.getContainer(), o = ((a = t.getKeyShape) === null || a === void 0 ? void 0 : a.call(t)) || i.shapeMap["edge-shape"], s = e.size;
    e = this.getPathPoints(e);
    var u = e.startPoint, f = e.endPoint, l = this.getControlPoints(e), c = [u];
    l && (c = c.concat(l)), c.push(f);
    var h = o.attr(), d = e.style || {};
    d.stroke === void 0 && (d.stroke = e.color);
    var v = e.sourceNode, p = e.targetNode, g = {
      radius: d.radius
    };
    l || (g = {
      source: v,
      target: p,
      offset: d.offset,
      radius: d.radius
    });
    var y = this.getPath(c, g), m = {};
    n === "move" ? m = {
      path: y
    } : (h.endArrow && d.endArrow === !1 && (e.style.endArrow = {
      path: ""
    }), h.startArrow && d.startArrow === !1 && (e.style.startArrow = {
      path: ""
    }), m = B({}, e.style), m.lineWidth === void 0 && (m.lineWdith = (Pt(s) ? s : s == null ? void 0 : s[0]) || h.lineWidth), m.path === void 0 && (m.path = y), m.stroke === void 0 && (m.stroke = h.stroke || e.color)), o && o.attr(m);
  },
  getLabelStyleByPosition: function(e, t, n) {
    var a = t.position || this.labelPosition, i = {}, o = n == null ? void 0 : n.shapeMap[hc], s;
    a === "start" ? s = 0 : a === "end" ? s = 1 : s = 0.5;
    var u = t.refX || this.refX, f = t.refY || this.refY;
    if (e.startPoint.x === e.endPoint.x && e.startPoint.y === e.endPoint.y)
      return i.x = e.startPoint.x + u, i.y = e.startPoint.y + f, i.text = e.label, i;
    var l;
    Zt(t.autoRotate) ? l = this.labelAutoRotate : l = t.autoRotate;
    var c = DA(o, s, u, f, l);
    return i.x = c.x, i.y = c.y, i.rotate = c.rotate, i.textAlign = this._getTextAlign(a, c.angle), i.text = e.label, i;
  },
  getLabelBgStyleByPosition: function(e, t) {
    if (!e)
      return {};
    var n = e.getBBox(), a = t.style && t.style.background;
    if (!a)
      return {};
    var i = a.padding, o = n.width + i[1] + i[3], s = n.height + i[0] + i[2], u = B(B({}, a), {
      width: o,
      height: s,
      x: n.minX - i[3],
      y: n.minY - i[0],
      matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1]
    }), f;
    return Zt(t.autoRotate) ? f = this.labelAutoRotate : f = t.autoRotate, f && (u.matrix = e.attr("matrix") || [1, 0, 0, 0, 1, 0, 0, 0, 1]), u;
  },
  // 获取文本对齐方式
  _getTextAlign: function(e, t) {
    var n = "center";
    return t ? (t = t % (Math.PI * 2), e !== "center" && (t >= 0 && t <= Math.PI / 2 || t >= 3 / 2 * Math.PI && t < 2 * Math.PI ? n = e : n = yU(e)), n) : e;
  },
  /**
   * @internal 获取边的控制点
   * @param  {Object} cfg 边的配置项
   * @return {Array} 控制点的数组
   */
  getControlPoints: function(e) {
    return e.controlPoints;
  },
  /**
   * @internal 处理需要重计算点和边的情况
   * @param {Object} cfg 边的配置项
   * @return {Object} 边的配置项
   */
  getPathPoints: function(e) {
    return e;
  },
  /**
   * 绘制边
   * @override
   * @param  {Object} cfg   边的配置项
   * @param  {G.Group} group 边的容器
   * @return {IShape} 图形
   */
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e), a = t.addShape("path", {
      className: hc,
      name: hc,
      attrs: n
    });
    return t.shapeMap[hc] = a, a;
  },
  drawLabel: function(e, t) {
    var n = this.options.labelCfg, a = Mr({}, n, e.labelCfg), i = this.getLabelStyle(e, a, t), o = i.rotate;
    delete i.rotate;
    var s = t.addShape("text", {
      attrs: i,
      name: "text-shape",
      labelRelated: !0,
      draggable: !0
    });
    if (t.shapeMap["text-shape"] = s, !isNaN(o) && o !== "" && s.rotateAtStart(o), i.background) {
      var u = this.drawLabelBg(e, t, s, i, o), f = this.itemType + q0;
      u.set("classname", f), t.shapeMap[f] = u, s.toFront();
    }
    return s;
  },
  drawLabelBg: function(e, t, n, a, i) {
    var o = this.options.labelCfg, s = Mr({}, o, e.labelCfg), u = this.getLabelBgStyleByPosition(n, s), f = t.addShape("rect", {
      name: "text-bg-shape",
      attrs: u,
      labelRelated: !0
    });
    return t.shapeMap["text-bg-shape"] = f, f;
  }
}, bU = B(B({}, Ry), mU);
yr.registerEdge("single-edge", bU);
yr.registerEdge("line", {
  // 控制点不生效
  getControlPoints: function() {
  }
}, "single-edge");
yr.registerEdge("spline", {
  getPath: function(e) {
    var t = RC(e);
    return t;
  }
}, "single-edge");
yr.registerEdge("arc", {
  curveOffset: 20,
  clockwise: 1,
  getControlPoints: function(e) {
    var t = e.startPoint, n = e.endPoint, a = {
      x: (t.x + n.x) / 2,
      y: (t.y + n.y) / 2
    }, i, o;
    if (e.controlPoints !== void 0) {
      if (o = e.controlPoints[0], i = m0(t, o, n), t.x <= n.x && t.y > n.y ? this.clockwise = i.x > o.x ? 0 : 1 : t.x <= n.x && t.y < n.y ? this.clockwise = i.x > o.x ? 1 : 0 : t.x > n.x && t.y <= n.y ? this.clockwise = i.y < o.y ? 0 : 1 : this.clockwise = i.y < o.y ? 1 : 0, (o.x - t.x) / (o.y - t.y) === (n.x - t.x) / (n.y - t.y))
        return [];
    } else {
      e.curveOffset === void 0 && (e.curveOffset = this.curveOffset), bt(e.curveOffset) && (e.curveOffset = e.curveOffset[0]), e.curveOffset < 0 ? this.clockwise = 0 : this.clockwise = 1;
      var s = {
        x: n.x - t.x,
        y: n.y - t.y
      }, u = Math.atan2(s.y, s.x);
      o = {
        x: e.curveOffset * Math.cos(-Math.PI / 2 + u) + a.x,
        y: e.curveOffset * Math.sin(-Math.PI / 2 + u) + a.y
      }, i = m0(t, o, n);
    }
    var f = wh(t, i), l = [{
      x: f,
      y: f
    }];
    return l;
  },
  getPath: function(e) {
    var t = [];
    return t.push(["M", e[0].x, e[0].y]), e.length === 2 ? t.push(["L", e[1].x, e[1].y]) : t.push(["A", e[1].x, e[1].y, 0, 0, this.clockwise, e[2].x, e[2].y]), t;
  }
}, "single-edge");
yr.registerEdge("quadratic", {
  curvePosition: 0.5,
  curveOffset: -20,
  getControlPoints: function(e) {
    var t = e.controlPoints;
    if (!t || !t.length) {
      var n = e.startPoint, a = e.endPoint;
      e.curveOffset === void 0 && (e.curveOffset = this.curveOffset), e.curvePosition === void 0 && (e.curvePosition = this.curvePosition), bt(e.curveOffset) && (e.curveOffset = e.curveOffset[0]), bt(e.curvePosition) && (e.curvePosition = e.curveOffset[0]);
      var i = Ih(n, a, e.curvePosition, e.curveOffset);
      t = [i];
    }
    return t;
  },
  getPath: function(e) {
    var t = [];
    return t.push(["M", e[0].x, e[0].y]), t.push(["Q", e[1].x, e[1].y, e[2].x, e[2].y]), t;
  }
}, "single-edge");
yr.registerEdge("cubic", {
  curvePosition: [1 / 2, 1 / 2],
  curveOffset: [-20, 20],
  getControlPoints: function(e) {
    var t = e.controlPoints;
    if (e.curveOffset === void 0 && (e.curveOffset = this.curveOffset), e.curvePosition === void 0 && (e.curvePosition = this.curvePosition), Pt(e.curveOffset) && (e.curveOffset = [e.curveOffset, -e.curveOffset]), Pt(e.curvePosition) && (e.curvePosition = [e.curvePosition, 1 - e.curvePosition]), !t || !t.length || t.length < 2) {
      var n = e.startPoint, a = e.endPoint, i = Ih(n, a, e.curvePosition[0], e.curveOffset[0]), o = Ih(n, a, e.curvePosition[1], e.curveOffset[1]);
      t = [i, o];
    }
    return t;
  },
  getPath: function(e) {
    var t = [];
    return t.push(["M", e[0].x, e[0].y]), t.push(["C", e[1].x, e[1].y, e[2].x, e[2].y, e[3].x, e[3].y]), t;
  }
}, "single-edge");
yr.registerEdge("cubic-vertical", {
  curvePosition: [1 / 2, 1 / 2],
  minCurveOffset: [0, 0],
  curveOffset: void 0,
  getControlPoints: function(e) {
    var t = e.startPoint, n = e.endPoint;
    e.curvePosition === void 0 && (e.curvePosition = this.curvePosition), e.curveOffset === void 0 && (e.curveOffset = this.curveOffset), e.minCurveOffset === void 0 && (e.minCurveOffset = this.minCurveOffset), Pt(e.curveOffset) && (e.curveOffset = [e.curveOffset, -e.curveOffset]), Pt(e.minCurveOffset) && (e.minCurveOffset = [e.minCurveOffset, -e.minCurveOffset]), Pt(e.curvePosition) && (e.curvePosition = [e.curvePosition, 1 - e.curvePosition]);
    var a = n.y - t.y, i = [0, 0];
    e.curveOffset ? i = e.curveOffset : Math.abs(a) < Math.abs(e.minCurveOffset[0]) && (i = e.minCurveOffset);
    var o = {
      x: t.x,
      y: t.y + a * this.curvePosition[0] + i[0]
    }, s = {
      x: n.x,
      y: n.y - a * this.curvePosition[1] + i[1]
    };
    return [o, s];
  }
}, "cubic");
yr.registerEdge("cubic-horizontal", {
  curvePosition: [1 / 2, 1 / 2],
  minCurveOffset: [0, 0],
  curveOffset: void 0,
  getControlPoints: function(e) {
    var t = e.startPoint, n = e.endPoint;
    e.curvePosition === void 0 && (e.curvePosition = this.curvePosition), e.curveOffset === void 0 && (e.curveOffset = this.curveOffset), e.minCurveOffset === void 0 && (e.minCurveOffset = this.minCurveOffset), Pt(e.curveOffset) && (e.curveOffset = [e.curveOffset, -e.curveOffset]), Pt(e.minCurveOffset) && (e.minCurveOffset = [e.minCurveOffset, -e.minCurveOffset]), Pt(e.curvePosition) && (e.curvePosition = [e.curvePosition, 1 - e.curvePosition]);
    var a = n.x - t.x, i = [0, 0];
    e.curveOffset ? i = e.curveOffset : Math.abs(a) < Math.abs(e.minCurveOffset[0]) && (i = e.minCurveOffset);
    var o = {
      x: t.x + a * this.curvePosition[0] + i[0],
      y: t.y
    }, s = {
      x: n.x - a * this.curvePosition[1] + i[1],
      y: n.y
    }, u = [o, s];
    return u;
  }
}, "cubic");
yr.registerEdge("loop", {
  getPathPoints: function(e) {
    return OA(e);
  },
  getControlPoints: function(e) {
    return e.controlPoints;
  },
  afterDraw: function(e) {
    e.controlPoints = void 0;
  },
  afterUpdate: function(e) {
    e.controlPoints = void 0;
  }
}, "cubic");
var EU = {
  itemType: "combo",
  // 单个图形的类型
  shapeType: "single-combo",
  /**
   * Combo 标题文本相对图形的位置，默认为 top
   * 位置包括： top, bottom, left, right, center
   * @type {String}
   */
  labelPosition: "top",
  /**
   * 标题文本相对偏移，当 labelPosition 不为 center 时有效
   * @type {Number}
   */
  refX: lt.comboLabel.refX,
  refY: lt.comboLabel.refY,
  options: {
    style: {
      stroke: lt.defaultCombo.style.stroke,
      fill: lt.defaultCombo.style.fill,
      lineWidth: lt.defaultCombo.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: lt.comboLabel.style.fill,
        fontSize: lt.comboLabel.style.fontSize,
        fontFamily: lt.windowFontFamily
      }
    },
    stateStyles: B({}, lt.comboStateStyles),
    collapsedSubstituteIcon: {
      show: !1,
      img: "https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"
    }
  },
  /**
   * 获取 Combo 宽高
   * @internal 返回 Combo 的大小，以 [width, height] 的方式维护
   * @param  {Object} cfg Combo 的配置项
   * @return {Array} 宽高
   */
  getSize: function(e) {
    var t = nr(e.size || this.options.size || lt.defaultCombo.size);
    return bt(t) && t.length === 1 && (t = [t[0], t[0]]), bt(t) || (t = [t, t]), t;
  },
  // 私有方法，不希望扩展的 Combo 复写这个方法
  getLabelStyleByPosition: function(e, t) {
    var n = t.position || this.labelPosition, a = e.style, i = e.padding || this.options.padding;
    bt(i) && (i = Math.max.apply(Math, i));
    var o = t.refX, s = t.refY;
    Zt(o) && (o = this.refX), Zt(s) && (s = this.refY);
    var u = this.getSize(e), f = Math.max(a.r, u[0] / 2) || u[0] / 2, l = f + i, c;
    switch (n) {
      case "top":
        c = {
          x: 0,
          y: -l - s,
          textBaseline: "bottom",
          textAlign: "center"
        };
        break;
      case "bottom":
        c = {
          x: 0,
          y: l + s,
          textBaseline: "bottom",
          textAlign: "center"
        };
        break;
      case "left":
        c = {
          x: -l + o,
          y: 0,
          textAlign: "left"
        };
        break;
      case "center":
        c = {
          x: 0,
          y: 0,
          text: e.label,
          textAlign: "center"
        };
        break;
      default:
        c = {
          x: l + o,
          y: 0,
          textAlign: "right"
        };
        break;
    }
    return c.text = e.label, c;
  },
  drawShape: function(e, t) {
    var n = this.shapeType, a = this.getShapeStyle(e), i = t.addShape(n, {
      attrs: a,
      draggable: !0,
      name: "combo-shape"
    });
    return i;
  },
  updateCollapsedIcon: function(e, t, n) {
    var a = e.collapsed, i = e.collapsedSubstituteIcon, o = i === void 0 ? {} : i, s = Object.assign({}, this.options.collapsedSubstituteIcon, o), u = s.show, f = s.img, l = s.width, c = s.height, h = t.getContainer(), d = h.find(function(y) {
      return y.get("name") === "combo-collapsed-substitute-icon";
    }), v = d && !d.destroyed, p = t.get("keyShape");
    if (a && u) {
      if (v)
        d.show();
      else {
        var g = {
          width: l || n.r * 2 || n.width,
          height: c || n.r * 2 || n.height
        };
        d = h.addShape("image", {
          attrs: B({
            img: f,
            x: -g.width / 2,
            y: -g.height / 2
          }, g),
          name: "combo-collapsed-substitute-icon",
          draggable: !0
        });
      }
      p.hide();
    } else
      v && (d.hide(), p.show());
  },
  updateShape: function(e, t, n) {
    var a = this, i = t.get("keyShape"), o = t.get("animate"), s = o && (e.animate === void 0 ? this.options.animate : e.animate);
    s && i.animate ? (e.collapsed || this.updateCollapsedIcon(e, t, n), i.animate(n, {
      duration: 200,
      easing: "easeLinear",
      callback: function() {
        e.collapsed && a.updateCollapsedIcon(e, t, n);
      }
    })) : (i.attr(B({}, n)), this.updateCollapsedIcon(e, t, n)), this.updateLabel(e, t);
  }
}, xU = B(B({}, Ry), EU);
yr.registerCombo("single-combo", xU);
yr.registerCombo("circle", {
  // 自定义节点时的配置
  options: {
    size: [lt.defaultCombo.size[0], lt.defaultCombo.size[0]],
    padding: Math.max.apply(Math, lt.defaultCombo.padding),
    animate: !0,
    style: {
      stroke: lt.defaultCombo.style.stroke,
      fill: lt.defaultCombo.style.fill,
      lineWidth: lt.defaultCombo.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: lt.comboLabel.style.fill,
        fontSize: lt.comboLabel.style.fontSize
      },
      refX: 0,
      refY: 0
    },
    stateStyles: B({}, lt.comboStateStyles),
    collapsedSubstituteIcon: {
      show: !1,
      img: "https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"
    }
  },
  shapeType: "circle",
  // 文本位置
  labelPosition: "top",
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e);
    delete n.height, delete n.width;
    var a = t.addShape("circle", {
      attrs: n,
      className: "circle-combo",
      name: "circle-combo",
      draggable: !0
    });
    return a;
  },
  /**
   * 获取 Combo 的样式，供基于该 Combo 自定义时使用
   * @param {Object} cfg Combo 数据模型
   * @return {Object} Combo 的样式
   */
  getShapeStyle: function(e) {
    var t = this.options.style, n = e.padding || this.options.padding;
    bt(n) && (n = Math.max.apply(Math, n));
    var a = {
      stroke: e.color
    }, i = _t({}, t, a, e.style), o = e.collapsed && e.fixCollapseSize ? e.fixCollapseSize : e.fixSize, s;
    if (o)
      s = Pt(o) ? o / 2 : o[0] / 2;
    else {
      var u = this.getSize(e);
      !Pt(i.r) || isNaN(i.r) ? s = u[0] / 2 || lt.defaultCombo.style.r : s = Math.max(i.r, u[0] / 2) || u[0] / 2;
    }
    i.r = s + n;
    var f = B({
      x: 0,
      y: 0
    }, i);
    return e.style ? e.style.r = s : e.style = {
      r: s
    }, f;
  },
  update: function(e, t) {
    var n = this.getSize(e), a = e.padding || this.options.padding;
    bt(a) && (a = Math.max.apply(Math, a));
    var i = nr(e.style), o = e.collapsed && e.fixCollapseSize ? e.fixCollapseSize : e.fixSize, s;
    o ? s = Pt(o) ? o / 2 : o[0] / 2 : s = Math.max(i.r, n[0] / 2) || n[0] / 2, i.r = s + a;
    var u = t.get("sizeCache");
    u && (u.r = i.r);
    var f = {
      stroke: e.color
    }, l = t.get("keyShape"), c = _t({}, l.attr(), f, i);
    e.style ? e.style.r = s : e.style = {
      r: s
    }, this.updateShape(e, t, c, !0);
  }
}, "single-combo");
yr.registerCombo("rect", {
  // 自定义 Combo 时的配置
  options: {
    size: [40, 5],
    padding: [25, 20, 15, 20],
    animate: !0,
    style: {
      radius: 0,
      stroke: lt.defaultCombo.style.stroke,
      fill: lt.defaultCombo.style.fill,
      lineWidth: lt.defaultCombo.style.lineWidth
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: lt.comboLabel.style.fill,
        fontSize: lt.comboLabel.style.fontSize,
        fontFamily: lt.windowFontFamily
      }
    },
    // 连接点，默认为左右
    anchorPoints: [[0, 0.5], [1, 0.5]],
    stateStyles: B({}, lt.comboStateStyles),
    collapsedSubstituteIcon: {
      show: !1,
      img: "https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"
    }
  },
  shapeType: "rect",
  labelPosition: "top",
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e), a = t.addShape("rect", {
      attrs: n,
      className: "rect-combo",
      name: "rect-combo",
      draggable: !0
    });
    return a;
  },
  // 私有方法，不希望扩展的 Combo 复写这个方法
  getLabelStyleByPosition: function(e, t) {
    var n = t.position || this.labelPosition, a = e.style, i = e.padding || this.options.padding;
    Pt(i) && (i = [i, i, i, i]);
    var o = t.refX, s = t.refY;
    Zt(o) && (o = this.refX), Zt(s) && (s = this.refY);
    var u = -a.width / 2 - i[3], f = a.width / 2 + i[1], l = -a.height / 2 - i[0], c = a.height / 2 + i[2], h;
    switch (n) {
      case "top":
        h = {
          x: u + o,
          y: l + s,
          textBaseline: "top",
          textAlign: "left"
        };
        break;
      case "bottom":
        h = {
          x: 0,
          y: c + s,
          textBaseline: "top",
          textAlign: "center"
        };
        break;
      case "left":
        h = {
          x: u + s,
          y: 0,
          textAlign: "left"
        };
        break;
      case "center":
        h = {
          x: 0,
          y: 0,
          text: e.label,
          textAlign: "center"
        };
        break;
      case "top-center":
        h = {
          x: 0,
          y: l + s,
          textBaseline: "top",
          textAlign: "center"
        };
        break;
      default:
        h = {
          x: f + o,
          y: 0,
          textAlign: "right"
        };
        break;
    }
    return h.text = e.label, h;
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = this.options.style, n = e.padding || this.options.padding;
    Pt(n) && (n = [n, n, n, n]);
    var a = {
      stroke: e.color
    }, i = _t({}, t, a, e.style), o = this.getSize(e), s, u, f = e.collapsed && e.fixCollapseSize ? e.fixCollapseSize : e.fixSize;
    f ? Pt(f) ? (s = f, u = f) : (s = f[0], u = f[1]) : (!Pt(i.width) || isNaN(i.width) ? s = o[0] || lt.defaultCombo.style.width : s = Math.max(i.width, o[0]) || o[0], !Pt(i.height) || isNaN(i.height) ? u = o[1] || lt.defaultCombo.style.height : u = Math.max(i.height, o[1]) || o[1]);
    var l = -s / 2 - n[3], c = -u / 2 - n[0];
    i.width = s + n[1] + n[3], i.height = u + n[0] + n[2];
    var h = B({
      x: l,
      y: c
    }, i);
    return e.style ? (e.style.width = s, e.style.height = u) : e.style = {
      width: s,
      height: u
    }, h;
  },
  update: function(e, t) {
    var n = this.getSize(e), a = e.padding || this.options.padding;
    Pt(a) && (a = [a, a, a, a]);
    var i = nr(e.style), o, s, u = e.collapsed && e.fixCollapseSize ? e.fixCollapseSize : e.fixSize;
    u ? Pt(u) ? (o = u, s = u) : (o = u[0], s = u[1]) : (o = Math.max(i.width, n[0]) || n[0], s = Math.max(i.height, n[1]) || n[1]), i.width = o + a[1] + a[3], i.height = s + a[0] + a[2];
    var f = t.get("sizeCache");
    f && (f.width = i.width, f.height = i.height), i.x = -o / 2 - a[3], i.y = -s / 2 - a[0];
    var l = {
      stroke: e.color
    }, c = t.get("keyShape"), h = _t({}, c.attr(), l, i);
    e.style ? (e.style.width = o, e.style.height = s) : e.style = {
      width: o,
      height: s
    }, this.updateShape(e, t, h, !1);
  }
}, "single-combo");
yr.registerNode("simple-circle", {
  // 自定义节点时的配置
  options: {
    size: lt.defaultNode.size,
    style: {
      x: 0,
      y: 0,
      stroke: lt.defaultNode.style.stroke,
      fill: lt.defaultNode.style.fill,
      lineWidth: lt.defaultNode.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: lt.nodeLabel.style.fill,
        fontSize: lt.nodeLabel.style.fontSize,
        fontFamily: lt.windowFontFamily
      }
    },
    stateStyles: B({}, lt.nodeStateStyles)
  },
  shapeType: "simple-circle",
  // 文本位置
  labelPosition: "center",
  shapeMap: {},
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e), a = "".concat(this.type, "-keyShape"), i = t.addShape("circle", {
      attrs: n,
      className: "".concat(this.type, "-keyShape"),
      name: a,
      draggable: !0
    });
    return t.shapeMap[a] = i, i;
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = Mr({}, t, n), i = this.getSize(e), o = i[0] / 2, s = B({
      x: 0,
      y: 0,
      r: o
    }, a);
    return s;
  },
  update: function(e, t, n) {
    var a = this.getSize(e), i = {
      stroke: e.color,
      r: a[0] / 2
    }, o = t.get("keyShape"), s = Mr({}, o.attr(), i, e.style);
    this.updateShape(e, t, s, !0, n);
  }
}, "single-node");
yr.registerNode("simple-rect", {
  // 自定义节点时的配置
  options: {
    size: [100, 30],
    style: {
      radius: 0,
      stroke: lt.defaultNode.style.stroke,
      fill: lt.defaultNode.style.fill,
      lineWidth: lt.defaultNode.style.lineWidth
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: lt.nodeLabel.style.fill,
        fontSize: lt.nodeLabel.style.fontSize,
        fontFamily: lt.windowFontFamily
      }
    },
    // 连接点，默认为左右
    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]
    anchorPoints: [[0, 0.5], [1, 0.5]],
    stateStyles: B({}, lt.nodeStateStyles)
  },
  shapeType: "simple-rect",
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e), a = t.addShape("rect", {
      attrs: n,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    return a;
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getSize(e), o = a.width || i[0], s = a.height || i[1], u = B({
      x: -o / 2,
      y: -s / 2,
      width: o,
      height: s
    }, a);
    return u;
  },
  update: function(e, t, n) {
    t.getContainer();
    var a = (this.mergeStyle || this.getOptions(e)).style, i = this.getSize(e), o = t.get("keyShape");
    e.size || (i[0] = o.attr("width") || a.width, i[1] = o.attr("height") || a.height);
    var s = {
      stroke: e.color,
      x: -i[0] / 2,
      y: -i[1] / 2,
      width: i[0],
      height: i[1]
    }, u = _t({}, a, o.attr(), s);
    u = _t(u, e.style), this.updateShape(e, t, u, !1, n);
  }
}, "single-node");
yr.registerNode("image", {
  options: {
    img: "https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",
    size: 200,
    labelCfg: {
      style: {
        fontFamily: lt.windowFontFamily
      }
    },
    clipCfg: {
      show: !1,
      type: "circle",
      // circle
      r: 50,
      // ellipse
      rx: 50,
      ry: 35,
      // rect
      width: 50,
      height: 35,
      // polygon
      points: [[30, 12], [12, 30], [30, 48], [48, 30]],
      // path
      path: [["M", 25, 25], ["L", 50, 25], ["A", 12.5, 12.5, 0, 1, 1, 50, 50], ["A", 12.5, 12.5, 0, 1, 0, 50, 50], ["L", 25, 75], ["Z"]],
      // 坐标
      x: 0,
      y: 0
      // clip 的属性样式
      // style: {
      //   lineWidth: 1
      // },
    }
  },
  shapeType: "image",
  labelPosition: "bottom",
  drawShape: function(e, t) {
    var n = this.shapeType, a = this.getShapeStyle(e);
    delete a.fill;
    var i = t.addShape(n, {
      attrs: a,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    return this.drawClip(e, i), i;
  },
  drawClip: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).clipCfg;
    if (n.show) {
      var a = n.type, i = n.x, o = n.y, s = n.style;
      if (a === "circle") {
        var u = n.r;
        t.setClip({
          type: "circle",
          attrs: B({
            r: u,
            x: i,
            y: o
          }, s)
        });
      } else if (a === "rect") {
        var f = n.width, l = n.height, c = i - f / 2, h = o - l / 2;
        t.setClip({
          type: "rect",
          attrs: B({
            x: c,
            y: h,
            width: f,
            height: l
          }, s)
        });
      } else if (a === "ellipse") {
        var d = n.rx, v = n.ry;
        t.setClip({
          type: "ellipse",
          attrs: B({
            x: i,
            y: o,
            rx: d,
            ry: v
          }, s)
        });
      } else if (a === "polygon") {
        var p = n.points;
        t.setClip({
          type: "polygon",
          attrs: B({
            points: p
          }, s)
        });
      } else if (a === "path") {
        var g = n.path;
        t.setClip({
          type: "path",
          attrs: B({
            path: g
          }, s)
        });
      }
    }
  },
  getShapeStyle: function(e) {
    var t = this.mergeStyle || this.getOptions(e), n = t.style, a = t.img, i = this.getSize(e), o = i[0], s = i[1];
    n && (o = n.width || i[0], s = n.height || i[1]);
    var u = B({
      x: -o / 2,
      y: -s / 2,
      width: o,
      height: s,
      img: a
    }, n);
    return u;
  },
  updateShapeStyle: function(e, t) {
    var n = t.getContainer(), a = "".concat(this.itemType, "-shape"), i = n.shapeMap[a] || n.find(function(s) {
      return s.get("className") === a;
    }) || t.getKeyShape(), o = this.getShapeStyle(e);
    i && !i.destroyed && i.attr(o);
  }
}, "single-node");
const wU = {
  triangle: function(e, t, n) {
    e === void 0 && (e = 10), t === void 0 && (t = 15), n === void 0 && (n = 0);
    var a = n * 2, i = "M ".concat(a, ",0 L ").concat(a + t, ",-").concat(e / 2, " L ").concat(a + t, ",").concat(e / 2, " Z");
    return i;
  },
  vee: function(e, t, n) {
    e === void 0 && (e = 15), t === void 0 && (t = 20), n === void 0 && (n = 0);
    var a = n * 2, i = "M ".concat(a, ",0 L ").concat(a + t, ",-").concat(e / 2, `
        L `).concat(a + 2 * t / 3, ",0 L ").concat(a + t, ",").concat(e / 2, " Z");
    return i;
  },
  circle: function(e, t) {
    e === void 0 && (e = 5), t === void 0 && (t = 0);
    var n = t * 2, a = "M ".concat(n, `, 0
            a `).concat(e, ",").concat(e, " 0 1,0 ").concat(e * 2, `,0
            a `).concat(e, ",").concat(e, " 0 1,0 ").concat(-e * 2, ",0");
    return a;
  },
  rect: function(e, t, n) {
    e === void 0 && (e = 10), t === void 0 && (t = 10), n === void 0 && (n = 0);
    var a = n * 2, i = "M ".concat(a, ",").concat(-e / 2, ` 
        L `).concat(a + t, ",").concat(-e / 2, ` 
        L `).concat(a + t, ",").concat(e / 2, ` 
        L `).concat(a, ",").concat(e / 2, " Z");
    return i;
  },
  diamond: function(e, t, n) {
    e === void 0 && (e = 15), t === void 0 && (t = 15), n === void 0 && (n = 0);
    var a = n * 2, i = "M ".concat(a, `,0 
        L `).concat(a + t / 2, ",").concat(-e / 2, ` 
        L `).concat(a + t, `,0 
        L `).concat(a + t / 2, ",").concat(e / 2, " Z");
    return i;
  },
  triangleRect: function(e, t, n, a, i, o) {
    e === void 0 && (e = 15), t === void 0 && (t = 15), n === void 0 && (n = 15), a === void 0 && (a = 3), i === void 0 && (i = 5), o === void 0 && (o = 0);
    var s = o * 2, u = s + t + i, f = "M ".concat(s, ",0 L ").concat(s + t, ",-").concat(e / 2, " L ").concat(s + t, ",").concat(e / 2, ` Z
            M `).concat(u, ", -").concat(n / 2, `
            L `).concat(u + a, " -").concat(n / 2, `
            L `).concat(u + a, " ").concat(n / 2, `
            L `).concat(u, " ").concat(n / 2, `
            Z`);
    return f;
  }
}, _U = {
  collapse: function(e, t, n) {
    return [["M", e - n, t], ["a", n, n, 0, 1, 0, n * 2, 0], ["a", n, n, 0, 1, 0, -n * 2, 0], ["M", e - n + 4, t], ["L", e + n - 4, t]];
  },
  expand: function(e, t, n) {
    return [["M", e - n, t], ["a", n, n, 0, 1, 0, n * 2, 0], ["a", n, n, 0, 1, 0, -n * 2, 0], ["M", e - n + 4, t], ["L", e - n + 2 * n - 4, t], ["M", e - n + n, t - n + 4], ["L", e, t + n - 4]];
  },
  upTriangle: function(e, t, n) {
    var a = n * Math.cos(Math.PI / 6), i = n * Math.sin(Math.PI / 6);
    return [["M", e - a, t + i], ["L", e + a, t + i], ["L", e, t - n], ["Z"]];
  },
  downTriangle: function(e, t, n) {
    var a = n * Math.cos(Math.PI / 6), i = n * Math.sin(Math.PI / 6);
    return [["M", e - a, t - i], ["L", e + a, t - i], ["L", e, t + n], ["Z"]];
  }
};
var MU = ["#5F95FF", "#61DDAA", "#65789B", "#F6BD16", "#7262FD", "#78D3F8", "#9661BC", "#F6903D", "#008685", "#F08BB4"];
const SU = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  defaultSubjectColors: MU
}, Symbol.toStringTag, { value: "Module" }));
var UC = function(e) {
  return e === "force" || e === "g6force" || e === "gForce" || e === "force2";
};
const AU = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  isForce: UC
}, Symbol.toStringTag, { value: "Module" }));
var CU = io, xa = B(B(B(B(B(B(B({}, F6), oG), nU), Z4), SU), AU), {
  transform: CU,
  mat3: WM
}), jC = (
  /** @class */
  function() {
    function r(e) {
      this.graph = e, this.layoutCfg = e.get("layout") || {}, this.layoutType = this.getLayoutType(), this.layoutMethods = [], this.initLayout();
    }
    return r.prototype.initLayout = function() {
    }, r.prototype.getLayoutType = function() {
      return this.getLayoutCfgType(this.layoutCfg);
    }, r.prototype.getLayoutCfgType = function(e) {
      var t = e.type;
      if (t)
        return t;
      var n = e.pipes;
      return Array.isArray(n) ? n.map(function(a) {
        return (a == null ? void 0 : a.type) || "";
      }) : null;
    }, r.prototype.isLayoutTypeSame = function(e) {
      var t = this.getLayoutCfgType(e), n = Array.isArray(this.layoutType), a = Array.isArray(t);
      return n && a ? this.layoutType.every(function(i, o) {
        return i === t[o];
      }) : Array.isArray(t) || Array.isArray(this.layoutType) ? !1 : (e == null ? void 0 : e.type) === this.layoutType;
    }, r.prototype.refreshLayout = function() {
      var e = this, t = e.graph, n = e.layoutType, a = e.layoutCfg, i = a === void 0 ? {} : a;
      if (t) {
        var o = i.animate, s = o === void 0 && (n === "force" || n === "force2"), u = UC(n) && (o || s);
        t.get("animate") && !u ? t.positionsAnimate(n === "comboCombined") : t.refreshPositions(n === "comboCombined");
      }
    }, r.prototype.changeLayout = function(e) {
      var t = e.disableTriggerLayout, n = tn(e, ["disableTriggerLayout"]);
      this.layoutCfg = n, this.layoutType = n.type || this.layoutType, !t && this.layout();
    }, r.prototype.changeData = function(e) {
      this.layout(e);
    }, r.prototype.destoryLayoutMethods = function() {
      var e = this.layoutMethods, t = [];
      return e == null || e.forEach(function(n) {
        var a, i = (a = n.getType) === null || a === void 0 ? void 0 : a.call(n);
        i && t.push(i), n.destroy();
      }), this.layoutMethods = [], t;
    }, r.prototype.destroyLayout = function() {
      this.destoryLayoutMethods();
      var e = this.graph;
      e && !e.get("destroyed") && e.set("layout", void 0), this.layoutCfg = void 0, this.layoutType = void 0, this.layoutMethods = void 0;
    }, r.prototype.setDataFromGraph = function() {
      for (var e, t = [], n = [], a = [], i = [], o = [], s = [], u = [], f = this.graph.getNodes(), l = this.graph.getEdges(), c = this.graph.getCombos(), h = f.length, d = 0; d < h; d++) {
        var v = f[d];
        if (!(!v || v.destroyed)) {
          var p = v.getModel();
          if (!v.isVisible()) {
            n.push(p);
            continue;
          }
          t.push(p);
        }
      }
      for (var g = l.length, d = 0; d < g; d++) {
        var y = l[d];
        if (!(!y || y.destroyed)) {
          var p = y.getModel();
          if (!y.isVisible()) {
            i.push(p);
            continue;
          }
          p.isComboEdge ? o.push(p) : a.push(p);
        }
      }
      for (var m = c.length, d = 0; d < m; d++) {
        var b = c[d];
        if (!b.destroyed) {
          var p = b.getModel();
          if (!b.isVisible()) {
            u.push(p);
            continue;
          }
          s.push(p);
        }
      }
      return {
        nodes: t,
        hiddenNodes: n,
        edges: a,
        hiddenEdges: i,
        combos: s,
        hiddenCombos: u,
        comboEdges: o,
        vedges: (e = this.graph.get("vedges")) === null || e === void 0 ? void 0 : e.map(function(E) {
          return E.getModel();
        })
      };
    }, r.prototype.relayout = function(e) {
      var t = this, n = this, a = n.graph, i = n.layoutMethods, o = n.layoutCfg;
      if (!(!a || a.get("destroyed"))) {
        var s = Promise.resolve();
        if (e) {
          this.data = this.setDataFromGraph();
          var u = this.data.nodes;
          if (!u)
            return !1;
          s = this.initPositions(o.center, u);
        }
        a.emit("beforelayout"), i == null || i.forEach(function(f, l) {
          var c = o[l] || o;
          s = s.then(function() {
            var h, d = t.execLayoutMethod(c, l);
            return l === i.length - 1 && ((h = o.onAllLayoutEnd) === null || h === void 0 || h.call(o)), d;
          });
        });
      }
    }, r.prototype.filterLayoutData = function(e, t) {
      var n = e.nodes, a = e.edges, i = tn(e, ["nodes", "edges"]);
      if (!n)
        return e;
      var o, s;
      Or(t == null ? void 0 : t.nodesFilter) ? o = t.nodesFilter : o = function() {
        return !0;
      };
      var u = n.filter(o);
      if (Or(t == null ? void 0 : t.edgesFilter))
        s = t.edgesFilter;
      else {
        var f = u.reduce(function(l, c) {
          return l[c.id] = !0, l;
        }, {});
        s = function(c) {
          return f[c.source] && f[c.target];
        };
      }
      return B({
        nodes: u,
        edges: a.filter(s)
      }, i);
    }, r.prototype.getLayoutBBox = function(e) {
      var t = this.graph, n = gh(t.getNodes(), function(o) {
        return o.getModel().layoutOrder;
      }), a = Object.values(n).map(function(o) {
        var s = SC(o);
        return s.size = [s.width, s.height], s;
      }), i = Object.values(gh(e, "layoutOrder"));
      return {
        groupNodes: i,
        layoutNodes: a
      };
    }, r.prototype.layoutAnimate = function() {
    }, r.prototype.moveToZero = function() {
      var e = this.graph, t = e.get("data"), n = t.nodes;
      if (!(n[0].x === void 0 || n[0].x === null || ja(n[0].x))) {
        for (var a = [0, 0], i = n.length, o = 0; o < i; o++) {
          var s = n[o];
          a[0] += s.x, a[1] += s.y;
        }
        a[0] /= n.length, a[1] /= n.length;
        for (var o = 0; o < i; o++) {
          var s = n[o];
          s.x -= a[0], s.y -= a[1];
        }
      }
    }, r.prototype.initPositions = function(e, t) {
      var n;
      return zn(this, void 0, void 0, function() {
        var a, i, o;
        return Un(this, function(s) {
          return a = this.graph, t != null && t.length ? (i = t.filter(function(u) {
            return ja(u.x) || ja(u.y);
          }), o = i ? i.length : 0, o ? [2, (n = this.initWithPreset) === null || n === void 0 ? void 0 : n.call(
            this,
            function() {
            },
            // onFullfillment
            function() {
              var u = a.get("width") * 0.85, f = a.get("height") * 0.85, l = Math.ceil(Math.sqrt(o) * (u / f)), c = Math.ceil(o / l), h = u / (l - 1), d = f / (c - 1);
              (!isFinite(h) || !h) && (h = 0), (!isFinite(d) || !h) && (d = 0);
              for (var v = e[0] - u / 2, p = e[1] - f / 2, g = 0; g < o; g++) {
                var y = i[g];
                ja(+y.x) && (y.x = g % l * h + v), ja(+y.y) && (y.y = Math.floor(g / l) * d + p);
              }
            }
          )] : [
            2
            /*return*/
          ]) : [2, Promise.resolve()];
        });
      });
    }, r.prototype.destroy = function() {
      this.graph = null, this.destoryLayoutMethods(), this.destroyed = !0;
    }, r;
  }()
), $C = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e) {
      this.graph = e, this.destroyed = !1, this.initEvents();
    }
    return r;
  }()
), so = yr.registerNode, TU = yr.registerEdge;
yr.registerCombo;
var IU = ey.registerBehavior, Qe = lt;
lt.version, yr.registerNode, yr.registerEdge, yr.registerCombo, ey.registerBehavior;
var By = {}, Yt = {}, ld = {}, eo = {};
Object.defineProperty(eo, "__esModule", {
  value: !0
});
eo.MESSAGE = eo.ALGORITHM = void 0;
var OU = {
  pageRank: "pageRank",
  breadthFirstSearch: "breadthFirstSearch",
  connectedComponent: "connectedComponent",
  depthFirstSearch: "depthFirstSearch",
  detectCycle: "detectCycle",
  detectDirectedCycle: "detectDirectedCycle",
  detectAllCycles: "detectAllCycles",
  detectAllDirectedCycle: "detectAllDirectedCycle",
  detectAllUndirectedCycle: "detectAllUndirectedCycle",
  dijkstra: "dijkstra",
  findAllPath: "findAllPath",
  findShortestPath: "findShortestPath",
  floydWarshall: "floydWarshall",
  getAdjMatrix: "getAdjMatrix",
  getDegree: "getDegree",
  getInDegree: "getInDegree",
  getNeighbors: "getNeighbors",
  getOutDegree: "getOutDegree",
  labelPropagation: "labelPropagation",
  louvain: "louvain",
  GADDI: "GADDI",
  minimumSpanningTree: "minimumSpanningTree",
  SUCCESS: "SUCCESS",
  FAILURE: "FAILURE"
};
eo.ALGORITHM = OU;
var DU = {
  SUCCESS: "SUCCESS",
  FAILURE: "FAILURE"
};
eo.MESSAGE = DU;
var cd = {}, WC = {}, Qo = {};
Object.defineProperty(Qo, "__esModule", {
  value: !0
});
Qo.default = void 0;
var LU = function(e, t) {
  var n = e.nodes, a = e.edges, i = [], o = {};
  if (!n)
    throw new Error("invalid nodes data!");
  return n && n.forEach(function(s, u) {
    o[s.id] = u;
    var f = [];
    i.push(f);
  }), a && a.forEach(function(s) {
    var u = s.source, f = s.target, l = o[u], c = o[f];
    !l && l !== 0 || !c && c !== 0 || (i[l][c] = 1, t || (i[c][l] = 1));
  }), i;
}, NU = LU;
Qo.default = NU;
var hd = {}, dd = {}, eu = {};
Object.defineProperty(eu, "__esModule", {
  value: !0
});
eu.default = eu.LinkedListNode = void 0;
var PU = function(e, t) {
  return e === t;
}, Z0 = (
  /** @class */
  function() {
    function r(e, t) {
      t === void 0 && (t = null), this.value = e, this.next = t;
    }
    return r.prototype.toString = function(e) {
      return e ? e(this.value) : "".concat(this.value);
    }, r;
  }()
);
eu.LinkedListNode = Z0;
var kU = (
  /** @class */
  function() {
    function r(e) {
      e === void 0 && (e = PU), this.head = null, this.tail = null, this.compare = e;
    }
    return r.prototype.prepend = function(e) {
      var t = new Z0(e, this.head);
      return this.head = t, this.tail || (this.tail = t), this;
    }, r.prototype.append = function(e) {
      var t = new Z0(e);
      return this.head ? (this.tail.next = t, this.tail = t, this) : (this.head = t, this.tail = t, this);
    }, r.prototype.delete = function(e) {
      if (!this.head)
        return null;
      for (var t = null; this.head && this.compare(this.head.value, e); )
        t = this.head, this.head = this.head.next;
      var n = this.head;
      if (n !== null)
        for (; n.next; )
          this.compare(n.next.value, e) ? (t = n.next, n.next = n.next.next) : n = n.next;
      return this.compare(this.tail.value, e) && (this.tail = n), t;
    }, r.prototype.find = function(e) {
      var t = e.value, n = t === void 0 ? void 0 : t, a = e.callback, i = a === void 0 ? void 0 : a;
      if (!this.head)
        return null;
      for (var o = this.head; o; ) {
        if (i && i(o.value) || n !== void 0 && this.compare(o.value, n))
          return o;
        o = o.next;
      }
      return null;
    }, r.prototype.deleteTail = function() {
      var e = this.tail;
      if (this.head === this.tail)
        return this.head = null, this.tail = null, e;
      for (var t = this.head; t.next; )
        t.next.next ? t = t.next : t.next = null;
      return this.tail = t, e;
    }, r.prototype.deleteHead = function() {
      if (!this.head)
        return null;
      var e = this.head;
      return this.head.next ? this.head = this.head.next : (this.head = null, this.tail = null), e;
    }, r.prototype.fromArray = function(e) {
      var t = this;
      return e.forEach(function(n) {
        return t.append(n);
      }), this;
    }, r.prototype.toArray = function() {
      for (var e = [], t = this.head; t; )
        e.push(t), t = t.next;
      return e;
    }, r.prototype.reverse = function() {
      for (var e = this.head, t = null, n = null; e; )
        n = e.next, e.next = t, t = e, e = n;
      this.tail = this.head, this.head = t;
    }, r.prototype.toString = function(e) {
      return e === void 0 && (e = void 0), this.toArray().map(function(t) {
        return t.toString(e);
      }).toString();
    }, r;
  }()
), RU = kU;
eu.default = RU;
Object.defineProperty(dd, "__esModule", {
  value: !0
});
dd.default = void 0;
var BU = FU(eu);
function FU(r) {
  return r && r.__esModule ? r : { default: r };
}
var GU = (
  /** @class */
  function() {
    function r() {
      this.linkedList = new BU.default();
    }
    return r.prototype.isEmpty = function() {
      return !this.linkedList.head;
    }, r.prototype.peek = function() {
      return this.linkedList.head ? this.linkedList.head.value : null;
    }, r.prototype.enqueue = function(e) {
      this.linkedList.append(e);
    }, r.prototype.dequeue = function() {
      var e = this.linkedList.deleteHead();
      return e ? e.value : null;
    }, r.prototype.toString = function(e) {
      return this.linkedList.toString(e);
    }, r;
  }()
), zU = GU;
dd.default = zU;
var Hr = {};
Object.defineProperty(Hr, "__esModule", {
  value: !0
});
Hr.uniqueId = Hr.getOutEdgesNodeId = Hr.getNeighbors = Hr.getEdgesByNodeId = void 0;
var UU = function(e, t, n) {
  t === void 0 && (t = []);
  var a = t.filter(function(u) {
    return u.source === e || u.target === e;
  });
  if (n === "target") {
    var i = function(f) {
      return f.source === e;
    };
    return a.filter(i).map(function(u) {
      return u.target;
    });
  }
  if (n === "source") {
    var o = function(f) {
      return f.target === e;
    };
    return a.filter(o).map(function(u) {
      return u.source;
    });
  }
  var s = function(f) {
    return f.source === e ? f.target : f.source;
  };
  return a.map(s);
};
Hr.getNeighbors = UU;
var jU = function(e, t) {
  return t.filter(function(n) {
    return n.source === e;
  });
};
Hr.getOutEdgesNodeId = jU;
var $U = function(e, t) {
  return t.filter(function(n) {
    return n.source === e || n.target === e;
  });
};
Hr.getEdgesByNodeId = $U;
var WU = function(e) {
  e === void 0 && (e = 0);
  var t = "".concat(Math.random()).split(".")[1].substr(0, 5), n = "".concat(Math.random()).split(".")[1].substr(0, 5);
  return "".concat(e, "-").concat(t).concat(n);
};
Hr.uniqueId = WU;
Object.defineProperty(hd, "__esModule", {
  value: !0
});
hd.default = void 0;
var XU = YU(dd), VU = Hr;
function YU(r) {
  return r && r.__esModule ? r : { default: r };
}
function HU(r) {
  r === void 0 && (r = {});
  var e = r, t = function() {
  }, n = /* @__PURE__ */ function() {
    var a = {};
    return function(i) {
      var o = i.next, s = o;
      return a[s] ? !1 : (a[s] = !0, !0);
    };
  }();
  return e.allowTraversal = r.allowTraversal || n, e.enter = r.enter || t, e.leave = r.leave || t, e;
}
var KU = function(e, t, n, a) {
  a === void 0 && (a = !0);
  var i = HU(n), o = new XU.default(), s = e.edges, u = s === void 0 ? [] : s;
  o.enqueue(t);
  for (var f = "", l = function() {
    var h = o.dequeue();
    i.enter({
      current: h,
      previous: f
    }), (0, VU.getNeighbors)(h, u, a ? "target" : void 0).forEach(function(d) {
      i.allowTraversal({
        previous: f,
        current: h,
        next: d
      }) && o.enqueue(d);
    }), i.leave({
      current: h,
      previous: f
    }), f = h;
  }; !o.isEmpty(); )
    l();
}, qU = KU;
hd.default = qU;
var to = {};
Object.defineProperty(to, "__esModule", {
  value: !0
});
to.default = ZU;
to.detectStrongConnectComponents = to.detectConnectedComponents = void 0;
var XC = Hr, VC = function(e) {
  for (var t = e.nodes, n = t === void 0 ? [] : t, a = e.edges, i = a === void 0 ? [] : a, o = [], s = {}, u = [], f = function d(v) {
    u.push(v), s[v.id] = !0;
    for (var p = (0, XC.getNeighbors)(v.id, i), g = function(b) {
      var E = p[b];
      if (!s[E]) {
        var x = n.filter(function(w) {
          return w.id === E;
        });
        x.length > 0 && d(x[0]);
      }
    }, y = 0; y < p.length; ++y)
      g(y);
  }, l = 0; l < n.length; l++) {
    var c = n[l];
    if (!s[c.id]) {
      f(c);
      for (var h = []; u.length > 0; )
        h.push(u.pop());
      o.push(h);
    }
  }
  return o;
};
to.detectConnectedComponents = VC;
var YC = function(e) {
  for (var t = e.nodes, n = t === void 0 ? [] : t, a = e.edges, i = a === void 0 ? [] : a, o = [], s = {}, u = {}, f = {}, l = [], c = 0, h = function g(y) {
    u[y.id] = c, f[y.id] = c, c += 1, o.push(y), s[y.id] = !0;
    for (var m = (0, XC.getNeighbors)(y.id, i, "target").filter(function(_) {
      return n.map(function(M) {
        return M.id;
      }).indexOf(_) > -1;
    }), b = function(M) {
      var A = m[M];
      if (!u[A] && u[A] !== 0) {
        var S = n.filter(function(T) {
          return T.id === A;
        });
        S.length > 0 && g(S[0]), f[y.id] = Math.min(f[y.id], f[A]);
      } else
        s[A] && (f[y.id] = Math.min(f[y.id], u[A]));
    }, E = 0; E < m.length; E++)
      b(E);
    if (f[y.id] === u[y.id]) {
      for (var x = []; o.length > 0; ) {
        var w = o.pop();
        if (s[w.id] = !1, x.push(w), w === y)
          break;
      }
      x.length > 0 && l.push(x);
    }
  }, d = 0, v = n; d < v.length; d++) {
    var p = v[d];
    !u[p.id] && u[p.id] !== 0 && h(p);
  }
  return l;
};
to.detectStrongConnectComponents = YC;
function ZU(r, e) {
  return e ? YC(r) : VC(r);
}
var wi = {};
Object.defineProperty(wi, "__esModule", {
  value: !0
});
wi.getOutDegree = wi.getInDegree = wi.default = void 0;
var Nf = function(e) {
  var t = {}, n = e.nodes, a = n === void 0 ? [] : n, i = e.edges, o = i === void 0 ? [] : i;
  return a.forEach(function(s) {
    t[s.id] = {
      degree: 0,
      inDegree: 0,
      outDegree: 0
    };
  }), o.forEach(function(s) {
    t[s.source].degree++, t[s.source].outDegree++, t[s.target].degree++, t[s.target].inDegree++;
  }), t;
}, QU = Nf;
wi.default = QU;
var JU = function(e, t) {
  var n = Nf(e);
  return n[t] ? Nf(e)[t].inDegree : 0;
};
wi.getInDegree = JU;
var ej = function(e, t) {
  var n = Nf(e);
  return n[t] ? Nf(e)[t].outDegree : 0;
};
wi.getOutDegree = ej;
var Wa = {}, vd = {};
Object.defineProperty(vd, "__esModule", {
  value: !0
});
vd.default = nj;
var tj = Hr;
function rj(r) {
  r === void 0 && (r = {});
  var e = r, t = function() {
  }, n = /* @__PURE__ */ function() {
    var a = {};
    return function(i) {
      var o = i.next;
      return a[o] ? !1 : (a[o] = !0, !0);
    };
  }();
  return e.allowTraversal = r.allowTraversal || n, e.enter = r.enter || t, e.leave = r.leave || t, e;
}
function HC(r, e, t, n, a) {
  a === void 0 && (a = !0), n.enter({
    current: e,
    previous: t
  });
  var i = r.edges, o = i === void 0 ? [] : i;
  (0, tj.getNeighbors)(e, o, a ? "target" : void 0).forEach(function(s) {
    n.allowTraversal({
      previous: t,
      current: e,
      next: s
    }) && HC(r, s, e, n, a);
  }), n.leave({
    current: e,
    previous: t
  });
}
function nj(r, e, t, n) {
  n === void 0 && (n = !0), HC(r, e, "", rj(t), n);
}
function Q0(r) {
  "@babel/helpers - typeof";
  return Q0 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Q0(r);
}
Object.defineProperty(Wa, "__esModule", {
  value: !0
});
Wa.detectAllUndirectedCycle = Wa.detectAllDirectedCycle = Wa.detectAllCycles = Wa.default = void 0;
var aj = oj(vd), KC = ij(to), qC = Hr;
function ZC(r) {
  if (typeof WeakMap != "function")
    return null;
  var e = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakMap();
  return (ZC = function(a) {
    return a ? t : e;
  })(r);
}
function ij(r, e) {
  if (!e && r && r.__esModule)
    return r;
  if (r === null || Q0(r) !== "object" && typeof r != "function")
    return { default: r };
  var t = ZC(e);
  if (t && t.has(r))
    return t.get(r);
  var n = {}, a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in r)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(r, i)) {
      var o = a ? Object.getOwnPropertyDescriptor(r, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(n, i, o) : n[i] = r[i];
    }
  return n.default = r, t && t.set(r, n), n;
}
function oj(r) {
  return r && r.__esModule ? r : { default: r };
}
var sj = function(e) {
  var t = null, n = e.nodes, a = n === void 0 ? [] : n, i = {}, o = {}, s = {}, u = {};
  a.forEach(function(c) {
    o[c.id] = c;
  });
  for (var f = {
    enter: function(h) {
      var d = h.current, v = h.previous;
      if (s[d]) {
        t = {};
        for (var p = d, g = v; g !== d; )
          t[p] = g, p = g, g = i[g];
        t[p] = g;
      } else
        s[d] = d, delete o[d], i[d] = v;
    },
    leave: function(h) {
      var d = h.current;
      u[d] = d, delete s[d];
    },
    allowTraversal: function(h) {
      var d = h.next;
      return t ? !1 : !u[d];
    }
  }; Object.keys(o).length; ) {
    var l = Object.keys(o)[0];
    (0, aj.default)(e, l, f);
  }
  return t;
}, QC = function(e, t, n) {
  var a, i;
  n === void 0 && (n = !0);
  for (var o = [], s = (0, KC.default)(e, !1), u = 0, f = s; u < f.length; u++) {
    var l = f[u];
    if (l.length)
      for (var c = l[0], h = c.id, d = [c], v = (a = {}, a[h] = c, a), p = (i = {}, i[h] = /* @__PURE__ */ new Set(), i); d.length > 0; )
        for (var g = d.pop(), y = g.id, m = (0, qC.getNeighbors)(y, e.edges), b = function(w) {
          var _, M = m[w], A = e.nodes.find(function(R) {
            return R.id === M;
          });
          if (M === y)
            o.push((_ = {}, _[M] = g, _));
          else if (!(M in p))
            v[M] = g, d.push(A), p[M] = /* @__PURE__ */ new Set([g]);
          else if (!p[y].has(A)) {
            for (var S = !0, T = [A, g], C = v[y]; p[M].size && !p[M].has(C) && (T.push(C), C !== v[C.id]); )
              C = v[C.id];
            if (T.push(C), t && n ? (S = !1, T.findIndex(function(R) {
              return t.indexOf(R.id) > -1;
            }) > -1 && (S = !0)) : t && !n && T.findIndex(function(R) {
              return t.indexOf(R.id) > -1;
            }) > -1 && (S = !1), S) {
              for (var O = {}, L = 1; L < T.length; L += 1)
                O[T[L - 1].id] = T[L];
              T.length && (O[T[T.length - 1].id] = T[0]), o.push(O);
            }
            p[M].add(g);
          }
        }, E = 0; E < m.length; E += 1)
          b(E);
  }
  return o;
};
Wa.detectAllUndirectedCycle = QC;
var JC = function(e, t, n) {
  n === void 0 && (n = !0);
  for (var a = [], i = /* @__PURE__ */ new Set(), o = [], s = [], u = {}, f = {}, l = function(C) {
    for (var O = [C]; O.length > 0; ) {
      var L = O.pop();
      i.has(L) && (i.delete(L), o[L.id].forEach(function(R) {
        O.push(R);
      }), o[L.id].clear());
    }
  }, c = function T(C, O, L) {
    var R = !1;
    if (t && n === !1 && t.indexOf(C.id) > -1)
      return R;
    a.push(C), i.add(C);
    for (var P = L[C.id], z = 0; z < P.length; z += 1) {
      var V = u[P[z]];
      if (V === O) {
        for (var N = {}, F = 1; F < a.length; F += 1)
          N[a[F - 1].id] = a[F];
        a.length && (N[a[a.length - 1].id] = a[0]), s.push(N), R = !0;
      } else
        i.has(V) || T(V, O, L) && (R = !0);
    }
    if (R)
      l(C);
    else
      for (var z = 0; z < P.length; z += 1) {
        var V = u[P[z]];
        o[V.id].has(C) || o[V.id].add(C);
      }
    return a.pop(), R;
  }, h = e.nodes, d = h === void 0 ? [] : h, v = 0; v < d.length; v += 1) {
    var p = d[v], g = p.id;
    f[g] = v, u[v] = p;
  }
  if (t && n)
    for (var y = function(C) {
      var O = t[C];
      f[d[C].id] = f[O], f[O] = 0, u[0] = d.find(function(L) {
        return L.id === O;
      }), u[f[d[C].id]] = d[C];
    }, v = 0; v < t.length; v++)
      y(v);
  for (var m = function(C) {
    for (var O, L, R = 1 / 0, P = 0; P < C.length; P += 1)
      for (var z = C[P], V = 0; V < z.length; V++) {
        var N = f[z[V].id];
        N < R && (R = N, L = P);
      }
    for (var F = C[L], q = [], P = 0; P < F.length; P += 1) {
      var te = F[P];
      q[te.id] = [];
      for (var re = 0, J = (0, qC.getNeighbors)(te.id, e.edges, "target").filter(function(Pe) {
        return F.map(function(et) {
          return et.id;
        }).indexOf(Pe) > -1;
      }); re < J.length; re++) {
        var ye = J[re];
        ye === te.id && !(n === !1 && t.indexOf(te.id) > -1) ? s.push((O = {}, O[te.id] = te, O)) : q[te.id].push(f[ye]);
      }
    }
    return {
      component: F,
      adjList: q,
      minIdx: R
    };
  }, b = 0; b < d.length; ) {
    var E = d.filter(function(T) {
      return f[T.id] >= b;
    }), x = (0, KC.detectStrongConnectComponents)({
      nodes: E,
      edges: e.edges
    }).filter(function(T) {
      return T.length > 1;
    });
    if (x.length === 0)
      break;
    var w = m(x), _ = w.minIdx, M = w.adjList, A = w.component;
    if (A.length > 1) {
      A.forEach(function(T) {
        o[T.id] = /* @__PURE__ */ new Set();
      });
      var S = u[_];
      if (t && n && t.indexOf(S.id) === -1)
        return s;
      c(S, S, M), b = _ + 1;
    } else
      break;
  }
  return s;
};
Wa.detectAllDirectedCycle = JC;
var uj = function(e, t, n, a) {
  return a === void 0 && (a = !0), t ? JC(e, n, a) : QC(e, n, a);
};
Wa.detectAllCycles = uj;
var fj = sj;
Wa.default = fj;
var yu = {};
const eT = /* @__PURE__ */ ri(XP), Yf = /* @__PURE__ */ ri(hR);
Object.defineProperty(yu, "__esModule", {
  value: !0
});
yu.default = void 0;
var Cx = eT, lj = Yf, Tx = Hr, cj = function(e, t, n) {
  for (var a = 1 / 0, i, o = 0; o < t.length; o++) {
    var s = t[o].id;
    !n[s] && e[s] <= a && (a = e[s], i = t[o]);
  }
  return i;
}, hj = function(e, t, n, a) {
  var i = e.nodes, o = i === void 0 ? [] : i, s = e.edges, u = s === void 0 ? [] : s, f = {}, l = {}, c = {};
  o.forEach(function(m, b) {
    var E = m.id;
    l[E] = 1 / 0, E === t && (l[E] = 0);
  });
  for (var h = o.length, d = function(b) {
    var E = cj(l, o, f), x = E.id;
    if (f[x] = !0, l[x] === 1 / 0)
      return "continue";
    var w = [];
    n ? w = (0, Tx.getOutEdgesNodeId)(x, u) : w = (0, Tx.getEdgesByNodeId)(x, u), w.forEach(function(_) {
      var M = _.target, A = _.source, S = M === x ? A : M, T = a && _[a] ? _[a] : 1;
      l[S] > l[E.id] + T ? (l[S] = l[E.id] + T, c[S] = [E.id]) : l[S] === l[E.id] + T && c[S].push(E.id);
    });
  }, v = 0; v < h; v++)
    d();
  c[t] = [t];
  var p = {};
  for (var g in l)
    l[g] !== 1 / 0 && tT(t, g, c, p);
  var y = {};
  for (var g in p)
    y[g] = p[g][0];
  return {
    length: l,
    path: y,
    allPath: p
  };
}, dj = hj;
yu.default = dj;
function tT(r, e, t, n) {
  if (r === e)
    return [r];
  if (n[e])
    return n[e];
  for (var a = [], i = 0, o = t[e]; i < o.length; i++) {
    var s = o[i], u = tT(r, s, t, n);
    if (!u)
      return;
    for (var f = 0, l = u; f < l.length; f++) {
      var c = l[f];
      (0, lj.isArray)(c) ? a.push((0, Cx.__spreadArray)((0, Cx.__spreadArray)([], c, !0), [e], !1)) : a.push([c, e]);
    }
  }
  return n[e] = a, n[e];
}
var tu = {};
Object.defineProperty(tu, "__esModule", {
  value: !0
});
tu.findShortestPath = tu.findAllPath = void 0;
var vj = pj(yu), dc = Hr;
function pj(r) {
  return r && r.__esModule ? r : { default: r };
}
var gj = function(e, t, n, a, i) {
  var o = (0, vj.default)(e, t, a, i), s = o.length, u = o.path, f = o.allPath;
  return {
    length: s[n],
    path: u[n],
    allPath: f[n]
  };
};
tu.findShortestPath = gj;
var yj = function(e, t, n, a) {
  var i;
  if (t === n)
    return [[t]];
  var o = e.edges, s = o === void 0 ? [] : o, u = [t], f = (i = {}, i[t] = !0, i), l = [], c = [], h = a ? (0, dc.getNeighbors)(t, s, "target") : (0, dc.getNeighbors)(t, s);
  for (l.push(h); u.length > 0 && l.length > 0; ) {
    var d = l[l.length - 1];
    if (d.length) {
      var v = d.shift();
      v && (u.push(v), f[v] = !0, h = a ? (0, dc.getNeighbors)(v, s, "target") : (0, dc.getNeighbors)(v, s), l.push(h.filter(function(y) {
        return !f[y];
      })));
    } else {
      var p = u.pop();
      f[p] = !1, l.pop();
      continue;
    }
    if (u[u.length - 1] === n) {
      var g = u.map(function(m) {
        return m;
      });
      c.push(g);
      var p = u.pop();
      f[p] = !1, l.pop();
    }
  }
  return c;
};
tu.findAllPath = yj;
var Hf = {};
Object.defineProperty(Hf, "__esModule", {
  value: !0
});
Hf.default = void 0;
var mj = bj(Qo);
function bj(r) {
  return r && r.__esModule ? r : { default: r };
}
var Ej = function(e, t) {
  for (var n = (0, mj.default)(e, t), a = [], i = n.length, o = 0; o < i; o += 1) {
    a[o] = [];
    for (var s = 0; s < i; s += 1)
      o === s ? a[o][s] = 0 : n[o][s] === 0 || !n[o][s] ? a[o][s] = 1 / 0 : a[o][s] = n[o][s];
  }
  for (var u = 0; u < i; u += 1)
    for (var o = 0; o < i; o += 1)
      for (var s = 0; s < i; s += 1)
        a[o][s] > a[o][u] + a[u][s] && (a[o][s] = a[o][u] + a[u][s]);
  return a;
}, xj = Ej;
Hf.default = xj;
var pd = {};
Object.defineProperty(pd, "__esModule", {
  value: !0
});
pd.default = void 0;
var wj = Mj(Qo), _j = Hr;
function Mj(r) {
  return r && r.__esModule ? r : { default: r };
}
var Sj = function(e, t, n, a) {
  t === void 0 && (t = !1), n === void 0 && (n = "weight"), a === void 0 && (a = 1e3);
  var i = e.nodes, o = i === void 0 ? [] : i, s = e.edges, u = s === void 0 ? [] : s, f = {}, l = {};
  o.forEach(function(b, E) {
    var x = (0, _j.uniqueId)();
    b.clusterId = x, f[x] = {
      id: x,
      nodes: [b]
    }, l[b.id] = {
      node: b,
      idx: E
    };
  });
  var c = (0, wj.default)(e, t), h = {};
  c.forEach(function(b, E) {
    var x = o[E].id;
    h[x] = {}, b.forEach(function(w, _) {
      if (w) {
        var M = o[_].id;
        h[x][M] = w;
      }
    });
  });
  for (var d = 0, v = function() {
    var E = !1;
    if (o.forEach(function(x) {
      var w = {};
      Object.keys(h[x.id]).forEach(function(L) {
        var R = h[x.id][L], P = l[L].node, z = P.clusterId;
        w[z] || (w[z] = 0), w[z] += R;
      });
      var _ = -1 / 0, M = [];
      if (Object.keys(w).forEach(function(L) {
        _ < w[L] ? (_ = w[L], M = [L]) : _ === w[L] && M.push(L);
      }), !(M.length === 1 && M[0] === x.clusterId)) {
        var A = M.indexOf(x.clusterId);
        if (A >= 0 && M.splice(A, 1), M && M.length) {
          E = !0;
          var S = f[x.clusterId], T = S.nodes.indexOf(x);
          S.nodes.splice(T, 1);
          var C = Math.floor(Math.random() * M.length), O = f[M[C]];
          O.nodes.push(x), x.clusterId = O.id;
        }
      }
    }), !E)
      return "break";
    d++;
  }; d < a; ) {
    var p = v();
    if (p === "break")
      break;
  }
  Object.keys(f).forEach(function(b) {
    var E = f[b];
    (!E.nodes || !E.nodes.length) && delete f[b];
  });
  var g = [], y = {};
  u.forEach(function(b) {
    var E = b.source, x = b.target, w = b[n] || 1, _ = l[E].node.clusterId, M = l[x].node.clusterId, A = "".concat(_, "---").concat(M);
    if (y[A])
      y[A].weight += w, y[A].count++;
    else {
      var S = {
        source: _,
        target: M,
        weight: w,
        count: 1
      };
      y[A] = S, g.push(S);
    }
  });
  var m = [];
  return Object.keys(f).forEach(function(b) {
    m.push(f[b]);
  }), {
    clusters: m,
    clusterEdges: g
  };
}, Aj = Sj;
pd.default = Aj;
var gd = {}, Kf = {};
Object.defineProperty(Kf, "__esModule", {
  value: !0
});
Kf.default = void 0;
var Cj = Yf, Tj = (
  /** @class */
  function() {
    function r(e) {
      this.arr = e;
    }
    return r.prototype.getArr = function() {
      return this.arr || [];
    }, r.prototype.add = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length))
        return new r(n);
      if (!(n != null && n.length))
        return new r(this.arr);
      if (this.arr.length === n.length) {
        var a = [];
        for (var i in this.arr)
          a[i] = this.arr[i] + n[i];
        return new r(a);
      }
    }, r.prototype.subtract = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length))
        return new r(n);
      if (!(n != null && n.length))
        return new r(this.arr);
      if (this.arr.length === n.length) {
        var a = [];
        for (var i in this.arr)
          a[i] = this.arr[i] - n[i];
        return new r(a);
      }
    }, r.prototype.avg = function(e) {
      var t = [];
      if (e !== 0)
        for (var n in this.arr)
          t[n] = this.arr[n] / e;
      return new r(t);
    }, r.prototype.negate = function() {
      var e = [];
      for (var t in this.arr)
        e[t] = -this.arr[t];
      return new r(e);
    }, r.prototype.squareEuclideanDistance = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length) || !(n != null && n.length))
        return 0;
      if (this.arr.length === n.length) {
        var a = 0;
        for (var i in this.arr)
          a += Math.pow(this.arr[i] - e.arr[i], 2);
        return a;
      }
    }, r.prototype.euclideanDistance = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length) || !(n != null && n.length))
        return 0;
      if (this.arr.length === n.length) {
        var a = 0;
        for (var i in this.arr)
          a += Math.pow(this.arr[i] - e.arr[i], 2);
        return Math.sqrt(a);
      } else
        console.error("The two vectors are unequal in length.");
    }, r.prototype.normalize = function() {
      var e = [], t = (0, Cj.clone)(this.arr);
      t.sort(function(o, s) {
        return o - s;
      });
      var n = t[t.length - 1], a = t[0];
      for (var i in this.arr)
        e[i] = (this.arr[i] - a) / (n - a);
      return new r(e);
    }, r.prototype.norm2 = function() {
      var e;
      if (!(!((e = this.arr) === null || e === void 0) && e.length))
        return 0;
      var t = 0;
      for (var n in this.arr)
        t += Math.pow(this.arr[n], 2);
      return Math.sqrt(t);
    }, r.prototype.dot = function(e) {
      var t, n = e.arr;
      if (!(!((t = this.arr) === null || t === void 0) && t.length) || !(n != null && n.length))
        return 0;
      if (this.arr.length === n.length) {
        var a = 0;
        for (var i in this.arr)
          a += this.arr[i] * e.arr[i];
        return a;
      } else
        console.error("The two vectors are unequal in length.");
    }, r.prototype.equal = function(e) {
      var t, n = e.arr;
      if (((t = this.arr) === null || t === void 0 ? void 0 : t.length) !== (n == null ? void 0 : n.length))
        return !1;
      for (var a in this.arr)
        if (this.arr[a] !== n[a])
          return !1;
      return !0;
    }, r;
  }()
), Ij = Tj;
Kf.default = Ij;
var Xa = {}, ru = {};
Object.defineProperty(ru, "__esModule", {
  value: !0
});
ru.secondReg = ru.dateReg = void 0;
var Oj = /^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;
ru.secondReg = Oj;
var Dj = /^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;
ru.dateReg = Dj;
Object.defineProperty(Xa, "__esModule", {
  value: !0
});
Xa.getPropertyWeight = Xa.getAllSortProperties = Xa.getAllProperties = Xa.default = void 0;
var Ix = ru, Fy = function(e, t) {
  e === void 0 && (e = []), t === void 0 && (t = 100);
  var n = {};
  e.forEach(function(i) {
    i.properties && Object.keys(i.properties).forEach(function(o) {
      if (o === "id" || !"".concat(i.properties[o]).match(Ix.secondReg) && !"".concat(i.properties[o]).match(Ix.dateReg) && isNaN(Number(i.properties[o]))) {
        n.hasOwnProperty(o) && delete n[o];
        return;
      }
      n.hasOwnProperty(o) ? n[o] += 1 : n[o] = 1;
    });
  });
  var a = Object.keys(n).sort(function(i, o) {
    return n[o] - n[i];
  });
  return a.length < t ? a : a.slice(0, t);
};
Xa.getAllSortProperties = Fy;
var Lj = function(e, t) {
  return t.map(function(n) {
    return e.hasOwnProperty(n) ? e[n] : 0;
  });
}, rT = function(e) {
  for (var t = Fy(e), n = [], a = 0; a < e.length; a++)
    n[a] = Lj(e[a].properties, t);
  return n;
};
Xa.getPropertyWeight = rT;
var nT = function(e, t) {
  t === void 0 && (t = void 0);
  var n = [];
  return e.forEach(function(a) {
    t === void 0 && n.push(a), a[t] !== void 0 && n.push(a[t]);
  }), n;
};
Xa.getAllProperties = nT;
var Nj = {
  getAllSortProperties: Fy,
  getPropertyWeight: rT,
  getAllProperties: nT
};
Xa.default = Nj;
var Va = {}, qf = {};
Object.defineProperty(qf, "__esModule", {
  value: !0
});
qf.DistanceType = void 0;
var J0;
qf.DistanceType = J0;
(function(r) {
  r.EuclideanDistance = "euclideanDistance";
})(J0 || (qf.DistanceType = J0 = {}));
Object.defineProperty(Va, "__esModule", {
  value: !0
});
Va.oneHot = Va.getDistance = Va.getAllKeyValueMap = Va.default = void 0;
var Ox = Yf, Dx = qf, Lx = Pj(Kf);
function Pj(r) {
  return r && r.__esModule ? r : { default: r };
}
var Gy = function(e, t, n) {
  var a = [];
  t != null && t.length ? a = t : (e.forEach(function(o) {
    a = a.concat(Object.keys(o));
  }), a = (0, Ox.uniq)(a));
  var i = {};
  return a.forEach(function(o) {
    var s = [];
    e.forEach(function(u) {
      u[o] !== void 0 && u[o] !== "" && s.push(u[o]);
    }), s.length && !(n != null && n.includes(o)) && (i[o] = (0, Ox.uniq)(s));
  }), i;
};
Va.getAllKeyValueMap = Gy;
var aT = function(e, t, n) {
  var a = Gy(e, t, n), i = [];
  if (!Object.keys(a).length)
    return i;
  var o = Object.values(a), s = o.every(function(u) {
    return u.every(function(f) {
      return typeof f == "number";
    });
  });
  return e.forEach(function(u, f) {
    var l = [];
    Object.keys(a).forEach(function(c) {
      var h = u[c], d = a[c], v = d.findIndex(function(y) {
        return h === y;
      }), p = [];
      if (s)
        p.push(h);
      else
        for (var g = 0; g < d.length; g++)
          g === v ? p.push(1) : p.push(0);
      l = l.concat(p);
    }), i[f] = l;
  }), i;
};
Va.oneHot = aT;
var iT = function(e, t, n, a) {
  n === void 0 && (n = Dx.DistanceType.EuclideanDistance);
  var i = 0;
  switch (n) {
    case Dx.DistanceType.EuclideanDistance:
      i = new Lx.default(e).euclideanDistance(new Lx.default(t));
      break;
  }
  return i;
};
Va.getDistance = iT;
var kj = {
  getAllKeyValueMap: Gy,
  oneHot: aT,
  getDistance: iT
};
Va.default = kj;
Object.defineProperty(gd, "__esModule", {
  value: !0
});
gd.default = void 0;
var Rj = Yf, Bj = oT(Qo), ju = oT(Kf), Fj = Xa, Gj = Va;
function oT(r) {
  return r && r.__esModule ? r : { default: r };
}
var Nx = function(e, t, n, a) {
  for (var i = t.length, o = 2 * a, s = 0, u = 0; u < i; u++)
    for (var f = e[u].clusterId, l = 0; l < i; l++) {
      var c = e[l].clusterId;
      if (f === c) {
        var h = t[u][l] || 0, d = n[u] || 0, v = n[l] || 0;
        s += h - d * v / o;
      }
    }
  return s *= 1 / o, s;
}, xp = function(e, t) {
  e === void 0 && (e = []);
  for (var n = e.length, a = new ju.default([]), i = 0; i < n; i++)
    a = a.add(new ju.default(t[i]));
  var o = a.avg(n);
  o.normalize();
  for (var s = 0, i = 0; i < n; i++) {
    var u = new ju.default(t[i]), f = u.squareEuclideanDistance(o);
    s += f;
  }
  var l = [];
  e.forEach(function() {
    l.push([]);
  });
  for (var i = 0; i < n; i++) {
    var u = new ju.default(t[i]);
    e[i].clusterInertial = 0;
    for (var c = 0; c < n; c++) {
      if (i === c) {
        l[i][c] = 0;
        continue;
      }
      var h = new ju.default(t[c]);
      l[i][c] = u.squareEuclideanDistance(h), e[i].clusterInertial += l[i][c];
    }
  }
  for (var d = 0, v = 2 * n * s, i = 0; i < n; i++)
    for (var p = e[i].clusterId, c = 0; c < n; c++) {
      var g = e[c].clusterId;
      if (!(i === c || p !== g)) {
        var y = e[i].clusterInertial * e[c].clusterInertial / Math.pow(v, 2) - l[i][c] / v;
        d += y;
      }
    }
  return Number(d.toFixed(4));
}, zj = function(e, t, n, a, i, o, s, u, f) {
  t === void 0 && (t = !1), n === void 0 && (n = "weight"), a === void 0 && (a = 1e-4), i === void 0 && (i = !1), o === void 0 && (o = void 0), s === void 0 && (s = []), u === void 0 && (u = ["id"]), f === void 0 && (f = 1);
  var l = e.nodes, c = l === void 0 ? [] : l, h = e.edges, d = h === void 0 ? [] : h, v = [];
  if (i) {
    c.forEach(function(N, F) {
      N.properties = N.properties || {}, N.originIndex = F;
    });
    var p = [];
    c.every(function(N) {
      return N.hasOwnProperty("nodeType");
    }) && (p = Array.from(new Set(c.map(function(N) {
      return N.nodeType;
    }))), c.forEach(function(N) {
      N.properties.nodeType = p.findIndex(function(F) {
        return F === N.nodeType;
      });
    }));
    var g = (0, Fj.getAllProperties)(c, o);
    v = (0, Gj.oneHot)(g, s, u);
  }
  var y = 1, m = {}, b = {};
  c.forEach(function(N, F) {
    var q = String(y++);
    N.clusterId = q, m[q] = {
      id: q,
      nodes: [N]
    }, b[N.id] = {
      node: N,
      idx: F
    };
  });
  var E = (0, Bj.default)(e, t), x = [], w = {}, _ = 0;
  E.forEach(function(N, F) {
    var q = 0, te = c[F].id;
    w[te] = {}, N.forEach(function(re, J) {
      if (re) {
        q += re;
        var ye = c[J].id;
        w[te][ye] = re, _ += re;
      }
    }), x.push(q);
  }), _ /= 2;
  for (var M = 1 / 0, A = 1 / 0, S = 0, T = [], C = {}; ; ) {
    i && c.every(function(N) {
      return N.hasOwnProperty("properties");
    }) ? M = Nx(c, E, x, _) + xp(c, v) * f : M = Nx(c, E, x, _), S === 0 && (A = M, T = c, C = m);
    var O = M > 0 && M > A && M - A < a;
    if (M > A && (T = c.map(function(N) {
      return {
        node: N,
        clusterId: N.clusterId
      };
    }), C = (0, Rj.clone)(m), A = M), O || S > 100)
      break;
    S++, Object.keys(m).forEach(function(N) {
      var F = 0;
      d.forEach(function(q) {
        var te = q.source, re = q.target, J = b[te].node.clusterId, ye = b[re].node.clusterId;
        (J === N && ye !== N || ye === N && J !== N) && (F = F + (q[n] || 1));
      }), m[N].sumTot = F;
    }), c.forEach(function(N, F) {
      var q = m[N.clusterId], te = 0, re, J = x[F] / (2 * _), ye = 0, Be = q.nodes;
      Be.forEach(function(Wt) {
        var vr = b[Wt.id].idx;
        ye += E[F][vr] || 0;
      });
      var Pe = ye - q.sumTot * J, et = Be.filter(function(Wt) {
        return Wt.id !== N.id;
      });
      et.forEach(function(Wt, vr) {
        v[Wt.originIndex];
      });
      var ut = xp(et, v) * f, at = w[N.id];
      if (Object.keys(at).forEach(function(Wt) {
        var vr = b[Wt].node, cr = vr.clusterId;
        if (cr !== N.clusterId) {
          var jt = m[cr], or = jt.nodes;
          if (!(!or || !or.length)) {
            var Wr = 0;
            or.forEach(function(Fe) {
              var ge = b[Fe.id].idx;
              Wr += E[F][ge] || 0;
            });
            var rt = Wr - jt.sumTot * J, ie = or.concat([N]);
            ie.forEach(function(Fe, ge) {
              v[Fe.originIndex];
            });
            var D = xp(ie, v) * f, _e = rt - Pe;
            i && (_e = rt + D - (Pe + ut)), _e > te && (te = _e, re = jt);
          }
        }
      }), te > 0) {
        re.nodes.push(N);
        var At = N.clusterId;
        N.clusterId = re.id;
        var xt = q.nodes.indexOf(N);
        q.nodes.splice(xt, 1);
        var lr = 0, Rt = 0;
        d.forEach(function(Wt) {
          var vr = Wt.source, cr = Wt.target, jt = b[vr].node.clusterId, or = b[cr].node.clusterId;
          (jt === re.id && or !== re.id || or === re.id && jt !== re.id) && (lr = lr + (Wt[n] || 1)), (jt === At && or !== At || or === At && jt !== At) && (Rt = Rt + (Wt[n] || 1));
        }), re.sumTot = lr, q.sumTot = Rt;
      }
    });
  }
  var L = {}, R = 0;
  Object.keys(C).forEach(function(N) {
    var F = C[N];
    if (!F.nodes || !F.nodes.length) {
      delete C[N];
      return;
    }
    var q = String(R + 1);
    q !== N && (F.id = q, F.nodes = F.nodes.map(function(te) {
      return {
        id: te.id,
        clusterId: q
      };
    }), C[q] = F, L[N] = q, delete C[N], R++);
  }), T.forEach(function(N) {
    var F = N.node, q = N.clusterId;
    F && (F.clusterId = q, F.clusterId && L[F.clusterId] && (F.clusterId = L[F.clusterId]));
  });
  var P = [], z = {};
  d.forEach(function(N) {
    var F = N.source, q = N.target, te = N[n] || 1, re = b[F].node.clusterId, J = b[q].node.clusterId;
    if (!(!re || !J)) {
      var ye = "".concat(re, "---").concat(J);
      if (z[ye])
        z[ye].weight += te, z[ye].count++;
      else {
        var Be = {
          source: re,
          target: J,
          weight: te,
          count: 1
        };
        z[ye] = Be, P.push(Be);
      }
    }
  });
  var V = [];
  return Object.keys(C).forEach(function(N) {
    V.push(C[N]);
  }), {
    clusters: V,
    clusterEdges: P
  };
}, Uj = zj;
gd.default = Uj;
var yd = {}, md = {};
Object.defineProperty(md, "__esModule", {
  value: !0
});
md.default = void 0;
var jj = (
  /** @class */
  function() {
    function r(e) {
      this.count = e.length, this.parent = {};
      for (var t = 0, n = e; t < n.length; t++) {
        var a = n[t];
        this.parent[a] = a;
      }
    }
    return r.prototype.find = function(e) {
      for (; this.parent[e] !== e; )
        e = this.parent[e];
      return e;
    }, r.prototype.union = function(e, t) {
      var n = this.find(e), a = this.find(t);
      n !== a && (n < a ? (this.parent[t] !== t && this.union(this.parent[t], e), this.parent[t] = this.parent[e]) : (this.parent[e] !== e && this.union(this.parent[e], t), this.parent[e] = this.parent[t]));
    }, r.prototype.connected = function(e, t) {
      return this.find(e) === this.find(t);
    }, r;
  }()
), $j = jj;
md.default = $j;
var bd = {};
Object.defineProperty(bd, "__esModule", {
  value: !0
});
bd.default = void 0;
var Wj = function(e, t) {
  return e - t;
}, Xj = (
  /** @class */
  function() {
    function r(e) {
      e === void 0 && (e = Wj), this.compareFn = e, this.list = [];
    }
    return r.prototype.getLeft = function(e) {
      return 2 * e + 1;
    }, r.prototype.getRight = function(e) {
      return 2 * e + 2;
    }, r.prototype.getParent = function(e) {
      return e === 0 ? null : Math.floor((e - 1) / 2);
    }, r.prototype.isEmpty = function() {
      return this.list.length <= 0;
    }, r.prototype.top = function() {
      return this.isEmpty() ? void 0 : this.list[0];
    }, r.prototype.delMin = function() {
      var e = this.top(), t = this.list.pop();
      return this.list.length > 0 && (this.list[0] = t, this.moveDown(0)), e;
    }, r.prototype.insert = function(e) {
      if (e !== null) {
        this.list.push(e);
        var t = this.list.length - 1;
        return this.moveUp(t), !0;
      }
      return !1;
    }, r.prototype.moveUp = function(e) {
      for (var t = this.getParent(e); e && e > 0 && this.compareFn(this.list[t], this.list[e]) > 0; ) {
        var n = this.list[t];
        this.list[t] = this.list[e], this.list[e] = n, e = t, t = this.getParent(e);
      }
    }, r.prototype.moveDown = function(e) {
      var t, n = e, a = this.getLeft(e), i = this.getRight(e), o = this.list.length;
      a !== null && a < o && this.compareFn(this.list[n], this.list[a]) > 0 ? n = a : i !== null && i < o && this.compareFn(this.list[n], this.list[i]) > 0 && (n = i), e !== n && (t = [this.list[n], this.list[e]], this.list[e] = t[0], this.list[n] = t[1], this.moveDown(n));
    }, r;
  }()
), Vj = Xj;
bd.default = Vj;
Object.defineProperty(yd, "__esModule", {
  value: !0
});
yd.default = void 0;
var Yj = sT(md), Hj = sT(bd), wp = Hr;
function sT(r) {
  return r && r.__esModule ? r : { default: r };
}
var Kj = function(e, t) {
  var n = [], a = e.nodes, i = a === void 0 ? [] : a, o = e.edges, s = o === void 0 ? [] : o;
  if (i.length === 0)
    return n;
  var u = i[0], f = /* @__PURE__ */ new Set();
  f.add(u);
  var l = function(g, y) {
    return t ? g.weight - y.weight : 0;
  }, c = new Hj.default(l);
  for ((0, wp.getEdgesByNodeId)(u.id, s).forEach(function(p) {
    c.insert(p);
  }); !c.isEmpty(); ) {
    var h = c.delMin(), d = h.source, v = h.target;
    f.has(d) && f.has(v) || (n.push(h), f.has(d) || (f.add(d), (0, wp.getEdgesByNodeId)(d, s).forEach(function(p) {
      c.insert(p);
    })), f.has(v) || (f.add(v), (0, wp.getEdgesByNodeId)(v, s).forEach(function(p) {
      c.insert(p);
    })));
  }
  return n;
}, Px = function(e, t) {
  var n = [], a = e.nodes, i = a === void 0 ? [] : a, o = e.edges, s = o === void 0 ? [] : o;
  if (i.length === 0)
    return n;
  var u = s.map(function(d) {
    return d;
  });
  t && u.sort(function(d, v) {
    return d.weight - v.weight;
  });
  for (var f = new Yj.default(i.map(function(d) {
    return d.id;
  })); u.length > 0; ) {
    var l = u.shift(), c = l.source, h = l.target;
    f.connected(c, h) || (n.push(l), f.union(c, h));
  }
  return n;
}, qj = function(e, t, n) {
  var a = {
    prim: Kj,
    kruskal: Px
  };
  return n ? a[n](e, t) : Px(e, t);
}, Zj = qj;
yd.default = Zj;
var Ed = {};
Object.defineProperty(Ed, "__esModule", {
  value: !0
});
Ed.default = void 0;
var Qj = e$(wi), Jj = Hr;
function e$(r) {
  return r && r.__esModule ? r : { default: r };
}
var t$ = function(e, t, n) {
  typeof t != "number" && (t = 1e-6), typeof n != "number" && (n = 0.85);
  for (var a = 1, i = 0, o = 1e3, s = e.nodes, u = s === void 0 ? [] : s, f = e.edges, l = f === void 0 ? [] : f, c = u.length, h, d = {}, v = {}, p = 0; p < c; ++p) {
    var g = u[p], y = g.id;
    d[y] = 1 / c, v[y] = 1 / c;
  }
  for (var m = (0, Qj.default)(e); o > 0 && a > t; ) {
    i = 0;
    for (var p = 0; p < c; ++p) {
      var g = u[p], y = g.id;
      if (h = 0, m[g.id].inDegree === 0)
        d[y] = 0;
      else {
        for (var b = (0, Jj.getNeighbors)(y, l, "source"), E = 0; E < b.length; ++E) {
          var x = b[E], w = m[x].outDegree;
          w > 0 && (h += v[x] / w);
        }
        d[y] = n * h, i += d[y];
      }
    }
    i = (1 - i) / c, a = 0;
    for (var p = 0; p < c; ++p) {
      var g = u[p], y = g.id;
      h = d[y] + i, a += Math.abs(h - v[y]), v[y] = h;
    }
    o -= 1;
  }
  return v;
}, r$ = t$;
Ed.default = r$;
var xd = {}, wd = {}, Yr = {};
Object.defineProperty(Yr, "__esModule", {
  value: !0
});
Yr.VACANT_NODE_LABEL = Yr.VACANT_NODE_ID = Yr.VACANT_GRAPH_ID = Yr.VACANT_EDGE_LABEL = Yr.VACANT_EDGE_ID = Yr.Node = Yr.Graph = Yr.Edge = Yr.AUTO_EDGE_ID = void 0;
var uT = -1;
Yr.VACANT_EDGE_ID = uT;
var Pf = -1;
Yr.VACANT_NODE_ID = Pf;
var fT = "-1";
Yr.VACANT_EDGE_LABEL = fT;
var lT = "-1";
Yr.VACANT_NODE_LABEL = lT;
var n$ = -1;
Yr.VACANT_GRAPH_ID = n$;
var a$ = "-1";
Yr.AUTO_EDGE_ID = a$;
var eg = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e, t, n, a) {
      e === void 0 && (e = uT), t === void 0 && (t = Pf), n === void 0 && (n = Pf), a === void 0 && (a = fT), this.id = e, this.from = t, this.to = n, this.label = a;
    }
    return r;
  }()
);
Yr.Edge = eg;
var cT = (
  /** @class */
  function() {
    function r(e, t) {
      e === void 0 && (e = Pf), t === void 0 && (t = lT), this.id = e, this.label = t, this.edges = [], this.edgeMap = {};
    }
    return r.prototype.addEdge = function(e) {
      this.edges.push(e), this.edgeMap[e.id] = e;
    }, r;
  }()
);
Yr.Node = cT;
var i$ = (
  /** @class */
  function() {
    function r(e, t, n) {
      e === void 0 && (e = Pf), t === void 0 && (t = !0), n === void 0 && (n = !1), this.id = e, this.edgeIdAutoIncrease = t, this.edges = [], this.nodes = [], this.nodeMap = {}, this.edgeMap = {}, this.nodeLabelMap = {}, this.edgeLabelMap = {}, this.counter = 0, this.directed = n;
    }
    return r.prototype.getNodeNum = function() {
      return this.nodes.length;
    }, r.prototype.addNode = function(e, t) {
      if (!this.nodeMap[e]) {
        var n = new cT(e, t);
        this.nodes.push(n), this.nodeMap[e] = n, this.nodeLabelMap[t] || (this.nodeLabelMap[t] = []), this.nodeLabelMap[t].push(e);
      }
    }, r.prototype.addEdge = function(e, t, n, a) {
      if ((this.edgeIdAutoIncrease || e === void 0) && (e = this.counter++), !(this.nodeMap[t] && this.nodeMap[n] && this.nodeMap[n].edgeMap[e])) {
        var i = new eg(e, t, n, a);
        if (this.edges.push(i), this.edgeMap[e] = i, this.nodeMap[t].addEdge(i), this.edgeLabelMap[a] || (this.edgeLabelMap[a] = []), this.edgeLabelMap[a].push(i), !this.directed) {
          var o = new eg(e, n, t, a);
          this.nodeMap[n].addEdge(o), this.edgeLabelMap[a].push(o);
        }
      }
    }, r;
  }()
);
Yr.Graph = i$;
Object.defineProperty(wd, "__esModule", {
  value: !0
});
wd.default = void 0;
var o$ = Yf, In = Yr, Po = (
  /** @class */
  function() {
    function r(e, t, n, a, i) {
      this.fromNode = e, this.toNode = t, this.nodeEdgeNodeLabel = {
        nodeLabel1: n || In.VACANT_NODE_LABEL,
        edgeLabel: a || In.VACANT_EDGE_LABEL,
        nodeLabel2: i || In.VACANT_NODE_LABEL
      };
    }
    return r.prototype.equalTo = function(e) {
      return this.fromNode === e.formNode && this.toNode === e.toNode && this.nodeEdgeNodeLabel === e.nodeEdgeNodeLabel;
    }, r.prototype.notEqualTo = function(e) {
      return !this.equalTo(e);
    }, r;
  }()
), kx = (
  /** @class */
  function() {
    function r() {
      this.rmpath = [], this.dfsEdgeList = [];
    }
    return r.prototype.equalTo = function(e) {
      var t = this.dfsEdgeList.length, n = e.length;
      if (t !== n)
        return !1;
      for (var a = 0; a < t; a++)
        if (this.dfsEdgeList[a] !== e[a])
          return !1;
      return !0;
    }, r.prototype.notEqualTo = function(e) {
      return !this.equalTo(e);
    }, r.prototype.pushBack = function(e, t, n, a, i) {
      return this.dfsEdgeList.push(new Po(e, t, n, a, i)), this.dfsEdgeList;
    }, r.prototype.toGraph = function(e, t) {
      e === void 0 && (e = In.VACANT_GRAPH_ID), t === void 0 && (t = !1);
      var n = new In.Graph(e, !0, t);
      return this.dfsEdgeList.forEach(function(a) {
        var i = a.fromNode, o = a.toNode, s = a.nodeEdgeNodeLabel, u = s.nodeLabel1, f = s.edgeLabel, l = s.nodeLabel2;
        u !== In.VACANT_NODE_LABEL && n.addNode(i, u), l !== In.VACANT_NODE_LABEL && n.addNode(o, l), u !== In.VACANT_NODE_LABEL && l !== u && n.addEdge(void 0, i, o, f);
      }), n;
    }, r.prototype.buildRmpath = function() {
      this.rmpath = [];
      for (var e = void 0, t = this.dfsEdgeList.length, n = t - 1; n >= 0; n--) {
        var a = this.dfsEdgeList[n], i = a.fromNode, o = a.toNode;
        i < o && (e === void 0 || o === e) && (this.rmpath.push(n), e = i);
      }
      return this.rmpath;
    }, r.prototype.getNodeNum = function() {
      var e = {};
      return this.dfsEdgeList.forEach(function(t) {
        e[t.fromNode] || (e[t.fromNode] = !0), e[t.toNode] || (e[t.toNode] = !0);
      }), Object.keys(e).length;
    }, r;
  }()
), vc = (
  /** @class */
  function() {
    function r(e) {
      if (this.his = {}, this.nodesUsed = {}, this.edgesUsed = {}, this.edges = [], !!e) {
        for (; e; ) {
          var t = e.edge;
          this.edges.push(t), this.nodesUsed[t.from] = 1, this.nodesUsed[t.to] = 1, this.edgesUsed[t.id] = 1, e = e.preNode;
        }
        this.edges = this.edges.reverse();
      }
    }
    return r.prototype.hasNode = function(e) {
      return this.nodesUsed[e.id] === 1;
    }, r.prototype.hasEdge = function(e) {
      return this.edgesUsed[e.id] === 1;
    }, r;
  }()
), s$ = (
  /** @class */
  function() {
    function r(e) {
      var t = e.graphs, n = e.minSupport, a = n === void 0 ? 2 : n, i = e.minNodeNum, o = i === void 0 ? 1 : i, s = e.maxNodeNum, u = s === void 0 ? 4 : s, f = e.top, l = f === void 0 ? 10 : f, c = e.directed, h = c === void 0 ? !1 : c, d = e.verbose, v = d === void 0 ? !1 : d;
      this.graphs = t, this.dfsCode = new kx(), this.support = 0, this.frequentSize1Subgraphs = [], this.frequentSubgraphs = [], this.minSupport = a, this.top = l, this.directed = h, this.counter = 0, this.maxNodeNum = u, this.minNodeNum = o, this.verbose = v, this.maxNodeNum < this.minNodeNum && (this.maxNodeNum = this.minNodeNum), this.reportDF = [];
    }
    return r.prototype.findForwardRootEdges = function(e, t) {
      var n = this, a = [], i = e.nodeMap;
      return t.edges.forEach(function(o) {
        (n.directed || t.label <= i[o.to].label) && a.push(o);
      }), a;
    }, r.prototype.findBackwardEdge = function(e, t, n, a) {
      if (!this.directed && t === n)
        return null;
      for (var i = e.nodeMap, o = i[n.to], s = o.edges, u = s.length, f = 0; f < u; f++) {
        var l = s[f];
        if (!(a.hasEdge(l) || l.to !== t.from)) {
          if (this.directed) {
            if (i[t.from].label < i[n.to].label || i[t.from].label === i[n.to].label && t.label <= l.label)
              return l;
          } else if (t.label < l.label || t.label === l.label && i[t.to].label <= i[n.to].label)
            return l;
        }
      }
      return null;
    }, r.prototype.findForwardPureEdges = function(e, t, n, a) {
      for (var i = [], o = t.to, s = e.nodeMap[o].edges, u = s.length, f = 0; f < u; f++) {
        var l = s[f], c = e.nodeMap[l.to];
        n <= c.label && !a.hasNode(c) && i.push(l);
      }
      return i;
    }, r.prototype.findForwardRmpathEdges = function(e, t, n, a) {
      for (var i = [], o = e.nodeMap, s = o[t.to].label, u = o[t.from], f = u.edges, l = f.length, c = 0; c < l; c++) {
        var h = f[c], d = o[h.to].label;
        t.to === h.to || n > d || a.hasNode(o[h.to]) || (t.label < h.label || t.label === h.label && s <= d) && i.push(h);
      }
      return i;
    }, r.prototype.getSupport = function(e) {
      var t = {};
      return e.forEach(function(n) {
        t[n.graphId] || (t[n.graphId] = !0);
      }), Object.keys(t).length;
    }, r.prototype.findMinLabel = function(e) {
      var t = void 0;
      return Object.keys(e).forEach(function(n) {
        var a = e[n], i = a.nodeLabel1, o = a.edgeLabel, s = a.nodeLabel2;
        if (!t) {
          t = {
            nodeLabel1: i,
            edgeLabel: o,
            nodeLabel2: s
          };
          return;
        }
        (i < t.nodeLabel1 || i === t.nodeLabel1 && o < t.edgeLabel || i === t.nodeLabel1 && o === t.edgeLabel && s < t.nodeLabel2) && (t = {
          nodeLabel1: i,
          edgeLabel: o,
          nodeLabel2: s
        });
      }), t;
    }, r.prototype.isMin = function() {
      var e = this, t = this.dfsCode;
      if (this.verbose && console.log("isMin checking", t), t.dfsEdgeList.length === 1)
        return !0;
      var n = this.directed, a = t.toGraph(In.VACANT_GRAPH_ID, n), i = a.nodeMap, o = new kx(), s = {};
      a.nodes.forEach(function(c) {
        var h = e.findForwardRootEdges(a, c);
        h.forEach(function(d) {
          var v = i[d.to], p = "".concat(c.label, "-").concat(d.label, "-").concat(v.label);
          s[p] || (s[p] = {
            projected: [],
            nodeLabel1: c.label,
            edgeLabel: d.label,
            nodeLabel2: v.label
          });
          var g = {
            graphId: a.id,
            edge: d,
            preNode: null
          };
          s[p].projected.push(g);
        });
      });
      var u = this.findMinLabel(s);
      if (u) {
        o.dfsEdgeList.push(new Po(0, 1, u.nodeLabel1, u.edgeLabel, u.nodeLabel2));
        var f = function c(h) {
          for (var d = o.buildRmpath(), v = o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1, p = o.dfsEdgeList[d[0]].toNode, g = {}, y = !1, m = 0, b = n ? -1 : 0, E = function(z) {
            if (y)
              return "break";
            h.forEach(function(V) {
              var N = new vc(V), F = e.findBackwardEdge(a, N.edges[d[z]], N.edges[d[0]], N);
              F && (g[F.label] || (g[F.label] = {
                projected: [],
                edgeLabel: F.label
              }), g[F.label].projected.push({
                graphId: a.id,
                edge: g,
                preNode: V
              }), m = o.dfsEdgeList[d[z]].fromNode, y = !0);
            });
          }, x = d.length - 1; x > b; x--) {
            var w = E(x);
            if (w === "break")
              break;
          }
          if (y) {
            var _ = e.findMinLabel(g);
            o.dfsEdgeList.push(new Po(p, m, In.VACANT_NODE_LABEL, _.edgeLabel, In.VACANT_NODE_LABEL));
            var M = o.dfsEdgeList.length - 1;
            return e.dfsCode.dfsEdgeList[M] !== o.dfsEdgeList[M] ? !1 : c(g[_.edgeLabel].projected);
          }
          var A = {};
          y = !1;
          var S = 0;
          h.forEach(function(P) {
            var z = new vc(P), V = e.findForwardPureEdges(a, z.edges[d[0]], v, z);
            V.length > 0 && (y = !0, S = p, V.forEach(function(N) {
              var F = "".concat(N.label, "-").concat(i[N.to].label);
              A[F] || (A[F] = {
                projected: [],
                edgeLabel: N.label,
                nodeLabel2: i[N.to].label
              }), A[F].projected.push({
                graphId: a.id,
                edge: N,
                preNode: P
              });
            }));
          });
          for (var T = d.length, C = function(z) {
            if (y)
              return "break";
            var V = d[z];
            h.forEach(function(N) {
              var F = new vc(N), q = e.findForwardRmpathEdges(a, F.edges[V], v, F);
              q.length > 0 && (y = !0, S = o.dfsEdgeList[V].fromNode, q.forEach(function(te) {
                var re = "".concat(te.label, "-").concat(i[te.to].label);
                A[re] || (A[re] = {
                  projected: [],
                  edgeLabel: te.label,
                  nodeLabel2: i[te.to].label
                }), A[re].projected.push({
                  graphId: a.id,
                  edge: te,
                  preNode: N
                });
              }));
            });
          }, x = 0; x < T; x++) {
            var O = C(x);
            if (O === "break")
              break;
          }
          if (!y)
            return !0;
          var L = e.findMinLabel(A);
          o.dfsEdgeList.push(new Po(S, p + 1, In.VACANT_NODE_LABEL, L.edgeLabel, L.nodeLabel2));
          var R = o.dfsEdgeList.length - 1;
          return t.dfsEdgeList[R] !== o.dfsEdgeList[R] ? !1 : c(A["".concat(L.edgeLabel, "-").concat(L.nodeLabel2)].projected);
        }, l = "".concat(u.nodeLabel1, "-").concat(u.edgeLabel, "-").concat(u.nodeLabel2);
        return f(s[l].projected);
      }
    }, r.prototype.report = function() {
      if (!(this.dfsCode.getNodeNum() < this.minNodeNum)) {
        this.counter++;
        var e = this.dfsCode.toGraph(this.counter, this.directed);
        this.frequentSubgraphs.push((0, o$.clone)(e));
      }
    }, r.prototype.subGraphMining = function(e) {
      var t = this, n = this.getSupport(e);
      if (!(n < this.minSupport) && this.isMin()) {
        this.report();
        var a = this.dfsCode.getNodeNum(), i = this.dfsCode.buildRmpath(), o = this.dfsCode.dfsEdgeList[i[0]].toNode, s = this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1, u = {}, f = {};
        e.forEach(function(l) {
          for (var c = t.graphs[l.graphId], h = c.nodeMap, d = new vc(l), v = i.length - 1; v >= 0; v--) {
            var p = t.findBackwardEdge(c, d.edges[i[v]], d.edges[i[0]], d);
            if (p) {
              var g = "".concat(t.dfsCode.dfsEdgeList[i[v]].fromNode, "-").concat(p.label);
              f[g] || (f[g] = {
                projected: [],
                toNodeId: t.dfsCode.dfsEdgeList[i[v]].fromNode,
                edgeLabel: p.label
              }), f[g].projected.push({
                graphId: l.graphId,
                edge: p,
                preNode: l
              });
            }
          }
          if (!(a >= t.maxNodeNum)) {
            var y = t.findForwardPureEdges(c, d.edges[i[0]], s, d);
            y.forEach(function(b) {
              var E = "".concat(o, "-").concat(b.label, "-").concat(h[b.to].label);
              u[E] || (u[E] = {
                projected: [],
                fromNodeId: o,
                edgeLabel: b.label,
                nodeLabel2: h[b.to].label
              }), u[E].projected.push({
                graphId: l.graphId,
                edge: b,
                preNode: l
              });
            });
            for (var m = function(E) {
              var x = t.findForwardRmpathEdges(c, d.edges[i[E]], s, d);
              x.forEach(function(w) {
                var _ = "".concat(t.dfsCode.dfsEdgeList[i[E]].fromNode, "-").concat(w.label, "-").concat(h[w.to].label);
                u[_] || (u[_] = {
                  projected: [],
                  fromNodeId: t.dfsCode.dfsEdgeList[i[E]].fromNode,
                  edgeLabel: w.label,
                  nodeLabel2: h[w.to].label
                }), u[_].projected.push({
                  graphId: l.graphId,
                  edge: w,
                  preNode: l
                });
              });
            }, v = 0; v < i.length; v++)
              m(v);
          }
        }), Object.keys(f).forEach(function(l) {
          var c = f[l], h = c.toNodeId, d = c.edgeLabel;
          t.dfsCode.dfsEdgeList.push(new Po(o, h, "-1", d, "-1")), t.subGraphMining(f[l].projected), t.dfsCode.dfsEdgeList.pop();
        }), Object.keys(u).forEach(function(l) {
          var c = u[l], h = c.fromNodeId, d = c.edgeLabel, v = c.nodeLabel2;
          t.dfsCode.dfsEdgeList.push(new Po(h, o + 1, In.VACANT_NODE_LABEL, d, v)), t.subGraphMining(u[l].projected), t.dfsCode.dfsEdgeList.pop();
        });
      }
    }, r.prototype.generate1EdgeFrequentSubGraphs = function() {
      var e = this.graphs, t = this.directed, n = this.minSupport, a = this.frequentSize1Subgraphs, i = {}, o = {}, s = {};
      return Object.keys(e).forEach(function(u) {
        var f = e[u], l = f.nodeMap;
        f.nodes.forEach(function(c, h) {
          var d = c.label, v = "".concat(u, "-").concat(d);
          if (!s[v]) {
            var p = i[d] || 0;
            p++, i[d] = p;
          }
          s[v] = {
            graphKey: u,
            label: d
          }, c.edges.forEach(function(g) {
            var y = d, m = l[g.to].label;
            if (!t && y > m) {
              var b = m;
              m = y, y = b;
            }
            var E = g.label, x = "".concat(y, "-").concat(E, "-").concat(m);
            if (!o[x]) {
              var w = o[x] || 0;
              w++, o[x] = w;
            }
          });
        });
      }), Object.keys(i).forEach(function(u) {
        var f = i[u];
        if (!(f < n)) {
          var l = {
            nodes: [],
            edges: []
          };
          l.nodes.push({
            id: "0",
            label: u
          }), a.push(l);
        }
      }), a;
    }, r.prototype.run = function() {
      var e = this;
      if (this.frequentSize1Subgraphs = this.generate1EdgeFrequentSubGraphs(), !(this.maxNodeNum < 2)) {
        var t = this.graphs;
        this.directed;
        var n = {};
        Object.keys(t).forEach(function(a) {
          var i = t[a], o = i.nodeMap;
          i.nodes.forEach(function(s) {
            var u = e.findForwardRootEdges(i, s);
            u.forEach(function(f) {
              var l = o[f.to], c = "".concat(s.label, "-").concat(f.label, "-").concat(l.label);
              n[c] || (n[c] = {
                projected: [],
                nodeLabel1: s.label,
                edgeLabel: f.label,
                nodeLabel2: l.label
              });
              var h = {
                graphId: a,
                edge: f,
                preNode: null
              };
              n[c].projected.push(h);
            });
          });
        }), Object.keys(n).forEach(function(a) {
          var i = n[a], o = i.projected, s = i.nodeLabel1, u = i.edgeLabel, f = i.nodeLabel2;
          e.dfsCode.dfsEdgeList.push(new Po(0, 1, s, u, f)), e.subGraphMining(o), e.dfsCode.dfsEdgeList.pop();
        });
      }
    }, r;
  }()
), u$ = function(e, t, n, a) {
  var i = {};
  return Object.keys(e).forEach(function(o, s) {
    var u = e[o], f = new In.Graph(s, !0, t), l = {};
    u.nodes.forEach(function(c, h) {
      f.addNode(h, c[n]), l[c.id] = h;
    }), u.edges.forEach(function(c, h) {
      var d = l[c.source], v = l[c.target];
      f.addEdge(-1, d, v, c[a]);
    }), f && f.getNodeNum() && (i[f.id] = f);
  }), i;
}, f$ = function(e, t, n) {
  var a = [];
  return e.forEach(function(i) {
    var o = {
      nodes: [],
      edges: []
    };
    i.nodes.forEach(function(s) {
      var u;
      o.nodes.push((u = {
        id: "".concat(s.id)
      }, u[t] = s.label, u));
    }), i.edges.forEach(function(s) {
      var u;
      o.edges.push((u = {
        source: "".concat(s.from),
        target: "".concat(s.to)
      }, u[n] = s.label, u));
    }), a.push(o);
  }), a;
}, Rx = "cluster", l$ = function(e) {
  var t = e.graphs, n = e.directed, a = n === void 0 ? !1 : n, i = e.nodeLabelProp, o = i === void 0 ? Rx : i, s = e.edgeLabelProp, u = s === void 0 ? Rx : s, f = u$(t, a, o, u), l = e.minSupport, c = e.maxNodeNum, h = e.minNodeNum, d = e.verbose, v = e.top, p = {
    graphs: f,
    minSupport: l,
    maxNodeNum: c,
    minNodeNum: h,
    top: v,
    verbose: d,
    directed: a
  }, g = new s$(p);
  g.run();
  var y = f$(g.frequentSubgraphs, o, u);
  return y;
}, c$ = l$;
wd.default = c$;
Object.defineProperty(xd, "__esModule", {
  value: !0
});
xd.default = void 0;
var Bx = eT, Fx = zy(Hf), h$ = zy(wd), Gx = zy(yu), d$ = Hr;
function zy(r) {
  return r && r.__esModule ? r : { default: r };
}
var zx = function(e, t, n, a) {
  n === void 0 && (n = "cluster"), a === void 0 && (a = 2);
  var i = [], o = e.nodes;
  return t.forEach(function(s, u) {
    i.push(hT(o, s, u, n, a));
  }), i;
}, hT = function(e, t, n, a, i) {
  var o = [n], s = [], u = {};
  return t.forEach(function(f, l) {
    if (f <= i && n !== l) {
      o.push(l), s.push(e[l]);
      var c = e[l][a];
      u[c] ? (u[c].count++, u[c].dists.push(f)) : u[c] = {
        count: 1,
        dists: [f]
      };
    }
  }), Object.keys(u).forEach(function(f) {
    u[f].dists = u[f].dists.sort(function(l, c) {
      return l - c;
    });
  }), {
    nodeIdx: n,
    nodeId: e[n].id,
    nodeIdxs: o,
    neighbors: s,
    neighborNum: o.length - 1,
    nodeLabelCountMap: u
  };
}, v$ = function(e, t, n, a, i) {
  var o = Math.ceil(n / t), s = {}, u = 0;
  return a.forEach(function(f, l) {
    for (var c = 0, h = 0, d = f.nodeIdxs, v = f.neighborNum - 1; c < o; ) {
      for (var p = d[1 + Math.floor(Math.random() * v)], g = 0; (s["".concat(l, "-").concat(p)] || s["".concat(p, "-").concat(l)]) && (p = Math.floor(Math.random() * t), g++, !(g > 2 * t)); )
        ;
      if (g < 2 * t && (s["".concat(l, "-").concat(p)] = {
        start: l,
        end: p,
        distance: i[l][p]
      }, c++, u++, u >= n))
        return s;
      if (h++, h > 2 * t)
        break;
    }
    if (c < o) {
      var y = o - c;
      o = (o + y) / (t - l - 1);
    }
  }), s;
}, Jc = function(e, t, n, a) {
  var i = n.nodes;
  return a || (a = {}), Object.keys(e).forEach(function(o) {
    var s, u;
    if (!(a && a[o])) {
      a[o] = {
        nodes: [],
        edges: []
      };
      var f = e[o], l = (s = t[f.start]) === null || s === void 0 ? void 0 : s.nodeIdxs, c = (u = t[f.end]) === null || u === void 0 ? void 0 : u.nodeIdxs;
      if (!(!l || !c)) {
        var h = new Set(c), d = l.filter(function(m) {
          return h.has(m);
        });
        if (!(!d || !d.length)) {
          for (var v = {}, p = d.length, g = 0; g < p; g++) {
            var y = i[d[g]];
            a[o].nodes.push(y), v[y.id] = !0;
          }
          n.edges.forEach(function(m) {
            v[m.source] && v[m.target] && a[o].edges.push(m);
          });
        }
      }
    }
  }), a;
}, eh = function(e, t, n, a) {
  var i, o, s = {};
  e.nodes.forEach(function(f) {
    s[f.id] = f;
  });
  var u = 0;
  return !(!((i = t == null ? void 0 : t.edges) === null || i === void 0) && i.length) || ((o = t == null ? void 0 : t.nodes) === null || o === void 0 ? void 0 : o.length) < 2 ? 0 : (e.edges.forEach(function(f) {
    var l = s[f.source][n], c = s[f.target][n], h = t == null ? void 0 : t.nodes[0][n], d = t == null ? void 0 : t.nodes[1][n], v = t == null ? void 0 : t.edges[0][a];
    f[a] === v && (l === h && c === d || l === d && c === h) && u++;
  }), u);
}, p$ = function(e, t, n) {
  for (var a = 1 / 0, i = 0, o = function(f) {
    var l = e[f], c = Object.keys(l).sort(function(m, b) {
      return l[m] - l[b];
    }), h = 10, d = [];
    c.forEach(function(m, b) {
      d[b % h] || (d[b % h] = {
        graphs: [],
        totalCount: 0,
        aveCount: 0
      }), d[b % h].graphs.push(m), d[b % h].totalCount += l[m];
    });
    var v = 0, p = [];
    d.forEach(function(m) {
      var b = m.totalCount / m.graphs.length;
      m.aveCount = b, p.push(b);
      var E = 0, x = m.length;
      m.graphs.forEach(function(w, _) {
        var M = l[w];
        m.graphs.forEach(function(A, S) {
          _ !== S && (E += Math.abs(M - l[A]));
        });
      }), E /= x * (x - 1) / 2, v += E;
    }), v /= d.length;
    var g = 0;
    p.forEach(function(m, b) {
      p.forEach(function(E, x) {
        b !== x && (g += Math.abs(m - E));
      }), g /= p.length * (p.length - 1) / 2;
    });
    var y = g - v;
    a < y && (a = y, i = f);
  }, s = 0; s < t; s++)
    o(s);
  return {
    structure: n[i],
    structureCountMap: e[i]
  };
}, Ux = function(e, t) {
  var n = {}, a = {};
  return e.forEach(function(i, o) {
    n[i.id] = {
      idx: o,
      node: i,
      degree: 0,
      inDegree: 0,
      outDegree: 0
    };
    var s = i[t];
    a[s] || (a[s] = []), a[s].push(i);
  }), {
    nodeMap: n,
    nodeLabelMap: a
  };
}, jx = function(e, t, n) {
  var a = {}, i = {};
  return e.forEach(function(o, s) {
    a["".concat(d$.uniqueId)] = {
      idx: s,
      edge: o
    };
    var u = o[t];
    i[u] || (i[u] = []), i[u].push(o);
    var f = n[o.source];
    f && (f.degree++, f.outDegree++);
    var l = n[o.target];
    l && (l.degree++, l.inDegree++);
  }), {
    edgeMap: a,
    edgeLabelMap: i
  };
}, $x = function(e, t, n) {
  var a = t.length, i = {};
  return t.forEach(function(o, s) {
    for (var u = n ? 0 : s + 1, f = e[s].id, l = u; l < a; l++)
      if (s !== l) {
        var c = e[l].id, h = o[l];
        i["".concat(f, "-").concat(c)] = h, n || (i["".concat(c, "-").concat(f)] = h);
      }
  }), i;
}, g$ = function(e, t, n, a, i, o, s, u, f, l, c) {
  var h, d = "".concat(t.id, "-").concat(n.id);
  if (l && l[d])
    return l[d];
  var v = c ? c[d] : void 0;
  if (!v) {
    var p = (h = {}, h[d] = {
      start: a[t.id].idx,
      end: a[n.id].idx,
      distance: i
    }, h);
    c = Jc(p, o, e, c), v = c[d];
  }
  return eh(v, s, u, f);
}, Wx = function(e, t, n, a) {
  var i, o, s, u = (i = e[t]) === null || i === void 0 ? void 0 : i.degree, f = (o = e[t]) === null || o === void 0 ? void 0 : o.inDegree, l = (s = e[t]) === null || s === void 0 ? void 0 : s.outDegree;
  return e[t] === void 0 && (u = 1 / 0, f = 1 / 0, l = 1 / 0, a[t].forEach(function(c) {
    var h = n[c.id].degree;
    u > h && (u = h);
    var d = n[c.id].inDegree;
    f > d && (f = d);
    var v = n[c.id].outDegree;
    l > v && (l = v);
  }), e[t] = {
    degree: u,
    inDegree: f,
    outDegree: l
  }), {
    minPatternNodeLabelDegree: u,
    minPatternNodeLabelInDegree: f,
    minPatternNodeLabelOutDegree: l
  };
}, y$ = function(e, t, n, a, i, o, s) {
  var u;
  if (n === void 0 && (n = !1), o === void 0 && (o = "cluster"), s === void 0 && (s = "cluster"), !(!e || !e.nodes)) {
    var f = e.nodes.length;
    if (f) {
      var l = (0, Fx.default)(e, n), c = (0, Fx.default)(t, n), h = $x(e.nodes, l, n), d = $x(t.nodes, c, n), v = Ux(e.nodes, o), p = v.nodeMap, g = v.nodeLabelMap, y = Ux(t.nodes, o), m = y.nodeMap, b = y.nodeLabelMap;
      jx(e.edges, s, p);
      var E = jx(t.edges, s, m).edgeLabelMap, x = [];
      c == null || c.forEach(function(rt) {
        x = x.concat(rt);
      }), i || (i = Math.max.apply(Math, (0, Bx.__spreadArray)((0, Bx.__spreadArray)([], x, !1), [2], !1))), a || (a = i);
      var w = zx(e, l, o, a), _ = zx(t, c, o, a), M = Math.min(100, f * (f - 1) / 2), A = v$(a, f, M, w, l), S = Jc(A, w, e), T = 10, C = 1, O = 1, L = 4, R = {
        graphs: S,
        nodeLabelProp: o,
        edgeLabelProp: s,
        minSupport: C,
        minNodeNum: O,
        maxNodeNum: L,
        directed: n
      }, P = (0, h$.default)(R).slice(0, T), z = P.length, V = [];
      P.forEach(function(rt, ie) {
        V[ie] = {}, Object.keys(S).forEach(function(D) {
          var _e = S[D], Fe = eh(_e, rt, o, s);
          V[ie][D] = Fe;
        });
      });
      var N = p$(V, z, P), F = N.structure, q = N.structureCountMap, te = t.nodes[0], re = [], J = (u = t.nodes[0]) === null || u === void 0 ? void 0 : u[o], ye = -1 / 0;
      t.nodes.forEach(function(rt) {
        var ie = rt[o], D = g[ie];
        (D == null ? void 0 : D.length) > ye && (ye = D.length, re = D, J = ie, te = rt);
      });
      var Be = {}, Pe = {}, et = {}, ut = {}, at = {}, At = {};
      Object.keys(b).forEach(function(rt, ie) {
        at[rt] = [], n && (At[rt] = []);
        var D = b[rt], _e = {};
        D.forEach(function(Ke) {
          var Ze = d["".concat(te.id, "-").concat(Ke.id)];
          if (Ze && at[rt].push(Ze), _e["".concat(te.id, "-").concat(Ke.id)] = {
            start: 0,
            end: m[Ke.id].idx,
            distance: Ze
          }, n) {
            var ht = d["".concat(Ke.id, "-").concat(te.id)];
            ht && At[rt].push(ht);
          }
        }), at[rt] = at[rt].sort(function(Ke, Ze) {
          return Ke - Ze;
        }), n && (At[rt] = At[rt].sort(function(Ke, Ze) {
          return Ke - Ze;
        })), Pe = Jc(_e, _, t, Pe);
        var Fe = [];
        if (Object.keys(_e).forEach(function(Ke) {
          if (et[Ke]) {
            Fe.push(et[Ke]);
            return;
          }
          var Ze = Pe[Ke];
          et[Ke] = eh(Ze, F, o, s), Fe.push(et[Ke]);
        }), Fe = Fe.sort(function(Ke, Ze) {
          return Ze - Ke;
        }), ut["".concat(te.id, "-").concat(rt)] = Fe, rt !== J)
          for (var ge = (re == null ? void 0 : re.length) || 0, We = function(Ze) {
            var ht = re[Ze], It = w[p[ht.id].idx], sr = It.nodeLabelCountMap[rt], Ot = b[rt].length;
            if (!sr || sr.count < Ot)
              return re.splice(Ze, 1), "continue";
            for (var fr = !1, ar = 0; ar < Ot; ar++)
              if (sr.dists[ar] > at[rt][ar]) {
                fr = !0;
                break;
              }
            if (fr)
              return re.splice(Ze, 1), "continue";
            var pr = {};
            It.neighbors.forEach(function(Kt) {
              var Sr = h["".concat(ht.id, "-").concat(Kt.id)];
              pr["".concat(ht.id, "-").concat(Kt.id)] = {
                start: p[ht.id].idx,
                end: p[Kt.id].idx,
                distance: Sr
              };
            }), S = Jc(pr, w, e, S);
            var hr = [];
            Object.keys(pr).forEach(function(Kt) {
              if (q[Kt]) {
                hr.push(q[Kt]);
                return;
              }
              var Sr = S[Kt];
              q[Kt] = eh(Sr, F, o, s), hr.push(q[Kt]);
            }), hr = hr.sort(function(Kt, Sr) {
              return Sr - Kt;
            });
            for (var Kr = !1, ar = 0; ar < Ot; ar++)
              if (hr[ar] < Fe[ar]) {
                Kr = !0;
                break;
              }
            if (Kr)
              return re.splice(Ze, 1), "continue";
          }, Xe = ge - 1; Xe >= 0; Xe--)
            We(Xe);
      });
      var xt = [];
      re == null || re.forEach(function(rt) {
        for (var ie = p[rt.id].idx, D = hT(e.nodes, l[ie], ie, o, i), _e = D.neighbors, Fe = _e.length, ge = !1, We = Fe - 1; We >= 0; We--) {
          if (_e.length + 1 < t.nodes.length) {
            ge = !0;
            return;
          }
          var Xe = _e[We], Ke = Xe[o];
          if (!b[Ke] || !b[Ke].length) {
            _e.splice(We, 1);
            continue;
          }
          if (!at[Ke] || !at[Ke].length) {
            _e.splice(We, 1);
            continue;
          }
          var Ze = "".concat(rt.id, "-").concat(Xe.id), ht = h[Ze], It = at[Ke].length - 1, sr = at[Ke][It];
          if (ht > sr) {
            _e.splice(We, 1);
            continue;
          }
          if (n) {
            var Ot = "".concat(Xe.id, "-").concat(rt.id), fr = h[Ot];
            It = At[Ke].length - 1;
            var ar = At[Ke][It];
            if (fr > ar) {
              _e.splice(We, 1);
              continue;
            }
          }
          var pr = q[Ze] ? q[Ze] : g$(e, rt, Xe, p, ht, w, F, o, s, q, S), hr = "".concat(te.id, "-").concat(Ke), Kr = ut[hr][ut[hr].length - 1];
          if (pr < Kr) {
            _e.splice(We, 1);
            continue;
          }
          var Kt = Wx(Be, Ke, m, b), Sr = Kt.minPatternNodeLabelDegree;
          if (Kt.minPatternNodeLabelInDegree, Kt.minPatternNodeLabelOutDegree, p[Xe.id].degree < Sr) {
            _e.splice(We, 1);
            continue;
          }
        }
        ge || xt.push({
          nodes: [rt].concat(_e)
        });
      });
      var lr = (0, Gx.default)(t, te.id, !1).length, Rt = {};
      n ? (Object.keys(lr).forEach(function(rt) {
        var ie = m[rt].node[o];
        Rt[ie] ? Rt[ie].push(lr[rt]) : Rt[ie] = [lr[rt]];
      }), Object.keys(Rt).forEach(function(rt) {
        Rt[rt].sort(function(ie, D) {
          return ie - D;
        });
      })) : Rt = at;
      for (var Wt = xt.length, vr = function(ie) {
        var D = xt[ie], _e = D.nodes[0], Fe = {}, ge = {};
        D.nodes.forEach(function(Mt, dr) {
          ge[Mt.id] = {
            idx: dr,
            node: Mt,
            degree: 0,
            inDegree: 0,
            outDegree: 0
          };
          var vt = Mt[o];
          Fe[vt] ? Fe[vt]++ : Fe[vt] = 1;
        });
        var We = [], Xe = {};
        e.edges.forEach(function(Mt) {
          ge[Mt.source] && ge[Mt.target] && (We.push(Mt), Xe[Mt[s]] ? Xe[Mt[s]]++ : Xe[Mt[s]] = 1, ge[Mt.source].degree++, ge[Mt.target].degree++, ge[Mt.source].outDegree++, ge[Mt.target].inDegree++);
        });
        for (var Ke = Object.keys(E).length, Ze = !1, ht = 0; ht < Ke; ht++) {
          var It = Object.keys(E)[ht];
          if (!Xe[It] || Xe[It] < E[It].length) {
            Ze = !0;
            break;
          }
        }
        if (Ze)
          return xt.splice(ie, 1), "continue";
        var sr = We.length;
        if (sr < t.edges.length)
          return xt.splice(ie, 1), "break";
        for (var Ot = !1, fr = function(dr) {
          var vt = We[dr], br = vt[s], qr = E[br];
          if (!qr || !qr.length)
            return Xe[br]--, qr && Xe[br] < qr.length ? (Ot = !0, "break") : (We.splice(dr, 1), ge[vt.source].degree--, ge[vt.target].degree--, ge[vt.source].outDegree--, ge[vt.target].inDegree--, "continue");
          var oi = ge[vt.source].node[o], si = ge[vt.target].node[o], la = !1;
          if (qr.forEach(function(Oa) {
            var ui = m[Oa.source].node, fi = m[Oa.target].node;
            ui[o] === oi && fi[o] === si && (la = !0), !n && ui[o] === si && fi[o] === oi && (la = !0);
          }), !la)
            return Xe[br]--, qr && Xe[br] < qr.length ? (Ot = !0, "break") : (We.splice(dr, 1), ge[vt.source].degree--, ge[vt.target].degree--, ge[vt.source].outDegree--, ge[vt.target].inDegree--, "continue");
        }, ht = sr - 1; ht >= 0; ht--) {
          var ar = fr(ht);
          if (ar === "break")
            break;
        }
        if (Ot)
          return xt.splice(ie, 1), "continue";
        D.edges = We;
        var pr = (0, Gx.default)(D, D.nodes[0].id, !1).length;
        if (Object.keys(pr).reverse().forEach(function(Mt) {
          if (!(Mt === D.nodes[0].id || Ot)) {
            if (pr[Mt] === 1 / 0) {
              var dr = ge[Mt].node[o];
              if (Fe[dr]--, Fe[dr] < b[dr].length) {
                Ot = !0;
                return;
              }
              var vt = D.nodes.indexOf(ge[Mt].node);
              D.nodes.splice(vt, 1), ge[Mt] = void 0;
              return;
            }
            var br = p[Mt].node[o];
            if (!Rt[br] || !Rt[br].length || pr[Mt] > Rt[br][Rt[br].length - 1]) {
              var dr = ge[Mt].node[o];
              if (Fe[dr]--, Fe[dr] < b[dr].length) {
                Ot = !0;
                return;
              }
              var vt = D.nodes.indexOf(ge[Mt].node);
              D.nodes.splice(vt, 1), ge[Mt] = void 0;
            }
          }
        }), Ot)
          return xt.splice(ie, 1), "continue";
        for (var hr = !0, Kr = 0; hr && !Ot; ) {
          hr = !1;
          var Kt = n ? ge[_e.id].degree < m[te.id].degree || ge[_e.id].inDegree < m[te.id].inDegree || ge[_e.id].outDegree < m[te.id].outDegree : ge[_e.id].degree < m[te.id].degree;
          if (Kt) {
            Ot = !0;
            break;
          }
          if (Fe[_e[o]] < b[_e[o]].length) {
            Ot = !0;
            break;
          }
          for (var Sr = D.nodes.length, Pn = Sr - 1; Pn >= 0; Pn--) {
            var Lr = D.nodes[Pn], Ia = ge[Lr.id].degree, ho = ge[Lr.id].inDegree, vo = ge[Lr.id].outDegree, Xr = Lr[o], fa = Wx(Be, Xr, m, b), ii = fa.minPatternNodeLabelDegree, po = fa.minPatternNodeLabelInDegree, go = fa.minPatternNodeLabelOutDegree, yo = n ? Ia < ii || ho < po || vo < go : Ia < ii;
            if (yo) {
              if (Fe[Lr[o]]--, Fe[Lr[o]] < b[Lr[o]].length) {
                Ot = !0;
                break;
              }
              D.nodes.splice(Pn, 1), ge[Lr.id] = void 0, hr = !0;
            }
          }
          if (Ot || !hr && Kr !== 0)
            break;
          sr = We.length;
          for (var kn = sr - 1; kn >= 0; kn--) {
            var Ar = We[kn];
            if (!ge[Ar.source] || !ge[Ar.target]) {
              We.splice(kn, 1);
              var Rn = Ar[s];
              if (Xe[Rn]--, ge[Ar.source] && (ge[Ar.source].degree--, ge[Ar.source].outDegree--), ge[Ar.target] && (ge[Ar.target].degree--, ge[Ar.target].inDegree--), E[Rn] && Xe[Rn] < E[Rn].length) {
                Ot = !0;
                break;
              }
              hr = !0;
            }
          }
          Kr++;
        }
        if (Ot || Ot || D.nodes.length < t.nodes.length || We.length < t.edges.length)
          return xt.splice(ie, 1), "continue";
      }, cr = Wt - 1; cr >= 0; cr--) {
        var jt = vr(cr);
        if (jt === "break")
          break;
      }
      for (var or = xt.length, Wr = function(ie) {
        var D = xt[ie], _e = {};
        D.edges.forEach(function(We) {
          var Xe = "".concat(We.source, "-").concat(We.target, "-").concat(We.label);
          _e[Xe] ? _e[Xe]++ : _e[Xe] = 1;
        });
        for (var Fe = function(Xe) {
          var Ke = xt[Xe], Ze = {};
          Ke.edges.forEach(function(It) {
            var sr = "".concat(It.source, "-").concat(It.target, "-").concat(It.label);
            Ze[sr] ? Ze[sr]++ : Ze[sr] = 1;
          });
          var ht = !0;
          Object.keys(Ze).length !== Object.keys(_e).length ? ht = !1 : Object.keys(_e).forEach(function(It) {
            Ze[It] !== _e[It] && (ht = !1);
          }), ht && xt.splice(Xe, 1);
        }, ge = or - 1; ge > ie; ge--)
          Fe(ge);
        or = xt.length;
      }, cr = 0; cr <= or - 1; cr++)
        Wr(cr);
      return xt;
    }
  }
}, m$ = y$;
xd.default = m$;
(function(r) {
  function e(E) {
    "@babel/helpers - typeof";
    return e = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(x) {
      return typeof x;
    } : function(x) {
      return x && typeof Symbol == "function" && x.constructor === Symbol && x !== Symbol.prototype ? "symbol" : typeof x;
    }, e(E);
  }
  Object.defineProperty(r, "__esModule", {
    value: !0
  }), Object.defineProperty(r, "GADDI", {
    enumerable: !0,
    get: function() {
      return p.default;
    }
  }), Object.defineProperty(r, "breadthFirstSearch", {
    enumerable: !0,
    get: function() {
      return n.default;
    }
  }), Object.defineProperty(r, "connectedComponent", {
    enumerable: !0,
    get: function() {
      return a.default;
    }
  }), Object.defineProperty(r, "depthFirstSearch", {
    enumerable: !0,
    get: function() {
      return s.default;
    }
  }), Object.defineProperty(r, "detectCycle", {
    enumerable: !0,
    get: function() {
      return o.default;
    }
  }), Object.defineProperty(r, "dijkstra", {
    enumerable: !0,
    get: function() {
      return u.default;
    }
  }), Object.defineProperty(r, "findAllPath", {
    enumerable: !0,
    get: function() {
      return f.findAllPath;
    }
  }), Object.defineProperty(r, "findShortestPath", {
    enumerable: !0,
    get: function() {
      return f.findShortestPath;
    }
  }), Object.defineProperty(r, "floydWarshall", {
    enumerable: !0,
    get: function() {
      return l.default;
    }
  }), Object.defineProperty(r, "getAdjMatrix", {
    enumerable: !0,
    get: function() {
      return t.default;
    }
  }), Object.defineProperty(r, "getDegree", {
    enumerable: !0,
    get: function() {
      return i.default;
    }
  }), Object.defineProperty(r, "getInDegree", {
    enumerable: !0,
    get: function() {
      return i.getInDegree;
    }
  }), Object.defineProperty(r, "getNeighbors", {
    enumerable: !0,
    get: function() {
      return g.getNeighbors;
    }
  }), Object.defineProperty(r, "getOutDegree", {
    enumerable: !0,
    get: function() {
      return i.getOutDegree;
    }
  }), Object.defineProperty(r, "labelPropagation", {
    enumerable: !0,
    get: function() {
      return c.default;
    }
  }), Object.defineProperty(r, "louvain", {
    enumerable: !0,
    get: function() {
      return h.default;
    }
  }), Object.defineProperty(r, "minimumSpanningTree", {
    enumerable: !0,
    get: function() {
      return d.default;
    }
  }), Object.defineProperty(r, "pageRank", {
    enumerable: !0,
    get: function() {
      return v.default;
    }
  });
  var t = b(Qo), n = b(hd), a = b(to), i = m(wi), o = b(Wa), s = b(vd), u = b(yu), f = tu, l = b(Hf), c = b(pd), h = b(gd), d = b(yd), v = b(Ed), p = b(xd), g = Hr;
  function y(E) {
    if (typeof WeakMap != "function")
      return null;
    var x = /* @__PURE__ */ new WeakMap(), w = /* @__PURE__ */ new WeakMap();
    return (y = function(M) {
      return M ? w : x;
    })(E);
  }
  function m(E, x) {
    if (!x && E && E.__esModule)
      return E;
    if (E === null || e(E) !== "object" && typeof E != "function")
      return { default: E };
    var w = y(x);
    if (w && w.has(E))
      return w.get(E);
    var _ = {}, M = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for (var A in E)
      if (A !== "default" && Object.prototype.hasOwnProperty.call(E, A)) {
        var S = M ? Object.getOwnPropertyDescriptor(E, A) : null;
        S && (S.get || S.set) ? Object.defineProperty(_, A, S) : _[A] = E[A];
      }
    return _.default = E, w && w.set(E, _), _;
  }
  function b(E) {
    return E && E.__esModule ? E : { default: E };
  }
})(WC);
function tg(r) {
  "@babel/helpers - typeof";
  return tg = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, tg(r);
}
Object.defineProperty(cd, "__esModule", {
  value: !0
});
cd.default = void 0;
var _p = b$(WC), Xx = eo;
function dT(r) {
  if (typeof WeakMap != "function")
    return null;
  var e = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakMap();
  return (dT = function(a) {
    return a ? t : e;
  })(r);
}
function b$(r, e) {
  if (!e && r && r.__esModule)
    return r;
  if (r === null || tg(r) !== "object" && typeof r != "function")
    return { default: r };
  var t = dT(e);
  if (t && t.has(r))
    return t.get(r);
  var n = {}, a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in r)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(r, i)) {
      var o = a ? Object.getOwnPropertyDescriptor(r, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(n, i, o) : n[i] = r[i];
    }
  return n.default = r, t && t.set(r, n), n;
}
var Mp = typeof self < "u" ? self : {};
Mp.onmessage = function(r) {
  var e = r.data, t = e._algorithmType, n = e.data;
  if (t) {
    if (typeof _p[t] == "function") {
      var a = _p[t].apply(_p, n);
      Mp.postMessage({
        _algorithmType: Xx.MESSAGE.SUCCESS,
        data: a
      });
      return;
    }
    Mp.postMessage({
      _algorithmType: Xx.MESSAGE.FAILURE
    });
  }
};
var E$ = null;
cd.default = E$;
Object.defineProperty(ld, "__esModule", {
  value: !0
});
ld.default = void 0;
var x$ = eo, w$ = _$(cd);
function _$(r) {
  return r && r.__esModule ? r : { default: r };
}
var M$ = function(e) {
  return function() {
    for (var t = [], n = 0; n < arguments.length; n++)
      t[n] = arguments[n];
    return new Promise(function(a, i) {
      var o = new w$.default();
      o.postMessage({
        _algorithmType: e,
        data: t
      }), o.onmessage = function(s) {
        var u = s.data, f = u.data, l = u._algorithmType;
        x$.MESSAGE.SUCCESS === l ? a(f) : i(), o.terminate();
      };
    });
  };
}, S$ = M$;
ld.default = S$;
Object.defineProperty(Yt, "__esModule", {
  value: !0
});
Yt.pageRankAsync = Yt.minimumSpanningTreeAsync = Yt.louvainAsync = Yt.labelPropagationAsync = Yt.getOutDegreeAsync = Yt.getNeighborsAsync = Yt.getInDegreeAsync = Yt.getDegreeAsync = Yt.getAdjMatrixAsync = Yt.floydWarshallAsync = Yt.findShortestPathAsync = Yt.findAllPathAsync = Yt.dijkstraAsync = Yt.detectCycleAsync = Yt.detectAllUndirectedCycleAsync = Yt.detectAllDirectedCycleAsync = Yt.detectAllCyclesAsync = Yt.connectedComponentAsync = Yt.GADDIAsync = void 0;
var nn = A$(ld), an = eo;
function A$(r) {
  return r && r.__esModule ? r : { default: r };
}
var C$ = function(e, t) {
  return (0, nn.default)(an.ALGORITHM.getAdjMatrix).apply(void 0, [e, t]);
};
Yt.getAdjMatrixAsync = C$;
var T$ = function(e, t) {
  return (0, nn.default)(an.ALGORITHM.connectedComponent).apply(void 0, [e, t]);
};
Yt.connectedComponentAsync = T$;
var I$ = function(e) {
  return (0, nn.default)(an.ALGORITHM.getDegree)(e);
};
Yt.getDegreeAsync = I$;
var O$ = function(e, t) {
  return (0, nn.default)(an.ALGORITHM.getInDegree)(e, t);
};
Yt.getInDegreeAsync = O$;
var D$ = function(e, t) {
  return (0, nn.default)(an.ALGORITHM.getOutDegree)(e, t);
};
Yt.getOutDegreeAsync = D$;
var L$ = function(e) {
  return (0, nn.default)(an.ALGORITHM.detectCycle)(e);
};
Yt.detectCycleAsync = L$;
var N$ = function(e) {
  return (0, nn.default)(an.ALGORITHM.detectAllCycles)(e);
};
Yt.detectAllCyclesAsync = N$;
var P$ = function(e) {
  return (0, nn.default)(an.ALGORITHM.detectAllDirectedCycle)(e);
};
Yt.detectAllDirectedCycleAsync = P$;
var k$ = function(e) {
  return (0, nn.default)(an.ALGORITHM.detectAllUndirectedCycle)(e);
};
Yt.detectAllUndirectedCycleAsync = k$;
var R$ = function(e, t, n, a) {
  return (0, nn.default)(an.ALGORITHM.dijkstra).apply(void 0, [e, t, n, a]);
};
Yt.dijkstraAsync = R$;
var B$ = function(e, t, n, a) {
  return (0, nn.default)(an.ALGORITHM.findAllPath).apply(void 0, [e, t, n, a]);
};
Yt.findAllPathAsync = B$;
var F$ = function(e, t, n, a, i) {
  return (0, nn.default)(an.ALGORITHM.findShortestPath).apply(void 0, [e, t, n, a, i]);
};
Yt.findShortestPathAsync = F$;
var G$ = function(e, t) {
  return (0, nn.default)(an.ALGORITHM.floydWarshall).apply(void 0, [e, t]);
};
Yt.floydWarshallAsync = G$;
var z$ = function(e, t, n, a) {
  return a === void 0 && (a = 1e3), (0, nn.default)(an.ALGORITHM.labelPropagation)(e, t, n, a);
};
Yt.labelPropagationAsync = z$;
var U$ = function(e, t, n, a) {
  return (0, nn.default)(an.ALGORITHM.louvain)(e, t, n, a);
};
Yt.louvainAsync = U$;
var j$ = function(e, t, n) {
  return (0, nn.default)(an.ALGORITHM.minimumSpanningTree).apply(void 0, [e, t, n]);
};
Yt.minimumSpanningTreeAsync = j$;
var $$ = function(e, t, n) {
  return (0, nn.default)(an.ALGORITHM.pageRank).apply(void 0, [e, t, n]);
};
Yt.pageRankAsync = $$;
var W$ = function(e, t, n) {
  return (0, nn.default)(an.ALGORITHM.getNeighbors).apply(void 0, [e, t, n]);
};
Yt.getNeighborsAsync = W$;
var X$ = function(e, t, n, a, i, o, s) {
  return n === void 0 && (n = !1), o === void 0 && (o = "cluster"), s === void 0 && (s = "cluster"), (0, nn.default)(an.ALGORITHM.GADDI).apply(void 0, [e, t, n, a, i, o, s]);
};
Yt.GADDIAsync = X$;
(function(r) {
  Object.defineProperty(r, "__esModule", {
    value: !0
  }), Object.defineProperty(r, "GADDIAsync", {
    enumerable: !0,
    get: function() {
      return e.GADDIAsync;
    }
  }), Object.defineProperty(r, "connectedComponentAsync", {
    enumerable: !0,
    get: function() {
      return e.connectedComponentAsync;
    }
  }), r.default = void 0, Object.defineProperty(r, "detectAllCyclesAsync", {
    enumerable: !0,
    get: function() {
      return e.detectAllCyclesAsync;
    }
  }), Object.defineProperty(r, "detectAllDirectedCycleAsync", {
    enumerable: !0,
    get: function() {
      return e.detectAllDirectedCycleAsync;
    }
  }), Object.defineProperty(r, "detectAllUndirectedCycleAsync", {
    enumerable: !0,
    get: function() {
      return e.detectAllUndirectedCycleAsync;
    }
  }), Object.defineProperty(r, "detectCycleAsync", {
    enumerable: !0,
    get: function() {
      return e.detectCycleAsync;
    }
  }), r.detectDirectedCycleAsync = void 0, Object.defineProperty(r, "dijkstraAsync", {
    enumerable: !0,
    get: function() {
      return e.dijkstraAsync;
    }
  }), Object.defineProperty(r, "findAllPathAsync", {
    enumerable: !0,
    get: function() {
      return e.findAllPathAsync;
    }
  }), Object.defineProperty(r, "findShortestPathAsync", {
    enumerable: !0,
    get: function() {
      return e.findShortestPathAsync;
    }
  }), Object.defineProperty(r, "floydWarshallAsync", {
    enumerable: !0,
    get: function() {
      return e.floydWarshallAsync;
    }
  }), Object.defineProperty(r, "getAdjMatrixAsync", {
    enumerable: !0,
    get: function() {
      return e.getAdjMatrixAsync;
    }
  }), Object.defineProperty(r, "getDegreeAsync", {
    enumerable: !0,
    get: function() {
      return e.getDegreeAsync;
    }
  }), Object.defineProperty(r, "getInDegreeAsync", {
    enumerable: !0,
    get: function() {
      return e.getInDegreeAsync;
    }
  }), Object.defineProperty(r, "getNeighborsAsync", {
    enumerable: !0,
    get: function() {
      return e.getNeighborsAsync;
    }
  }), Object.defineProperty(r, "getOutDegreeAsync", {
    enumerable: !0,
    get: function() {
      return e.getOutDegreeAsync;
    }
  }), Object.defineProperty(r, "labelPropagationAsync", {
    enumerable: !0,
    get: function() {
      return e.labelPropagationAsync;
    }
  }), Object.defineProperty(r, "louvainAsync", {
    enumerable: !0,
    get: function() {
      return e.louvainAsync;
    }
  }), Object.defineProperty(r, "minimumSpanningTreeAsync", {
    enumerable: !0,
    get: function() {
      return e.minimumSpanningTreeAsync;
    }
  }), Object.defineProperty(r, "pageRankAsync", {
    enumerable: !0,
    get: function() {
      return e.pageRankAsync;
    }
  });
  var e = Yt, t = e.detectCycleAsync;
  r.detectDirectedCycleAsync = t;
  var n = {
    getAdjMatrixAsync: e.getAdjMatrixAsync,
    connectedComponentAsync: e.connectedComponentAsync,
    getDegreeAsync: e.getDegreeAsync,
    getInDegreeAsync: e.getInDegreeAsync,
    getOutDegreeAsync: e.getOutDegreeAsync,
    detectCycleAsync: e.detectCycleAsync,
    detectDirectedCycleAsync: t,
    detectAllCyclesAsync: e.detectAllCyclesAsync,
    detectAllDirectedCycleAsync: e.detectAllDirectedCycleAsync,
    detectAllUndirectedCycleAsync: e.detectAllUndirectedCycleAsync,
    dijkstraAsync: e.dijkstraAsync,
    findAllPathAsync: e.findAllPathAsync,
    findShortestPathAsync: e.findShortestPathAsync,
    floydWarshallAsync: e.floydWarshallAsync,
    labelPropagationAsync: e.labelPropagationAsync,
    louvainAsync: e.louvainAsync,
    minimumSpanningTreeAsync: e.minimumSpanningTreeAsync,
    pageRankAsync: e.pageRankAsync,
    getNeighborsAsync: e.getNeighborsAsync,
    GADDIAsync: e.GADDIAsync
  };
  r.default = n;
})(By);
const V$ = /* @__PURE__ */ Ai(By), Y$ = /* @__PURE__ */ BP({
  __proto__: null,
  default: V$
}, [By]);
function H$() {
  return window ? window.devicePixelRatio : 1;
}
function vT(r, e, t, n) {
  var a = r - t, i = e - n;
  return Math.sqrt(a * a + i * i);
}
function Fo(r, e, t, n, a, i) {
  return a >= r && a <= r + t && i >= e && i <= e + n;
}
function kf(r, e) {
  return !(e.minX > r.maxX || e.maxX < r.minX || e.minY > r.maxY || e.maxY < r.minY);
}
function K$(r, e) {
  return !r || !e ? r || e : {
    minX: Math.min(r.minX, e.minX),
    minY: Math.min(r.minY, e.minY),
    maxX: Math.max(r.maxX, e.maxX),
    maxY: Math.max(r.maxY, e.maxY)
  };
}
function Vx(r, e) {
  return r[0] === e[0] && r[1] === e[1];
}
var q$ = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, Z$ = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, Q$ = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, pT = /[\d.]+:(#[^\s]+|[^\)]+\))/gi;
function gT(r, e) {
  var t = r.match(pT);
  Se(t, function(n) {
    var a = n.split(":");
    e.addColorStop(a[0], a[1]);
  });
}
function J$(r, e, t) {
  var n = q$.exec(t), a = parseFloat(n[1]) % 360 * (Math.PI / 180), i = n[2], o = e.getBBox(), s, u;
  a >= 0 && a < 1 / 2 * Math.PI ? (s = {
    x: o.minX,
    y: o.minY
  }, u = {
    x: o.maxX,
    y: o.maxY
  }) : 1 / 2 * Math.PI <= a && a < Math.PI ? (s = {
    x: o.maxX,
    y: o.minY
  }, u = {
    x: o.minX,
    y: o.maxY
  }) : Math.PI <= a && a < 3 / 2 * Math.PI ? (s = {
    x: o.maxX,
    y: o.maxY
  }, u = {
    x: o.minX,
    y: o.minY
  }) : (s = {
    x: o.minX,
    y: o.maxY
  }, u = {
    x: o.maxX,
    y: o.minY
  });
  var f = Math.tan(a), l = f * f, c = (u.x - s.x + f * (u.y - s.y)) / (l + 1) + s.x, h = f * (u.x - s.x + f * (u.y - s.y)) / (l + 1) + s.y, d = r.createLinearGradient(s.x, s.y, c, h);
  return gT(i, d), d;
}
function e8(r, e, t) {
  var n = Z$.exec(t), a = parseFloat(n[1]), i = parseFloat(n[2]), o = parseFloat(n[3]), s = n[4];
  if (o === 0) {
    var u = s.match(pT);
    return u[u.length - 1].split(":")[1];
  }
  var f = e.getBBox(), l = f.maxX - f.minX, c = f.maxY - f.minY, h = Math.sqrt(l * l + c * c) / 2, d = r.createRadialGradient(f.minX + l * a, f.minY + c * i, 0, f.minX + l / 2, f.minY + c / 2, o * h);
  return gT(s, d), d;
}
function t8(r, e, t) {
  if (e.get("patternSource") && e.get("patternSource") === t)
    return e.get("pattern");
  var n, a, i = Q$.exec(t), o = i[1], s = i[2];
  function u() {
    n = r.createPattern(a, o), e.set("pattern", n), e.set("patternSource", t);
  }
  switch (o) {
    case "a":
      o = "repeat";
      break;
    case "x":
      o = "repeat-x";
      break;
    case "y":
      o = "repeat-y";
      break;
    case "n":
      o = "no-repeat";
      break;
    default:
      o = "no-repeat";
  }
  return a = new Image(), s.match(/^data:/i) || (a.crossOrigin = "Anonymous"), a.src = s, a.complete ? u() : (a.onload = u, a.src = a.src), n;
}
function r8(r, e, t) {
  var n = e.getBBox();
  if (isNaN(n.x) || isNaN(n.y) || isNaN(n.width) || isNaN(n.height))
    return t;
  if (He(t)) {
    if (t[1] === "(" || t[2] === "(") {
      if (t[0] === "l")
        return J$(r, e, t);
      if (t[0] === "r")
        return e8(r, e, t);
      if (t[0] === "p")
        return t8(r, e, t);
    }
    return t;
  }
  if (t instanceof CanvasPattern)
    return t;
}
function n8(r) {
  var e = 0, t = 0, n = 0, a = 0;
  return bt(r) ? r.length === 1 ? e = t = n = a = r[0] : r.length === 2 ? (e = n = r[0], t = a = r[1]) : r.length === 3 ? (e = r[0], t = a = r[1], n = r[2]) : (e = r[0], t = r[1], n = r[2], a = r[3]) : e = t = n = a = r, [e, t, n, a];
}
function pc(r) {
  return Math.sqrt(r[0] * r[0] + r[1] * r[1]);
}
function rg(r, e) {
  return pc(r) * pc(e) ? (r[0] * e[0] + r[1] * e[1]) / (pc(r) * pc(e)) : 1;
}
function Yx(r, e) {
  return (r[0] * e[1] < r[1] * e[0] ? -1 : 1) * Math.acos(rg(r, e));
}
function Hx(r, e) {
  var t = e[1], n = e[2], a = nd(ad(e[3]), Math.PI * 2), i = e[4], o = e[5], s = r[0], u = r[1], f = e[6], l = e[7], c = Math.cos(a) * (s - f) / 2 + Math.sin(a) * (u - l) / 2, h = -1 * Math.sin(a) * (s - f) / 2 + Math.cos(a) * (u - l) / 2, d = c * c / (t * t) + h * h / (n * n);
  d > 1 && (t *= Math.sqrt(d), n *= Math.sqrt(d));
  var v = t * t * (h * h) + n * n * (c * c), p = v ? Math.sqrt((t * t * (n * n) - v) / v) : 1;
  i === o && (p *= -1), isNaN(p) && (p = 0);
  var g = n ? p * t * h / n : 0, y = t ? p * -n * c / t : 0, m = (s + f) / 2 + Math.cos(a) * g - Math.sin(a) * y, b = (u + l) / 2 + Math.sin(a) * g + Math.cos(a) * y, E = [(c - g) / t, (h - y) / n], x = [(-1 * c - g) / t, (-1 * h - y) / n], w = Yx([1, 0], E), _ = Yx(E, x);
  return rg(E, x) <= -1 && (_ = Math.PI), rg(E, x) >= 1 && (_ = 0), o === 0 && _ > 0 && (_ = _ - 2 * Math.PI), o === 1 && _ < 0 && (_ = _ + 2 * Math.PI), {
    cx: m,
    cy: b,
    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理
    rx: Vx(r, [f, l]) ? 0 : t,
    ry: Vx(r, [f, l]) ? 0 : n,
    startAngle: w,
    endAngle: w + _,
    xRotation: a,
    arcFlag: i,
    sweepFlag: o
  };
}
var Oh = Math.sin, Dh = Math.cos, Uy = Math.atan2, gc = Math.PI;
function yT(r, e, t, n, a, i, o) {
  var s = e.stroke, u = e.lineWidth, f = t - a, l = n - i, c = Uy(l, f), h = new Xy({
    type: "path",
    canvas: r.get("canvas"),
    isArrowShape: !0,
    attrs: {
      // 默认箭头的边长为 10，夹角为 60 度
      path: "M" + 10 * Dh(gc / 6) + "," + 10 * Oh(gc / 6) + " L0,0 L" + 10 * Dh(gc / 6) + ",-" + 10 * Oh(gc / 6),
      // 使用 shape stroke 值
      stroke: s,
      lineWidth: u
    }
  });
  h.translate(a, i), h.rotateAtPoint(a, i, c), r.set(o ? "startArrowShape" : "endArrowShape", h);
}
function mT(r, e, t, n, a, i, o) {
  var s = e.startArrow, u = e.endArrow, f = e.stroke, l = e.lineWidth, c = o ? s : u, h = c.d, d = c.fill, v = c.stroke, p = c.lineWidth, g = tn(c, ["d", "fill", "stroke", "lineWidth"]), y = t - a, m = n - i, b = Uy(m, y);
  h && (a = a - Dh(b) * h, i = i - Oh(b) * h);
  var E = new Xy({
    type: "path",
    canvas: r.get("canvas"),
    isArrowShape: !0,
    attrs: B(B({}, g), {
      // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值
      stroke: v || f,
      lineWidth: p || l,
      // 箭头是否填充需要手动设置，不会继承自 shape 的值
      fill: d
    })
  });
  E.translate(a, i), E.rotateAtPoint(a, i, b), r.set(o ? "startArrowShape" : "endArrowShape", E);
}
function zo(r, e, t, n, a) {
  var i = Uy(n - e, t - r);
  return {
    dx: Dh(i) * a,
    dy: Oh(i) * a
  };
}
function jy(r, e, t, n, a, i) {
  typeof e.startArrow == "object" ? mT(r, e, t, n, a, i, !0) : e.startArrow ? yT(r, e, t, n, a, i, !0) : r.set("startArrowShape", null);
}
function $y(r, e, t, n, a, i) {
  typeof e.endArrow == "object" ? mT(r, e, t, n, a, i, !1) : e.endArrow ? yT(r, e, t, n, a, i, !1) : r.set("startArrowShape", null);
}
var Kx = {
  fill: "fillStyle",
  stroke: "strokeStyle",
  opacity: "globalAlpha"
};
function nu(r, e) {
  var t = e.attr();
  for (var n in t) {
    var a = t[n], i = Kx[n] ? Kx[n] : n;
    i === "matrix" && a ? r.transform(a[0], a[1], a[3], a[4], a[6], a[7]) : i === "lineDash" && r.setLineDash ? bt(a) && r.setLineDash(a) : (i === "strokeStyle" || i === "fillStyle" ? a = r8(r, e, a) : i === "globalAlpha" && (a = a * r.globalAlpha), r[i] = a);
  }
}
function ng(r, e, t) {
  for (var n = 0; n < e.length; n++) {
    var a = e[n];
    a.cfg.visible ? a.draw(r, t) : a.skipDraw();
  }
}
function a8(r, e, t) {
  var n = r.get("refreshElements");
  Se(n, function(a) {
    if (a !== r)
      for (var i = a.cfg.parent; i && i !== r && !i.cfg.refresh; )
        i.cfg.refresh = !0, i = i.cfg.parent;
  }), n[0] === r ? Wy(e) : ag(e, t);
}
function ag(r, e) {
  for (var t = 0; t < r.length; t++) {
    var n = r[t];
    if (n.cfg.visible)
      if (n.cfg.hasChanged)
        n.cfg.refresh = !0, n.isGroup() && Wy(n.cfg.children);
      else if (n.cfg.refresh)
        n.isGroup() && ag(n.cfg.children, e);
      else {
        var a = i8(n, e);
        n.cfg.refresh = a, a && n.isGroup() && ag(n.cfg.children, e);
      }
  }
}
function bT(r) {
  for (var e = 0; e < r.length; e++) {
    var t = r[e];
    t.cfg.hasChanged = !1, t.isGroup() && !t.destroyed && bT(t.cfg.children);
  }
}
function Wy(r, e) {
  for (var t = 0; t < r.length; t++) {
    var n = r[t];
    n.cfg.visible && (n.cfg.refresh = !0, n.isGroup() && Wy(n.get("children")));
  }
}
function i8(r, e) {
  var t = r.cfg.cacheCanvasBBox, n = r.cfg.isInView && t && kf(t, e);
  return n;
}
function ET(r, e, t, n) {
  var a = t.path, i = t.startArrow, o = t.endArrow;
  if (a) {
    var s = [0, 0], u = [0, 0], f = {
      dx: 0,
      dy: 0
    };
    e.beginPath();
    for (var l = 0; l < a.length; l++) {
      var c = a[l], h = c[0];
      if (l === 0 && i && i.d) {
        var d = r.getStartTangent();
        f = zo(d[0][0], d[0][1], d[1][0], d[1][1], i.d);
      } else if (l === a.length - 2 && a[l + 1][0] === "Z" && o && o.d) {
        var v = a[l + 1];
        if (v[0] === "Z") {
          var d = r.getEndTangent();
          f = zo(d[0][0], d[0][1], d[1][0], d[1][1], o.d);
        }
      } else if (l === a.length - 1 && o && o.d && a[0] !== "Z") {
        var d = r.getEndTangent();
        f = zo(d[0][0], d[0][1], d[1][0], d[1][1], o.d);
      }
      var p = f.dx, g = f.dy;
      switch (h) {
        case "M":
          e.moveTo(c[1] - p, c[2] - g), u = [c[1], c[2]];
          break;
        case "L":
          e.lineTo(c[1] - p, c[2] - g);
          break;
        case "Q":
          e.quadraticCurveTo(c[1], c[2], c[3] - p, c[4] - g);
          break;
        case "C":
          e.bezierCurveTo(c[1], c[2], c[3], c[4], c[5] - p, c[6] - g);
          break;
        case "A": {
          var y = void 0;
          n ? (y = n[l], y || (y = Hx(s, c), n[l] = y)) : y = Hx(s, c);
          var m = y.cx, b = y.cy, E = y.rx, x = y.ry, w = y.startAngle, _ = y.endAngle, M = y.xRotation, A = y.sweepFlag;
          if (e.ellipse)
            e.ellipse(m, b, E, x, M, w, _, 1 - A);
          else {
            var S = E > x ? E : x, T = E > x ? 1 : E / x, C = E > x ? x / E : 1;
            e.translate(m, b), e.rotate(M), e.scale(T, C), e.arc(0, 0, S, w, _, 1 - A), e.scale(1 / T, 1 / C), e.rotate(-M), e.translate(-m, -b);
          }
          break;
        }
        case "Z":
          e.closePath();
          break;
      }
      if (h === "Z")
        s = u;
      else {
        var O = c.length;
        s = [c[O - 2], c[O - 1]];
      }
    }
  }
}
function xT(r, e) {
  var t = r.get("canvas");
  t && (e === "remove" && (r._cacheCanvasBBox = r.get("cacheCanvasBBox")), r.get("hasChanged") || (r.set("hasChanged", !0), r.cfg.parent && r.cfg.parent.get("hasChanged") || (t.refreshElement(r, e, t), t.get("autoDraw") && t.draw())));
}
function o8(r) {
  var e;
  if (r.destroyed)
    e = r._cacheCanvasBBox;
  else {
    var t = r.get("cacheCanvasBBox"), n = t && !!(t.width && t.height), a = r.getCanvasBBox(), i = a && !!(a.width && a.height);
    n && i ? e = K$(t, a) : n ? e = t : i && (e = a);
  }
  return e;
}
function s8(r) {
  if (!r.length)
    return null;
  var e = [], t = [], n = [], a = [];
  return Se(r, function(i) {
    var o = o8(i);
    o && (e.push(o.minX), t.push(o.minY), n.push(o.maxX), a.push(o.maxY));
  }), {
    minX: Ja(e),
    minY: Ja(t),
    maxX: Qa(n),
    maxY: Qa(a)
  };
}
function u8(r, e) {
  return !r || !e || !kf(r, e) ? null : {
    minX: Math.max(r.minX, e.minX),
    minY: Math.max(r.minY, e.minY),
    maxX: Math.min(r.maxX, e.maxX),
    maxY: Math.min(r.maxY, e.maxY)
  };
}
var wT = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.onCanvasChange = function(t) {
      xT(this, t);
    }, e.prototype.getShapeBase = function() {
      return Hg;
    }, e.prototype.getGroupBase = function() {
      return e;
    }, e.prototype._applyClip = function(t, n) {
      n && (t.save(), nu(t, n), n.createPath(t), t.restore(), t.clip(), n._afterDraw());
    }, e.prototype.cacheCanvasBBox = function() {
      var t = this.cfg.children, n = [], a = [];
      Se(t, function(h) {
        var d = h.cfg.cacheCanvasBBox;
        d && h.cfg.isInView && (n.push(d.minX, d.maxX), a.push(d.minY, d.maxY));
      });
      var i = null;
      if (n.length) {
        var o = Ja(n), s = Qa(n), u = Ja(a), f = Qa(a);
        i = {
          minX: o,
          minY: u,
          x: o,
          y: u,
          maxX: s,
          maxY: f,
          width: s - o,
          height: f - u
        };
        var l = this.cfg.canvas;
        if (l) {
          var c = l.getViewRange();
          this.set("isInView", kf(i, c));
        }
      } else
        this.set("isInView", !1);
      this.set("cacheCanvasBBox", i);
    }, e.prototype.draw = function(t, n) {
      var a = this.cfg.children, i = n ? this.cfg.refresh : !0;
      a.length && i && (t.save(), nu(t, this), this._applyClip(t, this.getClip()), ng(t, a, n), t.restore(), this.cacheCanvasBBox()), this.cfg.refresh = null, this.set("hasChanged", !1);
    }, e.prototype.skipDraw = function() {
      this.set("cacheCanvasBBox", null), this.set("hasChanged", !1);
    }, e;
  }(uC)
), Ma = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });
    }, e.prototype.getShapeBase = function() {
      return Hg;
    }, e.prototype.getGroupBase = function() {
      return wT;
    }, e.prototype.onCanvasChange = function(t) {
      xT(this, t);
    }, e.prototype.calculateBBox = function() {
      var t = this.get("type"), n = this.getHitLineWidth(), a = cC(t), i = a(this), o = n / 2, s = i.x - o, u = i.y - o, f = i.x + i.width + o, l = i.y + i.height + o;
      return {
        x: s,
        minX: s,
        y: u,
        minY: u,
        width: i.width + n,
        height: i.height + n,
        maxX: f,
        maxY: l
      };
    }, e.prototype.isFill = function() {
      return !!this.attrs.fill || this.isClipShape();
    }, e.prototype.isStroke = function() {
      return !!this.attrs.stroke;
    }, e.prototype._applyClip = function(t, n) {
      n && (t.save(), nu(t, n), n.createPath(t), t.restore(), t.clip(), n._afterDraw());
    }, e.prototype.draw = function(t, n) {
      var a = this.cfg.clipShape;
      if (n) {
        if (this.cfg.refresh === !1) {
          this.set("hasChanged", !1);
          return;
        }
        var i = this.getCanvasBBox();
        if (!kf(n, i)) {
          this.set("hasChanged", !1), this.cfg.isInView && this._afterDraw();
          return;
        }
      }
      t.save(), nu(t, this), this._applyClip(t, a), this.drawPath(t), t.restore(), this._afterDraw();
    }, e.prototype.getCanvasViewBox = function() {
      var t = this.cfg.canvas;
      return t ? t.getViewRange() : null;
    }, e.prototype.cacheCanvasBBox = function() {
      var t = this.getCanvasViewBox();
      if (t) {
        var n = this.getCanvasBBox(), a = kf(n, t);
        this.set("isInView", a), a ? this.set("cacheCanvasBBox", n) : this.set("cacheCanvasBBox", null);
      }
    }, e.prototype._afterDraw = function() {
      this.cacheCanvasBBox(), this.set("hasChanged", !1), this.set("refresh", null);
    }, e.prototype.skipDraw = function() {
      this.set("cacheCanvasBBox", null), this.set("isInView", null), this.set("hasChanged", !1);
    }, e.prototype.drawPath = function(t) {
      this.createPath(t), this.strokeAndFill(t), this.afterDrawPath(t);
    }, e.prototype.fill = function(t) {
      t.fill();
    }, e.prototype.stroke = function(t) {
      t.stroke();
    }, e.prototype.strokeAndFill = function(t) {
      var n = this.attrs, a = n.lineWidth, i = n.opacity, o = n.strokeOpacity, s = n.fillOpacity;
      this.isFill() && (!Zt(s) && s !== 1 ? (t.globalAlpha = s, this.fill(t), t.globalAlpha = i) : this.fill(t)), this.isStroke() && a > 0 && (!Zt(o) && o !== 1 && (t.globalAlpha = o), this.stroke(t)), this.afterDrawPath(t);
    }, e.prototype.createPath = function(t) {
    }, e.prototype.afterDrawPath = function(t) {
    }, e.prototype.isInShape = function(t, n) {
      var a = this.isStroke(), i = this.isFill(), o = this.getHitLineWidth();
      return this.isInStrokeOrPath(t, n, a, i, o);
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      return !1;
    }, e.prototype.getHitLineWidth = function() {
      if (!this.isStroke())
        return 0;
      var t = this.attrs;
      return t.lineWidth + t.lineAppendWidth;
    }, e;
  }(fC)
), f8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, r: 0 });
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      var s = this.attr(), u = s.x, f = s.y, l = s.r, c = o / 2, h = vT(u, f, t, n);
      return i && a ? h <= l + c : i ? h <= l : a ? h >= l - c && h <= l + c : !1;
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = n.x, i = n.y, o = n.r;
      t.beginPath(), t.arc(a, i, o, 0, Math.PI * 2, !1), t.closePath();
    }, e;
  }(Ma)
);
function yc(r, e, t, n) {
  return r / (t * t) + e / (n * n);
}
var l8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, rx: 0, ry: 0 });
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      var s = this.attr(), u = o / 2, f = s.x, l = s.y, c = s.rx, h = s.ry, d = (t - f) * (t - f), v = (n - l) * (n - l);
      return i && a ? yc(d, v, c + u, h + u) <= 1 : i ? yc(d, v, c, h) <= 1 : a ? yc(d, v, c - u, h - u) >= 1 && yc(d, v, c + u, h + u) <= 1 : !1;
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = n.x, i = n.y, o = n.rx, s = n.ry;
      if (t.beginPath(), t.ellipse)
        t.ellipse(a, i, o, s, 0, 0, Math.PI * 2, !1);
      else {
        var u = o > s ? o : s, f = o > s ? 1 : o / s, l = o > s ? s / o : 1;
        t.save(), t.translate(a, i), t.scale(f, l), t.arc(0, 0, u, 0, Math.PI * 2), t.restore(), t.closePath();
      }
    }, e;
  }(Ma)
);
function qx(r) {
  return r instanceof HTMLElement && He(r.nodeName) && r.nodeName.toUpperCase() === "CANVAS";
}
var c8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, width: 0, height: 0 });
    }, e.prototype.initAttrs = function(t) {
      this._setImage(t.img);
    }, e.prototype.isStroke = function() {
      return !1;
    }, e.prototype.isOnlyHitBox = function() {
      return !0;
    }, e.prototype._afterLoading = function() {
      if (this.get("toDraw") === !0) {
        var t = this.get("canvas");
        t ? t.draw() : this.createPath(this.get("context"));
      }
    }, e.prototype._setImage = function(t) {
      var n = this, a = this.attrs;
      if (He(t)) {
        var i = new Image();
        i.onload = function() {
          if (n.destroyed)
            return !1;
          n.attr("img", i), n.set("loading", !1), n._afterLoading();
          var o = n.get("callback");
          o && o.call(n);
        }, i.crossOrigin = "Anonymous", i.src = t, this.set("loading", !0);
      } else
        t instanceof Image ? (a.width || (a.width = t.width), a.height || (a.height = t.height)) : qx(t) && (a.width || (a.width = Number(t.getAttribute("width"))), a.height || (a.height, Number(t.getAttribute("height"))));
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), t === "img" && this._setImage(n);
    }, e.prototype.createPath = function(t) {
      if (this.get("loading")) {
        this.set("toDraw", !0), this.set("context", t);
        return;
      }
      var n = this.attr(), a = n.x, i = n.y, o = n.width, s = n.height, u = n.sx, f = n.sy, l = n.swidth, c = n.sheight, h = n.img;
      (h instanceof Image || qx(h)) && (!Zt(u) && !Zt(f) && !Zt(l) && !Zt(c) ? t.drawImage(h, u, f, l, c, a, i, o, s) : t.drawImage(h, a, i, o, s));
    }, e;
  }(Ma)
);
function Vi(r, e, t, n, a, i, o) {
  var s = Math.min(r, t), u = Math.max(r, t), f = Math.min(e, n), l = Math.max(e, n), c = a / 2;
  return i >= s - c && i <= u + c && o >= f - c && o <= l + c ? dn.pointToLine(r, e, t, n, i, o) <= a / 2 : !1;
}
var h8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: !1, endArrow: !1 });
    }, e.prototype.initAttrs = function(t) {
      this.setArrow();
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), this.setArrow();
    }, e.prototype.setArrow = function() {
      var t = this.attr(), n = t.x1, a = t.y1, i = t.x2, o = t.y2, s = t.startArrow, u = t.endArrow;
      s && jy(this, t, i, o, n, a), u && $y(this, t, n, a, i, o);
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      if (!a || !o)
        return !1;
      var s = this.attr(), u = s.x1, f = s.y1, l = s.x2, c = s.y2;
      return Vi(u, f, l, c, o, t, n);
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = n.x1, i = n.y1, o = n.x2, s = n.y2, u = n.startArrow, f = n.endArrow, l = {
        dx: 0,
        dy: 0
      }, c = {
        dx: 0,
        dy: 0
      };
      u && u.d && (l = zo(a, i, o, s, n.startArrow.d)), f && f.d && (c = zo(a, i, o, s, n.endArrow.d)), t.beginPath(), t.moveTo(a + l.dx, i + l.dy), t.lineTo(o - c.dx, s - c.dy);
    }, e.prototype.afterDrawPath = function(t) {
      var n = this.get("startArrowShape"), a = this.get("endArrowShape");
      n && n.draw(t), a && a.draw(t);
    }, e.prototype.getTotalLength = function() {
      var t = this.attr(), n = t.x1, a = t.y1, i = t.x2, o = t.y2;
      return dn.length(n, a, i, o);
    }, e.prototype.getPoint = function(t) {
      var n = this.attr(), a = n.x1, i = n.y1, o = n.x2, s = n.y2;
      return dn.pointAt(a, i, o, s, t);
    }, e;
  }(Ma)
), d8 = {
  // 圆
  circle: function(r, e, t) {
    return [
      ["M", r - t, e],
      ["A", t, t, 0, 1, 0, r + t, e],
      ["A", t, t, 0, 1, 0, r - t, e]
    ];
  },
  // 正方形
  square: function(r, e, t) {
    return [["M", r - t, e - t], ["L", r + t, e - t], ["L", r + t, e + t], ["L", r - t, e + t], ["Z"]];
  },
  // 菱形
  diamond: function(r, e, t) {
    return [["M", r - t, e], ["L", r, e - t], ["L", r + t, e], ["L", r, e + t], ["Z"]];
  },
  // 三角形
  triangle: function(r, e, t) {
    var n = t * Math.sin(0.3333333333333333 * Math.PI);
    return [["M", r - t, e + n], ["L", r, e - n], ["L", r + t, e + n], ["Z"]];
  },
  // 倒三角形
  "triangle-down": function(r, e, t) {
    var n = t * Math.sin(0.3333333333333333 * Math.PI);
    return [["M", r - t, e - n], ["L", r + t, e - n], ["L", r, e + n], ["Z"]];
  }
}, v8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.initAttrs = function(t) {
      this._resetParamsCache();
    }, e.prototype._resetParamsCache = function() {
      this.set("paramsCache", {});
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), ["symbol", "x", "y", "r", "radius"].indexOf(t) !== -1 && this._resetParamsCache();
    }, e.prototype.isOnlyHitBox = function() {
      return !0;
    }, e.prototype._getR = function(t) {
      return Zt(t.r) ? t.radius : t.r;
    }, e.prototype._getPath = function() {
      var t = this.attr(), n = t.x, a = t.y, i = t.symbol || "circle", o = this._getR(t), s, u;
      if (Or(i))
        s = i, u = s(n, a, o), u = _C(u);
      else {
        if (s = e.Symbols[i], !s)
          return console.warn(i + " marker is not supported."), null;
        u = s(n, a, o);
      }
      return u;
    }, e.prototype.createPath = function(t) {
      var n = this._getPath(), a = this.get("paramsCache");
      ET(this, t, { path: n }, a);
    }, e.Symbols = d8, e;
  }(Ma)
);
function _T(r, e, t) {
  var n = EC();
  return r.createPath(n), n.isPointInPath(e, t);
}
var p8 = 1e-6;
function Sp(r) {
  return Math.abs(r) < p8 ? 0 : r < 0 ? -1 : 1;
}
function g8(r, e, t) {
  return (t[0] - r[0]) * (e[1] - r[1]) === (e[0] - r[0]) * (t[1] - r[1]) && Math.min(r[0], e[0]) <= t[0] && t[0] <= Math.max(r[0], e[0]) && Math.min(r[1], e[1]) <= t[1] && t[1] <= Math.max(r[1], e[1]);
}
function MT(r, e, t) {
  var n = !1, a = r.length;
  if (a <= 2)
    return !1;
  for (var i = 0; i < a; i++) {
    var o = r[i], s = r[(i + 1) % a];
    if (g8(o, s, [e, t]))
      return !0;
    Sp(o[1] - t) > 0 != Sp(s[1] - t) > 0 && Sp(e - (t - o[1]) * (o[0] - s[0]) / (o[1] - s[1]) - o[0]) < 0 && (n = !n);
  }
  return n;
}
function of(r, e, t, n, a, i, o, s) {
  var u = (Math.atan2(s - e, o - r) + Math.PI * 2) % (Math.PI * 2);
  if (u < n || u > a)
    return !1;
  var f = {
    x: r + t * Math.cos(u),
    y: e + t * Math.sin(u)
  };
  return vT(f.x, f.y, o, s) <= i / 2;
}
var y8 = io;
function m8(r) {
  for (var e = !1, t = r.length, n = 0; n < t; n++) {
    var a = r[n], i = a[0];
    if (i === "C" || i === "A" || i === "Q") {
      e = !0;
      break;
    }
  }
  return e;
}
function b8(r, e, t, n, a) {
  for (var i = !1, o = e / 2, s = 0; s < r.length; s++) {
    var u = r[s], f = u.currentPoint, l = u.params, c = u.prePoint, h = u.box;
    if (!(h && !Fo(h.x - o, h.y - o, h.width + e, h.height + e, t, n))) {
      switch (u.command) {
        case "L":
        case "Z":
          i = Vi(c[0], c[1], f[0], f[1], e, t, n);
          break;
        case "Q":
          var d = gC.pointDistance(c[0], c[1], l[1], l[2], l[3], l[4], t, n);
          i = d <= e / 2;
          break;
        case "C":
          var v = vf.pointDistance(
            c[0],
            // 上一段结束位置, 即 C 的起始点
            c[1],
            l[1],
            // 'C' 的参数，1、2 为第一个控制点，3、4 为第二个控制点，5、6 为结束点
            l[2],
            l[3],
            l[4],
            l[5],
            l[6],
            t,
            n,
            a
          );
          i = v <= e / 2;
          break;
        case "A":
          var p = u.arcParams, g = p.cx, y = p.cy, m = p.rx, b = p.ry, E = p.startAngle, x = p.endAngle, w = p.xRotation, _ = [t, n, 1], M = m > b ? m : b, A = m > b ? 1 : m / b, S = m > b ? b / m : 1, T = y8(null, [
            ["t", -g, -y],
            ["r", -w],
            ["s", 1 / A, 1 / S]
          ]);
          id(_, _, T), i = of(0, 0, M, E, x, e, _[0], _[1]);
          break;
      }
      if (i)
        break;
    }
  }
  return i;
}
function E8(r) {
  for (var e = r.length, t = [], n = [], a = [], i = 0; i < e; i++) {
    var o = r[i], s = o[0];
    s === "M" ? (a.length && (n.push(a), a = []), a.push([o[1], o[2]])) : s === "Z" ? a.length && (t.push(a), a = []) : a.push([o[1], o[2]]);
  }
  return a.length > 0 && n.push(a), {
    polygons: t,
    polylines: n
  };
}
const mc = B({
  hasArc: m8,
  extractPolygons: E8,
  isPointInStroke: b8
}, SG);
function Zx(r, e, t) {
  for (var n = !1, a = 0; a < r.length; a++) {
    var i = r[a];
    if (n = MT(i, e, t), n)
      break;
  }
  return n;
}
var Xy = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { startArrow: !1, endArrow: !1 });
    }, e.prototype.initAttrs = function(t) {
      this._setPathArr(t.path), this.setArrow();
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), t === "path" && this._setPathArr(n), this.setArrow();
    }, e.prototype._setPathArr = function(t) {
      this.attrs.path = _C(t);
      var n = mc.hasArc(t);
      this.set("hasArc", n), this.set("paramsCache", {}), this.set("segments", null), this.set("curve", null), this.set("tCache", null), this.set("totalLength", null);
    }, e.prototype.getSegments = function() {
      var t = this.get("segements");
      return t || (t = MC(this.attr("path")), this.set("segments", t)), t;
    }, e.prototype.setArrow = function() {
      var t = this.attr(), n = t.startArrow, a = t.endArrow;
      if (n) {
        var i = this.getStartTangent();
        jy(this, t, i[0][0], i[0][1], i[1][0], i[1][1]);
      }
      if (a) {
        var i = this.getEndTangent();
        $y(this, t, i[0][0], i[0][1], i[1][0], i[1][1]);
      }
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      var s = this.getSegments(), u = this.get("hasArc"), f = !1;
      if (a) {
        var l = this.getTotalLength();
        f = mc.isPointInStroke(s, o, t, n, l);
      }
      if (!f && i)
        if (u)
          f = _T(this, t, n);
        else {
          var c = this.attr("path"), h = mc.extractPolygons(c);
          f = Zx(h.polygons, t, n) || Zx(h.polylines, t, n);
        }
      return f;
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = this.get("paramsCache");
      ET(this, t, n, a);
    }, e.prototype.afterDrawPath = function(t) {
      var n = this.get("startArrowShape"), a = this.get("endArrowShape");
      n && n.draw(t), a && a.draw(t);
    }, e.prototype.getTotalLength = function() {
      var t = this.get("totalLength");
      return Zt(t) ? (this._calculateCurve(), this._setTcache(), this.get("totalLength")) : t;
    }, e.prototype.getPoint = function(t) {
      var n = this.get("tCache");
      n || (this._calculateCurve(), this._setTcache(), n = this.get("tCache"));
      var a, i, o = this.get("curve");
      if (!n || n.length === 0)
        return o ? {
          x: o[0][1],
          y: o[0][2]
        } : null;
      Se(n, function(l, c) {
        t >= l[0] && t <= l[1] && (a = (t - l[0]) / (l[1] - l[0]), i = c);
      });
      var s = o[i];
      if (Zt(s) || Zt(i))
        return null;
      var u = s.length, f = o[i + 1];
      return vf.pointAt(s[u - 2], s[u - 1], f[1], f[2], f[3], f[4], f[5], f[6], a);
    }, e.prototype._calculateCurve = function() {
      var t = this.attr().path;
      this.set("curve", mc.pathToCurve(t));
    }, e.prototype._setTcache = function() {
      var t = 0, n = 0, a = [], i, o, s, u, f = this.get("curve");
      if (f) {
        if (Se(f, function(l, c) {
          s = f[c + 1], u = l.length, s && (t += vf.length(l[u - 2], l[u - 1], s[1], s[2], s[3], s[4], s[5], s[6]) || 0);
        }), this.set("totalLength", t), t === 0) {
          this.set("tCache", []);
          return;
        }
        Se(f, function(l, c) {
          s = f[c + 1], u = l.length, s && (i = [], i[0] = n / t, o = vf.length(l[u - 2], l[u - 1], s[1], s[2], s[3], s[4], s[5], s[6]), n += o || 0, i[1] = n / t, a.push(i));
        }), this.set("tCache", a);
      }
    }, e.prototype.getStartTangent = function() {
      var t = this.getSegments(), n;
      if (t.length > 1) {
        var a = t[0].currentPoint, i = t[1].currentPoint, o = t[1].startTangent;
        n = [], o ? (n.push([a[0] - o[0], a[1] - o[1]]), n.push([a[0], a[1]])) : (n.push([i[0], i[1]]), n.push([a[0], a[1]]));
      }
      return n;
    }, e.prototype.getEndTangent = function() {
      var t = this.getSegments(), n = t.length, a;
      if (n > 1) {
        var i = t[n - 2].currentPoint, o = t[n - 1].currentPoint, s = t[n - 1].endTangent;
        a = [], s ? (a.push([o[0] - s[0], o[1] - s[1]]), a.push([o[0], o[1]])) : (a.push([i[0], i[1]]), a.push([o[0], o[1]]));
      }
      return a;
    }, e;
  }(Ma)
);
function ST(r, e, t, n, a) {
  var i = r.length;
  if (i < 2)
    return !1;
  for (var o = 0; o < i - 1; o++) {
    var s = r[o][0], u = r[o][1], f = r[o + 1][0], l = r[o + 1][1];
    if (Vi(s, u, f, l, e, t, n))
      return !0;
  }
  if (a) {
    var c = r[0], h = r[i - 1];
    if (Vi(c[0], c[1], h[0], h[1], e, t, n))
      return !0;
  }
  return !1;
}
var x8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      var s = this.attr().points, u = !1;
      return a && (u = ST(s, o, t, n, !0)), !u && i && (u = MT(s, t, n)), u;
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = n.points;
      if (!(a.length < 2)) {
        t.beginPath();
        for (var i = 0; i < a.length; i++) {
          var o = a[i];
          i === 0 ? t.moveTo(o[0], o[1]) : t.lineTo(o[0], o[1]);
        }
        t.closePath();
      }
    }, e;
  }(Ma)
), w8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { startArrow: !1, endArrow: !1 });
    }, e.prototype.initAttrs = function(t) {
      this.setArrow();
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), this.setArrow(), ["points"].indexOf(t) !== -1 && this._resetCache();
    }, e.prototype._resetCache = function() {
      this.set("totalLength", null), this.set("tCache", null);
    }, e.prototype.setArrow = function() {
      var t = this.attr(), n = this.attrs, a = n.points, i = n.startArrow, o = n.endArrow, s = a.length, u = a[0][0], f = a[0][1], l = a[s - 1][0], c = a[s - 1][1];
      i && jy(this, t, a[1][0], a[1][1], u, f), o && $y(this, t, a[s - 2][0], a[s - 2][1], l, c);
    }, e.prototype.isFill = function() {
      return !1;
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      if (!a || !o)
        return !1;
      var s = this.attr().points;
      return ST(s, o, t, n, !1);
    }, e.prototype.isStroke = function() {
      return !0;
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = n.points, i = n.startArrow, o = n.endArrow, s = a.length;
      if (!(a.length < 2)) {
        var u = a[0][0], f = a[0][1], l = a[s - 1][0], c = a[s - 1][1];
        if (i && i.d) {
          var h = zo(u, f, a[1][0], a[1][1], i.d);
          u += h.dx, f += h.dy;
        }
        if (o && o.d) {
          var h = zo(a[s - 2][0], a[s - 2][1], l, c, o.d);
          l -= h.dx, c -= h.dy;
        }
        t.beginPath(), t.moveTo(u, f);
        for (var d = 0; d < s - 1; d++) {
          var v = a[d];
          t.lineTo(v[0], v[1]);
        }
        t.lineTo(l, c);
      }
    }, e.prototype.afterDrawPath = function(t) {
      var n = this.get("startArrowShape"), a = this.get("endArrowShape");
      n && n.draw(t), a && a.draw(t);
    }, e.prototype.getTotalLength = function() {
      var t = this.attr().points, n = this.get("totalLength");
      return Zt(n) ? (this.set("totalLength", bC.length(t)), this.get("totalLength")) : n;
    }, e.prototype.getPoint = function(t) {
      var n = this.attr().points, a = this.get("tCache");
      a || (this._setTcache(), a = this.get("tCache"));
      var i, o;
      return Se(a, function(s, u) {
        t >= s[0] && t <= s[1] && (i = (t - s[0]) / (s[1] - s[0]), o = u);
      }), dn.pointAt(n[o][0], n[o][1], n[o + 1][0], n[o + 1][1], i);
    }, e.prototype._setTcache = function() {
      var t = this.attr().points;
      if (!(!t || t.length === 0)) {
        var n = this.getTotalLength();
        if (!(n <= 0)) {
          var a = 0, i = [], o, s;
          Se(t, function(u, f) {
            t[f + 1] && (o = [], o[0] = a / n, s = dn.length(u[0], u[1], t[f + 1][0], t[f + 1][1]), a += s, o[1] = a / n, i.push(o));
          }), this.set("tCache", i);
        }
      }
    }, e.prototype.getStartTangent = function() {
      var t = this.attr().points, n = [];
      return n.push([t[1][0], t[1][1]]), n.push([t[0][0], t[0][1]]), n;
    }, e.prototype.getEndTangent = function() {
      var t = this.attr().points, n = t.length - 1, a = [];
      return a.push([t[n - 1][0], t[n - 1][1]]), a.push([t[n][0], t[n][1]]), a;
    }, e;
  }(Ma)
);
function _8(r, e, t, n, a, i, o) {
  var s = a / 2;
  return Fo(r - s, e - s, t, a, i, o) || // 上边
  Fo(r + t - s, e - s, a, n, i, o) || // 右边
  Fo(r + s, e + n - s, t, a, i, o) || // 下边
  Fo(r - s, e + s, a, n, i, o);
}
function M8(r, e, t, n, a, i, o, s) {
  return Vi(r + a, e, r + t - a, e, i, o, s) || Vi(r + t, e + a, r + t, e + n - a, i, o, s) || Vi(r + t - a, e + n, r + a, e + n, i, o, s) || Vi(r, e + n - a, r, e + a, i, o, s) || of(r + t - a, e + a, a, 1.5 * Math.PI, 2 * Math.PI, i, o, s) || of(r + t - a, e + n - a, a, 0, 0.5 * Math.PI, i, o, s) || of(r + a, e + n - a, a, 0.5 * Math.PI, Math.PI, i, o, s) || of(r + a, e + a, a, Math.PI, 1.5 * Math.PI, i, o, s);
}
var S8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, width: 0, height: 0, radius: 0 });
    }, e.prototype.isInStrokeOrPath = function(t, n, a, i, o) {
      var s = this.attr(), u = s.x, f = s.y, l = s.width, c = s.height, h = s.radius;
      if (h) {
        var v = !1;
        return a && (v = M8(u, f, l, c, h, o, t, n)), !v && i && (v = _T(this, t, n)), v;
      } else {
        var d = o / 2;
        if (i && a)
          return Fo(u - d, f - d, l + d, c + d, t, n);
        if (i)
          return Fo(u, f, l, c, t, n);
        if (a)
          return _8(u, f, l, c, o, t, n);
      }
    }, e.prototype.createPath = function(t) {
      var n = this.attr(), a = n.x, i = n.y, o = n.width, s = n.height, u = n.radius;
      if (t.beginPath(), u === 0)
        t.rect(a, i, o, s);
      else {
        var f = n8(u), l = f[0], c = f[1], h = f[2], d = f[3];
        t.moveTo(a + l, i), t.lineTo(a + o - c, i), c !== 0 && t.arc(a + o - c, i + c, c, -Math.PI / 2, 0), t.lineTo(a + o, i + s - h), h !== 0 && t.arc(a + o - h, i + s - h, h, 0, Math.PI / 2), t.lineTo(a + d, i + s), d !== 0 && t.arc(a + d, i + s - d, d, Math.PI / 2, Math.PI), t.lineTo(a, i + l), l !== 0 && t.arc(a + l, i + l, l, Math.PI, Math.PI * 1.5), t.closePath();
      }
    }, e;
  }(Ma)
), A8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: "sans-serif", fontStyle: "normal", fontWeight: "normal", fontVariant: "normal", textAlign: "start", textBaseline: "bottom" });
    }, e.prototype.isOnlyHitBox = function() {
      return !0;
    }, e.prototype.initAttrs = function(t) {
      this._assembleFont(), t.text && this._setText(t.text);
    }, e.prototype._assembleFont = function() {
      var t = this.attrs;
      t.font = wC(t);
    }, e.prototype._setText = function(t) {
      var n = null;
      He(t) && t.indexOf(`
`) !== -1 && (n = t.split(`
`)), this.set("textArr", n);
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), t.startsWith("font") && this._assembleFont(), t === "text" && this._setText(n);
    }, e.prototype._getSpaceingY = function() {
      var t = this.attrs, n = t.lineHeight, a = t.fontSize * 1;
      return n ? n - a : a * 0.14;
    }, e.prototype._drawTextArr = function(t, n, a) {
      var i = this.attrs, o = i.textBaseline, s = i.x, u = i.y, f = i.fontSize * 1, l = this._getSpaceingY(), c = xC(i.text, i.fontSize, i.lineHeight), h;
      Se(n, function(d, v) {
        h = u + v * (l + f) - c + f, o === "middle" && (h += c - f - (c - f) / 2), o === "top" && (h += c - f), Zt(d) || (a ? t.fillText(d, s, h) : t.strokeText(d, s, h));
      });
    }, e.prototype._drawText = function(t, n) {
      var a = this.attr(), i = a.x, o = a.y, s = this.get("textArr");
      if (s)
        this._drawTextArr(t, s, n);
      else {
        var u = a.text;
        Zt(u) || (n ? t.fillText(u, i, o) : t.strokeText(u, i, o));
      }
    }, e.prototype.strokeAndFill = function(t) {
      var n = this.attrs, a = n.lineWidth, i = n.opacity, o = n.strokeOpacity, s = n.fillOpacity;
      this.isStroke() && a > 0 && (!Zt(o) && o !== 1 && (t.globalAlpha = i), this.stroke(t)), this.isFill() && (!Zt(s) && s !== 1 ? (t.globalAlpha = s, this.fill(t), t.globalAlpha = i) : this.fill(t)), this.afterDrawPath(t);
    }, e.prototype.fill = function(t) {
      this._drawText(t, !0);
    }, e.prototype.stroke = function(t) {
      this._drawText(t, !1);
    }, e;
  }(Ma)
);
function C8(r, e) {
  if (e) {
    var t = WA(e);
    return Bo(t, r);
  }
  return r;
}
function AT(r, e, t) {
  var n = r.getTotalMatrix();
  if (n) {
    var a = C8([e, t, 1], n), i = a[0], o = a[1];
    return [i, o];
  }
  return [e, t];
}
function Qx(r, e, t) {
  if (r.isCanvas && r.isCanvas())
    return !0;
  if (!D0(r) || r.cfg.isInView === !1)
    return !1;
  if (r.cfg.clipShape) {
    var n = AT(r, e, t), a = n[0], i = n[1];
    if (r.isClipped(a, i))
      return !1;
  }
  var o = r.cfg.cacheCanvasBBox || r.getCanvasBBox();
  return e >= o.minX && e <= o.maxX && t >= o.minY && t <= o.maxY;
}
function CT(r, e, t) {
  if (!Qx(r, e, t))
    return null;
  for (var n = null, a = r.getChildren(), i = a.length, o = i - 1; o >= 0; o--) {
    var s = a[o];
    if (s.isGroup())
      n = CT(s, e, t);
    else if (Qx(s, e, t)) {
      var u = s, f = AT(s, e, t), l = f[0], c = f[1];
      u.isInShape(l, c) && (n = s);
    }
    if (n)
      break;
  }
  return n;
}
var $u = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.getDefaultCfg = function() {
      var t = r.prototype.getDefaultCfg.call(this);
      return t.renderer = "canvas", t.autoDraw = !0, t.localRefresh = !0, t.refreshElements = [], t.clipView = !0, t.quickHit = !1, t;
    }, e.prototype.onCanvasChange = function(t) {
      (t === "attr" || t === "sort" || t === "changeSize") && (this.set("refreshElements", [this]), this.draw());
    }, e.prototype.getShapeBase = function() {
      return Hg;
    }, e.prototype.getGroupBase = function() {
      return wT;
    }, e.prototype.getPixelRatio = function() {
      var t = this.get("pixelRatio") || H$();
      return t >= 1 ? Math.ceil(t) : 1;
    }, e.prototype.getViewRange = function() {
      return {
        minX: 0,
        minY: 0,
        maxX: this.cfg.width,
        maxY: this.cfg.height
      };
    }, e.prototype.createDom = function() {
      var t = document.createElement("canvas"), n = t.getContext("2d");
      return this.set("context", n), t;
    }, e.prototype.setDOMSize = function(t, n) {
      r.prototype.setDOMSize.call(this, t, n);
      var a = this.get("context"), i = this.get("el"), o = this.getPixelRatio();
      i.width = o * t, i.height = o * n, o > 1 && a.scale(o, o);
    }, e.prototype.clear = function() {
      r.prototype.clear.call(this), this._clearFrame();
      var t = this.get("context"), n = this.get("el");
      t.clearRect(0, 0, n.width, n.height);
    }, e.prototype.getShape = function(t, n) {
      var a;
      return this.get("quickHit") ? a = CT(this, t, n) : a = r.prototype.getShape.call(this, t, n, null), a;
    }, e.prototype._getRefreshRegion = function() {
      var t = this.get("refreshElements"), n = this.getViewRange(), a;
      if (t.length && t[0] === this)
        a = n;
      else if (a = s8(t), a) {
        a.minX = Math.floor(a.minX), a.minY = Math.floor(a.minY), a.maxX = Math.ceil(a.maxX), a.maxY = Math.ceil(a.maxY), a.maxY += 1;
        var i = this.get("clipView");
        i && (a = u8(a, n));
      }
      return a;
    }, e.prototype.refreshElement = function(t) {
      var n = this.get("refreshElements");
      n.push(t);
    }, e.prototype._clearFrame = function() {
      var t = this.get("drawFrame");
      t && (DM(t), this.set("drawFrame", null), this.set("refreshElements", []));
    }, e.prototype.draw = function() {
      var t = this.get("drawFrame");
      this.get("autoDraw") && t || this._startDraw();
    }, e.prototype._drawAll = function() {
      var t = this.get("context"), n = this.get("el"), a = this.getChildren();
      t.clearRect(0, 0, n.width, n.height), nu(t, this), ng(t, a), this.set("refreshElements", []);
    }, e.prototype._drawRegion = function() {
      var t = this.get("context"), n = this.get("refreshElements"), a = this.getChildren(), i = this._getRefreshRegion();
      i ? (t.clearRect(i.minX, i.minY, i.maxX - i.minX, i.maxY - i.minY), t.save(), t.beginPath(), t.rect(i.minX, i.minY, i.maxX - i.minX, i.maxY - i.minY), t.clip(), nu(t, this), a8(this, a, i), ng(t, a, i), t.restore()) : n.length && bT(n), Se(n, function(o) {
        o.get("hasChanged") && o.set("hasChanged", !1);
      }), this.set("refreshElements", []);
    }, e.prototype._startDraw = function() {
      var t = this, n = this.get("drawFrame"), a = this.get("drawFrameCallback");
      n || (n = OM(function() {
        t.get("localRefresh") ? t._drawRegion() : t._drawAll(), t.set("drawFrame", null), a && a();
      }), this.set("drawFrame", n));
    }, e.prototype.skipDraw = function() {
    }, e.prototype.removeDom = function() {
      var t = this.get("el");
      t.width = 0, t.height = 0, t.parentNode.removeChild(t);
    }, e;
  }(sC)
), ig = {
  rect: "path",
  circle: "circle",
  line: "line",
  path: "path",
  marker: "path",
  text: "text",
  polyline: "polyline",
  polygon: "polygon",
  image: "image",
  ellipse: "ellipse",
  dom: "foreignObject"
}, ir = {
  opacity: "opacity",
  fillStyle: "fill",
  fill: "fill",
  fillOpacity: "fill-opacity",
  strokeStyle: "stroke",
  strokeOpacity: "stroke-opacity",
  stroke: "stroke",
  x: "x",
  y: "y",
  r: "r",
  rx: "rx",
  ry: "ry",
  width: "width",
  height: "height",
  x1: "x1",
  x2: "x2",
  y1: "y1",
  y2: "y2",
  lineCap: "stroke-linecap",
  lineJoin: "stroke-linejoin",
  lineWidth: "stroke-width",
  lineDash: "stroke-dasharray",
  lineDashOffset: "stroke-dashoffset",
  miterLimit: "stroke-miterlimit",
  font: "font",
  fontSize: "font-size",
  fontStyle: "font-style",
  fontVariant: "font-variant",
  fontWeight: "font-weight",
  fontFamily: "font-family",
  startArrow: "marker-start",
  endArrow: "marker-end",
  path: "d",
  class: "class",
  id: "id",
  style: "style",
  preserveAspectRatio: "preserveAspectRatio"
};
function oa(r) {
  return document.createElementNS("http://www.w3.org/2000/svg", r);
}
function TT(r) {
  var e = ig[r.type], t = r.getParent();
  if (!e)
    throw new Error("the type " + r.type + " is not supported by svg");
  var n = oa(e);
  if (r.get("id") && (n.id = r.get("id")), r.set("el", n), r.set("attrs", {}), t) {
    var a = t.get("el");
    a || (a = t.createDom(), t.set("el", a)), a.appendChild(n);
  }
  return n;
}
function IT(r, e) {
  var t = r.get("el"), n = kM(t.children).sort(e), a = document.createDocumentFragment();
  n.forEach(function(i) {
    a.appendChild(i);
  }), t.appendChild(a);
}
function T8(r, e) {
  var t = r.parentNode, n = Array.from(t.childNodes).filter(
    // 要求为元素节点，且不能为 defs 节点
    function(s) {
      return s.nodeType === 1 && s.nodeName.toLowerCase() !== "defs";
    }
  ), a = n[e], i = n.indexOf(r);
  if (a) {
    if (i > e)
      t.insertBefore(r, a);
    else if (i < e) {
      var o = n[e + 1];
      o ? t.insertBefore(r, o) : t.appendChild(r);
    }
  } else
    t.appendChild(r);
}
function I8(r, e) {
  var t = r.cfg.el, n = r.attr(), a = {
    dx: n.shadowOffsetX,
    dy: n.shadowOffsetY,
    blur: n.shadowBlur,
    color: n.shadowColor
  };
  if (!a.dx && !a.dy && !a.blur && !a.color)
    t.removeAttribute("filter");
  else {
    var i = e.find("filter", a);
    i || (i = e.addShadow(a)), t.setAttribute("filter", "url(#" + i + ")");
  }
}
function Zf(r) {
  var e = r.attr().matrix;
  if (e) {
    for (var t = r.cfg.el, n = [], a = 0; a < 9; a += 3)
      n.push(e[a] + "," + e[a + 1]);
    n = n.join(","), n.indexOf("NaN") === -1 ? t.setAttribute("transform", "matrix(" + n + ")") : console.warn("invalid matrix:", e);
  }
}
function Rf(r, e) {
  var t = r.getClip(), n = r.get("el");
  if (!t)
    n.removeAttribute("clip-path");
  else if (t && !n.hasAttribute("clip-path")) {
    TT(t), t.createPath(e);
    var a = e.addClip(t);
    n.setAttribute("clip-path", "url(#" + a + ")");
  }
}
function OT(r, e) {
  e.forEach(function(t) {
    t.draw(r);
  });
}
function DT(r, e) {
  var t = r.get("canvas");
  if (t && t.get("autoDraw")) {
    var n = t.get("context"), a = r.getParent(), i = a ? a.getChildren() : [t], o = r.get("el");
    if (e === "remove") {
      var s = r.get("isClipShape");
      if (s) {
        var u = o && o.parentNode, f = u && u.parentNode;
        u && f && f.removeChild(u);
      } else
        o && o.parentNode && o.parentNode.removeChild(o);
    } else if (e === "show")
      o.setAttribute("visibility", "visible");
    else if (e === "hide")
      o.setAttribute("visibility", "hidden");
    else if (e === "zIndex")
      T8(o, i.indexOf(r));
    else if (e === "sort") {
      var l = r.get("children");
      l && l.length && IT(r, function(c, h) {
        return l.indexOf(c) - l.indexOf(h) ? 1 : 0;
      });
    } else
      e === "clear" ? o && (o.innerHTML = "") : e === "matrix" ? Zf(r) : e === "clip" ? Rf(r, n) : e === "attr" || e === "add" && r.draw(n);
  }
}
var LT = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e.prototype.isEntityGroup = function() {
      return !0;
    }, e.prototype.createDom = function() {
      var t = oa("g");
      this.set("el", t);
      var n = this.getParent();
      if (n) {
        var a = n.get("el");
        a || (a = n.createDom(), n.set("el", a)), a.appendChild(t);
      }
      return t;
    }, e.prototype.afterAttrsChange = function(t) {
      r.prototype.afterAttrsChange.call(this, t);
      var n = this.get("canvas");
      if (n && n.get("autoDraw")) {
        var a = n.get("context");
        this.createPath(a, t);
      }
    }, e.prototype.onCanvasChange = function(t) {
      DT(this, t);
    }, e.prototype.getShapeBase = function() {
      return Kg;
    }, e.prototype.getGroupBase = function() {
      return e;
    }, e.prototype.draw = function(t) {
      var n = this.getChildren(), a = this.get("el");
      this.get("destroyed") ? a && a.parentNode.removeChild(a) : (a || this.createDom(), Rf(this, t), this.createPath(t), n.length && OT(t, n));
    }, e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      Se(n || a, function(o, s) {
        ir[s] && i.setAttribute(ir[s], o);
      }), Zf(this);
    }, e;
  }(uC)
), ua = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "svg", t.canFill = !1, t.canStroke = !1, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });
    }, e.prototype.afterAttrsChange = function(t) {
      r.prototype.afterAttrsChange.call(this, t);
      var n = this.get("canvas");
      if (n && n.get("autoDraw")) {
        var a = n.get("context");
        this.draw(a, t);
      }
    }, e.prototype.getShapeBase = function() {
      return Kg;
    }, e.prototype.getGroupBase = function() {
      return LT;
    }, e.prototype.onCanvasChange = function(t) {
      DT(this, t);
    }, e.prototype.calculateBBox = function() {
      var t = this.get("el"), n = null;
      if (t)
        n = t.getBBox();
      else {
        var a = cC(this.get("type"));
        a && (n = a(this));
      }
      if (n) {
        var i = n.x, o = n.y, s = n.width, u = n.height, f = this.getHitLineWidth(), l = f / 2, c = i - l, h = o - l, d = i + s + l, v = o + u + l;
        return {
          x: c,
          y: h,
          minX: c,
          minY: h,
          maxX: d,
          maxY: v,
          width: s + f,
          height: u + f
        };
      }
      return {
        x: 0,
        y: 0,
        minX: 0,
        minY: 0,
        maxX: 0,
        maxY: 0,
        width: 0,
        height: 0
      };
    }, e.prototype.isFill = function() {
      var t = this.attr(), n = t.fill, a = t.fillStyle;
      return (n || a || this.isClipShape()) && this.canFill;
    }, e.prototype.isStroke = function() {
      var t = this.attr(), n = t.stroke, a = t.strokeStyle;
      return (n || a) && this.canStroke;
    }, e.prototype.draw = function(t, n) {
      var a = this.get("el");
      this.get("destroyed") ? a && a.parentNode.removeChild(a) : (a || TT(this), Rf(this, t), this.createPath(t, n), this.shadow(t, n), this.strokeAndFill(t, n), this.transform(n));
    }, e.prototype.createPath = function(t, n) {
    }, e.prototype.strokeAndFill = function(t, n) {
      var a = n || this.attr(), i = a.fill, o = a.fillStyle, s = a.stroke, u = a.strokeStyle, f = a.fillOpacity, l = a.strokeOpacity, c = a.lineWidth, h = this.get("el");
      this.canFill && (n ? "fill" in a ? this._setColor(t, "fill", i) : "fillStyle" in a && this._setColor(t, "fill", o) : this._setColor(t, "fill", i || o), f && h.setAttribute(ir.fillOpacity, f)), this.canStroke && c > 0 && (n ? "stroke" in a ? this._setColor(t, "stroke", s) : "strokeStyle" in a && this._setColor(t, "stroke", u) : this._setColor(t, "stroke", s || u), l && h.setAttribute(ir.strokeOpacity, l), c && h.setAttribute(ir.lineWidth, c));
    }, e.prototype._setColor = function(t, n, a) {
      var i = this.get("el");
      if (!a) {
        i.setAttribute(ir[n], "none");
        return;
      }
      if (a = a.trim(), /^[r,R,L,l]{1}[\s]*\(/.test(a)) {
        var o = t.find("gradient", a);
        o || (o = t.addGradient(a)), i.setAttribute(ir[n], "url(#" + o + ")");
      } else if (/^[p,P]{1}[\s]*\(/.test(a)) {
        var o = t.find("pattern", a);
        o || (o = t.addPattern(a)), i.setAttribute(ir[n], "url(#" + o + ")");
      } else
        i.setAttribute(ir[n], a);
    }, e.prototype.shadow = function(t, n) {
      var a = this.attr(), i = n || a, o = i.shadowOffsetX, s = i.shadowOffsetY, u = i.shadowBlur, f = i.shadowColor;
      (o || s || u || f) && I8(this, t);
    }, e.prototype.transform = function(t) {
      var n = this.attr(), a = (t || n).matrix;
      a && Zf(this);
    }, e.prototype.isInShape = function(t, n) {
      return this.isPointInPath(t, n);
    }, e.prototype.isPointInPath = function(t, n) {
      var a = this.get("el"), i = this.get("canvas"), o = i.get("el").getBoundingClientRect(), s = t + o.left, u = n + o.top, f = document.elementFromPoint(s, u);
      return !!(f && f.isEqualNode(a));
    }, e.prototype.getHitLineWidth = function() {
      var t = this.attrs, n = t.lineWidth, a = t.lineAppendWidth;
      return this.isStroke() ? n + a : 0;
    }, e;
  }(fC)
), O8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "circle", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, r: 0 });
    }, e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      Se(n || a, function(o, s) {
        s === "x" || s === "y" ? i.setAttribute("c" + s, o) : ir[s] && i.setAttribute(ir[s], o);
      });
    }, e;
  }(ua)
), D8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "dom", t.canFill = !1, t.canStroke = !1, t;
    }
    return e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      if (Se(n || a, function(f, l) {
        ir[l] && i.setAttribute(ir[l], f);
      }), typeof a.html == "function") {
        var o = a.html.call(this, a);
        if (o instanceof Element || o instanceof HTMLDocument) {
          for (var s = i.childNodes, u = s.length - 1; u >= 0; u--)
            i.removeChild(s[u]);
          i.appendChild(o);
        } else
          i.innerHTML = o;
      } else
        i.innerHTML = a.html;
    }, e;
  }(ua)
), L8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "ellipse", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, rx: 0, ry: 0 });
    }, e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      Se(n || a, function(o, s) {
        s === "x" || s === "y" ? i.setAttribute("c" + s, o) : ir[s] && i.setAttribute(ir[s], o);
      });
    }, e;
  }(ua)
), N8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "image", t.canFill = !1, t.canStroke = !1, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, width: 0, height: 0 });
    }, e.prototype.createPath = function(t, n) {
      var a = this, i = this.attr(), o = this.get("el");
      Se(n || i, function(s, u) {
        u === "img" ? a._setImage(i.img) : ir[u] && o.setAttribute(ir[u], s);
      });
    }, e.prototype.setAttr = function(t, n) {
      this.attrs[t] = n, t === "img" && this._setImage(n);
    }, e.prototype._setImage = function(t) {
      var n = this.attr(), a = this.get("el");
      if (He(t))
        a.setAttribute("href", t);
      else if (t instanceof window.Image)
        n.width || (a.setAttribute("width", t.width), this.attr("width", t.width)), n.height || (a.setAttribute("height", t.height), this.attr("height", t.height)), a.setAttribute("href", t.src);
      else if (t instanceof HTMLElement && He(t.nodeName) && t.nodeName.toUpperCase() === "CANVAS")
        a.setAttribute("href", t.toDataURL());
      else if (t instanceof ImageData) {
        var i = document.createElement("canvas");
        i.setAttribute("width", "" + t.width), i.setAttribute("height", "" + t.height), i.getContext("2d").putImageData(t, 0, 0), n.width || (a.setAttribute("width", "" + t.width), this.attr("width", t.width)), n.height || (a.setAttribute("height", "" + t.height), this.attr("height", t.height)), a.setAttribute("href", i.toDataURL());
      }
    }, e;
  }(ua)
), P8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "line", t.canFill = !1, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: !1, endArrow: !1 });
    }, e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      Se(n || a, function(o, s) {
        if (s === "startArrow" || s === "endArrow")
          if (o) {
            var u = yn(o) ? t.addArrow(a, ir[s]) : t.getDefaultArrow(a, ir[s]);
            i.setAttribute(ir[s], "url(#" + u + ")");
          } else
            i.removeAttribute(ir[s]);
        else
          ir[s] && i.setAttribute(ir[s], o);
      });
    }, e.prototype.getTotalLength = function() {
      var t = this.attr(), n = t.x1, a = t.y1, i = t.x2, o = t.y2;
      return dn.length(n, a, i, o);
    }, e.prototype.getPoint = function(t) {
      var n = this.attr(), a = n.x1, i = n.y1, o = n.x2, s = n.y2;
      return dn.pointAt(a, i, o, s, t);
    }, e;
  }(ua)
), bc = {
  // 圆
  circle: function(r, e, t) {
    return [
      ["M", r, e],
      ["m", -t, 0],
      ["a", t, t, 0, 1, 0, t * 2, 0],
      ["a", t, t, 0, 1, 0, -t * 2, 0]
    ];
  },
  // 正方形
  square: function(r, e, t) {
    return [["M", r - t, e - t], ["L", r + t, e - t], ["L", r + t, e + t], ["L", r - t, e + t], ["Z"]];
  },
  // 菱形
  diamond: function(r, e, t) {
    return [["M", r - t, e], ["L", r, e - t], ["L", r + t, e], ["L", r, e + t], ["Z"]];
  },
  // 三角形
  triangle: function(r, e, t) {
    var n = t * Math.sin(0.3333333333333333 * Math.PI);
    return [["M", r - t, e + n], ["L", r, e - n], ["L", r + t, e + n], ["z"]];
  },
  // 倒三角形
  triangleDown: function(r, e, t) {
    var n = t * Math.sin(0.3333333333333333 * Math.PI);
    return [["M", r - t, e - n], ["L", r + t, e - n], ["L", r, e + n], ["Z"]];
  }
};
const Jx = {
  get: function(r) {
    return bc[r];
  },
  register: function(r, e) {
    bc[r] = e;
  },
  remove: function(r) {
    delete bc[r];
  },
  getAll: function() {
    return bc;
  }
};
var k8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "marker", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.createPath = function(t) {
      var n = this.get("el");
      n.setAttribute("d", this._assembleMarker());
    }, e.prototype._assembleMarker = function() {
      var t = this._getPath();
      return bt(t) ? t.map(function(n) {
        return n.join(" ");
      }).join("") : t;
    }, e.prototype._getPath = function() {
      var t = this.attr(), n = t.x, a = t.y, i = t.r || t.radius, o = t.symbol || "circle", s;
      return Or(o) ? s = o : s = Jx.get(o), s ? s(n, a, i) : (console.warn(s + " symbol is not exist."), null);
    }, e.symbolsFactory = Jx, e;
  }(ua)
), R8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "path", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { startArrow: !1, endArrow: !1 });
    }, e.prototype.createPath = function(t, n) {
      var a = this, i = this.attr(), o = this.get("el");
      Se(n || i, function(s, u) {
        if (u === "path" && bt(s))
          o.setAttribute("d", a._formatPath(s));
        else if (u === "startArrow" || u === "endArrow")
          if (s) {
            var f = yn(s) ? t.addArrow(i, ir[u]) : t.getDefaultArrow(i, ir[u]);
            o.setAttribute(ir[u], "url(#" + f + ")");
          } else
            o.removeAttribute(ir[u]);
        else
          ir[u] && o.setAttribute(ir[u], s);
      });
    }, e.prototype._formatPath = function(t) {
      var n = t.map(function(a) {
        return a.join(" ");
      }).join("");
      return ~n.indexOf("NaN") ? "" : n;
    }, e.prototype.getTotalLength = function() {
      var t = this.get("el");
      return t ? t.getTotalLength() : null;
    }, e.prototype.getPoint = function(t) {
      var n = this.get("el"), a = this.getTotalLength();
      if (a === 0)
        return null;
      var i = n ? n.getPointAtLength(t * a) : null;
      return i ? {
        x: i.x,
        y: i.y
      } : null;
    }, e;
  }(ua)
), B8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "polygon", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      Se(n || a, function(o, s) {
        s === "points" && bt(o) && o.length >= 2 ? i.setAttribute("points", o.map(function(u) {
          return u[0] + "," + u[1];
        }).join(" ")) : ir[s] && i.setAttribute(ir[s], o);
      });
    }, e;
  }(ua)
), F8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "polyline", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { startArrow: !1, endArrow: !1 });
    }, e.prototype.onAttrChange = function(t, n, a) {
      r.prototype.onAttrChange.call(this, t, n, a), ["points"].indexOf(t) !== -1 && this._resetCache();
    }, e.prototype._resetCache = function() {
      this.set("totalLength", null), this.set("tCache", null);
    }, e.prototype.createPath = function(t, n) {
      var a = this.attr(), i = this.get("el");
      Se(n || a, function(o, s) {
        s === "points" && bt(o) && o.length >= 2 ? i.setAttribute("points", o.map(function(u) {
          return u[0] + "," + u[1];
        }).join(" ")) : ir[s] && i.setAttribute(ir[s], o);
      });
    }, e.prototype.getTotalLength = function() {
      var t = this.attr().points, n = this.get("totalLength");
      return Zt(n) ? (this.set("totalLength", bC.length(t)), this.get("totalLength")) : n;
    }, e.prototype.getPoint = function(t) {
      var n = this.attr().points, a = this.get("tCache");
      a || (this._setTcache(), a = this.get("tCache"));
      var i, o;
      return Se(a, function(s, u) {
        t >= s[0] && t <= s[1] && (i = (t - s[0]) / (s[1] - s[0]), o = u);
      }), dn.pointAt(n[o][0], n[o][1], n[o + 1][0], n[o + 1][1], i);
    }, e.prototype._setTcache = function() {
      var t = this.attr().points;
      if (!(!t || t.length === 0)) {
        var n = this.getTotalLength();
        if (!(n <= 0)) {
          var a = 0, i = [], o, s;
          Se(t, function(u, f) {
            t[f + 1] && (o = [], o[0] = a / n, s = dn.length(u[0], u[1], t[f + 1][0], t[f + 1][1]), a += s, o[1] = a / n, i.push(o));
          }), this.set("tCache", i);
        }
      }
    }, e.prototype.getStartTangent = function() {
      var t = this.attr().points, n = [];
      return n.push([t[1][0], t[1][1]]), n.push([t[0][0], t[0][1]]), n;
    }, e.prototype.getEndTangent = function() {
      var t = this.attr().points, n = t.length - 1, a = [];
      return a.push([t[n - 1][0], t[n - 1][1]]), a.push([t[n][0], t[n][1]]), a;
    }, e;
  }(ua)
);
function G8(r) {
  var e = 0, t = 0, n = 0, a = 0;
  return bt(r) ? r.length === 1 ? e = t = n = a = r[0] : r.length === 2 ? (e = n = r[0], t = a = r[1]) : r.length === 3 ? (e = r[0], t = a = r[1], n = r[2]) : (e = r[0], t = r[1], n = r[2], a = r[3]) : e = t = n = a = r, {
    r1: e,
    r2: t,
    r3: n,
    r4: a
  };
}
var z8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "rect", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, width: 0, height: 0, radius: 0 });
    }, e.prototype.createPath = function(t, n) {
      var a = this, i = this.attr(), o = this.get("el"), s = !1, u = ["x", "y", "width", "height", "radius"];
      Se(n || i, function(f, l) {
        u.indexOf(l) !== -1 && !s ? (o.setAttribute("d", a._assembleRect(i)), s = !0) : u.indexOf(l) === -1 && ir[l] && o.setAttribute(ir[l], f);
      });
    }, e.prototype._assembleRect = function(t) {
      var n = t.x, a = t.y, i = t.width, o = t.height, s = t.radius;
      if (!s)
        return "M " + n + "," + a + " l " + i + ",0 l 0," + o + " l" + -i + " 0 z";
      var u = G8(s);
      bt(s) ? s.length === 1 ? u.r1 = u.r2 = u.r3 = u.r4 = s[0] : s.length === 2 ? (u.r1 = u.r3 = s[0], u.r2 = u.r4 = s[1]) : s.length === 3 ? (u.r1 = s[0], u.r2 = u.r4 = s[1], u.r3 = s[2]) : (u.r1 = s[0], u.r2 = s[1], u.r3 = s[2], u.r4 = s[3]) : u.r1 = u.r2 = u.r3 = u.r4 = s;
      var f = [
        ["M " + (n + u.r1) + "," + a],
        ["l " + (i - u.r1 - u.r2) + ",0"],
        ["a " + u.r2 + "," + u.r2 + ",0,0,1," + u.r2 + "," + u.r2],
        ["l 0," + (o - u.r2 - u.r3)],
        ["a " + u.r3 + "," + u.r3 + ",0,0,1," + -u.r3 + "," + u.r3],
        ["l " + (u.r3 + u.r4 - i) + ",0"],
        ["a " + u.r4 + "," + u.r4 + ",0,0,1," + -u.r4 + "," + -u.r4],
        ["l 0," + (u.r4 + u.r1 - o)],
        ["a " + u.r1 + "," + u.r1 + ",0,0,1," + u.r1 + "," + -u.r1],
        ["z"]
      ];
      return f.join(" ");
    }, e;
  }(ua)
), ew = 0.3, U8 = {
  top: "before-edge",
  middle: "central",
  bottom: "after-edge",
  alphabetic: "baseline",
  hanging: "hanging"
}, j8 = {
  top: "text-before-edge",
  middle: "central",
  bottom: "text-after-edge",
  alphabetic: "alphabetic",
  hanging: "hanging"
}, $8 = {
  left: "left",
  start: "left",
  center: "middle",
  right: "end",
  end: "end"
}, W8 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e() {
      var t = r !== null && r.apply(this, arguments) || this;
      return t.type = "text", t.canFill = !0, t.canStroke = !0, t;
    }
    return e.prototype.getDefaultAttrs = function() {
      var t = r.prototype.getDefaultAttrs.call(this);
      return B(B({}, t), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: "sans-serif", fontStyle: "normal", fontWeight: "normal", fontVariant: "normal", textAlign: "start", textBaseline: "bottom" });
    }, e.prototype.createPath = function(t, n) {
      var a = this, i = this.attr(), o = this.get("el");
      this._setFont(), Se(n || i, function(s, u) {
        u === "text" ? a._setText("" + s) : u === "matrix" && s ? Zf(a) : ir[u] && o.setAttribute(ir[u], s);
      }), o.setAttribute("paint-order", "stroke"), o.setAttribute("style", "stroke-linecap:butt; stroke-linejoin:miter;");
    }, e.prototype._setFont = function() {
      var t = this.get("el"), n = this.attr(), a = n.textBaseline, i = n.textAlign, o = $A();
      o && o.name === "firefox" ? t.setAttribute("dominant-baseline", j8[a] || "alphabetic") : t.setAttribute("alignment-baseline", U8[a] || "baseline"), t.setAttribute("text-anchor", $8[i] || "left");
    }, e.prototype._setText = function(t) {
      var n = this.get("el"), a = this.attr(), i = a.x, o = a.textBaseline, s = o === void 0 ? "bottom" : o;
      if (!t)
        n.innerHTML = "";
      else if (~t.indexOf(`
`)) {
        var u = t.split(`
`), f = u.length - 1, l = "";
        Se(u, function(c, h) {
          h === 0 ? s === "alphabetic" ? l += '<tspan x="' + i + '" dy="' + -f + 'em">' + c + "</tspan>" : s === "top" ? l += '<tspan x="' + i + '" dy="0.9em">' + c + "</tspan>" : s === "middle" ? l += '<tspan x="' + i + '" dy="' + -(f - 1) / 2 + 'em">' + c + "</tspan>" : s === "bottom" ? l += '<tspan x="' + i + '" dy="-' + (f + ew) + 'em">' + c + "</tspan>" : s === "hanging" && (l += '<tspan x="' + i + '" dy="' + (-(f - 1) - ew) + 'em">' + c + "</tspan>") : l += '<tspan x="' + i + '" dy="1em">' + c + "</tspan>";
        }), n.innerHTML = l;
      } else
        n.innerHTML = t;
    }, e;
  }(ua)
), X8 = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, V8 = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, Y8 = /[\d.]+:(#[^\s]+|[^)]+\))/gi;
function NT(r) {
  var e = r.match(Y8);
  if (!e)
    return "";
  var t = "";
  return e.sort(function(n, a) {
    return n = n.split(":"), a = a.split(":"), Number(n[0]) - Number(a[0]);
  }), Se(e, function(n) {
    n = n.split(":"), t += '<stop offset="' + n[0] + '" stop-color="' + n[1] + '"></stop>';
  }), t;
}
function H8(r, e) {
  var t = X8.exec(r), n = nd(ad(parseFloat(t[1])), Math.PI * 2), a = t[2], i, o;
  n >= 0 && n < 0.5 * Math.PI ? (i = {
    x: 0,
    y: 0
  }, o = {
    x: 1,
    y: 1
  }) : 0.5 * Math.PI <= n && n < Math.PI ? (i = {
    x: 1,
    y: 0
  }, o = {
    x: 0,
    y: 1
  }) : Math.PI <= n && n < 1.5 * Math.PI ? (i = {
    x: 1,
    y: 1
  }, o = {
    x: 0,
    y: 0
  }) : (i = {
    x: 0,
    y: 1
  }, o = {
    x: 1,
    y: 0
  });
  var s = Math.tan(n), u = s * s, f = (o.x - i.x + s * (o.y - i.y)) / (u + 1) + i.x, l = s * (o.x - i.x + s * (o.y - i.y)) / (u + 1) + i.y;
  e.setAttribute("x1", i.x), e.setAttribute("y1", i.y), e.setAttribute("x2", f), e.setAttribute("y2", l), e.innerHTML = NT(a);
}
function K8(r, e) {
  var t = V8.exec(r), n = parseFloat(t[1]), a = parseFloat(t[2]), i = parseFloat(t[3]), o = t[4];
  e.setAttribute("cx", n), e.setAttribute("cy", a), e.setAttribute("r", i), e.innerHTML = NT(o);
}
var q8 = (
  /** @class */
  function() {
    function r(e) {
      this.cfg = {};
      var t = null, n = ao("gradient_");
      return e.toLowerCase()[0] === "l" ? (t = oa("linearGradient"), H8(e, t)) : (t = oa("radialGradient"), K8(e, t)), t.setAttribute("id", n), this.el = t, this.id = n, this.cfg = e, this;
    }
    return r.prototype.match = function(e, t) {
      return this.cfg === t;
    }, r;
  }()
), Z8 = {
  shadowColor: "color",
  shadowOpacity: "opacity",
  shadowBlur: "blur",
  shadowOffsetX: "dx",
  shadowOffsetY: "dy"
}, Q8 = {
  x: "-40%",
  y: "-40%",
  width: "200%",
  height: "200%"
}, J8 = (
  /** @class */
  function() {
    function r(e) {
      this.type = "filter", this.cfg = {}, this.type = "filter";
      var t = oa("filter");
      return Se(Q8, function(n, a) {
        t.setAttribute(a, n);
      }), this.el = t, this.id = ao("filter_"), this.el.id = this.id, this.cfg = e, this._parseShadow(e, t), this;
    }
    return r.prototype.match = function(e, t) {
      if (this.type !== e)
        return !1;
      var n = !0, a = this.cfg;
      return Se(Object.keys(a), function(i) {
        if (a[i] !== t[i])
          return n = !1, !1;
      }), n;
    }, r.prototype.update = function(e, t) {
      var n = this.cfg;
      return n[Z8[e]] = t, this._parseShadow(n, this.el), this;
    }, r.prototype._parseShadow = function(e, t) {
      var n = `<feDropShadow
      dx="` + (e.dx || 0) + `"
      dy="` + (e.dy || 0) + `"
      stdDeviation="` + (e.blur ? e.blur / 10 : 0) + `"
      flood-color="` + (e.color ? e.color : "#000") + `"
      flood-opacity="` + (e.opacity ? e.opacity : 1) + `"
      />`;
      t.innerHTML = n;
    }, r;
  }()
), tw = (
  /** @class */
  function() {
    function r(e, t) {
      this.cfg = {};
      var n = oa("marker"), a = ao("marker_");
      n.setAttribute("id", a);
      var i = oa("path");
      i.setAttribute("stroke", e.stroke || "none"), i.setAttribute("fill", e.fill || "none"), n.appendChild(i), n.setAttribute("overflow", "visible"), n.setAttribute("orient", "auto-start-reverse"), this.el = n, this.child = i, this.id = a;
      var o = e[t === "marker-start" ? "startArrow" : "endArrow"];
      return this.stroke = e.stroke || "#000", o === !0 ? this._setDefaultPath(t, i) : (this.cfg = o, this._setMarker(e.lineWidth, i)), this;
    }
    return r.prototype.match = function() {
      return !1;
    }, r.prototype._setDefaultPath = function(e, t) {
      var n = this.el;
      t.setAttribute("d", "M0,0 L" + 10 * Math.cos(Math.PI / 6) + ",5 L0,10"), n.setAttribute("refX", "" + 10 * Math.cos(Math.PI / 6)), n.setAttribute("refY", "5");
    }, r.prototype._setMarker = function(e, t) {
      var n = this.el, a = this.cfg.path, i = this.cfg.d;
      bt(a) && (a = a.map(function(o) {
        return o.join(" ");
      }).join("")), t.setAttribute("d", a), n.appendChild(t), i && n.setAttribute("refX", "" + i / e);
    }, r.prototype.update = function(e) {
      var t = this.child;
      t.attr ? t.attr("fill", e) : t.setAttribute("fill", e);
    }, r;
  }()
), eW = (
  /** @class */
  function() {
    function r(e) {
      this.type = "clip", this.cfg = {};
      var t = oa("clipPath");
      this.el = t, this.id = ao("clip_"), t.id = this.id;
      var n = e.cfg.el;
      return t.appendChild(n), this.cfg = e, this;
    }
    return r.prototype.match = function() {
      return !1;
    }, r.prototype.remove = function() {
      var e = this.el;
      e.parentNode.removeChild(e);
    }, r;
  }()
), tW = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, rW = (
  /** @class */
  function() {
    function r(e) {
      this.cfg = {};
      var t = oa("pattern");
      t.setAttribute("patternUnits", "userSpaceOnUse");
      var n = oa("image");
      t.appendChild(n);
      var a = ao("pattern_");
      t.id = a, this.el = t, this.id = a, this.cfg = e;
      var i = tW.exec(e), o = i[2];
      n.setAttribute("href", o);
      var s = new Image();
      o.match(/^data:/i) || (s.crossOrigin = "Anonymous"), s.src = o;
      function u() {
        t.setAttribute("width", "" + s.width), t.setAttribute("height", "" + s.height);
      }
      return s.complete ? u() : (s.onload = u, s.src = s.src), this;
    }
    return r.prototype.match = function(e, t) {
      return this.cfg === t;
    }, r;
  }()
), nW = (
  /** @class */
  function() {
    function r(e) {
      var t = oa("defs"), n = ao("defs_");
      t.id = n, e.appendChild(t), this.children = [], this.defaultArrow = {}, this.el = t, this.canvas = e;
    }
    return r.prototype.find = function(e, t) {
      for (var n = this.children, a = null, i = 0; i < n.length; i++)
        if (n[i].match(e, t)) {
          a = n[i].id;
          break;
        }
      return a;
    }, r.prototype.findById = function(e) {
      for (var t = this.children, n = null, a = 0; a < t.length; a++)
        if (t[a].id === e) {
          n = t[a];
          break;
        }
      return n;
    }, r.prototype.add = function(e) {
      this.children.push(e), e.canvas = this.canvas, e.parent = this;
    }, r.prototype.getDefaultArrow = function(e, t) {
      var n = e.stroke || e.strokeStyle;
      if (this.defaultArrow[n])
        return this.defaultArrow[n].id;
      var a = new tw(e, t);
      return this.defaultArrow[n] = a, this.el.appendChild(a.el), this.add(a), a.id;
    }, r.prototype.addGradient = function(e) {
      var t = new q8(e);
      return this.el.appendChild(t.el), this.add(t), t.id;
    }, r.prototype.addArrow = function(e, t) {
      var n = new tw(e, t);
      return this.el.appendChild(n.el), this.add(n), n.id;
    }, r.prototype.addShadow = function(e) {
      var t = new J8(e);
      return this.el.appendChild(t.el), this.add(t), t.id;
    }, r.prototype.addPattern = function(e) {
      var t = new rW(e);
      return this.el.appendChild(t.el), this.add(t), t.id;
    }, r.prototype.addClip = function(e) {
      var t = new eW(e);
      return this.el.appendChild(t.el), this.add(t), t.id;
    }, r;
  }()
), Ap = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      return r.call(this, B(B({}, t), {
        autoDraw: !0,
        // 设置渲染引擎为 canvas，只读属性
        renderer: "svg"
      })) || this;
    }
    return e.prototype.getShapeBase = function() {
      return Kg;
    }, e.prototype.getGroupBase = function() {
      return LT;
    }, e.prototype.getShape = function(t, n, a) {
      var i = a.target || a.srcElement;
      if (!ig[i.tagName]) {
        for (var o = i.parentNode; o && !ig[o.tagName]; )
          o = o.parentNode;
        i = o;
      }
      return this.find(function(s) {
        return s.get("el") === i;
      });
    }, e.prototype.createDom = function() {
      var t = oa("svg"), n = new nW(t);
      return t.setAttribute("width", "" + this.get("width")), t.setAttribute("height", "" + this.get("height")), this.set("context", n), t;
    }, e.prototype.onCanvasChange = function(t) {
      var n = this.get("context"), a = this.get("el");
      if (t === "sort") {
        var i = this.get("children");
        i && i.length && IT(this, function(s, u) {
          return i.indexOf(s) - i.indexOf(u) ? 1 : 0;
        });
      } else if (t === "clear") {
        if (a) {
          a.innerHTML = "";
          var o = n.el;
          o.innerHTML = "", a.appendChild(o);
        }
      } else
        t === "matrix" ? Zf(this) : t === "clip" ? Rf(this, n) : t === "changeSize" && (a.setAttribute("width", "" + this.get("width")), a.setAttribute("height", "" + this.get("height")));
    }, e.prototype.draw = function() {
      var t = this.get("context"), n = this.getChildren();
      Rf(this, t), n.length && OT(t, n);
    }, e;
  }(sC)
), PT = { exports: {} }, aW = {
  aliceblue: [240, 248, 255],
  antiquewhite: [250, 235, 215],
  aqua: [0, 255, 255],
  aquamarine: [127, 255, 212],
  azure: [240, 255, 255],
  beige: [245, 245, 220],
  bisque: [255, 228, 196],
  black: [0, 0, 0],
  blanchedalmond: [255, 235, 205],
  blue: [0, 0, 255],
  blueviolet: [138, 43, 226],
  brown: [165, 42, 42],
  burlywood: [222, 184, 135],
  cadetblue: [95, 158, 160],
  chartreuse: [127, 255, 0],
  chocolate: [210, 105, 30],
  coral: [255, 127, 80],
  cornflowerblue: [100, 149, 237],
  cornsilk: [255, 248, 220],
  crimson: [220, 20, 60],
  cyan: [0, 255, 255],
  darkblue: [0, 0, 139],
  darkcyan: [0, 139, 139],
  darkgoldenrod: [184, 134, 11],
  darkgray: [169, 169, 169],
  darkgreen: [0, 100, 0],
  darkgrey: [169, 169, 169],
  darkkhaki: [189, 183, 107],
  darkmagenta: [139, 0, 139],
  darkolivegreen: [85, 107, 47],
  darkorange: [255, 140, 0],
  darkorchid: [153, 50, 204],
  darkred: [139, 0, 0],
  darksalmon: [233, 150, 122],
  darkseagreen: [143, 188, 143],
  darkslateblue: [72, 61, 139],
  darkslategray: [47, 79, 79],
  darkslategrey: [47, 79, 79],
  darkturquoise: [0, 206, 209],
  darkviolet: [148, 0, 211],
  deeppink: [255, 20, 147],
  deepskyblue: [0, 191, 255],
  dimgray: [105, 105, 105],
  dimgrey: [105, 105, 105],
  dodgerblue: [30, 144, 255],
  firebrick: [178, 34, 34],
  floralwhite: [255, 250, 240],
  forestgreen: [34, 139, 34],
  fuchsia: [255, 0, 255],
  gainsboro: [220, 220, 220],
  ghostwhite: [248, 248, 255],
  gold: [255, 215, 0],
  goldenrod: [218, 165, 32],
  gray: [128, 128, 128],
  green: [0, 128, 0],
  greenyellow: [173, 255, 47],
  grey: [128, 128, 128],
  honeydew: [240, 255, 240],
  hotpink: [255, 105, 180],
  indianred: [205, 92, 92],
  indigo: [75, 0, 130],
  ivory: [255, 255, 240],
  khaki: [240, 230, 140],
  lavender: [230, 230, 250],
  lavenderblush: [255, 240, 245],
  lawngreen: [124, 252, 0],
  lemonchiffon: [255, 250, 205],
  lightblue: [173, 216, 230],
  lightcoral: [240, 128, 128],
  lightcyan: [224, 255, 255],
  lightgoldenrodyellow: [250, 250, 210],
  lightgray: [211, 211, 211],
  lightgreen: [144, 238, 144],
  lightgrey: [211, 211, 211],
  lightpink: [255, 182, 193],
  lightsalmon: [255, 160, 122],
  lightseagreen: [32, 178, 170],
  lightskyblue: [135, 206, 250],
  lightslategray: [119, 136, 153],
  lightslategrey: [119, 136, 153],
  lightsteelblue: [176, 196, 222],
  lightyellow: [255, 255, 224],
  lime: [0, 255, 0],
  limegreen: [50, 205, 50],
  linen: [250, 240, 230],
  magenta: [255, 0, 255],
  maroon: [128, 0, 0],
  mediumaquamarine: [102, 205, 170],
  mediumblue: [0, 0, 205],
  mediumorchid: [186, 85, 211],
  mediumpurple: [147, 112, 219],
  mediumseagreen: [60, 179, 113],
  mediumslateblue: [123, 104, 238],
  mediumspringgreen: [0, 250, 154],
  mediumturquoise: [72, 209, 204],
  mediumvioletred: [199, 21, 133],
  midnightblue: [25, 25, 112],
  mintcream: [245, 255, 250],
  mistyrose: [255, 228, 225],
  moccasin: [255, 228, 181],
  navajowhite: [255, 222, 173],
  navy: [0, 0, 128],
  oldlace: [253, 245, 230],
  olive: [128, 128, 0],
  olivedrab: [107, 142, 35],
  orange: [255, 165, 0],
  orangered: [255, 69, 0],
  orchid: [218, 112, 214],
  palegoldenrod: [238, 232, 170],
  palegreen: [152, 251, 152],
  paleturquoise: [175, 238, 238],
  palevioletred: [219, 112, 147],
  papayawhip: [255, 239, 213],
  peachpuff: [255, 218, 185],
  peru: [205, 133, 63],
  pink: [255, 192, 203],
  plum: [221, 160, 221],
  powderblue: [176, 224, 230],
  purple: [128, 0, 128],
  rebeccapurple: [102, 51, 153],
  red: [255, 0, 0],
  rosybrown: [188, 143, 143],
  royalblue: [65, 105, 225],
  saddlebrown: [139, 69, 19],
  salmon: [250, 128, 114],
  sandybrown: [244, 164, 96],
  seagreen: [46, 139, 87],
  seashell: [255, 245, 238],
  sienna: [160, 82, 45],
  silver: [192, 192, 192],
  skyblue: [135, 206, 235],
  slateblue: [106, 90, 205],
  slategray: [112, 128, 144],
  slategrey: [112, 128, 144],
  snow: [255, 250, 250],
  springgreen: [0, 255, 127],
  steelblue: [70, 130, 180],
  tan: [210, 180, 140],
  teal: [0, 128, 128],
  thistle: [216, 191, 216],
  tomato: [255, 99, 71],
  turquoise: [64, 224, 208],
  violet: [238, 130, 238],
  wheat: [245, 222, 179],
  white: [255, 255, 255],
  whitesmoke: [245, 245, 245],
  yellow: [255, 255, 0],
  yellowgreen: [154, 205, 50]
}, kT = { exports: {} }, iW = function(e) {
  return !e || typeof e == "string" ? !1 : e instanceof Array || Array.isArray(e) || e.length >= 0 && (e.splice instanceof Function || Object.getOwnPropertyDescriptor(e, e.length - 1) && e.constructor.name !== "String");
}, oW = iW, sW = Array.prototype.concat, uW = Array.prototype.slice, rw = kT.exports = function(e) {
  for (var t = [], n = 0, a = e.length; n < a; n++) {
    var i = e[n];
    oW(i) ? t = sW.call(t, uW.call(i)) : t.push(i);
  }
  return t;
};
rw.wrap = function(r) {
  return function() {
    return r(rw(arguments));
  };
};
var fW = kT.exports, gf = aW, Qf = fW, RT = Object.hasOwnProperty, BT = /* @__PURE__ */ Object.create(null);
for (var Cp in gf)
  RT.call(gf, Cp) && (BT[gf[Cp]] = Cp);
var Vn = PT.exports = {
  to: {},
  get: {}
};
Vn.get = function(r) {
  var e = r.substring(0, 3).toLowerCase(), t, n;
  switch (e) {
    case "hsl":
      t = Vn.get.hsl(r), n = "hsl";
      break;
    case "hwb":
      t = Vn.get.hwb(r), n = "hwb";
      break;
    default:
      t = Vn.get.rgb(r), n = "rgb";
      break;
  }
  return t ? { model: n, value: t } : null;
};
Vn.get.rgb = function(r) {
  if (!r)
    return null;
  var e = /^#([a-f0-9]{3,4})$/i, t = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i, n = /^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/, a = /^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/, i = /^(\w+)$/, o = [0, 0, 0, 1], s, u, f;
  if (s = r.match(t)) {
    for (f = s[2], s = s[1], u = 0; u < 3; u++) {
      var l = u * 2;
      o[u] = parseInt(s.slice(l, l + 2), 16);
    }
    f && (o[3] = parseInt(f, 16) / 255);
  } else if (s = r.match(e)) {
    for (s = s[1], f = s[3], u = 0; u < 3; u++)
      o[u] = parseInt(s[u] + s[u], 16);
    f && (o[3] = parseInt(f + f, 16) / 255);
  } else if (s = r.match(n)) {
    for (u = 0; u < 3; u++)
      o[u] = parseInt(s[u + 1], 0);
    s[4] && (s[5] ? o[3] = parseFloat(s[4]) * 0.01 : o[3] = parseFloat(s[4]));
  } else if (s = r.match(a)) {
    for (u = 0; u < 3; u++)
      o[u] = Math.round(parseFloat(s[u + 1]) * 2.55);
    s[4] && (s[5] ? o[3] = parseFloat(s[4]) * 0.01 : o[3] = parseFloat(s[4]));
  } else
    return (s = r.match(i)) ? s[1] === "transparent" ? [0, 0, 0, 0] : RT.call(gf, s[1]) ? (o = gf[s[1]], o[3] = 1, o) : null : null;
  for (u = 0; u < 3; u++)
    o[u] = Zi(o[u], 0, 255);
  return o[3] = Zi(o[3], 0, 1), o;
};
Vn.get.hsl = function(r) {
  if (!r)
    return null;
  var e = /^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/, t = r.match(e);
  if (t) {
    var n = parseFloat(t[4]), a = (parseFloat(t[1]) % 360 + 360) % 360, i = Zi(parseFloat(t[2]), 0, 100), o = Zi(parseFloat(t[3]), 0, 100), s = Zi(isNaN(n) ? 1 : n, 0, 1);
    return [a, i, o, s];
  }
  return null;
};
Vn.get.hwb = function(r) {
  if (!r)
    return null;
  var e = /^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/, t = r.match(e);
  if (t) {
    var n = parseFloat(t[4]), a = (parseFloat(t[1]) % 360 + 360) % 360, i = Zi(parseFloat(t[2]), 0, 100), o = Zi(parseFloat(t[3]), 0, 100), s = Zi(isNaN(n) ? 1 : n, 0, 1);
    return [a, i, o, s];
  }
  return null;
};
Vn.to.hex = function() {
  var r = Qf(arguments);
  return "#" + Ec(r[0]) + Ec(r[1]) + Ec(r[2]) + (r[3] < 1 ? Ec(Math.round(r[3] * 255)) : "");
};
Vn.to.rgb = function() {
  var r = Qf(arguments);
  return r.length < 4 || r[3] === 1 ? "rgb(" + Math.round(r[0]) + ", " + Math.round(r[1]) + ", " + Math.round(r[2]) + ")" : "rgba(" + Math.round(r[0]) + ", " + Math.round(r[1]) + ", " + Math.round(r[2]) + ", " + r[3] + ")";
};
Vn.to.rgb.percent = function() {
  var r = Qf(arguments), e = Math.round(r[0] / 255 * 100), t = Math.round(r[1] / 255 * 100), n = Math.round(r[2] / 255 * 100);
  return r.length < 4 || r[3] === 1 ? "rgb(" + e + "%, " + t + "%, " + n + "%)" : "rgba(" + e + "%, " + t + "%, " + n + "%, " + r[3] + ")";
};
Vn.to.hsl = function() {
  var r = Qf(arguments);
  return r.length < 4 || r[3] === 1 ? "hsl(" + r[0] + ", " + r[1] + "%, " + r[2] + "%)" : "hsla(" + r[0] + ", " + r[1] + "%, " + r[2] + "%, " + r[3] + ")";
};
Vn.to.hwb = function() {
  var r = Qf(arguments), e = "";
  return r.length >= 4 && r[3] !== 1 && (e = ", " + r[3]), "hwb(" + r[0] + ", " + r[1] + "%, " + r[2] + "%" + e + ")";
};
Vn.to.keyword = function(r) {
  return BT[r.slice(0, 3)];
};
function Zi(r, e, t) {
  return Math.min(Math.max(e, r), t);
}
function Ec(r) {
  var e = Math.round(r).toString(16).toUpperCase();
  return e.length < 2 ? "0" + e : e;
}
var lW = PT.exports, FT = { exports: {} }, cW = {
  aliceblue: [240, 248, 255],
  antiquewhite: [250, 235, 215],
  aqua: [0, 255, 255],
  aquamarine: [127, 255, 212],
  azure: [240, 255, 255],
  beige: [245, 245, 220],
  bisque: [255, 228, 196],
  black: [0, 0, 0],
  blanchedalmond: [255, 235, 205],
  blue: [0, 0, 255],
  blueviolet: [138, 43, 226],
  brown: [165, 42, 42],
  burlywood: [222, 184, 135],
  cadetblue: [95, 158, 160],
  chartreuse: [127, 255, 0],
  chocolate: [210, 105, 30],
  coral: [255, 127, 80],
  cornflowerblue: [100, 149, 237],
  cornsilk: [255, 248, 220],
  crimson: [220, 20, 60],
  cyan: [0, 255, 255],
  darkblue: [0, 0, 139],
  darkcyan: [0, 139, 139],
  darkgoldenrod: [184, 134, 11],
  darkgray: [169, 169, 169],
  darkgreen: [0, 100, 0],
  darkgrey: [169, 169, 169],
  darkkhaki: [189, 183, 107],
  darkmagenta: [139, 0, 139],
  darkolivegreen: [85, 107, 47],
  darkorange: [255, 140, 0],
  darkorchid: [153, 50, 204],
  darkred: [139, 0, 0],
  darksalmon: [233, 150, 122],
  darkseagreen: [143, 188, 143],
  darkslateblue: [72, 61, 139],
  darkslategray: [47, 79, 79],
  darkslategrey: [47, 79, 79],
  darkturquoise: [0, 206, 209],
  darkviolet: [148, 0, 211],
  deeppink: [255, 20, 147],
  deepskyblue: [0, 191, 255],
  dimgray: [105, 105, 105],
  dimgrey: [105, 105, 105],
  dodgerblue: [30, 144, 255],
  firebrick: [178, 34, 34],
  floralwhite: [255, 250, 240],
  forestgreen: [34, 139, 34],
  fuchsia: [255, 0, 255],
  gainsboro: [220, 220, 220],
  ghostwhite: [248, 248, 255],
  gold: [255, 215, 0],
  goldenrod: [218, 165, 32],
  gray: [128, 128, 128],
  green: [0, 128, 0],
  greenyellow: [173, 255, 47],
  grey: [128, 128, 128],
  honeydew: [240, 255, 240],
  hotpink: [255, 105, 180],
  indianred: [205, 92, 92],
  indigo: [75, 0, 130],
  ivory: [255, 255, 240],
  khaki: [240, 230, 140],
  lavender: [230, 230, 250],
  lavenderblush: [255, 240, 245],
  lawngreen: [124, 252, 0],
  lemonchiffon: [255, 250, 205],
  lightblue: [173, 216, 230],
  lightcoral: [240, 128, 128],
  lightcyan: [224, 255, 255],
  lightgoldenrodyellow: [250, 250, 210],
  lightgray: [211, 211, 211],
  lightgreen: [144, 238, 144],
  lightgrey: [211, 211, 211],
  lightpink: [255, 182, 193],
  lightsalmon: [255, 160, 122],
  lightseagreen: [32, 178, 170],
  lightskyblue: [135, 206, 250],
  lightslategray: [119, 136, 153],
  lightslategrey: [119, 136, 153],
  lightsteelblue: [176, 196, 222],
  lightyellow: [255, 255, 224],
  lime: [0, 255, 0],
  limegreen: [50, 205, 50],
  linen: [250, 240, 230],
  magenta: [255, 0, 255],
  maroon: [128, 0, 0],
  mediumaquamarine: [102, 205, 170],
  mediumblue: [0, 0, 205],
  mediumorchid: [186, 85, 211],
  mediumpurple: [147, 112, 219],
  mediumseagreen: [60, 179, 113],
  mediumslateblue: [123, 104, 238],
  mediumspringgreen: [0, 250, 154],
  mediumturquoise: [72, 209, 204],
  mediumvioletred: [199, 21, 133],
  midnightblue: [25, 25, 112],
  mintcream: [245, 255, 250],
  mistyrose: [255, 228, 225],
  moccasin: [255, 228, 181],
  navajowhite: [255, 222, 173],
  navy: [0, 0, 128],
  oldlace: [253, 245, 230],
  olive: [128, 128, 0],
  olivedrab: [107, 142, 35],
  orange: [255, 165, 0],
  orangered: [255, 69, 0],
  orchid: [218, 112, 214],
  palegoldenrod: [238, 232, 170],
  palegreen: [152, 251, 152],
  paleturquoise: [175, 238, 238],
  palevioletred: [219, 112, 147],
  papayawhip: [255, 239, 213],
  peachpuff: [255, 218, 185],
  peru: [205, 133, 63],
  pink: [255, 192, 203],
  plum: [221, 160, 221],
  powderblue: [176, 224, 230],
  purple: [128, 0, 128],
  rebeccapurple: [102, 51, 153],
  red: [255, 0, 0],
  rosybrown: [188, 143, 143],
  royalblue: [65, 105, 225],
  saddlebrown: [139, 69, 19],
  salmon: [250, 128, 114],
  sandybrown: [244, 164, 96],
  seagreen: [46, 139, 87],
  seashell: [255, 245, 238],
  sienna: [160, 82, 45],
  silver: [192, 192, 192],
  skyblue: [135, 206, 235],
  slateblue: [106, 90, 205],
  slategray: [112, 128, 144],
  slategrey: [112, 128, 144],
  snow: [255, 250, 250],
  springgreen: [0, 255, 127],
  steelblue: [70, 130, 180],
  tan: [210, 180, 140],
  teal: [0, 128, 128],
  thistle: [216, 191, 216],
  tomato: [255, 99, 71],
  turquoise: [64, 224, 208],
  violet: [238, 130, 238],
  wheat: [245, 222, 179],
  white: [255, 255, 255],
  whitesmoke: [245, 245, 245],
  yellow: [255, 255, 0],
  yellowgreen: [154, 205, 50]
}, Uo = cW, GT = {};
for (var Tp in Uo)
  Uo.hasOwnProperty(Tp) && (GT[Uo[Tp]] = Tp);
var mt = FT.exports = {
  rgb: { channels: 3, labels: "rgb" },
  hsl: { channels: 3, labels: "hsl" },
  hsv: { channels: 3, labels: "hsv" },
  hwb: { channels: 3, labels: "hwb" },
  cmyk: { channels: 4, labels: "cmyk" },
  xyz: { channels: 3, labels: "xyz" },
  lab: { channels: 3, labels: "lab" },
  lch: { channels: 3, labels: "lch" },
  hex: { channels: 1, labels: ["hex"] },
  keyword: { channels: 1, labels: ["keyword"] },
  ansi16: { channels: 1, labels: ["ansi16"] },
  ansi256: { channels: 1, labels: ["ansi256"] },
  hcg: { channels: 3, labels: ["h", "c", "g"] },
  apple: { channels: 3, labels: ["r16", "g16", "b16"] },
  gray: { channels: 1, labels: ["gray"] }
};
for (var Tn in mt)
  if (mt.hasOwnProperty(Tn)) {
    if (!("channels" in mt[Tn]))
      throw new Error("missing channels property: " + Tn);
    if (!("labels" in mt[Tn]))
      throw new Error("missing channel labels property: " + Tn);
    if (mt[Tn].labels.length !== mt[Tn].channels)
      throw new Error("channel and label counts mismatch: " + Tn);
    var hW = mt[Tn].channels, dW = mt[Tn].labels;
    delete mt[Tn].channels, delete mt[Tn].labels, Object.defineProperty(mt[Tn], "channels", { value: hW }), Object.defineProperty(mt[Tn], "labels", { value: dW });
  }
mt.rgb.hsl = function(r) {
  var e = r[0] / 255, t = r[1] / 255, n = r[2] / 255, a = Math.min(e, t, n), i = Math.max(e, t, n), o = i - a, s, u, f;
  return i === a ? s = 0 : e === i ? s = (t - n) / o : t === i ? s = 2 + (n - e) / o : n === i && (s = 4 + (e - t) / o), s = Math.min(s * 60, 360), s < 0 && (s += 360), f = (a + i) / 2, i === a ? u = 0 : f <= 0.5 ? u = o / (i + a) : u = o / (2 - i - a), [s, u * 100, f * 100];
};
mt.rgb.hsv = function(r) {
  var e, t, n, a, i, o = r[0] / 255, s = r[1] / 255, u = r[2] / 255, f = Math.max(o, s, u), l = f - Math.min(o, s, u), c = function(h) {
    return (f - h) / 6 / l + 1 / 2;
  };
  return l === 0 ? a = i = 0 : (i = l / f, e = c(o), t = c(s), n = c(u), o === f ? a = n - t : s === f ? a = 1 / 3 + e - n : u === f && (a = 2 / 3 + t - e), a < 0 ? a += 1 : a > 1 && (a -= 1)), [
    a * 360,
    i * 100,
    f * 100
  ];
};
mt.rgb.hwb = function(r) {
  var e = r[0], t = r[1], n = r[2], a = mt.rgb.hsl(r)[0], i = 1 / 255 * Math.min(e, Math.min(t, n));
  return n = 1 - 1 / 255 * Math.max(e, Math.max(t, n)), [a, i * 100, n * 100];
};
mt.rgb.cmyk = function(r) {
  var e = r[0] / 255, t = r[1] / 255, n = r[2] / 255, a, i, o, s;
  return s = Math.min(1 - e, 1 - t, 1 - n), a = (1 - e - s) / (1 - s) || 0, i = (1 - t - s) / (1 - s) || 0, o = (1 - n - s) / (1 - s) || 0, [a * 100, i * 100, o * 100, s * 100];
};
function vW(r, e) {
  return Math.pow(r[0] - e[0], 2) + Math.pow(r[1] - e[1], 2) + Math.pow(r[2] - e[2], 2);
}
mt.rgb.keyword = function(r) {
  var e = GT[r];
  if (e)
    return e;
  var t = 1 / 0, n;
  for (var a in Uo)
    if (Uo.hasOwnProperty(a)) {
      var i = Uo[a], o = vW(r, i);
      o < t && (t = o, n = a);
    }
  return n;
};
mt.keyword.rgb = function(r) {
  return Uo[r];
};
mt.rgb.xyz = function(r) {
  var e = r[0] / 255, t = r[1] / 255, n = r[2] / 255;
  e = e > 0.04045 ? Math.pow((e + 0.055) / 1.055, 2.4) : e / 12.92, t = t > 0.04045 ? Math.pow((t + 0.055) / 1.055, 2.4) : t / 12.92, n = n > 0.04045 ? Math.pow((n + 0.055) / 1.055, 2.4) : n / 12.92;
  var a = e * 0.4124 + t * 0.3576 + n * 0.1805, i = e * 0.2126 + t * 0.7152 + n * 0.0722, o = e * 0.0193 + t * 0.1192 + n * 0.9505;
  return [a * 100, i * 100, o * 100];
};
mt.rgb.lab = function(r) {
  var e = mt.rgb.xyz(r), t = e[0], n = e[1], a = e[2], i, o, s;
  return t /= 95.047, n /= 100, a /= 108.883, t = t > 8856e-6 ? Math.pow(t, 1 / 3) : 7.787 * t + 16 / 116, n = n > 8856e-6 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116, a = a > 8856e-6 ? Math.pow(a, 1 / 3) : 7.787 * a + 16 / 116, i = 116 * n - 16, o = 500 * (t - n), s = 200 * (n - a), [i, o, s];
};
mt.hsl.rgb = function(r) {
  var e = r[0] / 360, t = r[1] / 100, n = r[2] / 100, a, i, o, s, u;
  if (t === 0)
    return u = n * 255, [u, u, u];
  n < 0.5 ? i = n * (1 + t) : i = n + t - n * t, a = 2 * n - i, s = [0, 0, 0];
  for (var f = 0; f < 3; f++)
    o = e + 1 / 3 * -(f - 1), o < 0 && o++, o > 1 && o--, 6 * o < 1 ? u = a + (i - a) * 6 * o : 2 * o < 1 ? u = i : 3 * o < 2 ? u = a + (i - a) * (2 / 3 - o) * 6 : u = a, s[f] = u * 255;
  return s;
};
mt.hsl.hsv = function(r) {
  var e = r[0], t = r[1] / 100, n = r[2] / 100, a = t, i = Math.max(n, 0.01), o, s;
  return n *= 2, t *= n <= 1 ? n : 2 - n, a *= i <= 1 ? i : 2 - i, s = (n + t) / 2, o = n === 0 ? 2 * a / (i + a) : 2 * t / (n + t), [e, o * 100, s * 100];
};
mt.hsv.rgb = function(r) {
  var e = r[0] / 60, t = r[1] / 100, n = r[2] / 100, a = Math.floor(e) % 6, i = e - Math.floor(e), o = 255 * n * (1 - t), s = 255 * n * (1 - t * i), u = 255 * n * (1 - t * (1 - i));
  switch (n *= 255, a) {
    case 0:
      return [n, u, o];
    case 1:
      return [s, n, o];
    case 2:
      return [o, n, u];
    case 3:
      return [o, s, n];
    case 4:
      return [u, o, n];
    case 5:
      return [n, o, s];
  }
};
mt.hsv.hsl = function(r) {
  var e = r[0], t = r[1] / 100, n = r[2] / 100, a = Math.max(n, 0.01), i, o, s;
  return s = (2 - t) * n, i = (2 - t) * a, o = t * a, o /= i <= 1 ? i : 2 - i, o = o || 0, s /= 2, [e, o * 100, s * 100];
};
mt.hwb.rgb = function(r) {
  var e = r[0] / 360, t = r[1] / 100, n = r[2] / 100, a = t + n, i, o, s, u;
  a > 1 && (t /= a, n /= a), i = Math.floor(6 * e), o = 1 - n, s = 6 * e - i, i & 1 && (s = 1 - s), u = t + s * (o - t);
  var f, l, c;
  switch (i) {
    default:
    case 6:
    case 0:
      f = o, l = u, c = t;
      break;
    case 1:
      f = u, l = o, c = t;
      break;
    case 2:
      f = t, l = o, c = u;
      break;
    case 3:
      f = t, l = u, c = o;
      break;
    case 4:
      f = u, l = t, c = o;
      break;
    case 5:
      f = o, l = t, c = u;
      break;
  }
  return [f * 255, l * 255, c * 255];
};
mt.cmyk.rgb = function(r) {
  var e = r[0] / 100, t = r[1] / 100, n = r[2] / 100, a = r[3] / 100, i, o, s;
  return i = 1 - Math.min(1, e * (1 - a) + a), o = 1 - Math.min(1, t * (1 - a) + a), s = 1 - Math.min(1, n * (1 - a) + a), [i * 255, o * 255, s * 255];
};
mt.xyz.rgb = function(r) {
  var e = r[0] / 100, t = r[1] / 100, n = r[2] / 100, a, i, o;
  return a = e * 3.2406 + t * -1.5372 + n * -0.4986, i = e * -0.9689 + t * 1.8758 + n * 0.0415, o = e * 0.0557 + t * -0.204 + n * 1.057, a = a > 31308e-7 ? 1.055 * Math.pow(a, 1 / 2.4) - 0.055 : a * 12.92, i = i > 31308e-7 ? 1.055 * Math.pow(i, 1 / 2.4) - 0.055 : i * 12.92, o = o > 31308e-7 ? 1.055 * Math.pow(o, 1 / 2.4) - 0.055 : o * 12.92, a = Math.min(Math.max(0, a), 1), i = Math.min(Math.max(0, i), 1), o = Math.min(Math.max(0, o), 1), [a * 255, i * 255, o * 255];
};
mt.xyz.lab = function(r) {
  var e = r[0], t = r[1], n = r[2], a, i, o;
  return e /= 95.047, t /= 100, n /= 108.883, e = e > 8856e-6 ? Math.pow(e, 1 / 3) : 7.787 * e + 16 / 116, t = t > 8856e-6 ? Math.pow(t, 1 / 3) : 7.787 * t + 16 / 116, n = n > 8856e-6 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116, a = 116 * t - 16, i = 500 * (e - t), o = 200 * (t - n), [a, i, o];
};
mt.lab.xyz = function(r) {
  var e = r[0], t = r[1], n = r[2], a, i, o;
  i = (e + 16) / 116, a = t / 500 + i, o = i - n / 200;
  var s = Math.pow(i, 3), u = Math.pow(a, 3), f = Math.pow(o, 3);
  return i = s > 8856e-6 ? s : (i - 16 / 116) / 7.787, a = u > 8856e-6 ? u : (a - 16 / 116) / 7.787, o = f > 8856e-6 ? f : (o - 16 / 116) / 7.787, a *= 95.047, i *= 100, o *= 108.883, [a, i, o];
};
mt.lab.lch = function(r) {
  var e = r[0], t = r[1], n = r[2], a, i, o;
  return a = Math.atan2(n, t), i = a * 360 / 2 / Math.PI, i < 0 && (i += 360), o = Math.sqrt(t * t + n * n), [e, o, i];
};
mt.lch.lab = function(r) {
  var e = r[0], t = r[1], n = r[2], a, i, o;
  return o = n / 360 * 2 * Math.PI, a = t * Math.cos(o), i = t * Math.sin(o), [e, a, i];
};
mt.rgb.ansi16 = function(r) {
  var e = r[0], t = r[1], n = r[2], a = 1 in arguments ? arguments[1] : mt.rgb.hsv(r)[2];
  if (a = Math.round(a / 50), a === 0)
    return 30;
  var i = 30 + (Math.round(n / 255) << 2 | Math.round(t / 255) << 1 | Math.round(e / 255));
  return a === 2 && (i += 60), i;
};
mt.hsv.ansi16 = function(r) {
  return mt.rgb.ansi16(mt.hsv.rgb(r), r[2]);
};
mt.rgb.ansi256 = function(r) {
  var e = r[0], t = r[1], n = r[2];
  if (e === t && t === n)
    return e < 8 ? 16 : e > 248 ? 231 : Math.round((e - 8) / 247 * 24) + 232;
  var a = 16 + 36 * Math.round(e / 255 * 5) + 6 * Math.round(t / 255 * 5) + Math.round(n / 255 * 5);
  return a;
};
mt.ansi16.rgb = function(r) {
  var e = r % 10;
  if (e === 0 || e === 7)
    return r > 50 && (e += 3.5), e = e / 10.5 * 255, [e, e, e];
  var t = (~~(r > 50) + 1) * 0.5, n = (e & 1) * t * 255, a = (e >> 1 & 1) * t * 255, i = (e >> 2 & 1) * t * 255;
  return [n, a, i];
};
mt.ansi256.rgb = function(r) {
  if (r >= 232) {
    var e = (r - 232) * 10 + 8;
    return [e, e, e];
  }
  r -= 16;
  var t, n = Math.floor(r / 36) / 5 * 255, a = Math.floor((t = r % 36) / 6) / 5 * 255, i = t % 6 / 5 * 255;
  return [n, a, i];
};
mt.rgb.hex = function(r) {
  var e = ((Math.round(r[0]) & 255) << 16) + ((Math.round(r[1]) & 255) << 8) + (Math.round(r[2]) & 255), t = e.toString(16).toUpperCase();
  return "000000".substring(t.length) + t;
};
mt.hex.rgb = function(r) {
  var e = r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);
  if (!e)
    return [0, 0, 0];
  var t = e[0];
  e[0].length === 3 && (t = t.split("").map(function(s) {
    return s + s;
  }).join(""));
  var n = parseInt(t, 16), a = n >> 16 & 255, i = n >> 8 & 255, o = n & 255;
  return [a, i, o];
};
mt.rgb.hcg = function(r) {
  var e = r[0] / 255, t = r[1] / 255, n = r[2] / 255, a = Math.max(Math.max(e, t), n), i = Math.min(Math.min(e, t), n), o = a - i, s, u;
  return o < 1 ? s = i / (1 - o) : s = 0, o <= 0 ? u = 0 : a === e ? u = (t - n) / o % 6 : a === t ? u = 2 + (n - e) / o : u = 4 + (e - t) / o + 4, u /= 6, u %= 1, [u * 360, o * 100, s * 100];
};
mt.hsl.hcg = function(r) {
  var e = r[1] / 100, t = r[2] / 100, n = 1, a = 0;
  return t < 0.5 ? n = 2 * e * t : n = 2 * e * (1 - t), n < 1 && (a = (t - 0.5 * n) / (1 - n)), [r[0], n * 100, a * 100];
};
mt.hsv.hcg = function(r) {
  var e = r[1] / 100, t = r[2] / 100, n = e * t, a = 0;
  return n < 1 && (a = (t - n) / (1 - n)), [r[0], n * 100, a * 100];
};
mt.hcg.rgb = function(r) {
  var e = r[0] / 360, t = r[1] / 100, n = r[2] / 100;
  if (t === 0)
    return [n * 255, n * 255, n * 255];
  var a = [0, 0, 0], i = e % 1 * 6, o = i % 1, s = 1 - o, u = 0;
  switch (Math.floor(i)) {
    case 0:
      a[0] = 1, a[1] = o, a[2] = 0;
      break;
    case 1:
      a[0] = s, a[1] = 1, a[2] = 0;
      break;
    case 2:
      a[0] = 0, a[1] = 1, a[2] = o;
      break;
    case 3:
      a[0] = 0, a[1] = s, a[2] = 1;
      break;
    case 4:
      a[0] = o, a[1] = 0, a[2] = 1;
      break;
    default:
      a[0] = 1, a[1] = 0, a[2] = s;
  }
  return u = (1 - t) * n, [
    (t * a[0] + u) * 255,
    (t * a[1] + u) * 255,
    (t * a[2] + u) * 255
  ];
};
mt.hcg.hsv = function(r) {
  var e = r[1] / 100, t = r[2] / 100, n = e + t * (1 - e), a = 0;
  return n > 0 && (a = e / n), [r[0], a * 100, n * 100];
};
mt.hcg.hsl = function(r) {
  var e = r[1] / 100, t = r[2] / 100, n = t * (1 - e) + 0.5 * e, a = 0;
  return n > 0 && n < 0.5 ? a = e / (2 * n) : n >= 0.5 && n < 1 && (a = e / (2 * (1 - n))), [r[0], a * 100, n * 100];
};
mt.hcg.hwb = function(r) {
  var e = r[1] / 100, t = r[2] / 100, n = e + t * (1 - e);
  return [r[0], (n - e) * 100, (1 - n) * 100];
};
mt.hwb.hcg = function(r) {
  var e = r[1] / 100, t = r[2] / 100, n = 1 - t, a = n - e, i = 0;
  return a < 1 && (i = (n - a) / (1 - a)), [r[0], a * 100, i * 100];
};
mt.apple.rgb = function(r) {
  return [r[0] / 65535 * 255, r[1] / 65535 * 255, r[2] / 65535 * 255];
};
mt.rgb.apple = function(r) {
  return [r[0] / 255 * 65535, r[1] / 255 * 65535, r[2] / 255 * 65535];
};
mt.gray.rgb = function(r) {
  return [r[0] / 100 * 255, r[0] / 100 * 255, r[0] / 100 * 255];
};
mt.gray.hsl = mt.gray.hsv = function(r) {
  return [0, 0, r[0]];
};
mt.gray.hwb = function(r) {
  return [0, 100, r[0]];
};
mt.gray.cmyk = function(r) {
  return [0, 0, 0, r[0]];
};
mt.gray.lab = function(r) {
  return [r[0], 0, 0];
};
mt.gray.hex = function(r) {
  var e = Math.round(r[0] / 100 * 255) & 255, t = (e << 16) + (e << 8) + e, n = t.toString(16).toUpperCase();
  return "000000".substring(n.length) + n;
};
mt.rgb.gray = function(r) {
  var e = (r[0] + r[1] + r[2]) / 3;
  return [e / 255 * 100];
};
var zT = FT.exports, Lh = zT;
function pW() {
  for (var r = {}, e = Object.keys(Lh), t = e.length, n = 0; n < t; n++)
    r[e[n]] = {
      // http://jsperf.com/1-vs-infinity
      // micro-opt, but this is simple.
      distance: -1,
      parent: null
    };
  return r;
}
function gW(r) {
  var e = pW(), t = [r];
  for (e[r].distance = 0; t.length; )
    for (var n = t.pop(), a = Object.keys(Lh[n]), i = a.length, o = 0; o < i; o++) {
      var s = a[o], u = e[s];
      u.distance === -1 && (u.distance = e[n].distance + 1, u.parent = n, t.unshift(s));
    }
  return e;
}
function yW(r, e) {
  return function(t) {
    return e(r(t));
  };
}
function mW(r, e) {
  for (var t = [e[r].parent, r], n = Lh[e[r].parent][r], a = e[r].parent; e[a].parent; )
    t.unshift(e[a].parent), n = yW(Lh[e[a].parent][a], n), a = e[a].parent;
  return n.conversion = t, n;
}
var bW = function(r) {
  for (var e = gW(r), t = {}, n = Object.keys(e), a = n.length, i = 0; i < a; i++) {
    var o = n[i], s = e[o];
    s.parent !== null && (t[o] = mW(o, e));
  }
  return t;
}, og = zT, EW = bW, Ls = {}, xW = Object.keys(og);
function wW(r) {
  var e = function(t) {
    return t == null ? t : (arguments.length > 1 && (t = Array.prototype.slice.call(arguments)), r(t));
  };
  return "conversion" in r && (e.conversion = r.conversion), e;
}
function _W(r) {
  var e = function(t) {
    if (t == null)
      return t;
    arguments.length > 1 && (t = Array.prototype.slice.call(arguments));
    var n = r(t);
    if (typeof n == "object")
      for (var a = n.length, i = 0; i < a; i++)
        n[i] = Math.round(n[i]);
    return n;
  };
  return "conversion" in r && (e.conversion = r.conversion), e;
}
xW.forEach(function(r) {
  Ls[r] = {}, Object.defineProperty(Ls[r], "channels", { value: og[r].channels }), Object.defineProperty(Ls[r], "labels", { value: og[r].labels });
  var e = EW(r), t = Object.keys(e);
  t.forEach(function(n) {
    var a = e[n];
    Ls[r][n] = _W(a), Ls[r][n].raw = wW(a);
  });
});
var MW = Ls, sf = lW, jn = MW, Vy = [].slice, UT = [
  // to be honest, I don't really feel like keyword belongs in color convert, but eh.
  "keyword",
  // gray conflicts with some method names, and has its own method defined.
  "gray",
  // shouldn't really be in color-convert either...
  "hex"
], sg = {};
Object.keys(jn).forEach(function(r) {
  sg[Vy.call(jn[r].labels).sort().join("")] = r;
});
var Nh = {};
function gn(r, e) {
  if (!(this instanceof gn))
    return new gn(r, e);
  if (e && e in UT && (e = null), e && !(e in jn))
    throw new Error("Unknown model: " + e);
  var t, n;
  if (r == null)
    this.model = "rgb", this.color = [0, 0, 0], this.valpha = 1;
  else if (r instanceof gn)
    this.model = r.model, this.color = r.color.slice(), this.valpha = r.valpha;
  else if (typeof r == "string") {
    var a = sf.get(r);
    if (a === null)
      throw new Error("Unable to parse color from string: " + r);
    this.model = a.model, n = jn[this.model].channels, this.color = a.value.slice(0, n), this.valpha = typeof a.value[n] == "number" ? a.value[n] : 1;
  } else if (r.length) {
    this.model = e || "rgb", n = jn[this.model].channels;
    var i = Vy.call(r, 0, n);
    this.color = ug(i, n), this.valpha = typeof r[n] == "number" ? r[n] : 1;
  } else if (typeof r == "number")
    r &= 16777215, this.model = "rgb", this.color = [
      r >> 16 & 255,
      r >> 8 & 255,
      r & 255
    ], this.valpha = 1;
  else {
    this.valpha = 1;
    var o = Object.keys(r);
    "alpha" in r && (o.splice(o.indexOf("alpha"), 1), this.valpha = typeof r.alpha == "number" ? r.alpha : 0);
    var s = o.sort().join("");
    if (!(s in sg))
      throw new Error("Unable to parse color from object: " + JSON.stringify(r));
    this.model = sg[s];
    var u = jn[this.model].labels, f = [];
    for (t = 0; t < u.length; t++)
      f.push(r[u[t]]);
    this.color = ug(f);
  }
  if (Nh[this.model])
    for (n = jn[this.model].channels, t = 0; t < n; t++) {
      var l = Nh[this.model][t];
      l && (this.color[t] = l(this.color[t]));
    }
  this.valpha = Math.max(0, Math.min(1, this.valpha)), Object.freeze && Object.freeze(this);
}
gn.prototype = {
  toString: function() {
    return this.string();
  },
  toJSON: function() {
    return this[this.model]();
  },
  string: function(r) {
    var e = this.model in sf.to ? this : this.rgb();
    e = e.round(typeof r == "number" ? r : 1);
    var t = e.valpha === 1 ? e.color : e.color.concat(this.valpha);
    return sf.to[e.model](t);
  },
  percentString: function(r) {
    var e = this.rgb().round(typeof r == "number" ? r : 1), t = e.valpha === 1 ? e.color : e.color.concat(this.valpha);
    return sf.to.rgb.percent(t);
  },
  array: function() {
    return this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);
  },
  object: function() {
    for (var r = {}, e = jn[this.model].channels, t = jn[this.model].labels, n = 0; n < e; n++)
      r[t[n]] = this.color[n];
    return this.valpha !== 1 && (r.alpha = this.valpha), r;
  },
  unitArray: function() {
    var r = this.rgb().color;
    return r[0] /= 255, r[1] /= 255, r[2] /= 255, this.valpha !== 1 && r.push(this.valpha), r;
  },
  unitObject: function() {
    var r = this.rgb().object();
    return r.r /= 255, r.g /= 255, r.b /= 255, this.valpha !== 1 && (r.alpha = this.valpha), r;
  },
  round: function(r) {
    return r = Math.max(r || 0, 0), new gn(this.color.map(AW(r)).concat(this.valpha), this.model);
  },
  alpha: function(r) {
    return arguments.length ? new gn(this.color.concat(Math.max(0, Math.min(1, r))), this.model) : this.valpha;
  },
  // rgb
  red: Rr("rgb", 0, Qr(255)),
  green: Rr("rgb", 1, Qr(255)),
  blue: Rr("rgb", 2, Qr(255)),
  hue: Rr(["hsl", "hsv", "hsl", "hwb", "hcg"], 0, function(r) {
    return (r % 360 + 360) % 360;
  }),
  // eslint-disable-line brace-style
  saturationl: Rr("hsl", 1, Qr(100)),
  lightness: Rr("hsl", 2, Qr(100)),
  saturationv: Rr("hsv", 1, Qr(100)),
  value: Rr("hsv", 2, Qr(100)),
  chroma: Rr("hcg", 1, Qr(100)),
  gray: Rr("hcg", 2, Qr(100)),
  white: Rr("hwb", 1, Qr(100)),
  wblack: Rr("hwb", 2, Qr(100)),
  cyan: Rr("cmyk", 0, Qr(100)),
  magenta: Rr("cmyk", 1, Qr(100)),
  yellow: Rr("cmyk", 2, Qr(100)),
  black: Rr("cmyk", 3, Qr(100)),
  x: Rr("xyz", 0, Qr(100)),
  y: Rr("xyz", 1, Qr(100)),
  z: Rr("xyz", 2, Qr(100)),
  l: Rr("lab", 0, Qr(100)),
  a: Rr("lab", 1),
  b: Rr("lab", 2),
  keyword: function(r) {
    return arguments.length ? new gn(r) : jn[this.model].keyword(this.color);
  },
  hex: function(r) {
    return arguments.length ? new gn(r) : sf.to.hex(this.rgb().round().color);
  },
  rgbNumber: function() {
    var r = this.rgb().color;
    return (r[0] & 255) << 16 | (r[1] & 255) << 8 | r[2] & 255;
  },
  luminosity: function() {
    for (var r = this.rgb().color, e = [], t = 0; t < r.length; t++) {
      var n = r[t] / 255;
      e[t] = n <= 0.03928 ? n / 12.92 : Math.pow((n + 0.055) / 1.055, 2.4);
    }
    return 0.2126 * e[0] + 0.7152 * e[1] + 0.0722 * e[2];
  },
  contrast: function(r) {
    var e = this.luminosity(), t = r.luminosity();
    return e > t ? (e + 0.05) / (t + 0.05) : (t + 0.05) / (e + 0.05);
  },
  level: function(r) {
    var e = this.contrast(r);
    return e >= 7.1 ? "AAA" : e >= 4.5 ? "AA" : "";
  },
  isDark: function() {
    var r = this.rgb().color, e = (r[0] * 299 + r[1] * 587 + r[2] * 114) / 1e3;
    return e < 128;
  },
  isLight: function() {
    return !this.isDark();
  },
  negate: function() {
    for (var r = this.rgb(), e = 0; e < 3; e++)
      r.color[e] = 255 - r.color[e];
    return r;
  },
  lighten: function(r) {
    var e = this.hsl();
    return e.color[2] += e.color[2] * r, e;
  },
  darken: function(r) {
    var e = this.hsl();
    return e.color[2] -= e.color[2] * r, e;
  },
  saturate: function(r) {
    var e = this.hsl();
    return e.color[1] += e.color[1] * r, e;
  },
  desaturate: function(r) {
    var e = this.hsl();
    return e.color[1] -= e.color[1] * r, e;
  },
  whiten: function(r) {
    var e = this.hwb();
    return e.color[1] += e.color[1] * r, e;
  },
  blacken: function(r) {
    var e = this.hwb();
    return e.color[2] += e.color[2] * r, e;
  },
  grayscale: function() {
    var r = this.rgb().color, e = r[0] * 0.3 + r[1] * 0.59 + r[2] * 0.11;
    return gn.rgb(e, e, e);
  },
  fade: function(r) {
    return this.alpha(this.valpha - this.valpha * r);
  },
  opaquer: function(r) {
    return this.alpha(this.valpha + this.valpha * r);
  },
  rotate: function(r) {
    var e = this.hsl(), t = e.color[0];
    return t = (t + r) % 360, t = t < 0 ? 360 + t : t, e.color[0] = t, e;
  },
  mix: function(r, e) {
    if (!r || !r.rgb)
      throw new Error('Argument to "mix" was not a Color instance, but rather an instance of ' + typeof r);
    var t = r.rgb(), n = this.rgb(), a = e === void 0 ? 0.5 : e, i = 2 * a - 1, o = t.alpha() - n.alpha(), s = ((i * o === -1 ? i : (i + o) / (1 + i * o)) + 1) / 2, u = 1 - s;
    return gn.rgb(
      s * t.red() + u * n.red(),
      s * t.green() + u * n.green(),
      s * t.blue() + u * n.blue(),
      t.alpha() * a + n.alpha() * (1 - a)
    );
  }
};
Object.keys(jn).forEach(function(r) {
  if (UT.indexOf(r) === -1) {
    var e = jn[r].channels;
    gn.prototype[r] = function() {
      if (this.model === r)
        return new gn(this);
      if (arguments.length)
        return new gn(arguments, r);
      var t = typeof arguments[e] == "number" ? e : this.valpha;
      return new gn(CW(jn[this.model][r].raw(this.color)).concat(t), r);
    }, gn[r] = function(t) {
      return typeof t == "number" && (t = ug(Vy.call(arguments), e)), new gn(t, r);
    };
  }
});
function SW(r, e) {
  return Number(r.toFixed(e));
}
function AW(r) {
  return function(e) {
    return SW(e, r);
  };
}
function Rr(r, e, t) {
  return r = Array.isArray(r) ? r : [r], r.forEach(function(n) {
    (Nh[n] || (Nh[n] = []))[e] = t;
  }), r = r[0], function(n) {
    var a;
    return arguments.length ? (t && (n = t(n)), a = this[r](), a.color[e] = n, a) : (a = this[r]().color[e], t && (a = t(a)), a);
  };
}
function Qr(r) {
  return function(e) {
    return Math.max(0, Math.min(r, e));
  };
}
function CW(r) {
  return Array.isArray(r) ? r : [r];
}
function ug(r, e) {
  for (var t = 0; t < e; t++)
    typeof r[t] != "number" && (r[t] = 0);
  return r;
}
var TW = gn;
const yf = /* @__PURE__ */ Ai(TW);
function Ph(r) {
  "@babel/helpers - typeof";
  return Ph = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Ph(r);
}
var IW = /^\s+/, OW = /\s+$/;
function Et(r, e) {
  if (r = r || "", e = e || {}, r instanceof Et)
    return r;
  if (!(this instanceof Et))
    return new Et(r, e);
  var t = DW(r);
  this._originalInput = r, this._r = t.r, this._g = t.g, this._b = t.b, this._a = t.a, this._roundA = Math.round(100 * this._a) / 100, this._format = e.format || t.format, this._gradientType = e.gradientType, this._r < 1 && (this._r = Math.round(this._r)), this._g < 1 && (this._g = Math.round(this._g)), this._b < 1 && (this._b = Math.round(this._b)), this._ok = t.ok;
}
Et.prototype = {
  isDark: function() {
    return this.getBrightness() < 128;
  },
  isLight: function() {
    return !this.isDark();
  },
  isValid: function() {
    return this._ok;
  },
  getOriginalInput: function() {
    return this._originalInput;
  },
  getFormat: function() {
    return this._format;
  },
  getAlpha: function() {
    return this._a;
  },
  getBrightness: function() {
    var e = this.toRgb();
    return (e.r * 299 + e.g * 587 + e.b * 114) / 1e3;
  },
  getLuminance: function() {
    var e = this.toRgb(), t, n, a, i, o, s;
    return t = e.r / 255, n = e.g / 255, a = e.b / 255, t <= 0.03928 ? i = t / 12.92 : i = Math.pow((t + 0.055) / 1.055, 2.4), n <= 0.03928 ? o = n / 12.92 : o = Math.pow((n + 0.055) / 1.055, 2.4), a <= 0.03928 ? s = a / 12.92 : s = Math.pow((a + 0.055) / 1.055, 2.4), 0.2126 * i + 0.7152 * o + 0.0722 * s;
  },
  setAlpha: function(e) {
    return this._a = jT(e), this._roundA = Math.round(100 * this._a) / 100, this;
  },
  toHsv: function() {
    var e = aw(this._r, this._g, this._b);
    return {
      h: e.h * 360,
      s: e.s,
      v: e.v,
      a: this._a
    };
  },
  toHsvString: function() {
    var e = aw(this._r, this._g, this._b), t = Math.round(e.h * 360), n = Math.round(e.s * 100), a = Math.round(e.v * 100);
    return this._a == 1 ? "hsv(" + t + ", " + n + "%, " + a + "%)" : "hsva(" + t + ", " + n + "%, " + a + "%, " + this._roundA + ")";
  },
  toHsl: function() {
    var e = nw(this._r, this._g, this._b);
    return {
      h: e.h * 360,
      s: e.s,
      l: e.l,
      a: this._a
    };
  },
  toHslString: function() {
    var e = nw(this._r, this._g, this._b), t = Math.round(e.h * 360), n = Math.round(e.s * 100), a = Math.round(e.l * 100);
    return this._a == 1 ? "hsl(" + t + ", " + n + "%, " + a + "%)" : "hsla(" + t + ", " + n + "%, " + a + "%, " + this._roundA + ")";
  },
  toHex: function(e) {
    return iw(this._r, this._g, this._b, e);
  },
  toHexString: function(e) {
    return "#" + this.toHex(e);
  },
  toHex8: function(e) {
    return kW(this._r, this._g, this._b, this._a, e);
  },
  toHex8String: function(e) {
    return "#" + this.toHex8(e);
  },
  toRgb: function() {
    return {
      r: Math.round(this._r),
      g: Math.round(this._g),
      b: Math.round(this._b),
      a: this._a
    };
  },
  toRgbString: function() {
    return this._a == 1 ? "rgb(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ")" : "rgba(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ", " + this._roundA + ")";
  },
  toPercentageRgb: function() {
    return {
      r: Math.round(_r(this._r, 255) * 100) + "%",
      g: Math.round(_r(this._g, 255) * 100) + "%",
      b: Math.round(_r(this._b, 255) * 100) + "%",
      a: this._a
    };
  },
  toPercentageRgbString: function() {
    return this._a == 1 ? "rgb(" + Math.round(_r(this._r, 255) * 100) + "%, " + Math.round(_r(this._g, 255) * 100) + "%, " + Math.round(_r(this._b, 255) * 100) + "%)" : "rgba(" + Math.round(_r(this._r, 255) * 100) + "%, " + Math.round(_r(this._g, 255) * 100) + "%, " + Math.round(_r(this._b, 255) * 100) + "%, " + this._roundA + ")";
  },
  toName: function() {
    return this._a === 0 ? "transparent" : this._a < 1 ? !1 : YW[iw(this._r, this._g, this._b, !0)] || !1;
  },
  toFilter: function(e) {
    var t = "#" + ow(this._r, this._g, this._b, this._a), n = t, a = this._gradientType ? "GradientType = 1, " : "";
    if (e) {
      var i = Et(e);
      n = "#" + ow(i._r, i._g, i._b, i._a);
    }
    return "progid:DXImageTransform.Microsoft.gradient(" + a + "startColorstr=" + t + ",endColorstr=" + n + ")";
  },
  toString: function(e) {
    var t = !!e;
    e = e || this._format;
    var n = !1, a = this._a < 1 && this._a >= 0, i = !t && a && (e === "hex" || e === "hex6" || e === "hex3" || e === "hex4" || e === "hex8" || e === "name");
    return i ? e === "name" && this._a === 0 ? this.toName() : this.toRgbString() : (e === "rgb" && (n = this.toRgbString()), e === "prgb" && (n = this.toPercentageRgbString()), (e === "hex" || e === "hex6") && (n = this.toHexString()), e === "hex3" && (n = this.toHexString(!0)), e === "hex4" && (n = this.toHex8String(!0)), e === "hex8" && (n = this.toHex8String()), e === "name" && (n = this.toName()), e === "hsl" && (n = this.toHslString()), e === "hsv" && (n = this.toHsvString()), n || this.toHexString());
  },
  clone: function() {
    return Et(this.toString());
  },
  _applyModification: function(e, t) {
    var n = e.apply(null, [this].concat([].slice.call(t)));
    return this._r = n._r, this._g = n._g, this._b = n._b, this.setAlpha(n._a), this;
  },
  lighten: function() {
    return this._applyModification(GW, arguments);
  },
  brighten: function() {
    return this._applyModification(zW, arguments);
  },
  darken: function() {
    return this._applyModification(UW, arguments);
  },
  desaturate: function() {
    return this._applyModification(RW, arguments);
  },
  saturate: function() {
    return this._applyModification(BW, arguments);
  },
  greyscale: function() {
    return this._applyModification(FW, arguments);
  },
  spin: function() {
    return this._applyModification(jW, arguments);
  },
  _applyCombination: function(e, t) {
    return e.apply(null, [this].concat([].slice.call(t)));
  },
  analogous: function() {
    return this._applyCombination(XW, arguments);
  },
  complement: function() {
    return this._applyCombination($W, arguments);
  },
  monochromatic: function() {
    return this._applyCombination(VW, arguments);
  },
  splitcomplement: function() {
    return this._applyCombination(WW, arguments);
  },
  // Disabled until https://github.com/bgrins/TinyColor/issues/254
  // polyad: function (number) {
  //   return this._applyCombination(polyad, [number]);
  // },
  triad: function() {
    return this._applyCombination(sw, [3]);
  },
  tetrad: function() {
    return this._applyCombination(sw, [4]);
  }
};
Et.fromRatio = function(r, e) {
  if (Ph(r) == "object") {
    var t = {};
    for (var n in r)
      r.hasOwnProperty(n) && (n === "a" ? t[n] = r[n] : t[n] = uf(r[n]));
    r = t;
  }
  return Et(r, e);
};
function DW(r) {
  var e = {
    r: 0,
    g: 0,
    b: 0
  }, t = 1, n = null, a = null, i = null, o = !1, s = !1;
  return typeof r == "string" && (r = ZW(r)), Ph(r) == "object" && (di(r.r) && di(r.g) && di(r.b) ? (e = LW(r.r, r.g, r.b), o = !0, s = String(r.r).substr(-1) === "%" ? "prgb" : "rgb") : di(r.h) && di(r.s) && di(r.v) ? (n = uf(r.s), a = uf(r.v), e = PW(r.h, n, a), o = !0, s = "hsv") : di(r.h) && di(r.s) && di(r.l) && (n = uf(r.s), i = uf(r.l), e = NW(r.h, n, i), o = !0, s = "hsl"), r.hasOwnProperty("a") && (t = r.a)), t = jT(t), {
    ok: o,
    format: r.format || s,
    r: Math.min(255, Math.max(e.r, 0)),
    g: Math.min(255, Math.max(e.g, 0)),
    b: Math.min(255, Math.max(e.b, 0)),
    a: t
  };
}
function LW(r, e, t) {
  return {
    r: _r(r, 255) * 255,
    g: _r(e, 255) * 255,
    b: _r(t, 255) * 255
  };
}
function nw(r, e, t) {
  r = _r(r, 255), e = _r(e, 255), t = _r(t, 255);
  var n = Math.max(r, e, t), a = Math.min(r, e, t), i, o, s = (n + a) / 2;
  if (n == a)
    i = o = 0;
  else {
    var u = n - a;
    switch (o = s > 0.5 ? u / (2 - n - a) : u / (n + a), n) {
      case r:
        i = (e - t) / u + (e < t ? 6 : 0);
        break;
      case e:
        i = (t - r) / u + 2;
        break;
      case t:
        i = (r - e) / u + 4;
        break;
    }
    i /= 6;
  }
  return {
    h: i,
    s: o,
    l: s
  };
}
function NW(r, e, t) {
  var n, a, i;
  r = _r(r, 360), e = _r(e, 100), t = _r(t, 100);
  function o(f, l, c) {
    return c < 0 && (c += 1), c > 1 && (c -= 1), c < 1 / 6 ? f + (l - f) * 6 * c : c < 1 / 2 ? l : c < 2 / 3 ? f + (l - f) * (2 / 3 - c) * 6 : f;
  }
  if (e === 0)
    n = a = i = t;
  else {
    var s = t < 0.5 ? t * (1 + e) : t + e - t * e, u = 2 * t - s;
    n = o(u, s, r + 1 / 3), a = o(u, s, r), i = o(u, s, r - 1 / 3);
  }
  return {
    r: n * 255,
    g: a * 255,
    b: i * 255
  };
}
function aw(r, e, t) {
  r = _r(r, 255), e = _r(e, 255), t = _r(t, 255);
  var n = Math.max(r, e, t), a = Math.min(r, e, t), i, o, s = n, u = n - a;
  if (o = n === 0 ? 0 : u / n, n == a)
    i = 0;
  else {
    switch (n) {
      case r:
        i = (e - t) / u + (e < t ? 6 : 0);
        break;
      case e:
        i = (t - r) / u + 2;
        break;
      case t:
        i = (r - e) / u + 4;
        break;
    }
    i /= 6;
  }
  return {
    h: i,
    s: o,
    v: s
  };
}
function PW(r, e, t) {
  r = _r(r, 360) * 6, e = _r(e, 100), t = _r(t, 100);
  var n = Math.floor(r), a = r - n, i = t * (1 - e), o = t * (1 - a * e), s = t * (1 - (1 - a) * e), u = n % 6, f = [t, o, i, i, s, t][u], l = [s, t, t, o, i, i][u], c = [i, i, s, t, t, o][u];
  return {
    r: f * 255,
    g: l * 255,
    b: c * 255
  };
}
function iw(r, e, t, n) {
  var a = [ba(Math.round(r).toString(16)), ba(Math.round(e).toString(16)), ba(Math.round(t).toString(16))];
  return n && a[0].charAt(0) == a[0].charAt(1) && a[1].charAt(0) == a[1].charAt(1) && a[2].charAt(0) == a[2].charAt(1) ? a[0].charAt(0) + a[1].charAt(0) + a[2].charAt(0) : a.join("");
}
function kW(r, e, t, n, a) {
  var i = [ba(Math.round(r).toString(16)), ba(Math.round(e).toString(16)), ba(Math.round(t).toString(16)), ba($T(n))];
  return a && i[0].charAt(0) == i[0].charAt(1) && i[1].charAt(0) == i[1].charAt(1) && i[2].charAt(0) == i[2].charAt(1) && i[3].charAt(0) == i[3].charAt(1) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) + i[3].charAt(0) : i.join("");
}
function ow(r, e, t, n) {
  var a = [ba($T(n)), ba(Math.round(r).toString(16)), ba(Math.round(e).toString(16)), ba(Math.round(t).toString(16))];
  return a.join("");
}
Et.equals = function(r, e) {
  return !r || !e ? !1 : Et(r).toRgbString() == Et(e).toRgbString();
};
Et.random = function() {
  return Et.fromRatio({
    r: Math.random(),
    g: Math.random(),
    b: Math.random()
  });
};
function RW(r, e) {
  e = e === 0 ? 0 : e || 10;
  var t = Et(r).toHsl();
  return t.s -= e / 100, t.s = _d(t.s), Et(t);
}
function BW(r, e) {
  e = e === 0 ? 0 : e || 10;
  var t = Et(r).toHsl();
  return t.s += e / 100, t.s = _d(t.s), Et(t);
}
function FW(r) {
  return Et(r).desaturate(100);
}
function GW(r, e) {
  e = e === 0 ? 0 : e || 10;
  var t = Et(r).toHsl();
  return t.l += e / 100, t.l = _d(t.l), Et(t);
}
function zW(r, e) {
  e = e === 0 ? 0 : e || 10;
  var t = Et(r).toRgb();
  return t.r = Math.max(0, Math.min(255, t.r - Math.round(255 * -(e / 100)))), t.g = Math.max(0, Math.min(255, t.g - Math.round(255 * -(e / 100)))), t.b = Math.max(0, Math.min(255, t.b - Math.round(255 * -(e / 100)))), Et(t);
}
function UW(r, e) {
  e = e === 0 ? 0 : e || 10;
  var t = Et(r).toHsl();
  return t.l -= e / 100, t.l = _d(t.l), Et(t);
}
function jW(r, e) {
  var t = Et(r).toHsl(), n = (t.h + e) % 360;
  return t.h = n < 0 ? 360 + n : n, Et(t);
}
function $W(r) {
  var e = Et(r).toHsl();
  return e.h = (e.h + 180) % 360, Et(e);
}
function sw(r, e) {
  if (isNaN(e) || e <= 0)
    throw new Error("Argument to polyad must be a positive number");
  for (var t = Et(r).toHsl(), n = [Et(r)], a = 360 / e, i = 1; i < e; i++)
    n.push(Et({
      h: (t.h + i * a) % 360,
      s: t.s,
      l: t.l
    }));
  return n;
}
function WW(r) {
  var e = Et(r).toHsl(), t = e.h;
  return [Et(r), Et({
    h: (t + 72) % 360,
    s: e.s,
    l: e.l
  }), Et({
    h: (t + 216) % 360,
    s: e.s,
    l: e.l
  })];
}
function XW(r, e, t) {
  e = e || 6, t = t || 30;
  var n = Et(r).toHsl(), a = 360 / t, i = [Et(r)];
  for (n.h = (n.h - (a * e >> 1) + 720) % 360; --e; )
    n.h = (n.h + a) % 360, i.push(Et(n));
  return i;
}
function VW(r, e) {
  e = e || 6;
  for (var t = Et(r).toHsv(), n = t.h, a = t.s, i = t.v, o = [], s = 1 / e; e--; )
    o.push(Et({
      h: n,
      s: a,
      v: i
    })), i = (i + s) % 1;
  return o;
}
Et.mix = function(r, e, t) {
  t = t === 0 ? 0 : t || 50;
  var n = Et(r).toRgb(), a = Et(e).toRgb(), i = t / 100, o = {
    r: (a.r - n.r) * i + n.r,
    g: (a.g - n.g) * i + n.g,
    b: (a.b - n.b) * i + n.b,
    a: (a.a - n.a) * i + n.a
  };
  return Et(o);
};
Et.readability = function(r, e) {
  var t = Et(r), n = Et(e);
  return (Math.max(t.getLuminance(), n.getLuminance()) + 0.05) / (Math.min(t.getLuminance(), n.getLuminance()) + 0.05);
};
Et.isReadable = function(r, e, t) {
  var n = Et.readability(r, e), a, i;
  switch (i = !1, a = QW(t), a.level + a.size) {
    case "AAsmall":
    case "AAAlarge":
      i = n >= 4.5;
      break;
    case "AAlarge":
      i = n >= 3;
      break;
    case "AAAsmall":
      i = n >= 7;
      break;
  }
  return i;
};
Et.mostReadable = function(r, e, t) {
  var n = null, a = 0, i, o, s, u;
  t = t || {}, o = t.includeFallbackColors, s = t.level, u = t.size;
  for (var f = 0; f < e.length; f++)
    i = Et.readability(r, e[f]), i > a && (a = i, n = Et(e[f]));
  return Et.isReadable(r, n, {
    level: s,
    size: u
  }) || !o ? n : (t.includeFallbackColors = !1, Et.mostReadable(r, ["#fff", "#000"], t));
};
var fg = Et.names = {
  aliceblue: "f0f8ff",
  antiquewhite: "faebd7",
  aqua: "0ff",
  aquamarine: "7fffd4",
  azure: "f0ffff",
  beige: "f5f5dc",
  bisque: "ffe4c4",
  black: "000",
  blanchedalmond: "ffebcd",
  blue: "00f",
  blueviolet: "8a2be2",
  brown: "a52a2a",
  burlywood: "deb887",
  burntsienna: "ea7e5d",
  cadetblue: "5f9ea0",
  chartreuse: "7fff00",
  chocolate: "d2691e",
  coral: "ff7f50",
  cornflowerblue: "6495ed",
  cornsilk: "fff8dc",
  crimson: "dc143c",
  cyan: "0ff",
  darkblue: "00008b",
  darkcyan: "008b8b",
  darkgoldenrod: "b8860b",
  darkgray: "a9a9a9",
  darkgreen: "006400",
  darkgrey: "a9a9a9",
  darkkhaki: "bdb76b",
  darkmagenta: "8b008b",
  darkolivegreen: "556b2f",
  darkorange: "ff8c00",
  darkorchid: "9932cc",
  darkred: "8b0000",
  darksalmon: "e9967a",
  darkseagreen: "8fbc8f",
  darkslateblue: "483d8b",
  darkslategray: "2f4f4f",
  darkslategrey: "2f4f4f",
  darkturquoise: "00ced1",
  darkviolet: "9400d3",
  deeppink: "ff1493",
  deepskyblue: "00bfff",
  dimgray: "696969",
  dimgrey: "696969",
  dodgerblue: "1e90ff",
  firebrick: "b22222",
  floralwhite: "fffaf0",
  forestgreen: "228b22",
  fuchsia: "f0f",
  gainsboro: "dcdcdc",
  ghostwhite: "f8f8ff",
  gold: "ffd700",
  goldenrod: "daa520",
  gray: "808080",
  green: "008000",
  greenyellow: "adff2f",
  grey: "808080",
  honeydew: "f0fff0",
  hotpink: "ff69b4",
  indianred: "cd5c5c",
  indigo: "4b0082",
  ivory: "fffff0",
  khaki: "f0e68c",
  lavender: "e6e6fa",
  lavenderblush: "fff0f5",
  lawngreen: "7cfc00",
  lemonchiffon: "fffacd",
  lightblue: "add8e6",
  lightcoral: "f08080",
  lightcyan: "e0ffff",
  lightgoldenrodyellow: "fafad2",
  lightgray: "d3d3d3",
  lightgreen: "90ee90",
  lightgrey: "d3d3d3",
  lightpink: "ffb6c1",
  lightsalmon: "ffa07a",
  lightseagreen: "20b2aa",
  lightskyblue: "87cefa",
  lightslategray: "789",
  lightslategrey: "789",
  lightsteelblue: "b0c4de",
  lightyellow: "ffffe0",
  lime: "0f0",
  limegreen: "32cd32",
  linen: "faf0e6",
  magenta: "f0f",
  maroon: "800000",
  mediumaquamarine: "66cdaa",
  mediumblue: "0000cd",
  mediumorchid: "ba55d3",
  mediumpurple: "9370db",
  mediumseagreen: "3cb371",
  mediumslateblue: "7b68ee",
  mediumspringgreen: "00fa9a",
  mediumturquoise: "48d1cc",
  mediumvioletred: "c71585",
  midnightblue: "191970",
  mintcream: "f5fffa",
  mistyrose: "ffe4e1",
  moccasin: "ffe4b5",
  navajowhite: "ffdead",
  navy: "000080",
  oldlace: "fdf5e6",
  olive: "808000",
  olivedrab: "6b8e23",
  orange: "ffa500",
  orangered: "ff4500",
  orchid: "da70d6",
  palegoldenrod: "eee8aa",
  palegreen: "98fb98",
  paleturquoise: "afeeee",
  palevioletred: "db7093",
  papayawhip: "ffefd5",
  peachpuff: "ffdab9",
  peru: "cd853f",
  pink: "ffc0cb",
  plum: "dda0dd",
  powderblue: "b0e0e6",
  purple: "800080",
  rebeccapurple: "663399",
  red: "f00",
  rosybrown: "bc8f8f",
  royalblue: "4169e1",
  saddlebrown: "8b4513",
  salmon: "fa8072",
  sandybrown: "f4a460",
  seagreen: "2e8b57",
  seashell: "fff5ee",
  sienna: "a0522d",
  silver: "c0c0c0",
  skyblue: "87ceeb",
  slateblue: "6a5acd",
  slategray: "708090",
  slategrey: "708090",
  snow: "fffafa",
  springgreen: "00ff7f",
  steelblue: "4682b4",
  tan: "d2b48c",
  teal: "008080",
  thistle: "d8bfd8",
  tomato: "ff6347",
  turquoise: "40e0d0",
  violet: "ee82ee",
  wheat: "f5deb3",
  white: "fff",
  whitesmoke: "f5f5f5",
  yellow: "ff0",
  yellowgreen: "9acd32"
}, YW = Et.hexNames = HW(fg);
function HW(r) {
  var e = {};
  for (var t in r)
    r.hasOwnProperty(t) && (e[r[t]] = t);
  return e;
}
function jT(r) {
  return r = parseFloat(r), (isNaN(r) || r < 0 || r > 1) && (r = 1), r;
}
function _r(r, e) {
  KW(r) && (r = "100%");
  var t = qW(r);
  return r = Math.min(e, Math.max(0, parseFloat(r))), t && (r = parseInt(r * e, 10) / 100), Math.abs(r - e) < 1e-6 ? 1 : r % e / parseFloat(e);
}
function _d(r) {
  return Math.min(1, Math.max(0, r));
}
function Gn(r) {
  return parseInt(r, 16);
}
function KW(r) {
  return typeof r == "string" && r.indexOf(".") != -1 && parseFloat(r) === 1;
}
function qW(r) {
  return typeof r == "string" && r.indexOf("%") != -1;
}
function ba(r) {
  return r.length == 1 ? "0" + r : "" + r;
}
function uf(r) {
  return r <= 1 && (r = r * 100 + "%"), r;
}
function $T(r) {
  return Math.round(parseFloat(r) * 255).toString(16);
}
function uw(r) {
  return Gn(r) / 255;
}
var va = function() {
  var r = "[-\\+]?\\d+%?", e = "[-\\+]?\\d*\\.\\d+%?", t = "(?:" + e + ")|(?:" + r + ")", n = "[\\s|\\(]+(" + t + ")[,|\\s]+(" + t + ")[,|\\s]+(" + t + ")\\s*\\)?", a = "[\\s|\\(]+(" + t + ")[,|\\s]+(" + t + ")[,|\\s]+(" + t + ")[,|\\s]+(" + t + ")\\s*\\)?";
  return {
    CSS_UNIT: new RegExp(t),
    rgb: new RegExp("rgb" + n),
    rgba: new RegExp("rgba" + a),
    hsl: new RegExp("hsl" + n),
    hsla: new RegExp("hsla" + a),
    hsv: new RegExp("hsv" + n),
    hsva: new RegExp("hsva" + a),
    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
  };
}();
function di(r) {
  return !!va.CSS_UNIT.exec(r);
}
function ZW(r) {
  r = r.replace(IW, "").replace(OW, "").toLowerCase();
  var e = !1;
  if (fg[r])
    r = fg[r], e = !0;
  else if (r == "transparent")
    return {
      r: 0,
      g: 0,
      b: 0,
      a: 0,
      format: "name"
    };
  var t;
  return (t = va.rgb.exec(r)) ? {
    r: t[1],
    g: t[2],
    b: t[3]
  } : (t = va.rgba.exec(r)) ? {
    r: t[1],
    g: t[2],
    b: t[3],
    a: t[4]
  } : (t = va.hsl.exec(r)) ? {
    h: t[1],
    s: t[2],
    l: t[3]
  } : (t = va.hsla.exec(r)) ? {
    h: t[1],
    s: t[2],
    l: t[3],
    a: t[4]
  } : (t = va.hsv.exec(r)) ? {
    h: t[1],
    s: t[2],
    v: t[3]
  } : (t = va.hsva.exec(r)) ? {
    h: t[1],
    s: t[2],
    v: t[3],
    a: t[4]
  } : (t = va.hex8.exec(r)) ? {
    r: Gn(t[1]),
    g: Gn(t[2]),
    b: Gn(t[3]),
    a: uw(t[4]),
    format: e ? "name" : "hex8"
  } : (t = va.hex6.exec(r)) ? {
    r: Gn(t[1]),
    g: Gn(t[2]),
    b: Gn(t[3]),
    format: e ? "name" : "hex"
  } : (t = va.hex4.exec(r)) ? {
    r: Gn(t[1] + "" + t[1]),
    g: Gn(t[2] + "" + t[2]),
    b: Gn(t[3] + "" + t[3]),
    a: uw(t[4] + "" + t[4]),
    format: e ? "name" : "hex8"
  } : (t = va.hex3.exec(r)) ? {
    r: Gn(t[1] + "" + t[1]),
    g: Gn(t[2] + "" + t[2]),
    b: Gn(t[3] + "" + t[3]),
    format: e ? "name" : "hex"
  } : !1;
}
function QW(r) {
  var e, t;
  return r = r || {
    level: "AA",
    size: "small"
  }, e = (r.level || "AA").toUpperCase(), t = (r.size || "small").toLowerCase(), e !== "AA" && e !== "AAA" && (e = "AA"), t !== "small" && t !== "large" && (t = "small"), {
    level: e,
    size: t
  };
}
var xc = 2, fw = 0.16, JW = 0.05, e9 = 0.05, t9 = 0.15, WT = 5, XT = 4, r9 = [{
  index: 7,
  opacity: 0.15
}, {
  index: 6,
  opacity: 0.25
}, {
  index: 5,
  opacity: 0.3
}, {
  index: 5,
  opacity: 0.45
}, {
  index: 5,
  opacity: 0.65
}, {
  index: 5,
  opacity: 0.85
}, {
  index: 4,
  opacity: 0.9
}, {
  index: 3,
  opacity: 0.95
}, {
  index: 2,
  opacity: 0.97
}, {
  index: 1,
  opacity: 0.98
}];
function lw(r, e, t) {
  var n;
  return Math.round(r.h) >= 60 && Math.round(r.h) <= 240 ? n = t ? Math.round(r.h) - xc * e : Math.round(r.h) + xc * e : n = t ? Math.round(r.h) + xc * e : Math.round(r.h) - xc * e, n < 0 ? n += 360 : n >= 360 && (n -= 360), n;
}
function cw(r, e, t) {
  if (r.h === 0 && r.s === 0)
    return r.s;
  var n;
  return t ? n = r.s - fw * e : e === XT ? n = r.s + fw : n = r.s + JW * e, n > 1 && (n = 1), t && e === WT && n > 0.1 && (n = 0.1), n < 0.06 && (n = 0.06), Number(n.toFixed(2));
}
function hw(r, e, t) {
  var n;
  return t ? n = r.v + e9 * e : n = r.v - t9 * e, n > 1 && (n = 1), Number(n.toFixed(2));
}
function kh(r) {
  for (var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, t = [], n = Et(r), a = WT; a > 0; a -= 1) {
    var i = n.toHsv(), o = Et({
      h: lw(i, a, !0),
      s: cw(i, a, !0),
      v: hw(i, a, !0)
    }).toHexString();
    t.push(o);
  }
  t.push(n.toHexString());
  for (var s = 1; s <= XT; s += 1) {
    var u = n.toHsv(), f = Et({
      h: lw(u, s),
      s: cw(u, s),
      v: hw(u, s)
    }).toHexString();
    t.push(f);
  }
  return e.theme === "dark" ? r9.map(function(l) {
    var c = l.index, h = l.opacity, d = Et.mix(e.backgroundColor || "#141414", t[c], h * 100).toHexString();
    return d;
  }) : t;
}
var Ip = {
  red: "#F5222D",
  volcano: "#FA541C",
  orange: "#FA8C16",
  gold: "#FAAD14",
  yellow: "#FADB14",
  lime: "#A0D911",
  green: "#52C41A",
  cyan: "#13C2C2",
  blue: "#1890FF",
  geekblue: "#2F54EB",
  purple: "#722ED1",
  magenta: "#EB2F96",
  grey: "#666666"
}, Op = {}, Dp = {};
Object.keys(Ip).forEach(function(r) {
  Op[r] = kh(Ip[r]), Op[r].primary = Op[r][5], Dp[r] = kh(Ip[r], {
    theme: "dark",
    backgroundColor: "#141414"
  }), Dp[r].primary = Dp[r][5];
});
var en = function(e, t, n) {
  var a = yf(e), i = yf(t);
  return yf([(1 - n) * a.red() + n * i.red(), (1 - n) * a.green() + n * i.green(), (1 - n) * a.blue() + n * i.blue()]).rgb();
}, n9 = function(e, t, n) {
  t === void 0 && (t = "#fff"), n === void 0 && (n = "rgb(150, 150, 150)");
  var a = en(t, e, 0.05).rgb().toString(), i = en(t, e, 0.1).rgb().toString(), o = en(t, e, 0.2).rgb().toString(), s = en(t, e, 0.4).rgb().toString(), u = en(t, n, 0.02).rgb().toString(), f = en(t, n, 0.05).rgb().toString(), l = en(t, n, 0.1).rgb().toString(), c = en(t, n, 0.2).rgb().toString(), h = en(t, n, 0.3).rgb().toString(), d = kh(e, {
    theme: "default",
    backgroundColor: t
  }), v = yf(e).hex().toLowerCase(), p = d.indexOf(v), g = e;
  return p !== -1 && (g = d[p + 1]), {
    // for nodes
    mainStroke: e,
    mainFill: i,
    activeStroke: e,
    activeFill: a,
    inactiveStroke: s,
    inactiveFill: a,
    selectedStroke: e,
    selectedFill: t,
    highlightStroke: g,
    highlightFill: o,
    disableStroke: h,
    disableFill: f,
    // for edges
    edgeMainStroke: h,
    edgeActiveStroke: e,
    edgeInactiveStroke: c,
    edgeSelectedStroke: e,
    edgeHighlightStroke: e,
    edgeDisableStroke: l,
    // for combos
    comboMainStroke: h,
    comboMainFill: u,
    comboActiveStroke: e,
    comboActiveFill: a,
    comboInactiveStroke: h,
    comboInactiveFill: u,
    comboSelectedStroke: e,
    comboSelectedFill: u,
    comboHighlightStroke: g,
    comboHighlightFill: u,
    comboDisableStroke: c,
    comboDisableFill: f
  };
}, a9 = function(e, t, n) {
  t === void 0 && (t = "#fff"), n === void 0 && (n = "#777");
  var a = en(t, e, 0.2).rgb().toString(), i = en(t, e, 0.3).rgb().toString(), o = en(t, e, 0.6).rgb().toString(), s = en(t, e, 0.8).rgb().toString(), u = en(t, n, 0.2).rgb().toString(), f = en(t, n, 0.25).rgb().toString(), l = en(t, n, 0.3).rgb().toString(), c = en(t, n, 0.4).rgb().toString(), h = en(t, n, 0.5).rgb().toString(), d = kh(e, {
    theme: "dark",
    backgroundColor: t
  }), v = yf(e).hex().toLowerCase(), p = d.indexOf(v), g = e;
  return p !== -1 && (g = d[p + 1]), {
    // for nodes
    mainStroke: s,
    mainFill: a,
    activeStroke: e,
    activeFill: i,
    inactiveStroke: s,
    inactiveFill: a,
    selectedStroke: e,
    selectedFill: a,
    highlightStroke: e,
    highlightFill: o,
    disableStroke: h,
    disableFill: f,
    // for edges
    edgeMainStroke: n,
    edgeActiveStroke: e,
    edgeInactiveStroke: n,
    edgeSelectedStroke: e,
    edgeHighlightStroke: e,
    edgeDisableStroke: l,
    // for combos
    comboMainStroke: c,
    comboMainFill: f,
    comboActiveStroke: e,
    comboActiveFill: u,
    comboInactiveStroke: c,
    comboInactiveFill: f,
    comboSelectedStroke: e,
    comboSelectedFill: u,
    comboHighlightStroke: g,
    comboHighlightFill: f,
    comboDisableStroke: c,
    comboDisableFill: u
  };
}, Yy = function(e, t, n, a) {
  return t === void 0 && (t = "#fff"), n === void 0 && (n = "default"), n === "default" ? n9(e, t, "rgb(150, 150, 150)") : a9(e, t, "#777");
}, i9 = function(e, t, n, a) {
  t === void 0 && (t = "#fff"), n === void 0 && (n = "default");
  var i = [];
  return e.forEach(function(o) {
    i.push(Yy(o, t, n));
  }), i;
};
const o9 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getColorSetsBySubjectColors: i9,
  getColorsWithSubjectColor: Yy,
  mixColor: en
}, Symbol.toStringTag, { value: "Module" }));
var s9 = "rgb(95, 149, 255)", u9 = "rgb(255, 255, 255)", dw = "rgb(0, 0, 0)", qt = Yy(s9, u9);
const mf = {
  version: "0.8.21",
  rootContainerClassName: "root-container",
  nodeContainerClassName: "node-container",
  edgeContainerClassName: "edge-container",
  comboContainerClassName: "combo-container",
  delegateContainerClassName: "delegate-container",
  defaultLoopPosition: "top",
  nodeLabel: {
    style: {
      fill: "#000",
      fontSize: 12,
      textAlign: "center",
      textBaseline: "middle"
    },
    offset: 4
    // 节点的默认文本不居中时的偏移量
  },
  defaultNode: {
    type: "circle",
    style: {
      lineWidth: 1,
      stroke: qt.mainStroke,
      fill: qt.mainFill
    },
    size: 20,
    color: qt.mainStroke,
    linkPoints: {
      size: 8,
      lineWidth: 1,
      fill: qt.activeFill,
      stroke: qt.activeStroke
    }
  },
  // 节点应用状态后的样式，默认仅提供 active、selected、highlight、inactive、disable，用户可以自己扩展
  nodeStateStyles: {
    active: {
      fill: qt.activeFill,
      stroke: qt.activeStroke,
      lineWidth: 2,
      shadowColor: qt.mainStroke,
      shadowBlur: 10
    },
    selected: {
      fill: qt.selectedFill,
      stroke: qt.selectedStroke,
      lineWidth: 4,
      shadowColor: qt.selectedStroke,
      shadowBlur: 10,
      "text-shape": {
        fontWeight: 500
      }
    },
    highlight: {
      fill: qt.highlightFill,
      stroke: qt.highlightStroke,
      lineWidth: 2,
      "text-shape": {
        fontWeight: 500
      }
    },
    inactive: {
      fill: qt.inactiveFill,
      stroke: qt.inactiveStroke,
      lineWidth: 1
    },
    disable: {
      fill: qt.disableFill,
      stroke: qt.disableStroke,
      lineWidth: 1
    }
  },
  edgeLabel: {
    style: {
      fill: dw,
      textAlign: "center",
      textBaseline: "middle",
      fontSize: 12
    }
  },
  defaultEdge: {
    type: "line",
    size: 1,
    style: {
      stroke: qt.edgeMainStroke,
      lineAppendWidth: 2
    },
    color: qt.edgeMainStroke
  },
  // 边应用状态后的样式，默认仅提供 active、selected、highlight、inactive、disable，用户可以自己扩展
  edgeStateStyles: {
    active: {
      stroke: qt.edgeActiveStroke,
      lineWidth: 1
    },
    selected: {
      stroke: qt.edgeSelectedStroke,
      lineWidth: 2,
      shadowColor: qt.edgeSelectedStroke,
      shadowBlur: 10,
      "text-shape": {
        fontWeight: 500
      }
    },
    highlight: {
      stroke: qt.edgeHighlightStroke,
      lineWidth: 2,
      "text-shape": {
        fontWeight: 500
      }
    },
    inactive: {
      stroke: qt.edgeInactiveStroke,
      lineWidth: 1
    },
    disable: {
      stroke: qt.edgeDisableStroke,
      lineWidth: 1
    }
  },
  comboLabel: {
    style: {
      fill: dw,
      // textAlign: 'center',
      textBaseline: "middle",
      fontSize: 12
    },
    refY: 10,
    refX: 10
    // Combo 的默认文本不居中时的偏移量
  },
  defaultCombo: {
    type: "circle",
    style: {
      fill: qt.comboMainFill,
      lineWidth: 1,
      stroke: qt.comboMainStroke,
      r: 5,
      width: 20,
      height: 10
    },
    size: [20, 5],
    color: qt.comboMainStroke,
    padding: [25, 20, 15, 20]
  },
  // combo 应用状态后的样式，默认仅提供 active、selected、highlight、inactive、disable，用户可以自己扩展
  comboStateStyles: {
    active: {
      stroke: qt.comboActiveStroke,
      lineWidth: 1,
      fill: qt.comboActiveFill
    },
    selected: {
      stroke: qt.comboSelectedStroke,
      lineWidth: 2,
      fill: qt.comboSelectedFill,
      shadowColor: qt.comboSelectedStroke,
      shadowBlur: 10,
      "text-shape": {
        fontWeight: 500
      }
    },
    highlight: {
      stroke: qt.comboHighlightStroke,
      lineWidth: 2,
      fill: qt.comboHighlightFill,
      "text-shape": {
        fontWeight: 500
      }
    },
    inactive: {
      stroke: qt.comboInactiveStroke,
      fill: qt.comboInactiveFill,
      lineWidth: 1
    },
    disable: {
      stroke: qt.comboDisableStroke,
      fill: qt.comboDisableFill,
      lineWidth: 1
    }
  },
  delegateStyle: {
    fill: "#F3F9FF",
    fillOpacity: 0.5,
    stroke: "#1890FF",
    strokeOpacity: 0.9,
    lineDash: [5, 5]
  },
  // 文本水印默认配置
  textWaterMarkerConfig: {
    width: 150,
    height: 100,
    compatible: !1,
    text: {
      x: 0,
      y: 60,
      lineHeight: 20,
      rotate: 20,
      fontSize: 14,
      fontFamily: "Microsoft YaHei",
      fill: "rgba(0, 0, 0, 0.1)",
      baseline: "Middle"
    }
  },
  imageWaterMarkerConfig: {
    width: 150,
    height: 130,
    compatible: !1,
    image: {
      x: 0,
      y: 0,
      width: 30,
      height: 20,
      rotate: 0
    }
  },
  waterMarkerImage: "https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"
};
function wc(r, e, t) {
  if (r) {
    if (typeof r.addEventListener == "function")
      return r.addEventListener(e, t, !1), {
        remove: function() {
          r.removeEventListener(e, t, !1);
        }
      };
    if (typeof r.attachEvent == "function")
      return r.attachEvent("on" + e, t), {
        remove: function() {
          r.detachEvent("on" + e, t);
        }
      };
  }
}
var ff, Lp, VT, lg;
function f9() {
  ff = document.createElement("table"), Lp = document.createElement("tr"), VT = /^\s*<(\w+|!)[^>]*>/, lg = {
    tr: document.createElement("tbody"),
    tbody: ff,
    thead: ff,
    tfoot: ff,
    td: Lp,
    th: Lp,
    "*": document.createElement("div")
  };
}
function cg(r) {
  ff || f9();
  var e = VT.test(r) && RegExp.$1;
  (!e || !(e in lg)) && (e = "*");
  var t = lg[e];
  r = typeof r == "string" ? r.replace(/(^\s*)|(\s*$)/g, "") : r, t.innerHTML = "" + r;
  var n = t.childNodes[0];
  return n && t.contains(n) && t.removeChild(n), n;
}
function Wu(r, e) {
  if (r)
    for (var t in e)
      e.hasOwnProperty(t) && (r.style[t] = e[t]);
  return r;
}
var l9 = xa.cloneEvent, c9 = xa.isViewportChanged, h9 = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this, t) || this;
      return n.extendEvents = [], n.dragging = !1, n.mousedown = !1, n.preItem = null, n.destroy(), n.graph = t, n.destroyed = !1, n.initEvents(), n;
    }
    return e.prototype.initEvents = function() {
      var t = this, n = t.graph, a = t.extendEvents, i = a === void 0 ? [] : a, o = n.get("canvas"), s = o.get("el"), u = Gs(this, "onCanvasEvents"), f = Gs(this, "onExtendEvents"), l = Gs(this, "onWheelEvent");
      o.off("*").on("*", u), this.canvasHandler = u, i.push(wc(s, "wheel", l)), typeof window < "u" && (i.push(wc(window, "keydown", f)), i.push(wc(window, "keyup", f)), i.push(wc(window, "focus", f))), this.resetHandler && n.off("afterchangedata", this.resetHandler), this.resetHandler = Gs(this, "resetStatus"), n.on("afterchangedata", this.resetHandler);
    }, e.getItemRoot = function(t) {
      for (; t && !t.get("item"); )
        t = t.get("parent");
      return t;
    }, e.prototype.onCanvasEvents = function(t) {
      var n = this, a = this.graph, i = a.get("canvas"), o = t.target, s = t.type;
      switch (s) {
        case "drag":
          this.onCanvasEvents(Object.assign({}, t, {
            type: "mousemove"
          }));
          break;
        case "dragend":
          this.onCanvasEvents(Object.assign({}, t, {
            type: "mouseup"
          }));
          break;
        case "mousedown":
          this.mousedown = !0;
          break;
        case "dragend":
        case "mouseup":
          setTimeout(function() {
            return n.mousedown = !1;
          });
          break;
        case "click":
          if (!this.mousedown)
            return;
          break;
      }
      t.canvasX = t.x, t.canvasY = t.y;
      var u = {
        x: t.canvasX,
        y: t.canvasY
      }, f = a.get("group"), l = f.getMatrix();
      if (l || (l = [1, 0, 0, 0, 1, 0, 0, 0, 1]), c9(l) && (u = a.getPointByClient(t.clientX, t.clientY)), t.x = u.x, t.y = u.y, t.currentTarget = a, o === i) {
        (s === "mousemove" || s === "mouseleave") && this.handleMouseMove(t, "canvas"), t.target = i, t.item = null, a.emit(s, t), a.emit("canvas:".concat(s), t);
        return;
      }
      var c = e.getItemRoot(o);
      if (!c) {
        a.emit(s, t);
        return;
      }
      var h = c.get("item");
      if (!h.destroyed) {
        var d = h.getType();
        if (t.target = o, t.item = h, t.canvasX === t.x && t.canvasY === t.y) {
          var v = a.getCanvasByPoint(t.x, t.y);
          t.canvasX = v.x, t.canvasY = v.y;
        }
        t.name && !t.name.includes(":") ? (a.emit("".concat(d, ":").concat(s), t), a.emit(s, t)) : t.name && a.emit(t.name, t), s === "dragstart" && (this.dragging = !0), s === "dragend" && (this.dragging = !1), s === "mousemove" && this.handleMouseMove(t, d);
      }
    }, e.prototype.onExtendEvents = function(t) {
      this.graph.emit(t.type, t);
    }, e.prototype.onWheelEvent = function(t) {
      Zt(t.wheelDelta) && (t.wheelDelta = -t.detail), this.graph.emit("wheel", t);
    }, e.prototype.handleMouseMove = function(t, n) {
      var a = this, i = a.graph, o = a.preItem, s = i.get("canvas"), u = t.target === s ? null : t.item;
      t = l9(t), o && o !== u && !o.destroyed && (t.item = o, this.emitCustomEvent(o.getType(), "mouseleave", t), this.dragging && this.emitCustomEvent(o.getType(), "dragleave", t)), u && o !== u && (t.item = u, this.emitCustomEvent(n, "mouseenter", t), this.dragging && this.emitCustomEvent(n, "dragenter", t)), this.preItem = u;
    }, e.prototype.emitCustomEvent = function(t, n, a) {
      a.type = n, this.graph.emit("".concat(t, ":").concat(n), a);
    }, e.prototype.resetStatus = function() {
      this.mousedown = !1, this.dragging = !1, this.preItem = null;
    }, e.prototype.destroy = function() {
      var t = this, n = t.graph, a = t.canvasHandler, i = t.extendEvents, o = n.get("canvas");
      o.off("*", a), Se(i, function(s) {
        s.remove();
      }), this.resetStatus(), this.extendEvents.length = 0, this.canvasHandler = null, this.resetHandler = null, this.destroyed = !0;
    }, e;
  }($C)
), Qt = {}, _i = {}, Gr = {};
Object.defineProperty(Gr, "__esModule", { value: !0 });
Gr.Base = void 0;
var d9 = (
  /** @class */
  function() {
    function r() {
      this.nodes = [], this.edges = [], this.combos = [], this.comboEdges = [], this.hiddenNodes = [], this.hiddenEdges = [], this.hiddenCombos = [], this.vedges = [], this.positions = [], this.destroyed = !1, this.onLayoutEnd = function() {
      };
    }
    return r.prototype.layout = function(e) {
      return this.init(e), this.execute(!0);
    }, r.prototype.init = function(e) {
      this.nodes = e.nodes || [], this.edges = e.edges || [], this.combos = e.combos || [], this.comboEdges = e.comboEdges || [], this.hiddenNodes = e.hiddenNodes || [], this.hiddenEdges = e.hiddenEdges || [], this.hiddenCombos = e.hiddenCombos || [], this.vedges = e.vedges || [];
    }, r.prototype.execute = function(e) {
    }, r.prototype.executeWithWorker = function() {
    }, r.prototype.getDefaultCfg = function() {
      return {};
    }, r.prototype.updateCfg = function(e) {
      e && Object.assign(this, e);
    }, r.prototype.getType = function() {
      return "base";
    }, r.prototype.destroy = function() {
      this.nodes = null, this.edges = null, this.combos = null, this.positions = null, this.destroyed = !0;
    }, r;
  }()
);
Gr.Base = d9;
var Np = {}, au = {};
Object.defineProperty(au, "__esModule", { value: !0 });
au.camelize = au.isString = void 0;
var v9 = function(r) {
  return typeof r == "string";
};
au.isString = v9;
var p9 = function(r) {
  var e = /* @__PURE__ */ Object.create(null);
  return function(t) {
    var n = e[t];
    return n || (e[t] = r(t));
  };
}, g9 = /-(\w)/g;
au.camelize = p9(function(r) {
  return r.replace(g9, function(e, t) {
    return t ? t.toUpperCase() : "";
  });
});
var Jf = {};
Object.defineProperty(Jf, "__esModule", { value: !0 });
Jf.isArray = void 0;
Jf.isArray = Array.isArray;
var Md = {};
(function(r) {
  Object.defineProperty(r, "__esModule", { value: !0 }), r.toNumber = r.isNaN = r.isNumber = void 0;
  var e = function(a) {
    return typeof a == "number";
  };
  r.isNumber = e;
  var t = function(a) {
    return Number.isNaN(Number(a));
  };
  r.isNaN = t;
  var n = function(a) {
    var i = parseFloat(a);
    return (0, r.isNaN)(i) ? a : i;
  };
  r.toNumber = n;
})(Md);
var Sd = {}, Hy = {};
(function(r) {
  var e = be && be.__assign || function() {
    return e = Object.assign || function(a) {
      for (var i, o = 1, s = arguments.length; o < s; o++) {
        i = arguments[o];
        for (var u in i)
          Object.prototype.hasOwnProperty.call(i, u) && (a[u] = i[u]);
      }
      return a;
    }, e.apply(this, arguments);
  };
  Object.defineProperty(r, "__esModule", { value: !0 }), r.clone = r.isObject = void 0;
  var t = function(a) {
    return a !== null && typeof a == "object";
  };
  r.isObject = t;
  var n = function(a) {
    if (a === null)
      return a;
    if (a instanceof Date)
      return new Date(a.getTime());
    if (a instanceof Array) {
      var i = [];
      return a.forEach(function(s) {
        i.push(s);
      }), i.map(function(s) {
        return (0, r.clone)(s);
      });
    }
    if (typeof a == "object" && Object.keys(a).length) {
      var o = e({}, a);
      return Object.keys(o).forEach(function(s) {
        o[s] = (0, r.clone)(o[s]);
      }), o;
    }
    return a;
  };
  r.clone = n;
})(Hy);
(function(r) {
  Object.defineProperty(r, "__esModule", { value: !0 }), r.getCoreNodeAndRelativeLeafNodes = r.getAvgNodePosition = r.getLayoutBBox = r.traverseTreeUp = r.scaleMatrix = r.getAdjMatrix = r.floydWarshall = r.getDegreeMap = r.getDegree = r.getEdgeTerminal = void 0;
  var e = Jf, t = Md, n = Hy, a = function(m, b) {
    var E = m[b];
    return (0, n.isObject)(E) ? E.cell : E;
  };
  r.getEdgeTerminal = a;
  var i = function(m, b, E) {
    for (var x = [], w = 0; w < m; w++)
      x[w] = {
        in: 0,
        out: 0,
        all: 0
      };
    return E && E.forEach(function(_) {
      var M = (0, r.getEdgeTerminal)(_, "source"), A = (0, r.getEdgeTerminal)(_, "target");
      M && x[b[M]] && (x[b[M]].out += 1, x[b[M]].all += 1), A && x[b[A]] && (x[b[A]].in += 1, x[b[A]].all += 1);
    }), x;
  };
  r.getDegree = i;
  var o = function(m, b) {
    var E = {};
    return m.forEach(function(x) {
      E[x.id] = {
        in: 0,
        out: 0,
        all: 0
      };
    }), b && b.forEach(function(x) {
      var w = (0, r.getEdgeTerminal)(x, "source"), _ = (0, r.getEdgeTerminal)(x, "target");
      w && (E[w].out += 1, E[w].all += 1), _ && (E[_].in += 1, E[_].all += 1);
    }), E;
  };
  r.getDegreeMap = o;
  var s = function(m) {
    for (var b = [], E = m.length, x = 0; x < E; x += 1) {
      b[x] = [];
      for (var w = 0; w < E; w += 1)
        x === w ? b[x][w] = 0 : m[x][w] === 0 || !m[x][w] ? b[x][w] = 1 / 0 : b[x][w] = m[x][w];
    }
    for (var _ = 0; _ < E; _ += 1)
      for (var x = 0; x < E; x += 1)
        for (var w = 0; w < E; w += 1)
          b[x][w] > b[x][_] + b[_][w] && (b[x][w] = b[x][_] + b[_][w]);
    return b;
  };
  r.floydWarshall = s;
  var u = function(m, b) {
    var E = m.nodes, x = m.edges, w = [], _ = {};
    if (!E)
      throw new Error("invalid nodes data!");
    return E && E.forEach(function(M, A) {
      _[M.id] = A;
      var S = [];
      w.push(S);
    }), x == null || x.forEach(function(M) {
      var A = (0, r.getEdgeTerminal)(M, "source"), S = (0, r.getEdgeTerminal)(M, "target"), T = _[A], C = _[S];
      T === void 0 || C === void 0 || (w[T][C] = 1, b || (w[C][T] = 1));
    }), w;
  };
  r.getAdjMatrix = u;
  var f = function(m, b) {
    var E = [];
    return m.forEach(function(x) {
      var w = [];
      x.forEach(function(_) {
        w.push(_ * b);
      }), E.push(w);
    }), E;
  };
  r.scaleMatrix = f;
  var l = function(m, b) {
    if (m && m.children) {
      for (var E = m.children.length - 1; E >= 0; E--)
        if (!l(m.children[E], b))
          return;
    }
    return !!b(m);
  }, c = function(m, b) {
    typeof b == "function" && l(m, b);
  };
  r.traverseTreeUp = c;
  var h = function(m) {
    var b = 1 / 0, E = 1 / 0, x = -1 / 0, w = -1 / 0;
    return m.forEach(function(_) {
      var M = _.size;
      (0, e.isArray)(M) ? M.length === 1 && (M = [M[0], M[0]]) : (0, t.isNumber)(M) ? M = [M, M] : (M === void 0 || isNaN(M)) && (M = [30, 30]);
      var A = [M[0] / 2, M[1] / 2], S = _.x - A[0], T = _.x + A[0], C = _.y - A[1], O = _.y + A[1];
      b > S && (b = S), E > C && (E = C), x < T && (x = T), w < O && (w = O);
    }), { minX: b, minY: E, maxX: x, maxY: w };
  };
  r.getLayoutBBox = h;
  var d = function(m) {
    var b = { x: 0, y: 0 };
    m.forEach(function(x) {
      b.x += x.x || 0, b.y += x.y || 0;
    });
    var E = m.length || 1;
    return {
      x: b.x / E,
      y: b.y / E
    };
  };
  r.getAvgNodePosition = d;
  var v = function(m, b, E) {
    var x, w;
    return m === "source" ? ((x = E == null ? void 0 : E.find(function(_) {
      return _.target === b.id;
    })) === null || x === void 0 ? void 0 : x.source) || {} : ((w = E == null ? void 0 : E.find(function(_) {
      return _.source === b.id;
    })) === null || w === void 0 ? void 0 : w.target) || {};
  }, p = function(m, b, E) {
    var x = [];
    switch (m) {
      case "source":
        x = E == null ? void 0 : E.filter(function(_) {
          return _.source === b.id;
        }).map(function(_) {
          return _.target;
        });
        break;
      case "target":
        x = E == null ? void 0 : E.filter(function(_) {
          return _.target === b.id;
        }).map(function(_) {
          return _.source;
        });
        break;
      case "both":
        x = E == null ? void 0 : E.filter(function(_) {
          return _.source === b.id;
        }).map(function(_) {
          return _.target;
        }).concat(E == null ? void 0 : E.filter(function(_) {
          return _.target === b.id;
        }).map(function(_) {
          return _.source;
        }));
        break;
    }
    var w = new Set(x);
    return Array.from(w);
  }, g = function(m, b, E, x, w) {
    var _ = E[b] || "", M = (x == null ? void 0 : x.filter(function(A) {
      return A[b] === _;
    })) || [];
    return m === "leaf" && (M = M.filter(function(A) {
      var S, T;
      return ((S = w[A.id]) === null || S === void 0 ? void 0 : S.in) === 0 || ((T = w[A.id]) === null || T === void 0 ? void 0 : T.out) === 0;
    })), M;
  }, y = function(m, b, E, x, w, _) {
    var M = w[b.id], A = M.in, S = M.out, T = b, C = [];
    A === 0 ? (T = v("source", b, E), C = p("both", T, E).map(function(L) {
      return _[L];
    })) : S === 0 && (T = v("target", b, E), C = p("both", T, E).map(function(L) {
      return _[L];
    })), C = C.filter(function(L) {
      return w[L.id] && (w[L.id].in === 0 || w[L.id].out === 0);
    });
    var O = g(m, x, b, C, w);
    return { coreNode: T, relativeLeafNodes: C, sameTypeLeafNodes: O };
  };
  r.getCoreNodeAndRelativeLeafNodes = y;
})(Sd);
var Pp = {}, vw;
function y9() {
  return vw || (vw = 1, function(r) {
    Object.defineProperty(r, "__esModule", { value: !0 }), r.getFuncByUnknownType = r.getFunc = r.isFunction = void 0;
    var e = Dr(), t = Md, n = function(o) {
      return typeof o == "function";
    };
    r.isFunction = n;
    var a = function(o, s, u) {
      var f;
      return u ? f = u : (0, t.isNumber)(o) ? f = function() {
        return o;
      } : f = function() {
        return s;
      }, f;
    };
    r.getFunc = a;
    var i = function(o, s, u) {
      return u === void 0 && (u = !0), !s && s !== 0 ? function(f) {
        return f.size ? (0, e.isArray)(f.size) ? f.size[0] > f.size[1] ? f.size[0] : f.size[1] : (0, e.isObject)(f.size) ? f.size.width > f.size.height ? f.size.width : f.size.height : f.size : o;
      } : (0, r.isFunction)(s) ? s : (0, t.isNumber)(s) ? function() {
        return s;
      } : (0, e.isArray)(s) ? function() {
        if (u) {
          var f = Math.max.apply(Math, s);
          return isNaN(f) ? o : f;
        }
        return s;
      } : (0, e.isObject)(s) ? function() {
        if (u) {
          var f = Math.max(s.width, s.height);
          return isNaN(f) ? o : f;
        }
        return [s.width, s.height];
      } : function() {
        return o;
      };
    };
    r.getFuncByUnknownType = i;
  }(Pp)), Pp;
}
var pw;
function Dr() {
  return pw || (pw = 1, function(r) {
    var e = be && be.__createBinding || (Object.create ? function(n, a, i, o) {
      o === void 0 && (o = i);
      var s = Object.getOwnPropertyDescriptor(a, i);
      (!s || ("get" in s ? !a.__esModule : s.writable || s.configurable)) && (s = { enumerable: !0, get: function() {
        return a[i];
      } }), Object.defineProperty(n, o, s);
    } : function(n, a, i, o) {
      o === void 0 && (o = i), n[o] = a[i];
    }), t = be && be.__exportStar || function(n, a) {
      for (var i in n)
        i !== "default" && !Object.prototype.hasOwnProperty.call(a, i) && e(a, n, i);
    };
    Object.defineProperty(r, "__esModule", { value: !0 }), t(au, r), t(Jf, r), t(Md, r), t(Sd, r), t(Hy, r), t(y9(), r);
  }(Np)), Np;
}
var m9 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(_i, "__esModule", { value: !0 });
_i.getLayoutByName = _i.unRegisterLayout = _i.registerLayout = void 0;
var b9 = Gr, E9 = Dr(), Yi = /* @__PURE__ */ new Map(), x9 = function(r, e) {
  if (Yi.get(r) && console.warn("The layout with the name ".concat(r, " exists already, it will be overridden")), (0, E9.isObject)(e)) {
    var t = (
      /** @class */
      function(n) {
        m9(a, n);
        function a(i) {
          var o = this, s;
          o = n.call(this) || this;
          var u = o, f = {}, l = Object.assign({}, u.getDefaultCfg(), ((s = e.getDefaultCfg) === null || s === void 0 ? void 0 : s.call(e)) || {});
          return Object.assign(f, l, e, i), Object.keys(f).forEach(function(c) {
            var h = f[c];
            u[c] = h;
          }), o;
        }
        return a;
      }(b9.Base)
    );
    Yi.set(r, t);
  } else
    Yi.set(r, e);
  return Yi.get(r);
};
_i.registerLayout = x9;
var w9 = function(r) {
  Yi.has(r) && Yi.delete(r);
};
_i.unRegisterLayout = w9;
var _9 = function(r) {
  return Yi.has(r) ? Yi.get(r) : null;
};
_i.getLayoutByName = _9;
var kp = {}, el = {}, M9 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(el, "__esModule", { value: !0 });
el.GridLayout = void 0;
var ws = Dr(), S9 = Gr, A9 = (
  /** @class */
  function(r) {
    M9(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.begin = [0, 0], n.preventOverlap = !0, n.preventOverlapPadding = 10, n.condense = !1, n.sortBy = "degree", n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.row = 0, n.col = 0, n.cellWidth = 0, n.cellHeight = 0, n.cellUsed = {}, n.id2manPos = {}, n.onLayoutEnd = function() {
      }, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        begin: [0, 0],
        preventOverlap: !0,
        preventOverlapPadding: 10,
        condense: !1,
        rows: void 0,
        cols: void 0,
        position: void 0,
        sortBy: "degree",
        nodeSize: 30
      };
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.edges, i = t.begin, o = n.length;
      if (o === 0)
        return t.onLayoutEnd && t.onLayoutEnd(), {
          nodes: n,
          edges: a
        };
      if (o === 1)
        return n[0].x = i[0], n[0].y = i[1], t.onLayoutEnd && t.onLayoutEnd(), {
          nodes: n,
          edges: a
        };
      var s = t.sortBy, u = t.width, f = t.height, l = t.condense, c = t.preventOverlapPadding, h = t.preventOverlap, d = t.nodeSpacing, v = t.nodeSize, p = [];
      n.forEach(function(C) {
        p.push(C);
      });
      var g = {};
      if (p.forEach(function(C, O) {
        g[C.id] = O;
      }), (s === "degree" || !(0, ws.isString)(s) || p[0][s] === void 0) && (s = "degree", (0, ws.isNaN)(n[0].degree))) {
        var y = (0, ws.getDegree)(p.length, g, a);
        p.forEach(function(C, O) {
          C.degree = y[O].all;
        });
      }
      p.sort(function(C, O) {
        return O[s] - C[s];
      }), !u && typeof window < "u" && (u = window.innerWidth), !f && typeof window < "u" && (f = window.innerHeight);
      var m = t.rows, b = t.cols != null ? t.cols : t.columns;
      if (t.cells = o, m != null && b != null ? (t.rows = m, t.cols = b) : m != null && b == null ? (t.rows = m, t.cols = Math.ceil(t.cells / t.rows)) : m == null && b != null ? (t.cols = b, t.rows = Math.ceil(t.cells / t.cols)) : (t.splits = Math.sqrt(t.cells * t.height / t.width), t.rows = Math.round(t.splits), t.cols = Math.round(t.width / t.height * t.splits)), t.rows = Math.max(t.rows, 1), t.cols = Math.max(t.cols, 1), t.cols * t.rows > t.cells) {
        var E = t.small(), x = t.large();
        (E - 1) * x >= t.cells ? t.small(E - 1) : (x - 1) * E >= t.cells && t.large(x - 1);
      } else
        for (; t.cols * t.rows < t.cells; ) {
          var E = t.small(), x = t.large();
          (x + 1) * E >= t.cells ? t.large(x + 1) : t.small(E + 1);
        }
      if (t.cellWidth = u / t.cols, t.cellHeight = f / t.rows, l && (t.cellWidth = 0, t.cellHeight = 0), h || d) {
        var w = (0, ws.getFuncByUnknownType)(10, d), _ = (0, ws.getFuncByUnknownType)(30, v, !1);
        p.forEach(function(C) {
          (!C.x || !C.y) && (C.x = 0, C.y = 0);
          var O = _(C) || 30, L, R;
          (0, ws.isArray)(O) ? (L = O[0], R = O[1]) : (L = O, R = O);
          var P = w !== void 0 ? w(C) : c, z = L + P, V = R + P;
          t.cellWidth = Math.max(t.cellWidth, z), t.cellHeight = Math.max(t.cellHeight, V);
        });
      }
      t.cellUsed = {}, t.row = 0, t.col = 0, t.id2manPos = {};
      for (var M = 0; M < p.length; M++) {
        var A = p[M], S = void 0;
        if (t.position && (S = t.position(A)), S && (S.row !== void 0 || S.col !== void 0)) {
          var T = {
            row: S.row,
            col: S.col
          };
          if (T.col === void 0)
            for (T.col = 0; t.used(T.row, T.col); )
              T.col++;
          else if (T.row === void 0)
            for (T.row = 0; t.used(T.row, T.col); )
              T.row++;
          t.id2manPos[A.id] = T, t.use(T.row, T.col);
        }
        t.getPos(A);
      }
      return t.onLayoutEnd && t.onLayoutEnd(), {
        edges: a,
        nodes: p
      };
    }, e.prototype.small = function(t) {
      var n = this, a, i = n.rows || 5, o = n.cols || 5;
      if (t == null)
        a = Math.min(i, o);
      else {
        var s = Math.min(i, o);
        s === n.rows ? n.rows = t : n.cols = t;
      }
      return a;
    }, e.prototype.large = function(t) {
      var n = this, a, i = n.rows || 5, o = n.cols || 5;
      if (t == null)
        a = Math.max(i, o);
      else {
        var s = Math.max(i, o);
        s === n.rows ? n.rows = t : n.cols = t;
      }
      return a;
    }, e.prototype.used = function(t, n) {
      var a = this;
      return a.cellUsed["c-".concat(t, "-").concat(n)] || !1;
    }, e.prototype.use = function(t, n) {
      var a = this;
      a.cellUsed["c-".concat(t, "-").concat(n)] = !0;
    }, e.prototype.moveToNextCell = function() {
      var t = this, n = t.cols || 5;
      t.col++, t.col >= n && (t.col = 0, t.row++);
    }, e.prototype.getPos = function(t) {
      var n = this, a = n.begin, i = n.cellWidth, o = n.cellHeight, s, u, f = n.id2manPos[t.id];
      if (f)
        s = f.col * i + i / 2 + a[0], u = f.row * o + o / 2 + a[1];
      else {
        for (; n.used(n.row, n.col); )
          n.moveToNextCell();
        s = n.col * i + i / 2 + a[0], u = n.row * o + o / 2 + a[1], n.use(n.row, n.col), n.moveToNextCell();
      }
      t.x = s, t.y = u;
    }, e.prototype.getType = function() {
      return "grid";
    }, e;
  }(S9.Base)
);
el.GridLayout = A9;
var tl = {}, C9 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(tl, "__esModule", { value: !0 });
tl.RandomLayout = void 0;
var T9 = Gr, I9 = (
  /** @class */
  function(r) {
    C9(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.center = [0, 0], n.width = 300, n.height = 300, n.nodes = [], n.edges = [], n.onLayoutEnd = function() {
      }, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        center: [0, 0],
        width: 300,
        height: 300
      };
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = 0.9, i = t.center;
      return !t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight), n && n.forEach(function(o) {
        o.x = (Math.random() - 0.5) * a * t.width + i[0], o.y = (Math.random() - 0.5) * a * t.height + i[1];
      }), t.onLayoutEnd && t.onLayoutEnd(), {
        nodes: n,
        edges: this.edges
      };
    }, e.prototype.getType = function() {
      return "random";
    }, e;
  }(T9.Base)
);
tl.RandomLayout = I9;
var rl = {}, O9 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(rl, "__esModule", { value: !0 });
rl.GForceLayout = void 0;
var D9 = Gr, mn = Dr(), Rp = function(r, e) {
  var t;
  return r ? (0, mn.isNumber)(r) ? t = function(n) {
    return r;
  } : t = r : t = function(n) {
    return e || 1;
  }, t;
}, L9 = (
  /** @class */
  function(r) {
    O9(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.maxIteration = 500, n.workerEnabled = !1, n.edgeStrength = 200, n.nodeStrength = 1e3, n.coulombDisScale = 5e-3, n.damping = 0.9, n.maxSpeed = 1e3, n.minMovement = 0.5, n.interval = 0.02, n.factor = 1, n.linkDistance = 1, n.gravity = 10, n.preventOverlap = !0, n.collideStrength = 1, n.tick = function() {
      }, n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.nodeMap = {}, n.nodeIdxMap = {}, n.animate = !0, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 500,
        gravity: 10,
        enableTick: !0,
        animate: !0
      };
    }, e.prototype.execute = function() {
      var t, n, a = this, i = a.nodes;
      if (a.timeInterval !== void 0 && typeof window < "u" && window.clearInterval(a.timeInterval), !i || i.length === 0) {
        (t = a.onLayoutEnd) === null || t === void 0 || t.call(a);
        return;
      }
      !a.width && typeof window < "u" && (a.width = window.innerWidth), !a.height && typeof window < "u" && (a.height = window.innerHeight), a.center || (a.center = [a.width / 2, a.height / 2]);
      var o = a.center;
      if (i.length === 1) {
        i[0].x = o[0], i[0].y = o[1], (n = a.onLayoutEnd) === null || n === void 0 || n.call(a);
        return;
      }
      var s = {}, u = {};
      i.forEach(function(v, p) {
        (0, mn.isNumber)(v.x) || (v.x = Math.random() * a.width), (0, mn.isNumber)(v.y) || (v.y = Math.random() * a.height), s[v.id] = v, u[v.id] = p;
      }), a.nodeMap = s, a.nodeIdxMap = u, a.linkDistance = Rp(a.linkDistance, 1), a.nodeStrength = Rp(a.nodeStrength, 1), a.edgeStrength = Rp(a.edgeStrength, 1);
      var f = a.nodeSize, l;
      if (a.preventOverlap) {
        var c = a.nodeSpacing, h;
        (0, mn.isNumber)(c) ? h = function() {
          return c;
        } : (0, mn.isFunction)(c) ? h = c : h = function() {
          return 0;
        }, f ? (0, mn.isArray)(f) ? l = function(v) {
          return Math.max(f[0], f[1]) + h(v);
        } : l = function(v) {
          return f + h(v);
        } : l = function(v) {
          return v.size ? (0, mn.isArray)(v.size) ? Math.max(v.size[0], v.size[1]) + h(v) : (0, mn.isObject)(v.size) ? Math.max(v.size.width, v.size.height) + h(v) : v.size + h(v) : 10 + h(v);
        };
      }
      a.nodeSize = l;
      var d = a.edges;
      a.degrees = (0, mn.getDegree)(i.length, a.nodeIdxMap, d), a.getMass || (a.getMass = function(v) {
        var p = v.mass || a.degrees[a.nodeIdxMap[v.id]].all || 1;
        return p;
      }), a.run();
    }, e.prototype.run = function() {
      var t, n = this, a = n.maxIteration, i = n.nodes, o = n.workerEnabled, s = n.minMovement, u = n.animate;
      if (i)
        if (o || !u) {
          for (var f = 0; f < a; f++) {
            var l = n.runOneStep(f);
            if (n.reachMoveThreshold(i, l, s))
              break;
          }
          (t = n.onLayoutEnd) === null || t === void 0 || t.call(n);
        } else {
          if (typeof window > "u")
            return;
          var c = 0;
          this.timeInterval = window.setInterval(function() {
            var h, d;
            if (i) {
              var v = n.runOneStep(c) || [];
              n.reachMoveThreshold(i, v, s) && ((h = n.onLayoutEnd) === null || h === void 0 || h.call(n), window.clearInterval(n.timeInterval)), c++, c >= a && ((d = n.onLayoutEnd) === null || d === void 0 || d.call(n), window.clearInterval(n.timeInterval));
            }
          }, 0);
        }
    }, e.prototype.reachMoveThreshold = function(t, n, a) {
      var i = 0;
      return t.forEach(function(o, s) {
        var u = o.x - n[s].x, f = o.y - n[s].y;
        i += Math.sqrt(u * u + f * f);
      }), i /= t.length, i < a;
    }, e.prototype.runOneStep = function(t) {
      var n, a = this, i = a.nodes, o = a.edges, s = [], u = [];
      if (i) {
        i.forEach(function(c, h) {
          s[2 * h] = 0, s[2 * h + 1] = 0, u[2 * h] = 0, u[2 * h + 1] = 0;
        }), a.calRepulsive(s, i), o && a.calAttractive(s, o), a.calGravity(s, i);
        var f = Math.max(0.02, a.interval - t * 2e-3);
        a.updateVelocity(s, u, f, i);
        var l = [];
        return i.forEach(function(c) {
          l.push({
            x: c.x,
            y: c.y
          });
        }), a.updatePosition(u, f, i), (n = a.tick) === null || n === void 0 || n.call(a), l;
      }
    }, e.prototype.calRepulsive = function(t, n) {
      var a = this, i = a.getMass, o = a.factor, s = a.coulombDisScale, u = a.preventOverlap, f = a.collideStrength, l = f === void 0 ? 1 : f, c = a.nodeStrength, h = a.nodeSize;
      n.forEach(function(d, v) {
        var p = i ? i(d) : 1;
        n.forEach(function(g, y) {
          if (!(v >= y)) {
            var m = d.x - g.x, b = d.y - g.y;
            m === 0 && b === 0 && (m = Math.random() * 0.01, b = Math.random() * 0.01);
            var E = m * m + b * b, x = Math.sqrt(E), w = (x + 0.1) * s, _ = m / x, M = b / x, A = (c(d) + c(g)) * 0.5 * o / (w * w), S = i ? i(g) : 1;
            if (t[2 * v] += _ * A, t[2 * v + 1] += M * A, t[2 * y] -= _ * A, t[2 * y + 1] -= M * A, u && (h(d) + h(g)) / 2 > x) {
              var T = l * (c(d) + c(g)) * 0.5 / E;
              t[2 * v] += _ * T / p, t[2 * v + 1] += M * T / p, t[2 * y] -= _ * T / S, t[2 * y + 1] -= M * T / S;
            }
          }
        });
      });
    }, e.prototype.calAttractive = function(t, n) {
      var a = this, i = a.nodeMap, o = a.nodeIdxMap, s = a.linkDistance, u = a.edgeStrength, f = a.nodeSize, l = a.getMass;
      n.forEach(function(c, h) {
        var d = (0, mn.getEdgeTerminal)(c, "source"), v = (0, mn.getEdgeTerminal)(c, "target"), p = i[d], g = i[v], y = g.x - p.x, m = g.y - p.y;
        y === 0 && m === 0 && (y = Math.random() * 0.01, m = Math.random() * 0.01);
        var b = Math.sqrt(y * y + m * m), E = y / b, x = m / b, w = s(c, p, g) || 1 + (f(p) + f(g) || 0) / 2, _ = w - b, M = _ * u(c), A = o[d], S = o[v], T = l ? l(p) : 1, C = l ? l(g) : 1;
        t[2 * A] -= E * M / T, t[2 * A + 1] -= x * M / T, t[2 * S] += E * M / C, t[2 * S + 1] += x * M / C;
      });
    }, e.prototype.calGravity = function(t, n) {
      for (var a = this, i = a.center, o = a.gravity, s = a.degrees, u = n.length, f = 0; f < u; f++) {
        var l = n[f], c = l.x - i[0], h = l.y - i[1], d = o;
        if (a.getCenter) {
          var v = a.getCenter(l, s[f].all);
          v && (0, mn.isNumber)(v[0]) && (0, mn.isNumber)(v[1]) && (0, mn.isNumber)(v[2]) && (c = l.x - v[0], h = l.y - v[1], d = v[2]);
        }
        d && (t[2 * f] -= d * c, t[2 * f + 1] -= d * h);
      }
    }, e.prototype.updateVelocity = function(t, n, a, i) {
      var o = this, s = a * o.damping;
      i.forEach(function(u, f) {
        var l = t[2 * f] * s || 0.01, c = t[2 * f + 1] * s || 0.01, h = Math.sqrt(l * l + c * c);
        if (h > o.maxSpeed) {
          var d = o.maxSpeed / h;
          l = d * l, c = d * c;
        }
        n[2 * f] = l, n[2 * f + 1] = c;
      });
    }, e.prototype.updatePosition = function(t, n, a) {
      a.forEach(function(i, o) {
        if ((0, mn.isNumber)(i.fx) && (0, mn.isNumber)(i.fy)) {
          i.x = i.fx, i.y = i.fy;
          return;
        }
        var s = t[2 * o] * n, u = t[2 * o + 1] * n;
        i.x += s, i.y += u;
      });
    }, e.prototype.stop = function() {
      this.timeInterval && typeof window < "u" && window.clearInterval(this.timeInterval);
    }, e.prototype.destroy = function() {
      var t = this;
      t.stop(), t.tick = null, t.nodes = null, t.edges = null, t.destroyed = !0;
    }, e.prototype.getType = function() {
      return "gForce";
    }, e;
  }(D9.Base)
);
rl.GForceLayout = L9;
var nl = {}, Ad = {};
function N9(r) {
  const e = +this._x.call(null, r), t = +this._y.call(null, r);
  return YT(this.cover(e, t), e, t, r);
}
function YT(r, e, t, n) {
  if (isNaN(e) || isNaN(t))
    return r;
  var a, i = r._root, o = { data: n }, s = r._x0, u = r._y0, f = r._x1, l = r._y1, c, h, d, v, p, g, y, m;
  if (!i)
    return r._root = o, r;
  for (; i.length; )
    if ((p = e >= (c = (s + f) / 2)) ? s = c : f = c, (g = t >= (h = (u + l) / 2)) ? u = h : l = h, a = i, !(i = i[y = g << 1 | p]))
      return a[y] = o, r;
  if (d = +r._x.call(null, i.data), v = +r._y.call(null, i.data), e === d && t === v)
    return o.next = i, a ? a[y] = o : r._root = o, r;
  do
    a = a ? a[y] = new Array(4) : r._root = new Array(4), (p = e >= (c = (s + f) / 2)) ? s = c : f = c, (g = t >= (h = (u + l) / 2)) ? u = h : l = h;
  while ((y = g << 1 | p) === (m = (v >= h) << 1 | d >= c));
  return a[m] = i, a[y] = o, r;
}
function P9(r) {
  var e, t, n = r.length, a, i, o = new Array(n), s = new Array(n), u = 1 / 0, f = 1 / 0, l = -1 / 0, c = -1 / 0;
  for (t = 0; t < n; ++t)
    isNaN(a = +this._x.call(null, e = r[t])) || isNaN(i = +this._y.call(null, e)) || (o[t] = a, s[t] = i, a < u && (u = a), a > l && (l = a), i < f && (f = i), i > c && (c = i));
  if (u > l || f > c)
    return this;
  for (this.cover(u, f).cover(l, c), t = 0; t < n; ++t)
    YT(this, o[t], s[t], r[t]);
  return this;
}
function k9(r, e) {
  if (isNaN(r = +r) || isNaN(e = +e))
    return this;
  var t = this._x0, n = this._y0, a = this._x1, i = this._y1;
  if (isNaN(t))
    a = (t = Math.floor(r)) + 1, i = (n = Math.floor(e)) + 1;
  else {
    for (var o = a - t || 1, s = this._root, u, f; t > r || r >= a || n > e || e >= i; )
      switch (f = (e < n) << 1 | r < t, u = new Array(4), u[f] = s, s = u, o *= 2, f) {
        case 0:
          a = t + o, i = n + o;
          break;
        case 1:
          t = a - o, i = n + o;
          break;
        case 2:
          a = t + o, n = i - o;
          break;
        case 3:
          t = a - o, n = i - o;
          break;
      }
    this._root && this._root.length && (this._root = s);
  }
  return this._x0 = t, this._y0 = n, this._x1 = a, this._y1 = i, this;
}
function R9() {
  var r = [];
  return this.visit(function(e) {
    if (!e.length)
      do
        r.push(e.data);
      while (e = e.next);
  }), r;
}
function B9(r) {
  return arguments.length ? this.cover(+r[0][0], +r[0][1]).cover(+r[1][0], +r[1][1]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0], [this._x1, this._y1]];
}
function Sn(r, e, t, n, a) {
  this.node = r, this.x0 = e, this.y0 = t, this.x1 = n, this.y1 = a;
}
function F9(r, e, t) {
  var n, a = this._x0, i = this._y0, o, s, u, f, l = this._x1, c = this._y1, h = [], d = this._root, v, p;
  for (d && h.push(new Sn(d, a, i, l, c)), t == null ? t = 1 / 0 : (a = r - t, i = e - t, l = r + t, c = e + t, t *= t); v = h.pop(); )
    if (!(!(d = v.node) || (o = v.x0) > l || (s = v.y0) > c || (u = v.x1) < a || (f = v.y1) < i))
      if (d.length) {
        var g = (o + u) / 2, y = (s + f) / 2;
        h.push(
          new Sn(d[3], g, y, u, f),
          new Sn(d[2], o, y, g, f),
          new Sn(d[1], g, s, u, y),
          new Sn(d[0], o, s, g, y)
        ), (p = (e >= y) << 1 | r >= g) && (v = h[h.length - 1], h[h.length - 1] = h[h.length - 1 - p], h[h.length - 1 - p] = v);
      } else {
        var m = r - +this._x.call(null, d.data), b = e - +this._y.call(null, d.data), E = m * m + b * b;
        if (E < t) {
          var x = Math.sqrt(t = E);
          a = r - x, i = e - x, l = r + x, c = e + x, n = d.data;
        }
      }
  return n;
}
function G9(r) {
  if (isNaN(l = +this._x.call(null, r)) || isNaN(c = +this._y.call(null, r)))
    return this;
  var e, t = this._root, n, a, i, o = this._x0, s = this._y0, u = this._x1, f = this._y1, l, c, h, d, v, p, g, y;
  if (!t)
    return this;
  if (t.length)
    for (; ; ) {
      if ((v = l >= (h = (o + u) / 2)) ? o = h : u = h, (p = c >= (d = (s + f) / 2)) ? s = d : f = d, e = t, !(t = t[g = p << 1 | v]))
        return this;
      if (!t.length)
        break;
      (e[g + 1 & 3] || e[g + 2 & 3] || e[g + 3 & 3]) && (n = e, y = g);
    }
  for (; t.data !== r; )
    if (a = t, !(t = t.next))
      return this;
  return (i = t.next) && delete t.next, a ? (i ? a.next = i : delete a.next, this) : e ? (i ? e[g] = i : delete e[g], (t = e[0] || e[1] || e[2] || e[3]) && t === (e[3] || e[2] || e[1] || e[0]) && !t.length && (n ? n[y] = t : this._root = t), this) : (this._root = i, this);
}
function z9(r) {
  for (var e = 0, t = r.length; e < t; ++e)
    this.remove(r[e]);
  return this;
}
function U9() {
  return this._root;
}
function j9() {
  var r = 0;
  return this.visit(function(e) {
    if (!e.length)
      do
        ++r;
      while (e = e.next);
  }), r;
}
function $9(r) {
  var e = [], t, n = this._root, a, i, o, s, u;
  for (n && e.push(new Sn(n, this._x0, this._y0, this._x1, this._y1)); t = e.pop(); )
    if (!r(n = t.node, i = t.x0, o = t.y0, s = t.x1, u = t.y1) && n.length) {
      var f = (i + s) / 2, l = (o + u) / 2;
      (a = n[3]) && e.push(new Sn(a, f, l, s, u)), (a = n[2]) && e.push(new Sn(a, i, l, f, u)), (a = n[1]) && e.push(new Sn(a, f, o, s, l)), (a = n[0]) && e.push(new Sn(a, i, o, f, l));
    }
  return this;
}
function W9(r) {
  var e = [], t = [], n;
  for (this._root && e.push(new Sn(this._root, this._x0, this._y0, this._x1, this._y1)); n = e.pop(); ) {
    var a = n.node;
    if (a.length) {
      var i, o = n.x0, s = n.y0, u = n.x1, f = n.y1, l = (o + u) / 2, c = (s + f) / 2;
      (i = a[0]) && e.push(new Sn(i, o, s, l, c)), (i = a[1]) && e.push(new Sn(i, l, s, u, c)), (i = a[2]) && e.push(new Sn(i, o, c, l, f)), (i = a[3]) && e.push(new Sn(i, l, c, u, f));
    }
    t.push(n);
  }
  for (; n = t.pop(); )
    r(n.node, n.x0, n.y0, n.x1, n.y1);
  return this;
}
function X9(r) {
  return r[0];
}
function V9(r) {
  return arguments.length ? (this._x = r, this) : this._x;
}
function Y9(r) {
  return r[1];
}
function H9(r) {
  return arguments.length ? (this._y = r, this) : this._y;
}
function Cd(r, e, t) {
  var n = new Ky(e ?? X9, t ?? Y9, NaN, NaN, NaN, NaN);
  return r == null ? n : n.addAll(r);
}
function Ky(r, e, t, n, a, i) {
  this._x = r, this._y = e, this._x0 = t, this._y0 = n, this._x1 = a, this._y1 = i, this._root = void 0;
}
function gw(r) {
  for (var e = { data: r.data }, t = e; r = r.next; )
    t = t.next = { data: r.data };
  return e;
}
var An = Cd.prototype = Ky.prototype;
An.copy = function() {
  var r = new Ky(this._x, this._y, this._x0, this._y0, this._x1, this._y1), e = this._root, t, n;
  if (!e)
    return r;
  if (!e.length)
    return r._root = gw(e), r;
  for (t = [{ source: e, target: r._root = new Array(4) }]; e = t.pop(); )
    for (var a = 0; a < 4; ++a)
      (n = e.source[a]) && (n.length ? t.push({ source: n, target: e.target[a] = new Array(4) }) : e.target[a] = gw(n));
  return r;
};
An.add = N9;
An.addAll = P9;
An.cover = k9;
An.data = R9;
An.extent = B9;
An.find = F9;
An.remove = G9;
An.removeAll = z9;
An.root = U9;
An.size = j9;
An.visit = $9;
An.visitAfter = W9;
An.x = V9;
An.y = H9;
const K9 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  quadtree: Cd
}, Symbol.toStringTag, { value: "Module" })), q9 = /* @__PURE__ */ ri(K9);
Object.defineProperty(Ad, "__esModule", { value: !0 });
Ad.forceNBody = void 0;
var Z9 = q9, Q9 = 0.81, yw = 0.1;
function J9(r, e, t, n, a) {
  var i = t / n, o = r.map(function(u, f) {
    var l = e[u.id], c = l.data, h = l.x, d = l.y, v = l.size, p = c.layout.force.nodeStrength;
    return {
      x: h,
      y: d,
      size: v,
      index: f,
      vx: 0,
      vy: 0,
      weight: i * p
    };
  }), s = (0, Z9.quadtree)(o, function(u) {
    return u.x;
  }, function(u) {
    return u.y;
  }).visitAfter(e7);
  return o.forEach(function(u) {
    r7(u, s);
  }), o.map(function(u, f) {
    var l = e[r[f].id], c = l.data.layout.force.mass, h = c === void 0 ? 1 : c;
    a[2 * f] = u.vx / h, a[2 * f + 1] = u.vy / h;
  }), a;
}
Ad.forceNBody = J9;
function e7(r) {
  var e = 0, t = 0, n = 0;
  if (r.length) {
    for (var a = 0; a < 4; a++) {
      var i = r[a];
      i && i.weight && (e += i.weight, t += i.x * i.weight, n += i.y * i.weight);
    }
    r.x = t / e, r.y = n / e, r.weight = e;
  } else {
    var i = r;
    r.x = i.data.x, r.y = i.data.y, r.weight = i.data.weight;
  }
}
var t7 = function(r, e, t, n, a, i) {
  var o = i.x - r.x || yw, s = i.y - r.y || yw, u = n - e, f = o * o + s * s, l = Math.sqrt(f) * f;
  if (u * u * Q9 < f) {
    var c = r.weight / l;
    return i.vx += o * c, i.vy += s * c, !0;
  }
  if (r.length)
    return !1;
  if (r.data !== i) {
    var c = r.data.weight / l;
    i.vx += o * c, i.vy += s * c;
  }
};
function r7(r, e) {
  e.visit(function(t, n, a, i, o) {
    return t7(t, n, a, i, o, r);
  });
}
var n7 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), pa = be && be.__assign || function() {
  return pa = Object.assign || function(r) {
    for (var e, t = 1, n = arguments.length; t < n; t++) {
      e = arguments[t];
      for (var a in e)
        Object.prototype.hasOwnProperty.call(e, a) && (r[a] = e[a]);
    }
    return r;
  }, pa.apply(this, arguments);
};
Object.defineProperty(nl, "__esModule", { value: !0 });
nl.Force2Layout = void 0;
var a7 = Gr, Jr = Dr(), i7 = Ad, Bp = function(r, e) {
  var t;
  return r ? (0, Jr.isNumber)(r) ? t = function(n) {
    return r;
  } : t = r : t = function(n) {
    return e || 1;
  }, t;
}, o7 = (
  /** @class */
  function(r) {
    n7(e, r);
    function e(t) {
      var n = r.call(this) || this;
      n.maxIteration = 1e3, n.workerEnabled = !1, n.edgeStrength = 200, n.nodeStrength = 1e3, n.coulombDisScale = 5e-3, n.damping = 0.9, n.maxSpeed = 500, n.minMovement = 0.4, n.interval = 0.02, n.factor = 1, n.linkDistance = 200, n.gravity = 0, n.clusterNodeStrength = 20, n.preventOverlap = !0, n.distanceThresholdMode = "mean", n.tick = function() {
      }, n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.nodeMap = {}, n.nodeIdxMap = {}, n.judgingDistance = 0, n.centripetalOptions = {
        leaf: 2,
        single: 2,
        others: 1,
        // eslint-disable-next-line
        center: function(i) {
          return {
            x: n.width / 2,
            y: n.height / 2
          };
        }
      };
      var a = t.getMass;
      return n.propsGetMass = a, n.updateCfg(t), n;
    }
    return e.prototype.getCentripetalOptions = function() {
      var t = this, n = t.leafCluster, a = t.clustering, i = t.nodeClusterBy, o = t.nodes, s = t.nodeMap, u = t.clusterNodeStrength, f = function(b) {
        return typeof u == "function" ? u(b) : u;
      }, l = {}, c;
      if (n) {
        c = this.getSameTypeLeafMap() || {};
        var h = Array.from(new Set(o == null ? void 0 : o.map(function(b) {
          return b[i];
        }))) || [];
        l = {
          single: 100,
          leaf: function(b, E, x) {
            var w = c[b.id] || {}, _ = w.relativeLeafNodes, M = w.sameTypeLeafNodes;
            return (M == null ? void 0 : M.length) === (_ == null ? void 0 : _.length) || (h == null ? void 0 : h.length) === 1 ? 1 : f(b);
          },
          others: 1,
          center: function(b, E, x) {
            var w, _ = (((w = b.data) === null || w === void 0 ? void 0 : w.layout) || {}).degree;
            if (!_)
              return {
                x: 100,
                y: 100
              };
            var M;
            if (_ === 1) {
              var A = (c[b.id] || {}).sameTypeLeafNodes, S = A === void 0 ? [] : A;
              S.length === 1 ? M = void 0 : S.length > 1 && (M = (0, Jr.getAvgNodePosition)(S));
            } else
              M = void 0;
            return {
              x: M == null ? void 0 : M.x,
              y: M == null ? void 0 : M.y
            };
          }
        };
      }
      if (a) {
        c || (c = this.getSameTypeLeafMap());
        var d = Array.from(new Set(o.map(function(b, E) {
          return b[i];
        }))).filter(function(b) {
          return b !== void 0;
        }), v = {};
        d.forEach(function(b) {
          var E = o.filter(function(x) {
            return x[i] === b;
          }).map(function(x) {
            return s[x.id];
          });
          v[b] = (0, Jr.getAvgNodePosition)(E);
        }), l = {
          single: function(b) {
            return f(b);
          },
          leaf: function(b) {
            return f(b);
          },
          others: function(b) {
            return f(b);
          },
          center: function(b, E, x) {
            var w = v[b[i]];
            return {
              x: w == null ? void 0 : w.x,
              y: w == null ? void 0 : w.y
            };
          }
        };
      }
      this.centripetalOptions = pa(pa({}, this.centripetalOptions), l);
      var p = this.centripetalOptions, g = p.leaf, y = p.single, m = p.others;
      g && typeof g != "function" && (this.centripetalOptions.leaf = function() {
        return g;
      }), y && typeof y != "function" && (this.centripetalOptions.single = function() {
        return y;
      }), m && typeof m != "function" && (this.centripetalOptions.others = function() {
        return m;
      });
    }, e.prototype.updateCfg = function(t) {
      t && Object.assign(this, t);
    }, e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 500,
        gravity: 10,
        enableTick: !0,
        animate: !0
      };
    }, e.prototype.execute = function() {
      var t = this;
      t.stop();
      var n = t.nodes, a = t.edges, i = t.defSpringLen;
      if (t.judgingDistance = 0, !n || n.length === 0) {
        t.onLayoutEnd([]);
        return;
      }
      !t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight), t.center || (t.center = [t.width / 2, t.height / 2]);
      var o = t.center;
      if (n.length === 1) {
        n[0].x = o[0], n[0].y = o[1], t.onLayoutEnd([pa({}, n[0])]);
        return;
      }
      t.degreesMap = (0, Jr.getDegreeMap)(n, a), t.propsGetMass ? t.getMass = t.propsGetMass : t.getMass = function(d) {
        var v = 1;
        (0, Jr.isNumber)(d.mass) && (v = d.mass);
        var p = t.degreesMap[d.id].all;
        return !p || p < 5 ? v : p * 5 * v;
      };
      var s = t.nodeSize, u;
      if (t.preventOverlap) {
        var f = t.nodeSpacing, l;
        (0, Jr.isNumber)(f) ? l = function() {
          return f;
        } : (0, Jr.isFunction)(f) ? l = f : l = function() {
          return 0;
        }, s ? (0, Jr.isArray)(s) ? u = function(d) {
          return Math.max(s[0], s[1]) + l(d);
        } : u = function(d) {
          return s + l(d);
        } : u = function(d) {
          return d.size ? (0, Jr.isArray)(d.size) ? Math.max(d.size[0], d.size[1]) + l(d) : (0, Jr.isObject)(d.size) ? Math.max(d.size.width, d.size.height) + l(d) : d.size + l(d) : 10 + l(d);
        };
      }
      t.nodeSize = u, t.linkDistance = Bp(t.linkDistance, 1), t.nodeStrength = Bp(t.nodeStrength, 1), t.edgeStrength = Bp(t.edgeStrength, 1);
      var c = {}, h = {};
      n.forEach(function(d, v) {
        (0, Jr.isNumber)(d.x) || (d.x = Math.random() * t.width), (0, Jr.isNumber)(d.y) || (d.y = Math.random() * t.height);
        var p = t.degreesMap[d.id];
        c[d.id] = pa(pa({}, d), { data: pa(pa({}, d.data), { size: t.nodeSize(d) || 30, layout: {
          inDegree: p.in,
          outDegree: p.out,
          degree: p.all,
          tDegree: p.in,
          sDegree: p.out,
          force: {
            mass: t.getMass(d),
            nodeStrength: t.nodeStrength(d, a)
          }
        } }) }), h[d.id] = v;
      }), t.nodeMap = c, t.nodeIdxMap = h, t.edgeInfos = [], a == null || a.forEach(function(d) {
        var v = c[d.source], p = c[d.target];
        !v || !p ? elf.edgeInfos.push({}) : t.edgeInfos.push({
          edgeStrength: t.edgeStrength(d),
          linkDistance: i ? i(pa(pa({}, d), { source: v, target: p }), v, p) : t.linkDistance(d, v, p) || 1 + (s(v) + s(v) || 0) / 2
        });
      }), this.getCentripetalOptions(), t.onLayoutEnd = t.onLayoutEnd || function() {
      }, t.run();
    }, e.prototype.run = function() {
      var t = this, n = t.maxIteration, a = t.nodes, i = t.edges, o = t.workerEnabled, s = t.minMovement, u = t.animate, f = t.nodeMap, l = t.height;
      if (t.currentMinY = 0, t.currentMaxY = l, !!a) {
        var c = [];
        if (a.forEach(function(y, m) {
          c[2 * m] = 0, c[2 * m + 1] = 0;
        }), this.defSideCoe && typeof this.defSideCoe == "function") {
          var h = {};
          i.forEach(function(y) {
            var m = y.source, b = y.target;
            h[m] = h[m] || [], h[m].push(y), h[b] = h[b] || [], h[b].push(y);
          }), this.relatedEdges = h;
        }
        var d = n, v = !u;
        if (o || v) {
          for (var p = 0; (t.judgingDistance > s || p < 1) && p < d; p++)
            t.runOneStep(p, c);
          t.onLayoutEnd(Object.values(f));
        } else {
          if (typeof window > "u")
            return;
          var g = 0;
          this.timeInterval = window.setInterval(function() {
            a && (t.runOneStep(g, c), g++, (g >= d || t.judgingDistance < s) && (t.onLayoutEnd(Object.values(f)), window.clearInterval(t.timeInterval)));
          }, 0);
        }
      }
    }, e.prototype.runOneStep = function(t, n) {
      var a, i = this, o = i.nodes, s = i.edges;
      i.nodeMap;
      var u = i.monitor, f = [];
      if (o != null && o.length) {
        i.calRepulsive(f), s && i.calAttractive(f), i.calGravity(f), i.attractToSide(f);
        var l = i.interval;
        if (i.updateVelocity(f, n, l), i.updatePosition(n, l), (a = i.tick) === null || a === void 0 || a.call(i), u) {
          var c = this.calTotalEnergy(f);
          u({ energy: c, nodes: o, edges: s, iterations: t });
        }
      }
    }, e.prototype.calTotalEnergy = function(t) {
      var n = this, a = n.nodes, i = n.nodeMap;
      if (!(a != null && a.length))
        return 0;
      var o = 0;
      return a.forEach(function(s, u) {
        var f = t[2 * u], l = t[2 * u + 1], c = f * f + l * l, h = i[s.id].data.layout.force.mass, d = h === void 0 ? 1 : h;
        o += d * c * 0.5;
      }), o;
    }, e.prototype.calRepulsive = function(t) {
      var n = this, a = n.nodes, i = n.nodeMap, o = n.factor, s = n.coulombDisScale;
      n.nodeSize, (0, i7.forceNBody)(a, i, o, s * s, t);
    }, e.prototype.calAttractive = function(t) {
      var n = this, a = n.edges, i = n.nodeMap, o = n.nodeIdxMap, s = n.edgeInfos;
      n.nodeSize, a.forEach(function(u, f) {
        var l = (0, Jr.getEdgeTerminal)(u, "source"), c = (0, Jr.getEdgeTerminal)(u, "target"), h = i[l], d = i[c];
        if (!(!h || !d)) {
          var v = d.x - h.x, p = d.y - h.y;
          !v && !p && (v = Math.random() * 0.01, p = Math.random() * 0.01);
          var g = Math.sqrt(v * v + p * p), y = v / g, m = p / g, b = s[f] || {}, E = b.linkDistance, x = E === void 0 ? 200 : E, w = b.edgeStrength, _ = w === void 0 ? 200 : w, M = x - g, A = M * _, S = h.data.layout.force.mass || 1, T = d.data.layout.force.mass || 1, C = 1 / S, O = 1 / T, L = y * A, R = m * A, P = 2 * o[l], z = 2 * o[c];
          t[P] -= L * C, t[P + 1] -= R * C, t[z] += L * O, t[z + 1] += R * O;
        }
      });
    }, e.prototype.calGravity = function(t) {
      var n, a = this, i = a.nodes, o = a.edges, s = o === void 0 ? [] : o, u = a.nodeMap, f = a.width, l = a.height, c = a.center, h = a.gravity, d = a.degreesMap, v = a.centripetalOptions;
      if (i)
        for (var p = i.length, g = 0; g < p; g++) {
          var y = 2 * g, m = u[i[g].id], b = m.data.layout.force.mass, E = b === void 0 ? 1 : b, x = 0, w = 0, _ = h, M = d[m.id], A = M.in, S = M.out, T = M.all, C = (n = a.getCenter) === null || n === void 0 ? void 0 : n.call(a, m, T);
          if (C) {
            var O = C[0], L = C[1], R = C[2];
            x = m.x - O, w = m.y - L, _ = R;
          } else
            x = m.x - c[0], w = m.y - c[1];
          if (_ && (t[y] -= _ * x / E, t[y + 1] -= _ * w / E), v) {
            var P = v.leaf, z = v.single, V = v.others, N = v.center, F = (N == null ? void 0 : N(m, i, s, f, l)) || {
              x: 0,
              y: 0,
              centerStrength: 0
            }, q = F.x, te = F.y, re = F.centerStrength;
            if (!(0, Jr.isNumber)(q) || !(0, Jr.isNumber)(te))
              continue;
            var J = (m.x - q) / E, ye = (m.y - te) / E;
            if (re && (t[y] -= re * J, t[y + 1] -= re * ye), T === 0) {
              var Be = z(m);
              if (!Be)
                continue;
              t[y] -= Be * J, t[y + 1] -= Be * ye;
              continue;
            }
            if (A === 0 || S === 0) {
              var Pe = P(m, i, s);
              if (!Pe)
                continue;
              t[y] -= Pe * J, t[y + 1] -= Pe * ye;
              continue;
            }
            var et = V(m);
            if (!et)
              continue;
            t[y] -= et * J, t[y + 1] -= et * ye;
          }
        }
    }, e.prototype.attractToSide = function(t) {
      var n = this, a = n.defSideCoe;
      n.height;
      var i = n.nodes, o = n.relatedEdges, s = n.currentMinY, u = s === void 0 ? 0 : s, f = n.currentMaxY, l = f === void 0 ? this.height : f;
      !a || typeof a != "function" || !(i != null && i.length) || i.forEach(function(c, h) {
        var d = a(c, o[c.id] || []);
        if (d !== 0) {
          var v = d < 0 ? u : l, p = Math.abs(d);
          t[2 * h + 1] -= p * (c.y - v);
        }
      });
    }, e.prototype.updateVelocity = function(t, n, a) {
      var i = this, o = i.nodes, s = i.damping, u = i.maxSpeed;
      o != null && o.length && o.forEach(function(f, l) {
        var c = (n[2 * l] + t[2 * l] * a) * s || 0.01, h = (n[2 * l + 1] + t[2 * l + 1] * a) * s || 0.01, d = Math.sqrt(c * c + h * h);
        if (d > u) {
          var v = u / d;
          c = v * c, h = v * h;
        }
        n[2 * l] = c, n[2 * l + 1] = h;
      });
    }, e.prototype.updatePosition = function(t, n) {
      var a = this, i = a.nodes, o = a.distanceThresholdMode, s = a.nodeMap;
      if (!(i != null && i.length)) {
        this.judgingDistance = 0;
        return;
      }
      var u = 0;
      o === "max" ? a.judgingDistance = -1 / 0 : o === "min" && (a.judgingDistance = 1 / 0);
      var f = 1 / 0, l = -1 / 0;
      i.forEach(function(c, h) {
        var d = s[c.id];
        if ((0, Jr.isNumber)(c.fx) && (0, Jr.isNumber)(c.fy)) {
          c.x = c.fx, c.y = c.fy, d.x = c.x, d.y = c.y;
          return;
        }
        var v = t[2 * h] * n, p = t[2 * h + 1] * n;
        c.x += v, c.y += p, d.x = c.x, d.y = c.y, c.y < f && (f = c.y), c.y > l && (l = c.y);
        var g = Math.sqrt(v * v + p * p);
        switch (o) {
          case "max":
            a.judgingDistance < g && (a.judgingDistance = g);
            break;
          case "min":
            a.judgingDistance > g && (a.judgingDistance = g);
            break;
          default:
            u = u + g;
            break;
        }
      }), this.currentMinY = f, this.currentMaxY = l, (!o || o === "mean") && (a.judgingDistance = u / i.length);
    }, e.prototype.stop = function() {
      this.timeInterval && typeof window < "u" && window.clearInterval(this.timeInterval);
    }, e.prototype.destroy = function() {
      var t = this;
      t.stop(), t.tick = null, t.nodes = null, t.edges = null, t.destroyed = !0;
    }, e.prototype.getType = function() {
      return "force2";
    }, e.prototype.getSameTypeLeafMap = function() {
      var t = this, n = t.nodeClusterBy, a = t.nodes, i = t.edges, o = t.nodeMap, s = t.degreesMap;
      if (a != null && a.length) {
        var u = {};
        return a.forEach(function(f, l) {
          var c = s[f.id].all;
          c === 1 && (u[f.id] = (0, Jr.getCoreNodeAndRelativeLeafNodes)("leaf", f, i, n, s, o));
        }), u;
      }
    }, e;
  }(a7.Base)
);
nl.Force2Layout = o7;
var qy = {}, Td = {};
function s7(r, e) {
  var t, n = 1;
  r == null && (r = 0), e == null && (e = 0);
  function a() {
    var i, o = t.length, s, u = 0, f = 0;
    for (i = 0; i < o; ++i)
      s = t[i], u += s.x, f += s.y;
    for (u = (u / o - r) * n, f = (f / o - e) * n, i = 0; i < o; ++i)
      s = t[i], s.x -= u, s.y -= f;
  }
  return a.initialize = function(i) {
    t = i;
  }, a.x = function(i) {
    return arguments.length ? (r = +i, a) : r;
  }, a.y = function(i) {
    return arguments.length ? (e = +i, a) : e;
  }, a.strength = function(i) {
    return arguments.length ? (n = +i, a) : n;
  }, a;
}
function rn(r) {
  return function() {
    return r;
  };
}
function Hi(r) {
  return (r() - 0.5) * 1e-6;
}
function u7(r) {
  return r.x + r.vx;
}
function f7(r) {
  return r.y + r.vy;
}
function l7(r) {
  var e, t, n, a = 1, i = 1;
  typeof r != "function" && (r = rn(r == null ? 1 : +r));
  function o() {
    for (var f, l = e.length, c, h, d, v, p, g, y = 0; y < i; ++y)
      for (c = Cd(e, u7, f7).visitAfter(s), f = 0; f < l; ++f)
        h = e[f], p = t[h.index], g = p * p, d = h.x + h.vx, v = h.y + h.vy, c.visit(m);
    function m(b, E, x, w, _) {
      var M = b.data, A = b.r, S = p + A;
      if (M) {
        if (M.index > h.index) {
          var T = d - M.x - M.vx, C = v - M.y - M.vy, O = T * T + C * C;
          O < S * S && (T === 0 && (T = Hi(n), O += T * T), C === 0 && (C = Hi(n), O += C * C), O = (S - (O = Math.sqrt(O))) / O * a, h.vx += (T *= O) * (S = (A *= A) / (g + A)), h.vy += (C *= O) * S, M.vx -= T * (S = 1 - S), M.vy -= C * S);
        }
        return;
      }
      return E > d + S || w < d - S || x > v + S || _ < v - S;
    }
  }
  function s(f) {
    if (f.data)
      return f.r = t[f.data.index];
    for (var l = f.r = 0; l < 4; ++l)
      f[l] && f[l].r > f.r && (f.r = f[l].r);
  }
  function u() {
    if (e) {
      var f, l = e.length, c;
      for (t = new Array(l), f = 0; f < l; ++f)
        c = e[f], t[c.index] = +r(c, f, e);
    }
  }
  return o.initialize = function(f, l) {
    e = f, n = l, u();
  }, o.iterations = function(f) {
    return arguments.length ? (i = +f, o) : i;
  }, o.strength = function(f) {
    return arguments.length ? (a = +f, o) : a;
  }, o.radius = function(f) {
    return arguments.length ? (r = typeof f == "function" ? f : rn(+f), u(), o) : r;
  }, o;
}
function c7(r) {
  return r.index;
}
function mw(r, e) {
  var t = r.get(e);
  if (!t)
    throw new Error("node not found: " + e);
  return t;
}
function h7(r) {
  var e = c7, t = c, n, a = rn(30), i, o, s, u, f, l = 1;
  r == null && (r = []);
  function c(g) {
    return 1 / Math.min(s[g.source.index], s[g.target.index]);
  }
  function h(g) {
    for (var y = 0, m = r.length; y < l; ++y)
      for (var b = 0, E, x, w, _, M, A, S; b < m; ++b)
        E = r[b], x = E.source, w = E.target, _ = w.x + w.vx - x.x - x.vx || Hi(f), M = w.y + w.vy - x.y - x.vy || Hi(f), A = Math.sqrt(_ * _ + M * M), A = (A - i[b]) / A * g * n[b], _ *= A, M *= A, w.vx -= _ * (S = u[b]), w.vy -= M * S, x.vx += _ * (S = 1 - S), x.vy += M * S;
  }
  function d() {
    if (o) {
      var g, y = o.length, m = r.length, b = new Map(o.map((x, w) => [e(x, w, o), x])), E;
      for (g = 0, s = new Array(y); g < m; ++g)
        E = r[g], E.index = g, typeof E.source != "object" && (E.source = mw(b, E.source)), typeof E.target != "object" && (E.target = mw(b, E.target)), s[E.source.index] = (s[E.source.index] || 0) + 1, s[E.target.index] = (s[E.target.index] || 0) + 1;
      for (g = 0, u = new Array(m); g < m; ++g)
        E = r[g], u[g] = s[E.source.index] / (s[E.source.index] + s[E.target.index]);
      n = new Array(m), v(), i = new Array(m), p();
    }
  }
  function v() {
    if (o)
      for (var g = 0, y = r.length; g < y; ++g)
        n[g] = +t(r[g], g, r);
  }
  function p() {
    if (o)
      for (var g = 0, y = r.length; g < y; ++g)
        i[g] = +a(r[g], g, r);
  }
  return h.initialize = function(g, y) {
    o = g, f = y, d();
  }, h.links = function(g) {
    return arguments.length ? (r = g, d(), h) : r;
  }, h.id = function(g) {
    return arguments.length ? (e = g, h) : e;
  }, h.iterations = function(g) {
    return arguments.length ? (l = +g, h) : l;
  }, h.strength = function(g) {
    return arguments.length ? (t = typeof g == "function" ? g : rn(+g), v(), h) : t;
  }, h.distance = function(g) {
    return arguments.length ? (a = typeof g == "function" ? g : rn(+g), p(), h) : a;
  }, h;
}
var d7 = { value: () => {
} };
function HT() {
  for (var r = 0, e = arguments.length, t = {}, n; r < e; ++r) {
    if (!(n = arguments[r] + "") || n in t || /[\s.]/.test(n))
      throw new Error("illegal type: " + n);
    t[n] = [];
  }
  return new th(t);
}
function th(r) {
  this._ = r;
}
function v7(r, e) {
  return r.trim().split(/^|\s+/).map(function(t) {
    var n = "", a = t.indexOf(".");
    if (a >= 0 && (n = t.slice(a + 1), t = t.slice(0, a)), t && !e.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    return { type: t, name: n };
  });
}
th.prototype = HT.prototype = {
  constructor: th,
  on: function(r, e) {
    var t = this._, n = v7(r + "", t), a, i = -1, o = n.length;
    if (arguments.length < 2) {
      for (; ++i < o; )
        if ((a = (r = n[i]).type) && (a = p7(t[a], r.name)))
          return a;
      return;
    }
    if (e != null && typeof e != "function")
      throw new Error("invalid callback: " + e);
    for (; ++i < o; )
      if (a = (r = n[i]).type)
        t[a] = bw(t[a], r.name, e);
      else if (e == null)
        for (a in t)
          t[a] = bw(t[a], r.name, null);
    return this;
  },
  copy: function() {
    var r = {}, e = this._;
    for (var t in e)
      r[t] = e[t].slice();
    return new th(r);
  },
  call: function(r, e) {
    if ((a = arguments.length - 2) > 0)
      for (var t = new Array(a), n = 0, a, i; n < a; ++n)
        t[n] = arguments[n + 2];
    if (!this._.hasOwnProperty(r))
      throw new Error("unknown type: " + r);
    for (i = this._[r], n = 0, a = i.length; n < a; ++n)
      i[n].value.apply(e, t);
  },
  apply: function(r, e, t) {
    if (!this._.hasOwnProperty(r))
      throw new Error("unknown type: " + r);
    for (var n = this._[r], a = 0, i = n.length; a < i; ++a)
      n[a].value.apply(e, t);
  }
};
function p7(r, e) {
  for (var t = 0, n = r.length, a; t < n; ++t)
    if ((a = r[t]).name === e)
      return a.value;
}
function bw(r, e, t) {
  for (var n = 0, a = r.length; n < a; ++n)
    if (r[n].name === e) {
      r[n] = d7, r = r.slice(0, n).concat(r.slice(n + 1));
      break;
    }
  return t != null && r.push({ name: e, value: t }), r;
}
var iu = 0, lf = 0, Xu = 0, KT = 1e3, Rh, cf, Bh = 0, Vo = 0, Id = 0, Bf = typeof performance == "object" && performance.now ? performance : Date, qT = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(r) {
  setTimeout(r, 17);
};
function ZT() {
  return Vo || (qT(g7), Vo = Bf.now() + Id);
}
function g7() {
  Vo = 0;
}
function hg() {
  this._call = this._time = this._next = null;
}
hg.prototype = QT.prototype = {
  constructor: hg,
  restart: function(r, e, t) {
    if (typeof r != "function")
      throw new TypeError("callback is not a function");
    t = (t == null ? ZT() : +t) + (e == null ? 0 : +e), !this._next && cf !== this && (cf ? cf._next = this : Rh = this, cf = this), this._call = r, this._time = t, dg();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, dg());
  }
};
function QT(r, e, t) {
  var n = new hg();
  return n.restart(r, e, t), n;
}
function y7() {
  ZT(), ++iu;
  for (var r = Rh, e; r; )
    (e = Vo - r._time) >= 0 && r._call.call(null, e), r = r._next;
  --iu;
}
function Ew() {
  Vo = (Bh = Bf.now()) + Id, iu = lf = 0;
  try {
    y7();
  } finally {
    iu = 0, b7(), Vo = 0;
  }
}
function m7() {
  var r = Bf.now(), e = r - Bh;
  e > KT && (Id -= e, Bh = r);
}
function b7() {
  for (var r, e = Rh, t, n = 1 / 0; e; )
    e._call ? (n > e._time && (n = e._time), r = e, e = e._next) : (t = e._next, e._next = null, e = r ? r._next = t : Rh = t);
  cf = r, dg(n);
}
function dg(r) {
  if (!iu) {
    lf && (lf = clearTimeout(lf));
    var e = r - Vo;
    e > 24 ? (r < 1 / 0 && (lf = setTimeout(Ew, r - Bf.now() - Id)), Xu && (Xu = clearInterval(Xu))) : (Xu || (Bh = Bf.now(), Xu = setInterval(m7, KT)), iu = 1, qT(Ew));
  }
}
const E7 = 1664525, x7 = 1013904223, xw = 4294967296;
function w7() {
  let r = 1;
  return () => (r = (E7 * r + x7) % xw) / xw;
}
function _7(r) {
  return r.x;
}
function M7(r) {
  return r.y;
}
var S7 = 10, A7 = Math.PI * (3 - Math.sqrt(5));
function C7(r) {
  var e, t = 1, n = 1e-3, a = 1 - Math.pow(n, 1 / 300), i = 0, o = 0.6, s = /* @__PURE__ */ new Map(), u = QT(c), f = HT("tick", "end"), l = w7();
  r == null && (r = []);
  function c() {
    h(), f.call("tick", e), t < n && (u.stop(), f.call("end", e));
  }
  function h(p) {
    var g, y = r.length, m;
    p === void 0 && (p = 1);
    for (var b = 0; b < p; ++b)
      for (t += (i - t) * a, s.forEach(function(E) {
        E(t);
      }), g = 0; g < y; ++g)
        m = r[g], m.fx == null ? m.x += m.vx *= o : (m.x = m.fx, m.vx = 0), m.fy == null ? m.y += m.vy *= o : (m.y = m.fy, m.vy = 0);
    return e;
  }
  function d() {
    for (var p = 0, g = r.length, y; p < g; ++p) {
      if (y = r[p], y.index = p, y.fx != null && (y.x = y.fx), y.fy != null && (y.y = y.fy), isNaN(y.x) || isNaN(y.y)) {
        var m = S7 * Math.sqrt(0.5 + p), b = p * A7;
        y.x = m * Math.cos(b), y.y = m * Math.sin(b);
      }
      (isNaN(y.vx) || isNaN(y.vy)) && (y.vx = y.vy = 0);
    }
  }
  function v(p) {
    return p.initialize && p.initialize(r, l), p;
  }
  return d(), e = {
    tick: h,
    restart: function() {
      return u.restart(c), e;
    },
    stop: function() {
      return u.stop(), e;
    },
    nodes: function(p) {
      return arguments.length ? (r = p, d(), s.forEach(v), e) : r;
    },
    alpha: function(p) {
      return arguments.length ? (t = +p, e) : t;
    },
    alphaMin: function(p) {
      return arguments.length ? (n = +p, e) : n;
    },
    alphaDecay: function(p) {
      return arguments.length ? (a = +p, e) : +a;
    },
    alphaTarget: function(p) {
      return arguments.length ? (i = +p, e) : i;
    },
    velocityDecay: function(p) {
      return arguments.length ? (o = 1 - p, e) : 1 - o;
    },
    randomSource: function(p) {
      return arguments.length ? (l = p, s.forEach(v), e) : l;
    },
    force: function(p, g) {
      return arguments.length > 1 ? (g == null ? s.delete(p) : s.set(p, v(g)), e) : s.get(p);
    },
    find: function(p, g, y) {
      var m = 0, b = r.length, E, x, w, _, M;
      for (y == null ? y = 1 / 0 : y *= y, m = 0; m < b; ++m)
        _ = r[m], E = p - _.x, x = g - _.y, w = E * E + x * x, w < y && (M = _, y = w);
      return M;
    },
    on: function(p, g) {
      return arguments.length > 1 ? (f.on(p, g), e) : f.on(p);
    }
  };
}
function T7() {
  var r, e, t, n, a = rn(-30), i, o = 1, s = 1 / 0, u = 0.81;
  function f(d) {
    var v, p = r.length, g = Cd(r, _7, M7).visitAfter(c);
    for (n = d, v = 0; v < p; ++v)
      e = r[v], g.visit(h);
  }
  function l() {
    if (r) {
      var d, v = r.length, p;
      for (i = new Array(v), d = 0; d < v; ++d)
        p = r[d], i[p.index] = +a(p, d, r);
    }
  }
  function c(d) {
    var v = 0, p, g, y = 0, m, b, E;
    if (d.length) {
      for (m = b = E = 0; E < 4; ++E)
        (p = d[E]) && (g = Math.abs(p.value)) && (v += p.value, y += g, m += g * p.x, b += g * p.y);
      d.x = m / y, d.y = b / y;
    } else {
      p = d, p.x = p.data.x, p.y = p.data.y;
      do
        v += i[p.data.index];
      while (p = p.next);
    }
    d.value = v;
  }
  function h(d, v, p, g) {
    if (!d.value)
      return !0;
    var y = d.x - e.x, m = d.y - e.y, b = g - v, E = y * y + m * m;
    if (b * b / u < E)
      return E < s && (y === 0 && (y = Hi(t), E += y * y), m === 0 && (m = Hi(t), E += m * m), E < o && (E = Math.sqrt(o * E)), e.vx += y * d.value * n / E, e.vy += m * d.value * n / E), !0;
    if (d.length || E >= s)
      return;
    (d.data !== e || d.next) && (y === 0 && (y = Hi(t), E += y * y), m === 0 && (m = Hi(t), E += m * m), E < o && (E = Math.sqrt(o * E)));
    do
      d.data !== e && (b = i[d.data.index] * n / E, e.vx += y * b, e.vy += m * b);
    while (d = d.next);
  }
  return f.initialize = function(d, v) {
    r = d, t = v, l();
  }, f.strength = function(d) {
    return arguments.length ? (a = typeof d == "function" ? d : rn(+d), l(), f) : a;
  }, f.distanceMin = function(d) {
    return arguments.length ? (o = d * d, f) : Math.sqrt(o);
  }, f.distanceMax = function(d) {
    return arguments.length ? (s = d * d, f) : Math.sqrt(s);
  }, f.theta = function(d) {
    return arguments.length ? (u = d * d, f) : Math.sqrt(u);
  }, f;
}
function I7(r, e, t) {
  var n, a = rn(0.1), i, o;
  typeof r != "function" && (r = rn(+r)), e == null && (e = 0), t == null && (t = 0);
  function s(f) {
    for (var l = 0, c = n.length; l < c; ++l) {
      var h = n[l], d = h.x - e || 1e-6, v = h.y - t || 1e-6, p = Math.sqrt(d * d + v * v), g = (o[l] - p) * i[l] * f / p;
      h.vx += d * g, h.vy += v * g;
    }
  }
  function u() {
    if (n) {
      var f, l = n.length;
      for (i = new Array(l), o = new Array(l), f = 0; f < l; ++f)
        o[f] = +r(n[f], f, n), i[f] = isNaN(o[f]) ? 0 : +a(n[f], f, n);
    }
  }
  return s.initialize = function(f) {
    n = f, u();
  }, s.strength = function(f) {
    return arguments.length ? (a = typeof f == "function" ? f : rn(+f), u(), s) : a;
  }, s.radius = function(f) {
    return arguments.length ? (r = typeof f == "function" ? f : rn(+f), u(), s) : r;
  }, s.x = function(f) {
    return arguments.length ? (e = +f, s) : e;
  }, s.y = function(f) {
    return arguments.length ? (t = +f, s) : t;
  }, s;
}
function O7(r) {
  var e = rn(0.1), t, n, a;
  typeof r != "function" && (r = rn(r == null ? 0 : +r));
  function i(s) {
    for (var u = 0, f = t.length, l; u < f; ++u)
      l = t[u], l.vx += (a[u] - l.x) * n[u] * s;
  }
  function o() {
    if (t) {
      var s, u = t.length;
      for (n = new Array(u), a = new Array(u), s = 0; s < u; ++s)
        n[s] = isNaN(a[s] = +r(t[s], s, t)) ? 0 : +e(t[s], s, t);
    }
  }
  return i.initialize = function(s) {
    t = s, o();
  }, i.strength = function(s) {
    return arguments.length ? (e = typeof s == "function" ? s : rn(+s), o(), i) : e;
  }, i.x = function(s) {
    return arguments.length ? (r = typeof s == "function" ? s : rn(+s), o(), i) : r;
  }, i;
}
function D7(r) {
  var e = rn(0.1), t, n, a;
  typeof r != "function" && (r = rn(r == null ? 0 : +r));
  function i(s) {
    for (var u = 0, f = t.length, l; u < f; ++u)
      l = t[u], l.vy += (a[u] - l.y) * n[u] * s;
  }
  function o() {
    if (t) {
      var s, u = t.length;
      for (n = new Array(u), a = new Array(u), s = 0; s < u; ++s)
        n[s] = isNaN(a[s] = +r(t[s], s, t)) ? 0 : +e(t[s], s, t);
    }
  }
  return i.initialize = function(s) {
    t = s, o();
  }, i.strength = function(s) {
    return arguments.length ? (e = typeof s == "function" ? s : rn(+s), o(), i) : e;
  }, i.y = function(s) {
    return arguments.length ? (r = typeof s == "function" ? s : rn(+s), o(), i) : r;
  }, i;
}
const L7 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  forceCenter: s7,
  forceCollide: l7,
  forceLink: h7,
  forceManyBody: T7,
  forceRadial: I7,
  forceSimulation: C7,
  forceX: O7,
  forceY: D7
}, Symbol.toStringTag, { value: "Module" })), Zy = /* @__PURE__ */ ri(L7);
var Qy = {}, N7 = be && be.__createBinding || (Object.create ? function(r, e, t, n) {
  n === void 0 && (n = t);
  var a = Object.getOwnPropertyDescriptor(e, t);
  (!a || ("get" in a ? !e.__esModule : a.writable || a.configurable)) && (a = { enumerable: !0, get: function() {
    return e[t];
  } }), Object.defineProperty(r, n, a);
} : function(r, e, t, n) {
  n === void 0 && (n = t), r[n] = e[t];
}), P7 = be && be.__setModuleDefault || (Object.create ? function(r, e) {
  Object.defineProperty(r, "default", { enumerable: !0, value: e });
} : function(r, e) {
  r.default = e;
}), k7 = be && be.__importStar || function(r) {
  if (r && r.__esModule)
    return r;
  var e = {};
  if (r != null)
    for (var t in r)
      t !== "default" && Object.prototype.hasOwnProperty.call(r, t) && N7(e, r, t);
  return P7(e, r), e;
};
Object.defineProperty(Qy, "__esModule", { value: !0 });
var _s = k7(Zy), _c = Dr();
function R7() {
  function r(J) {
    return function() {
      return J;
    };
  }
  var e = function(J) {
    return J.cluster;
  }, t = r(1), n = r(-1), a = r(100), i = r(0.1), o = [0, 0], s = [], u = {}, f = [], l = 100, c = 100, h = {
    none: {
      x: 0,
      y: 0
    }
  }, d = [], v, p = "force", g = !0, y = 0.1;
  function m(J) {
    if (!g)
      return m;
    v.tick(), M();
    for (var ye = 0, Be = s.length, Pe = void 0, et = J * y; ye < Be; ++ye)
      Pe = s[ye], Pe.vx += (h[e(Pe)].x - Pe.x) * et, Pe.vy += (h[e(Pe)].y - Pe.y) * et;
  }
  function b() {
    s && E();
  }
  function E() {
    if (!(!s || !s.length)) {
      if (e(s[0]) === void 0)
        throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");
      var J = x();
      v = _s.forceSimulation(J.nodes).force("x", _s.forceX(l).strength(0.1)).force("y", _s.forceY(c).strength(0.1)).force("collide", _s.forceCollide(function(ye) {
        return ye.r;
      }).iterations(4)).force("charge", _s.forceManyBody().strength(n)).force("links", _s.forceLink(J.nodes.length ? J.links : []).distance(a).strength(i)), d = v.nodes(), M();
    }
  }
  function x() {
    var J = [], ye = [], Be = {}, Pe = [], et = {}, ut = [];
    return et = w(s), ut = _(f), Pe = Object.keys(et), Pe.forEach(function(at, At) {
      var xt = et[at];
      J.push({
        id: at,
        size: xt.count,
        r: Math.sqrt(xt.sumforceNodeSize / Math.PI)
      }), Be[at] = At;
    }), ut.forEach(function(at) {
      var At = (0, _c.getEdgeTerminal)(at, "source"), xt = (0, _c.getEdgeTerminal)(at, "target"), lr = Be[At], Rt = Be[xt];
      lr !== void 0 && Rt !== void 0 && ye.push({
        source: lr,
        target: Rt,
        count: at.count
      });
    }), {
      nodes: J,
      links: ye
    };
  }
  function w(J) {
    var ye = {};
    return J.forEach(function(Be) {
      var Pe = e(Be);
      ye[Pe] || (ye[Pe] = {
        count: 0,
        sumforceNodeSize: 0
      });
    }), J.forEach(function(Be) {
      var Pe = e(Be), et = t(Be), ut = ye[Pe];
      ut.count = ut.count + 1, ut.sumforceNodeSize = ut.sumforceNodeSize + Math.PI * (et * et) * 1.3, ye[Pe] = ut;
    }), ye;
  }
  function _(J) {
    var ye = {}, Be = [];
    J.forEach(function(et) {
      var ut = A(et), at = 0;
      ye[ut] !== void 0 && (at = ye[ut]), at += 1, ye[ut] = at;
    });
    var Pe = Object.entries(ye);
    return Pe.forEach(function(et) {
      var ut = et[0], at = et[1], At = ut.split("~")[0], xt = ut.split("~")[1];
      At !== void 0 && xt !== void 0 && Be.push({
        source: At,
        target: xt,
        count: at
      });
    }), Be;
  }
  function M() {
    return h = {
      none: {
        x: 0,
        y: 0
      }
    }, d.forEach(function(J) {
      h[J.id] = {
        x: J.x - o[0],
        y: J.y - o[1]
      };
    }), h;
  }
  function A(J) {
    var ye = (0, _c.getEdgeTerminal)(J, "source"), Be = (0, _c.getEdgeTerminal)(J, "target"), Pe = e(u[ye]), et = e(u[Be]);
    return Pe <= et ? "".concat(Pe, "~").concat(et) : "".concat(et, "~").concat(Pe);
  }
  function S(J) {
    u = {}, J.forEach(function(ye) {
      u[ye.id] = ye;
    });
  }
  function T(J) {
    return arguments.length ? (p = J, b(), m) : p;
  }
  function C(J) {
    return arguments.length ? typeof J == "string" ? (e = function(ye) {
      return ye[J];
    }, m) : (e = J, m) : e;
  }
  function O(J) {
    return arguments.length ? (g = J, m) : g;
  }
  function L(J) {
    return arguments.length ? (y = J, m) : y;
  }
  function R(J) {
    return arguments.length ? (l = J, m) : l;
  }
  function P(J) {
    return arguments.length ? (c = J, m) : c;
  }
  function z(J) {
    return arguments.length ? (S(J || []), s = J || [], m) : s;
  }
  function V(J) {
    return arguments.length ? (f = J || [], b(), m) : f;
  }
  function N(J) {
    return arguments.length ? (typeof J == "function" ? t = J : t = r(+J), b(), m) : t;
  }
  function F(J) {
    return arguments.length ? (typeof J == "function" ? n = J : n = r(+J), b(), m) : n;
  }
  function q(J) {
    return arguments.length ? (typeof J == "function" ? a = J : a = r(+J), b(), m) : a;
  }
  function te(J) {
    return arguments.length ? (typeof J == "function" ? i = J : i = r(+J), b(), m) : i;
  }
  function re(J) {
    return arguments.length ? (o = J, m) : o;
  }
  return m.initialize = function(J) {
    s = J, b();
  }, m.template = T, m.groupBy = C, m.enableGrouping = O, m.strength = L, m.centerX = R, m.centerY = P, m.nodes = z, m.links = V, m.forceNodeSize = N, m.nodeSize = m.forceNodeSize, m.forceCharge = F, m.forceLinkDistance = q, m.forceLinkStrength = te, m.offset = re, m.getFocis = M, m;
}
Qy.default = R7;
var Si = {};
Object.defineProperty(Si, "__esModule", { value: !0 });
Si.FORCE_LAYOUT_TYPE_MAP = Si.LAYOUT_MESSAGE = void 0;
Si.LAYOUT_MESSAGE = {
  // run layout
  RUN: "LAYOUT_RUN",
  // layout ended with success
  END: "LAYOUT_END",
  // layout error
  ERROR: "LAYOUT_ERROR",
  // layout tick, used in force directed layout
  TICK: "LAYOUT_TICK",
  GPURUN: "GPU_LAYOUT_RUN",
  GPUEND: "GPU_LAYOUT_END"
};
Si.FORCE_LAYOUT_TYPE_MAP = {
  gForce: !0,
  force2: !0,
  fruchterman: !0,
  forceAtlas2: !0,
  force: !0,
  "graphin-force": !0
};
var B7 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), F7 = be && be.__createBinding || (Object.create ? function(r, e, t, n) {
  n === void 0 && (n = t);
  var a = Object.getOwnPropertyDescriptor(e, t);
  (!a || ("get" in a ? !e.__esModule : a.writable || a.configurable)) && (a = { enumerable: !0, get: function() {
    return e[t];
  } }), Object.defineProperty(r, n, a);
} : function(r, e, t, n) {
  n === void 0 && (n = t), r[n] = e[t];
}), G7 = be && be.__setModuleDefault || (Object.create ? function(r, e) {
  Object.defineProperty(r, "default", { enumerable: !0, value: e });
} : function(r, e) {
  r.default = e;
}), z7 = be && be.__importStar || function(r) {
  if (r && r.__esModule)
    return r;
  var e = {};
  if (r != null)
    for (var t in r)
      t !== "default" && Object.prototype.hasOwnProperty.call(r, t) && F7(e, r, t);
  return G7(e, r), e;
}, U7 = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(Td, "__esModule", { value: !0 });
Td.ForceLayout = void 0;
var Ms = z7(Zy), j7 = U7(Qy), Io = Dr(), $7 = Gr, W7 = Si, X7 = (
  /** @class */
  function(r) {
    B7(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.center = [0, 0], n.nodeStrength = null, n.edgeStrength = null, n.preventOverlap = !1, n.clusterNodeStrength = null, n.clusterEdgeStrength = null, n.clusterEdgeDistance = null, n.clusterNodeSize = null, n.clusterFociStrength = null, n.linkDistance = 50, n.alphaDecay = 0.028, n.alphaMin = 1e-3, n.alpha = 0.3, n.collideStrength = 1, n.workerEnabled = !1, n.tick = function() {
      }, n.onLayoutEnd = function() {
      }, n.ticking = void 0, t && n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        center: [0, 0],
        nodeStrength: null,
        edgeStrength: null,
        preventOverlap: !1,
        nodeSize: void 0,
        nodeSpacing: void 0,
        linkDistance: 50,
        forceSimulation: null,
        alphaDecay: 0.028,
        alphaMin: 1e-3,
        alpha: 0.3,
        collideStrength: 1,
        clustering: !1,
        clusterNodeStrength: -1,
        clusterEdgeStrength: 0.1,
        clusterEdgeDistance: 100,
        clusterFociStrength: 0.8,
        clusterNodeSize: 10,
        tick: function() {
        },
        onLayoutEnd: function() {
        },
        // 是否启用web worker。前提是在web worker里执行布局，否则无效
        workerEnabled: !1
      };
    }, e.prototype.init = function(t) {
      var n = this;
      n.nodes = t.nodes || [];
      var a = t.edges || [];
      n.edges = a.map(function(i) {
        var o = {}, s = ["targetNode", "sourceNode", "startPoint", "endPoint"];
        return Object.keys(i).forEach(function(u) {
          s.indexOf(u) > -1 || (o[u] = i[u]);
        }), o;
      }), n.ticking = !1;
    }, e.prototype.execute = function(t) {
      var n = this, a = n.nodes, i = n.edges;
      if (!n.ticking) {
        var o = n.forceSimulation, s = n.alphaMin, u = n.alphaDecay, f = n.alpha;
        if (o) {
          if (t) {
            if (n.clustering && n.clusterForce && (n.clusterForce.nodes(a), n.clusterForce.links(i)), o.nodes(a), i && n.edgeForce)
              n.edgeForce.links(i);
            else if (i && !n.edgeForce) {
              var h = Ms.forceLink().id(function(g) {
                return g.id;
              }).links(i);
              n.edgeStrength && h.strength(n.edgeStrength), n.linkDistance && h.distance(n.linkDistance), n.edgeForce = h, o.force("link", h);
            }
          }
          n.preventOverlap && n.overlapProcess(o), o.alpha(f).restart(), this.ticking = !0;
        } else
          try {
            var l = Ms.forceManyBody();
            if (n.nodeStrength && l.strength(n.nodeStrength), o = Ms.forceSimulation().nodes(a), n.clustering) {
              var c = (0, j7.default)();
              c.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength), i && c.links(i), a && c.nodes(a), c.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize), n.clusterForce = c, o.force("group", c);
            }
            if (o.force("center", Ms.forceCenter(n.center[0], n.center[1])).force("charge", l).alpha(f).alphaDecay(u).alphaMin(s), n.preventOverlap && n.overlapProcess(o), i) {
              var h = Ms.forceLink().id(function(p) {
                return p.id;
              }).links(i);
              n.edgeStrength && h.strength(n.edgeStrength), n.linkDistance && h.distance(n.linkDistance), n.edgeForce = h, o.force("link", h);
            }
            if (n.workerEnabled && !Y7() && (n.workerEnabled = !1, console.warn("workerEnabled option is only supported when running in web worker.")), !n.workerEnabled)
              o.on("tick", function() {
                n.tick();
              }).on("end", function() {
                n.ticking = !1, n.onLayoutEnd && n.onLayoutEnd();
              }), n.ticking = !0;
            else {
              o.stop();
              for (var d = V7(o), v = 1; v <= d; v++)
                o.tick(), postMessage({
                  nodes: a,
                  currentTick: v,
                  totalTicks: d,
                  type: W7.LAYOUT_MESSAGE.TICK
                }, void 0);
              n.ticking = !1;
            }
            n.forceSimulation = o, n.ticking = !0;
          } catch (p) {
            n.ticking = !1, console.warn(p);
          }
      }
    }, e.prototype.overlapProcess = function(t) {
      var n = this, a = n.nodeSize, i = n.nodeSpacing, o, s, u = n.collideStrength;
      if ((0, Io.isNumber)(i) ? s = function() {
        return i;
      } : (0, Io.isFunction)(i) ? s = i : s = function() {
        return 0;
      }, !a)
        o = function(h) {
          if (h.size) {
            if ((0, Io.isArray)(h.size)) {
              var d = h.size[0] > h.size[1] ? h.size[0] : h.size[1];
              return d / 2 + s(h);
            }
            if ((0, Io.isObject)(h.size)) {
              var d = h.size.width > h.size.height ? h.size.width : h.size.height;
              return d / 2 + s(h);
            }
            return h.size / 2 + s(h);
          }
          return 10 + s(h);
        };
      else if ((0, Io.isFunction)(a))
        o = function(h) {
          var d = a(h);
          return d + s(h);
        };
      else if ((0, Io.isArray)(a)) {
        var f = a[0] > a[1] ? a[0] : a[1], l = f / 2;
        o = function(h) {
          return l + s(h);
        };
      } else if ((0, Io.isNumber)(a)) {
        var c = a / 2;
        o = function(h) {
          return c + s(h);
        };
      } else
        o = function() {
          return 10;
        };
      t.force("collisionForce", Ms.forceCollide(o).strength(u));
    }, e.prototype.updateCfg = function(t) {
      var n = this;
      n.ticking && (n.forceSimulation.stop(), n.ticking = !1), n.forceSimulation = null, Object.assign(n, t);
    }, e.prototype.destroy = function() {
      var t = this;
      t.ticking && (t.forceSimulation.stop(), t.ticking = !1), t.nodes = null, t.edges = null, t.destroyed = !0;
    }, e;
  }($7.Base)
);
Td.ForceLayout = X7;
function V7(r) {
  var e = r.alphaMin(), t = r.alphaTarget(), n = r.alpha(), a = Math.log((e - t) / (n - t)) / Math.log(1 - r.alphaDecay()), i = Math.ceil(a);
  return i;
}
function Y7() {
  return typeof WorkerGlobalScope < "u" && self instanceof WorkerGlobalScope;
}
(function(r) {
  var e = be && be.__createBinding || (Object.create ? function(n, a, i, o) {
    o === void 0 && (o = i);
    var s = Object.getOwnPropertyDescriptor(a, i);
    (!s || ("get" in s ? !a.__esModule : s.writable || s.configurable)) && (s = { enumerable: !0, get: function() {
      return a[i];
    } }), Object.defineProperty(n, o, s);
  } : function(n, a, i, o) {
    o === void 0 && (o = i), n[o] = a[i];
  }), t = be && be.__exportStar || function(n, a) {
    for (var i in n)
      i !== "default" && !Object.prototype.hasOwnProperty.call(a, i) && e(a, n, i);
  };
  Object.defineProperty(r, "__esModule", { value: !0 }), t(Td, r);
})(qy);
var al = {}, H7 = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(al, "__esModule", { value: !0 });
al.CircularLayout = void 0;
var K7 = Gr, Ya = Dr();
function q7(r, e, t, n) {
  r.forEach(function(a, i) {
    r[i].children = [], r[i].parent = [];
  }), n ? e.forEach(function(a) {
    var i = (0, Ya.getEdgeTerminal)(a, "source"), o = (0, Ya.getEdgeTerminal)(a, "target"), s = 0;
    i && (s = t[i]);
    var u = 0;
    o && (u = t[o]);
    var f = r[s].children, l = r[u].parent;
    f.push(r[u].id), l.push(r[s].id);
  }) : e.forEach(function(a) {
    var i = (0, Ya.getEdgeTerminal)(a, "source"), o = (0, Ya.getEdgeTerminal)(a, "target"), s = 0;
    i && (s = t[i]);
    var u = 0;
    o && (u = t[o]);
    var f = r[s].children, l = r[u].children;
    f.push(r[u].id), l.push(r[s].id);
  });
}
function Z7(r, e, t) {
  for (var n = t.length, a = 0; a < n; a++) {
    var i = (0, Ya.getEdgeTerminal)(t[a], "source"), o = (0, Ya.getEdgeTerminal)(t[a], "target");
    if (r.id === i && e.id === o || e.id === i && r.id === o)
      return !0;
  }
  return !1;
}
function Q7(r, e) {
  var t = r.degree, n = e.degree;
  return t < n ? -1 : t > n ? 1 : 0;
}
var J7 = (
  /** @class */
  function(r) {
    H7(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.radius = null, n.nodeSize = void 0, n.startRadius = null, n.endRadius = null, n.startAngle = 0, n.endAngle = 2 * Math.PI, n.clockwise = !0, n.divisions = 1, n.ordering = null, n.angleRatio = 1, n.nodes = [], n.edges = [], n.nodeMap = {}, n.degrees = [], n.width = 300, n.height = 300, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        radius: null,
        startRadius: null,
        endRadius: null,
        startAngle: 0,
        endAngle: 2 * Math.PI,
        clockwise: !0,
        divisions: 1,
        ordering: null,
        angleRatio: 1
      };
    }, e.prototype.execute = function() {
      var t, n = this, a = n.nodes, i = n.edges, o = a.length;
      if (o === 0) {
        n.onLayoutEnd && n.onLayoutEnd();
        return;
      }
      !n.width && typeof window < "u" && (n.width = window.innerWidth), !n.height && typeof window < "u" && (n.height = window.innerHeight), n.center || (n.center = [n.width / 2, n.height / 2]);
      var s = n.center;
      if (o === 1) {
        a[0].x = s[0], a[0].y = s[1], n.onLayoutEnd && n.onLayoutEnd();
        return;
      }
      var u = n.radius, f = n.startRadius, l = n.endRadius, c = n.divisions, h = n.startAngle, d = n.endAngle, v = n.angleRatio, p = n.ordering, g = n.clockwise, y = n.nodeSpacing, m = n.nodeSize, b = (d - h) / o, E = {};
      a.forEach(function(P, z) {
        E[P.id] = z;
      }), n.nodeMap = E;
      var x = (0, Ya.getDegree)(a.length, E, i);
      if (n.degrees = x, y) {
        var w = (0, Ya.getFuncByUnknownType)(10, y), _ = (0, Ya.getFuncByUnknownType)(10, m), M = -1 / 0;
        a.forEach(function(P) {
          var z = _(P);
          M < z && (M = z);
        });
        var A = 0;
        a.forEach(function(P, z) {
          z === 0 ? A += M || 10 : A += (w(P) || 0) + (M || 10);
        }), u = A / (2 * Math.PI);
      } else
        !u && !f && !l ? u = n.height > n.width ? n.width / 2 : n.height / 2 : !f && l ? f = l : f && !l && (l = f);
      var S = b * v, T = [];
      p === "topology" ? T = n.topologyOrdering() : p === "topology-directed" ? T = n.topologyOrdering(!0) : p === "degree" ? T = n.degreeOrdering() : T = a;
      for (var C = Math.ceil(o / c), O = 0; O < o; ++O) {
        var L = u;
        !L && f !== null && l !== null && (L = f + O * (l - f) / (o - 1)), L || (L = 10 + O * 100 / (o - 1));
        var R = h + O % C * S + 2 * Math.PI / c * Math.floor(O / C);
        g || (R = d - O % C * S - 2 * Math.PI / c * Math.floor(O / C)), T[O].x = s[0] + Math.cos(R) * L, T[O].y = s[1] + Math.sin(R) * L, T[O].weight = x[O].all;
      }
      return (t = n.onLayoutEnd) === null || t === void 0 || t.call(n), {
        nodes: T,
        edges: this.edges
      };
    }, e.prototype.topologyOrdering = function(t) {
      t === void 0 && (t = !1);
      var n = this, a = n.degrees, i = n.edges, o = n.nodes, s = (0, Ya.clone)(o), u = n.nodeMap, f = [s[0]], l = [o[0]], c = [], h = o.length;
      c[0] = !0, q7(s, i, u, t);
      var d = 0;
      return s.forEach(function(v, p) {
        if (p !== 0)
          if ((p === h - 1 || a[p].all !== a[p + 1].all || Z7(f[d], v, i)) && !c[p])
            f.push(v), l.push(o[u[v.id]]), c[p] = !0, d++;
          else {
            for (var g = f[d].children, y = !1, m = 0; m < g.length; m++) {
              var b = u[g[m]];
              if (a[b].all === a[p].all && !c[b]) {
                f.push(s[b]), l.push(o[u[s[b].id]]), c[b] = !0, y = !0;
                break;
              }
            }
            for (var E = 0; !y && (c[E] || (f.push(s[E]), l.push(o[u[s[E].id]]), c[E] = !0, y = !0), E++, E !== h); )
              ;
          }
      }), l;
    }, e.prototype.degreeOrdering = function() {
      var t = this, n = t.nodes, a = [], i = t.degrees;
      return n.forEach(function(o, s) {
        o.degree = i[s].all, a.push(o);
      }), a.sort(Q7), a;
    }, e.prototype.getType = function() {
      return "circular";
    }, e;
  }(K7.Base)
);
al.CircularLayout = J7;
var mu = {}, Jy = {}, em = {}, tm = {}, rm = {}, nm = {};
Object.defineProperty(nm, "__esModule", { value: !0 });
var eX = function(r, e) {
  if (r !== "next" && r !== "prev")
    return e;
}, ww = function(r) {
  r.prev.next = r.next, r.next.prev = r.prev, delete r.next, delete r.prev;
}, tX = (
  /** @class */
  function() {
    function r() {
      var e = {};
      e.prev = e, e.next = e.prev, this.shortcut = e;
    }
    return r.prototype.dequeue = function() {
      var e = this.shortcut, t = e.prev;
      if (t && t !== e)
        return ww(t), t;
    }, r.prototype.enqueue = function(e) {
      var t = this.shortcut;
      e.prev && e.next && ww(e), e.next = t.next, t.next.prev = e, t.next = e, e.prev = t;
    }, r.prototype.toString = function() {
      for (var e = [], t = this.shortcut, n = t.prev; n !== t; )
        e.push(JSON.stringify(n, eX)), n = n == null ? void 0 : n.prev;
      return "[".concat(e.join(", "), "]");
    }, r;
  }()
);
nm.default = tX;
var Xs;
(function(r) {
  r.DEFAULT_EDGE_NAME = "\0", r.GRAPH_NODE = "\0", r.EDGE_KEY_DELIM = "";
})(Xs || (Xs = {}));
function _w(r, e) {
  var t = r.get(e) || 0;
  r.set(e, t + 1);
}
function Mw(r, e) {
  var t = r.get(e);
  t !== void 0 && (t = t - 1, t > 0 ? r.set(e, t) : r.delete(e));
}
function JT(r, e, t, n) {
  var a = String(e), i = String(t);
  if (!r && a > i) {
    var o = a;
    a = i, i = o;
  }
  return a + Xs.EDGE_KEY_DELIM + i + Xs.EDGE_KEY_DELIM + (n === void 0 ? Xs.DEFAULT_EDGE_NAME : n);
}
function Sw(r, e, t, n) {
  var a = String(e), i = String(t), o = {
    v: e,
    w: t
  };
  if (!r && a > i) {
    var s = o.v;
    o.v = o.w, o.w = s;
  }
  return n !== void 0 && (o.name = n), o;
}
function Fp(r, e) {
  return JT(r, e.v, e.w, e.name);
}
function Aw(r) {
  return typeof r == "function";
}
var rX = function(e) {
  return e.nodes().map(function(t) {
    var n = e.node(t), a = e.parent(t), i = {
      id: t,
      value: n,
      parent: a
    };
    return i.value === void 0 && delete i.value, i.parent === void 0 && delete i.parent, i;
  });
}, nX = function(e) {
  return e.edges().map(function(t) {
    var n = e.edge(t), a = {
      v: t.v,
      w: t.w,
      value: n,
      name: t.name
    };
    return a.name === void 0 && delete a.name, a.value === void 0 && delete a.value, a;
  });
}, aX = function(e) {
  var t = {
    options: {
      directed: e.isDirected(),
      multigraph: e.isMultigraph(),
      compound: e.isCompound()
    },
    nodes: rX(e),
    edges: nX(e),
    value: e.graph()
  };
  return t.value === void 0 && delete t.value, t;
}, iX = function(e) {
  var t = new Jo(e.options);
  return e.value !== void 0 && t.setGraph(e.value), e.nodes.forEach(function(n) {
    t.setNode(n.id, n.value), n.parent && t.setParent(n.id, n.parent);
  }), e.edges.forEach(function(n) {
    t.setEdge(n.v, n.w, n.value, n.name);
  }), t;
};
function Cw(r, e) {
  var t = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(r);
    e && (n = n.filter(function(a) {
      return Object.getOwnPropertyDescriptor(r, a).enumerable;
    })), t.push.apply(t, n);
  }
  return t;
}
function Tw(r) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2 ? Cw(Object(t), !0).forEach(function(n) {
      oX(r, n, t[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(t)) : Cw(Object(t)).forEach(function(n) {
      Object.defineProperty(r, n, Object.getOwnPropertyDescriptor(t, n));
    });
  }
  return r;
}
function oX(r, e, t) {
  return e in r ? Object.defineProperty(r, e, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : r[e] = t, r;
}
function sX(r, e) {
  if (!(r instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function Iw(r, e) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(r, n.key, n);
  }
}
function uX(r, e, t) {
  return e && Iw(r.prototype, e), t && Iw(r, t), Object.defineProperty(r, "prototype", { writable: !1 }), r;
}
var fX = {
  compound: !1,
  multigraph: !1,
  directed: !0
}, Jo = /* @__PURE__ */ function() {
  function r() {
    var e = this, t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    sX(this, r), this.directed = !0, this.multigraph = !1, this.compound = !1, this.GRAPH_NODE = Xs.GRAPH_NODE, this.label = void 0, this.nodeCountNum = 0, this.edgeCountNum = 0, this.defaultNodeLabelFn = function() {
    }, this.defaultEdgeLabelFn = function() {
    }, this.parentMap = void 0, this.childrenMap = void 0, this.nodesLabelMap = /* @__PURE__ */ new Map(), this.inEdgesMap = /* @__PURE__ */ new Map(), this.outEdgesMap = /* @__PURE__ */ new Map(), this.predecessorsMap = /* @__PURE__ */ new Map(), this.successorsMap = /* @__PURE__ */ new Map(), this.edgesMap = /* @__PURE__ */ new Map(), this.edgesLabelsMap = /* @__PURE__ */ new Map(), this.isDirected = function() {
      return e.directed;
    }, this.isMultigraph = function() {
      return e.multigraph;
    }, this.isCompound = function() {
      return e.compound;
    }, this.setGraph = function(a) {
      return e.label = a, e;
    }, this.graph = function() {
      return e.label;
    }, this.setDefaultNodeLabel = function(a) {
      return Aw(a) ? e.defaultNodeLabelFn = a : e.defaultNodeLabelFn = function() {
        return a;
      }, e;
    }, this.nodeCount = function() {
      return e.nodeCountNum;
    }, this.node = function(a) {
      return e.nodesLabelMap.get(a);
    }, this.nodes = function() {
      return Array.from(e.nodesLabelMap.keys());
    }, this.sources = function() {
      return e.nodes().filter(function(a) {
        var i;
        return !(!((i = e.inEdgesMap.get(a)) === null || i === void 0) && i.size);
      });
    }, this.sinks = function() {
      return e.nodes().filter(function(a) {
        var i;
        return !(!((i = e.outEdgesMap.get(a)) === null || i === void 0) && i.size);
      });
    }, this.setNodes = function(a, i) {
      return a.map(function(o) {
        return e.setNode(o, i);
      }), e;
    }, this.hasNode = function(a) {
      return e.nodesLabelMap.has(a);
    }, this.checkCompound = function() {
      if (!e.isCompound())
        throw new Error("Cannot construct parent-children relations in a non-compound graph");
    }, this.parent = function(a) {
      if (e.isCompound()) {
        var i, o = (i = e.parentMap) === null || i === void 0 ? void 0 : i.get(a);
        if (o !== e.GRAPH_NODE)
          return o;
      }
    }, this.removeFromParentsChildList = function(a) {
      var i = e.parentMap.get(a);
      e.childrenMap.get(i).delete(a);
    }, this.setParent = function(a, i) {
      var o, s;
      e.checkCompound();
      for (var u = i === void 0 ? e.GRAPH_NODE : i, f = e.parent(u); f; ) {
        if (a === f)
          throw new Error("Setting " + i + " as parent of " + a + " would create a cycle");
        f = e.parent(f);
      }
      i && e.setNode(i), e.setNode(a), e.removeFromParentsChildList(a), (o = e.parentMap) === null || o === void 0 || o.set(a, u);
      var l = e.childrenMap.get(u);
      return l.set(a, !0), (s = e.childrenMap) === null || s === void 0 || s.set(u, l), e;
    }, this.children = function(a) {
      var i = a === void 0 ? e.GRAPH_NODE : a;
      if (e.isCompound()) {
        var o, s = (o = e.childrenMap) === null || o === void 0 ? void 0 : o.get(i);
        return s ? Array.from(s.keys()) : void 0;
      }
      if (i === e.GRAPH_NODE)
        return e.nodes();
      if (a && e.hasNode(a))
        return [];
    }, this.predecessors = function(a) {
      var i = e.predecessorsMap.get(a);
      return i ? Array.from(i.keys()) : void 0;
    }, this.successors = function(a) {
      var i = e.successorsMap.get(a);
      return i ? Array.from(i.keys()) : void 0;
    }, this.neighbors = function(a) {
      var i;
      if (e.hasNode(a))
        return Array.from(new Set((i = e.predecessors(a)) === null || i === void 0 ? void 0 : i.concat(e.successors(a))));
    }, this.isLeaf = function(a) {
      var i;
      if (e.isDirected()) {
        var o;
        return !(!((o = e.successors(a)) === null || o === void 0) && o.length);
      }
      return !(!((i = e.neighbors(a)) === null || i === void 0) && i.length);
    }, this.filterNodes = function(a) {
      var i = e.directed, o = e.multigraph, s = e.compound, u = new r({
        directed: i,
        multigraph: o,
        compound: s
      });
      if (u.setGraph(e.graph()), e.nodes().forEach(function(l) {
        a(l) && u.setNode(l, e.node(l));
      }), e.edges().forEach(function(l) {
        u.hasNode(l.v) && u.hasNode(l.w) && u.setEdgeObj(l, e.edge(l));
      }), s) {
        var f = function(c) {
          for (var h = e.parent(c); h !== void 0 && !u.hasNode(h); )
            h = e.parent(h);
          return h;
        };
        u.nodes().forEach(function(l) {
          u.setParent(l, f(l));
        });
      }
      return u;
    }, this.setDefaultEdgeLabel = function(a) {
      return Aw(a) ? e.defaultEdgeLabelFn = a : e.defaultEdgeLabelFn = function() {
        return a;
      }, e;
    }, this.edgeCount = function() {
      return e.edgeCountNum;
    }, this.setEdgeObj = function(a, i) {
      return e.setEdge(a.v, a.w, i, a.name);
    }, this.setPath = function(a, i) {
      return a.reduce(function(o, s) {
        return e.setEdge(o, s, i), s;
      }), e;
    }, this.edgeFromArgs = function(a, i, o) {
      return e.edge({
        v: a,
        w: i,
        name: o
      });
    }, this.edge = function(a) {
      return e.edgesLabelsMap.get(Fp(e.isDirected(), a));
    }, this.hasEdge = function(a, i, o) {
      return e.edgesLabelsMap.has(Fp(e.isDirected(), {
        v: a,
        w: i,
        name: o
      }));
    }, this.removeEdgeObj = function(a) {
      var i = a.v, o = a.w, s = a.name;
      return e.removeEdge(i, o, s);
    }, this.edges = function() {
      return Array.from(e.edgesMap.values());
    }, this.inEdges = function(a, i) {
      var o = e.inEdgesMap.get(a);
      if (o)
        return Array.from(o.values()).filter(function(s) {
          return !i || s.v === i;
        });
    }, this.outEdges = function(a, i) {
      var o = e.outEdgesMap.get(a);
      if (o)
        return Array.from(o.values()).filter(function(s) {
          return !i || s.w === i;
        });
    }, this.nodeEdges = function(a, i) {
      var o;
      if (e.hasNode(a))
        return (o = e.inEdges(a, i)) === null || o === void 0 ? void 0 : o.concat(e.outEdges(a, i));
    }, this.toJSON = function() {
      return aX(e);
    }, this.nodeInDegree = function(a) {
      var i = e.inEdgesMap.get(a);
      return i ? i.size : 0;
    }, this.nodeOutDegree = function(a) {
      var i = e.outEdgesMap.get(a);
      return i ? i.size : 0;
    }, this.nodeDegree = function(a) {
      return e.nodeInDegree(a) + e.nodeOutDegree(a);
    }, this.source = function(a) {
      return a.v;
    }, this.target = function(a) {
      return a.w;
    };
    var n = Tw(Tw({}, fX), t);
    this.compound = n.compound, this.directed = n.directed, this.multigraph = n.multigraph, this.compound && (this.parentMap = /* @__PURE__ */ new Map(), this.childrenMap = /* @__PURE__ */ new Map());
  }
  return uX(r, [{
    key: "setNode",
    value: (
      /**
       * @description Set Node label in graph if node not in graph then create it
       * @description.zh-CN 设置节点的label，如果这个节点不在图中，则在图中创建这个节点
       * @param node
       * @param value
       * @returns
       */
      function(t, n) {
        var a = this.nodesLabelMap, i = this.defaultNodeLabelFn, o = this.isCompound, s = this.parentMap, u = this.childrenMap, f = this.inEdgesMap, l = this.outEdgesMap, c = this.predecessorsMap, h = this.successorsMap;
        if (a.has(t))
          return n !== void 0 && a.set(t, n), this;
        if (a.set(t, n || i(t)), o()) {
          var d;
          s == null || s.set(t, this.GRAPH_NODE), u == null || u.set(t, /* @__PURE__ */ new Map()), u != null && u.has(this.GRAPH_NODE) || u == null || u.set(this.GRAPH_NODE, /* @__PURE__ */ new Map()), u == null || (d = u.get(this.GRAPH_NODE)) === null || d === void 0 || d.set(t, !0);
        }
        return [f, l, c, h].forEach(function(v) {
          return v.set(t, /* @__PURE__ */ new Map());
        }), this.nodeCountNum += 1, this;
      }
    )
    /**
     * @description Set nodes or add nodes in batch
     * @description.zh-CN 批量设置或者创建节点
     * @param nodes
     * @param value
     * @returns
     */
  }, {
    key: "removeNode",
    value: (
      /**
       * @description Remove node from graph
       * @description.zh-CN 将节点从图中移除
       * @param node
       * @returns
       */
      function(t) {
        var n = this;
        if (this.hasNode(t)) {
          var a = function(g) {
            n.removeEdge(g.v, g.w, g.name);
          }, i = this.inEdgesMap, o = this.outEdgesMap, s = this.predecessorsMap, u = this.successorsMap, f = this.nodesLabelMap;
          if (this.isCompound()) {
            var l, c, h;
            this.removeFromParentsChildList(t), (l = this.parentMap) === null || l === void 0 || l.delete(t), (c = this.children(t)) === null || c === void 0 || c.forEach(function(p) {
              return n.setParent(p);
            }), (h = this.childrenMap) === null || h === void 0 || h.delete(t);
          }
          var d = i.get(t), v = o.get(t);
          Array.from(d.values()).forEach(function(p) {
            return a(p);
          }), Array.from(v.values()).forEach(function(p) {
            return a(p);
          }), f.delete(t), i.delete(t), o.delete(t), s.delete(t), u.delete(t), this.nodeCountNum -= 1;
        }
        return this;
      }
    )
    /**
     * @description Set function that generate default label for edge, if param is non-function value then default label will always be this value;
     * @description.zh-CN 设置默认获取边Label的方法，如果传入不是函数的，那么默认label 的值只会是传入值
     * @param newDefault
     * @returns
     */
  }, {
    key: "setEdge",
    value: (
      /**
       * @description set edge value, if nodes or edges not exsit then add to graph
       * @description.zh-CN 设置边的属性，如果边或节点不存在，那么将他们加入这个图
       * @param v
       * @param w
       * @param value
       * @param name
       * @returns
       */
      function(t, n, a, i) {
        var o, s, u = Sw(this.isDirected(), t, n, i), f = Fp(this.isDirected(), u), l = u.v, c = u.w;
        if (this.edgesLabelsMap.has(f))
          return this.edgesLabelsMap.set(f, a), this;
        if (i !== void 0 && !this.isMultigraph())
          throw new Error("Cannot set a named edge when isMultigraph = false");
        this.setNode(l), this.setNode(c), this.edgesLabelsMap.set(f, a || this.defaultEdgeLabelFn(l, c, i)), Object.freeze(u), this.edgesMap.set(f, u);
        var h = this.predecessorsMap.get(c), d = this.successorsMap.get(l);
        return _w(h, l), _w(d, c), (o = this.inEdgesMap.get(c)) === null || o === void 0 || o.set(f, u), (s = this.outEdgesMap.get(l)) === null || s === void 0 || s.set(f, u), this.edgeCountNum += 1, this;
      }
    )
  }, {
    key: "removeEdge",
    value: (
      /**
       * @description remove a specific edge
       * @description.zh-CN 删除一条边
       * @param v
       * @param w
       * @param name
       * @returns
       */
      function(t, n, a) {
        var i = JT(this.isDirected(), t, n, a), o = this.edgesMap.get(i);
        if (o) {
          var s = Sw(this.isDirected(), t, n, a), u = s.v, f = s.w;
          this.edgesLabelsMap.delete(i), this.edgesMap.delete(i);
          var l = this.predecessorsMap.get(f), c = this.successorsMap.get(u);
          Mw(l, u), Mw(c, f), this.inEdgesMap.get(f).delete(i), this.outEdgesMap.get(u).delete(i), this.edgeCountNum -= 1;
        }
        return this;
      }
    )
    /**
     * @description remove a specific edge by edge object
     * @description.zh-CN 删除一条边
     */
  }]), r;
}();
Jo.fromJSON = iX;
function vg(r) {
  "@babel/helpers - typeof";
  return vg = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, vg(r);
}
function lX(r, e) {
  if (!(r instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function Ow(r, e) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(r, n.key, n);
  }
}
function cX(r, e, t) {
  return e && Ow(r.prototype, e), t && Ow(r, t), Object.defineProperty(r, "prototype", { writable: !1 }), r;
}
function Go() {
  return typeof Reflect < "u" && Reflect.get ? Go = Reflect.get : Go = function(e, t, n) {
    var a = hX(e, t);
    if (a) {
      var i = Object.getOwnPropertyDescriptor(a, t);
      return i.get ? i.get.call(arguments.length < 3 ? e : n) : i.value;
    }
  }, Go.apply(this, arguments);
}
function hX(r, e) {
  for (; !Object.prototype.hasOwnProperty.call(r, e) && (r = Ei(r), r !== null); )
    ;
  return r;
}
function dX(r, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  r.prototype = Object.create(e && e.prototype, { constructor: { value: r, writable: !0, configurable: !0 } }), Object.defineProperty(r, "prototype", { writable: !1 }), e && pg(r, e);
}
function pg(r, e) {
  return pg = Object.setPrototypeOf || function(n, a) {
    return n.__proto__ = a, n;
  }, pg(r, e);
}
function vX(r) {
  var e = yX();
  return function() {
    var n = Ei(r), a;
    if (e) {
      var i = Ei(this).constructor;
      a = Reflect.construct(n, arguments, i);
    } else
      a = n.apply(this, arguments);
    return pX(this, a);
  };
}
function pX(r, e) {
  if (e && (vg(e) === "object" || typeof e == "function"))
    return e;
  if (e !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return gX(r);
}
function gX(r) {
  if (r === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return r;
}
function yX() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function Ei(r) {
  return Ei = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  }, Ei(r);
}
var mX = /* @__PURE__ */ function(r) {
  dX(t, r);
  var e = vX(t);
  function t() {
    var n;
    lX(this, t);
    for (var a = arguments.length, i = new Array(a), o = 0; o < a; o++)
      i[o] = arguments[o];
    return n = e.call.apply(e, [this].concat(i)), n.eventPool = {}, n;
  }
  return cX(t, [{
    key: "appendEvent",
    value: (
      /**
       * @description Add an event listener.
       * @description.zh-CN 添加事件监听器。
       */
      function(a, i) {
        this.eventPool[a] || (this.eventPool[a] = []), this.eventPool[a].push(i);
      }
    )
    /**
     * @description remove an event listener.
     * @description.zh-CN 移除事件监听器。
     */
  }, {
    key: "removeEvent",
    value: function(a, i) {
      if (this.eventPool[a]) {
        var o = this.eventPool[a].indexOf(i);
        o > -1 && this.eventPool[a].splice(o, 1);
      }
    }
    /**
     * @description trigger an event.
     * @description.zh-CN 触发事件。
     */
  }, {
    key: "emitEvent",
    value: function(a) {
      for (var i = arguments.length, o = new Array(i > 1 ? i - 1 : 0), s = 1; s < i; s++)
        o[s - 1] = arguments[s];
      this.eventPool[a] && this.eventPool[a].forEach(function(u) {
        u.apply(void 0, o);
      });
    }
  }, {
    key: "setNode",
    value: function(a, i) {
      return Go(Ei(t.prototype), "setNode", this).call(this, a, i), this.emitEvent("nodeAdd", a, i), this;
    }
  }, {
    key: "removeNode",
    value: function(a) {
      return Go(Ei(t.prototype), "removeNode", this).call(this, a), this.emitEvent("nodeRemove", a), this;
    }
  }, {
    key: "setEdge",
    value: function(a, i, o, s) {
      return Go(Ei(t.prototype), "setEdge", this).call(this, a, i, o, s), this.emitEvent("edgeAdd", a, i, o, s), this;
    }
  }, {
    key: "removeEdge",
    value: function(a, i, o) {
      return Go(Ei(t.prototype), "removeEdge", this).call(this, a, i, o), this.emitEvent("edgeRemove", a, i, o), this;
    }
  }]), t;
}(Jo);
function Dw(r, e) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(r, n.key, n);
  }
}
function bX(r, e, t) {
  return e && Dw(r.prototype, e), t && Dw(r, t), Object.defineProperty(r, "prototype", { writable: !1 }), r;
}
function EX(r, e) {
  if (!(r instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
var eI = /* @__PURE__ */ bX(function r() {
  var e = this;
  EX(this, r), this.arr = [], this.keyIndice = /* @__PURE__ */ new Map(), this.size = function() {
    return e.arr.length;
  }, this.keys = function() {
    return e.arr.map(function(t) {
      return t.key;
    });
  }, this.has = function(t) {
    return e.keyIndice.has(t);
  }, this.priority = function(t) {
    var n = e.keyIndice.get(t);
    if (n !== void 0)
      return e.arr[n].priority;
  }, this.swap = function(t, n) {
    var a = e.arr, i = e.keyIndice, o = [a[t], a[n]], s = o[0], u = o[1];
    a[t] = u, a[n] = s, i.set(s.key, n), i.set(u.key, t);
  }, this.innerDecrease = function(t) {
    for (var n = e.arr, a = n[t].priority, i, o = t; o !== 0; ) {
      var s;
      if (i = o >> 1, ((s = n[i]) === null || s === void 0 ? void 0 : s.priority) < a)
        break;
      e.swap(o, i), o = i;
    }
  }, this.heapify = function(t) {
    var n = e.arr, a = t << 1, i = a + 1, o = t;
    a < n.length && (o = n[a].priority < n[o].priority ? a : o, i < n.length && (o = n[i].priority < n[o].priority ? i : o), o !== t && (e.swap(t, o), e.heapify(o)));
  }, this.min = function() {
    if (e.size() === 0)
      throw new Error("Queue underflow");
    return e.arr[0].key;
  }, this.add = function(t, n) {
    var a = e.keyIndice, i = e.arr;
    if (!a.has(t)) {
      var o = i.length;
      return a.set(t, o), i.push({
        key: t,
        priority: n
      }), e.innerDecrease(o), !0;
    }
    return !1;
  }, this.removeMin = function() {
    e.swap(0, e.arr.length - 1);
    var t = e.arr.pop();
    return e.keyIndice.delete(t.key), e.heapify(0), t.key;
  }, this.decrease = function(t, n) {
    if (!e.has(t))
      throw new Error("There's no key named ".concat(t));
    var a = e.keyIndice.get(t);
    if (n > e.arr[a].priority)
      throw new Error("New priority is greater than current priority.Key: ".concat(t, " Old: + ").concat(e.arr[a].priority, " New: ").concat(n));
    e.arr[a].priority = n, e.innerDecrease(a);
  };
}), xX = function(e, t) {
  var n = new Jo(), a = /* @__PURE__ */ new Map(), i = new eI(), o;
  function s(l) {
    var c = l.v === o ? l.w : l.v, h = i.priority(c);
    if (h !== void 0) {
      var d = t(l);
      d < h && (a.set(c, o), i.decrease(c, d));
    }
  }
  if (e.nodeCount() === 0)
    return n;
  e.nodes().forEach(function(l) {
    i.add(l, Number.POSITIVE_INFINITY), n.setNode(l);
  }), i.decrease(e.nodes()[0], 0);
  for (var u = !1; i.size() > 0; ) {
    var f;
    if (o = i.removeMin(), a.has(o))
      n.setEdge(o, a.get(o));
    else {
      if (u)
        throw new Error("Input graph is not connected: " + e.graph());
      u = !0;
    }
    (f = e.nodeEdges(o)) === null || f === void 0 || f.forEach(s);
  }
  return n;
}, wX = function(e) {
  var t = /* @__PURE__ */ new Set(), n = [], a = e.nodes();
  return a.forEach(function(i) {
    for (var o = [], s = [i]; s.length > 0; ) {
      var u = s.pop();
      if (!t.has(u)) {
        var f, l;
        t.add(u), o.push(u), (f = e.successors(u)) === null || f === void 0 || f.forEach(function(c) {
          return s.push(c);
        }), (l = e.predecessors(u)) === null || l === void 0 || l.forEach(function(c) {
          return s.push(c);
        });
      }
    }
    o.length && n.push(o);
  }), n;
}, _X = function r(e, t, n, a, i, o) {
  a.includes(t) || (a.push(t), n || o.push(t), i(t).forEach(function(s) {
    return r(e, s, n, a, i, o);
  }), n && o.push(t));
}, am = function(e, t, n) {
  var a = Array.isArray(t) ? t : [t], i = function(f) {
    return e.isDirected() ? e.successors(f) : e.neighbors(f);
  }, o = [], s = [];
  return a.forEach(function(u) {
    if (e.hasNode(u))
      _X(e, u, n === "post", s, i, o);
    else
      throw new Error("Graph does not have node: " + u);
  }), o;
};
function MX(r, e) {
  return TX(r) || CX(r, e) || AX(r, e) || SX();
}
function SX() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function AX(r, e) {
  if (r) {
    if (typeof r == "string")
      return Lw(r, e);
    var t = Object.prototype.toString.call(r).slice(8, -1);
    if (t === "Object" && r.constructor && (t = r.constructor.name), t === "Map" || t === "Set")
      return Array.from(r);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return Lw(r, e);
  }
}
function Lw(r, e) {
  (e == null || e > r.length) && (e = r.length);
  for (var t = 0, n = new Array(e); t < e; t++)
    n[t] = r[t];
  return n;
}
function CX(r, e) {
  var t = r == null ? null : typeof Symbol < "u" && r[Symbol.iterator] || r["@@iterator"];
  if (t != null) {
    var n = [], a = !0, i = !1, o, s;
    try {
      for (t = t.call(r); !(a = (o = t.next()).done) && (n.push(o.value), !(e && n.length === e)); a = !0)
        ;
    } catch (u) {
      i = !0, s = u;
    } finally {
      try {
        !a && t.return != null && t.return();
      } finally {
        if (i)
          throw s;
      }
    }
    return n;
  }
}
function TX(r) {
  if (Array.isArray(r))
    return r;
}
var IX = function() {
  return 1;
}, tI = function(e, t, n, a) {
  return OX(e, t, n || IX, a || function(i) {
    return e.outEdges(i);
  });
}, OX = function(e, t, n, a) {
  var i = /* @__PURE__ */ new Map(), o = new eI(), s, u, f = function(h) {
    var d = h.v !== s ? h.v : h.w, v = i.get(d), p = n(h), g = u.distance + p;
    if (p < 0)
      throw new Error("dijkstra does not allow negative edge weights. Bad edge: " + h + " Weight: " + p);
    g < v.distance && (v.distance = g, v.predecessor = s, o.decrease(d, g));
  };
  for (e.nodes().forEach(function(c) {
    var h = c === t ? 0 : Number.POSITIVE_INFINITY;
    i.set(c, {
      distance: h
    }), o.add(c, h);
  }); o.size() > 0 && (s = o.removeMin(), u = i.get(s), !(u && u.distance === Number.POSITIVE_INFINITY)); )
    a(s).forEach(f);
  var l = {};
  return Array.from(i.entries()).forEach(function(c) {
    var h = MX(c, 2), d = h[0], v = h[1];
    return l[String(d)] = v, l;
  }), l;
}, DX = function(e, t, n) {
  var a = {};
  return e.nodes().forEach(function(i) {
    return a[String(i)] = tI(e, i, t, n), a;
  }), a;
}, rI = function(e) {
  var t = 0, n = [], a = /* @__PURE__ */ new Map(), i = [];
  function o(s) {
    var u, f = {
      onStack: !0,
      lowlink: t,
      index: t
    };
    if (a.set(s, f), t += 1, n.push(s), (u = e.successors(s)) === null || u === void 0 || u.forEach(function(d) {
      var v;
      if (a.has(d)) {
        if (!((v = a.get(d)) === null || v === void 0) && v.onStack) {
          var g = a.get(d);
          f.lowlink = Math.min(f.lowlink, g.index);
        }
      } else {
        o(d);
        var p = a.get(d);
        f.lowlink = Math.min(f.lowlink, p.lowlink);
      }
    }), f.lowlink === f.index) {
      var l = [], c;
      do {
        c = n.pop();
        var h = a.get(c);
        h.onStack = !1, l.push(c);
      } while (s !== c);
      i.push(l);
    }
  }
  return e.nodes().forEach(function(s) {
    a.has(s) || o(s);
  }), i;
}, LX = function(e) {
  return rI(e).filter(function(t) {
    return t.length > 1 || t.length === 1 && e.hasEdge(t[0], t[0]);
  });
};
function gg(r) {
  "@babel/helpers - typeof";
  return gg = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, gg(r);
}
function Nw(r, e) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(r, n.key, n);
  }
}
function NX(r, e, t) {
  return e && Nw(r.prototype, e), t && Nw(r, t), Object.defineProperty(r, "prototype", { writable: !1 }), r;
}
function PX(r, e) {
  if (!(r instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function kX(r, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  r.prototype = Object.create(e && e.prototype, { constructor: { value: r, writable: !0, configurable: !0 } }), Object.defineProperty(r, "prototype", { writable: !1 }), e && Ff(r, e);
}
function RX(r) {
  var e = nI();
  return function() {
    var n = Gf(r), a;
    if (e) {
      var i = Gf(this).constructor;
      a = Reflect.construct(n, arguments, i);
    } else
      a = n.apply(this, arguments);
    return BX(this, a);
  };
}
function BX(r, e) {
  if (e && (gg(e) === "object" || typeof e == "function"))
    return e;
  if (e !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return FX(r);
}
function FX(r) {
  if (r === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return r;
}
function yg(r) {
  var e = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return yg = function(n) {
    if (n === null || !GX(n))
      return n;
    if (typeof n != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof e < "u") {
      if (e.has(n))
        return e.get(n);
      e.set(n, a);
    }
    function a() {
      return rh(n, arguments, Gf(this).constructor);
    }
    return a.prototype = Object.create(n.prototype, { constructor: { value: a, enumerable: !1, writable: !0, configurable: !0 } }), Ff(a, n);
  }, yg(r);
}
function rh(r, e, t) {
  return nI() ? rh = Reflect.construct : rh = function(a, i, o) {
    var s = [null];
    s.push.apply(s, i);
    var u = Function.bind.apply(a, s), f = new u();
    return o && Ff(f, o.prototype), f;
  }, rh.apply(null, arguments);
}
function nI() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function GX(r) {
  return Function.toString.call(r).indexOf("[native code]") !== -1;
}
function Ff(r, e) {
  return Ff = Object.setPrototypeOf || function(n, a) {
    return n.__proto__ = a, n;
  }, Ff(r, e);
}
function Gf(r) {
  return Gf = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  }, Gf(r);
}
var mg = /* @__PURE__ */ function(r) {
  kX(t, r);
  var e = RX(t);
  function t() {
    return PX(this, t), e.apply(this, arguments);
  }
  return NX(t);
}(/* @__PURE__ */ yg(Error));
function aI(r) {
  var e = /* @__PURE__ */ new Set(), t = /* @__PURE__ */ new Set(), n = [];
  function a(i) {
    if (t.has(i))
      throw new mg();
    if (!e.has(i)) {
      var o;
      t.add(i), e.add(i), (o = r.predecessors(i)) === null || o === void 0 || o.forEach(a), t.delete(i), n.push(i);
    }
  }
  if (r.sinks().forEach(a), e.size !== r.nodeCount())
    throw new mg();
  return n;
}
var zX = function(e) {
  try {
    aI(e);
  } catch (t) {
    if (t instanceof mg)
      return !1;
    throw t;
  }
  return !0;
}, UX = function(e, t) {
  return am(e, t, "post");
}, jX = function(e, t) {
  return am(e, t, "pre");
}, $X = function() {
  return 1;
};
function WX(r, e, t) {
  return XX(r, e || $X, t || function(n) {
    return r.outEdges(n);
  });
}
function XX(r, e, t) {
  var n = {}, a = r.nodes();
  return a.forEach(function(i) {
    var o = String(i);
    n[o] = {}, n[o][o] = {
      distance: 0
    }, a.forEach(function(s) {
      i !== s && (n[o][String(s)] = {
        distance: Number.POSITIVE_INFINITY
      });
    }), t(i).forEach(function(s) {
      var u = s.v === i ? s.w : s.v, f = e(s);
      n[o][String(u)] = {
        distance: f,
        predecessor: i
      };
    });
  }), a.forEach(function(i) {
    var o = String(i), s = n[o];
    a.forEach(function(u) {
      var f = String(u), l = n[f];
      a.forEach(function(c) {
        var h = String(c), d = l[o], v = s[h], p = l[h], g = d.distance + v.distance;
        g < p.distance && (p.distance = g, p.predecessor = v.predecessor);
      });
    });
  }), n;
}
const VX = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  components: wX,
  dfs: am,
  dijkstra: tI,
  dijkstraAll: DX,
  findCycles: LX,
  floydWarshall: WX,
  isAcyclic: zX,
  postorder: UX,
  preorder: jX,
  prim: xX,
  tarjan: rI,
  topsort: aI
}, Symbol.toStringTag, { value: "Module" }));
var YX = function(e, t) {
  for (var n = e.nodes(), a = 0; a < n.length; a++) {
    var i = n[a];
    if (t.hasNode(i))
      return !0;
  }
  return !1;
}, iI = function(e, t) {
  for (var n = e.edges(), a = 0; a < n.length; a++) {
    var i = n[a];
    if (t.hasEdge(i.v, i.w, i.name))
      return !0;
  }
  return !1;
}, oI = function(e, t) {
  var n = e.nodes(), a = n.filter(function(i) {
    return t.hasNode(i);
  });
  return a;
}, sI = function(e, t) {
  var n = e.edges(), a = n.filter(function(i) {
    return t.hasEdge(i.v, i.w, i.name);
  });
  return a;
}, uI = function(e, t) {
  return e.isCompound() === t.isCompound() && e.isDirected() === t.isDirected() && e.isMultigraph() === t.isMultigraph();
}, Od = function(e, t) {
  var n = oI(e, t);
  return n.length === e.nodes().length;
}, im = function(e, t) {
  var n = sI(e, t);
  return n.length === e.edges().length;
}, HX = function(e, t) {
  return uI(e, t) && e.nodeCount() === t.nodeCount() && Od(e, t) && e.edgeCount() === t.edgeCount() && im(e, t);
}, KX = function(e, t) {
  return Od(e, t) && im(e, t);
};
function qX(r, e) {
  return eV(r) || JX(r, e) || QX(r, e) || ZX();
}
function ZX() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function QX(r, e) {
  if (r) {
    if (typeof r == "string")
      return Pw(r, e);
    var t = Object.prototype.toString.call(r).slice(8, -1);
    if (t === "Object" && r.constructor && (t = r.constructor.name), t === "Map" || t === "Set")
      return Array.from(r);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return Pw(r, e);
  }
}
function Pw(r, e) {
  (e == null || e > r.length) && (e = r.length);
  for (var t = 0, n = new Array(e); t < e; t++)
    n[t] = r[t];
  return n;
}
function JX(r, e) {
  var t = r == null ? null : typeof Symbol < "u" && r[Symbol.iterator] || r["@@iterator"];
  if (t != null) {
    var n = [], a = !0, i = !1, o, s;
    try {
      for (t = t.call(r); !(a = (o = t.next()).done) && (n.push(o.value), !(e && n.length === e)); a = !0)
        ;
    } catch (u) {
      i = !0, s = u;
    } finally {
      try {
        !a && t.return != null && t.return();
      } finally {
        if (i)
          throw s;
      }
    }
    return n;
  }
}
function eV(r) {
  if (Array.isArray(r))
    return r;
}
function tV(r) {
  return r instanceof Jo;
}
function Fh(r) {
  if (r.isMultigraph())
    return !1;
  for (var e = r.edges(), t = /* @__PURE__ */ new Map(), n = 0; n < e.length; n++) {
    var a = e[n];
    if (a.v === a.w)
      return !1;
    var i = [a.v, a.w].sort(), o = qX(i, 2), s = o[0], u = o[1], f = "".concat(s, "-").concat(u);
    if (t.has(f))
      return !1;
    t.set(f, !0);
  }
  return !0;
}
function rV(r) {
  return r.nodes().length === 0;
}
function nV(r) {
  for (var e = r.edges(), t = 0; t < e.length; t++) {
    var n = e[t];
    if (n.v === n.w)
      return !0;
  }
  return !1;
}
const aV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  hasSelfLoop: nV,
  isGraph: tV,
  isNullGraph: rV,
  isSimpleGraph: Fh
}, Symbol.toStringTag, { value: "Module" }));
var iV = function(e, t) {
  if (!Fh(e) || !Fh(t) || !Od(e, t) || iI(e, t))
    return !1;
  var n = e.nodeCount();
  return e.edgeCount() + t.edgeCount() === n * (n - 1) / 2;
};
const oV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  containAllSameEdges: im,
  containAllSameNodes: Od,
  containSameEdges: iI,
  containSameNodes: YX,
  getSameEdges: sI,
  getSameNodes: oI,
  isGraphComplement: iV,
  isGraphContainsAnother: KX,
  isGraphOptionSame: uI,
  isGraphSame: HX
}, Symbol.toStringTag, { value: "Module" }));
var sV = function(e) {
  if (!Fh(e))
    return null;
  for (var t = e.nodeCount(), n = new Jo({
    compound: e.isCompound(),
    directed: e.isDirected(),
    multigraph: e.isMultigraph()
  }), a = e.nodes(), i = 0; i < t; i++) {
    var o = a[i];
    n.setNode(o, e.node(o));
    for (var s = i + 1; s < t; s++) {
      var u = a[s];
      e.hasEdge(o, u) || n.setEdge(o, u);
    }
  }
  return n;
};
const uV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getGraphComplement: sV
}, Symbol.toStringTag, { value: "Module" })), fV = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Graph: Jo,
  GraphWithEvent: mX,
  algorithm: VX,
  comparision: oV,
  essence: aV,
  generate: uV
}, Symbol.toStringTag, { value: "Module" })), Dd = /* @__PURE__ */ ri(fV);
var fI = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), lV = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(rm, "__esModule", { value: !0 });
var cV = lV(nm), hV = Dd, dV = (
  /** @class */
  function(r) {
    fI(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e;
  }(cV.default)
), vV = (
  /** @class */
  function(r) {
    fI(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e;
  }(hV.Graph)
), pV = function() {
  return 1;
}, gV = function(r, e) {
  var t;
  if (r.nodeCount() <= 1)
    return [];
  var n = mV(r, e || pV), a = yV(n.graph, n.buckets, n.zeroIdx);
  return (t = a.map(function(i) {
    return r.outEdges(i.v, i.w);
  })) === null || t === void 0 ? void 0 : t.flat();
}, yV = function(r, e, t) {
  for (var n = [], a = e[e.length - 1], i = e[0], o; r.nodeCount(); ) {
    for (; o = i.dequeue(); )
      Gp(r, e, t, o);
    for (; o = a.dequeue(); )
      Gp(r, e, t, o);
    if (r.nodeCount()) {
      for (var s = e.length - 2; s > 0; --s)
        if (o = e[s].dequeue(), o) {
          n = n.concat(Gp(r, e, t, o, !0));
          break;
        }
    }
  }
  return n;
}, Gp = function(r, e, t, n, a) {
  var i, o, s = [];
  return (i = r.inEdges(n.v)) === null || i === void 0 || i.forEach(function(u) {
    var f = r.edge(u), l = r.node(u.v);
    a && s.push({ v: u.v, w: u.w, in: 0, out: 0 }), l.out === void 0 && (l.out = 0), l.out -= f, bg(e, t, l);
  }), (o = r.outEdges(n.v)) === null || o === void 0 || o.forEach(function(u) {
    var f = r.edge(u), l = u.w, c = r.node(l);
    c.in === void 0 && (c.in = 0), c.in -= f, bg(e, t, c);
  }), r.removeNode(n.v), a ? s : void 0;
}, mV = function(r, e) {
  var t = new vV(), n = 0, a = 0;
  r.nodes().forEach(function(f) {
    t.setNode(f, { v: f, in: 0, out: 0 });
  }), r.edges().forEach(function(f) {
    var l = t.edge(f) || 0, c = (e == null ? void 0 : e(f)) || 1, h = l + c;
    t.setEdge(f.v, f.w, h), a = Math.max(a, t.node(f.v).out += c), n = Math.max(n, t.node(f.w).in += c);
  });
  for (var i = [], o = a + n + 3, s = 0; s < o; s++)
    i.push(new dV());
  var u = n + 1;
  return t.nodes().forEach(function(f) {
    bg(i, u, t.node(f));
  }), { buckets: i, zeroIdx: u, graph: t };
}, bg = function(r, e, t) {
  t.out ? t.in ? r[t.out - t.in + e].enqueue(t) : r[r.length - 1].enqueue(t) : r[0].enqueue(t);
};
rm.default = gV;
var bV = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(tm, "__esModule", { value: !0 });
var EV = bV(rm), xV = function(r) {
  var e = function(n) {
    return function(a) {
      var i;
      return ((i = n.edge(a)) === null || i === void 0 ? void 0 : i.weight) || 1;
    };
  }, t = r.graph().acyclicer === "greedy" ? (0, EV.default)(r, e(r)) : wV(r);
  t == null || t.forEach(function(n) {
    var a = r.edge(n);
    r.removeEdgeObj(n), a.forwardName = n.name, a.reversed = !0, r.setEdge(n.w, n.v, a, "rev-".concat(Math.random()));
  });
}, wV = function(r) {
  var e = [], t = {}, n = {}, a = function(i) {
    var o;
    n[i] || (n[i] = !0, t[i] = !0, (o = r.outEdges(i)) === null || o === void 0 || o.forEach(function(s) {
      t[s.w] ? e.push(s) : a(s.w);
    }), delete t[i]);
  };
  return r.nodes().forEach(a), e;
}, _V = function(r) {
  r.edges().forEach(function(e) {
    var t = r.edge(e);
    if (t.reversed) {
      r.removeEdgeObj(e);
      var n = t.forwardName;
      delete t.reversed, delete t.forwardName, r.setEdge(e.w, e.v, t, n);
    }
  });
};
tm.default = { run: xV, undo: _V };
var om = {}, Kn = {}, Ci = {}, MV = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(Ci, "__esModule", { value: !0 });
Ci.Graph = void 0;
var SV = Dd, AV = (
  /** @class */
  function(r) {
    MV(e, r);
    function e() {
      return r !== null && r.apply(this, arguments) || this;
    }
    return e;
  }(SV.Graph)
);
Ci.Graph = AV;
(function(r) {
  Object.defineProperty(r, "__esModule", { value: !0 }), r.minBy = r.notime = r.time = r.partition = r.maxRank = r.addBorderNode = r.removeEmptyRanks = r.normalizeRanks = r.buildLayerMatrix = r.intersectRect = r.predecessorWeights = r.successorWeights = r.zipObject = r.asNonCompoundGraph = r.simplify = r.addDummyNode = void 0;
  var e = Dr(), t = Ci, n = function(E, x) {
    return Number(E) - Number(x);
  }, a = function(E, x, w, _) {
    var M;
    do
      M = "".concat(_).concat(Math.random());
    while (E.hasNode(M));
    return w.dummy = x, E.setNode(M, w), M;
  };
  r.addDummyNode = a;
  var i = function(E) {
    var x = new t.Graph().setGraph(E.graph());
    return E.nodes().forEach(function(w) {
      x.setNode(w, E.node(w));
    }), E.edges().forEach(function(w) {
      var _ = x.edgeFromArgs(w.v, w.w) || { weight: 0, minlen: 1 }, M = E.edge(w);
      x.setEdge(w.v, w.w, {
        weight: _.weight + M.weight,
        minlen: Math.max(_.minlen, M.minlen)
      });
    }), x;
  };
  r.simplify = i;
  var o = function(E) {
    var x = new t.Graph({ multigraph: E.isMultigraph() }).setGraph(E.graph());
    return E.nodes().forEach(function(w) {
      var _;
      !((_ = E.children(w)) === null || _ === void 0) && _.length || x.setNode(w, E.node(w));
    }), E.edges().forEach(function(w) {
      x.setEdgeObj(w, E.edge(w));
    }), x;
  };
  r.asNonCompoundGraph = o;
  var s = function(E, x) {
    return E == null ? void 0 : E.reduce(function(w, _, M) {
      return w[_] = x[M], w;
    }, {});
  };
  r.zipObject = s;
  var u = function(E) {
    var x = {};
    return E.nodes().forEach(function(w) {
      var _, M = {};
      (_ = E.outEdges(w)) === null || _ === void 0 || _.forEach(function(A) {
        var S;
        M[A.w] = (M[A.w] || 0) + (((S = E.edge(A)) === null || S === void 0 ? void 0 : S.weight) || 0);
      }), x[w] = M;
    }), x;
  };
  r.successorWeights = u;
  var f = function(E) {
    var x = E.nodes(), w = x.map(function(_) {
      var M, A = {};
      return (M = E.inEdges(_)) === null || M === void 0 || M.forEach(function(S) {
        A[S.v] = (A[S.v] || 0) + E.edge(S).weight;
      }), A;
    });
    return (0, r.zipObject)(x, w);
  };
  r.predecessorWeights = f;
  var l = function(E, x) {
    var w = Number(E.x), _ = Number(E.y), M = Number(x.x) - w, A = Number(x.y) - _, S = Number(E.width) / 2, T = Number(E.height) / 2;
    if (!M && !A)
      return { x: 0, y: 0 };
    var C, O;
    return Math.abs(A) * S > Math.abs(M) * T ? (A < 0 && (T = -T), C = T * M / A, O = T) : (M < 0 && (S = -S), C = S, O = S * A / M), { x: w + C, y: _ + O };
  };
  r.intersectRect = l;
  var c = function(E) {
    for (var x = [], w = (0, r.maxRank)(E) + 1, _ = 0; _ < w; _++)
      x.push([]);
    E.nodes().forEach(function(M) {
      var A = E.node(M);
      if (A) {
        var S = A.rank;
        S !== void 0 && x[S] && x[S].push(M);
      }
    });
    for (var _ = 0; _ < w; _++)
      x[_] = x[_].sort(function(A, S) {
        var T, C;
        return n((T = E.node(A)) === null || T === void 0 ? void 0 : T.order, (C = E.node(S)) === null || C === void 0 ? void 0 : C.order);
      });
    return x;
  };
  r.buildLayerMatrix = c;
  var h = function(E) {
    var x = E.nodes().filter(function(_) {
      var M;
      return ((M = E.node(_)) === null || M === void 0 ? void 0 : M.rank) !== void 0;
    }).map(function(_) {
      return E.node(_).rank;
    }), w = Math.min.apply(Math, x);
    E.nodes().forEach(function(_) {
      var M = E.node(_);
      M.hasOwnProperty("rank") && w !== 1 / 0 && (M.rank -= w);
    });
  };
  r.normalizeRanks = h;
  var d = function(E) {
    var x = E.nodes(), w = x.filter(function(O) {
      var L;
      return ((L = E.node(O)) === null || L === void 0 ? void 0 : L.rank) !== void 0;
    }).map(function(O) {
      return E.node(O).rank;
    }), _ = Math.min.apply(Math, w), M = [];
    x.forEach(function(O) {
      var L, R = (((L = E.node(O)) === null || L === void 0 ? void 0 : L.rank) || 0) - _;
      M[R] || (M[R] = []), M[R].push(O);
    });
    for (var A = 0, S = E.graph().nodeRankFactor || 0, T = 0; T < M.length; T++) {
      var C = M[T];
      C === void 0 ? T % S !== 0 && (A -= 1) : A && (C == null || C.forEach(function(O) {
        var L = E.node(O);
        L && (L.rank = L.rank || 0, L.rank += A);
      }));
    }
  };
  r.removeEmptyRanks = d;
  var v = function(E, x, w, _) {
    var M = {
      width: 0,
      height: 0
    };
    return (0, e.isNumber)(w) && (0, e.isNumber)(_) && (M.rank = w, M.order = _), (0, r.addDummyNode)(E, "border", M, x);
  };
  r.addBorderNode = v;
  var p = function(E) {
    var x;
    return E.nodes().forEach(function(w) {
      var _, M = (_ = E.node(w)) === null || _ === void 0 ? void 0 : _.rank;
      M !== void 0 && (x === void 0 || M > x) && (x = M);
    }), x || (x = 0), x;
  };
  r.maxRank = p;
  var g = function(E, x) {
    var w = { lhs: [], rhs: [] };
    return E == null || E.forEach(function(_) {
      x(_) ? w.lhs.push(_) : w.rhs.push(_);
    }), w;
  };
  r.partition = g;
  var y = function(E, x) {
    var w = Date.now();
    try {
      return x();
    } finally {
      console.log("".concat(E, " time: ").concat(Date.now() - w, "ms"));
    }
  };
  r.time = y;
  var m = function(E, x) {
    return x();
  };
  r.notime = m;
  var b = function(E, x) {
    return E.reduce(function(w, _) {
      var M = x(w), A = x(_);
      return M > A ? _ : w;
    });
  };
  r.minBy = b;
})(Kn);
Object.defineProperty(om, "__esModule", { value: !0 });
var CV = Kn, TV = function(r) {
  r.graph().dummyChains = [], r.edges().forEach(function(e) {
    return IV(r, e);
  });
}, IV = function(r, e) {
  var t = e.v, n = r.node(t).rank, a = e.w, i = r.node(a).rank, o = e.name, s = r.edge(e), u = s.labelRank;
  if (i !== n + 1) {
    r.removeEdgeObj(e);
    var f = r.graph(), l, c, h;
    for (h = 0, ++n; n < i; ++h, ++n)
      s.points = [], c = {
        edgeLabel: s,
        width: 0,
        height: 0,
        edgeObj: e,
        rank: n
      }, l = (0, CV.addDummyNode)(r, "edge", c, "_d"), n === u && (c.width = s.width, c.height = s.height, c.dummy = "edge-label", c.labelpos = s.labelpos), r.setEdge(t, l, { weight: s.weight }, o), h === 0 && (f.dummyChains || (f.dummyChains = []), f.dummyChains.push(l)), t = l;
    r.setEdge(t, a, { weight: s.weight }, o);
  }
}, OV = function(r) {
  var e;
  (e = r.graph().dummyChains) === null || e === void 0 || e.forEach(function(t) {
    var n = r.node(t), a = n.edgeLabel, i;
    n.edgeObj && r.setEdgeObj(n.edgeObj, a);
    for (var o = t; n.dummy; )
      i = r.successors(o)[0], r.removeNode(o), a.points.push({ x: n.x, y: n.y }), n.dummy === "edge-label" && (a.x = n.x, a.y = n.y, a.width = n.width, a.height = n.height), o = i, n = r.node(o);
  });
};
om.default = { run: TV, undo: OV };
var sm = {}, Ea = {};
Object.defineProperty(Ea, "__esModule", { value: !0 });
Ea.slack = Ea.longestPathWithLayer = Ea.longestPath = void 0;
var lI = function(r) {
  var e, t = {}, n = function(a) {
    var i, o = r.node(a);
    if (!o)
      return 0;
    if (t[a])
      return o.rank;
    t[a] = !0;
    var s;
    return (i = r.outEdges(a)) === null || i === void 0 || i.forEach(function(u) {
      var f = n(u.w), l = r.edge(u).minlen, c = f - l;
      c && (s === void 0 || c < s) && (s = c);
    }), s || (s = 0), o.rank = s, s;
  };
  (e = r.sources()) === null || e === void 0 || e.forEach(function(a) {
    return n(a);
  });
};
Ea.longestPath = lI;
var cI = function(r) {
  var e, t = {}, n, a = function(s) {
    var u, f = r.node(s);
    if (!f)
      return 0;
    if (t[s])
      return f.rank;
    t[s] = !0;
    var l;
    return (u = r.outEdges(s)) === null || u === void 0 || u.forEach(function(c) {
      var h = a(c.w), d = r.edge(c).minlen, v = h - d;
      v && (l === void 0 || v < l) && (l = v);
    }), l || (l = 0), (n === void 0 || l < n) && (n = l), f.rank = l, l;
  };
  (e = r.sources()) === null || e === void 0 || e.forEach(function(s) {
    r.node(s) && a(s);
  }), n === void 0 && (n = 0);
  var i = {}, o = function(s, u) {
    var f, l = r.node(s), c = isNaN(l.layer) ? u : l.layer;
    (l.rank === void 0 || l.rank < c) && (l.rank = c), !i[s] && (i[s] = !0, (f = r.outEdges(s)) === null || f === void 0 || f.map(function(h) {
      o(h.w, c + r.edge(h).minlen);
    }));
  };
  r.nodes().forEach(function(s) {
    var u = r.node(s);
    u && (isNaN(u.layer) ? u.rank -= n : o(s, u.layer));
  });
};
Ea.longestPathWithLayer = cI;
var hI = function(r, e) {
  return r.node(e.w).rank - r.node(e.v).rank - r.edge(e).minlen;
};
Ea.slack = hI;
Ea.default = {
  longestPath: lI,
  longestPathWithLayer: cI,
  slack: hI
};
var ro = {};
Object.defineProperty(ro, "__esModule", { value: !0 });
ro.feasibleTreeWithLayer = ro.feasibleTree = void 0;
var Yo = Ea, DV = Kn, dI = Ci, vI = function(r) {
  var e = new dI.Graph({ directed: !1 }), t = r.nodes()[0], n = r.nodeCount();
  e.setNode(t, {});
  for (var a, i; LV(e, r) < n; )
    a = gI(e, r), i = e.hasNode(a.v) ? (0, Yo.slack)(r, a) : -(0, Yo.slack)(r, a), yI(e, r, i);
  return e;
};
ro.feasibleTree = vI;
var LV = function(r, e) {
  var t = function(n) {
    e.nodeEdges(n).forEach(function(a) {
      var i = a.v, o = n === i ? a.w : i;
      !r.hasNode(o) && !(0, Yo.slack)(e, a) && (r.setNode(o, {}), r.setEdge(n, o, {}), t(o));
    });
  };
  return r.nodes().forEach(t), r.nodeCount();
}, pI = function(r) {
  var e = new dI.Graph({ directed: !1 }), t = r.nodes()[0], n = r.nodes().filter(function(o) {
    return !!r.node(o);
  }).length;
  e.setNode(t, {});
  for (var a, i; NV(e, r) < n; )
    a = gI(e, r), i = e.hasNode(a.v) ? (0, Yo.slack)(r, a) : -(0, Yo.slack)(r, a), yI(e, r, i);
  return e;
};
ro.feasibleTreeWithLayer = pI;
var NV = function(r, e) {
  var t = function(n) {
    var a;
    (a = e.nodeEdges(n)) === null || a === void 0 || a.forEach(function(i) {
      var o = i.v, s = n === o ? i.w : o;
      !r.hasNode(s) && (e.node(s).layer !== void 0 || !(0, Yo.slack)(e, i)) && (r.setNode(s, {}), r.setEdge(n, s, {}), t(s));
    });
  };
  return r.nodes().forEach(t), r.nodeCount();
}, gI = function(r, e) {
  return (0, DV.minBy)(e.edges(), function(t) {
    return r.hasNode(t.v) !== r.hasNode(t.w) ? (0, Yo.slack)(e, t) : 1 / 0;
  });
}, yI = function(r, e, t) {
  r.nodes().forEach(function(n) {
    e.node(n).rank || (e.node(n).rank = 0), e.node(n).rank += t;
  });
};
ro.default = {
  feasibleTree: vI,
  feasibleTreeWithLayer: pI
};
var mI = {};
(function(r) {
  Object.defineProperty(r, "__esModule", { value: !0 }), r.exchangeEdges = r.enterEdge = r.leaveEdge = r.initLowLimValues = r.calcCutValue = r.initCutValues = void 0;
  var e = ro, t = Ea, n = Kn, a = Dd, i = a.algorithm.preorder, o = a.algorithm.postorder, s = function(b) {
    var E = (0, n.simplify)(b);
    (0, t.longestPath)(E);
    var x = (0, e.feasibleTree)(E);
    (0, r.initLowLimValues)(x), (0, r.initCutValues)(x, E);
    for (var w, _; w = (0, r.leaveEdge)(x); )
      _ = (0, r.enterEdge)(x, E, w), (0, r.exchangeEdges)(x, E, w, _);
  }, u = function(b, E) {
    var x = o(b, b.nodes());
    x = x == null ? void 0 : x.slice(0, (x == null ? void 0 : x.length) - 1), x == null || x.forEach(function(w) {
      f(b, E, w);
    });
  };
  r.initCutValues = u;
  var f = function(b, E, x) {
    var w = b.node(x), _ = w.parent;
    b.edgeFromArgs(x, _).cutvalue = (0, r.calcCutValue)(b, E, x);
  }, l = function(b, E, x) {
    var w, _ = b.node(x), M = _.parent, A = !0, S = E.edgeFromArgs(x, M), T = 0;
    return S || (A = !1, S = E.edgeFromArgs(M, x)), T = S.weight, (w = E.nodeEdges(x)) === null || w === void 0 || w.forEach(function(C) {
      var O = C.v === x, L = O ? C.w : C.v;
      if (L !== M) {
        var R = O === A, P = E.edge(C).weight;
        if (T += R ? P : -P, y(b, x, L)) {
          var z = b.edgeFromArgs(x, L).cutvalue;
          T += R ? -z : z;
        }
      }
    }), T;
  };
  r.calcCutValue = l;
  var c = function(b, E) {
    E === void 0 && (E = b.nodes()[0]), h(b, {}, 1, E);
  };
  r.initLowLimValues = c;
  var h = function(b, E, x, w, _) {
    var M, A = x, S = x, T = b.node(w);
    return E[w] = !0, (M = b.neighbors(w)) === null || M === void 0 || M.forEach(function(C) {
      E[C] || (S = h(b, E, S, C, w));
    }), T.low = A, T.lim = S++, _ ? T.parent = _ : delete T.parent, S;
  }, d = function(b) {
    return b.edges().find(function(E) {
      return b.edge(E).cutvalue < 0;
    });
  };
  r.leaveEdge = d;
  var v = function(b, E, x) {
    var w = x.v, _ = x.w;
    E.hasEdge(w, _) || (w = x.w, _ = x.v);
    var M = b.node(w), A = b.node(_), S = M, T = !1;
    M.lim > A.lim && (S = A, T = !0);
    var C = E.edges().filter(function(O) {
      return T === m(b, b.node(O.v), S) && T !== m(b, b.node(O.w), S);
    });
    return (0, n.minBy)(C, function(O) {
      return (0, t.slack)(E, O);
    });
  };
  r.enterEdge = v;
  var p = function(b, E, x, w) {
    var _ = x.v, M = x.w;
    b.removeEdge(_, M), b.setEdge(w.v, w.w, {}), (0, r.initLowLimValues)(b), (0, r.initCutValues)(b, E), g(b, E);
  };
  r.exchangeEdges = p;
  var g = function(b, E) {
    var x = b.nodes().find(function(_) {
      var M;
      return !(!((M = E.node(_)) === null || M === void 0) && M.parent);
    }), w = i(b, x);
    w = w == null ? void 0 : w.slice(1), w == null || w.forEach(function(_) {
      var M = b.node(_).parent, A = E.edgeFromArgs(_, M), S = !1;
      A || (A = E.edgeFromArgs(M, _), S = !0), E.node(_).rank = E.node(M).rank + (S ? A.minlen : -A.minlen);
    });
  }, y = function(b, E, x) {
    return b.hasEdge(E, x);
  }, m = function(b, E, x) {
    return x.low <= E.lim && E.lim <= x.lim;
  };
  r.default = s;
})(mI);
var PV = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(sm, "__esModule", { value: !0 });
var bI = Ea, kV = ro, RV = PV(mI), BV = function(r) {
  switch (r.graph().ranker) {
    case "network-simplex":
      GV(r);
      break;
    case "tight-tree":
      kw(r);
      break;
    case "longest-path":
      FV(r);
      break;
    default:
      kw(r);
  }
}, FV = bI.longestPath, kw = function(r) {
  (0, bI.longestPathWithLayer)(r), (0, kV.feasibleTreeWithLayer)(r);
}, GV = function(r) {
  (0, RV.default)(r);
};
sm.default = BV;
var um = {};
Object.defineProperty(um, "__esModule", { value: !0 });
var zV = function(r) {
  var e, t = {}, n = 0, a = function(i) {
    var o, s = n;
    (o = r.children(i)) === null || o === void 0 || o.forEach(a), t[i] = { low: s, lim: n++ };
  };
  return (e = r.children()) === null || e === void 0 || e.forEach(a), t;
}, UV = function(r, e, t, n) {
  var a = [], i = [], o = Math.min(e[t].low, e[n].low), s = Math.max(e[t].lim, e[n].lim), u, f;
  u = t;
  do
    u = r.parent(u), a.push(u);
  while (u && (e[u].low > o || s > e[u].lim));
  for (f = u, u = n; u && u !== f; )
    i.push(u), u = r.parent(u);
  return { lca: f, path: a.concat(i.reverse()) };
}, jV = function(r) {
  var e, t = zV(r);
  (e = r.graph().dummyChains) === null || e === void 0 || e.forEach(function(n) {
    var a, i, o = n, s = r.node(o), u = s.edgeObj;
    if (u)
      for (var f = UV(r, t, u.v, u.w), l = f.path, c = f.lca, h = 0, d = l[h], v = !0; o !== u.w; ) {
        if (s = r.node(o), v) {
          for (; d !== c && ((a = r.node(d)) === null || a === void 0 ? void 0 : a.maxRank) < s.rank; )
            h++, d = l[h];
          d === c && (v = !1);
        }
        if (!v) {
          for (; h < l.length - 1 && ((i = r.node(l[h + 1])) === null || i === void 0 ? void 0 : i.minRank) <= s.rank; )
            h++;
          d = l[h];
        }
        r.setParent(o, d), o = r.successors(o)[0];
      }
  });
};
um.default = jV;
var fm = {};
Object.defineProperty(fm, "__esModule", { value: !0 });
var Eg = Kn, $V = function(r) {
  var e, t = (0, Eg.addDummyNode)(r, "root", {}, "_root"), n = WV(r), a = Math.max.apply(Math, Object.values(n));
  Math.abs(a) === 1 / 0 && (a = 1);
  var i = a - 1, o = 2 * i + 1;
  r.graph().nestingRoot = t, r.edges().forEach(function(u) {
    r.edge(u).minlen *= o;
  });
  var s = XV(r) + 1;
  (e = r.children()) === null || e === void 0 || e.forEach(function(u) {
    EI(r, t, o, s, i, n, u);
  }), r.graph().nodeRankFactor = o;
}, EI = function(r, e, t, n, a, i, o) {
  var s = r.children(o);
  if (!(s != null && s.length)) {
    o !== e && r.setEdge(e, o, { weight: 0, minlen: t });
    return;
  }
  var u = (0, Eg.addBorderNode)(r, "_bt"), f = (0, Eg.addBorderNode)(r, "_bb"), l = r.node(o);
  r.setParent(u, o), l.borderTop = u, r.setParent(f, o), l.borderBottom = f, s == null || s.forEach(function(c) {
    EI(r, e, t, n, a, i, c);
    var h = r.node(c), d = h.borderTop ? h.borderTop : c, v = h.borderBottom ? h.borderBottom : c, p = h.borderTop ? n : 2 * n, g = d !== v ? 1 : a - i[o] + 1;
    r.setEdge(u, d, {
      minlen: g,
      weight: p,
      nestingEdge: !0
    }), r.setEdge(v, f, {
      minlen: g,
      weight: p,
      nestingEdge: !0
    });
  }), r.parent(o) || r.setEdge(e, u, { weight: 0, minlen: a + i[o] });
}, WV = function(r) {
  var e, t = {}, n = function(a, i) {
    var o = r.children(a);
    o == null || o.forEach(function(s) {
      return n(s, i + 1);
    }), t[a] = i;
  };
  return (e = r.children()) === null || e === void 0 || e.forEach(function(a) {
    return n(a, 1);
  }), t;
}, XV = function(r) {
  var e = 0;
  return r.edges().forEach(function(t) {
    e += r.edge(t).weight;
  }), e;
}, VV = function(r) {
  var e = r.graph();
  e.nestingRoot && r.removeNode(e.nestingRoot), delete e.nestingRoot, r.edges().forEach(function(t) {
    var n = r.edge(t);
    n.nestingEdge && r.removeEdgeObj(t);
  });
};
fm.default = { run: $V, cleanup: VV };
var lm = {};
Object.defineProperty(lm, "__esModule", { value: !0 });
var YV = Kn, HV = function(r) {
  var e, t = function(n) {
    var a = r.children(n), i = r.node(n);
    if (a != null && a.length && a.forEach(function(u) {
      return t(u);
    }), i.hasOwnProperty("minRank")) {
      i.borderLeft = [], i.borderRight = [];
      for (var o = i.minRank, s = i.maxRank + 1; o < s; o += 1)
        Rw(r, "borderLeft", "_bl", n, i, o), Rw(r, "borderRight", "_br", n, i, o);
    }
  };
  (e = r.children()) === null || e === void 0 || e.forEach(function(n) {
    return t(n);
  });
}, Rw = function(r, e, t, n, a, i) {
  var o = { rank: i, borderType: e, width: 0, height: 0 }, s = a[e][i - 1], u = (0, YV.addDummyNode)(r, "border", o, t);
  a[e][i] = u, r.setParent(u, n), s && r.setEdge(s, u, { weight: 1 });
};
lm.default = HV;
var cm = {};
Object.defineProperty(cm, "__esModule", { value: !0 });
var KV = function(r) {
  var e, t = (e = r.graph().rankdir) === null || e === void 0 ? void 0 : e.toLowerCase();
  (t === "lr" || t === "rl") && xI(r);
}, qV = function(r) {
  var e, t = (e = r.graph().rankdir) === null || e === void 0 ? void 0 : e.toLowerCase();
  (t === "bt" || t === "rl") && ZV(r), (t === "lr" || t === "rl") && (QV(r), xI(r));
}, xI = function(r) {
  r.nodes().forEach(function(e) {
    Bw(r.node(e));
  }), r.edges().forEach(function(e) {
    Bw(r.edge(e));
  });
}, Bw = function(r) {
  var e = r.width;
  r.width = r.height, r.height = e;
}, ZV = function(r) {
  r.nodes().forEach(function(e) {
    zp(r.node(e));
  }), r.edges().forEach(function(e) {
    var t, n = r.edge(e);
    (t = n.points) === null || t === void 0 || t.forEach(function(a) {
      return zp(a);
    }), n.hasOwnProperty("y") && zp(n);
  });
}, zp = function(r) {
  r != null && r.y && (r.y = -r.y);
}, QV = function(r) {
  r.nodes().forEach(function(e) {
    Up(r.node(e));
  }), r.edges().forEach(function(e) {
    var t, n = r.edge(e);
    (t = n.points) === null || t === void 0 || t.forEach(function(a) {
      return Up(a);
    }), n.hasOwnProperty("x") && Up(n);
  });
}, Up = function(r) {
  var e = r.x;
  r.x = r.y, r.y = e;
};
cm.default = { adjust: KV, undo: qV };
var hm = {}, dm = {};
function wI(r) {
  return [parseInt(r.substr(1, 2), 16), parseInt(r.substr(3, 2), 16), parseInt(r.substr(5, 2), 16)];
}
function jp(r) {
  var e = Math.round(r).toString(16);
  return e.length === 1 ? "0" + e : e;
}
function _I(r) {
  return "#" + jp(r[0]) + jp(r[1]) + jp(r[2]);
}
var Ln = function(r) {
  return r !== null && typeof r != "function" && isFinite(r.length);
}, JV = function(r, e) {
  return Ln(r) ? r.indexOf(e) > -1 : !1;
};
const Gh = JV;
var MI = function(r, e) {
  if (!Ln(r))
    return r;
  for (var t = [], n = 0; n < r.length; n++) {
    var a = r[n];
    e(a, n) && t.push(a);
  }
  return t;
}, eY = function(r, e) {
  return e === void 0 && (e = []), MI(r, function(t) {
    return !Gh(e, t);
  });
};
const tY = eY, qn = function(r) {
  return typeof r == "function";
};
var uo = function(r) {
  return r == null;
}, rY = {}.toString, ni = function(r, e) {
  return rY.call(r) === "[object " + e + "]";
};
const $r = function(r) {
  return Array.isArray ? Array.isArray(r) : ni(r, "Array");
}, Ld = function(r) {
  var e = typeof r;
  return r !== null && e === "object" || e === "function";
};
function ou(r, e) {
  if (r) {
    var t;
    if ($r(r))
      for (var n = 0, a = r.length; n < a && (t = e(r[n], n), t !== !1); n++)
        ;
    else if (Ld(r)) {
      for (var i in r)
        if (r.hasOwnProperty(i) && (t = e(r[i], i), t === !1))
          break;
    }
  }
}
var nY = Object.keys ? function(r) {
  return Object.keys(r);
} : function(r) {
  var e = [];
  return ou(r, function(t, n) {
    qn(r) && n === "prototype" || e.push(n);
  }), e;
};
const SI = nY;
function AI(r, e) {
  var t = SI(e), n = t.length;
  if (uo(r))
    return !n;
  for (var a = 0; a < n; a += 1) {
    var i = t[a];
    if (e[i] !== r[i] || !(i in r))
      return !1;
  }
  return !0;
}
var aY = function(r) {
  return typeof r == "object" && r !== null;
};
const zh = aY;
var iY = function(r) {
  if (!zh(r) || !ni(r, "Object"))
    return !1;
  if (Object.getPrototypeOf(r) === null)
    return !0;
  for (var e = r; Object.getPrototypeOf(e) !== null; )
    e = Object.getPrototypeOf(e);
  return Object.getPrototypeOf(r) === e;
};
const su = iY;
function oY(r, e) {
  if (!$r(r))
    return null;
  var t;
  if (qn(e) && (t = e), su(e) && (t = function(a) {
    return AI(a, e);
  }), t) {
    for (var n = 0; n < r.length; n += 1)
      if (t(r[n]))
        return r[n];
  }
  return null;
}
function sY(r, e, t) {
  t === void 0 && (t = 0);
  for (var n = t; n < r.length; n++)
    if (e(r[n], n))
      return n;
  return -1;
}
var uY = function(r, e) {
  for (var t = null, n = 0; n < r.length; n++) {
    var a = r[n], i = a[e];
    if (!uo(i)) {
      $r(i) ? t = i[0] : t = i;
      break;
    }
  }
  return t;
};
const fY = uY;
var lY = function(r) {
  if (!$r(r))
    return [];
  for (var e = [], t = 0; t < r.length; t++)
    e = e.concat(r[t]);
  return e;
};
const cY = lY;
var CI = function(r, e) {
  if (e === void 0 && (e = []), !$r(r))
    e.push(r);
  else
    for (var t = 0; t < r.length; t += 1)
      CI(r[t], e);
  return e;
};
const hY = CI, TI = function(r) {
  if ($r(r))
    return r.reduce(function(e, t) {
      return Math.max(e, t);
    }, r[0]);
}, II = function(r) {
  if ($r(r))
    return r.reduce(function(e, t) {
      return Math.min(e, t);
    }, r[0]);
};
var dY = function(r) {
  var e = r.filter(function(o) {
    return !isNaN(o);
  });
  if (!e.length)
    return {
      min: 0,
      max: 0
    };
  if ($r(r[0])) {
    for (var t = [], n = 0; n < r.length; n++)
      t = t.concat(r[n]);
    e = t;
  }
  var a = TI(e), i = II(e);
  return {
    min: i,
    max: a
  };
};
const vY = dY;
var OI = Array.prototype, pY = OI.splice, gY = OI.indexOf, yY = function(r) {
  for (var e = [], t = 1; t < arguments.length; t++)
    e[t - 1] = arguments[t];
  for (var n = 0; n < e.length; n++)
    for (var a = e[n], i = -1; (i = gY.call(r, a)) > -1; )
      pY.call(r, i, 1);
  return r;
};
const mY = yY;
var bY = Array.prototype.splice, EY = function(e, t) {
  if (!Ln(e))
    return [];
  for (var n = e ? t.length : 0, a = n - 1; n--; ) {
    var i = void 0, o = t[n];
    (n === a || o !== i) && (i = o, bY.call(e, o, 1));
  }
  return e;
};
const DI = EY;
var xY = function(r, e, t) {
  if (!$r(r) && !su(r))
    return r;
  var n = t;
  return ou(r, function(a, i) {
    n = e(n, a, i);
  }), n;
};
const LI = xY;
var wY = function(r, e) {
  var t = [];
  if (!Ln(r))
    return t;
  for (var n = -1, a = [], i = r.length; ++n < i; ) {
    var o = r[n];
    e(o, n, r) && (t.push(o), a.push(n));
  }
  return DI(r, a), t;
};
const _Y = wY, no = function(r) {
  return ni(r, "String");
};
function MY(r, e) {
  var t;
  if (qn(e))
    t = function(a, i) {
      return e(a) - e(i);
    };
  else {
    var n = [];
    no(e) ? n.push(e) : $r(e) && (n = e), t = function(a, i) {
      for (var o = 0; o < n.length; o += 1) {
        var s = n[o];
        if (a[s] > i[s])
          return 1;
        if (a[s] < i[s])
          return -1;
      }
      return 0;
    };
  }
  return r.sort(t), r;
}
function NI(r, e) {
  e === void 0 && (e = /* @__PURE__ */ new Map());
  var t = [];
  if (Array.isArray(r))
    for (var n = 0, a = r.length; n < a; n++) {
      var i = r[n];
      e.has(i) || (t.push(i), e.set(i, !0));
    }
  return t;
}
var SY = function() {
  for (var r = [], e = 0; e < arguments.length; e++)
    r[e] = arguments[e];
  return NI([].concat.apply([], r));
};
const AY = SY, CY = function(r, e) {
  for (var t = [], n = {}, a = 0; a < r.length; a++) {
    var i = r[a], o = i[e];
    if (!uo(o)) {
      $r(o) || (o = [o]);
      for (var s = 0; s < o.length; s++) {
        var u = o[s];
        n[u] || (t.push(u), n[u] = !0);
      }
    }
  }
  return t;
};
function TY(r) {
  if (Ln(r))
    return r[0];
}
function IY(r) {
  if (Ln(r)) {
    var e = r;
    return e[e.length - 1];
  }
}
function OY(r, e) {
  return $r(r) || no(r) ? r[0] === e : !1;
}
function DY(r, e) {
  return $r(r) || no(r) ? r[r.length - 1] === e : !1;
}
var LY = function(r, e) {
  for (var t = 0; t < r.length; t++)
    if (!e(r[t], t))
      return !1;
  return !0;
};
const NY = LY;
var PY = function(r, e) {
  for (var t = 0; t < r.length; t++)
    if (e(r[t], t))
      return !0;
  return !1;
};
const kY = PY;
var RY = Object.prototype.hasOwnProperty;
function PI(r, e) {
  if (!e || !$r(r))
    return {};
  for (var t = {}, n = qn(e) ? e : function(s) {
    return s[e];
  }, a, i = 0; i < r.length; i++) {
    var o = r[i];
    a = n(o), RY.call(t, a) ? t[a].push(o) : t[a] = [o];
  }
  return t;
}
function kI(r, e) {
  if (!e)
    return {
      0: r
    };
  if (!qn(e)) {
    var t = $r(e) ? e : e.replace(/\s+/g, "").split("*");
    e = function(n) {
      for (var a = "_", i = 0, o = t.length; i < o; i++)
        a += n[t[i]] && n[t[i]].toString();
      return a;
    };
  }
  return PI(r, e);
}
const BY = function(r, e) {
  if (!e)
    return [r];
  var t = kI(r, e), n = [];
  for (var a in t)
    n.push(t[a]);
  return n;
};
function FY(r, e) {
  return r["_wrap_" + e];
}
function GY(r, e) {
  if (r["_wrap_" + e])
    return r["_wrap_" + e];
  var t = function(n) {
    r[e](n);
  };
  return r["_wrap_" + e] = t, t;
}
var Fw = {};
function zY(r) {
  var e = Fw[r];
  if (!e) {
    for (var t = r.toString(16), n = t.length; n < 6; n++)
      t = "0" + t;
    e = "#" + t, Fw[r] = e;
  }
  return e;
}
function UY(r) {
  var e = 0, t = 0, n = 0, a = 0;
  return $r(r) ? r.length === 1 ? e = t = n = a = r[0] : r.length === 2 ? (e = n = r[0], t = a = r[1]) : r.length === 3 ? (e = r[0], t = a = r[1], n = r[2]) : (e = r[0], t = r[1], n = r[2], a = r[3]) : e = t = n = a = r, {
    r1: e,
    r2: t,
    r3: n,
    r4: a
  };
}
var jY = function(r, e, t) {
  return r < e ? e : r > t ? t : r;
};
const $Y = jY;
var WY = function(r, e) {
  var t = e.toString(), n = t.indexOf(".");
  if (n === -1)
    return Math.round(r);
  var a = t.substr(n + 1).length;
  return a > 20 && (a = 20), parseFloat(r.toFixed(a));
};
const XY = WY;
var Ti = function(r) {
  return ni(r, "Number");
}, VY = function(r) {
  return Ti(r) && r % 1 !== 0;
};
const YY = VY;
var HY = function(r) {
  return Ti(r) && r % 2 === 0;
};
const KY = HY;
var qY = Number.isInteger ? Number.isInteger : function(r) {
  return Ti(r) && r % 1 === 0;
};
const ZY = qY;
var QY = function(r) {
  return Ti(r) && r < 0;
};
const JY = QY;
var eH = 1e-5;
function tH(r, e, t) {
  return t === void 0 && (t = eH), Math.abs(r - e) < t;
}
var rH = function(r) {
  return Ti(r) && r % 2 !== 0;
};
const nH = rH;
var aH = function(r) {
  return Ti(r) && r > 0;
};
const iH = aH, oH = function(r, e) {
  if ($r(r)) {
    for (var t, n = -1 / 0, a = 0; a < r.length; a++) {
      var i = r[a], o = qn(e) ? e(i) : i[e];
      o > n && (t = i, n = o);
    }
    return t;
  }
}, sH = function(r, e) {
  if ($r(r)) {
    for (var t, n = 1 / 0, a = 0; a < r.length; a++) {
      var i = r[a], o = qn(e) ? e(i) : i[e];
      o < n && (t = i, n = o);
    }
    return t;
  }
};
var uH = function(r, e) {
  return (r % e + e) % e;
};
const fH = uH;
var lH = 180 / Math.PI, cH = function(r) {
  return lH * r;
};
const hH = cH, dH = parseInt;
var vH = Math.PI / 180, pH = function(r) {
  return vH * r;
};
const gH = pH, Gw = function(r, e) {
  return r.hasOwnProperty(e);
};
var RI = Object.values ? function(r) {
  return Object.values(r);
} : function(r) {
  var e = [];
  return ou(r, function(t, n) {
    qn(r) && n === "prototype" || e.push(t);
  }), e;
};
const yH = function(r, e) {
  return Gh(RI(r), e);
}, il = function(r) {
  return uo(r) ? "" : r.toString();
};
var mH = function(r) {
  return il(r).toLowerCase();
};
const bH = mH;
var EH = function(r) {
  var e = il(r);
  return e.charAt(0).toLowerCase() + e.substring(1);
};
const xH = EH;
function wH(r, e) {
  return !r || !e ? r : r.replace(/\\?\{([^{}]+)\}/g, function(t, n) {
    return t.charAt(0) === "\\" ? t.slice(1) : e[n] === void 0 ? "" : e[n];
  });
}
var _H = function(r) {
  return il(r).toUpperCase();
};
const MH = _H;
var SH = function(r) {
  var e = il(r);
  return e.charAt(0).toUpperCase() + e.substring(1);
};
const AH = SH;
var CH = {}.toString, TH = function(r) {
  return CH.call(r).replace(/^\[object /, "").replace(/]$/, "");
};
const BI = TH;
var IH = function(r) {
  return ni(r, "Arguments");
};
const OH = IH;
var DH = function(r) {
  return ni(r, "Boolean");
};
const LH = DH;
var NH = function(r) {
  return ni(r, "Date");
};
const PH = NH;
var kH = function(r) {
  return ni(r, "Error");
};
const RH = kH;
function BH(r) {
  return Ti(r) && isFinite(r);
}
var FH = function(r) {
  return r === null;
};
const GH = FH;
var zH = Object.prototype, UH = function(r) {
  var e = r && r.constructor, t = typeof e == "function" && e.prototype || zH;
  return r === t;
};
const FI = UH;
var jH = function(r) {
  return ni(r, "RegExp");
};
const $H = jH;
var WH = function(r) {
  return r === void 0;
};
const XH = WH;
var VH = function(r) {
  return r instanceof Element || r instanceof Document;
};
const YH = VH;
function HH(r) {
  var e = window.requestAnimationFrame || // @ts-ignore
  window.webkitRequestAnimationFrame || // @ts-ignore
  window.mozRequestAnimationFrame || // @ts-ignore
  window.msRequestAnimationFrame || function(t) {
    return setTimeout(t, 16);
  };
  return e(r);
}
function KH(r) {
  var e = window.cancelAnimationFrame || // @ts-ignore
  window.webkitCancelAnimationFrame || // @ts-ignore
  window.mozCancelAnimationFrame || // @ts-ignore
  window.msCancelAnimationFrame || clearTimeout;
  e(r);
}
function $p(r, e) {
  for (var t in e)
    e.hasOwnProperty(t) && t !== "constructor" && e[t] !== void 0 && (r[t] = e[t]);
}
function Vs(r, e, t, n) {
  return e && $p(r, e), t && $p(r, t), n && $p(r, n), r;
}
var qH = function() {
  for (var r = [], e = 0; e < arguments.length; e++)
    r[e] = arguments[e];
  for (var t = r[0], n = 1; n < r.length; n++) {
    var a = r[n];
    qn(a) && (a = a.prototype), Vs(t.prototype, a);
  }
};
const ZH = qH;
var xg = function(r) {
  if (typeof r != "object" || r === null)
    return r;
  var e;
  if ($r(r)) {
    e = [];
    for (var t = 0, n = r.length; t < n; t++)
      typeof r[t] == "object" && r[t] != null ? e[t] = xg(r[t]) : e[t] = r[t];
  } else {
    e = {};
    for (var a in r)
      typeof r[a] == "object" && r[a] != null ? e[a] = xg(r[a]) : e[a] = r[a];
  }
  return e;
};
const QH = xg;
function JH(r, e, t) {
  var n;
  return function() {
    var a = this, i = arguments, o = function() {
      n = null, t || r.apply(a, i);
    }, s = t && !n;
    clearTimeout(n), n = setTimeout(o, e), s && r.apply(a, i);
  };
}
function eK(r) {
  var e, t, n, a = r || 1;
  function i(s, u) {
    ++e > a && (n = t, o(1), ++e), t[s] = u;
  }
  function o(s) {
    e = 0, t = /* @__PURE__ */ Object.create(null), s || (n = /* @__PURE__ */ Object.create(null));
  }
  return o(), {
    clear: o,
    has: function(s) {
      return t[s] !== void 0 || n[s] !== void 0;
    },
    get: function(s) {
      var u = t[s];
      if (u !== void 0)
        return u;
      if ((u = n[s]) !== void 0)
        return i(s, u), u;
    },
    set: function(s, u) {
      t[s] !== void 0 ? t[s] = u : i(s, u);
    }
  };
}
const GI = function(r, e, t) {
  if (t === void 0 && (t = 128), !qn(r))
    throw new TypeError("Expected a function");
  var n = function() {
    for (var a = [], i = 0; i < arguments.length; i++)
      a[i] = arguments[i];
    var o = e ? e.apply(this, a) : a[0], s = n.cache;
    if (s.has(o))
      return s.get(o);
    var u = r.apply(this, a);
    return s.set(o, u), u;
  };
  return n.cache = eK(t), n;
};
var tK = 5;
function rK(r, e) {
  if (Object.hasOwn)
    return Object.hasOwn(r, e);
  if (r == null)
    throw new TypeError("Cannot convert undefined or null to object");
  return Object.prototype.hasOwnProperty.call(Object(r), e);
}
function zI(r, e, t, n) {
  t = t || 0, n = n || tK;
  for (var a in e)
    if (rK(e, a)) {
      var i = e[a];
      i !== null && su(i) ? (su(r[a]) || (r[a] = {}), t < n ? zI(r[a], i, t + 1, n) : r[a] = e[a]) : $r(i) ? (r[a] = [], r[a] = r[a].concat(i)) : i !== void 0 && (r[a] = i);
    }
}
var nK = function(r) {
  for (var e = [], t = 1; t < arguments.length; t++)
    e[t - 1] = arguments[t];
  for (var n = 0; n < e.length; n += 1)
    zI(r, e[n]);
  return r;
};
const aK = nK;
var iK = function(r, e, t, n) {
  qn(e) || (t = e, e = r, r = function() {
  });
  var a = Object.create ? function(o, s) {
    return Object.create(o, {
      constructor: {
        value: s
      }
    });
  } : function(o, s) {
    function u() {
    }
    u.prototype = o;
    var f = new u();
    return f.constructor = s, f;
  }, i = a(e.prototype, r);
  return r.prototype = Vs(i, r.prototype), r.superclass = a(e.prototype, e), Vs(i, t), Vs(r, n), r;
};
const oK = iK;
var sK = function(r, e) {
  if (!Ln(r))
    return -1;
  var t = Array.prototype.indexOf;
  if (t)
    return t.call(r, e);
  for (var n = -1, a = 0; a < r.length; a++)
    if (r[a] === e) {
      n = a;
      break;
    }
  return n;
};
const uK = sK;
var fK = Object.prototype.hasOwnProperty;
function lK(r) {
  if (uo(r))
    return !0;
  if (Ln(r))
    return !r.length;
  var e = BI(r);
  if (e === "Map" || e === "Set")
    return !r.size;
  if (FI(r))
    return !Object.keys(r).length;
  for (var t in r)
    if (fK.call(r, t))
      return !1;
  return !0;
}
var wg = function(r, e) {
  if (r === e)
    return !0;
  if (!r || !e || no(r) || no(e))
    return !1;
  if (Ln(r) || Ln(e)) {
    if (r.length !== e.length)
      return !1;
    for (var t = !0, n = 0; n < r.length && (t = wg(r[n], e[n]), !!t); n++)
      ;
    return t;
  }
  if (zh(r) || zh(e)) {
    var a = Object.keys(r), i = Object.keys(e);
    if (a.length !== i.length)
      return !1;
    for (var t = !0, n = 0; n < a.length && (t = wg(r[a[n]], e[a[n]]), !!t); n++)
      ;
    return t;
  }
  return !1;
};
const UI = wg, cK = function(r, e, t) {
  return qn(t) ? !!t(r, e) : UI(r, e);
};
var hK = function(r, e) {
  if (!Ln(r))
    return r;
  for (var t = [], n = 0; n < r.length; n++) {
    var a = r[n];
    t.push(e(a, n));
  }
  return t;
};
const dK = hK;
var vK = function(r) {
  return r;
};
const pK = function(r, e) {
  e === void 0 && (e = vK);
  var t = {};
  return Ld(r) && !uo(r) && Object.keys(r).forEach(function(n) {
    t[n] = e(r[n], n);
  }), t;
}, gK = function(r, e, t) {
  for (var n = 0, a = no(e) ? e.split(".") : e; r && n < a.length; )
    r = r[a[n++]];
  return r === void 0 || n < a.length ? t : r;
}, yK = function(r, e, t) {
  var n = r, a = no(e) ? e.split(".") : e;
  return a.forEach(function(i, o) {
    o < a.length - 1 ? (Ld(n[i]) || (n[i] = Ti(a[o + 1]) ? [] : {}), n = n[i]) : n[i] = t;
  }), r;
};
var mK = Object.prototype.hasOwnProperty;
const bK = function(r, e) {
  if (r === null || !su(r))
    return {};
  var t = {};
  return ou(e, function(n) {
    mK.call(r, n) && (t[n] = r[n]);
  }), t;
}, EK = function(r, e) {
  return LI(r, function(t, n, a) {
    return e.includes(a) || (t[a] = n), t;
  }, {});
}, xK = function(r, e, t) {
  var n, a, i, o, s = 0;
  t || (t = {});
  var u = function() {
    s = t.leading === !1 ? 0 : Date.now(), n = null, o = r.apply(a, i), n || (a = i = null);
  }, f = function() {
    var l = Date.now();
    !s && t.leading === !1 && (s = l);
    var c = e - (l - s);
    return a = this, i = arguments, c <= 0 || c > e ? (n && (clearTimeout(n), n = null), s = l, o = r.apply(a, i), n || (a = i = null)) : !n && t.trailing !== !1 && (n = setTimeout(u, c)), o;
  };
  return f.cancel = function() {
    clearTimeout(n), s = 0, n = a = i = null;
  }, f;
}, wK = function(r) {
  return Ln(r) ? Array.prototype.slice.call(r) : [];
};
var Mc = {};
const _K = function(r) {
  return r = r || "g", Mc[r] ? Mc[r] += 1 : Mc[r] = 1, r + Mc[r];
}, MK = function() {
}, SK = function(r) {
  return r;
};
function AK(r) {
  return uo(r) ? 0 : Ln(r) ? r.length : Object.keys(r).length;
}
var CK = (
  /** @class */
  function() {
    function r() {
      this.map = {};
    }
    return r.prototype.has = function(e) {
      return this.map[e] !== void 0;
    }, r.prototype.get = function(e, t) {
      var n = this.map[e];
      return n === void 0 ? t : n;
    }, r.prototype.set = function(e, t) {
      this.map[e] = t;
    }, r.prototype.clear = function() {
      this.map = {};
    }, r.prototype.delete = function(e) {
      delete this.map[e];
    }, r.prototype.size = function() {
      return Object.keys(this.map).length;
    }, r;
  }()
);
const TK = CK;
var IK = /rgba?\(([\s.,0-9]+)\)/;
function OK() {
  var r = document.createElement("i");
  return r.title = "Web Colour Picker", r.style.display = "none", document.body.appendChild(r), r;
}
var Sc;
function DK(r) {
  if (r[0] === "#" && r.length === 7)
    return r;
  Sc || (Sc = OK()), Sc.style.color = r;
  var e = document.defaultView.getComputedStyle(Sc, "").getPropertyValue("color"), t = IK.exec(e), n = t[1].split(/\s*,\s*/).map(function(a) {
    return Number(a);
  });
  return e = _I(n), e;
}
var jI = GI(DK, function(r) {
  return r;
}, 256);
function Wp(r, e, t, n) {
  return r[n] + (e[n] - r[n]) * t;
}
function LK(r, e) {
  var t = isNaN(Number(e)) || e < 0 ? 0 : e > 1 ? 1 : Number(e), n = r.length - 1, a = Math.floor(n * t), i = n * t - a, o = r[a], s = a === n ? o : r[a + 1];
  return _I([Wp(o, s, i, 0), Wp(o, s, i, 1), Wp(o, s, i, 2)]);
}
function NK(r) {
  var e = typeof r == "string" ? r.split("-") : r, t = e.map(function(n) {
    return wI(n.indexOf("#") === -1 ? jI(n) : n);
  });
  return function(n) {
    return LK(t, n);
  };
}
var PK = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, kK = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, RK = /[\d.]+:(#[^\s]+|[^)]+\))/gi;
function BK(r) {
  return /^[r,R,L,l]{1}[\s]*\(/.test(r);
}
function FK(r) {
  if (BK(r)) {
    var e, t = void 0;
    if (r[0] === "l") {
      var n = PK.exec(r), a = +n[1] + 90;
      t = n[2], e = "linear-gradient(" + a + "deg, ";
    } else if (r[0] === "r") {
      e = "radial-gradient(";
      var n = kK.exec(r);
      t = n[4];
    }
    var i = t.match(RK);
    return i.forEach(function(o, s) {
      var u = o.split(":");
      e += u[1] + " " + Number(u[0]) * 100 + "%", s !== i.length - 1 && (e += ", ");
    }), e += ")", e;
  }
  return r;
}
function GK(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return ty(n, t), ei(r, n, e);
}
function zK(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return ry(n, t), ei(r, n, e);
}
function UK(r, e, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return ny(n, t), ei(r, n, e);
}
function jK(r, e, t) {
  return ei(r, t, e);
}
function $K(r, e) {
  for (var t = r ? [].concat(r) : [1, 0, 0, 0, 1, 0, 0, 0, 1], n = 0, a = e.length; n < a; n++) {
    var i = e[n];
    switch (i[0]) {
      case "t":
        GK(t, t, [i[1], i[2]]);
        break;
      case "s":
        UK(t, t, [i[1], i[2]]);
        break;
      case "r":
        zK(t, t, i[1]);
        break;
      case "m":
        jK(t, t, i[1]);
        break;
    }
  }
  return t;
}
function $I(r, e) {
  return r[0] * e[1] - e[0] * r[1];
}
function WK(r, e, t) {
  var n = YS(r, e), a = $I(r, e) >= 0;
  return t ? a ? Math.PI * 2 - n : n : a ? n : Math.PI * 2 - n;
}
function XK(r, e, t) {
  return t ? (r[0] = e[1], r[1] = -1 * e[0]) : (r[0] = -1 * e[1], r[1] = e[0]), r;
}
function VK(r, e) {
  if (e === "off")
    return [].concat(r);
  var t = typeof e == "number" && e >= 1 ? Math.pow(10, e) : 1;
  return r.map(function(n) {
    var a = n.slice(1).map(Number).map(function(i) {
      return e ? Math.round(i * t) / t : Math.round(i);
    });
    return [n[0]].concat(a);
  });
}
function YK(r, e) {
  return e === void 0 && (e = "off"), VK(r, e).map(function(t) {
    return t[0] + t.slice(1).join(" ");
  }).join("");
}
var WI = {
  x1: 0,
  y1: 0,
  x2: 0,
  y2: 0,
  x: 0,
  y: 0,
  qx: null,
  qy: null
};
function HK(r, e, t) {
  if (r[t].length > 7) {
    r[t].shift();
    for (var n = r[t], a = t; n.length; )
      e[t] = "A", r.splice(a += 1, 0, ["C"].concat(n.splice(0, 6)));
    r.splice(t, 1);
  }
}
var bf = {
  a: 7,
  c: 6,
  h: 1,
  l: 2,
  m: 2,
  r: 4,
  q: 4,
  s: 4,
  t: 2,
  v: 1,
  z: 0
};
function XI(r) {
  return Array.isArray(r) && r.every(function(e) {
    var t = e[0].toLowerCase();
    return bf[t] === e.length - 1 && "achlmqstvz".includes(t);
  });
}
function VI(r) {
  return XI(r) && // @ts-ignore -- `isPathArray` also checks if it's `Array`
  r.every(function(e) {
    var t = e[0];
    return t === t.toUpperCase();
  });
}
function YI(r) {
  return VI(r) && r.every(function(e) {
    var t = e[0];
    return "ACLMQZ".includes(t);
  });
}
function zw(r) {
  for (var e = r.pathValue[r.segmentStart], t = e.toLowerCase(), n = r.data; n.length >= bf[t] && (t === "m" && n.length > 2 ? (r.segments.push([e].concat(n.splice(0, 2))), t = "l", e = e === "m" ? "l" : "L") : r.segments.push([e].concat(n.splice(0, bf[t]))), !!bf[t]); )
    ;
}
function KK(r) {
  var e = r.index, t = r.pathValue, n = t.charCodeAt(e);
  if (n === 48) {
    r.param = 0, r.index += 1;
    return;
  }
  if (n === 49) {
    r.param = 1, r.index += 1;
    return;
  }
  r.err = '[path-util]: invalid Arc flag "' + t[e] + '", expecting 0 or 1 at index ' + e;
}
function qK(r) {
  return r >= 48 && r <= 57 || r === 43 || r === 45 || r === 46;
}
function Ss(r) {
  return r >= 48 && r <= 57;
}
function ZK(r) {
  var e = r.max, t = r.pathValue, n = r.index, a = n, i = !1, o = !1, s = !1, u = !1, f;
  if (a >= e) {
    r.err = "[path-util]: Invalid path value at index " + a + ', "pathValue" is missing param';
    return;
  }
  if (f = t.charCodeAt(a), (f === 43 || f === 45) && (a += 1, f = t.charCodeAt(a)), !Ss(f) && f !== 46) {
    r.err = "[path-util]: Invalid path value at index " + a + ', "' + t[a] + '" is not a number';
    return;
  }
  if (f !== 46) {
    if (i = f === 48, a += 1, f = t.charCodeAt(a), i && a < e && f && Ss(f)) {
      r.err = "[path-util]: Invalid path value at index " + n + ', "' + t[n] + '" illegal number';
      return;
    }
    for (; a < e && Ss(t.charCodeAt(a)); )
      a += 1, o = !0;
    f = t.charCodeAt(a);
  }
  if (f === 46) {
    for (u = !0, a += 1; Ss(t.charCodeAt(a)); )
      a += 1, s = !0;
    f = t.charCodeAt(a);
  }
  if (f === 101 || f === 69) {
    if (u && !o && !s) {
      r.err = "[path-util]: Invalid path value at index " + a + ', "' + t[a] + '" invalid float exponent';
      return;
    }
    if (a += 1, f = t.charCodeAt(a), (f === 43 || f === 45) && (a += 1), a < e && Ss(t.charCodeAt(a)))
      for (; a < e && Ss(t.charCodeAt(a)); )
        a += 1;
    else {
      r.err = "[path-util]: Invalid path value at index " + a + ', "' + t[a] + '" invalid integer exponent';
      return;
    }
  }
  r.index = a, r.param = +r.pathValue.slice(n, a);
}
function QK(r) {
  var e = [
    5760,
    6158,
    8192,
    8193,
    8194,
    8195,
    8196,
    8197,
    8198,
    8199,
    8200,
    8201,
    8202,
    8239,
    8287,
    12288,
    65279
  ];
  return r === 10 || r === 13 || r === 8232 || r === 8233 || // Line terminators
  // White spaces
  r === 32 || r === 9 || r === 11 || r === 12 || r === 160 || r >= 5760 && e.includes(r);
}
function nh(r) {
  for (var e = r.pathValue, t = r.max; r.index < t && QK(e.charCodeAt(r.index)); )
    r.index += 1;
}
function JK(r) {
  switch (r | 32) {
    case 109:
    case 122:
    case 108:
    case 104:
    case 118:
    case 99:
    case 115:
    case 113:
    case 116:
    case 97:
      return !0;
    default:
      return !1;
  }
}
function eq(r) {
  return (r | 32) === 97;
}
function tq(r) {
  var e = r.max, t = r.pathValue, n = r.index, a = t.charCodeAt(n), i = bf[t[n].toLowerCase()];
  if (r.segmentStart = n, !JK(a)) {
    r.err = '[path-util]: Invalid path value "' + t[n] + '" is not a path command';
    return;
  }
  if (r.index += 1, nh(r), r.data = [], !i) {
    zw(r);
    return;
  }
  for (; ; ) {
    for (var o = i; o > 0; o -= 1) {
      if (eq(a) && (o === 3 || o === 4) ? KK(r) : ZK(r), r.err.length)
        return;
      r.data.push(r.param), nh(r), r.index < e && t.charCodeAt(r.index) === 44 && (r.index += 1, nh(r));
    }
    if (r.index >= r.max || !qK(t.charCodeAt(r.index)))
      break;
  }
  zw(r);
}
var rq = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e) {
      this.pathValue = e, this.segments = [], this.max = e.length, this.index = 0, this.param = 0, this.segmentStart = 0, this.data = [], this.err = "";
    }
    return r;
  }()
);
function Nd(r) {
  if (XI(r))
    return [].concat(r);
  var e = new rq(r);
  for (nh(e); e.index < e.max && !e.err.length; )
    tq(e);
  return e.err ? e.err : e.segments;
}
function HI(r) {
  if (VI(r))
    return [].concat(r);
  var e = Nd(r), t = 0, n = 0, a = 0, i = 0;
  return e.map(function(o) {
    var s = o.slice(1).map(Number), u = o[0], f = u.toUpperCase();
    if (u === "M")
      return t = s[0], n = s[1], a = t, i = n, ["M", t, n];
    var l;
    if (u !== f)
      switch (f) {
        case "A":
          l = [
            f,
            s[0],
            s[1],
            s[2],
            s[3],
            s[4],
            s[5] + t,
            s[6] + n
          ];
          break;
        case "V":
          l = [f, s[0] + n];
          break;
        case "H":
          l = [f, s[0] + t];
          break;
        default: {
          var c = s.map(function(d, v) {
            return d + (v % 2 ? n : t);
          });
          l = [f].concat(c);
        }
      }
    else
      l = [f].concat(s);
    var h = l.length;
    switch (f) {
      case "Z":
        t = a, n = i;
        break;
      case "H":
        t = l[1];
        break;
      case "V":
        n = l[1];
        break;
      default:
        t = l[h - 2], n = l[h - 1], f === "M" && (a = t, i = n);
    }
    return l;
  });
}
function nq(r, e) {
  var t = r[0], n = e.x1, a = e.y1, i = e.x2, o = e.y2, s = r.slice(1).map(Number), u = r;
  if ("TQ".includes(t) || (e.qx = null, e.qy = null), t === "H")
    u = ["L", r[1], a];
  else if (t === "V")
    u = ["L", n, r[1]];
  else if (t === "S") {
    var f = n * 2 - i, l = a * 2 - o;
    e.x1 = f, e.y1 = l, u = ["C", f, l].concat(s);
  } else if (t === "T") {
    var c = n * 2 - e.qx, h = a * 2 - e.qy;
    e.qx = c, e.qy = h, u = ["Q", c, h].concat(s);
  } else if (t === "Q") {
    var d = s[0], v = s[1];
    e.qx = d, e.qy = v;
  }
  return u;
}
function Pd(r) {
  if (YI(r))
    return [].concat(r);
  for (var e = HI(r), t = B({}, WI), n = 0; n < e.length; n += 1) {
    e[n] = nq(e[n], t);
    var a = e[n], i = a.length;
    t.x1 = +a[i - 2], t.y1 = +a[i - 1], t.x2 = +a[i - 4] || t.x1, t.y2 = +a[i - 3] || t.y1;
  }
  return e;
}
function aq(r) {
  return YI(r) && r.every(function(e) {
    var t = e[0];
    return "MC".includes(t);
  });
}
function Ac(r, e, t) {
  var n = r * Math.cos(t) - e * Math.sin(t), a = r * Math.sin(t) + e * Math.cos(t);
  return { x: n, y: a };
}
function vm(r, e, t, n, a, i, o, s, u, f) {
  var l = r, c = e, h = t, d = n, v = s, p = u, g = Math.PI * 120 / 180, y = Math.PI / 180 * (+a || 0), m = [], b, E, x, w, _;
  if (f)
    E = f[0], x = f[1], w = f[2], _ = f[3];
  else {
    b = Ac(l, c, -y), l = b.x, c = b.y, b = Ac(v, p, -y), v = b.x, p = b.y;
    var M = (l - v) / 2, A = (c - p) / 2, S = M * M / (h * h) + A * A / (d * d);
    S > 1 && (S = Math.sqrt(S), h *= S, d *= S);
    var T = h * h, C = d * d, O = (i === o ? -1 : 1) * Math.sqrt(Math.abs((T * C - T * A * A - C * M * M) / (T * A * A + C * M * M)));
    w = O * h * A / d + (l + v) / 2, _ = O * -d * M / h + (c + p) / 2, E = Math.asin(((c - _) / d * Math.pow(10, 9) >> 0) / Math.pow(10, 9)), x = Math.asin(((p - _) / d * Math.pow(10, 9) >> 0) / Math.pow(10, 9)), E = l < w ? Math.PI - E : E, x = v < w ? Math.PI - x : x, E < 0 && (E = Math.PI * 2 + E), x < 0 && (x = Math.PI * 2 + x), o && E > x && (E -= Math.PI * 2), !o && x > E && (x -= Math.PI * 2);
  }
  var L = x - E;
  if (Math.abs(L) > g) {
    var R = x, P = v, z = p;
    x = E + g * (o && x > E ? 1 : -1), v = w + h * Math.cos(x), p = _ + d * Math.sin(x), m = vm(v, p, h, d, a, 0, o, P, z, [x, R, w, _]);
  }
  L = x - E;
  var V = Math.cos(E), N = Math.sin(E), F = Math.cos(x), q = Math.sin(x), te = Math.tan(L / 4), re = 4 / 3 * h * te, J = 4 / 3 * d * te, ye = [l, c], Be = [l + re * N, c - J * V], Pe = [v + re * q, p - J * F], et = [v, p];
  if (Be[0] = 2 * ye[0] - Be[0], Be[1] = 2 * ye[1] - Be[1], f)
    return Be.concat(Pe, et, m);
  m = Be.concat(Pe, et, m);
  for (var ut = [], at = 0, At = m.length; at < At; at += 1)
    ut[at] = at % 2 ? Ac(m[at - 1], m[at], y).y : Ac(m[at], m[at + 1], y).x;
  return ut;
}
function iq(r, e, t, n, a, i) {
  var o = 0.3333333333333333, s = 2 / 3;
  return [
    o * r + s * t,
    o * e + s * n,
    o * a + s * t,
    o * i + s * n,
    a,
    i
    // x,y
  ];
}
function Xi(r, e, t) {
  var n = r[0], a = r[1], i = e[0], o = e[1];
  return [n + (i - n) * t, a + (o - a) * t];
}
var Uw = function(r, e, t, n) {
  var a = 0.5, i = Xi([r, e], [t, n], a);
  return Yn(Yn([], i, !0), [t, n, t, n], !1);
};
function oq(r, e) {
  var t = r[0], n = r.slice(1).map(Number), a = n[0], i = n[1], o, s = e.x1, u = e.y1, f = e.x, l = e.y;
  switch ("TQ".includes(t) || (e.qx = null, e.qy = null), t) {
    case "M":
      return e.x = a, e.y = i, r;
    case "A":
      return o = [s, u].concat(n), ["C"].concat(vm(o[0], o[1], o[2], o[3], o[4], o[5], o[6], o[7], o[8], o[9]));
    case "Q":
      return e.qx = a, e.qy = i, o = [s, u].concat(n), ["C"].concat(iq(o[0], o[1], o[2], o[3], o[4], o[5]));
    case "L":
      return ["C"].concat(Uw(s, u, a, i));
    case "Z":
      return s === f && u === l ? ["C", s, u, f, l, f, l] : ["C"].concat(Uw(s, u, f, l));
  }
  return r;
}
function KI(r, e) {
  if (e === void 0 && (e = !1), aq(r)) {
    var t = [].concat(r);
    return e ? [t, []] : t;
  }
  for (var n = Pd(r), a = B({}, WI), i = [], o = "", s = n.length, u, f, l = [], c = 0; c < s; c += 1) {
    n[c] && (o = n[c][0]), i[c] = o;
    var h = oq(n[c], a);
    n[c] = h, HK(n, i, c), s = n.length, o === "Z" && l.push(c), u = n[c], f = u.length, a.x1 = +u[f - 2], a.y1 = +u[f - 1], a.x2 = +u[f - 4] || a.x1, a.y2 = +u[f - 3] || a.y1;
  }
  return e ? [n, l] : n;
}
function sq(r) {
  return Nd(r);
}
function uq(r) {
  return r.map(function(e) {
    return Array.isArray(e) ? [].concat(e) : e;
  });
}
function fq(r) {
  var e = r.slice(1).map(function(t, n, a) {
    return n ? a[n - 1].slice(-2).concat(t.slice(1)) : r[0].slice(1).concat(t.slice(1));
  }).map(function(t) {
    return t.map(function(n, a) {
      return t[t.length - a - 2 * (1 - a % 2)];
    });
  }).reverse();
  return [["M"].concat(e[0].slice(0, 2))].concat(e.map(function(t) {
    return ["C"].concat(t.slice(2));
  }));
}
function bu(r, e) {
  return Math.sqrt((r[0] - e[0]) * (r[0] - e[0]) + (r[1] - e[1]) * (r[1] - e[1]));
}
function _g(r, e, t, n, a) {
  var i = bu([r, e], [t, n]), o = { x: 0, y: 0 };
  if (typeof a == "number")
    if (a <= 0)
      o = { x: r, y: e };
    else if (a >= i)
      o = { x: t, y: n };
    else {
      var s = Xi([r, e], [t, n], a / i), u = s[0], f = s[1];
      o = { x: u, y: f };
    }
  return {
    length: i,
    point: o,
    min: {
      x: Math.min(r, t),
      y: Math.min(e, n)
    },
    max: {
      x: Math.max(r, t),
      y: Math.max(e, n)
    }
  };
}
function jw(r, e) {
  var t = r.x, n = r.y, a = e.x, i = e.y, o = t * a + n * i, s = Math.sqrt((Math.pow(t, 2) + Math.pow(n, 2)) * (Math.pow(a, 2) + Math.pow(i, 2))), u = t * i - n * a < 0 ? -1 : 1, f = u * Math.acos(o / s);
  return f;
}
function lq(r, e, t, n, a, i, o, s, u, f) {
  var l = Math.abs, c = Math.sin, h = Math.cos, d = Math.sqrt, v = Math.PI, p = l(t), g = l(n), y = (a % 360 + 360) % 360, m = y * (v / 180);
  if (r === s && e === u)
    return { x: r, y: e };
  if (p === 0 || g === 0)
    return _g(r, e, s, u, f).point;
  var b = (r - s) / 2, E = (e - u) / 2, x = {
    x: h(m) * b + c(m) * E,
    y: -c(m) * b + h(m) * E
  }, w = Math.pow(x.x, 2) / Math.pow(p, 2) + Math.pow(x.y, 2) / Math.pow(g, 2);
  w > 1 && (p *= d(w), g *= d(w));
  var _ = Math.pow(p, 2) * Math.pow(g, 2) - Math.pow(p, 2) * Math.pow(x.y, 2) - Math.pow(g, 2) * Math.pow(x.x, 2), M = Math.pow(p, 2) * Math.pow(x.y, 2) + Math.pow(g, 2) * Math.pow(x.x, 2), A = _ / M;
  A = A < 0 ? 0 : A;
  var S = (i !== o ? 1 : -1) * d(A), T = {
    x: S * (p * x.y / g),
    y: S * (-(g * x.x) / p)
  }, C = {
    x: h(m) * T.x - c(m) * T.y + (r + s) / 2,
    y: c(m) * T.x + h(m) * T.y + (e + u) / 2
  }, O = {
    x: (x.x - T.x) / p,
    y: (x.y - T.y) / g
  }, L = jw({ x: 1, y: 0 }, O), R = {
    x: (-x.x - T.x) / p,
    y: (-x.y - T.y) / g
  }, P = jw(O, R);
  !o && P > 0 ? P -= 2 * v : o && P < 0 && (P += 2 * v), P %= 2 * v;
  var z = L + P * f, V = p * h(z), N = g * c(z), F = {
    x: h(m) * V - c(m) * N + C.x,
    y: c(m) * V + h(m) * N + C.y
  };
  return F;
}
function cq(r, e, t, n, a, i, o, s, u, f, l) {
  var c, h = l.bbox, d = h === void 0 ? !0 : h, v = l.length, p = v === void 0 ? !0 : v, g = l.sampleSize, y = g === void 0 ? 30 : g, m = typeof f == "number", b = r, E = e, x = 0, w = [b, E, x], _ = [b, E], M = 0, A = { x: 0, y: 0 }, S = [{ x: b, y: E }];
  m && f <= 0 && (A = { x: b, y: E });
  for (var T = 0; T <= y; T += 1) {
    if (M = T / y, c = lq(r, e, t, n, a, i, o, s, u, M), b = c.x, E = c.y, d && S.push({ x: b, y: E }), p && (x += bu(_, [b, E])), _ = [b, E], m && x >= f && f > w[2]) {
      var C = (x - f) / (x - w[2]);
      A = {
        x: _[0] * (1 - C) + w[0] * C,
        y: _[1] * (1 - C) + w[1] * C
      };
    }
    w = [b, E, x];
  }
  return m && f >= x && (A = { x: s, y: u }), {
    length: x,
    point: A,
    min: {
      x: Math.min.apply(null, S.map(function(O) {
        return O.x;
      })),
      y: Math.min.apply(null, S.map(function(O) {
        return O.y;
      }))
    },
    max: {
      x: Math.max.apply(null, S.map(function(O) {
        return O.x;
      })),
      y: Math.max.apply(null, S.map(function(O) {
        return O.y;
      }))
    }
  };
}
function hq(r, e, t, n, a, i, o, s, u) {
  var f = 1 - u;
  return {
    x: Math.pow(f, 3) * r + 3 * Math.pow(f, 2) * u * t + 3 * f * Math.pow(u, 2) * a + Math.pow(u, 3) * o,
    y: Math.pow(f, 3) * e + 3 * Math.pow(f, 2) * u * n + 3 * f * Math.pow(u, 2) * i + Math.pow(u, 3) * s
  };
}
function qI(r, e, t, n, a, i, o, s, u, f) {
  var l, c = f.bbox, h = c === void 0 ? !0 : c, d = f.length, v = d === void 0 ? !0 : d, p = f.sampleSize, g = p === void 0 ? 10 : p, y = typeof u == "number", m = r, b = e, E = 0, x = [m, b, E], w = [m, b], _ = 0, M = { x: 0, y: 0 }, A = [{ x: m, y: b }];
  y && u <= 0 && (M = { x: m, y: b });
  for (var S = 0; S <= g; S += 1) {
    if (_ = S / g, l = hq(r, e, t, n, a, i, o, s, _), m = l.x, b = l.y, h && A.push({ x: m, y: b }), v && (E += bu(w, [m, b])), w = [m, b], y && E >= u && u > x[2]) {
      var T = (E - u) / (E - x[2]);
      M = {
        x: w[0] * (1 - T) + x[0] * T,
        y: w[1] * (1 - T) + x[1] * T
      };
    }
    x = [m, b, E];
  }
  return y && u >= E && (M = { x: o, y: s }), {
    length: E,
    point: M,
    min: {
      x: Math.min.apply(null, A.map(function(C) {
        return C.x;
      })),
      y: Math.min.apply(null, A.map(function(C) {
        return C.y;
      }))
    },
    max: {
      x: Math.max.apply(null, A.map(function(C) {
        return C.x;
      })),
      y: Math.max.apply(null, A.map(function(C) {
        return C.y;
      }))
    }
  };
}
function dq(r, e, t, n, a, i, o) {
  var s = 1 - o;
  return {
    x: Math.pow(s, 2) * r + 2 * s * o * t + Math.pow(o, 2) * a,
    y: Math.pow(s, 2) * e + 2 * s * o * n + Math.pow(o, 2) * i
  };
}
function vq(r, e, t, n, a, i, o, s) {
  var u, f = s.bbox, l = f === void 0 ? !0 : f, c = s.length, h = c === void 0 ? !0 : c, d = s.sampleSize, v = d === void 0 ? 10 : d, p = typeof o == "number", g = r, y = e, m = 0, b = [g, y, m], E = [g, y], x = 0, w = { x: 0, y: 0 }, _ = [{ x: g, y }];
  p && o <= 0 && (w = { x: g, y });
  for (var M = 0; M <= v; M += 1) {
    if (x = M / v, u = dq(r, e, t, n, a, i, x), g = u.x, y = u.y, l && _.push({ x: g, y }), h && (m += bu(E, [g, y])), E = [g, y], p && m >= o && o > b[2]) {
      var A = (m - o) / (m - b[2]);
      w = {
        x: E[0] * (1 - A) + b[0] * A,
        y: E[1] * (1 - A) + b[1] * A
      };
    }
    b = [g, y, m];
  }
  return p && o >= m && (w = { x: a, y: i }), {
    length: m,
    point: w,
    min: {
      x: Math.min.apply(null, _.map(function(S) {
        return S.x;
      })),
      y: Math.min.apply(null, _.map(function(S) {
        return S.y;
      }))
    },
    max: {
      x: Math.max.apply(null, _.map(function(S) {
        return S.x;
      })),
      y: Math.max.apply(null, _.map(function(S) {
        return S.y;
      }))
    }
  };
}
function kd(r, e, t) {
  for (var n, a, i, o, s, u, f = Pd(r), l = typeof e == "number", c, h = [], d, v = 0, p = 0, g = 0, y = 0, m, b = [], E = [], x = 0, w = { x: 0, y: 0 }, _ = w, M = w, A = w, S = 0, T = 0, C = f.length; T < C; T += 1)
    m = f[T], d = m[0], c = d === "M", h = c ? h : [v, p].concat(m.slice(1)), c ? (g = m[1], y = m[2], w = { x: g, y }, _ = w, x = 0, l && e < 1e-3 && (A = w)) : d === "L" ? (n = _g(h[0], h[1], h[2], h[3], (e || 0) - S), x = n.length, w = n.min, _ = n.max, M = n.point) : d === "A" ? (a = cq(h[0], h[1], h[2], h[3], h[4], h[5], h[6], h[7], h[8], (e || 0) - S, t || {}), x = a.length, w = a.min, _ = a.max, M = a.point) : d === "C" ? (i = qI(h[0], h[1], h[2], h[3], h[4], h[5], h[6], h[7], (e || 0) - S, t || {}), x = i.length, w = i.min, _ = i.max, M = i.point) : d === "Q" ? (o = vq(h[0], h[1], h[2], h[3], h[4], h[5], (e || 0) - S, t || {}), x = o.length, w = o.min, _ = o.max, M = o.point) : d === "Z" && (h = [v, p, g, y], s = _g(h[0], h[1], h[2], h[3], (e || 0) - S), x = s.length, w = s.min, _ = s.max, M = s.point), l && S < e && S + x >= e && (A = M), E.push(_), b.push(w), S += x, u = d !== "Z" ? m.slice(-2) : [g, y], v = u[0], p = u[1];
  return l && e >= S && (A = { x: v, y: p }), {
    length: S,
    point: A,
    min: {
      x: Math.min.apply(null, b.map(function(O) {
        return O.x;
      })),
      y: Math.min.apply(null, b.map(function(O) {
        return O.y;
      }))
    },
    max: {
      x: Math.max.apply(null, E.map(function(O) {
        return O.x;
      })),
      y: Math.max.apply(null, E.map(function(O) {
        return O.y;
      }))
    }
  };
}
function pq(r, e) {
  if (!r)
    return {
      x: 0,
      y: 0,
      width: 0,
      height: 0,
      x2: 0,
      y2: 0,
      cx: 0,
      cy: 0,
      cz: 0
    };
  var t = kd(r, void 0, B(B({}, e), { length: !1 })), n = t.min, a = n.x, i = n.y, o = t.max, s = o.x, u = o.y, f = s - a, l = u - i;
  return {
    width: f,
    height: l,
    x: a,
    y: i,
    x2: s,
    y2: u,
    cx: a + f / 2,
    cy: i + l / 2,
    // an estimted guess
    cz: Math.max(f, l) + Math.min(f, l) / 2
  };
}
function Ef(r, e) {
  return kd(r, void 0, B(B({}, e), { bbox: !1, length: !0 })).length;
}
function gq(r, e) {
  if (!r)
    return {
      length: 0,
      x: 0,
      y: 0,
      width: 0,
      height: 0,
      x2: 0,
      y2: 0,
      cx: 0,
      cy: 0,
      cz: 0
    };
  var t = kd(r, void 0, B(B({}, e), { bbox: !0, length: !0 })), n = t.length, a = t.min, i = a.x, o = a.y, s = t.max, u = s.x, f = s.y, l = u - i, c = f - o;
  return {
    length: n,
    width: l,
    height: c,
    x: i,
    y: o,
    x2: u,
    y2: f,
    cx: i + l / 2,
    cy: o + c / 2,
    // an estimted guess
    cz: Math.max(l, c) + Math.min(l, c) / 2
  };
}
function yq(r) {
  var e = r.length, t = e - 1;
  return r.map(function(n, a) {
    return r.map(function(i, o) {
      var s = a + o, u;
      return o === 0 || r[s] && r[s][0] === "M" ? (u = r[s], ["M"].concat(u.slice(-2))) : (s >= e && (s -= t), r[s]);
    });
  });
}
function mq(r, e) {
  var t = r.length - 1, n = [], a = 0, i = 0, o = yq(r);
  return o.forEach(function(s, u) {
    r.slice(1).forEach(function(f, l) {
      i += bu(r[(u + l) % t].slice(-2), e[l % t].slice(-2));
    }), n[u] = i, i = 0;
  }), a = n.indexOf(Math.min.apply(null, n)), o[a];
}
function bq(r, e, t, n, a, i, o, s) {
  return 3 * ((s - e) * (t + a) - (o - r) * (n + i) + n * (r - a) - t * (e - i) + s * (a + r / 3) - o * (i + e / 3)) / 20;
}
function ZI(r) {
  var e = 0, t = 0, n = 0;
  return KI(r).map(function(a) {
    var i;
    switch (a[0]) {
      case "M":
        return e = a[1], t = a[2], 0;
      default:
        var o = a.slice(1), s = o[0], u = o[1], f = o[2], l = o[3], c = o[4], h = o[5];
        return n = bq(e, t, s, u, f, l, c, h), i = a.slice(-2), e = i[0], t = i[1], n;
    }
  }).reduce(function(a, i) {
    return a + i;
  }, 0);
}
function Eq(r) {
  return ZI(r) >= 0;
}
function ah(r, e, t) {
  return kd(r, e, B(B({}, t), { bbox: !1, length: !0 })).point;
}
function xq(r, e) {
  var t = Nd(r);
  if (typeof t == "string")
    throw TypeError(t);
  var n = t.slice(), a = Ef(n), i = n.length - 1, o = 0, s = 0, u = t[0], f = u.slice(-2), l = f[0], c = f[1], h = { x: l, y: c };
  if (i <= 0 || !e || !Number.isFinite(e))
    return {
      segment: u,
      index: 0,
      length: s,
      point: h,
      lengthAtSegment: o
    };
  if (e >= a)
    return n = t.slice(0, -1), o = Ef(n), s = a - o, {
      segment: t[i],
      index: i,
      length: s,
      lengthAtSegment: o
    };
  for (var d = []; i > 0; )
    u = n[i], n = n.slice(0, -1), o = Ef(n), s = a - o, a = o, d.push({
      segment: u,
      index: i,
      length: s,
      lengthAtSegment: o
    }), i -= 1;
  return d.find(function(v) {
    var p = v.lengthAtSegment;
    return p <= e;
  });
}
function wq(r, e) {
  for (var t = Nd(r), n = Pd(t), a = Ef(t), i = function(x) {
    var w = x.x - e.x, _ = x.y - e.y;
    return w * w + _ * _;
  }, o = 8, s, u = 0, f, l = 0, c = 1 / 0, h = 0; h <= a; h += o)
    s = ah(n, h), u = i(s), u < c && (f = s, l = h, c = u);
  o /= 2;
  for (var d, v, p = 0, g = 0, y = 0, m = 0; o > 0.5; )
    p = l - o, d = ah(n, p), y = i(d), g = l + o, v = ah(n, g), m = i(v), p >= 0 && y < c ? (f = d, l = p, c = y) : g <= a && m < c ? (f = v, l = g, c = m) : o /= 2;
  var b = xq(t, l), E = Math.sqrt(c);
  return { closest: f, distance: E, segment: b };
}
function _q(r, e) {
  var t = wq(r, e).distance;
  return Math.abs(t) < 1e-3;
}
function Mq(r, e) {
  e === void 0 && (e = 0.5);
  var t = r.slice(0, 2), n = r.slice(2, 4), a = r.slice(4, 6), i = r.slice(6, 8), o = Xi(t, n, e), s = Xi(n, a, e), u = Xi(a, i, e), f = Xi(o, s, e), l = Xi(s, u, e), c = Xi(f, l, e);
  return [
    // @ts-ignore
    ["C"].concat(o, f, c),
    // @ts-ignore
    ["C"].concat(l, u, i)
  ];
}
function $w(r) {
  return r.map(function(e, t, n) {
    var a = t && n[t - 1].slice(-2).concat(e.slice(1)), i = t ? qI(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], { bbox: !1 }).length : 0, o;
    return t ? o = i ? Mq(a) : [e, e] : o = [e], {
      s: e,
      ss: o,
      l: i
    };
  });
}
function QI(r, e, t) {
  var n = $w(r), a = $w(e), i = n.length, o = a.length, s = n.filter(function(g) {
    return g.l;
  }).length, u = a.filter(function(g) {
    return g.l;
  }).length, f = n.filter(function(g) {
    return g.l;
  }).reduce(function(g, y) {
    var m = y.l;
    return g + m;
  }, 0) / s || 0, l = a.filter(function(g) {
    return g.l;
  }).reduce(function(g, y) {
    var m = y.l;
    return g + m;
  }, 0) / u || 0, c = t || Math.max(i, o), h = [f, l], d = [c - i, c - o], v = 0, p = [n, a].map(function(g, y) {
    return g.l === c ? g.map(function(m) {
      return m.s;
    }) : g.map(function(m, b) {
      return v = b && d[y] && m.l >= h[y], d[y] -= v ? 1 : 0, v ? m.ss : [m.s];
    }).flat();
  });
  return p[0].length === p[1].length ? p : QI(p[0], p[1], c);
}
var Sq = 1e-6;
function Xp(r) {
  return Math.abs(r) < Sq ? 0 : r < 0 ? -1 : 1;
}
function Aq(r, e, t) {
  return (t[0] - r[0]) * (e[1] - r[1]) === (e[0] - r[0]) * (t[1] - r[1]) && Math.min(r[0], e[0]) <= t[0] && t[0] <= Math.max(r[0], e[0]) && Math.min(r[1], e[1]) <= t[1] && t[1] <= Math.max(r[1], e[1]);
}
function Mg(r, e, t) {
  var n = !1, a = r.length;
  if (a <= 2)
    return !1;
  for (var i = 0; i < a; i++) {
    var o = r[i], s = r[(i + 1) % a];
    if (Aq(o, s, [e, t]))
      return !0;
    Xp(o[1] - t) > 0 != Xp(s[1] - t) > 0 && Xp(e - (t - o[1]) * (o[0] - s[0]) / (o[1] - s[1]) - o[0]) < 0 && (n = !n);
  }
  return n;
}
var Ww = function(r, e, t) {
  return r >= e && r <= t;
};
function Cq(r, e, t, n) {
  var a = 1e-3, i = {
    x: t.x - r.x,
    y: t.y - r.y
  }, o = {
    x: e.x - r.x,
    y: e.y - r.y
  }, s = {
    x: n.x - t.x,
    y: n.y - t.y
  }, u = o.x * s.y - o.y * s.x, f = u * u, l = o.x * o.x + o.y * o.y, c = s.x * s.x + s.y * s.y, h = null;
  if (f > a * l * c) {
    var d = (i.x * s.y - i.y * s.x) / u, v = (i.x * o.y - i.y * o.x) / u;
    Ww(d, 0, 1) && Ww(v, 0, 1) && (h = {
      x: r.x + d * o.x,
      y: r.y + d * o.y
    });
  }
  return h;
}
function Xw(r) {
  for (var e = [], t = r.length, n = 0; n < t - 1; n++) {
    var a = r[n], i = r[n + 1];
    e.push({
      from: {
        x: a[0],
        y: a[1]
      },
      to: {
        x: i[0],
        y: i[1]
      }
    });
  }
  if (e.length > 1) {
    var o = r[0], s = r[t - 1];
    e.push({
      from: {
        x: s[0],
        y: s[1]
      },
      to: {
        x: o[0],
        y: o[1]
      }
    });
  }
  return e;
}
function Tq(r, e) {
  var t = !1;
  return r.forEach(function(n) {
    if (Cq(n.from, n.to, e.from, e.to))
      return t = !0, !1;
  }), t;
}
function Vw(r) {
  var e = r.map(function(n) {
    return n[0];
  }), t = r.map(function(n) {
    return n[1];
  });
  return {
    minX: Math.min.apply(null, e),
    maxX: Math.max.apply(null, e),
    minY: Math.min.apply(null, t),
    maxY: Math.max.apply(null, t)
  };
}
function Iq(r, e) {
  return !(e.minX > r.maxX || e.maxX < r.minX || e.minY > r.maxY || e.maxY < r.minY);
}
function Oq(r, e) {
  if (r.length < 2 || e.length < 2)
    return !1;
  var t = Vw(r), n = Vw(e);
  if (!Iq(t, n))
    return !1;
  var a = !1;
  if (e.forEach(function(u) {
    if (Mg(r, u[0], u[1]))
      return a = !0, !1;
  }), a || (r.forEach(function(u) {
    if (Mg(e, u[0], u[1]))
      return a = !0, !1;
  }), a))
    return !0;
  var i = Xw(r), o = Xw(e), s = !1;
  return o.forEach(function(u) {
    if (Tq(i, u))
      return s = !0, !1;
  }), s;
}
function Dq(r) {
  var e = document.createElement("div");
  e.innerHTML = r;
  var t = e.childNodes[0];
  return t && e.contains(t) && e.removeChild(t), t;
}
function Lq(r, e) {
  if (r)
    return Object.keys(e).forEach(function(t) {
      r.style[t] = e[t];
    }), r;
}
const Nq = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Cache: TK,
  angleTo: WK,
  arcToCubic: vm,
  assign: Vs,
  augment: ZH,
  clamp: $Y,
  clearAnimationFrame: KH,
  clone: QH,
  clonePath: uq,
  contains: Gh,
  createDOM: Dq,
  debounce: JH,
  deepMix: aK,
  difference: tY,
  direction: $I,
  distanceSquareRoot: bu,
  each: ou,
  endsWith: DY,
  equalizeSegments: QI,
  every: NY,
  extend: oK,
  filter: MI,
  find: oY,
  findIndex: sY,
  firstValue: fY,
  fixedBase: XY,
  flatten: cY,
  flattenDeep: hY,
  forIn: ou,
  get: gK,
  getDrawDirection: Eq,
  getPathArea: ZI,
  getPathBBox: pq,
  getPathBBoxTotalLength: gq,
  getPointAtLength: ah,
  getRange: vY,
  getRotatedCurve: mq,
  getTotalLength: Ef,
  getType: BI,
  getWrapBehavior: FY,
  gradient: NK,
  group: BY,
  groupBy: PI,
  groupToMap: kI,
  has: Gw,
  hasKey: Gw,
  hasValue: yH,
  head: TY,
  identity: SK,
  includes: Gh,
  indexOf: uK,
  isArguments: OH,
  isArray: $r,
  isArrayLike: Ln,
  isBoolean: LH,
  isDate: PH,
  isDecimal: YY,
  isElement: YH,
  isEmpty: lK,
  isEqual: UI,
  isEqualWith: cK,
  isError: RH,
  isEven: KY,
  isFinite: BH,
  isFunction: qn,
  isInteger: ZY,
  isMatch: AI,
  isNegative: JY,
  isNil: uo,
  isNull: GH,
  isNumber: Ti,
  isNumberEqual: tH,
  isObject: Ld,
  isObjectLike: zh,
  isOdd: nH,
  isPlainObject: su,
  isPointInPolygon: Mg,
  isPointInStroke: _q,
  isPolygonsIntersect: Oq,
  isPositive: iH,
  isPrototype: FI,
  isRegExp: $H,
  isString: no,
  isType: ni,
  isUndefined: XH,
  keys: SI,
  last: IY,
  lowerCase: bH,
  lowerFirst: xH,
  map: dK,
  mapValues: pK,
  max: TI,
  maxBy: oH,
  memoize: GI,
  min: II,
  minBy: sH,
  mix: Vs,
  mod: fH,
  modifyCSS: Lq,
  noop: MK,
  normalizePath: Pd,
  number2color: zY,
  omit: EK,
  parseRadius: UY,
  path2Absolute: HI,
  path2Array: sq,
  path2Curve: KI,
  path2String: YK,
  pick: bK,
  pull: mY,
  pullAt: DI,
  reduce: LI,
  remove: _Y,
  requestAnimationFrame: HH,
  reverseCurve: fq,
  rgb2arr: wI,
  set: yK,
  size: AK,
  some: kY,
  sortBy: MY,
  startsWith: OY,
  substitute: wH,
  throttle: xK,
  toArray: wK,
  toCSSGradient: FK,
  toDegree: hH,
  toInteger: dH,
  toRGB: jI,
  toRadian: gH,
  toString: il,
  transform: $K,
  union: AY,
  uniq: NI,
  uniqueId: _K,
  upperCase: MH,
  upperFirst: AH,
  values: RI,
  valuesOfKey: CY,
  vertical: XK,
  wrapBehavior: GY
}, Symbol.toStringTag, { value: "Module" })), JI = /* @__PURE__ */ ri(Nq);
Object.defineProperty(dm, "__esModule", { value: !0 });
var Pq = JI, kq = function(r) {
  for (var e = {}, t = r.nodes().filter(function(c) {
    var h;
    return !(!((h = r.children(c)) === null || h === void 0) && h.length);
  }), n = t.map(function(c) {
    return r.node(c).rank;
  }), a = (0, Pq.max)(n), i = [], o = 0; o < a + 1; o++)
    i.push([]);
  var s = function(c) {
    var h;
    if (!e.hasOwnProperty(c)) {
      e[c] = !0;
      var d = r.node(c);
      isNaN(d.rank) || i[d.rank].push(c), (h = r.successors(c)) === null || h === void 0 || h.forEach(function(v) {
        return s(v);
      });
    }
  }, u = t.sort(function(c, h) {
    return r.node(c).rank - r.node(h).rank;
  }), f = u.filter(function(c) {
    return r.node(c).fixorder !== void 0;
  }), l = f.sort(function(c, h) {
    return r.node(c).fixorder - r.node(h).fixorder;
  });
  return l == null || l.forEach(function(c) {
    isNaN(r.node(c).rank) || i[r.node(c).rank].push(c), e[c] = !0;
  }), u == null || u.forEach(s), i;
};
dm.default = kq;
var pm = {};
Object.defineProperty(pm, "__esModule", { value: !0 });
var Rq = Kn, Bq = function(r, e, t) {
  for (var n = (0, Rq.zipObject)(t, t.map(function(l, c) {
    return c;
  })), a = e.map(function(l) {
    var c, h = (c = r.outEdges(l)) === null || c === void 0 ? void 0 : c.map(function(d) {
      return { pos: n[d.w] || 0, weight: r.edge(d).weight };
    });
    return h == null ? void 0 : h.sort(function(d, v) {
      return d.pos - v.pos;
    });
  }), i = a.flat().filter(function(l) {
    return l !== void 0;
  }), o = 1; o < t.length; )
    o <<= 1;
  var s = 2 * o - 1;
  o -= 1;
  var u = Array(s).fill(0, 0, s), f = 0;
  return i == null || i.forEach(function(l) {
    if (l) {
      var c = l.pos + o;
      u[c] += l.weight;
      for (var h = 0; c > 0; )
        c % 2 && (h += u[c + 1]), c = c - 1 >> 1, u[c] += l.weight;
      f += l.weight * h;
    }
  }), f;
}, Fq = function(r, e) {
  for (var t = 0, n = 1; n < (e == null ? void 0 : e.length); n += 1)
    t += Bq(r, e[n - 1], e[n]);
  return t;
};
pm.default = Fq;
var gm = {};
Object.defineProperty(gm, "__esModule", { value: !0 });
var Gq = Ci, zq = function(r, e, t) {
  var n = Uq(r), a = new Gq.Graph({ compound: !0 }).setGraph({ root: n }).setDefaultNodeLabel(function(i) {
    return r.node(i);
  });
  return r.nodes().forEach(function(i) {
    var o, s = r.node(i), u = r.parent(i);
    (s.rank === e || s.minRank <= e && e <= s.maxRank) && (a.setNode(i), a.setParent(i, u || n), (o = r[t](i)) === null || o === void 0 || o.forEach(function(f) {
      var l = f.v === i ? f.w : f.v, c = a.edgeFromArgs(l, i), h = c !== void 0 ? c.weight : 0;
      a.setEdge(l, i, { weight: r.edge(f).weight + h });
    }), s.hasOwnProperty("minRank") && a.setNode(i, {
      borderLeft: s.borderLeft[e],
      borderRight: s.borderRight[e]
    }));
  }), a;
}, Uq = function(r) {
  for (var e; r.hasNode(e = "_root".concat(Math.random())); )
    ;
  return e;
};
gm.default = zq;
var ym = {};
Object.defineProperty(ym, "__esModule", { value: !0 });
var jq = function(r, e, t) {
  var n = {}, a;
  t == null || t.forEach(function(i) {
    for (var o = r.parent(i), s, u; o; ) {
      if (s = r.parent(o), s ? (u = n[s], n[s] = o) : (u = a, a = o), u && u !== o) {
        e.setEdge(u, o);
        return;
      }
      o = s;
    }
  });
};
ym.default = jq;
var mm = {}, bm = {};
Object.defineProperty(bm, "__esModule", { value: !0 });
var $q = function(r, e) {
  return e.map(function(t) {
    var n = r.inEdges(t);
    if (!(n != null && n.length))
      return { v: t };
    {
      var a = { sum: 0, weight: 0 };
      return n == null || n.forEach(function(i) {
        var o = r.edge(i), s = r.node(i.v);
        a.sum += o.weight * s.order, a.weight += o.weight;
      }), {
        v: t,
        barycenter: a.sum / a.weight,
        weight: a.weight
      };
    }
  });
};
bm.default = $q;
var Em = {};
Object.defineProperty(Em, "__esModule", { value: !0 });
var Wq = function(r, e) {
  var t, n, a, i = {};
  r == null || r.forEach(function(s, u) {
    i[s.v] = {
      i: u,
      indegree: 0,
      in: [],
      out: [],
      vs: [s.v]
    };
    var f = i[s.v];
    s.barycenter !== void 0 && (f.barycenter = s.barycenter, f.weight = s.weight);
  }), (t = e.edges()) === null || t === void 0 || t.forEach(function(s) {
    var u = i[s.v], f = i[s.w];
    u !== void 0 && f !== void 0 && (f.indegree++, u.out.push(i[s.w]));
  });
  var o = (a = (n = Object.values(i)).filter) === null || a === void 0 ? void 0 : a.call(n, function(s) {
    return !s.indegree;
  });
  return Xq(o);
}, Xq = function(r) {
  for (var e, t, n = [], a = function(f) {
    return function(l) {
      l.merged || (l.barycenter === void 0 || f.barycenter === void 0 || l.barycenter >= f.barycenter) && Vq(f, l);
    };
  }, i = function(f) {
    return function(l) {
      l.in.push(f), --l.indegree === 0 && r.push(l);
    };
  }, o = function() {
    var f = r.pop();
    n.push(f), (e = f.in.reverse()) === null || e === void 0 || e.forEach(function(l) {
      return a(f)(l);
    }), (t = f.out) === null || t === void 0 || t.forEach(function(l) {
      return i(f)(l);
    });
  }; r != null && r.length; )
    o();
  var s = n.filter(function(f) {
    return !f.merged;
  }), u = [
    "vs",
    "i",
    "barycenter",
    "weight"
  ];
  return s.map(function(f) {
    var l = {};
    return u == null || u.forEach(function(c) {
      f[c] !== void 0 && (l[c] = f[c]);
    }), l;
  });
}, Vq = function(r, e) {
  var t, n = 0, a = 0;
  r.weight && (n += r.barycenter * r.weight, a += r.weight), e.weight && (n += e.barycenter * e.weight, a += e.weight), r.vs = (t = e.vs) === null || t === void 0 ? void 0 : t.concat(r.vs), r.barycenter = n / a, r.weight = a, r.i = Math.min(e.i, r.i), e.merged = !0;
};
Em.default = Wq;
var xm = {};
Object.defineProperty(xm, "__esModule", { value: !0 });
var Yq = Kn, Hq = function(r, e, t, n) {
  var a = (0, Yq.partition)(r, function(h) {
    var d = h.hasOwnProperty("fixorder") && !isNaN(h.fixorder);
    return n ? !d && h.hasOwnProperty("barycenter") : d || h.hasOwnProperty("barycenter");
  }), i = a.lhs, o = a.rhs.sort(function(h, d) {
    return -h.i - -d.i;
  }), s = [], u = 0, f = 0, l = 0;
  i == null || i.sort(Kq(!!e, !!t)), l = Yw(s, o, l), i == null || i.forEach(function(h) {
    var d;
    l += (d = h.vs) === null || d === void 0 ? void 0 : d.length, s.push(h.vs), u += h.barycenter * h.weight, f += h.weight, l = Yw(s, o, l);
  });
  var c = { vs: s.flat() };
  return f && (c.barycenter = u / f, c.weight = f), c;
}, Yw = function(r, e, t) {
  for (var n = t, a; e.length && (a = e[e.length - 1]).i <= n; )
    e.pop(), r == null || r.push(a.vs), n++;
  return n;
}, Kq = function(r, e) {
  return function(t, n) {
    if (t.fixorder !== void 0 && n.fixorder !== void 0)
      return t.fixorder - n.fixorder;
    if (t.barycenter < n.barycenter)
      return -1;
    if (t.barycenter > n.barycenter)
      return 1;
    if (e && t.order !== void 0 && n.order !== void 0) {
      if (t.order < n.order)
        return -1;
      if (t.order > n.order)
        return 1;
    }
    return r ? n.i - t.i : t.i - n.i;
  };
};
xm.default = Hq;
var wm = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(mm, "__esModule", { value: !0 });
var qq = wm(bm), Zq = wm(Em), Qq = wm(xm), eO = function(r, e, t, n, a, i) {
  var o, s, u, f, l = r.children(e), c = r.node(e), h = c ? c.borderLeft : void 0, d = c ? c.borderRight : void 0, v = {};
  h && (l = l == null ? void 0 : l.filter(function(E) {
    return E !== h && E !== d;
  }));
  var p = (0, qq.default)(r, l || []);
  p == null || p.forEach(function(E) {
    var x;
    if (!((x = r.children(E.v)) === null || x === void 0) && x.length) {
      var w = eO(r, E.v, t, n, i);
      v[E.v] = w, w.hasOwnProperty("barycenter") && eZ(E, w);
    }
  });
  var g = (0, Zq.default)(p, t);
  Jq(g, v), (o = g.filter(function(E) {
    return E.vs.length > 0;
  })) === null || o === void 0 || o.forEach(function(E) {
    var x = r.node(E.vs[0]);
    x && (E.fixorder = x.fixorder, E.order = x.order);
  });
  var y = (0, Qq.default)(g, n, a, i);
  if (h && (y.vs = [h, y.vs, d].flat(), !((s = r.predecessors(h)) === null || s === void 0) && s.length)) {
    var m = r.node(((u = r.predecessors(h)) === null || u === void 0 ? void 0 : u[0]) || ""), b = r.node(((f = r.predecessors(d)) === null || f === void 0 ? void 0 : f[0]) || "");
    y.hasOwnProperty("barycenter") || (y.barycenter = 0, y.weight = 0), y.barycenter = (y.barycenter * y.weight + m.order + b.order) / (y.weight + 2), y.weight += 2;
  }
  return y;
}, Jq = function(r, e) {
  r == null || r.forEach(function(t) {
    var n, a = (n = t.vs) === null || n === void 0 ? void 0 : n.map(function(i) {
      return e[i] ? e[i].vs : i;
    });
    t.vs = a.flat();
  });
}, eZ = function(r, e) {
  r.barycenter !== void 0 ? (r.barycenter = (r.barycenter * r.weight + e.barycenter * e.weight) / (r.weight + e.weight), r.weight += e.weight) : (r.barycenter = e.barycenter, r.weight = e.weight);
};
mm.default = eO;
var ol = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(hm, "__esModule", { value: !0 });
var Hw = ol(dm), Kw = ol(pm), tZ = ol(gm), rZ = ol(ym), nZ = ol(mm), qw = Dr(), aZ = Ci, Vp = Kn, iZ = function(r, e) {
  for (var t = (0, Vp.maxRank)(r), n = [], a = [], i = 1; i < t + 1; i++)
    n.push(i);
  for (var i = t - 1; i > -1; i--)
    a.push(i);
  var o = Zw(r, n, "inEdges"), s = Zw(r, a, "outEdges"), u = (0, Hw.default)(r);
  Yp(r, u);
  for (var f = Number.POSITIVE_INFINITY, l, i = 0, c = 0; c < 4; ++i, ++c) {
    Qw(i % 2 ? o : s, i % 4 >= 2, !1, e), u = (0, Vp.buildLayerMatrix)(r);
    var h = (0, Kw.default)(r, u);
    h < f && (c = 0, l = (0, qw.clone)(u), f = h);
  }
  u = (0, Hw.default)(r), Yp(r, u);
  for (var i = 0, c = 0; c < 4; ++i, ++c) {
    Qw(i % 2 ? o : s, i % 4 >= 2, !0, e), u = (0, Vp.buildLayerMatrix)(r);
    var h = (0, Kw.default)(r, u);
    h < f && (c = 0, l = (0, qw.clone)(u), f = h);
  }
  Yp(r, l);
}, Zw = function(r, e, t) {
  return e.map(function(n) {
    return (0, tZ.default)(r, n, t);
  });
}, Qw = function(r, e, t, n) {
  var a = new aZ.Graph();
  r == null || r.forEach(function(i) {
    for (var o, s = i.graph().root, u = (0, nZ.default)(i, s, a, e, t, n), f = 0; f < ((o = u.vs) === null || o === void 0 ? void 0 : o.length); f++) {
      var l = i.node(u.vs[f]);
      l && (l.order = f);
    }
    (0, rZ.default)(i, a, u.vs);
  });
}, Yp = function(r, e) {
  e == null || e.forEach(function(t) {
    t == null || t.forEach(function(n, a) {
      r.node(n).order = a;
    });
  });
};
hm.default = iZ;
var _m = {}, tO = {};
(function(r) {
  var e = be && be.__extends || /* @__PURE__ */ function() {
    var E = function(x, w) {
      return E = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(_, M) {
        _.__proto__ = M;
      } || function(_, M) {
        for (var A in M)
          Object.prototype.hasOwnProperty.call(M, A) && (_[A] = M[A]);
      }, E(x, w);
    };
    return function(x, w) {
      if (typeof w != "function" && w !== null)
        throw new TypeError("Class extends value " + String(w) + " is not a constructor or null");
      E(x, w);
      function _() {
        this.constructor = x;
      }
      x.prototype = w === null ? Object.create(w) : (_.prototype = w.prototype, new _());
    };
  }();
  Object.defineProperty(r, "__esModule", { value: !0 }), r.width = r.sep = r.positionX = r.balance = r.alignCoordinates = r.findSmallestWidthAlignment = r.buildBlockGraph = r.horizontalCompaction = r.verticalAlignment = r.hasConflict = r.addConflict = r.findOtherInnerSegmentNode = r.findType2Conflicts = r.findType1Conflicts = void 0;
  var t = Dd, n = JI, a = Kn, i = (
    /** @class */
    function(E) {
      e(x, E);
      function x() {
        return E !== null && E.apply(this, arguments) || this;
      }
      return x;
    }(t.Graph)
  ), o = function(E, x) {
    var w = {}, _ = function(M, A) {
      var S = 0, T = 0, C = M.length, O = A == null ? void 0 : A[(A == null ? void 0 : A.length) - 1];
      return A == null || A.forEach(function(L, R) {
        var P, z = (0, r.findOtherInnerSegmentNode)(E, L), V = z ? E.node(z).order : C;
        (z || L === O) && ((P = A.slice(T, R + 1)) === null || P === void 0 || P.forEach(function(N) {
          var F;
          (F = E.predecessors(N)) === null || F === void 0 || F.forEach(function(q) {
            var te, re = E.node(q), J = re.order;
            (J < S || V < J) && !(re.dummy && (!((te = E.node(N)) === null || te === void 0) && te.dummy)) && (0, r.addConflict)(w, q, N);
          });
        }), T = R + 1, S = V);
      }), A;
    };
    return x != null && x.length && x.reduce(_), w;
  };
  r.findType1Conflicts = o;
  var s = function(E, x) {
    var w = {};
    function _(T, C, O, L, R) {
      for (var P, z, V, N = C; N < O; N++)
        V = T[N], !((P = E.node(V)) === null || P === void 0) && P.dummy && ((z = E.predecessors(V)) === null || z === void 0 || z.forEach(function(F) {
          var q = E.node(F);
          q.dummy && (q.order < L || q.order > R) && (0, r.addConflict)(w, F, V);
        }));
    }
    function M(T) {
      return JSON.stringify(T.slice(1));
    }
    function A(T, C) {
      var O = M(T);
      C.get(O) || (_.apply(void 0, T), C.set(O, !0));
    }
    var S = function(T, C) {
      var O = -1, L, R = 0, P = /* @__PURE__ */ new Map();
      return C == null || C.forEach(function(z, V) {
        var N;
        if (((N = E.node(z)) === null || N === void 0 ? void 0 : N.dummy) === "border") {
          var F = E.predecessors(z) || [];
          F.length && (L = E.node(F[0]).order, A([C, R, V, O, L], P), R = V, O = L);
        }
        A([C, R, C.length, L, T.length], P);
      }), C;
    };
    return x != null && x.length && x.reduce(S), w;
  };
  r.findType2Conflicts = s;
  var u = function(E, x) {
    var w, _;
    if (!((w = E.node(x)) === null || w === void 0) && w.dummy)
      return (_ = E.predecessors(x)) === null || _ === void 0 ? void 0 : _.find(function(M) {
        return E.node(M).dummy;
      });
  };
  r.findOtherInnerSegmentNode = u;
  var f = function(E, x, w) {
    var _ = x, M = w;
    if (_ > M) {
      var A = _;
      _ = M, M = A;
    }
    var S = E[_];
    S || (E[_] = S = {}), S[M] = !0;
  };
  r.addConflict = f;
  var l = function(E, x, w) {
    var _ = x, M = w;
    if (_ > M) {
      var A = x;
      _ = M, M = A;
    }
    return !!E[_];
  };
  r.hasConflict = l;
  var c = function(E, x, w, _) {
    var M = {}, A = {}, S = {};
    return x == null || x.forEach(function(T) {
      T == null || T.forEach(function(C, O) {
        M[C] = C, A[C] = C, S[C] = O;
      });
    }), x == null || x.forEach(function(T) {
      var C = -1;
      T == null || T.forEach(function(O) {
        var L = _(O);
        if (L.length) {
          L = L.sort(function(N, F) {
            return S[N] - S[F];
          });
          for (var R = (L.length - 1) / 2, P = Math.floor(R), z = Math.ceil(R); P <= z; ++P) {
            var V = L[P];
            A[O] === O && C < S[V] && !(0, r.hasConflict)(w, O, V) && (A[V] = O, A[O] = M[O] = M[V], C = S[V]);
          }
        }
      });
    }), { root: M, align: A };
  };
  r.verticalAlignment = c;
  var h = function(E, x, w, _, M) {
    var A, S = {}, T = (0, r.buildBlockGraph)(E, x, w, M), C = M ? "borderLeft" : "borderRight", O = function(P, z) {
      for (var V = T.nodes(), N = V.pop(), F = {}; N; )
        F[N] ? P(N) : (F[N] = !0, V.push(N), V = V.concat(z(N))), N = V.pop();
    }, L = function(P) {
      S[P] = (T.inEdges(P) || []).reduce(function(z, V) {
        return Math.max(z, (S[V.v] || 0) + T.edge(V));
      }, 0);
    }, R = function(P) {
      var z = (T.outEdges(P) || []).reduce(function(N, F) {
        return Math.min(N, (S[F.w] || 0) - T.edge(F));
      }, Number.POSITIVE_INFINITY), V = E.node(P);
      z !== Number.POSITIVE_INFINITY && V.borderType !== C && (S[P] = Math.max(S[P], z));
    };
    return O(L, T.predecessors.bind(T)), O(R, T.successors.bind(T)), (A = Object.values(_)) === null || A === void 0 || A.forEach(function(P) {
      S[P] = S[w[P]];
    }), S;
  };
  r.horizontalCompaction = h;
  var d = function(E, x, w, _) {
    var M = new i(), A = E.graph(), S = (0, r.sep)(A.nodesep, A.edgesep, _);
    return x == null || x.forEach(function(T) {
      var C;
      T == null || T.forEach(function(O) {
        var L = w[O];
        if (M.setNode(L), C) {
          var R = w[C], P = M.edgeFromArgs(R, L);
          M.setEdge(R, L, Math.max(S(E, O, C), P || 0));
        }
        C = O;
      });
    }), M;
  };
  r.buildBlockGraph = d;
  var v = function(E, x) {
    return (0, a.minBy)(Object.values(x), function(w) {
      var _, M = Number.NEGATIVE_INFINITY, A = Number.POSITIVE_INFINITY;
      return (_ = Object.keys(w)) === null || _ === void 0 || _.forEach(function(S) {
        var T = w[S], C = (0, r.width)(E, S) / 2;
        M = Math.max(T + C, M), A = Math.min(T - C, A);
      }), M - A;
    });
  };
  r.findSmallestWidthAlignment = v;
  function p(E, x) {
    var w = Object.values(x), _ = (0, n.min)(w), M = (0, n.max)(w);
    ["u", "d"].forEach(function(A) {
      ["l", "r"].forEach(function(S) {
        var T = A + S, C = E[T], O;
        if (C !== x) {
          var L = Object.values(C);
          O = S === "l" ? _ - (0, n.min)(L) : M - (0, n.max)(L), O && (E[T] = {}, Object.keys(C).forEach(function(R) {
            E[T][R] = C[R] + O;
          }));
        }
      });
    });
  }
  r.alignCoordinates = p;
  var g = function(E, x) {
    var w = {};
    return Object.keys(E.ul).forEach(function(_) {
      if (x)
        w[_] = E[x.toLowerCase()][_];
      else {
        var M = Object.values(E).map(function(A) {
          return A[_];
        });
        w[_] = (M[0] + M[1]) / 2;
      }
    }), w;
  };
  r.balance = g;
  var y = function(E) {
    var x = (0, a.buildLayerMatrix)(E), w = Object.assign((0, r.findType1Conflicts)(E, x), (0, r.findType2Conflicts)(E, x)), _ = {}, M;
    ["u", "d"].forEach(function(S) {
      M = S === "u" ? x : Object.values(x).reverse(), ["l", "r"].forEach(function(T) {
        T === "r" && (M = M.map(function(R) {
          return Object.values(R).reverse();
        }));
        var C = (S === "u" ? E.predecessors : E.successors).bind(E), O = (0, r.verticalAlignment)(E, M, w, C), L = (0, r.horizontalCompaction)(E, M, O.root, O.align, T === "r");
        T === "r" && Object.keys(L).forEach(function(R) {
          L[R] = -L[R];
        }), _[S + T] = L;
      });
    });
    var A = (0, r.findSmallestWidthAlignment)(E, _);
    return p(_, A), (0, r.balance)(_, E.graph().align);
  };
  r.positionX = y;
  var m = function(E, x, w) {
    return function(_, M, A) {
      var S = _.node(M), T = _.node(A), C = 0, O;
      if (C += S.width / 2, S.hasOwnProperty("labelpos"))
        switch ((S.labelpos || "").toLowerCase()) {
          case "l":
            O = -S.width / 2;
            break;
          case "r":
            O = S.width / 2;
            break;
        }
      if (O && (C += w ? O : -O), O = 0, C += (S.dummy ? x : E) / 2, C += (T.dummy ? x : E) / 2, C += T.width / 2, T.labelpos)
        switch ((T.labelpos || "").toLowerCase()) {
          case "l":
            O = T.width / 2;
            break;
          case "r":
            O = -T.width / 2;
            break;
        }
      return O && (C += w ? O : -O), O = 0, C;
    };
  };
  r.sep = m;
  var b = function(E, x) {
    return E.node(x).width || 0;
  };
  r.width = b;
})(tO);
var Jw = be && be.__spreadArray || function(r, e, t) {
  if (t || arguments.length === 2)
    for (var n = 0, a = e.length, i; n < a; n++)
      (i || !(n in e)) && (i || (i = Array.prototype.slice.call(e, 0, n)), i[n] = e[n]);
  return r.concat(i || Array.prototype.slice.call(e));
};
Object.defineProperty(_m, "__esModule", { value: !0 });
var Mm = Kn, Oo = tO, oZ = function(r) {
  var e = (0, Mm.buildLayerMatrix)(r), t = r.graph().ranksep, n = 0;
  e == null || e.forEach(function(a) {
    var i = a.map(function(s) {
      return r.node(s).height;
    }), o = Math.max.apply(Math, Jw(Jw([], i, !1), [0], !1));
    a == null || a.forEach(function(s) {
      r.node(s).y = n + o / 2;
    }), n += o + t;
  });
}, sZ = function(r) {
  var e = (0, Mm.buildLayerMatrix)(r), t = Object.assign((0, Oo.findType1Conflicts)(r, e), (0, Oo.findType2Conflicts)(r, e)), n = {}, a = [];
  ["u", "d"].forEach(function(o) {
    a = o === "u" ? e : Object.values(e).reverse(), ["l", "r"].forEach(function(s) {
      s === "r" && (a = a.map(function(c) {
        return Object.values(c).reverse();
      }));
      var u = (o === "u" ? r.predecessors : r.successors).bind(r), f = (0, Oo.verticalAlignment)(r, a, t, u), l = (0, Oo.horizontalCompaction)(r, a, f.root, f.align, s === "r");
      s === "r" && Object.keys(l).forEach(function(c) {
        return l[c] = -l[c];
      }), n[o + s] = l;
    });
  });
  var i = (0, Oo.findSmallestWidthAlignment)(r, n);
  return i && (0, Oo.alignCoordinates)(n, i), (0, Oo.balance)(n, r.graph().align);
}, uZ = function(r) {
  var e, t = (0, Mm.asNonCompoundGraph)(r);
  oZ(t);
  var n = sZ(t);
  (e = Object.keys(n)) === null || e === void 0 || e.forEach(function(a) {
    t.node(a).x = n[a];
  });
};
_m.default = uZ;
var Sm = {};
Object.defineProperty(Sm, "__esModule", { value: !0 });
var fZ = function(r, e) {
  for (var t = r.nodes().filter(function(s) {
    var u;
    return !(!((u = r.children(s)) === null || u === void 0) && u.length);
  }), n = t.map(function(s) {
    return r.node(s).rank;
  }), a = Math.max.apply(Math, n), i = [], o = 0; o < a + 1; o++)
    i[o] = [];
  e == null || e.forEach(function(s) {
    var u = r.node(s);
    !u || u != null && u.dummy || isNaN(u.rank) || (u.fixorder = i[u.rank].length, i[u.rank].push(s));
  });
};
Sm.default = fZ;
var Uh = be && be.__assign || function() {
  return Uh = Object.assign || function(r) {
    for (var e, t = 1, n = arguments.length; t < n; t++) {
      e = arguments[t];
      for (var a in e)
        Object.prototype.hasOwnProperty.call(e, a) && (r[a] = e[a]);
    }
    return r;
  }, Uh.apply(this, arguments);
}, ai = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(em, "__esModule", { value: !0 });
var e_ = ai(tm), t_ = ai(om), lZ = ai(sm), Za = Kn, cZ = ai(um), r_ = ai(fm), hZ = ai(lm), n_ = ai(cm), dZ = ai(hm), vZ = ai(_m), pZ = ai(Sm), gZ = Ci, yZ = function(r, e) {
  var t = e && e.debugTiming ? Za.time : Za.notime;
  t("layout", function() {
    e && !e.keepNodeOrder && e.prevGraph && t("  inheritOrder", function() {
      bZ(r, e.prevGraph);
    });
    var n = t("  buildLayoutGraph", function() {
      return CZ(r);
    });
    e && e.edgeLabelSpace === !1 || t("  makeSpaceForEdgeLabels", function() {
      TZ(n);
    });
    try {
      t("  runLayout", function() {
        mZ(n, t, e);
      });
    } catch (a) {
      if (a.message === "Not possible to find intersection inside of the rectangle") {
        console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`, a);
        return;
      }
      throw a;
    }
    t("  updateInputGraph", function() {
      EZ(r, n);
    });
  });
}, mZ = function(r, e, t) {
  e("    removeSelfEdges", function() {
    BZ(r);
  }), e("    acyclic", function() {
    e_.default.run(r);
  }), e("    nestingGraph.run", function() {
    r_.default.run(r);
  }), e("    rank", function() {
    (0, lZ.default)((0, Za.asNonCompoundGraph)(r));
  }), e("    injectEdgeLabelProxies", function() {
    IZ(r);
  }), e("    removeEmptyRanks", function() {
    (0, Za.removeEmptyRanks)(r);
  }), e("    nestingGraph.cleanup", function() {
    r_.default.cleanup(r);
  }), e("    normalizeRanks", function() {
    (0, Za.normalizeRanks)(r);
  }), e("    assignRankMinMax", function() {
    OZ(r);
  }), e("    removeEdgeLabelProxies", function() {
    DZ(r);
  }), e("    normalize.run", function() {
    t_.default.run(r);
  }), e("    parentDummyChains", function() {
    (0, cZ.default)(r);
  }), e("    addBorderSegments", function() {
    (0, hZ.default)(r);
  }), t && t.keepNodeOrder && e("    initDataOrder", function() {
    (0, pZ.default)(r, t.nodeOrder);
  }), e("    order", function() {
    (0, dZ.default)(r, t == null ? void 0 : t.keepNodeOrder);
  }), e("    insertSelfEdges", function() {
    FZ(r);
  }), e("    adjustCoordinateSystem", function() {
    n_.default.adjust(r);
  }), e("    position", function() {
    (0, vZ.default)(r);
  }), e("    positionSelfEdges", function() {
    GZ(r);
  }), e("    removeBorderNodes", function() {
    RZ(r);
  }), e("    normalize.undo", function() {
    t_.default.undo(r);
  }), e("    fixupEdgeLabelCoords", function() {
    PZ(r);
  }), e("    undoCoordinateSystem", function() {
    n_.default.undo(r);
  }), e("    translateGraph", function() {
    LZ(r);
  }), e("    assignNodeIntersects", function() {
    NZ(r);
  }), e("    reversePoints", function() {
    kZ(r);
  }), e("    acyclic.undo", function() {
    e_.default.undo(r);
  });
}, bZ = function(r, e) {
  r.nodes().forEach(function(t) {
    var n = r.node(t), a = e.node(t);
    a !== void 0 ? (n.fixorder = a._order, delete a._order) : delete n.fixorder;
  });
}, EZ = function(r, e) {
  r.nodes().forEach(function(t) {
    var n, a = r.node(t);
    if (a) {
      var i = e.node(t);
      a.x = i.x, a.y = i.y, a._order = i.order, a._rank = i.rank, !((n = e.children(t)) === null || n === void 0) && n.length && (a.width = i.width, a.height = i.height);
    }
  }), r.edges().forEach(function(t) {
    var n = r.edge(t), a = e.edge(t);
    n.points = a ? a.points : [], a && a.hasOwnProperty("x") && (n.x = a.x, n.y = a.y);
  }), r.graph().width = e.graph().width, r.graph().height = e.graph().height;
}, xZ = ["nodesep", "edgesep", "ranksep", "marginx", "marginy"], wZ = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: "tb" }, Hp = ["acyclicer", "ranker", "rankdir", "align"], _Z = ["width", "height", "layer", "fixorder"], MZ = { width: 0, height: 0 }, SZ = ["minlen", "weight", "width", "height", "labeloffset"], AZ = {
  minlen: 1,
  weight: 1,
  width: 0,
  height: 0,
  labeloffset: 10,
  labelpos: "r"
}, Kp = ["labelpos"], CZ = function(r) {
  var e = new gZ.Graph({ multigraph: !0, compound: !0 }), t = Zp(r.graph()), n = {};
  return Hp == null || Hp.forEach(function(a) {
    t[a] !== void 0 && (n[a] = t[a]);
  }), e.setGraph(Object.assign({}, wZ, qp(t, xZ), n)), r.nodes().forEach(function(a) {
    var i = Zp(r.node(a)), o = Uh(Uh({}, MZ), i), s = qp(o, _Z);
    e.setNode(a, s), e.setParent(a, r.parent(a));
  }), r.edges().forEach(function(a) {
    var i = Zp(r.edge(a)), o = {};
    Kp == null || Kp.forEach(function(s) {
      i[s] !== void 0 && (o[s] = i[s]);
    }), e.setEdgeObj(a, Object.assign({}, AZ, qp(i, SZ), o));
  }), e;
}, TZ = function(r) {
  var e = r.graph();
  e.ranksep || (e.ranksep = 0), e.ranksep /= 2, r.nodes().forEach(function(t) {
    var n = r.node(t);
    isNaN(n.layer) || n.layer || (n.layer = 0);
  }), r.edges().forEach(function(t) {
    var n, a = r.edge(t);
    a.minlen *= 2, ((n = a.labelpos) === null || n === void 0 ? void 0 : n.toLowerCase()) !== "c" && (e.rankdir === "TB" || e.rankdir === "BT" ? a.width += a.labeloffset : a.height += a.labeloffset);
  });
}, IZ = function(r) {
  r.edges().forEach(function(e) {
    var t = r.edge(e);
    if (t.width && t.height) {
      var n = r.node(e.v), a = r.node(e.w), i = {
        e,
        rank: (a.rank - n.rank) / 2 + n.rank
      };
      (0, Za.addDummyNode)(r, "edge-proxy", i, "_ep");
    }
  });
}, OZ = function(r) {
  var e = 0;
  r.nodes().forEach(function(t) {
    var n, a, i = r.node(t);
    i.borderTop && (i.minRank = (n = r.node(i.borderTop)) === null || n === void 0 ? void 0 : n.rank, i.maxRank = (a = r.node(i.borderBottom)) === null || a === void 0 ? void 0 : a.rank, e = Math.max(e, i.maxRank || -1 / 0));
  }), r.graph().maxRank = e;
}, DZ = function(r) {
  r.nodes().forEach(function(e) {
    var t = r.node(e);
    t.dummy === "edge-proxy" && (r.edge(t.e).labelRank = t.rank, r.removeNode(e));
  });
}, LZ = function(r) {
  var e, t = 0, n, a = 0, i = r.graph(), o = i.marginx || 0, s = i.marginy || 0, u = function(f) {
    if (f) {
      var l = f.x, c = f.y, h = f.width, d = f.height;
      !isNaN(l) && !isNaN(h) && (e === void 0 && (e = l - h / 2), e = Math.min(e, l - h / 2), t = Math.max(t, l + h / 2)), !isNaN(c) && !isNaN(d) && (n === void 0 && (n = c - d / 2), n = Math.min(n, c - d / 2), a = Math.max(a, c + d / 2));
    }
  };
  r.nodes().forEach(function(f) {
    u(r.node(f));
  }), r.edges().forEach(function(f) {
    var l = r.edge(f);
    l != null && l.hasOwnProperty("x") && u(l);
  }), e -= o, n -= s, r.nodes().forEach(function(f) {
    var l = r.node(f);
    l && (l.x -= e, l.y -= n);
  }), r.edges().forEach(function(f) {
    var l, c = r.edge(f);
    (l = c.points) === null || l === void 0 || l.forEach(function(h) {
      h.x -= e, h.y -= n;
    }), c.hasOwnProperty("x") && (c.x -= e), c.hasOwnProperty("y") && (c.y -= n);
  }), i.width = t - e + o, i.height = a - n + s;
}, NZ = function(r) {
  r.edges().forEach(function(e) {
    var t = r.edge(e), n = r.node(e.v), a = r.node(e.w), i, o;
    t.points ? (i = t.points[0], o = t.points[t.points.length - 1]) : (t.points = [], i = a, o = n), t.points.unshift((0, Za.intersectRect)(n, i)), t.points.push((0, Za.intersectRect)(a, o));
  });
}, PZ = function(r) {
  r.edges().forEach(function(e) {
    var t = r.edge(e);
    if (t != null && t.hasOwnProperty("x"))
      switch ((t.labelpos === "l" || t.labelpos === "r") && (t.width -= t.labeloffset), t.labelpos) {
        case "l":
          t.x -= t.width / 2 + t.labeloffset;
          break;
        case "r":
          t.x += t.width / 2 + t.labeloffset;
          break;
      }
  });
}, kZ = function(r) {
  r.edges().forEach(function(e) {
    var t, n = r.edge(e);
    n.reversed && ((t = n.points) === null || t === void 0 || t.reverse());
  });
}, RZ = function(r) {
  r.nodes().forEach(function(e) {
    var t, n, a;
    if (!((t = r.children(e)) === null || t === void 0) && t.length) {
      var i = r.node(e), o = r.node(i.borderTop), s = r.node(i.borderBottom), u = r.node(i.borderLeft[((n = i.borderLeft) === null || n === void 0 ? void 0 : n.length) - 1]), f = r.node(i.borderRight[((a = i.borderRight) === null || a === void 0 ? void 0 : a.length) - 1]);
      i.width = Math.abs((f == null ? void 0 : f.x) - (u == null ? void 0 : u.x)) || 10, i.height = Math.abs((s == null ? void 0 : s.y) - (o == null ? void 0 : o.y)) || 10, i.x = ((u == null ? void 0 : u.x) || 0) + i.width / 2, i.y = ((o == null ? void 0 : o.y) || 0) + i.height / 2;
    }
  }), r.nodes().forEach(function(e) {
    var t;
    ((t = r.node(e)) === null || t === void 0 ? void 0 : t.dummy) === "border" && r.removeNode(e);
  });
}, BZ = function(r) {
  r.edges().forEach(function(e) {
    if (e.v === e.w) {
      var t = r.node(e.v);
      t.selfEdges || (t.selfEdges = []), t.selfEdges.push({ e, label: r.edge(e) }), r.removeEdgeObj(e);
    }
  });
}, FZ = function(r) {
  var e = (0, Za.buildLayerMatrix)(r);
  e == null || e.forEach(function(t) {
    var n = 0;
    t == null || t.forEach(function(a, i) {
      var o, s = r.node(a);
      s.order = i + n, (o = s.selfEdges) === null || o === void 0 || o.forEach(function(u) {
        (0, Za.addDummyNode)(r, "selfedge", {
          width: u.label.width,
          height: u.label.height,
          rank: s.rank,
          order: i + ++n,
          e: u.e,
          label: u.label
        }, "_se");
      }), delete s.selfEdges;
    });
  });
}, GZ = function(r) {
  r.nodes().forEach(function(e) {
    var t = r.node(e);
    if (t.dummy === "selfedge") {
      var n = r.node(t.e.v), a = n.x + n.width / 2, i = n.y, o = t.x - a, s = n.height / 2;
      r.setEdgeObj(t.e, t.label), r.removeNode(e), t.label.points = [
        { x: a + 2 * o / 3, y: i - s },
        { x: a + 5 * o / 6, y: i - s },
        { y: i, x: a + o },
        { x: a + 5 * o / 6, y: i + s },
        { x: a + 2 * o / 3, y: i + s }
      ], t.label.x = t.x, t.label.y = t.y;
    }
  });
}, qp = function(r, e) {
  var t = {};
  return e == null || e.forEach(function(n) {
    r[n] !== void 0 && (t[n] = +r[n]);
  }), t;
}, Zp = function(r) {
  r === void 0 && (r = {});
  var e = {};
  return Object.keys(r).forEach(function(t) {
    e[t.toLowerCase()] = r[t];
  }), e;
};
em.default = yZ;
var zZ = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(Jy, "__esModule", { value: !0 });
var UZ = zZ(em), a_ = Kn;
Jy.default = {
  layout: UZ.default,
  util: {
    time: a_.time,
    notime: a_.notime
  }
};
var jZ = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), $Z = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(mu, "__esModule", { value: !0 });
mu.DagreLayout = void 0;
var WZ = $Z(Jy), Fn = Dr(), XZ = Gr, i_ = Ci, VZ = (
  /** @class */
  function(r) {
    jZ(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.rankdir = "TB", n.nodesep = 50, n.ranksep = 50, n.controlPoints = !1, n.sortByCombo = !1, n.edgeLabelSpace = !0, n.radial = !1, n.nodes = [], n.edges = [], n.onLayoutEnd = function() {
      }, n.layoutNode = function(a) {
        var i = n, o = i.nodes, s = o.find(function(f) {
          return f.id === a;
        });
        if (s) {
          var u = s.layout !== !1;
          return u;
        }
        return !0;
      }, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        rankdir: "TB",
        align: void 0,
        nodeSize: void 0,
        nodesepFunc: void 0,
        ranksepFunc: void 0,
        nodesep: 50,
        ranksep: 50,
        controlPoints: !1,
        radial: !1,
        focusNode: null
        // radial 为 true 时生效，关注的节点
      };
    }, e.prototype.execute = function() {
      var t = this, n, a, i, o, s = this, u = s.nodes, f = s.nodeSize, l = s.rankdir, c = s.combos, h = s.begin, d = s.radial, v = s.comboEdges, p = v === void 0 ? [] : v, g = s.vedges, y = g === void 0 ? [] : g;
      if (u) {
        var m = s.edges || [], b = new i_.Graph({
          multigraph: !0,
          compound: !0
        });
        s.nodeMap = {};
        var E = {};
        u.forEach(function(ie) {
          s.nodeMap[ie.id] = ie, ie.comboId && (E[ie.comboId] = E[ie.comboId] || [], E[ie.comboId].push(ie.id));
        });
        var x = [], w = {};
        !((n = s.nodeOrder) === null || n === void 0) && n.length ? (s.nodeOrder.forEach(function(ie) {
          w[ie] = !0, x.push(s.nodeMap[ie]);
        }), u.forEach(function(ie) {
          w[ie.id] || x.push(ie);
        })) : x = u;
        var _;
        f ? (0, Fn.isArray)(f) ? _ = function() {
          return f;
        } : _ = function() {
          return [f, f];
        } : _ = function(ie) {
          return ie.size ? (0, Fn.isArray)(ie.size) ? ie.size : (0, Fn.isObject)(ie.size) ? [ie.size.width || 40, ie.size.height || 40] : [ie.size, ie.size] : [40, 40];
        };
        var M = (0, Fn.getFunc)(s.ranksep, 50, s.ranksepFunc), A = (0, Fn.getFunc)(s.nodesep, 50, s.nodesepFunc), S = A, T = M;
        (l === "LR" || l === "RL") && (S = M, T = A), b.setDefaultEdgeLabel(function() {
          return {};
        }), b.setGraph(s);
        var C = {};
        this.sortByCombo && c && c.forEach(function(ie) {
          if (C[ie.id] = ie, ie.collapsed) {
            var D = _(ie), _e = T(ie), Fe = S(ie), ge = D[0] + 2 * Fe, We = D[1] + 2 * _e;
            b.setNode(ie.id, { width: ge, height: We });
          }
          ie.parentId && (C[ie.parentId] || b.setNode(ie.parentId, {}), b.setParent(ie.id, ie.parentId));
        }), x.filter(function(ie) {
          return ie.layout !== !1;
        }).forEach(function(ie) {
          var D = _(ie), _e = T(ie), Fe = S(ie), ge = D[0] + 2 * Fe, We = D[1] + 2 * _e, Xe = ie.layer;
          (0, Fn.isNumber)(Xe) ? b.setNode(ie.id, { width: ge, height: We, layer: Xe }) : b.setNode(ie.id, { width: ge, height: We }), t.sortByCombo && ie.comboId && (C[ie.comboId] || (C[ie.comboId] = { id: ie.comboId }, b.setNode(ie.comboId, {})), b.setParent(ie.id, ie.comboId));
        }), m.forEach(function(ie) {
          var D = (0, Fn.getEdgeTerminal)(ie, "source"), _e = (0, Fn.getEdgeTerminal)(ie, "target");
          t.layoutNode(D) && t.layoutNode(_e) && b.setEdge(D, _e, {
            weight: ie.weight || 1
          });
        }), (a = p == null ? void 0 : p.concat(y || [])) === null || a === void 0 || a.forEach(function(ie) {
          var D, _e, Fe = ie.source, ge = ie.target, We = !((D = C[Fe]) === null || D === void 0) && D.collapsed ? [Fe] : E[Fe] || [Fe], Xe = !((_e = C[ge]) === null || _e === void 0) && _e.collapsed ? [ge] : E[ge] || [ge];
          We.forEach(function(Ke) {
            Xe.forEach(function(Ze) {
              b.setEdge(Ke, Ze, {
                weight: ie.weight || 1
              });
            });
          });
        });
        var O = void 0;
        !((i = s.preset) === null || i === void 0) && i.nodes && (O = new i_.Graph({
          multigraph: !0,
          compound: !0
        }), s.preset.nodes.forEach(function(ie) {
          O == null || O.setNode(ie.id, ie);
        })), WZ.default.layout(b, {
          prevGraph: O,
          edgeLabelSpace: s.edgeLabelSpace,
          keepNodeOrder: !!s.nodeOrder,
          nodeOrder: s.nodeOrder
        });
        var L = [0, 0];
        if (h) {
          var R = 1 / 0, P = 1 / 0;
          b.nodes().forEach(function(ie) {
            var D = b.node(ie);
            R > D.x && (R = D.x), P > D.y && (P = D.y);
          }), b.edges().forEach(function(ie) {
            var D, _e = b.edge(ie);
            (D = _e.points) === null || D === void 0 || D.forEach(function(Fe) {
              R > Fe.x && (R = Fe.x), P > Fe.y && (P = Fe.y);
            });
          }), L[0] = h[0] - R, L[1] = h[1] - P;
        }
        var z = l === "LR" || l === "RL";
        if (d) {
          var V = this, N = V.focusNode, F = V.ranksep, q = V.getRadialPos, te = (0, Fn.isString)(N) ? N : N == null ? void 0 : N.id, re = te ? (o = b.node(te)) === null || o === void 0 ? void 0 : o._rank : 0, J = [], ye = z ? "y" : "x", Be = z ? "height" : "width", Pe = 1 / 0, et = -1 / 0;
          b.nodes().forEach(function(ie) {
            var D = b.node(ie);
            if (s.nodeMap[ie]) {
              var _e = A(s.nodeMap[ie]);
              if (re === 0)
                J[D._rank] || (J[D._rank] = {
                  nodes: [],
                  totalWidth: 0,
                  maxSize: -1 / 0
                }), J[D._rank].nodes.push(ie), J[D._rank].totalWidth += _e * 2 + D[Be], J[D._rank].maxSize < Math.max(D.width, D.height) && (J[D._rank].maxSize = Math.max(D.width, D.height));
              else {
                var Fe = D._rank - re;
                if (Fe === 0)
                  J[Fe] || (J[Fe] = {
                    nodes: [],
                    totalWidth: 0,
                    maxSize: -1 / 0
                  }), J[Fe].nodes.push(ie), J[Fe].totalWidth += _e * 2 + D[Be], J[Fe].maxSize < Math.max(D.width, D.height) && (J[Fe].maxSize = Math.max(D.width, D.height));
                else {
                  var ge = Math.abs(Fe);
                  J[ge] || (J[ge] = {
                    left: [],
                    right: [],
                    totalWidth: 0,
                    maxSize: -1 / 0
                  }), J[ge].totalWidth += _e * 2 + D[Be], J[ge].maxSize < Math.max(D.width, D.height) && (J[ge].maxSize = Math.max(D.width, D.height)), Fe < 0 ? J[ge].left.push(ie) : J[ge].right.push(ie);
                }
              }
              var We = D[ye] - D[Be] / 2 - _e, Xe = D[ye] + D[Be] / 2 + _e;
              We < Pe && (Pe = We), Xe > et && (et = Xe);
            }
          });
          var ut = F || 50, at = {}, At = (et - Pe) / 0.9, xt = [
            (Pe + et - At) * 0.5,
            (Pe + et + At) * 0.5
          ], lr = function(ie, D, _e, Fe) {
            _e === void 0 && (_e = -1 / 0), Fe === void 0 && (Fe = [0, 1]);
            var ge = _e;
            return ie.forEach(function(We) {
              var Xe = b.node(We);
              at[We] = D;
              var Ke = q(Xe[ye], xt, At, D, Fe), Ze = Ke.x, ht = Ke.y;
              if (s.nodeMap[We]) {
                s.nodeMap[We].x = Ze + L[0], s.nodeMap[We].y = ht + L[1], s.nodeMap[We]._order = Xe._order;
                var It = M(s.nodeMap[We]);
                ge < It && (ge = It);
              }
            }), ge;
          }, Rt = !0, Wt = 0;
          J.forEach(function(ie) {
            var D, _e, Fe, ge, We, Xe, Ke;
            if (!(!(!((D = ie == null ? void 0 : ie.nodes) === null || D === void 0) && D.length) && !(!((_e = ie == null ? void 0 : ie.left) === null || _e === void 0) && _e.length) && !(!((Fe = ie == null ? void 0 : ie.right) === null || Fe === void 0) && Fe.length))) {
              if (Rt && ie.nodes.length === 1) {
                var Ze = ie.nodes[0];
                if (!s.nodeMap[Ze])
                  return;
                s.nodeMap[Ze].x = L[0], s.nodeMap[Ze].y = L[1], at[ie.nodes[0]] = 0, ut = M(s.nodeMap[Ze]), Rt = !1;
                return;
              }
              ut = Math.max(ut, ie.totalWidth / (2 * Math.PI));
              var ht = -1 / 0;
              if (re === 0 || !((ge = ie.nodes) === null || ge === void 0) && ge.length)
                ht = lr(ie.nodes, ut, ht, [0, 1]);
              else {
                var It = ((We = ie.left) === null || We === void 0 ? void 0 : We.length) / (((Xe = ie.left) === null || Xe === void 0 ? void 0 : Xe.length) + ((Ke = ie.right) === null || Ke === void 0 ? void 0 : Ke.length));
                ht = lr(ie.left, ut, ht, [
                  0,
                  It
                ]), ht = lr(ie.right, ut, ht, [
                  It + 0.05,
                  1
                ]);
              }
              ut += ht, Rt = !1, Wt - ie.maxSize;
            }
          }), b.edges().forEach(function(ie) {
            var D, _e, Fe, ge = b.edge(ie), We = m.findIndex(function(fr) {
              var ar = (0, Fn.getEdgeTerminal)(fr, "source"), pr = (0, Fn.getEdgeTerminal)(fr, "target");
              return ar === ie.v && pr === ie.w;
            });
            if (!(We <= -1) && s.edgeLabelSpace && s.controlPoints && m[We].type !== "loop") {
              var Xe = ye === "x" ? "y" : "x", Ke = (D = ge == null ? void 0 : ge.points) === null || D === void 0 ? void 0 : D.slice(1, ge.points.length - 1), Ze = [], ht = (_e = b.node(ie.v)) === null || _e === void 0 ? void 0 : _e[Xe], It = ht - ((Fe = b.node(ie.w)) === null || Fe === void 0 ? void 0 : Fe[Xe]), sr = at[ie.v], Ot = sr - at[ie.w];
              Ke == null || Ke.forEach(function(fr) {
                var ar = (fr[Xe] - ht) / It * Ot + sr, pr = q(fr[ye], xt, At, ar);
                Ze.push({
                  x: pr.x + L[0],
                  y: pr.y + L[1]
                });
              }), m[We].controlPoints = Ze;
            }
          });
        } else {
          var vr = /* @__PURE__ */ new Set(), cr = l === "BT" || l === "RL", jt = cr ? function(ie, D) {
            return D - ie;
          } : function(ie, D) {
            return ie - D;
          };
          b.nodes().forEach(function(ie) {
            var D = b.node(ie);
            if (D) {
              var _e = t.nodeMap[ie];
              _e || (_e = c == null ? void 0 : c.find(function(Fe) {
                return Fe.id === ie;
              })), _e && (_e.x = D.x + L[0], _e.y = D.y + L[1], _e._order = D._order, vr.add(z ? _e.x : _e.y));
            }
          });
          var or = Array.from(vr).sort(jt), Wr = z ? function(ie, D) {
            return ie.x !== D.x;
          } : function(ie, D) {
            return ie.y !== D.y;
          }, rt = z ? function(ie, D, _e) {
            var Fe = Math.max(D.y, _e.y), ge = Math.min(D.y, _e.y);
            return ie.filter(function(We) {
              return We.y <= Fe && We.y >= ge;
            });
          } : function(ie, D, _e) {
            var Fe = Math.max(D.x, _e.x), ge = Math.min(D.x, _e.x);
            return ie.filter(function(We) {
              return We.x <= Fe && We.x >= ge;
            });
          };
          b.edges().forEach(function(ie) {
            var D, _e = b.edge(ie), Fe = m.findIndex(function(Xe) {
              var Ke = (0, Fn.getEdgeTerminal)(Xe, "source"), Ze = (0, Fn.getEdgeTerminal)(Xe, "target");
              return Ke === ie.v && Ze === ie.w;
            });
            if (!(Fe <= -1) && s.edgeLabelSpace && s.controlPoints && m[Fe].type !== "loop") {
              (D = _e == null ? void 0 : _e.points) === null || D === void 0 || D.forEach(function(Xe) {
                Xe.x += L[0], Xe.y += L[1];
              });
              var ge = s.nodeMap[ie.v], We = s.nodeMap[ie.w];
              m[Fe].controlPoints = YZ(_e == null ? void 0 : _e.points, ge, We, or, z, Wr, rt);
            }
          });
        }
        return s.onLayoutEnd && s.onLayoutEnd(), {
          nodes: u,
          edges: m
        };
      }
    }, e.prototype.getRadialPos = function(t, n, a, i, o) {
      o === void 0 && (o = [0, 1]);
      var s = (t - n[0]) / a;
      s = s * (o[1] - o[0]) + o[0];
      var u = s * 2 * Math.PI;
      return {
        x: Math.cos(u) * i,
        y: Math.sin(u) * i
      };
    }, e.prototype.getType = function() {
      return "dagre";
    }, e;
  }(XZ.Base)
);
mu.DagreLayout = VZ;
var YZ = function(r, e, t, n, a, i, o) {
  var s = (r == null ? void 0 : r.slice(1, r.length - 1)) || [];
  if (e && t) {
    var u = e.x, f = e.y, l = t.x, c = t.y;
    if (a && (u = e.y, f = e.x, l = t.y, c = t.x), c !== f && u !== l) {
      var h = n.indexOf(f), d = n[h + 1];
      if (d) {
        var v = s[0], p = a ? {
          x: (f + d) / 2,
          y: (v == null ? void 0 : v.y) || l
        } : {
          x: (v == null ? void 0 : v.x) || l,
          y: (f + d) / 2
        };
        (!v || i(v, p)) && s.unshift(p);
      }
      var g = n.indexOf(c), y = Math.abs(g - h);
      if (y === 1)
        s = o(s, e, t), s.length || s.push(a ? {
          x: (f + c) / 2,
          y: u
        } : {
          x: u,
          y: (f + c) / 2
        });
      else if (y > 1) {
        var m = n[g - 1];
        if (m) {
          var b = s[s.length - 1], E = a ? {
            x: (c + m) / 2,
            y: (b == null ? void 0 : b.y) || l
          } : {
            x: (b == null ? void 0 : b.x) || u,
            y: (c + m) / 2
          };
          (!b || i(b, E)) && s.push(E);
        }
      }
    }
  }
  return s;
}, sl = {};
const jh = { graph: { meta: { rankDir: "TB", nodeSep: 50, rankSep: 50, edgeSep: 5, align: void 0 } }, subScene: { meta: { paddingTop: 20, paddingBottom: 20, paddingLeft: 20, paddingRight: 20, labelHeight: 20 } }, nodeSize: { meta: { width: 100, maxLabelWidth: 0, height: 20 }, node: { width: 80, height: 20, labelOffset: 10, maxLabelWidth: 40 }, bridge: { width: 5, height: 5, radius: 2, labelOffset: 0 } } };
function Sg(r = {}, e = jh) {
  var t, n, a, i;
  const o = JSON.parse(JSON.stringify(e)), s = ((t = r == null ? void 0 : r.graph) === null || t === void 0 ? void 0 : t.meta) || {}, u = ((n = r == null ? void 0 : r.subScene) === null || n === void 0 ? void 0 : n.meta) || {}, f = ((a = r == null ? void 0 : r.nodeSize) === null || a === void 0 ? void 0 : a.meta) || {}, l = ((i = r == null ? void 0 : r.nodeSize) === null || i === void 0 ? void 0 : i.node) || {}, c = o.nodeSize.bridge;
  return { graph: { meta: Object.assign(o.graph.meta, s) }, subScene: { meta: Object.assign(o.subScene.meta, u) }, nodeSize: { meta: Object.assign(o.nodeSize.meta, f), node: Object.assign(o.nodeSize.node, l), bridge: c } };
}
function rO(r) {
  return `◬${r}◬`;
}
const uu = rO("ROOT"), nO = rO("BRIDGE_GRAPH");
var On, Ho, fu, Ag;
(function(r) {
  r[r.META = 0] = "META", r[r.NODE = 1] = "NODE", r[r.BRIDGE = 2] = "BRIDGE";
})(On || (On = {})), function(r) {
  r[r.INCLUDE = 0] = "INCLUDE", r[r.EXCLUDE = 1] = "EXCLUDE", r[r.UNSPECIFIED = 2] = "UNSPECIFIED";
}(Ho || (Ho = {})), function(r) {
  r[r.META = 0] = "META", r[r.CORE = 1] = "CORE", r[r.BRIDGE = 2] = "BRIDGE";
}(fu || (fu = {})), function(r) {
  r[r.META = 0] = "META", r[r.OP = 1] = "OP", r[r.SERIES = 2] = "SERIES";
}(Ag || (Ag = {}));
var Cc = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Am(r, e) {
  return r(e = { exports: {} }, e.exports), e.exports;
}
var HZ = function() {
  this.__data__ = [], this.size = 0;
}, Eu = function(r, e) {
  return r === e || r != r && e != e;
}, Rd = function(r, e) {
  for (var t = r.length; t--; )
    if (Eu(r[t][0], e))
      return t;
  return -1;
}, KZ = Array.prototype.splice, qZ = function(r) {
  var e = this.__data__, t = Rd(e, r);
  return !(t < 0) && (t == e.length - 1 ? e.pop() : KZ.call(e, t, 1), --this.size, !0);
}, ZZ = function(r) {
  var e = this.__data__, t = Rd(e, r);
  return t < 0 ? void 0 : e[t][1];
}, QZ = function(r) {
  return Rd(this.__data__, r) > -1;
}, JZ = function(r, e) {
  var t = this.__data__, n = Rd(t, r);
  return n < 0 ? (++this.size, t.push([r, e])) : t[n][1] = e, this;
};
function Ns(r) {
  var e = -1, t = r == null ? 0 : r.length;
  for (this.clear(); ++e < t; ) {
    var n = r[e];
    this.set(n[0], n[1]);
  }
}
Ns.prototype.clear = HZ, Ns.prototype.delete = qZ, Ns.prototype.get = ZZ, Ns.prototype.has = QZ, Ns.prototype.set = JZ;
var Bd = Ns, eQ = function() {
  this.__data__ = new Bd(), this.size = 0;
}, tQ = function(r) {
  var e = this.__data__, t = e.delete(r);
  return this.size = e.size, t;
}, rQ = function(r) {
  return this.__data__.get(r);
}, nQ = function(r) {
  return this.__data__.has(r);
}, aO = typeof Cc == "object" && Cc && Cc.Object === Object && Cc, aQ = typeof self == "object" && self && self.Object === Object && self, Sa = aO || aQ || Function("return this")(), sa = Sa.Symbol, iO = Object.prototype, iQ = iO.hasOwnProperty, oQ = iO.toString, Vu = sa ? sa.toStringTag : void 0, sQ = function(r) {
  var e = iQ.call(r, Vu), t = r[Vu];
  try {
    r[Vu] = void 0;
    var n = !0;
  } catch {
  }
  var a = oQ.call(r);
  return n && (e ? r[Vu] = t : delete r[Vu]), a;
}, uQ = Object.prototype.toString, fQ = function(r) {
  return uQ.call(r);
}, o_ = sa ? sa.toStringTag : void 0, fo = function(r) {
  return r == null ? r === void 0 ? "[object Undefined]" : "[object Null]" : o_ && o_ in Object(r) ? sQ(r) : fQ(r);
}, Nn = function(r) {
  var e = typeof r;
  return r != null && (e == "object" || e == "function");
}, s_, ul = function(r) {
  if (!Nn(r))
    return !1;
  var e = fo(r);
  return e == "[object Function]" || e == "[object GeneratorFunction]" || e == "[object AsyncFunction]" || e == "[object Proxy]";
}, Qp = Sa["__core-js_shared__"], u_ = (s_ = /[^.]+$/.exec(Qp && Qp.keys && Qp.keys.IE_PROTO || "")) ? "Symbol(src)_1." + s_ : "", lQ = function(r) {
  return !!u_ && u_ in r;
}, cQ = Function.prototype.toString, es = function(r) {
  if (r != null) {
    try {
      return cQ.call(r);
    } catch {
    }
    try {
      return r + "";
    } catch {
    }
  }
  return "";
}, hQ = /^\[object .+?Constructor\]$/, dQ = Function.prototype, vQ = Object.prototype, pQ = dQ.toString, gQ = vQ.hasOwnProperty, yQ = RegExp("^" + pQ.call(gQ).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), mQ = function(r) {
  return !(!Nn(r) || lQ(r)) && (ul(r) ? yQ : hQ).test(es(r));
}, bQ = function(r, e) {
  return r == null ? void 0 : r[e];
}, ts = function(r, e) {
  var t = bQ(r, e);
  return mQ(t) ? t : void 0;
}, zf = ts(Sa, "Map"), Uf = ts(Object, "create"), EQ = function() {
  this.__data__ = Uf ? Uf(null) : {}, this.size = 0;
}, xQ = function(r) {
  var e = this.has(r) && delete this.__data__[r];
  return this.size -= e ? 1 : 0, e;
}, wQ = Object.prototype.hasOwnProperty, _Q = function(r) {
  var e = this.__data__;
  if (Uf) {
    var t = e[r];
    return t === "__lodash_hash_undefined__" ? void 0 : t;
  }
  return wQ.call(e, r) ? e[r] : void 0;
}, MQ = Object.prototype.hasOwnProperty, SQ = function(r) {
  var e = this.__data__;
  return Uf ? e[r] !== void 0 : MQ.call(e, r);
}, AQ = function(r, e) {
  var t = this.__data__;
  return this.size += this.has(r) ? 0 : 1, t[r] = Uf && e === void 0 ? "__lodash_hash_undefined__" : e, this;
};
function Ps(r) {
  var e = -1, t = r == null ? 0 : r.length;
  for (this.clear(); ++e < t; ) {
    var n = r[e];
    this.set(n[0], n[1]);
  }
}
Ps.prototype.clear = EQ, Ps.prototype.delete = xQ, Ps.prototype.get = _Q, Ps.prototype.has = SQ, Ps.prototype.set = AQ;
var f_ = Ps, CQ = function() {
  this.size = 0, this.__data__ = { hash: new f_(), map: new (zf || Bd)(), string: new f_() };
}, TQ = function(r) {
  var e = typeof r;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? r !== "__proto__" : r === null;
}, Fd = function(r, e) {
  var t = r.__data__;
  return TQ(e) ? t[typeof e == "string" ? "string" : "hash"] : t.map;
}, IQ = function(r) {
  var e = Fd(this, r).delete(r);
  return this.size -= e ? 1 : 0, e;
}, OQ = function(r) {
  return Fd(this, r).get(r);
}, DQ = function(r) {
  return Fd(this, r).has(r);
}, LQ = function(r, e) {
  var t = Fd(this, r), n = t.size;
  return t.set(r, e), this.size += t.size == n ? 0 : 1, this;
};
function ks(r) {
  var e = -1, t = r == null ? 0 : r.length;
  for (this.clear(); ++e < t; ) {
    var n = r[e];
    this.set(n[0], n[1]);
  }
}
ks.prototype.clear = CQ, ks.prototype.delete = IQ, ks.prototype.get = OQ, ks.prototype.has = DQ, ks.prototype.set = LQ;
var Gd = ks, NQ = function(r, e) {
  var t = this.__data__;
  if (t instanceof Bd) {
    var n = t.__data__;
    if (!zf || n.length < 199)
      return n.push([r, e]), this.size = ++t.size, this;
    t = this.__data__ = new Gd(n);
  }
  return t.set(r, e), this.size = t.size, this;
};
function Rs(r) {
  var e = this.__data__ = new Bd(r);
  this.size = e.size;
}
Rs.prototype.clear = eQ, Rs.prototype.delete = tQ, Rs.prototype.get = rQ, Rs.prototype.has = nQ, Rs.prototype.set = NQ;
var Ys = Rs, Cm = function(r, e) {
  for (var t = -1, n = r == null ? 0 : r.length; ++t < n && e(r[t], t, r) !== !1; )
    ;
  return r;
}, $h = function() {
  try {
    var r = ts(Object, "defineProperty");
    return r({}, "", {}), r;
  } catch {
  }
}(), zd = function(r, e, t) {
  e == "__proto__" && $h ? $h(r, e, { configurable: !0, enumerable: !0, value: t, writable: !0 }) : r[e] = t;
}, PQ = Object.prototype.hasOwnProperty, Ud = function(r, e, t) {
  var n = r[e];
  PQ.call(r, e) && Eu(n, t) && (t !== void 0 || e in r) || zd(r, e, t);
}, fl = function(r, e, t, n) {
  var a = !t;
  t || (t = {});
  for (var i = -1, o = e.length; ++i < o; ) {
    var s = e[i], u = n ? n(t[s], r[s], s, t, r) : void 0;
    u === void 0 && (u = r[s]), a ? zd(t, s, u) : Ud(t, s, u);
  }
  return t;
}, kQ = function(r, e) {
  for (var t = -1, n = Array(r); ++t < r; )
    n[t] = e(t);
  return n;
}, wa = function(r) {
  return r != null && typeof r == "object";
}, l_ = function(r) {
  return wa(r) && fo(r) == "[object Arguments]";
}, oO = Object.prototype, RQ = oO.hasOwnProperty, BQ = oO.propertyIsEnumerable, lu = l_(/* @__PURE__ */ function() {
  return arguments;
}()) ? l_ : function(r) {
  return wa(r) && RQ.call(r, "callee") && !BQ.call(r, "callee");
}, Fr = Array.isArray, FQ = function() {
  return !1;
}, Ko = Am(function(r, e) {
  var t = e && !e.nodeType && e, n = t && r && !r.nodeType && r, a = n && n.exports === t ? Sa.Buffer : void 0, i = (a ? a.isBuffer : void 0) || FQ;
  r.exports = i;
}), GQ = /^(?:0|[1-9]\d*)$/, jd = function(r, e) {
  var t = typeof r;
  return !!(e = e ?? 9007199254740991) && (t == "number" || t != "symbol" && GQ.test(r)) && r > -1 && r % 1 == 0 && r < e;
}, Tm = function(r) {
  return typeof r == "number" && r > -1 && r % 1 == 0 && r <= 9007199254740991;
}, Er = {};
Er["[object Float32Array]"] = Er["[object Float64Array]"] = Er["[object Int8Array]"] = Er["[object Int16Array]"] = Er["[object Int32Array]"] = Er["[object Uint8Array]"] = Er["[object Uint8ClampedArray]"] = Er["[object Uint16Array]"] = Er["[object Uint32Array]"] = !0, Er["[object Arguments]"] = Er["[object Array]"] = Er["[object ArrayBuffer]"] = Er["[object Boolean]"] = Er["[object DataView]"] = Er["[object Date]"] = Er["[object Error]"] = Er["[object Function]"] = Er["[object Map]"] = Er["[object Number]"] = Er["[object Object]"] = Er["[object RegExp]"] = Er["[object Set]"] = Er["[object String]"] = Er["[object WeakMap]"] = !1;
var zQ = function(r) {
  return wa(r) && Tm(r.length) && !!Er[fo(r)];
}, $d = function(r) {
  return function(e) {
    return r(e);
  };
}, cu = Am(function(r, e) {
  var t = e && !e.nodeType && e, n = t && r && !r.nodeType && r, a = n && n.exports === t && aO.process, i = function() {
    try {
      var o = n && n.require && n.require("util").types;
      return o || a && a.binding && a.binding("util");
    } catch {
    }
  }();
  r.exports = i;
}), c_ = cu && cu.isTypedArray, ll = c_ ? $d(c_) : zQ, UQ = Object.prototype.hasOwnProperty, sO = function(r, e) {
  var t = Fr(r), n = !t && lu(r), a = !t && !n && Ko(r), i = !t && !n && !a && ll(r), o = t || n || a || i, s = o ? kQ(r.length, String) : [], u = s.length;
  for (var f in r)
    !e && !UQ.call(r, f) || o && (f == "length" || a && (f == "offset" || f == "parent") || i && (f == "buffer" || f == "byteLength" || f == "byteOffset") || jd(f, u)) || s.push(f);
  return s;
}, jQ = Object.prototype, Wd = function(r) {
  var e = r && r.constructor;
  return r === (typeof e == "function" && e.prototype || jQ);
}, uO = function(r, e) {
  return function(t) {
    return r(e(t));
  };
}, $Q = uO(Object.keys, Object), WQ = Object.prototype.hasOwnProperty, Im = function(r) {
  if (!Wd(r))
    return $Q(r);
  var e = [];
  for (var t in Object(r))
    WQ.call(r, t) && t != "constructor" && e.push(t);
  return e;
}, Ii = function(r) {
  return r != null && Tm(r.length) && !ul(r);
}, lo = function(r) {
  return Ii(r) ? sO(r) : Im(r);
}, XQ = function(r, e) {
  return r && fl(e, lo(e), r);
}, VQ = function(r) {
  var e = [];
  if (r != null)
    for (var t in Object(r))
      e.push(t);
  return e;
}, YQ = Object.prototype.hasOwnProperty, HQ = function(r) {
  if (!Nn(r))
    return VQ(r);
  var e = Wd(r), t = [];
  for (var n in r)
    (n != "constructor" || !e && YQ.call(r, n)) && t.push(n);
  return t;
}, rs = function(r) {
  return Ii(r) ? sO(r, !0) : HQ(r);
}, KQ = function(r, e) {
  return r && fl(e, rs(e), r);
}, fO = Am(function(r, e) {
  var t = e && !e.nodeType && e, n = t && r && !r.nodeType && r, a = n && n.exports === t ? Sa.Buffer : void 0, i = a ? a.allocUnsafe : void 0;
  r.exports = function(o, s) {
    if (s)
      return o.slice();
    var u = o.length, f = i ? i(u) : new o.constructor(u);
    return o.copy(f), f;
  };
}), lO = function(r, e) {
  var t = -1, n = r.length;
  for (e || (e = Array(n)); ++t < n; )
    e[t] = r[t];
  return e;
}, cO = function(r, e) {
  for (var t = -1, n = r == null ? 0 : r.length, a = 0, i = []; ++t < n; ) {
    var o = r[t];
    e(o, t, r) && (i[a++] = o);
  }
  return i;
}, hO = function() {
  return [];
}, qQ = Object.prototype.propertyIsEnumerable, h_ = Object.getOwnPropertySymbols, Om = h_ ? function(r) {
  return r == null ? [] : (r = Object(r), cO(h_(r), function(e) {
    return qQ.call(r, e);
  }));
} : hO, ZQ = function(r, e) {
  return fl(r, Om(r), e);
}, Dm = function(r, e) {
  for (var t = -1, n = e.length, a = r.length; ++t < n; )
    r[a + t] = e[t];
  return r;
}, Xd = uO(Object.getPrototypeOf, Object), dO = Object.getOwnPropertySymbols ? function(r) {
  for (var e = []; r; )
    Dm(e, Om(r)), r = Xd(r);
  return e;
} : hO, QQ = function(r, e) {
  return fl(r, dO(r), e);
}, vO = function(r, e, t) {
  var n = e(r);
  return Fr(r) ? n : Dm(n, t(r));
}, Cg = function(r) {
  return vO(r, lo, Om);
}, JQ = function(r) {
  return vO(r, rs, dO);
}, Tg = ts(Sa, "DataView"), Ig = ts(Sa, "Promise"), Hs = ts(Sa, "Set"), Og = ts(Sa, "WeakMap"), eJ = es(Tg), tJ = es(zf), rJ = es(Ig), nJ = es(Hs), aJ = es(Og), ko = fo;
(Tg && ko(new Tg(new ArrayBuffer(1))) != "[object DataView]" || zf && ko(new zf()) != "[object Map]" || Ig && ko(Ig.resolve()) != "[object Promise]" || Hs && ko(new Hs()) != "[object Set]" || Og && ko(new Og()) != "[object WeakMap]") && (ko = function(r) {
  var e = fo(r), t = e == "[object Object]" ? r.constructor : void 0, n = t ? es(t) : "";
  if (n)
    switch (n) {
      case eJ:
        return "[object DataView]";
      case tJ:
        return "[object Map]";
      case rJ:
        return "[object Promise]";
      case nJ:
        return "[object Set]";
      case aJ:
        return "[object WeakMap]";
    }
  return e;
});
var qo = ko, iJ = Object.prototype.hasOwnProperty, oJ = function(r) {
  var e = r.length, t = new r.constructor(e);
  return e && typeof r[0] == "string" && iJ.call(r, "index") && (t.index = r.index, t.input = r.input), t;
}, Wh = Sa.Uint8Array, Lm = function(r) {
  var e = new r.constructor(r.byteLength);
  return new Wh(e).set(new Wh(r)), e;
}, sJ = function(r, e) {
  var t = e ? Lm(r.buffer) : r.buffer;
  return new r.constructor(t, r.byteOffset, r.byteLength);
}, uJ = /\w*$/, fJ = function(r) {
  var e = new r.constructor(r.source, uJ.exec(r));
  return e.lastIndex = r.lastIndex, e;
}, d_ = sa ? sa.prototype : void 0, v_ = d_ ? d_.valueOf : void 0, lJ = function(r) {
  return v_ ? Object(v_.call(r)) : {};
}, pO = function(r, e) {
  var t = e ? Lm(r.buffer) : r.buffer;
  return new r.constructor(t, r.byteOffset, r.length);
}, cJ = function(r, e, t) {
  var n = r.constructor;
  switch (e) {
    case "[object ArrayBuffer]":
      return Lm(r);
    case "[object Boolean]":
    case "[object Date]":
      return new n(+r);
    case "[object DataView]":
      return sJ(r, t);
    case "[object Float32Array]":
    case "[object Float64Array]":
    case "[object Int8Array]":
    case "[object Int16Array]":
    case "[object Int32Array]":
    case "[object Uint8Array]":
    case "[object Uint8ClampedArray]":
    case "[object Uint16Array]":
    case "[object Uint32Array]":
      return pO(r, t);
    case "[object Map]":
      return new n();
    case "[object Number]":
    case "[object String]":
      return new n(r);
    case "[object RegExp]":
      return fJ(r);
    case "[object Set]":
      return new n();
    case "[object Symbol]":
      return lJ(r);
  }
}, p_ = Object.create, gO = /* @__PURE__ */ function() {
  function r() {
  }
  return function(e) {
    if (!Nn(e))
      return {};
    if (p_)
      return p_(e);
    r.prototype = e;
    var t = new r();
    return r.prototype = void 0, t;
  };
}(), yO = function(r) {
  return typeof r.constructor != "function" || Wd(r) ? {} : gO(Xd(r));
}, hJ = function(r) {
  return wa(r) && qo(r) == "[object Map]";
}, g_ = cu && cu.isMap, dJ = g_ ? $d(g_) : hJ, vJ = function(r) {
  return wa(r) && qo(r) == "[object Set]";
}, y_ = cu && cu.isSet, pJ = y_ ? $d(y_) : vJ, mr = {};
mr["[object Arguments]"] = mr["[object Array]"] = mr["[object ArrayBuffer]"] = mr["[object DataView]"] = mr["[object Boolean]"] = mr["[object Date]"] = mr["[object Float32Array]"] = mr["[object Float64Array]"] = mr["[object Int8Array]"] = mr["[object Int16Array]"] = mr["[object Int32Array]"] = mr["[object Map]"] = mr["[object Number]"] = mr["[object Object]"] = mr["[object RegExp]"] = mr["[object Set]"] = mr["[object String]"] = mr["[object Symbol]"] = mr["[object Uint8Array]"] = mr["[object Uint8ClampedArray]"] = mr["[object Uint16Array]"] = mr["[object Uint32Array]"] = !0, mr["[object Error]"] = mr["[object Function]"] = mr["[object WeakMap]"] = !1;
var mO = function r(e, t, n, a, i, o) {
  var s, u = 1 & t, f = 2 & t, l = 4 & t;
  if (n && (s = i ? n(e, a, i, o) : n(e)), s !== void 0)
    return s;
  if (!Nn(e))
    return e;
  var c = Fr(e);
  if (c) {
    if (s = oJ(e), !u)
      return lO(e, s);
  } else {
    var h = qo(e), d = h == "[object Function]" || h == "[object GeneratorFunction]";
    if (Ko(e))
      return fO(e, u);
    if (h == "[object Object]" || h == "[object Arguments]" || d && !i) {
      if (s = f || d ? {} : yO(e), !u)
        return f ? QQ(e, KQ(s, e)) : ZQ(e, XQ(s, e));
    } else {
      if (!mr[h])
        return i ? e : {};
      s = cJ(e, h, u);
    }
  }
  o || (o = new Ys());
  var v = o.get(e);
  if (v)
    return v;
  o.set(e, s), pJ(e) ? e.forEach(function(g) {
    s.add(r(g, t, n, g, e, o));
  }) : dJ(e) && e.forEach(function(g, y) {
    s.set(y, r(g, t, n, y, e, o));
  });
  var p = c ? void 0 : (l ? f ? JQ : Cg : f ? rs : lo)(e);
  return Cm(p || e, function(g, y) {
    p && (g = e[y = g]), Ud(s, y, r(g, t, n, y, e, o));
  }), s;
}, gJ = function(r) {
  return mO(r, 4);
}, Nm = function(r) {
  return function() {
    return r;
  };
}, Pm = /* @__PURE__ */ function(r) {
  return function(e, t, n) {
    for (var a = -1, i = Object(e), o = n(e), s = o.length; s--; ) {
      var u = o[r ? s : ++a];
      if (t(i[u], u, i) === !1)
        break;
    }
    return e;
  };
}(), km = function(r, e) {
  return r && Pm(r, e, lo);
}, Vd = /* @__PURE__ */ function(r, e) {
  return function(t, n) {
    if (t == null)
      return t;
    if (!Ii(t))
      return r(t, n);
    for (var a = t.length, i = e ? a : -1, o = Object(t); (e ? i-- : ++i < a) && n(o[i], i, o) !== !1; )
      ;
    return t;
  };
}(km), ns = function(r) {
  return r;
}, bO = function(r) {
  return typeof r == "function" ? r : ns;
}, EO = function(r, e) {
  return (Fr(r) ? Cm : Vd)(r, bO(e));
}, xO = EO, yJ = function(r, e) {
  var t = [];
  return Vd(r, function(n, a, i) {
    e(n, a, i) && t.push(n);
  }), t;
}, mJ = function(r) {
  return this.__data__.set(r, "__lodash_hash_undefined__"), this;
}, bJ = function(r) {
  return this.__data__.has(r);
};
function ih(r) {
  var e = -1, t = r == null ? 0 : r.length;
  for (this.__data__ = new Gd(); ++e < t; )
    this.add(r[e]);
}
ih.prototype.add = ih.prototype.push = mJ, ih.prototype.has = bJ;
var wO = ih, EJ = function(r, e) {
  for (var t = -1, n = r == null ? 0 : r.length; ++t < n; )
    if (e(r[t], t, r))
      return !0;
  return !1;
}, _O = function(r, e) {
  return r.has(e);
}, MO = function(r, e, t, n, a, i) {
  var o = 1 & t, s = r.length, u = e.length;
  if (s != u && !(o && u > s))
    return !1;
  var f = i.get(r), l = i.get(e);
  if (f && l)
    return f == e && l == r;
  var c = -1, h = !0, d = 2 & t ? new wO() : void 0;
  for (i.set(r, e), i.set(e, r); ++c < s; ) {
    var v = r[c], p = e[c];
    if (n)
      var g = o ? n(p, v, c, e, r, i) : n(v, p, c, r, e, i);
    if (g !== void 0) {
      if (g)
        continue;
      h = !1;
      break;
    }
    if (d) {
      if (!EJ(e, function(y, m) {
        if (!_O(d, m) && (v === y || a(v, y, t, n, i)))
          return d.push(m);
      })) {
        h = !1;
        break;
      }
    } else if (v !== p && !a(v, p, t, n, i)) {
      h = !1;
      break;
    }
  }
  return i.delete(r), i.delete(e), h;
}, xJ = function(r) {
  var e = -1, t = Array(r.size);
  return r.forEach(function(n, a) {
    t[++e] = [a, n];
  }), t;
}, Rm = function(r) {
  var e = -1, t = Array(r.size);
  return r.forEach(function(n) {
    t[++e] = n;
  }), t;
}, m_ = sa ? sa.prototype : void 0, Jp = m_ ? m_.valueOf : void 0, wJ = function(r, e, t, n, a, i, o) {
  switch (t) {
    case "[object DataView]":
      if (r.byteLength != e.byteLength || r.byteOffset != e.byteOffset)
        return !1;
      r = r.buffer, e = e.buffer;
    case "[object ArrayBuffer]":
      return !(r.byteLength != e.byteLength || !i(new Wh(r), new Wh(e)));
    case "[object Boolean]":
    case "[object Date]":
    case "[object Number]":
      return Eu(+r, +e);
    case "[object Error]":
      return r.name == e.name && r.message == e.message;
    case "[object RegExp]":
    case "[object String]":
      return r == e + "";
    case "[object Map]":
      var s = xJ;
    case "[object Set]":
      var u = 1 & n;
      if (s || (s = Rm), r.size != e.size && !u)
        return !1;
      var f = o.get(r);
      if (f)
        return f == e;
      n |= 2, o.set(r, e);
      var l = MO(s(r), s(e), n, a, i, o);
      return o.delete(r), l;
    case "[object Symbol]":
      if (Jp)
        return Jp.call(r) == Jp.call(e);
  }
  return !1;
}, _J = Object.prototype.hasOwnProperty, MJ = function(r, e, t, n, a, i) {
  var o = 1 & t, s = Cg(r), u = s.length;
  if (u != Cg(e).length && !o)
    return !1;
  for (var f = u; f--; ) {
    var l = s[f];
    if (!(o ? l in e : _J.call(e, l)))
      return !1;
  }
  var c = i.get(r), h = i.get(e);
  if (c && h)
    return c == e && h == r;
  var d = !0;
  i.set(r, e), i.set(e, r);
  for (var v = o; ++f < u; ) {
    var p = r[l = s[f]], g = e[l];
    if (n)
      var y = o ? n(g, p, l, e, r, i) : n(p, g, l, r, e, i);
    if (!(y === void 0 ? p === g || a(p, g, t, n, i) : y)) {
      d = !1;
      break;
    }
    v || (v = l == "constructor");
  }
  if (d && !v) {
    var m = r.constructor, b = e.constructor;
    m == b || !("constructor" in r) || !("constructor" in e) || typeof m == "function" && m instanceof m && typeof b == "function" && b instanceof b || (d = !1);
  }
  return i.delete(r), i.delete(e), d;
}, b_ = Object.prototype.hasOwnProperty, SJ = function(r, e, t, n, a, i) {
  var o = Fr(r), s = Fr(e), u = o ? "[object Array]" : qo(r), f = s ? "[object Array]" : qo(e), l = (u = u == "[object Arguments]" ? "[object Object]" : u) == "[object Object]", c = (f = f == "[object Arguments]" ? "[object Object]" : f) == "[object Object]", h = u == f;
  if (h && Ko(r)) {
    if (!Ko(e))
      return !1;
    o = !0, l = !1;
  }
  if (h && !l)
    return i || (i = new Ys()), o || ll(r) ? MO(r, e, t, n, a, i) : wJ(r, e, u, t, n, a, i);
  if (!(1 & t)) {
    var d = l && b_.call(r, "__wrapped__"), v = c && b_.call(e, "__wrapped__");
    if (d || v) {
      var p = d ? r.value() : r, g = v ? e.value() : e;
      return i || (i = new Ys()), a(p, g, t, n, i);
    }
  }
  return !!h && (i || (i = new Ys()), MJ(r, e, t, n, a, i));
}, SO = function r(e, t, n, a, i) {
  return e === t || (e == null || t == null || !wa(e) && !wa(t) ? e != e && t != t : SJ(e, t, n, a, r, i));
}, AJ = function(r, e, t, n) {
  var a = t.length, i = a, o = !n;
  if (r == null)
    return !i;
  for (r = Object(r); a--; ) {
    var s = t[a];
    if (o && s[2] ? s[1] !== r[s[0]] : !(s[0] in r))
      return !1;
  }
  for (; ++a < i; ) {
    var u = (s = t[a])[0], f = r[u], l = s[1];
    if (o && s[2]) {
      if (f === void 0 && !(u in r))
        return !1;
    } else {
      var c = new Ys();
      if (n)
        var h = n(f, l, u, r, e, c);
      if (!(h === void 0 ? SO(l, f, 3, n, c) : h))
        return !1;
    }
  }
  return !0;
}, AO = function(r) {
  return r == r && !Nn(r);
}, CJ = function(r) {
  for (var e = lo(r), t = e.length; t--; ) {
    var n = e[t], a = r[n];
    e[t] = [n, a, AO(a)];
  }
  return e;
}, CO = function(r, e) {
  return function(t) {
    return t != null && t[r] === e && (e !== void 0 || r in Object(t));
  };
}, TJ = function(r) {
  var e = CJ(r);
  return e.length == 1 && e[0][2] ? CO(e[0][0], e[0][1]) : function(t) {
    return t === r || AJ(t, r, e);
  };
}, Zo = function(r) {
  return typeof r == "symbol" || wa(r) && fo(r) == "[object Symbol]";
}, IJ = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, OJ = /^\w*$/, Bm = function(r, e) {
  if (Fr(r))
    return !1;
  var t = typeof r;
  return !(t != "number" && t != "symbol" && t != "boolean" && r != null && !Zo(r)) || OJ.test(r) || !IJ.test(r) || e != null && r in Object(e);
};
function Fm(r, e) {
  if (typeof r != "function" || e != null && typeof e != "function")
    throw new TypeError("Expected a function");
  var t = function() {
    var n = arguments, a = e ? e.apply(this, n) : n[0], i = t.cache;
    if (i.has(a))
      return i.get(a);
    var o = r.apply(this, n);
    return t.cache = i.set(a, o) || i, o;
  };
  return t.cache = new (Fm.Cache || Gd)(), t;
}
Fm.Cache = Gd;
var DJ = Fm, LJ = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, NJ = /\\(\\)?/g, PJ = function(r) {
  var e = DJ(r, function(n) {
    return t.size === 500 && t.clear(), n;
  }), t = e.cache;
  return e;
}(function(r) {
  var e = [];
  return r.charCodeAt(0) === 46 && e.push(""), r.replace(LJ, function(t, n, a, i) {
    e.push(a ? i.replace(NJ, "$1") : n || t);
  }), e;
}), Ks = function(r, e) {
  for (var t = -1, n = r == null ? 0 : r.length, a = Array(n); ++t < n; )
    a[t] = e(r[t], t, r);
  return a;
}, E_ = sa ? sa.prototype : void 0, x_ = E_ ? E_.toString : void 0, kJ = function r(e) {
  if (typeof e == "string")
    return e;
  if (Fr(e))
    return Ks(e, r) + "";
  if (Zo(e))
    return x_ ? x_.call(e) : "";
  var t = e + "";
  return t == "0" && 1 / e == -1 / 0 ? "-0" : t;
}, TO = function(r) {
  return r == null ? "" : kJ(r);
}, Yd = function(r, e) {
  return Fr(r) ? r : Bm(r, e) ? [r] : PJ(TO(r));
}, cl = function(r) {
  if (typeof r == "string" || Zo(r))
    return r;
  var e = r + "";
  return e == "0" && 1 / r == -1 / 0 ? "-0" : e;
}, Hd = function(r, e) {
  for (var t = 0, n = (e = Yd(e, r)).length; r != null && t < n; )
    r = r[cl(e[t++])];
  return t && t == n ? r : void 0;
}, RJ = function(r, e, t) {
  var n = r == null ? void 0 : Hd(r, e);
  return n === void 0 ? t : n;
}, BJ = function(r, e) {
  return r != null && e in Object(r);
}, IO = function(r, e, t) {
  for (var n = -1, a = (e = Yd(e, r)).length, i = !1; ++n < a; ) {
    var o = cl(e[n]);
    if (!(i = r != null && t(r, o)))
      break;
    r = r[o];
  }
  return i || ++n != a ? i : !!(a = r == null ? 0 : r.length) && Tm(a) && jd(o, a) && (Fr(r) || lu(r));
}, OO = function(r, e) {
  return r != null && IO(r, e, BJ);
}, FJ = function(r, e) {
  return Bm(r) && AO(e) ? CO(cl(r), e) : function(t) {
    var n = RJ(t, r);
    return n === void 0 && n === e ? OO(t, r) : SO(e, n, 3);
  };
}, DO = function(r) {
  return function(e) {
    return e == null ? void 0 : e[r];
  };
}, GJ = function(r) {
  return function(e) {
    return Hd(e, r);
  };
}, zJ = function(r) {
  return Bm(r) ? DO(cl(r)) : GJ(r);
}, Oi = function(r) {
  return typeof r == "function" ? r : r == null ? ns : typeof r == "object" ? Fr(r) ? FJ(r[0], r[1]) : TJ(r) : zJ(r);
}, LO = function(r, e) {
  return (Fr(r) ? cO : yJ)(r, Oi(e));
}, UJ = Object.prototype.hasOwnProperty, jJ = function(r, e) {
  return r != null && UJ.call(r, e);
}, NO = function(r, e) {
  return r != null && IO(r, e, jJ);
}, $J = Object.prototype.hasOwnProperty, WJ = function(r) {
  if (r == null)
    return !0;
  if (Ii(r) && (Fr(r) || typeof r == "string" || typeof r.splice == "function" || Ko(r) || ll(r) || lu(r)))
    return !r.length;
  var e = qo(r);
  if (e == "[object Map]" || e == "[object Set]")
    return !r.size;
  if (Wd(r))
    return !Im(r).length;
  for (var t in r)
    if ($J.call(r, t))
      return !1;
  return !0;
}, PO = function(r) {
  return r === void 0;
}, kO = function(r, e) {
  var t = -1, n = Ii(r) ? Array(r.length) : [];
  return Vd(r, function(a, i, o) {
    n[++t] = e(a, i, o);
  }), n;
}, RO = function(r, e) {
  return (Fr(r) ? Ks : kO)(r, Oi(e));
}, XJ = function(r, e, t, n) {
  var a = -1, i = r == null ? 0 : r.length;
  for (n && i && (t = r[++a]); ++a < i; )
    t = e(t, r[a], a, r);
  return t;
}, VJ = function(r, e, t, n, a) {
  return a(r, function(i, o, s) {
    t = n ? (n = !1, i) : e(t, i, o, s);
  }), t;
}, BO = function(r, e, t) {
  var n = Fr(r) ? XJ : VJ, a = arguments.length < 3;
  return n(r, Oi(e), t, a, Vd);
}, YJ = function(r) {
  return typeof r == "string" || !Fr(r) && wa(r) && fo(r) == "[object String]";
}, HJ = DO("length"), KJ = RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"), qJ = function(r) {
  return KJ.test(r);
}, ZJ = "[\\ud800-\\udfff]", Dg = "[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]", Lg = "\\ud83c[\\udffb-\\udfff]", FO = "[^\\ud800-\\udfff]", GO = "(?:\\ud83c[\\udde6-\\uddff]){2}", zO = "[\\ud800-\\udbff][\\udc00-\\udfff]", w_ = "(?:" + Dg + "|" + Lg + ")?", QJ = "[\\ufe0e\\ufe0f]?" + w_ + ("(?:\\u200d(?:" + [FO, GO, zO].join("|") + ")[\\ufe0e\\ufe0f]?" + w_ + ")*"), JJ = "(?:" + [FO + Dg + "?", Dg, GO, zO, ZJ].join("|") + ")", __ = RegExp(Lg + "(?=" + Lg + ")|" + JJ + QJ, "g"), eee = function(r) {
  for (var e = __.lastIndex = 0; __.test(r); )
    ++e;
  return e;
}, tee = function(r) {
  return qJ(r) ? eee(r) : HJ(r);
}, ree = function(r) {
  if (r == null)
    return 0;
  if (Ii(r))
    return YJ(r) ? tee(r) : r.length;
  var e = qo(r);
  return e == "[object Map]" || e == "[object Set]" ? r.size : Im(r).length;
}, nee = function(r, e, t) {
  var n = Fr(r), a = n || Ko(r) || ll(r);
  if (e = Oi(e), t == null) {
    var i = r && r.constructor;
    t = a ? n ? new i() : [] : Nn(r) && ul(i) ? gO(Xd(r)) : {};
  }
  return (a ? Cm : km)(r, function(o, s, u) {
    return e(t, o, s, u);
  }), t;
}, M_ = sa ? sa.isConcatSpreadable : void 0, aee = function(r) {
  return Fr(r) || lu(r) || !!(M_ && r && r[M_]);
}, Gm = function r(e, t, n, a, i) {
  var o = -1, s = e.length;
  for (n || (n = aee), i || (i = []); ++o < s; ) {
    var u = e[o];
    t > 0 && n(u) ? t > 1 ? r(u, t - 1, n, a, i) : Dm(i, u) : a || (i[i.length] = u);
  }
  return i;
}, iee = function(r, e, t) {
  switch (t.length) {
    case 0:
      return r.call(e);
    case 1:
      return r.call(e, t[0]);
    case 2:
      return r.call(e, t[0], t[1]);
    case 3:
      return r.call(e, t[0], t[1], t[2]);
  }
  return r.apply(e, t);
}, S_ = Math.max, UO = function(r, e, t) {
  return e = S_(e === void 0 ? r.length - 1 : e, 0), function() {
    for (var n = arguments, a = -1, i = S_(n.length - e, 0), o = Array(i); ++a < i; )
      o[a] = n[e + a];
    a = -1;
    for (var s = Array(e + 1); ++a < e; )
      s[a] = n[a];
    return s[e] = t(o), iee(r, this, s);
  };
}, oee = $h ? function(r, e) {
  return $h(r, "toString", { configurable: !0, enumerable: !1, value: Nm(e), writable: !0 });
} : ns, see = Date.now, jO = /* @__PURE__ */ function(r) {
  var e = 0, t = 0;
  return function() {
    var n = see(), a = 16 - (n - t);
    if (t = n, a > 0) {
      if (++e >= 800)
        return arguments[0];
    } else
      e = 0;
    return r.apply(void 0, arguments);
  };
}(oee), Kd = function(r, e) {
  return jO(UO(r, e, ns), r + "");
}, $O = function(r, e, t, n) {
  for (var a = r.length, i = t + (n ? 1 : -1); n ? i-- : ++i < a; )
    if (e(r[i], i, r))
      return i;
  return -1;
}, uee = function(r) {
  return r != r;
}, fee = function(r, e, t) {
  for (var n = t - 1, a = r.length; ++n < a; )
    if (r[n] === e)
      return n;
  return -1;
}, lee = function(r, e, t) {
  return e == e ? fee(r, e, t) : $O(r, uee, t);
}, cee = function(r, e) {
  return !!(r != null && r.length) && lee(r, e, 0) > -1;
}, hee = function(r, e, t) {
  for (var n = -1, a = r == null ? 0 : r.length; ++n < a; )
    if (t(e, r[n]))
      return !0;
  return !1;
}, dee = function() {
}, vee = Hs && 1 / Rm(new Hs([, -0]))[1] == 1 / 0 ? function(r) {
  return new Hs(r);
} : dee, pee = function(r, e, t) {
  var n = -1, a = cee, i = r.length, o = !0, s = [], u = s;
  if (t)
    o = !1, a = hee;
  else if (i >= 200) {
    var f = e ? null : vee(r);
    if (f)
      return Rm(f);
    o = !1, a = _O, u = new wO();
  } else
    u = e ? [] : s;
  e:
    for (; ++n < i; ) {
      var l = r[n], c = e ? e(l) : l;
      if (l = t || l !== 0 ? l : 0, o && c == c) {
        for (var h = u.length; h--; )
          if (u[h] === c)
            continue e;
        e && u.push(c), s.push(l);
      } else
        a(u, c, t) || (u !== s && u.push(c), s.push(l));
    }
  return s;
}, WO = function(r) {
  return wa(r) && Ii(r);
}, gee = Kd(function(r) {
  return pee(Gm(r, 1, WO, !0));
}), yee = function(r, e) {
  return Ks(e, function(t) {
    return r[t];
  });
}, Xh, XO = function(r) {
  return r == null ? [] : yee(r, lo(r));
};
try {
  Xh = { clone: gJ, constant: Nm, each: xO, filter: LO, has: NO, isArray: Fr, isEmpty: WJ, isFunction: ul, isUndefined: PO, keys: lo, map: RO, reduce: BO, size: ree, transform: nee, union: gee, values: XO };
} catch {
}
Xh || (Xh = window._);
var st = Xh, zm = rr;
function rr(r) {
  this._isDirected = !st.has(r, "directed") || r.directed, this._isMultigraph = !!st.has(r, "multigraph") && r.multigraph, this._isCompound = !!st.has(r, "compound") && r.compound, this._label = void 0, this._defaultNodeLabelFn = st.constant(void 0), this._defaultEdgeLabelFn = st.constant(void 0), this._nodes = {}, this._isCompound && (this._parent = {}, this._children = {}, this._children["\0"] = {}), this._in = {}, this._preds = {}, this._out = {}, this._sucs = {}, this._edgeObjs = {}, this._edgeLabels = {};
}
function A_(r, e) {
  r[e] ? r[e]++ : r[e] = 1;
}
function C_(r, e) {
  --r[e] || delete r[e];
}
function hf(r, e, t, n) {
  var a = "" + e, i = "" + t;
  if (!r && a > i) {
    var o = a;
    a = i, i = o;
  }
  return a + "" + i + "" + (st.isUndefined(n) ? "\0" : n);
}
function mee(r, e, t, n) {
  var a = "" + e, i = "" + t;
  if (!r && a > i) {
    var o = a;
    a = i, i = o;
  }
  var s = { v: a, w: i };
  return n && (s.name = n), s;
}
function e0(r, e) {
  return hf(r, e.v, e.w, e.name);
}
rr.prototype._nodeCount = 0, rr.prototype._edgeCount = 0, rr.prototype.isDirected = function() {
  return this._isDirected;
}, rr.prototype.isMultigraph = function() {
  return this._isMultigraph;
}, rr.prototype.isCompound = function() {
  return this._isCompound;
}, rr.prototype.setGraph = function(r) {
  return this._label = r, this;
}, rr.prototype.graph = function() {
  return this._label;
}, rr.prototype.setDefaultNodeLabel = function(r) {
  return st.isFunction(r) || (r = st.constant(r)), this._defaultNodeLabelFn = r, this;
}, rr.prototype.nodeCount = function() {
  return this._nodeCount;
}, rr.prototype.nodes = function() {
  return st.keys(this._nodes);
}, rr.prototype.sources = function() {
  var r = this;
  return st.filter(this.nodes(), function(e) {
    return st.isEmpty(r._in[e]);
  });
}, rr.prototype.sinks = function() {
  var r = this;
  return st.filter(this.nodes(), function(e) {
    return st.isEmpty(r._out[e]);
  });
}, rr.prototype.setNodes = function(r, e) {
  var t = arguments, n = this;
  return st.each(r, function(a) {
    t.length > 1 ? n.setNode(a, e) : n.setNode(a);
  }), this;
}, rr.prototype.setNode = function(r, e) {
  return st.has(this._nodes, r) ? (arguments.length > 1 && (this._nodes[r] = e), this) : (this._nodes[r] = arguments.length > 1 ? e : this._defaultNodeLabelFn(r), this._isCompound && (this._parent[r] = "\0", this._children[r] = {}, this._children["\0"][r] = !0), this._in[r] = {}, this._preds[r] = {}, this._out[r] = {}, this._sucs[r] = {}, ++this._nodeCount, this);
}, rr.prototype.node = function(r) {
  return this._nodes[r];
}, rr.prototype.hasNode = function(r) {
  return st.has(this._nodes, r);
}, rr.prototype.removeNode = function(r) {
  var e = this;
  if (st.has(this._nodes, r)) {
    var t = function(n) {
      e.removeEdge(e._edgeObjs[n]);
    };
    delete this._nodes[r], this._isCompound && (this._removeFromParentsChildList(r), delete this._parent[r], st.each(this.children(r), function(n) {
      e.setParent(n);
    }), delete this._children[r]), st.each(st.keys(this._in[r]), t), delete this._in[r], delete this._preds[r], st.each(st.keys(this._out[r]), t), delete this._out[r], delete this._sucs[r], --this._nodeCount;
  }
  return this;
}, rr.prototype.setParent = function(r, e) {
  if (!this._isCompound)
    throw new Error("Cannot set parent in a non-compound graph");
  if (st.isUndefined(e))
    e = "\0";
  else {
    for (var t = e += ""; !st.isUndefined(t); t = this.parent(t))
      if (t === r)
        throw new Error("Setting " + e + " as parent of " + r + " would create a cycle");
    this.setNode(e);
  }
  return this.setNode(r), this._removeFromParentsChildList(r), this._parent[r] = e, this._children[e][r] = !0, this;
}, rr.prototype._removeFromParentsChildList = function(r) {
  delete this._children[this._parent[r]][r];
}, rr.prototype.parent = function(r) {
  if (this._isCompound) {
    var e = this._parent[r];
    if (e !== "\0")
      return e;
  }
}, rr.prototype.children = function(r) {
  if (st.isUndefined(r) && (r = "\0"), this._isCompound) {
    var e = this._children[r];
    if (e)
      return st.keys(e);
  } else {
    if (r === "\0")
      return this.nodes();
    if (this.hasNode(r))
      return [];
  }
}, rr.prototype.predecessors = function(r) {
  var e = this._preds[r];
  if (e)
    return st.keys(e);
}, rr.prototype.successors = function(r) {
  var e = this._sucs[r];
  if (e)
    return st.keys(e);
}, rr.prototype.neighbors = function(r) {
  var e = this.predecessors(r);
  if (e)
    return st.union(e, this.successors(r));
}, rr.prototype.isLeaf = function(r) {
  return (this.isDirected() ? this.successors(r) : this.neighbors(r)).length === 0;
}, rr.prototype.filterNodes = function(r) {
  var e = new this.constructor({ directed: this._isDirected, multigraph: this._isMultigraph, compound: this._isCompound });
  e.setGraph(this.graph());
  var t = this;
  st.each(this._nodes, function(i, o) {
    r(o) && e.setNode(o, i);
  }), st.each(this._edgeObjs, function(i) {
    e.hasNode(i.v) && e.hasNode(i.w) && e.setEdge(i, t.edge(i));
  });
  var n = {};
  function a(i) {
    var o = t.parent(i);
    return o === void 0 || e.hasNode(o) ? (n[i] = o, o) : o in n ? n[o] : a(o);
  }
  return this._isCompound && st.each(e.nodes(), function(i) {
    e.setParent(i, a(i));
  }), e;
}, rr.prototype.setDefaultEdgeLabel = function(r) {
  return st.isFunction(r) || (r = st.constant(r)), this._defaultEdgeLabelFn = r, this;
}, rr.prototype.edgeCount = function() {
  return this._edgeCount;
}, rr.prototype.edges = function() {
  return st.values(this._edgeObjs);
}, rr.prototype.setPath = function(r, e) {
  var t = this, n = arguments;
  return st.reduce(r, function(a, i) {
    return n.length > 1 ? t.setEdge(a, i, e) : t.setEdge(a, i), i;
  }), this;
}, rr.prototype.setEdge = function() {
  var r, e, t, n, a = !1, i = arguments[0];
  typeof i == "object" && i !== null && "v" in i ? (r = i.v, e = i.w, t = i.name, arguments.length === 2 && (n = arguments[1], a = !0)) : (r = i, e = arguments[1], t = arguments[3], arguments.length > 2 && (n = arguments[2], a = !0)), r = "" + r, e = "" + e, st.isUndefined(t) || (t = "" + t);
  var o = hf(this._isDirected, r, e, t);
  if (st.has(this._edgeLabels, o))
    return a && (this._edgeLabels[o] = n), this;
  if (!st.isUndefined(t) && !this._isMultigraph)
    throw new Error("Cannot set a named edge when isMultigraph = false");
  this.setNode(r), this.setNode(e), this._edgeLabels[o] = a ? n : this._defaultEdgeLabelFn(r, e, t);
  var s = mee(this._isDirected, r, e, t);
  return r = s.v, e = s.w, Object.freeze(s), this._edgeObjs[o] = s, A_(this._preds[e], r), A_(this._sucs[r], e), this._in[e][o] = s, this._out[r][o] = s, this._edgeCount++, this;
}, rr.prototype.edge = function(r, e, t) {
  var n = arguments.length === 1 ? e0(this._isDirected, arguments[0]) : hf(this._isDirected, r, e, t);
  return this._edgeLabels[n];
}, rr.prototype.hasEdge = function(r, e, t) {
  var n = arguments.length === 1 ? e0(this._isDirected, arguments[0]) : hf(this._isDirected, r, e, t);
  return st.has(this._edgeLabels, n);
}, rr.prototype.removeEdge = function(r, e, t) {
  var n = arguments.length === 1 ? e0(this._isDirected, arguments[0]) : hf(this._isDirected, r, e, t), a = this._edgeObjs[n];
  return a && (r = a.v, e = a.w, delete this._edgeLabels[n], delete this._edgeObjs[n], C_(this._preds[e], r), C_(this._sucs[r], e), delete this._in[e][n], delete this._out[r][n], this._edgeCount--), this;
}, rr.prototype.inEdges = function(r, e) {
  var t = this._in[r];
  if (t) {
    var n = st.values(t);
    return e ? st.filter(n, function(a) {
      return a.v === e;
    }) : n;
  }
}, rr.prototype.outEdges = function(r, e) {
  var t = this._out[r];
  if (t) {
    var n = st.values(t);
    return e ? st.filter(n, function(a) {
      return a.w === e;
    }) : n;
  }
}, rr.prototype.nodeEdges = function(r, e) {
  var t = this.inEdges(r, e);
  if (t)
    return t.concat(this.outEdges(r, e));
};
var T_ = { Graph: zm, version: "2.1.8" }, bee = { write: function(r) {
  var e = { options: { directed: r.isDirected(), multigraph: r.isMultigraph(), compound: r.isCompound() }, nodes: Eee(r), edges: xee(r) };
  return st.isUndefined(r.graph()) || (e.value = st.clone(r.graph())), e;
}, read: function(r) {
  var e = new zm(r.options).setGraph(r.value);
  return st.each(r.nodes, function(t) {
    e.setNode(t.v, t.value), t.parent && e.setParent(t.v, t.parent);
  }), st.each(r.edges, function(t) {
    e.setEdge({ v: t.v, w: t.w, name: t.name }, t.value);
  }), e;
} };
function Eee(r) {
  return st.map(r.nodes(), function(e) {
    var t = r.node(e), n = r.parent(e), a = { v: e };
    return st.isUndefined(t) || (a.value = t), st.isUndefined(n) || (a.parent = n), a;
  });
}
function xee(r) {
  return st.map(r.edges(), function(e) {
    var t = r.edge(e), n = { v: e.v, w: e.w };
    return st.isUndefined(e.name) || (n.name = e.name), st.isUndefined(t) || (n.value = t), n;
  });
}
var wee = function(r) {
  var e, t = {}, n = [];
  function a(i) {
    st.has(t, i) || (t[i] = !0, e.push(i), st.each(r.successors(i), a), st.each(r.predecessors(i), a));
  }
  return st.each(r.nodes(), function(i) {
    e = [], a(i), e.length && n.push(e);
  }), n;
}, VO = ra;
function ra() {
  this._arr = [], this._keyIndices = {};
}
ra.prototype.size = function() {
  return this._arr.length;
}, ra.prototype.keys = function() {
  return this._arr.map(function(r) {
    return r.key;
  });
}, ra.prototype.has = function(r) {
  return st.has(this._keyIndices, r);
}, ra.prototype.priority = function(r) {
  var e = this._keyIndices[r];
  if (e !== void 0)
    return this._arr[e].priority;
}, ra.prototype.min = function() {
  if (this.size() === 0)
    throw new Error("Queue underflow");
  return this._arr[0].key;
}, ra.prototype.add = function(r, e) {
  var t = this._keyIndices;
  if (r = String(r), !st.has(t, r)) {
    var n = this._arr, a = n.length;
    return t[r] = a, n.push({ key: r, priority: e }), this._decrease(a), !0;
  }
  return !1;
}, ra.prototype.removeMin = function() {
  this._swap(0, this._arr.length - 1);
  var r = this._arr.pop();
  return delete this._keyIndices[r.key], this._heapify(0), r.key;
}, ra.prototype.decrease = function(r, e) {
  var t = this._keyIndices[r];
  if (e > this._arr[t].priority)
    throw new Error("New priority is greater than current priority. Key: " + r + " Old: " + this._arr[t].priority + " New: " + e);
  this._arr[t].priority = e, this._decrease(t);
}, ra.prototype._heapify = function(r) {
  var e = this._arr, t = 2 * r, n = t + 1, a = r;
  t < e.length && (a = e[t].priority < e[a].priority ? t : a, n < e.length && (a = e[n].priority < e[a].priority ? n : a), a !== r && (this._swap(r, a), this._heapify(a)));
}, ra.prototype._decrease = function(r) {
  for (var e, t = this._arr, n = t[r].priority; r !== 0 && !(t[e = r >> 1].priority < n); )
    this._swap(r, e), r = e;
}, ra.prototype._swap = function(r, e) {
  var t = this._arr, n = this._keyIndices, a = t[r], i = t[e];
  t[r] = i, t[e] = a, n[i.key] = r, n[a.key] = e;
};
var YO = function(r, e, t, n) {
  return function(a, i, o, s) {
    var u, f, l = {}, c = new VO(), h = function(d) {
      var v = d.v !== u ? d.v : d.w, p = l[v], g = o(d), y = f.distance + g;
      if (g < 0)
        throw new Error("dijkstra does not allow negative edge weights. Bad edge: " + d + " Weight: " + g);
      y < p.distance && (p.distance = y, p.predecessor = u, c.decrease(v, y));
    };
    for (a.nodes().forEach(function(d) {
      var v = d === i ? 0 : Number.POSITIVE_INFINITY;
      l[d] = { distance: v }, c.add(d, v);
    }); c.size() > 0 && (u = c.removeMin(), (f = l[u]).distance !== Number.POSITIVE_INFINITY); )
      s(u).forEach(h);
    return l;
  }(r, String(e), t || _ee, n || function(a) {
    return r.outEdges(a);
  });
}, _ee = st.constant(1), Mee = function(r, e, t) {
  return st.transform(r.nodes(), function(n, a) {
    n[a] = YO(r, a, e, t);
  }, {});
}, HO = function(r) {
  var e = 0, t = [], n = {}, a = [];
  function i(o) {
    var s = n[o] = { onStack: !0, lowlink: e, index: e++ };
    if (t.push(o), r.successors(o).forEach(function(l) {
      st.has(n, l) ? n[l].onStack && (s.lowlink = Math.min(s.lowlink, n[l].index)) : (i(l), s.lowlink = Math.min(s.lowlink, n[l].lowlink));
    }), s.lowlink === s.index) {
      var u, f = [];
      do
        u = t.pop(), n[u].onStack = !1, f.push(u);
      while (o !== u);
      a.push(f);
    }
  }
  return r.nodes().forEach(function(o) {
    st.has(n, o) || i(o);
  }), a;
}, See = function(r) {
  return st.filter(HO(r), function(e) {
    return e.length > 1 || e.length === 1 && r.hasEdge(e[0], e[0]);
  });
}, Aee = function(r, e, t) {
  return function(n, a, i) {
    var o = {}, s = n.nodes();
    return s.forEach(function(u) {
      o[u] = {}, o[u][u] = { distance: 0 }, s.forEach(function(f) {
        u !== f && (o[u][f] = { distance: Number.POSITIVE_INFINITY });
      }), i(u).forEach(function(f) {
        var l = f.v === u ? f.w : f.v, c = a(f);
        o[u][l] = { distance: c, predecessor: u };
      });
    }), s.forEach(function(u) {
      var f = o[u];
      s.forEach(function(l) {
        var c = o[l];
        s.forEach(function(h) {
          var d = c[u], v = f[h], p = c[h], g = d.distance + v.distance;
          g < p.distance && (p.distance = g, p.predecessor = v.predecessor);
        });
      });
    }), o;
  }(r, e || Cee, t || function(n) {
    return r.outEdges(n);
  });
}, Cee = st.constant(1), t0 = KO;
function KO(r) {
  var e = {}, t = {}, n = [];
  if (st.each(r.sinks(), function a(i) {
    if (st.has(t, i))
      throw new Vh();
    st.has(e, i) || (t[i] = !0, e[i] = !0, st.each(r.predecessors(i), a), delete t[i], n.push(i));
  }), st.size(e) !== r.nodeCount())
    throw new Vh();
  return n;
}
function Vh() {
}
KO.CycleException = Vh, Vh.prototype = new Error();
var I_ = function(r, e, t) {
  st.isArray(e) || (e = [e]);
  var n = (r.isDirected() ? r.successors : r.neighbors).bind(r), a = [], i = {};
  return st.each(e, function(o) {
    if (!r.hasNode(o))
      throw new Error("Graph does not have node: " + o);
    qO(r, o, t === "post", i, n, a);
  }), a;
};
function qO(r, e, t, n, a, i) {
  st.has(n, e) || (n[e] = !0, t || i.push(e), st.each(a(e), function(o) {
    qO(r, o, t, n, a, i);
  }), t && i.push(e));
}
var Yh, Tee = { Graph: T_.Graph, json: bee, alg: { components: wee, dijkstra: YO, dijkstraAll: Mee, findCycles: See, floydWarshall: Aee, isAcyclic: function(r) {
  try {
    t0(r);
  } catch (e) {
    if (e instanceof t0.CycleException)
      return !1;
    throw e;
  }
  return !0;
}, postorder: function(r, e) {
  return I_(r, e, "post");
}, preorder: function(r, e) {
  return I_(r, e, "pre");
}, prim: function(r, e) {
  var t, n = new zm(), a = {}, i = new VO();
  function o(u) {
    var f = u.v === t ? u.w : u.v, l = i.priority(f);
    if (l !== void 0) {
      var c = e(u);
      c < l && (a[f] = t, i.decrease(f, c));
    }
  }
  if (r.nodeCount() === 0)
    return n;
  st.each(r.nodes(), function(u) {
    i.add(u, Number.POSITIVE_INFINITY), n.setNode(u);
  }), i.decrease(r.nodes()[0], 0);
  for (var s = !1; i.size() > 0; ) {
    if (t = i.removeMin(), st.has(a, t))
      n.setEdge(t, a[t]);
    else {
      if (s)
        throw new Error("Input graph is not connected: " + r);
      s = !0;
    }
    r.nodeEdges(t).forEach(o);
  }
  return n;
}, tarjan: HO, topsort: t0 }, version: T_.version };
try {
  Yh = Tee;
} catch {
}
Yh || (Yh = window.graphlib);
var Aa = Yh, Iee = function(r) {
  return mO(r, 5);
}, jf = function(r, e, t) {
  if (!Nn(t))
    return !1;
  var n = typeof e;
  return !!(n == "number" ? Ii(t) && jd(e, t.length) : n == "string" && e in t) && Eu(t[e], r);
}, ZO = Object.prototype, Oee = ZO.hasOwnProperty, Dee = Kd(function(r, e) {
  r = Object(r);
  var t = -1, n = e.length, a = n > 2 ? e[2] : void 0;
  for (a && jf(e[0], e[1], a) && (n = 1); ++t < n; )
    for (var i = e[t], o = rs(i), s = -1, u = o.length; ++s < u; ) {
      var f = o[s], l = r[f];
      (l === void 0 || Eu(l, ZO[f]) && !Oee.call(r, f)) && (r[f] = i[f]);
    }
  return r;
}), Lee = function(r) {
  return function(e, t, n) {
    var a = Object(e);
    if (!Ii(e)) {
      var i = Oi(t);
      e = lo(e), t = function(s) {
        return i(a[s], s, a);
      };
    }
    var o = r(e, t, n);
    return o > -1 ? a[i ? e[o] : o] : void 0;
  };
}, Nee = /^\s+|\s+$/g, Pee = /^[-+]0x[0-9a-f]+$/i, kee = /^0b[01]+$/i, Ree = /^0o[0-7]+$/i, Bee = parseInt, Fee = function(r) {
  if (typeof r == "number")
    return r;
  if (Zo(r))
    return NaN;
  if (Nn(r)) {
    var e = typeof r.valueOf == "function" ? r.valueOf() : r;
    r = Nn(e) ? e + "" : e;
  }
  if (typeof r != "string")
    return r === 0 ? r : +r;
  r = r.replace(Nee, "");
  var t = kee.test(r);
  return t || Ree.test(r) ? Bee(r.slice(2), t ? 2 : 8) : Pee.test(r) ? NaN : +r;
}, oh = function(r) {
  return r ? (r = Fee(r)) === 1 / 0 || r === -1 / 0 ? 17976931348623157e292 * (r < 0 ? -1 : 1) : r == r ? r : 0 : r === 0 ? r : 0;
}, Gee = function(r) {
  var e = oh(r), t = e % 1;
  return e == e ? t ? e - t : e : 0;
}, zee = Math.max, Uee = Lee(function(r, e, t) {
  var n = r == null ? 0 : r.length;
  if (!n)
    return -1;
  var a = t == null ? 0 : Gee(t);
  return a < 0 && (a = zee(n + a, 0)), $O(r, Oi(e), a);
}), QO = function(r) {
  return r != null && r.length ? Gm(r, 1) : [];
}, jee = function(r, e) {
  return r == null ? r : Pm(r, bO(e), rs);
}, $ee = function(r) {
  var e = r == null ? 0 : r.length;
  return e ? r[e - 1] : void 0;
}, Wee = function(r, e) {
  var t = {};
  return e = Oi(e), km(r, function(n, a, i) {
    zd(t, a, e(n, a, i));
  }), t;
}, Um = function(r, e, t) {
  for (var n = -1, a = r.length; ++n < a; ) {
    var i = r[n], o = e(i);
    if (o != null && (s === void 0 ? o == o && !Zo(o) : t(o, s)))
      var s = o, u = i;
  }
  return u;
}, Xee = function(r, e) {
  return r > e;
}, Vee = function(r) {
  return r && r.length ? Um(r, ns, Xee) : void 0;
}, Ng = function(r, e, t) {
  (t !== void 0 && !Eu(r[e], t) || t === void 0 && !(e in r)) && zd(r, e, t);
}, Yee = Function.prototype, Hee = Object.prototype, JO = Yee.toString, Kee = Hee.hasOwnProperty, qee = JO.call(Object), Zee = function(r) {
  if (!wa(r) || fo(r) != "[object Object]")
    return !1;
  var e = Xd(r);
  if (e === null)
    return !0;
  var t = Kee.call(e, "constructor") && e.constructor;
  return typeof t == "function" && t instanceof t && JO.call(t) == qee;
}, Pg = function(r, e) {
  if ((e !== "constructor" || typeof r[e] != "function") && e != "__proto__")
    return r[e];
}, Qee = function(r) {
  return fl(r, rs(r));
}, Jee = function(r, e, t, n, a, i, o) {
  var s = Pg(r, t), u = Pg(e, t), f = o.get(u);
  if (f)
    Ng(r, t, f);
  else {
    var l = i ? i(s, u, t + "", r, e, o) : void 0, c = l === void 0;
    if (c) {
      var h = Fr(u), d = !h && Ko(u), v = !h && !d && ll(u);
      l = u, h || d || v ? Fr(s) ? l = s : WO(s) ? l = lO(s) : d ? (c = !1, l = fO(u, !0)) : v ? (c = !1, l = pO(u, !0)) : l = [] : Zee(u) || lu(u) ? (l = s, lu(s) ? l = Qee(s) : Nn(s) && !ul(s) || (l = yO(u))) : c = !1;
    }
    c && (o.set(u, l), a(l, u, n, i, o), o.delete(u)), Ng(r, t, l);
  }
}, ete = function r(e, t, n, a, i) {
  e !== t && Pm(t, function(o, s) {
    if (i || (i = new Ys()), Nn(o))
      Jee(e, t, s, n, r, a, i);
    else {
      var u = a ? a(Pg(e, s), o, s + "", e, t, i) : void 0;
      u === void 0 && (u = o), Ng(e, s, u);
    }
  }, rs);
}, tte = function(r) {
  return Kd(function(e, t) {
    var n = -1, a = t.length, i = a > 1 ? t[a - 1] : void 0, o = a > 2 ? t[2] : void 0;
    for (i = r.length > 3 && typeof i == "function" ? (a--, i) : void 0, o && jf(t[0], t[1], o) && (i = a < 3 ? void 0 : i, a = 1), e = Object(e); ++n < a; ) {
      var s = t[n];
      s && r(e, s, n, i);
    }
    return e;
  });
}(function(r, e, t) {
  ete(r, e, t);
}), eD = function(r, e) {
  return r < e;
}, rte = function(r) {
  return r && r.length ? Um(r, ns, eD) : void 0;
}, nte = function(r, e) {
  return r && r.length ? Um(r, Oi(e), eD) : void 0;
}, ate = function() {
  return Sa.Date.now();
}, ite = function(r, e, t, n) {
  if (!Nn(r))
    return r;
  for (var a = -1, i = (e = Yd(e, r)).length, o = i - 1, s = r; s != null && ++a < i; ) {
    var u = cl(e[a]), f = t;
    if (u === "__proto__" || u === "constructor" || u === "prototype")
      return r;
    if (a != o) {
      var l = s[u];
      (f = n ? n(l, u, s) : void 0) === void 0 && (f = Nn(l) ? l : jd(e[a + 1]) ? [] : {});
    }
    Ud(s, u, f), s = s[u];
  }
  return r;
}, ote = function(r, e, t) {
  for (var n = -1, a = e.length, i = {}; ++n < a; ) {
    var o = e[n], s = Hd(r, o);
    t(s, o) && ite(i, Yd(o, r), s);
  }
  return i;
}, ste = function(r, e) {
  return ote(r, e, function(t, n) {
    return OO(r, n);
  });
}, ute = function(r) {
  return jO(UO(r, void 0, QO), r + "");
}(function(r, e) {
  return r == null ? {} : ste(r, e);
}), fte = Math.ceil, lte = Math.max, cte = function(r, e, t, n) {
  for (var a = -1, i = lte(fte((e - r) / (t || 1)), 0), o = Array(i); i--; )
    o[n ? i : ++a] = r, r += t;
  return o;
}, hte = /* @__PURE__ */ function(r) {
  return function(e, t, n) {
    return n && typeof n != "number" && jf(e, t, n) && (t = n = void 0), e = oh(e), t === void 0 ? (t = e, e = 0) : t = oh(t), n = n === void 0 ? e < t ? 1 : -1 : oh(n), cte(e, t, n, r);
  };
}(), dte = function(r, e) {
  var t = r.length;
  for (r.sort(e); t--; )
    r[t] = r[t].value;
  return r;
}, vte = function(r, e) {
  if (r !== e) {
    var t = r !== void 0, n = r === null, a = r == r, i = Zo(r), o = e !== void 0, s = e === null, u = e == e, f = Zo(e);
    if (!s && !f && !i && r > e || i && o && u && !s && !f || n && o && u || !t && u || !a)
      return 1;
    if (!n && !i && !f && r < e || f && t && a && !n && !i || s && t && a || !o && a || !u)
      return -1;
  }
  return 0;
}, pte = function(r, e, t) {
  for (var n = -1, a = r.criteria, i = e.criteria, o = a.length, s = t.length; ++n < o; ) {
    var u = vte(a[n], i[n]);
    if (u)
      return n >= s ? u : u * (t[n] == "desc" ? -1 : 1);
  }
  return r.index - e.index;
}, gte = function(r, e, t) {
  e = e.length ? Ks(e, function(i) {
    return Fr(i) ? function(o) {
      return Hd(o, i.length === 1 ? i[0] : i);
    } : i;
  }) : [ns];
  var n = -1;
  e = Ks(e, $d(Oi));
  var a = kO(r, function(i, o, s) {
    return { criteria: Ks(e, function(u) {
      return u(i);
    }), index: ++n, value: i };
  });
  return dte(a, function(i, o) {
    return pte(i, o, t);
  });
}, yte = Kd(function(r, e) {
  if (r == null)
    return [];
  var t = e.length;
  return t > 1 && jf(r, e[0], e[1]) ? e = [] : t > 2 && jf(e[0], e[1], e[2]) && (e = [e[0]]), gte(r, Gm(e, 1), []);
}), mte = 0, bte = function(r) {
  var e = ++mte;
  return TO(r) + e;
}, Ete = function(r, e, t) {
  for (var n = -1, a = r.length, i = e.length, o = {}; ++n < a; ) {
    var s = n < i ? e[n] : void 0;
    t(o, r[n], s);
  }
  return o;
}, Hh, xte = function(r, e) {
  return Ete(r || [], e || [], Ud);
};
try {
  Hh = { cloneDeep: Iee, constant: Nm, defaults: Dee, each: xO, filter: LO, find: Uee, flatten: QO, forEach: EO, forIn: jee, has: NO, isUndefined: PO, last: $ee, map: RO, mapValues: Wee, max: Vee, merge: tte, min: rte, minBy: nte, now: ate, pick: ute, range: hte, reduce: BO, sortBy: yte, uniqueId: bte, values: XO, zipObject: xte };
} catch {
}
Hh || (Hh = window._);
var K = Hh, wte = sh;
function sh() {
  var r = {};
  r._next = r._prev = r, this._sentinel = r;
}
function O_(r) {
  r._prev._next = r._next, r._next._prev = r._prev, delete r._next, delete r._prev;
}
function _te(r, e) {
  if (r !== "_next" && r !== "_prev")
    return e;
}
sh.prototype.dequeue = function() {
  var r = this._sentinel, e = r._prev;
  if (e !== r)
    return O_(e), e;
}, sh.prototype.enqueue = function(r) {
  var e = this._sentinel;
  r._prev && r._next && O_(r), r._next = e._next, e._next._prev = r, e._next = r, r._prev = e;
}, sh.prototype.toString = function() {
  for (var r = [], e = this._sentinel, t = e._prev; t !== e; )
    r.push(JSON.stringify(t, _te)), t = t._prev;
  return "[" + r.join(", ") + "]";
};
var Mte = Aa.Graph, Ste = function(r, e) {
  if (r.nodeCount() <= 1)
    return [];
  var t = function(a, i) {
    var o = new Mte(), s = 0, u = 0;
    K.forEach(a.nodes(), function(c) {
      o.setNode(c, { v: c, in: 0, out: 0 });
    }), K.forEach(a.edges(), function(c) {
      var h = o.edge(c.v, c.w) || 0, d = i(c), v = h + d;
      o.setEdge(c.v, c.w, v), u = Math.max(u, o.node(c.v).out += d), s = Math.max(s, o.node(c.w).in += d);
    });
    var f = K.range(u + s + 3).map(function() {
      return new wte();
    }), l = s + 1;
    return K.forEach(o.nodes(), function(c) {
      kg(f, l, o.node(c));
    }), { graph: o, buckets: f, zeroIdx: l };
  }(r, e || Ate), n = function(a, i, o) {
    for (var s, u = [], f = i[i.length - 1], l = i[0]; a.nodeCount(); ) {
      for (; s = l.dequeue(); )
        r0(a, i, o, s);
      for (; s = f.dequeue(); )
        r0(a, i, o, s);
      if (a.nodeCount()) {
        for (var c = i.length - 2; c > 0; --c)
          if (s = i[c].dequeue()) {
            u = u.concat(r0(a, i, o, s, !0));
            break;
          }
      }
    }
    return u;
  }(t.graph, t.buckets, t.zeroIdx);
  return K.flatten(K.map(n, function(a) {
    return r.outEdges(a.v, a.w);
  }), !0);
}, Ate = K.constant(1);
function r0(r, e, t, n, a) {
  var i = a ? [] : void 0;
  return K.forEach(r.inEdges(n.v), function(o) {
    var s = r.edge(o), u = r.node(o.v);
    a && i.push({ v: o.v, w: o.w }), u.out -= s, kg(e, t, u);
  }), K.forEach(r.outEdges(n.v), function(o) {
    var s = r.edge(o), u = o.w, f = r.node(u);
    f.in -= s, kg(e, t, f);
  }), r.removeNode(n.v), i;
}
function kg(r, e, t) {
  t.out ? t.in ? r[t.out - t.in + e].enqueue(t) : r[r.length - 1].enqueue(t) : r[0].enqueue(t);
}
var D_ = { run: function(r) {
  var e = r.graph().acyclicer === "greedy" ? Ste(r, /* @__PURE__ */ function(t) {
    return function(n) {
      return t.edge(n).weight;
    };
  }(r)) : function(t) {
    var n = [], a = {}, i = {};
    function o(s) {
      K.has(i, s) || (i[s] = !0, a[s] = !0, K.forEach(t.outEdges(s), function(u) {
        K.has(a, u.w) ? n.push(u) : o(u.w);
      }), delete a[s]);
    }
    return K.forEach(t.nodes(), o), n;
  }(r);
  K.forEach(e, function(t) {
    var n = r.edge(t);
    r.removeEdge(t), n.forwardName = t.name, n.reversed = !0, r.setEdge(t.w, t.v, n, K.uniqueId("rev"));
  });
}, undo: function(r) {
  K.forEach(r.edges(), function(e) {
    var t = r.edge(e);
    if (t.reversed) {
      r.removeEdge(e);
      var n = t.forwardName;
      delete t.reversed, delete t.forwardName, r.setEdge(e.w, e.v, t, n);
    }
  });
} }, L_ = Aa.Graph, vn = { addDummyNode: N_, simplify: function(r) {
  var e = new L_().setGraph(r.graph());
  return K.forEach(r.nodes(), function(t) {
    e.setNode(t, r.node(t));
  }), K.forEach(r.edges(), function(t) {
    var n = e.edge(t.v, t.w) || { weight: 0, minlen: 1 }, a = r.edge(t);
    e.setEdge(t.v, t.w, { weight: n.weight + a.weight, minlen: Math.max(n.minlen, a.minlen) });
  }), e;
}, asNonCompoundGraph: function(r) {
  var e = new L_({ multigraph: r.isMultigraph() }).setGraph(r.graph());
  return K.forEach(r.nodes(), function(t) {
    r.children(t).length || e.setNode(t, r.node(t));
  }), K.forEach(r.edges(), function(t) {
    e.setEdge(t, r.edge(t));
  }), e;
}, successorWeights: function(r) {
  var e = K.map(r.nodes(), function(t) {
    var n = {};
    return K.forEach(r.outEdges(t), function(a) {
      n[a.w] = (n[a.w] || 0) + r.edge(a).weight;
    }), n;
  });
  return K.zipObject(r.nodes(), e);
}, predecessorWeights: function(r) {
  var e = K.map(r.nodes(), function(t) {
    var n = {};
    return K.forEach(r.inEdges(t), function(a) {
      n[a.v] = (n[a.v] || 0) + r.edge(a).weight;
    }), n;
  });
  return K.zipObject(r.nodes(), e);
}, intersectRect: function(r, e) {
  var t, n, a = r.x, i = r.y, o = e.x - a, s = e.y - i, u = r.width / 2, f = r.height / 2;
  if (!o && !s)
    throw new Error("Not possible to find intersection inside of the rectangle");
  return Math.abs(s) * u > Math.abs(o) * f ? (s < 0 && (f = -f), t = f * o / s, n = f) : (o < 0 && (u = -u), t = u, n = u * s / o), { x: a + t, y: i + n };
}, buildLayerMatrix: function(r) {
  var e = K.map(K.range(P_(r) + 1), function() {
    return [];
  });
  return K.forEach(r.nodes(), function(t) {
    var n = r.node(t), a = n.rank;
    K.isUndefined(a) || (e[a][n.order] = t);
  }), e;
}, normalizeRanks: function(r) {
  var e = K.min(K.map(r.nodes(), function(t) {
    return r.node(t).rank;
  }));
  K.forEach(r.nodes(), function(t) {
    var n = r.node(t);
    K.has(n, "rank") && (n.rank -= e);
  });
}, removeEmptyRanks: function(r) {
  var e = K.min(K.map(r.nodes(), function(i) {
    return r.node(i).rank;
  })), t = [];
  K.forEach(r.nodes(), function(i) {
    var o = r.node(i).rank - e;
    t[o] || (t[o] = []), t[o].push(i);
  });
  var n = 0, a = r.graph().nodeRankFactor;
  K.forEach(t, function(i, o) {
    K.isUndefined(i) && o % a != 0 ? --n : n && K.forEach(i, function(s) {
      r.node(s).rank += n;
    });
  });
}, addBorderNode: function(r, e, t, n) {
  var a = { width: 0, height: 0 };
  return arguments.length >= 4 && (a.rank = t, a.order = n), N_(r, "border", a, e);
}, maxRank: P_, partition: function(r, e) {
  var t = { lhs: [], rhs: [] };
  return K.forEach(r, function(n) {
    e(n) ? t.lhs.push(n) : t.rhs.push(n);
  }), t;
}, time: function(r, e) {
  var t = K.now();
  try {
    return e();
  } finally {
    console.log(r + " time: " + (K.now() - t) + "ms");
  }
}, notime: function(r, e) {
  return e();
} };
function N_(r, e, t, n) {
  var a;
  do
    a = K.uniqueId(n);
  while (r.hasNode(a));
  return t.dummy = e, r.setNode(a, t), a;
}
function P_(r) {
  return K.max(K.map(r.nodes(), function(e) {
    var t = r.node(e).rank;
    if (!K.isUndefined(t))
      return t;
  }));
}
var k_ = { run: function(r) {
  r.graph().dummyChains = [], K.forEach(r.edges(), function(e) {
    (function(t, n) {
      var a, i, o, s = n.v, u = t.node(s).rank, f = n.w, l = t.node(f).rank, c = n.name, h = t.edge(n), d = h.labelRank;
      if (l !== u + 1) {
        for (t.removeEdge(n), o = 0, ++u; u < l; ++o, ++u)
          h.points = [], i = { width: 0, height: 0, edgeLabel: h, edgeObj: n, rank: u }, a = vn.addDummyNode(t, "edge", i, "_d"), u === d && (i.width = h.width, i.height = h.height, i.dummy = "edge-label", i.labelpos = h.labelpos), t.setEdge(s, a, { weight: h.weight }, c), o === 0 && t.graph().dummyChains.push(a), s = a;
        t.setEdge(s, f, { weight: h.weight }, c);
      }
    })(r, e);
  });
}, undo: function(r) {
  K.forEach(r.graph().dummyChains, function(e) {
    var t, n = r.node(e), a = n.edgeLabel;
    for (r.setEdge(n.edgeObj, a); n.dummy; )
      t = r.successors(e)[0], r.removeNode(e), a.points.push({ x: n.x, y: n.y }), n.dummy === "edge-label" && (a.x = n.x, a.y = n.y, a.width = n.width, a.height = n.height), e = t, n = r.node(e);
  });
} }, tD = function(r) {
  var e = {};
  K.forEach(r.sources(), function t(n) {
    var a = r.node(n);
    if (K.has(e, n))
      return a.rank;
    e[n] = !0;
    var i = K.min(K.map(r.outEdges(n), function(o) {
      return t(o.w) - r.edge(o).minlen;
    }));
    return i !== Number.POSITIVE_INFINITY && i != null || (i = 0), a.rank = i;
  });
}, rD = function(r, e) {
  return r.node(e.w).rank - r.node(e.v).rank - r.edge(e).minlen;
}, Cte = Aa.Graph, Kh = rD, nD = function(r) {
  var e, t, n = new Cte({ directed: !1 }), a = r.nodes()[0], i = r.nodeCount();
  for (n.setNode(a, {}); Tte(n, r) < i; )
    e = Ite(n, r), t = n.hasNode(e.v) ? Kh(r, e) : -Kh(r, e), Ote(n, r, t);
  return n;
};
function Tte(r, e) {
  return K.forEach(r.nodes(), function t(n) {
    K.forEach(e.nodeEdges(n), function(a) {
      var i = a.v, o = n === i ? a.w : i;
      r.hasNode(o) || Kh(e, a) || (r.setNode(o, {}), r.setEdge(n, o, {}), t(o));
    });
  }), r.nodeCount();
}
function Ite(r, e) {
  return K.minBy(e.edges(), function(t) {
    if (r.hasNode(t.v) !== r.hasNode(t.w))
      return Kh(e, t);
  });
}
function Ote(r, e, t) {
  K.forEach(r.nodes(), function(n) {
    e.node(n).rank += t;
  });
}
var Dte = rD, Lte = tD, Nte = Aa.alg.preorder, Pte = Aa.alg.postorder, kte = vn.simplify, Rte = Ro;
function Ro(r) {
  r = kte(r), Lte(r);
  var e, t = nD(r);
  for ($m(t), jm(t, r); e = oD(t); )
    uD(t, r, e, sD(t, r, e));
}
function jm(r, e) {
  var t = Pte(r, r.nodes());
  t = t.slice(0, t.length - 1), K.forEach(t, function(n) {
    (function(a, i, o) {
      var s = a.node(o).parent;
      a.edge(o, s).cutvalue = aD(a, i, o);
    })(r, e, n);
  });
}
function aD(r, e, t) {
  var n = r.node(t).parent, a = !0, i = e.edge(t, n), o = 0;
  return i || (a = !1, i = e.edge(n, t)), o = i.weight, K.forEach(e.nodeEdges(t), function(s) {
    var u, f, l = s.v === t, c = l ? s.w : s.v;
    if (c !== n) {
      var h = l === a, d = e.edge(s).weight;
      if (o += h ? d : -d, u = t, f = c, r.hasEdge(u, f)) {
        var v = r.edge(t, c).cutvalue;
        o += h ? -v : v;
      }
    }
  }), o;
}
function $m(r, e) {
  arguments.length < 2 && (e = r.nodes()[0]), iD(r, {}, 1, e);
}
function iD(r, e, t, n, a) {
  var i = t, o = r.node(n);
  return e[n] = !0, K.forEach(r.neighbors(n), function(s) {
    K.has(e, s) || (t = iD(r, e, t, s, n));
  }), o.low = i, o.lim = t++, a ? o.parent = a : delete o.parent, t;
}
function oD(r) {
  return K.find(r.edges(), function(e) {
    return r.edge(e).cutvalue < 0;
  });
}
function sD(r, e, t) {
  var n = t.v, a = t.w;
  e.hasEdge(n, a) || (n = t.w, a = t.v);
  var i = r.node(n), o = r.node(a), s = i, u = !1;
  i.lim > o.lim && (s = o, u = !0);
  var f = K.filter(e.edges(), function(l) {
    return u === R_(r, r.node(l.v), s) && u !== R_(r, r.node(l.w), s);
  });
  return K.minBy(f, function(l) {
    return Dte(e, l);
  });
}
function uD(r, e, t, n) {
  var a = t.v, i = t.w;
  r.removeEdge(a, i), r.setEdge(n.v, n.w, {}), $m(r), jm(r, e), function(o, s) {
    var u = K.find(o.nodes(), function(l) {
      return !s.node(l).parent;
    }), f = Nte(o, u);
    f = f.slice(1), K.forEach(f, function(l) {
      var c = o.node(l).parent, h = s.edge(l, c), d = !1;
      h || (h = s.edge(c, l), d = !0), s.node(l).rank = s.node(c).rank + (d ? h.minlen : -h.minlen);
    });
  }(r, e);
}
function R_(r, e, t) {
  return t.low <= e.lim && e.lim <= t.lim;
}
Ro.initLowLimValues = $m, Ro.initCutValues = jm, Ro.calcCutValue = aD, Ro.leaveEdge = oD, Ro.enterEdge = sD, Ro.exchangeEdges = uD;
var fD = tD, Bte = function(r) {
  switch (r.graph().ranker) {
    case "network-simplex":
      B_(r);
      break;
    case "tight-tree":
      (function(e) {
        fD(e), nD(e);
      })(r);
      break;
    case "longest-path":
      Fte(r);
      break;
    default:
      B_(r);
  }
}, Fte = fD;
function B_(r) {
  Rte(r);
}
var Gte = function(r) {
  var e = function(t) {
    var n = {}, a = 0;
    function i(o) {
      var s = a;
      K.forEach(t.children(o), i), n[o] = { low: s, lim: a++ };
    }
    return K.forEach(t.children(), i), n;
  }(r);
  K.forEach(r.graph().dummyChains, function(t) {
    for (var n = r.node(t), a = n.edgeObj, i = function(c, h, d, v) {
      var p, g, y = [], m = [], b = Math.min(h[d].low, h[v].low), E = Math.max(h[d].lim, h[v].lim);
      p = d;
      do
        p = c.parent(p), y.push(p);
      while (p && (h[p].low > b || E > h[p].lim));
      for (g = p, p = v; (p = c.parent(p)) !== g; )
        m.push(p);
      return { path: y.concat(m.reverse()), lca: g };
    }(r, e, a.v, a.w), o = i.path, s = i.lca, u = 0, f = o[u], l = !0; t !== a.w; ) {
      if (n = r.node(t), l) {
        for (; (f = o[u]) !== s && r.node(f).maxRank < n.rank; )
          u++;
        f === s && (l = !1);
      }
      if (!l) {
        for (; u < o.length - 1 && r.node(f = o[u + 1]).minRank <= n.rank; )
          u++;
        f = o[u];
      }
      r.setParent(t, f), t = r.successors(t)[0];
    }
  });
}, F_ = { run: function(r) {
  var e = vn.addDummyNode(r, "root", {}, "_root"), t = function(o) {
    var s = {};
    function u(f, l) {
      var c = o.children(f);
      c && c.length && K.forEach(c, function(h) {
        u(h, l + 1);
      }), s[f] = l;
    }
    return K.forEach(o.children(), function(f) {
      u(f, 1);
    }), s;
  }(r), n = K.max(K.values(t)) - 1, a = 2 * n + 1;
  r.graph().nestingRoot = e, K.forEach(r.edges(), function(o) {
    r.edge(o).minlen *= a;
  });
  var i = function(o) {
    return K.reduce(o.edges(), function(s, u) {
      return s + o.edge(u).weight;
    }, 0);
  }(r) + 1;
  K.forEach(r.children(), function(o) {
    lD(r, e, a, i, n, t, o);
  }), r.graph().nodeRankFactor = a;
}, cleanup: function(r) {
  var e = r.graph();
  r.removeNode(e.nestingRoot), delete e.nestingRoot, K.forEach(r.edges(), function(t) {
    r.edge(t).nestingEdge && r.removeEdge(t);
  });
} };
function lD(r, e, t, n, a, i, o) {
  var s = r.children(o);
  if (s.length) {
    var u = vn.addBorderNode(r, "_bt"), f = vn.addBorderNode(r, "_bb"), l = r.node(o);
    r.setParent(u, o), l.borderTop = u, r.setParent(f, o), l.borderBottom = f, K.forEach(s, function(c) {
      lD(r, e, t, n, a, i, c);
      var h = r.node(c), d = h.borderTop ? h.borderTop : c, v = h.borderBottom ? h.borderBottom : c, p = h.borderTop ? n : 2 * n, g = d !== v ? 1 : a - i[o] + 1;
      r.setEdge(u, d, { weight: p, minlen: g, nestingEdge: !0 }), r.setEdge(v, f, { weight: p, minlen: g, nestingEdge: !0 });
    }), r.parent(o) || r.setEdge(e, u, { weight: 0, minlen: a + i[o] });
  } else
    o !== e && r.setEdge(e, o, { weight: 0, minlen: t });
}
var zte = function(r) {
  K.forEach(r.children(), function e(t) {
    var n = r.children(t), a = r.node(t);
    if (n.length && K.forEach(n, e), K.has(a, "minRank")) {
      a.borderLeft = [], a.borderRight = [];
      for (var i = a.minRank, o = a.maxRank + 1; i < o; ++i)
        G_(r, "borderLeft", "_bl", t, a, i), G_(r, "borderRight", "_br", t, a, i);
    }
  });
};
function G_(r, e, t, n, a, i) {
  var o = { width: 0, height: 0, rank: i, borderType: e }, s = a[e][i - 1], u = vn.addDummyNode(r, "border", o, t);
  a[e][i] = u, r.setParent(u, n), s && r.setEdge(s, u, { weight: 1 });
}
var z_ = { adjust: function(r) {
  var e = r.graph().rankdir.toLowerCase();
  e !== "lr" && e !== "rl" || U_(r);
}, undo: function(r) {
  var e = r.graph().rankdir.toLowerCase();
  e !== "bt" && e !== "rl" || function(t) {
    K.forEach(t.nodes(), function(n) {
      n0(t.node(n));
    }), K.forEach(t.edges(), function(n) {
      var a = t.edge(n);
      K.forEach(a.points, n0), K.has(a, "y") && n0(a);
    });
  }(r), e !== "lr" && e !== "rl" || (function(t) {
    K.forEach(t.nodes(), function(n) {
      a0(t.node(n));
    }), K.forEach(t.edges(), function(n) {
      var a = t.edge(n);
      K.forEach(a.points, a0), K.has(a, "x") && a0(a);
    });
  }(r), U_(r));
} };
function U_(r) {
  K.forEach(r.nodes(), function(e) {
    j_(r.node(e));
  }), K.forEach(r.edges(), function(e) {
    j_(r.edge(e));
  });
}
function j_(r) {
  var e = r.width;
  r.width = r.height, r.height = e;
}
function n0(r) {
  r.y = -r.y;
}
function a0(r) {
  var e = r.x;
  r.x = r.y, r.y = e;
}
var Ute = function(r) {
  var e = {}, t = K.filter(r.nodes(), function(s) {
    return !r.children(s).length;
  }), n = K.max(K.map(t, function(s) {
    return r.node(s).rank;
  })), a = K.map(K.range(n + 1), function() {
    return [];
  });
  function i(s) {
    if (!K.has(e, s)) {
      e[s] = !0;
      var u = r.node(s);
      a[u.rank].push(s), K.forEach(r.successors(s), i);
    }
  }
  var o = K.sortBy(t, function(s) {
    return r.node(s).rank;
  });
  return K.forEach(o, i), a;
}, jte = function(r, e) {
  for (var t = 0, n = 1; n < e.length; ++n)
    t += $te(r, e[n - 1], e[n]);
  return t;
};
function $te(r, e, t) {
  for (var n = K.zipObject(t, K.map(t, function(f, l) {
    return l;
  })), a = K.flatten(K.map(e, function(f) {
    return K.sortBy(K.map(r.outEdges(f), function(l) {
      return { pos: n[l.w], weight: r.edge(l).weight };
    }), "pos");
  }), !0), i = 1; i < t.length; )
    i <<= 1;
  var o = 2 * i - 1;
  i -= 1;
  var s = K.map(new Array(o), function() {
    return 0;
  }), u = 0;
  return K.forEach(a.forEach(function(f) {
    var l = f.pos + i;
    s[l] += f.weight;
    for (var c = 0; l > 0; )
      l % 2 && (c += s[l + 1]), s[l = l - 1 >> 1] += f.weight;
    u += f.weight * c;
  })), u;
}
var Wte = function(r, e) {
  return K.map(e, function(t) {
    var n = r.inEdges(t);
    if (n.length) {
      var a = K.reduce(n, function(i, o) {
        var s = r.edge(o), u = r.node(o.v);
        return { sum: i.sum + s.weight * u.order, weight: i.weight + s.weight };
      }, { sum: 0, weight: 0 });
      return { v: t, barycenter: a.sum / a.weight, weight: a.weight };
    }
    return { v: t };
  });
}, Xte = function(r, e) {
  var t = {};
  return K.forEach(r, function(n, a) {
    var i = t[n.v] = { indegree: 0, in: [], out: [], vs: [n.v], i: a };
    K.isUndefined(n.barycenter) || (i.barycenter = n.barycenter, i.weight = n.weight);
  }), K.forEach(e.edges(), function(n) {
    var a = t[n.v], i = t[n.w];
    K.isUndefined(a) || K.isUndefined(i) || (i.indegree++, a.out.push(t[n.w]));
  }), function(n) {
    var a = [];
    function i(u) {
      return function(f) {
        f.merged || (K.isUndefined(f.barycenter) || K.isUndefined(u.barycenter) || f.barycenter >= u.barycenter) && function(l, c) {
          var h = 0, d = 0;
          l.weight && (h += l.barycenter * l.weight, d += l.weight), c.weight && (h += c.barycenter * c.weight, d += c.weight), l.vs = c.vs.concat(l.vs), l.barycenter = h / d, l.weight = d, l.i = Math.min(c.i, l.i), c.merged = !0;
        }(u, f);
      };
    }
    function o(u) {
      return function(f) {
        f.in.push(u), --f.indegree == 0 && n.push(f);
      };
    }
    for (; n.length; ) {
      var s = n.pop();
      a.push(s), K.forEach(s.in.reverse(), i(s)), K.forEach(s.out, o(s));
    }
    return K.map(K.filter(a, function(u) {
      return !u.merged;
    }), function(u) {
      return K.pick(u, ["vs", "i", "barycenter", "weight"]);
    });
  }(K.filter(t, function(n) {
    return !n.indegree;
  }));
}, Vte = function(r, e) {
  var t = vn.partition(r, function(c) {
    return K.has(c, "barycenter");
  }), n = t.lhs, a = K.sortBy(t.rhs, function(c) {
    return -c.i;
  }), i = [], o = 0, s = 0, u = 0;
  n.sort((f = !!e, function(c, h) {
    return c.barycenter < h.barycenter ? -1 : c.barycenter > h.barycenter ? 1 : f ? h.i - c.i : c.i - h.i;
  })), u = $_(i, a, u), K.forEach(n, function(c) {
    u += c.vs.length, i.push(c.vs), o += c.barycenter * c.weight, s += c.weight, u = $_(i, a, u);
  });
  var f, l = { vs: K.flatten(i, !0) };
  return s && (l.barycenter = o / s, l.weight = s), l;
};
function $_(r, e, t) {
  for (var n; e.length && (n = K.last(e)).i <= t; )
    e.pop(), r.push(n.vs), t++;
  return t;
}
var Yte = function r(e, t, n, a) {
  var i = e.children(t), o = e.node(t), s = o ? o.borderLeft : void 0, u = o ? o.borderRight : void 0, f = {};
  s && (i = K.filter(i, function(p) {
    return p !== s && p !== u;
  }));
  var l = Wte(e, i);
  K.forEach(l, function(p) {
    if (e.children(p.v).length) {
      var g = r(e, p.v, n, a);
      f[p.v] = g, K.has(g, "barycenter") && (y = p, m = g, K.isUndefined(y.barycenter) ? (y.barycenter = m.barycenter, y.weight = m.weight) : (y.barycenter = (y.barycenter * y.weight + m.barycenter * m.weight) / (y.weight + m.weight), y.weight += m.weight));
    }
    var y, m;
  });
  var c = Xte(l, n);
  (function(p, g) {
    K.forEach(p, function(y) {
      y.vs = K.flatten(y.vs.map(function(m) {
        return g[m] ? g[m].vs : m;
      }), !0);
    });
  })(c, f);
  var h = Vte(c, a);
  if (s && (h.vs = K.flatten([s, h.vs, u], !0), e.predecessors(s).length)) {
    var d = e.node(e.predecessors(s)[0]), v = e.node(e.predecessors(u)[0]);
    K.has(h, "barycenter") || (h.barycenter = 0, h.weight = 0), h.barycenter = (h.barycenter * h.weight + d.order + v.order) / (h.weight + 2), h.weight += 2;
  }
  return h;
}, Hte = Aa.Graph, Kte = function(r, e, t) {
  var n = function(i) {
    for (var o; i.hasNode(o = K.uniqueId("_root")); )
      ;
    return o;
  }(r), a = new Hte({ compound: !0 }).setGraph({ root: n }).setDefaultNodeLabel(function(i) {
    return r.node(i);
  });
  return K.forEach(r.nodes(), function(i) {
    var o = r.node(i), s = r.parent(i);
    (o.rank === e || o.minRank <= e && e <= o.maxRank) && (a.setNode(i), a.setParent(i, s || n), K.forEach(r[t](i), function(u) {
      var f = u.v === i ? u.w : u.v, l = a.edge(f, i), c = K.isUndefined(l) ? 0 : l.weight;
      a.setEdge(f, i, { weight: r.edge(u).weight + c });
    }), K.has(o, "minRank") && a.setNode(i, { borderLeft: o.borderLeft[e], borderRight: o.borderRight[e] }));
  }), a;
}, qte = function(r, e, t) {
  var n, a = {};
  K.forEach(t, function(i) {
    for (var o, s, u = r.parent(i); u; ) {
      if ((o = r.parent(u)) ? (s = a[o], a[o] = u) : (s = n, n = u), s && s !== u)
        return void e.setEdge(s, u);
      u = o;
    }
  });
}, Zte = Aa.Graph, Qte = function(r) {
  var e = vn.maxRank(r), t = W_(r, K.range(1, e + 1), "inEdges"), n = W_(r, K.range(e - 1, -1, -1), "outEdges"), a = Ute(r);
  X_(r, a);
  for (var i, o = Number.POSITIVE_INFINITY, s = 0, u = 0; u < 4; ++s, ++u) {
    Jte(s % 2 ? t : n, s % 4 >= 2), a = vn.buildLayerMatrix(r);
    var f = jte(r, a);
    f < o && (u = 0, i = K.cloneDeep(a), o = f);
  }
  X_(r, i);
};
function W_(r, e, t) {
  return K.map(e, function(n) {
    return Kte(r, n, t);
  });
}
function Jte(r, e) {
  var t = new Zte();
  K.forEach(r, function(n) {
    var a = n.graph().root, i = Yte(n, a, t, e);
    K.forEach(i.vs, function(o, s) {
      n.node(o).order = s;
    }), qte(n, t, i.vs);
  });
}
function X_(r, e) {
  K.forEach(e, function(t) {
    K.forEach(t, function(n, a) {
      r.node(n).order = a;
    });
  });
}
var ere = Aa.Graph, tre = function(r) {
  var e, t = vn.buildLayerMatrix(r), n = K.merge(rre(r, t), nre(r, t)), a = {};
  K.forEach(["u", "d"], function(o) {
    e = o === "u" ? t : K.values(t).reverse(), K.forEach(["l", "r"], function(s) {
      s === "r" && (e = K.map(e, function(c) {
        return K.values(c).reverse();
      }));
      var u = (o === "u" ? r.predecessors : r.successors).bind(r), f = ire(r, e, n, u), l = ore(r, e, f.root, f.align, s === "r");
      s === "r" && (l = K.mapValues(l, function(c) {
        return -c;
      })), a[o + s] = l;
    });
  });
  var i = sre(r, a);
  return ure(a, i), fre(a, r.graph().align);
};
function rre(r, e) {
  var t = {};
  return K.reduce(e, function(n, a) {
    var i = 0, o = 0, s = n.length, u = K.last(a);
    return K.forEach(a, function(f, l) {
      var c = function(d, v) {
        if (d.node(v).dummy)
          return K.find(d.predecessors(v), function(p) {
            return d.node(p).dummy;
          });
      }(r, f), h = c ? r.node(c).order : s;
      (c || f === u) && (K.forEach(a.slice(o, l + 1), function(d) {
        K.forEach(r.predecessors(d), function(v) {
          var p = r.node(v), g = p.order;
          !(g < i || h < g) || p.dummy && r.node(d).dummy || cD(t, v, d);
        });
      }), o = l + 1, i = h);
    }), a;
  }), t;
}
function nre(r, e) {
  var t = {};
  function n(a, i, o, s, u) {
    var f;
    K.forEach(K.range(i, o), function(l) {
      f = a[l], r.node(f).dummy && K.forEach(r.predecessors(f), function(c) {
        var h = r.node(c);
        h.dummy && (h.order < s || h.order > u) && cD(t, c, f);
      });
    });
  }
  return K.reduce(e, function(a, i) {
    var o, s = -1, u = 0;
    return K.forEach(i, function(f, l) {
      if (r.node(f).dummy === "border") {
        var c = r.predecessors(f);
        c.length && (o = r.node(c[0]).order, n(i, u, l, s, o), u = l, s = o);
      }
      n(i, u, i.length, o, a.length);
    }), i;
  }), t;
}
function cD(r, e, t) {
  if (e > t) {
    var n = e;
    e = t, t = n;
  }
  var a = r[e];
  a || (r[e] = a = {}), a[t] = !0;
}
function are(r, e, t) {
  if (e > t) {
    var n = e;
    e = t, t = n;
  }
  return K.has(r[e], t);
}
function ire(r, e, t, n) {
  var a = {}, i = {}, o = {};
  return K.forEach(e, function(s) {
    K.forEach(s, function(u, f) {
      a[u] = u, i[u] = u, o[u] = f;
    });
  }), K.forEach(e, function(s) {
    var u = -1;
    K.forEach(s, function(f) {
      var l = n(f);
      if (l.length)
        for (var c = ((l = K.sortBy(l, function(p) {
          return o[p];
        })).length - 1) / 2, h = Math.floor(c), d = Math.ceil(c); h <= d; ++h) {
          var v = l[h];
          i[f] === f && u < o[v] && !are(t, f, v) && (i[v] = f, i[f] = a[f] = a[v], u = o[v]);
        }
    });
  }), { root: a, align: i };
}
function ore(r, e, t, n, a) {
  var i = {}, o = function(f, l, c, h) {
    var d = new ere(), v = f.graph(), p = /* @__PURE__ */ function(g, y, m) {
      return function(b, E, x) {
        var w, _ = b.node(E), M = b.node(x), A = 0;
        if (A += _.width / 2, K.has(_, "labelpos"))
          switch (_.labelpos.toLowerCase()) {
            case "l":
              w = -_.width / 2;
              break;
            case "r":
              w = _.width / 2;
          }
        if (w && (A += m ? w : -w), w = 0, A += (_.dummy ? y : g) / 2, A += (M.dummy ? y : g) / 2, A += M.width / 2, K.has(M, "labelpos"))
          switch (M.labelpos.toLowerCase()) {
            case "l":
              w = M.width / 2;
              break;
            case "r":
              w = -M.width / 2;
          }
        return w && (A += m ? w : -w), w = 0, A;
      };
    }(v.nodesep, v.edgesep, h);
    return K.forEach(l, function(g) {
      var y;
      K.forEach(g, function(m) {
        var b = c[m];
        if (d.setNode(b), y) {
          var E = c[y], x = d.edge(E, b);
          d.setEdge(E, b, Math.max(p(f, m, y), x || 0));
        }
        y = m;
      });
    }), d;
  }(r, e, t, a), s = a ? "borderLeft" : "borderRight";
  function u(f, l) {
    for (var c = o.nodes(), h = c.pop(), d = {}; h; )
      d[h] ? f(h) : (d[h] = !0, c.push(h), c = c.concat(l(h))), h = c.pop();
  }
  return u(function(f) {
    i[f] = o.inEdges(f).reduce(function(l, c) {
      return Math.max(l, i[c.v] + o.edge(c));
    }, 0);
  }, o.predecessors.bind(o)), u(function(f) {
    var l = o.outEdges(f).reduce(function(h, d) {
      return Math.min(h, i[d.w] - o.edge(d));
    }, Number.POSITIVE_INFINITY), c = r.node(f);
    l !== Number.POSITIVE_INFINITY && c.borderType !== s && (i[f] = Math.max(i[f], l));
  }, o.successors.bind(o)), K.forEach(n, function(f) {
    i[f] = i[t[f]];
  }), i;
}
function sre(r, e) {
  return K.minBy(K.values(e), function(t) {
    var n = Number.NEGATIVE_INFINITY, a = Number.POSITIVE_INFINITY;
    return K.forIn(t, function(i, o) {
      var s = function(u, f) {
        return u.node(f).width;
      }(r, o) / 2;
      n = Math.max(i + s, n), a = Math.min(i - s, a);
    }), n - a;
  });
}
function ure(r, e) {
  var t = K.values(e), n = K.min(t), a = K.max(t);
  K.forEach(["u", "d"], function(i) {
    K.forEach(["l", "r"], function(o) {
      var s, u = i + o, f = r[u];
      if (f !== e) {
        var l = K.values(f);
        (s = o === "l" ? n - K.min(l) : a - K.max(l)) && (r[u] = K.mapValues(f, function(c) {
          return c + s;
        }));
      }
    });
  });
}
function fre(r, e) {
  return K.mapValues(r.ul, function(t, n) {
    if (e)
      return r[e.toLowerCase()][n];
    var a = K.sortBy(K.map(r, n));
    return (a[1] + a[2]) / 2;
  });
}
var lre = tre, cre = function(r) {
  (function(e) {
    var t = vn.buildLayerMatrix(e), n = e.graph().ranksep, a = 0;
    K.forEach(t, function(i) {
      var o = K.max(K.map(i, function(s) {
        return e.node(s).height;
      }));
      K.forEach(i, function(s) {
        e.node(s).y = a + o / 2;
      }), a += o + n;
    });
  })(r = vn.asNonCompoundGraph(r)), K.forEach(lre(r), function(e, t) {
    r.node(t).x = e;
  });
}, hre = vn.normalizeRanks, dre = vn.removeEmptyRanks, Gi = vn, vre = Aa.Graph, pre = function(r, e) {
  var t = e && e.debugTiming ? Gi.time : Gi.notime;
  t("layout", function() {
    var n = t("  buildLayoutGraph", function() {
      return function(a) {
        var i = new vre({ multigraph: !0, compound: !0 }), o = o0(a.graph());
        return i.setGraph(K.merge({}, yre, i0(o, gre), K.pick(o, mre))), K.forEach(a.nodes(), function(s) {
          var u = o0(a.node(s));
          i.setNode(s, K.defaults(i0(u, bre), Ere)), i.setParent(s, a.parent(s));
        }), K.forEach(a.edges(), function(s) {
          var u = o0(a.edge(s));
          i.setEdge(s, K.merge({}, wre, i0(u, xre), K.pick(u, _re)));
        }), i;
      }(r);
    });
    t("  runLayout", function() {
      (function(a, i) {
        i("    makeSpaceForEdgeLabels", function() {
          (function(o) {
            var s = o.graph();
            s.ranksep /= 2, K.forEach(o.edges(), function(u) {
              var f = o.edge(u);
              f.minlen *= 2, f.labelpos.toLowerCase() !== "c" && (s.rankdir === "TB" || s.rankdir === "BT" ? f.width += f.labeloffset : f.height += f.labeloffset);
            });
          })(a);
        }), i("    removeSelfEdges", function() {
          (function(o) {
            K.forEach(o.edges(), function(s) {
              if (s.v === s.w) {
                var u = o.node(s.v);
                u.selfEdges || (u.selfEdges = []), u.selfEdges.push({ e: s, label: o.edge(s) }), o.removeEdge(s);
              }
            });
          })(a);
        }), i("    acyclic", function() {
          D_.run(a);
        }), i("    nestingGraph.run", function() {
          F_.run(a);
        }), i("    rank", function() {
          Bte(Gi.asNonCompoundGraph(a));
        }), i("    injectEdgeLabelProxies", function() {
          (function(o) {
            K.forEach(o.edges(), function(s) {
              var u = o.edge(s);
              if (u.width && u.height) {
                var f = o.node(s.v), l = { rank: (o.node(s.w).rank - f.rank) / 2 + f.rank, e: s };
                Gi.addDummyNode(o, "edge-proxy", l, "_ep");
              }
            });
          })(a);
        }), i("    removeEmptyRanks", function() {
          dre(a);
        }), i("    nestingGraph.cleanup", function() {
          F_.cleanup(a);
        }), i("    normalizeRanks", function() {
          hre(a);
        }), i("    assignRankMinMax", function() {
          (function(o) {
            var s = 0;
            K.forEach(o.nodes(), function(u) {
              var f = o.node(u);
              f.borderTop && (f.minRank = o.node(f.borderTop).rank, f.maxRank = o.node(f.borderBottom).rank, s = K.max(s, f.maxRank));
            }), o.graph().maxRank = s;
          })(a);
        }), i("    removeEdgeLabelProxies", function() {
          (function(o) {
            K.forEach(o.nodes(), function(s) {
              var u = o.node(s);
              u.dummy === "edge-proxy" && (o.edge(u.e).labelRank = u.rank, o.removeNode(s));
            });
          })(a);
        }), i("    normalize.run", function() {
          k_.run(a);
        }), i("    parentDummyChains", function() {
          Gte(a);
        }), i("    addBorderSegments", function() {
          zte(a);
        }), i("    order", function() {
          Qte(a);
        }), i("    insertSelfEdges", function() {
          (function(o) {
            var s = Gi.buildLayerMatrix(o);
            K.forEach(s, function(u) {
              var f = 0;
              K.forEach(u, function(l, c) {
                var h = o.node(l);
                h.order = c + f, K.forEach(h.selfEdges, function(d) {
                  Gi.addDummyNode(o, "selfedge", { width: d.label.width, height: d.label.height, rank: h.rank, order: c + ++f, e: d.e, label: d.label }, "_se");
                }), delete h.selfEdges;
              });
            });
          })(a);
        }), i("    adjustCoordinateSystem", function() {
          z_.adjust(a);
        }), i("    position", function() {
          cre(a);
        }), i("    positionSelfEdges", function() {
          (function(o) {
            K.forEach(o.nodes(), function(s) {
              var u = o.node(s);
              if (u.dummy === "selfedge") {
                var f = o.node(u.e.v), l = f.x + f.width / 2, c = f.y, h = u.x - l, d = f.height / 2;
                o.setEdge(u.e, u.label), o.removeNode(s), u.label.points = [{ x: l + 2 * h / 3, y: c - d }, { x: l + 5 * h / 6, y: c - d }, { x: l + h, y: c }, { x: l + 5 * h / 6, y: c + d }, { x: l + 2 * h / 3, y: c + d }], u.label.x = u.x, u.label.y = u.y;
              }
            });
          })(a);
        }), i("    removeBorderNodes", function() {
          (function(o) {
            K.forEach(o.nodes(), function(s) {
              if (o.children(s).length) {
                var u = o.node(s), f = o.node(u.borderTop), l = o.node(u.borderBottom), c = o.node(K.last(u.borderLeft)), h = o.node(K.last(u.borderRight));
                u.width = Math.abs(h.x - c.x), u.height = Math.abs(l.y - f.y), u.x = c.x + u.width / 2, u.y = f.y + u.height / 2;
              }
            }), K.forEach(o.nodes(), function(s) {
              o.node(s).dummy === "border" && o.removeNode(s);
            });
          })(a);
        }), i("    normalize.undo", function() {
          k_.undo(a);
        }), i("    fixupEdgeLabelCoords", function() {
          (function(o) {
            K.forEach(o.edges(), function(s) {
              var u = o.edge(s);
              if (K.has(u, "x"))
                switch (u.labelpos !== "l" && u.labelpos !== "r" || (u.width -= u.labeloffset), u.labelpos) {
                  case "l":
                    u.x -= u.width / 2 + u.labeloffset;
                    break;
                  case "r":
                    u.x += u.width / 2 + u.labeloffset;
                }
            });
          })(a);
        }), i("    undoCoordinateSystem", function() {
          z_.undo(a);
        }), i("    translateGraph", function() {
          (function(o) {
            var s = Number.POSITIVE_INFINITY, u = 0, f = Number.POSITIVE_INFINITY, l = 0, c = o.graph(), h = c.marginx || 0, d = c.marginy || 0;
            function v(p) {
              var g = p.x, y = p.y, m = p.width, b = p.height;
              s = Math.min(s, g - m / 2), u = Math.max(u, g + m / 2), f = Math.min(f, y - b / 2), l = Math.max(l, y + b / 2);
            }
            K.forEach(o.nodes(), function(p) {
              v(o.node(p));
            }), K.forEach(o.edges(), function(p) {
              var g = o.edge(p);
              K.has(g, "x") && v(g);
            }), s -= h, f -= d, K.forEach(o.nodes(), function(p) {
              var g = o.node(p);
              g.x -= s, g.y -= f;
            }), K.forEach(o.edges(), function(p) {
              var g = o.edge(p);
              K.forEach(g.points, function(y) {
                y.x -= s, y.y -= f;
              }), K.has(g, "x") && (g.x -= s), K.has(g, "y") && (g.y -= f);
            }), c.width = u - s + h, c.height = l - f + d;
          })(a);
        }), i("    assignNodeIntersects", function() {
          (function(o) {
            K.forEach(o.edges(), function(s) {
              var u, f, l = o.edge(s), c = o.node(s.v), h = o.node(s.w);
              l.points ? (u = l.points[0], f = l.points[l.points.length - 1]) : (l.points = [], u = h, f = c), l.points.unshift(Gi.intersectRect(c, u)), l.points.push(Gi.intersectRect(h, f));
            });
          })(a);
        }), i("    reversePoints", function() {
          (function(o) {
            K.forEach(o.edges(), function(s) {
              var u = o.edge(s);
              u.reversed && u.points.reverse();
            });
          })(a);
        }), i("    acyclic.undo", function() {
          D_.undo(a);
        });
      })(n, t);
    }), t("  updateInputGraph", function() {
      (function(a, i) {
        K.forEach(a.nodes(), function(o) {
          var s = a.node(o), u = i.node(o);
          s && (s.x = u.x, s.y = u.y, i.children(o).length && (s.width = u.width, s.height = u.height));
        }), K.forEach(a.edges(), function(o) {
          var s = a.edge(o), u = i.edge(o);
          s.points = u.points, K.has(u, "x") && (s.x = u.x, s.y = u.y);
        }), a.graph().width = i.graph().width, a.graph().height = i.graph().height;
      })(r, n);
    });
  });
}, gre = ["nodesep", "edgesep", "ranksep", "marginx", "marginy"], yre = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: "tb" }, mre = ["acyclicer", "ranker", "rankdir", "align"], bre = ["width", "height"], Ere = { width: 0, height: 0 }, xre = ["minlen", "weight", "width", "height", "labeloffset"], wre = { minlen: 1, weight: 1, width: 0, height: 0, labeloffset: 10, labelpos: "r" }, _re = ["labelpos"];
function i0(r, e) {
  return K.mapValues(K.pick(r, e), Number);
}
function o0(r) {
  var e = {};
  return K.forEach(r, function(t, n) {
    e[n.toLowerCase()] = t;
  }), e;
}
var Mre = Aa.Graph, hD = { graphlib: Aa, layout: pre, debug: { debugOrdering: function(r) {
  var e = vn.buildLayerMatrix(r), t = new Mre({ compound: !0, multigraph: !0 }).setGraph({});
  return K.forEach(r.nodes(), function(n) {
    t.setNode(n, { label: n }), t.setParent(n, "layer" + r.node(n).rank);
  }), K.forEach(r.edges(), function(n) {
    t.setEdge(n.v, n.w, {}, n.name);
  }), K.forEach(e, function(n, a) {
    var i = "layer" + a;
    t.setNode(i, { rank: "same" }), K.reduce(n, function(o, s) {
      return t.setEdge(o, s, { style: "invis" }), s;
    });
  }), t;
} }, util: { time: vn.time, notime: vn.notime }, version: "0.8.5" }, Sre = hD.graphlib, Are = hD.layout;
class Cre {
  constructor(e) {
    this.cardinality = 1, this.include = Ho.UNSPECIFIED, this.isGroupNode = !1, this.parentNode = null, this.type = On.NODE, this.name = e.name, this.attr = e.attr || {}, this.inputs = e.inputs, this.path = e.path || [], this.width = e.width, this.height = e.height;
  }
}
class Tre {
  constructor() {
    this.nodes = {}, this.edges = [], this.nodes = {}, this.edges = [];
  }
}
function Ire(r) {
  const e = new Tre();
  return r.nodes.map((t) => new Cre(t)).forEach((t) => {
    e.nodes[t.name] = t, t.inputs.forEach((n) => {
      (function(a, i, o) {
        o.name !== i.name && a.edges.push(Object.assign(Object.assign({}, o.attr), { v: o.name, w: i.name }));
      })(e, t, n);
    });
  }), e;
}
class Ore {
  constructor(e, t = {}) {
    this.attr = null, this.bridgeGraph = null, this.cardinality = 0, this.depth = 1, this.include = Ho.UNSPECIFIED, this.isGroupNode = !0, this.parentNode = null, this.type = On.META, this.path = [], this.name = e, this.metaGraph = Wm(e, fu.META, t);
  }
  getFirstChild() {
    return this.metaGraph.node(this.metaGraph.nodes()[0]);
  }
  getChildren() {
    return this.metaGraph.nodes().map((e) => this.metaGraph.node(e));
  }
  leaves() {
    let e, t = [], n = [this];
    for (; n.length; ) {
      let a = n.shift();
      a.isGroupNode ? (e = a.metaGraph, e.nodes().forEach((i) => n.push(e.node(i)))) : t.push(a.name);
    }
    return t;
  }
}
class Dre {
  constructor(e, t) {
    this.v = e, this.w = t, this.baseEdgeList = [], this.inbound = null, this.name = null;
  }
  addBaseEdge(e, t) {
    this.baseEdgeList.push(e);
  }
}
function dD(r, e = {}) {
  return new Ore(r, e);
}
function vD(r, e) {
  return new Dre(r, e);
}
function Wm(r, e, t) {
  const n = t || {}, a = new Sre.Graph(n);
  return a.setGraph({ name: r, rankdir: n.rankdir, type: e, align: n.align }), a;
}
class Lre {
  constructor(e = {}) {
    this.graphOptions = e, this.index = {}, this.graphOptions.compound = !0, this.root = dD(uu, this.graphOptions), this.index[uu] = this.root;
  }
  getNodeMap() {
    return this.index;
  }
  node(e) {
    return this.index[e];
  }
  setNode(e, t) {
    this.index[e] = t;
  }
  getBridgeGraph(e) {
    const t = this.index[e];
    if (!t)
      throw Error("Could not find node in hierarchy: " + e);
    if (!("metaGraph" in t))
      return null;
    const n = t;
    if (n.bridgeGraph)
      return n.bridgeGraph;
    const a = Wm(nO, fu.BRIDGE, this.graphOptions);
    if (n.bridgeGraph = a, !t.parentNode || !("metaGraph" in t.parentNode))
      return a;
    const i = t.parentNode;
    return [i.metaGraph, this.getBridgeGraph(i.name)].forEach((o) => {
      o.edges().filter((s) => s.v === e || s.w === e).forEach((s) => {
        const u = s.w === e;
        o.edge(s).baseEdgeList.forEach((f) => {
          const [l, c] = u ? [f.w, s.v] : [f.v, s.w], h = this.getChildName(e, l), d = { v: u ? c : h, w: u ? h : c };
          let v = a.edge(d);
          v || (v = vD(d.v, d.w), v.inbound = u, a.setEdge(d.v, d.w, v)), v.addBaseEdge(f, this);
        });
      });
    }), a;
  }
  getChildName(e, t) {
    let n = this.index[t];
    for (; n; ) {
      if (n.parentNode && n.parentNode.name === e)
        return n.name;
      n = n.parentNode;
    }
    throw Error("Could not find immediate child for descendant: " + t);
  }
  getPredecessors(e) {
    const t = this.index[e];
    if (!t)
      throw Error("Could not find node with name: " + e);
    return this.getOneWayEdges(t, !0);
  }
  getSuccessors(e) {
    const t = this.index[e];
    if (!t)
      throw Error("Could not find node with name: " + e);
    return this.getOneWayEdges(t, !1);
  }
  getOneWayEdges(e, t) {
    const n = [];
    if (!e.parentNode || !e.parentNode.isGroupNode)
      return n;
    const a = e.parentNode, i = a.metaGraph, o = this.getBridgeGraph(a.name);
    return V_(i, e, t, n), V_(o, e, t, n), n;
  }
}
function Nre(r, e) {
  const { rankDirection: t, align: n } = e, a = new Lre({ rankdir: t, align: n });
  return function(i, o) {
    Object.keys(o.nodes).forEach((s) => {
      const u = o.nodes[s], f = u.path;
      let l = i.root;
      l.depth = Math.max(f.length, l.depth);
      for (let c = 0; c < f.length && (l.depth = Math.max(l.depth, f.length - c), l.cardinality += u.cardinality, c !== f.length - 1); c++) {
        const h = f[c];
        let d = i.node(h);
        d || (d = dD(h, i.graphOptions), d.path = u.path.slice(0, c + 1), d.parentNode = l, i.setNode(h, d), l.metaGraph.setNode(h, d)), l = d;
      }
      i.setNode(u.name, u), u.parentNode = l, l.metaGraph.setNode(u.name, u);
    });
  }(a, r), function(i, o) {
    const s = i.getNodeMap();
    let u = [], f = [];
    const l = (c, h) => {
      let d = 0;
      for (; c; )
        h[d++] = c.name, c = c.parentNode;
      return d - 1;
    };
    o.edges.forEach((c) => {
      u = [], f = [];
      let h = l(o.nodes[c.v], u), d = l(o.nodes[c.w], f);
      for (; u[h] === f[d]; )
        if (h--, d--, h < 0 || d < 0)
          throw Error("No difference found between ancestor paths.");
      const v = s[u[h + 1]], p = u[h], g = f[d];
      let y = v.metaGraph.edge(p, g);
      y || (y = vD(p, g), v.metaGraph.setEdge(p, g, y)), y.addBaseEdge(c, i);
    });
  }(a, r), a;
}
function V_(r, e, t, n) {
  (t ? r.inEdges(e.name) : r.outEdges(e.name)).forEach((a) => {
    const i = r.edge(a);
    n.push(i);
  });
}
class Pre {
  constructor(e) {
    this.hierarchy = e, this.index = {}, this.hasSubHierarchy = {}, this.root = new H_(this.hierarchy.root, this.hierarchy.graphOptions), this.index[e.root.name] = this.root, this.buildSubHierarchy(e.root.name), this.root.expanded = !0;
  }
  getRenderInfoNodes() {
    return Object.values(this.index);
  }
  getSubHierarchy() {
    return this.hasSubHierarchy;
  }
  buildSubHierarchy(e) {
    if (e in this.hasSubHierarchy)
      return;
    this.hasSubHierarchy[e] = !0;
    const t = this.index[e];
    if (t.node.type !== On.META)
      return;
    const n = t, a = n.node.metaGraph, i = n.coreGraph;
    a.nodes().forEach((l) => {
      const c = this.getOrCreateRenderNodeByName(l);
      i.setNode(l, c);
    }), a.edges().forEach((l) => {
      const c = a.edge(l), h = new Y_(c);
      i.setEdge(l.v, l.w, h);
    });
    const o = n.node.parentNode;
    if (!o)
      return;
    const s = this.getRenderNodeByName(o.name), u = (l, ...c) => c.concat([l ? "IN" : "OUT"]).join("~~"), f = this.hierarchy.getBridgeGraph(e);
    f.edges().forEach((l) => {
      const c = f.edge(l), h = !!a.node(l.w), [d, v] = h ? [l.w, l.v] : [l.v, l.w], p = (x) => {
        const w = h ? { v: x, w: e } : { v: e, w: x };
        return s.coreGraph.edge(w);
      };
      let g = p(v);
      g || (g = p(u(h, v, o.name)));
      const y = u(h, e), m = u(h, v, e);
      let b = i.node(m);
      if (!b) {
        let x = i.node(y);
        if (!x) {
          const _ = { name: y, type: On.BRIDGE, isGroupNode: !1, cardinality: 0, parentNode: null, include: Ho.UNSPECIFIED, inbound: h, attr: {} };
          x = new uh(_), this.index[y] = x, i.setNode(y, x);
        }
        const w = { name: m, type: On.BRIDGE, isGroupNode: !1, cardinality: 1, parentNode: null, include: Ho.UNSPECIFIED, inbound: h, attr: {} };
        b = new uh(w), this.index[m] = b, i.setNode(m, b), i.setParent(m, y), x.node.cardinality++;
      }
      const E = new Y_(c);
      E.adjoiningMetaEdge = g, h ? i.setEdge(m, d, E) : i.setEdge(d, m, E);
    });
  }
  getOrCreateRenderNodeByName(e) {
    if (!e)
      return null;
    if (e in this.index)
      return this.index[e];
    const t = this.getNodeByName(e);
    return t ? (this.index[e] = t.isGroupNode ? new H_(t, this.hierarchy.graphOptions) : new uh(t), this.index[e]) : null;
  }
  getRenderNodeByName(e) {
    return this.index[e];
  }
  getNodeByName(e) {
    return this.hierarchy.node(e);
  }
}
class uh {
  constructor(e) {
    this.node = e, this.expanded = !1, this.x = 0, this.y = 0, this.coreBox = { width: 0, height: 0 }, this.outboxWidth = 0, this.labelOffset = 0, this.radius = 0, this.labelHeight = 0, this.paddingTop = 0, this.paddingLeft = 0, this.paddingRight = 0, this.paddingBottom = 0, this.width = e.width || 0, this.height = e.height || 0, this.displayName = e.name, this.attr = e.attr;
  }
}
class Y_ {
  constructor(e) {
    this.metaEdge = e, this.adjoiningMetaEdge = null, this.weight = 1, this.points = [];
  }
}
class H_ extends uh {
  constructor(e, t) {
    super(e);
    const n = e.metaGraph.graph();
    t.compound = !0, this.coreGraph = Wm(n.name, fu.CORE, t);
  }
}
function pD(r, e) {
  r.node.isGroupNode && function(t, n) {
    const a = Sg(n);
    t.coreGraph.nodes().map((i) => t.coreGraph.node(i)).forEach((i) => {
      var o, s, u, f, l, c;
      const { height: h, width: d } = i;
      switch (i.node.type) {
        case On.NODE:
          Object.assign(i, a.nodeSize.node), i.height = h || a.nodeSize.node.height, i.width = d || a.nodeSize.node.width;
          break;
        case On.BRIDGE:
          Object.assign(i, a.nodeSize.bridge);
          break;
        case On.META:
          i.expanded ? pD(i, n) : (Object.assign(i, a.nodeSize.meta), i.height = a.nodeSize.meta.height, i.width = a.nodeSize.meta.width);
          break;
        default:
          throw Error("Unrecognized node type: " + i.node.type);
      }
      if (!i.expanded) {
        const v = i.attr;
        (function(p, g = !1) {
          if (p.coreBox.width = p.width, p.coreBox.height = p.height, !g) {
            const y = `${p.displayName}`.length, m = 3;
            p.width = Math.max(p.coreBox.width, y * m);
          }
        })(i, n && (i.node.type === 0 && !!(!((s = (o = n == null ? void 0 : n.nodeSize) === null || o === void 0 ? void 0 : o.meta) === null || s === void 0) && s.width) || i.node.type === 1 && (!!(!((f = (u = n == null ? void 0 : n.nodeSize) === null || u === void 0 ? void 0 : u.node) === null || f === void 0) && f.width) || !!v.width) || i.node.type === 2 && !!(!((c = (l = n == null ? void 0 : n.nodeSize) === null || l === void 0 ? void 0 : l.bridge) === null || c === void 0) && c.width)));
      }
    });
  }(r, e), r.node.type === On.META && function(t, n) {
    const a = Sg(n), i = a.subScene.meta;
    Object.assign(t, i);
    const { nodeSep: o, rankSep: s, edgeSep: u, align: f } = a.graph.meta, l = { nodesep: o, ranksep: s, edgesep: u, align: f };
    Object.assign(t.coreBox, function(d, v) {
      const { ranksep: p, nodesep: g, edgesep: y, align: m } = v;
      Object.assign(d.graph(), { ranksep: p, nodesep: g, edgesep: y, align: m });
      const b = [];
      if (d.nodes().forEach((M) => {
        d.node(M).node.type !== On.BRIDGE && b.push(M);
      }), !b.length)
        return { width: 0, height: 0 };
      Are(d);
      let E = 1 / 0, x = 1 / 0, w = -1 / 0, _ = -1 / 0;
      return b.forEach((M) => {
        const A = d.node(M), S = 0.5 * A.width, T = A.x - S, C = A.x + S;
        E = T < E ? T : E, w = C > w ? C : w;
        const O = 0.5 * A.height, L = A.y - O, R = A.y + O;
        x = L < x ? L : x, _ = R > _ ? R : _;
      }), d.edges().forEach((M) => {
        const A = d.edge(M), S = d.node(A.metaEdge.v), T = d.node(A.metaEdge.w);
        if (A.points.length === 3 && function(L) {
          let R = K_(L[0], L[1]);
          for (let P = 1; P < L.length - 1; P++) {
            const z = K_(L[P], L[P + 1]);
            if (Math.abs(z - R) > 1)
              return !1;
            R = z;
          }
          return !0;
        }(A.points)) {
          if (S != null) {
            const L = S.expanded ? S.x : Rg(S);
            A.points[0].x = L;
          }
          if (T != null) {
            const L = T.expanded ? T.x : Rg(T);
            A.points[2].x = L;
          }
          A.points = [A.points[0], A.points[1]];
        }
        const C = A.points[A.points.length - 2];
        T != null && (A.points[A.points.length - 1] = q_(C, T));
        const O = A.points[1];
        S != null && (A.points[0] = q_(O, S)), A.points.forEach((L) => {
          E = L.x < E ? L.x : E, w = L.x > w ? L.x : w, x = L.y < x ? L.y : x, _ = L.y > _ ? L.y : _;
        });
      }), d.nodes().forEach((M) => {
        const A = d.node(M);
        A.x -= E, A.y -= x;
      }), d.edges().forEach((M) => {
        d.edge(M).points.forEach((A) => {
          A.x -= E, A.y -= x;
        });
      }), { width: w - E, height: _ - x };
    }(t.coreGraph, l));
    let c = 0;
    t.coreGraph.nodeCount() > 0 && c++;
    const h = c <= 1 ? 0 : c;
    t.coreBox.width += h + h, t.coreBox.height = i.labelHeight + t.coreBox.height, t.width = t.coreBox.width + i.paddingLeft + i.paddingRight, t.height = t.paddingTop + t.coreBox.height + t.paddingBottom;
  }(r, e);
}
function K_(r, e) {
  const t = e.x - r.x, n = e.y - r.y;
  return 180 * Math.atan(n / t) / Math.PI;
}
function Rg(r) {
  return r.expanded ? r.x : r.x - r.width / 2 + 0 + r.coreBox.width / 2;
}
function q_(r, e) {
  const t = e.expanded ? e.x : Rg(e), n = e.y, a = r.x - t, i = r.y - n;
  let o, s, u = e.expanded ? e.width : e.coreBox.width, f = e.expanded ? e.height : e.coreBox.height;
  return Math.abs(i) * u / 2 > Math.abs(a) * f / 2 ? (i < 0 && (f = -f), o = i === 0 ? 0 : f / 2 * a / i, s = f / 2) : (a < 0 && (u = -u), o = u / 2, s = a === 0 ? 0 : u / 2 * i / a), { x: t + o, y: n + s };
}
function kre(r, e, t) {
  var n, a, i, o;
  const s = r.nodes.filter((c, h, d) => d.findIndex((v) => v.id === c.id) !== h).map((c) => c.id);
  if (s.length)
    throw new Error(`Duplicated ids found: ${s.join(", ")}`);
  const u = function(c) {
    const h = { nodes: [] }, d = c.compound, v = Object.keys(d || {}), p = /* @__PURE__ */ new Map(), g = (m, b = []) => {
      if (p.has(m))
        return p.get(m);
      for (let E = 0; E < v.length; E++) {
        let x = v[E];
        if (d && d[x].indexOf(m) !== -1)
          return b.unshift(x), g(x, b);
      }
      return b.length === 0 && p.set(m, b), b;
    }, y = (m) => c.edges.filter((b) => b.w === m).map((b) => ({ name: b.v }));
    return c.nodes.forEach((m) => {
      const b = m.id, E = [...g(b), b];
      let x = y(b);
      h.nodes.push({ name: b, path: E, inputs: x, width: m.width, height: m.height, attr: Object.assign({}, m) });
    }), h;
  }(r), f = function(c, h) {
    const d = (p, g) => {
      for (let y of g.values())
        if (y.includes(p))
          return !0;
      return !1;
    }, v = (p, g = []) => {
      if (Object.keys(p).length === 0)
        return [...new Set(g)];
      const y = new Map(Object.keys(p).map((b) => [b, p[b]])), m = {};
      for (let [b, E] of y)
        d(b, y) ? m[b] = E : g = g.concat(b, E);
      return v(m, g);
    };
    return v(c).filter((p) => h.includes(p));
  }(r.compound || {}, (e == null ? void 0 : e.expanded) || []), l = function(c, h) {
    return function(d) {
      return new Pre(d);
    }(Nre(Ire(c), h));
  }(u, { rankDirection: ((a = (n = t == null ? void 0 : t.graph) === null || n === void 0 ? void 0 : n.meta) === null || a === void 0 ? void 0 : a.rankDir) || (e == null ? void 0 : e.rankDirection) || jh.graph.meta.rankDir, align: ((o = (i = t == null ? void 0 : t.graph) === null || i === void 0 ? void 0 : i.meta) === null || o === void 0 ? void 0 : o.align) || jh.graph.meta.align });
  return function(c, h) {
    h.forEach((d) => {
      const v = c.getRenderInfoNodes().find((y) => y.displayName === d);
      let p = v && v.node && v.node.name || "";
      const g = c.getRenderNodeByName(p);
      if (!g)
        throw new Error(`No nodes found: ${p}`);
      g.expanded = !0, c.buildSubHierarchy(p);
    });
  }(l, f), pD(l.root, t), gD(l.root);
}
function Rre(r, e = !1) {
  const t = JSON.parse(JSON.stringify(r)), n = { nodes: [t], edges: [...t.edges] };
  return t.nodes.forEach(function a(i) {
    (i.type === 0 || i.type === 1) && n.nodes.push(i), i.type === 0 && (n.edges = n.edges.concat(i.edges)), Array.isArray(i.nodes) && i.nodes.forEach(a);
  }), e && n.nodes.forEach((a) => {
    const i = n.nodes.find((o) => o.id === a.parentNodeName);
    if (i) {
      const o = i.x - i.width / 2 + i.paddingLeft, s = i.y - i.height / 2 + i.labelHeight + i.paddingTop;
      i.id !== uu && (a.x += o, a.y += s), a.type === 0 && a.edges.forEach((u) => {
        u.points.forEach((f) => {
          f.x += a.x - a.width / 2 + a.paddingLeft, f.y += a.y - a.height / 2 + a.labelHeight + a.paddingTop;
        });
      });
    }
  }), n;
}
function Bre(r, e, t, n) {
  var a, i;
  let o = [];
  const s = ((a = t.find((c) => c.id === r)) === null || a === void 0 ? void 0 : a.path) || [], u = ((i = t.find((c) => c.id === e)) === null || i === void 0 ? void 0 : i.path) || [], f = [uu, ...s].slice(0, s.length).reverse(), l = [uu, ...u].slice(0, u.length);
  return f.forEach((c) => {
    const h = t.find((d) => d.id === c);
    o = o.concat(h.edges.filter((d) => d.baseEdgeList.some((v) => v.v === ((n == null ? void 0 : n.v) || r) && v.w === ((n == null ? void 0 : n.w) || e))));
  }), l.filter((c) => !f.includes(c)).forEach((c) => {
    const h = t.find((d) => d.id === c);
    o = o.concat(h.edges.filter((d) => d.baseEdgeList.some((v) => v.v === ((n == null ? void 0 : n.v) || r) && v.w === ((n == null ? void 0 : n.w) || e))));
  }), o;
}
function gD(r) {
  const e = r.coreGraph.nodes().map((n) => r.coreGraph.node(n));
  return Object.assign(Object.assign({}, Z_(r)), { expanded: r.expanded, nodes: r.expanded ? (t = e, t.map((n) => n.node.type === On.META ? gD(n) : Z_(n))) : [], edges: r.expanded ? Fre(r) : [] });
  var t;
}
function Z_(r) {
  return { id: r.node.name, name: r.node.name, type: r.node.type, cardinality: r.node.cardinality, attr: r.attr, parentNodeName: r.node.parentNode ? r.node.parentNode.name : null, coreBox: Object.assign({}, r.coreBox), x: r.x, y: r.y, width: r.width, height: r.height, radius: r.radius, labelHeight: r.labelHeight, labelOffset: r.labelOffset, outboxWidth: r.outboxWidth, paddingLeft: r.paddingLeft, paddingTop: r.paddingTop, paddingRight: r.paddingRight, paddingBottom: r.paddingBottom, path: r.node.path };
}
function Fre(r) {
  return r.coreGraph.edges().map((e) => ({ renderInfoEdge: r.coreGraph.edge(e), edge: e })).filter(({ renderInfoEdge: e }) => e.metaEdge).map(({ edge: e, renderInfoEdge: t }) => {
    const n = function(a, i) {
      const o = i.points.map((s) => Object.assign({}, s));
      if (i.adjoiningMetaEdge) {
        const s = i.adjoiningMetaEdge.points, u = i.metaEdge.inbound, f = u ? s[s.length - 1] : s[0], l = o[u ? 0 : o.length - 1], c = a.x - a.width / 2, h = a.y - a.height / 2, d = f.x - c, v = f.y - h, p = -a.paddingLeft, g = -(a.paddingTop + a.labelHeight);
        l.x = d + p, l.y = v + g;
      }
      return o;
    }(r, t);
    return { adjoiningEdge: t.adjoiningMetaEdge ? { w: t.adjoiningMetaEdge.metaEdge.w, v: t.adjoiningMetaEdge.metaEdge.v } : null, inbound: t.metaEdge.inbound, w: e.w, v: e.v, points: n, weight: t.weight, baseEdgeList: t.metaEdge.baseEdgeList, parentNodeName: r.node.name };
  });
}
const Gre = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  BRIDGE_GRAPH_NAME: nO,
  get GraphType() {
    return fu;
  },
  get HierarchyNodeType() {
    return Ag;
  },
  get InclusionType() {
    return Ho;
  },
  LAYOUT_CONFIG: jh,
  get NodeType() {
    return On;
  },
  ROOT_NAME: uu,
  buildGraph: kre,
  flatGraph: Rre,
  getEdges: Bre,
  mergeConfig: Sg
}, Symbol.toStringTag, { value: "Module" })), zre = /* @__PURE__ */ ri(Gre);
var Ure = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), ga = be && be.__assign || function() {
  return ga = Object.assign || function(r) {
    for (var e, t = 1, n = arguments.length; t < n; t++) {
      e = arguments[t];
      for (var a in e)
        Object.prototype.hasOwnProperty.call(e, a) && (r[a] = e[a]);
    }
    return r;
  }, ga.apply(this, arguments);
}, As = be && be.__spreadArray || function(r, e, t) {
  if (t || arguments.length === 2)
    for (var n = 0, a = e.length, i; n < a; n++)
      (i || !(n in e)) && (i || (i = Array.prototype.slice.call(e, 0, n)), i[n] = e[n]);
  return r.concat(i || Array.prototype.slice.call(e));
};
Object.defineProperty(sl, "__esModule", { value: !0 });
sl.DagreCompoundLayout = void 0;
var jre = Gr, Jn = zre, Tc = Dr(), $re = (
  /** @class */
  function(r) {
    Ure(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.rankdir = "TB", n.nodesep = 50, n.edgesep = 5, n.ranksep = 50, n.controlPoints = !0, n.anchorPoint = !0, n.nodes = [], n.edges = [], n.combos = [], n.onLayoutEnd = function() {
      }, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        rankdir: "TB",
        align: void 0,
        begin: void 0,
        nodeSize: void 0,
        nodesep: 50,
        ranksep: 50,
        controlPoints: !0,
        anchorPoint: !0
        // 是否使用布局计算的锚点
      };
    }, e.prototype.init = function(t) {
      var n = t.hiddenNodes || [], a = t.hiddenEdges || [], i = t.hiddenCombos || [];
      this.nodes = this.getDataByOrder((t.nodes || []).concat(n)), this.edges = this.getDataByOrder((t.edges || []).concat(a)), this.combos = (t.combos || []).concat(i.map(function(o) {
        return ga(ga({}, o), { collapsed: !0 });
      }));
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.edges;
      if (n) {
        var i = t.getLayoutConfig(), o = i.graphDef, s = i.graphOption, u = i.graphSettings, f = (0, Jn.buildGraph)(o, s, u), l = (0, Jn.flatGraph)(f, !0);
        return this.updatePosition(l), t.onLayoutEnd && t.onLayoutEnd(), {
          nodes: n,
          edges: a
        };
      }
    }, e.prototype.getNodePath = function(t) {
      var n = this, a = n.nodes, i = n.combos, o = a.find(function(u) {
        return u.id === t;
      }), s = function(u, f) {
        f === void 0 && (f = []);
        var l = i.find(function(c) {
          return c.id === u;
        });
        return l ? (f.unshift(u), l.parentId ? s(l.parentId, f) : f) : f;
      };
      return o && o.comboId ? s(o.comboId, [t]) : [t];
    }, e.prototype.getLayoutConfig = function() {
      var t, n, a, i = this, o = i.nodes, s = i.edges, u = i.combos, f = i.nodeSize, l = i.rankdir, c = i.align, h = i.edgesep, d = i.nodesep, v = i.ranksep, p = i.settings, g = (u || []).reduce(function(P, z) {
        var V = o.filter(function(F) {
          return F.comboId === z.id;
        }).map(function(F) {
          return F.id;
        }), N = (u || []).filter(function(F) {
          return F.parentId === z.id;
        }).map(function(F) {
          return F.id;
        });
        return (V.length || N.length) && (P[z.id] = As(As([], V, !0), N, !0)), P;
      }, {}), y;
      f ? (0, Tc.isArray)(f) ? y = function() {
        return f;
      } : y = function() {
        return [f, f];
      } : y = function(P) {
        return P && P.size ? (0, Tc.isArray)(P.size) ? P.size : (0, Tc.isObject)(P.size) ? [P.size.width || 40, P.size.height || 40] : [P.size, P.size] : [40, 40];
      };
      var m = function(P) {
        return P && P.size ? (0, Tc.isArray)(P.size) ? P.size : [P.size, P.size] : [80, 40];
      }, b = m(u == null ? void 0 : u[0]), E = b[0], x = b[1], w = (n = (t = i.graphSettings) === null || t === void 0 ? void 0 : t.subScene) === null || n === void 0 ? void 0 : n.meta, _ = ((a = u.find(function(P) {
        return !P.collapsed;
      })) === null || a === void 0 ? void 0 : a.padding) || [20, 20, 20, 20], M = _[0], A = _[1], S = _[2], T = _[3], C = {
        compound: g,
        nodes: As([], (o || []).map(function(P) {
          var z = y(P), V = z[0], N = z[1];
          return ga(ga({}, P), { width: V, height: N });
        }), !0),
        edges: As([], (s || []).map(function(P) {
          return ga(ga({}, P), { v: P.source, w: P.target });
        }), !0)
      }, O = {
        expanded: (u || []).filter(function(P) {
          return !P.collapsed;
        }).map(function(P) {
          return P.id;
        })
      }, L = {
        graph: {
          meta: {
            align: c,
            rankDir: l,
            nodeSep: d,
            edgeSep: h,
            rankSep: v
          }
        },
        subScene: {
          meta: {
            paddingTop: M || (w == null ? void 0 : w.paddingTop) || 20,
            paddingRight: A || (w == null ? void 0 : w.paddingRight) || 20,
            paddingBottom: S || (w == null ? void 0 : w.paddingBottom) || 20,
            paddingLeft: T || (w == null ? void 0 : w.paddingLeft) || 20,
            labelHeight: 0
          }
        },
        nodeSize: {
          meta: {
            width: E,
            height: x
          }
        }
      }, R = (0, Jn.mergeConfig)(p, ga({}, (0, Jn.mergeConfig)(L, Jn.LAYOUT_CONFIG)));
      return i.graphSettings = R, {
        graphDef: C,
        graphOption: O,
        graphSettings: R
      };
    }, e.prototype.updatePosition = function(t) {
      var n = t.nodes, a = t.edges;
      this.updateNodePosition(n, a), this.updateEdgePosition(n, a);
    }, e.prototype.getBegin = function(t, n) {
      var a = this, i = a.begin, o = [0, 0];
      if (i) {
        var s = 1 / 0, u = 1 / 0;
        t.forEach(function(f) {
          s > f.x && (s = f.x), u > f.y && (u = f.y);
        }), n.forEach(function(f) {
          f.points.forEach(function(l) {
            s > l.x && (s = l.x), u > l.y && (u = l.y);
          });
        }), o[0] = i[0] - s, o[1] = i[1] - u;
      }
      return o;
    }, e.prototype.updateNodePosition = function(t, n) {
      var a = this, i = a.combos, o = a.nodes, s = a.edges, u = a.anchorPoint, f = a.graphSettings, l = this.getBegin(t, n);
      t.forEach(function(c) {
        var h, d = c.x, v = c.y, p = c.id, g = c.type, y = c.coreBox;
        if (g === Jn.HierarchyNodeType.META && p !== Jn.ROOT_NAME) {
          var m = i.findIndex(function(_) {
            return _.id === p;
          }), b = (h = f == null ? void 0 : f.subScene) === null || h === void 0 ? void 0 : h.meta;
          i[m].offsetX = d + l[0], i[m].offsetY = v + l[1], i[m].fixSize = [y.width, y.height], i[m].fixCollapseSize = [y.width, y.height], c.expanded ? i[m].padding = [
            b == null ? void 0 : b.paddingTop,
            b == null ? void 0 : b.paddingRight,
            b == null ? void 0 : b.paddingBottom,
            b == null ? void 0 : b.paddingLeft
          ] : i[m].padding = [0, 0, 0, 0];
        } else if (g === Jn.HierarchyNodeType.OP) {
          var m = o.findIndex(function(M) {
            return M.id === p;
          });
          if (o[m].x = d + l[0], o[m].y = v + l[1], u) {
            var E = [], x = n.filter(function(M) {
              return M.v === p;
            }), w = n.filter(function(M) {
              return M.w === p;
            });
            x.length > 0 && x.forEach(function(M) {
              var A = M.points[0], S = (A.x - d) / c.width + 0.5, T = (A.y - v) / c.height + 0.5;
              E.push([S, T]), M.baseEdgeList.forEach(function(C) {
                var O = s.find(function(L) {
                  return L.source === C.v && L.target === C.w;
                });
                O && (O.sourceAnchor = E.length - 1);
              });
            }), w.length > 0 && w.forEach(function(M) {
              var A = M.points[M.points.length - 1], S = (A.x - d) / c.width + 0.5, T = (A.y - v) / c.height + 0.5;
              E.push([S, T]), M.baseEdgeList.forEach(function(C) {
                var O = s.find(function(L) {
                  return L.source === C.v && L.target === C.w;
                });
                O && (O.targetAnchor = E.length - 1);
              });
            }), o[m].anchorPoints = E.length > 0 ? E : o[m].anchorPoints || [];
          }
        }
      });
    }, e.prototype.updateEdgePosition = function(t, n) {
      var a = this, i = a.combos, o = a.edges, s = a.controlPoints, u = this.getBegin(t, n);
      s && (i.forEach(function(f) {
        f.inEdges = [], f.outEdges = [];
      }), o.forEach(function(f) {
        var l, c, h, d, v = t.find(function(_) {
          return _.id === f.source;
        }), p = t.find(function(_) {
          return _.id === f.target;
        }), g = [], y = [];
        if (v && p)
          y = (0, Jn.getEdges)(v == null ? void 0 : v.id, p == null ? void 0 : p.id, t);
        else if (!v || !p) {
          var m = a.getNodePath(f.source), b = a.getNodePath(f.target), E = m.reverse().slice(v ? 0 : 1).find(function(_) {
            return t.find(function(M) {
              return M.id === _;
            });
          }), x = b.reverse().slice(p ? 0 : 1).find(function(_) {
            return t.find(function(M) {
              return M.id === _;
            });
          });
          v = t.find(function(_) {
            return _.id === E;
          }), p = t.find(function(_) {
            return _.id === x;
          }), y = (0, Jn.getEdges)(v == null ? void 0 : v.id, p == null ? void 0 : p.id, t, { v: f.source, w: f.target });
        }
        if (g = y.reduce(function(_, M) {
          return As(As([], _, !0), M.points.map(function(A) {
            return ga(ga({}, A), { x: A.x + u[0], y: A.y + u[1] });
          }), !0);
        }, []), g = g.slice(1, -1), f.controlPoints = g, (p == null ? void 0 : p.type) === Jn.NodeType.META) {
          var w = i.findIndex(function(_) {
            return _.id === (p == null ? void 0 : p.id);
          });
          if (!i[w] || !((l = i[w].inEdges) === null || l === void 0) && l.some(function(_) {
            return _.source === v.id && _.target === p.id;
          }))
            return;
          (c = i[w].inEdges) === null || c === void 0 || c.push({
            source: v.id,
            target: p.id,
            controlPoints: g
          });
        }
        if ((v == null ? void 0 : v.type) === Jn.NodeType.META) {
          var w = i.findIndex(function(M) {
            return M.id === (v == null ? void 0 : v.id);
          });
          if (!i[w] || !((h = i[w].outEdges) === null || h === void 0) && h.some(function(M) {
            return M.source === v.id && M.target === p.id;
          }))
            return;
          (d = i[w].outEdges) === null || d === void 0 || d.push({
            source: v.id,
            target: p.id,
            controlPoints: g
          });
        }
      }));
    }, e.prototype.getType = function() {
      return "dagreCompound";
    }, e.prototype.getDataByOrder = function(t) {
      return t.every(function(n) {
        return n.layoutOrder !== void 0;
      }) || t.forEach(function(n, a) {
        n.layoutOrder = a;
      }), t.sort(function(n, a) {
        return n.layoutOrder - a.layoutOrder;
      });
    }, e;
  }(jre.Base)
);
sl.DagreCompoundLayout = $re;
var Xm = {}, qd = {}, Vm = {};
const Wre = Object.prototype.toString;
function qh(r) {
  const e = Wre.call(r);
  return e.endsWith("Array]") && !e.includes("Big");
}
function Xre(r) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  if (!qh(r))
    throw new TypeError("input must be an array");
  if (r.length === 0)
    throw new TypeError("input must not be empty");
  var t = e.fromIndex, n = t === void 0 ? 0 : t, a = e.toIndex, i = a === void 0 ? r.length : a;
  if (n < 0 || n >= r.length || !Number.isInteger(n))
    throw new Error("fromIndex must be a positive integer smaller than length");
  if (i <= n || i > r.length || !Number.isInteger(i))
    throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");
  for (var o = r[n], s = n + 1; s < i; s++)
    r[s] > o && (o = r[s]);
  return o;
}
function Vre(r) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  if (!qh(r))
    throw new TypeError("input must be an array");
  if (r.length === 0)
    throw new TypeError("input must not be empty");
  var t = e.fromIndex, n = t === void 0 ? 0 : t, a = e.toIndex, i = a === void 0 ? r.length : a;
  if (n < 0 || n >= r.length || !Number.isInteger(n))
    throw new Error("fromIndex must be a positive integer smaller than length");
  if (i <= n || i > r.length || !Number.isInteger(i))
    throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");
  for (var o = r[n], s = n + 1; s < i; s++)
    r[s] < o && (o = r[s]);
  return o;
}
function Q_(r) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  if (qh(r)) {
    if (r.length === 0)
      throw new TypeError("input must not be empty");
  } else
    throw new TypeError("input must be an array");
  var t;
  if (e.output !== void 0) {
    if (!qh(e.output))
      throw new TypeError("output option must be an array if specified");
    t = e.output;
  } else
    t = new Array(r.length);
  var n = Vre(r), a = Xre(r);
  if (n === a)
    throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");
  var i = e.min, o = i === void 0 ? e.autoMinMax ? n : 0 : i, s = e.max, u = s === void 0 ? e.autoMinMax ? a : 1 : s;
  if (o >= u)
    throw new RangeError("min option must be smaller than max option");
  for (var f = (u - o) / (a - n), l = 0; l < r.length; l++)
    t[l] = (r[l] - n) * f + o;
  return t;
}
const Ic = " ".repeat(2), yD = " ".repeat(4);
function Yre() {
  return mD(this);
}
function mD(r, e = {}) {
  const { maxRows: t = 15, maxColumns: n = 10, maxNumSize: a = 8 } = e;
  return `${r.constructor.name} {
${Ic}[
${yD}${Hre(r, t, n, a)}
${Ic}]
${Ic}rows: ${r.rows}
${Ic}columns: ${r.columns}
}`;
}
function Hre(r, e, t, n) {
  const { rows: a, columns: i } = r, o = Math.min(a, e), s = Math.min(i, t), u = [];
  for (let f = 0; f < o; f++) {
    let l = [];
    for (let c = 0; c < s; c++)
      l.push(Kre(r.get(f, c), n));
    u.push(`${l.join(" ")}`);
  }
  return s !== i && (u[u.length - 1] += ` ... ${i - t} more columns`), o !== a && u.push(`... ${a - e} more rows`), u.join(`
${yD}`);
}
function Kre(r, e) {
  const t = String(r);
  if (t.length <= e)
    return t.padEnd(e, " ");
  const n = r.toPrecision(e - 2);
  if (n.length <= e)
    return n;
  const a = r.toExponential(e - 2), i = a.indexOf("e"), o = a.slice(i);
  return a.slice(0, e - o.length) + o;
}
function qre(r, e) {
  r.prototype.add = function(n) {
    return typeof n == "number" ? this.addS(n) : this.addM(n);
  }, r.prototype.addS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) + n);
    return this;
  }, r.prototype.addM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) + n.get(a, i));
    return this;
  }, r.add = function(n, a) {
    return new e(n).add(a);
  }, r.prototype.sub = function(n) {
    return typeof n == "number" ? this.subS(n) : this.subM(n);
  }, r.prototype.subS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) - n);
    return this;
  }, r.prototype.subM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) - n.get(a, i));
    return this;
  }, r.sub = function(n, a) {
    return new e(n).sub(a);
  }, r.prototype.subtract = r.prototype.sub, r.prototype.subtractS = r.prototype.subS, r.prototype.subtractM = r.prototype.subM, r.subtract = r.sub, r.prototype.mul = function(n) {
    return typeof n == "number" ? this.mulS(n) : this.mulM(n);
  }, r.prototype.mulS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) * n);
    return this;
  }, r.prototype.mulM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) * n.get(a, i));
    return this;
  }, r.mul = function(n, a) {
    return new e(n).mul(a);
  }, r.prototype.multiply = r.prototype.mul, r.prototype.multiplyS = r.prototype.mulS, r.prototype.multiplyM = r.prototype.mulM, r.multiply = r.mul, r.prototype.div = function(n) {
    return typeof n == "number" ? this.divS(n) : this.divM(n);
  }, r.prototype.divS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) / n);
    return this;
  }, r.prototype.divM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) / n.get(a, i));
    return this;
  }, r.div = function(n, a) {
    return new e(n).div(a);
  }, r.prototype.divide = r.prototype.div, r.prototype.divideS = r.prototype.divS, r.prototype.divideM = r.prototype.divM, r.divide = r.div, r.prototype.mod = function(n) {
    return typeof n == "number" ? this.modS(n) : this.modM(n);
  }, r.prototype.modS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) % n);
    return this;
  }, r.prototype.modM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) % n.get(a, i));
    return this;
  }, r.mod = function(n, a) {
    return new e(n).mod(a);
  }, r.prototype.modulus = r.prototype.mod, r.prototype.modulusS = r.prototype.modS, r.prototype.modulusM = r.prototype.modM, r.modulus = r.mod, r.prototype.and = function(n) {
    return typeof n == "number" ? this.andS(n) : this.andM(n);
  }, r.prototype.andS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) & n);
    return this;
  }, r.prototype.andM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) & n.get(a, i));
    return this;
  }, r.and = function(n, a) {
    return new e(n).and(a);
  }, r.prototype.or = function(n) {
    return typeof n == "number" ? this.orS(n) : this.orM(n);
  }, r.prototype.orS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) | n);
    return this;
  }, r.prototype.orM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) | n.get(a, i));
    return this;
  }, r.or = function(n, a) {
    return new e(n).or(a);
  }, r.prototype.xor = function(n) {
    return typeof n == "number" ? this.xorS(n) : this.xorM(n);
  }, r.prototype.xorS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) ^ n);
    return this;
  }, r.prototype.xorM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) ^ n.get(a, i));
    return this;
  }, r.xor = function(n, a) {
    return new e(n).xor(a);
  }, r.prototype.leftShift = function(n) {
    return typeof n == "number" ? this.leftShiftS(n) : this.leftShiftM(n);
  }, r.prototype.leftShiftS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) << n);
    return this;
  }, r.prototype.leftShiftM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) << n.get(a, i));
    return this;
  }, r.leftShift = function(n, a) {
    return new e(n).leftShift(a);
  }, r.prototype.signPropagatingRightShift = function(n) {
    return typeof n == "number" ? this.signPropagatingRightShiftS(n) : this.signPropagatingRightShiftM(n);
  }, r.prototype.signPropagatingRightShiftS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) >> n);
    return this;
  }, r.prototype.signPropagatingRightShiftM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) >> n.get(a, i));
    return this;
  }, r.signPropagatingRightShift = function(n, a) {
    return new e(n).signPropagatingRightShift(a);
  }, r.prototype.rightShift = function(n) {
    return typeof n == "number" ? this.rightShiftS(n) : this.rightShiftM(n);
  }, r.prototype.rightShiftS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) >>> n);
    return this;
  }, r.prototype.rightShiftM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, this.get(a, i) >>> n.get(a, i));
    return this;
  }, r.rightShift = function(n, a) {
    return new e(n).rightShift(a);
  }, r.prototype.zeroFillRightShift = r.prototype.rightShift, r.prototype.zeroFillRightShiftS = r.prototype.rightShiftS, r.prototype.zeroFillRightShiftM = r.prototype.rightShiftM, r.zeroFillRightShift = r.rightShift, r.prototype.not = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, ~this.get(n, a));
    return this;
  }, r.not = function(n) {
    return new e(n).not();
  }, r.prototype.abs = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.abs(this.get(n, a)));
    return this;
  }, r.abs = function(n) {
    return new e(n).abs();
  }, r.prototype.acos = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.acos(this.get(n, a)));
    return this;
  }, r.acos = function(n) {
    return new e(n).acos();
  }, r.prototype.acosh = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.acosh(this.get(n, a)));
    return this;
  }, r.acosh = function(n) {
    return new e(n).acosh();
  }, r.prototype.asin = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.asin(this.get(n, a)));
    return this;
  }, r.asin = function(n) {
    return new e(n).asin();
  }, r.prototype.asinh = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.asinh(this.get(n, a)));
    return this;
  }, r.asinh = function(n) {
    return new e(n).asinh();
  }, r.prototype.atan = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.atan(this.get(n, a)));
    return this;
  }, r.atan = function(n) {
    return new e(n).atan();
  }, r.prototype.atanh = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.atanh(this.get(n, a)));
    return this;
  }, r.atanh = function(n) {
    return new e(n).atanh();
  }, r.prototype.cbrt = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.cbrt(this.get(n, a)));
    return this;
  }, r.cbrt = function(n) {
    return new e(n).cbrt();
  }, r.prototype.ceil = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.ceil(this.get(n, a)));
    return this;
  }, r.ceil = function(n) {
    return new e(n).ceil();
  }, r.prototype.clz32 = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.clz32(this.get(n, a)));
    return this;
  }, r.clz32 = function(n) {
    return new e(n).clz32();
  }, r.prototype.cos = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.cos(this.get(n, a)));
    return this;
  }, r.cos = function(n) {
    return new e(n).cos();
  }, r.prototype.cosh = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.cosh(this.get(n, a)));
    return this;
  }, r.cosh = function(n) {
    return new e(n).cosh();
  }, r.prototype.exp = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.exp(this.get(n, a)));
    return this;
  }, r.exp = function(n) {
    return new e(n).exp();
  }, r.prototype.expm1 = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.expm1(this.get(n, a)));
    return this;
  }, r.expm1 = function(n) {
    return new e(n).expm1();
  }, r.prototype.floor = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.floor(this.get(n, a)));
    return this;
  }, r.floor = function(n) {
    return new e(n).floor();
  }, r.prototype.fround = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.fround(this.get(n, a)));
    return this;
  }, r.fround = function(n) {
    return new e(n).fround();
  }, r.prototype.log = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.log(this.get(n, a)));
    return this;
  }, r.log = function(n) {
    return new e(n).log();
  }, r.prototype.log1p = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.log1p(this.get(n, a)));
    return this;
  }, r.log1p = function(n) {
    return new e(n).log1p();
  }, r.prototype.log10 = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.log10(this.get(n, a)));
    return this;
  }, r.log10 = function(n) {
    return new e(n).log10();
  }, r.prototype.log2 = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.log2(this.get(n, a)));
    return this;
  }, r.log2 = function(n) {
    return new e(n).log2();
  }, r.prototype.round = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.round(this.get(n, a)));
    return this;
  }, r.round = function(n) {
    return new e(n).round();
  }, r.prototype.sign = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.sign(this.get(n, a)));
    return this;
  }, r.sign = function(n) {
    return new e(n).sign();
  }, r.prototype.sin = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.sin(this.get(n, a)));
    return this;
  }, r.sin = function(n) {
    return new e(n).sin();
  }, r.prototype.sinh = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.sinh(this.get(n, a)));
    return this;
  }, r.sinh = function(n) {
    return new e(n).sinh();
  }, r.prototype.sqrt = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.sqrt(this.get(n, a)));
    return this;
  }, r.sqrt = function(n) {
    return new e(n).sqrt();
  }, r.prototype.tan = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.tan(this.get(n, a)));
    return this;
  }, r.tan = function(n) {
    return new e(n).tan();
  }, r.prototype.tanh = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.tanh(this.get(n, a)));
    return this;
  }, r.tanh = function(n) {
    return new e(n).tanh();
  }, r.prototype.trunc = function() {
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.set(n, a, Math.trunc(this.get(n, a)));
    return this;
  }, r.trunc = function(n) {
    return new e(n).trunc();
  }, r.pow = function(n, a) {
    return new e(n).pow(a);
  }, r.prototype.pow = function(n) {
    return typeof n == "number" ? this.powS(n) : this.powM(n);
  }, r.prototype.powS = function(n) {
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, Math.pow(this.get(a, i), n));
    return this;
  }, r.prototype.powM = function(n) {
    if (n = e.checkMatrix(n), this.rows !== n.rows || this.columns !== n.columns)
      throw new RangeError("Matrices dimensions must be equal");
    for (let a = 0; a < this.rows; a++)
      for (let i = 0; i < this.columns; i++)
        this.set(a, i, Math.pow(this.get(a, i), n.get(a, i)));
    return this;
  };
}
function na(r, e, t) {
  let n = t ? r.rows : r.rows - 1;
  if (e < 0 || e > n)
    throw new RangeError("Row index out of range");
}
function aa(r, e, t) {
  let n = t ? r.columns : r.columns - 1;
  if (e < 0 || e > n)
    throw new RangeError("Column index out of range");
}
function Bs(r, e) {
  if (e.to1DArray && (e = e.to1DArray()), e.length !== r.columns)
    throw new RangeError(
      "vector size must be the same as the number of columns"
    );
  return e;
}
function Fs(r, e) {
  if (e.to1DArray && (e = e.to1DArray()), e.length !== r.rows)
    throw new RangeError("vector size must be the same as the number of rows");
  return e;
}
function bD(r, e, t) {
  return {
    row: ED(r, e),
    column: xD(r, t)
  };
}
function ED(r, e) {
  if (typeof e != "object")
    throw new TypeError("unexpected type for row indices");
  if (e.some((n) => n < 0 || n >= r.rows))
    throw new RangeError("row indices are out of range");
  return Array.isArray(e) || (e = Array.from(e)), e;
}
function xD(r, e) {
  if (typeof e != "object")
    throw new TypeError("unexpected type for column indices");
  if (e.some((n) => n < 0 || n >= r.columns))
    throw new RangeError("column indices are out of range");
  return Array.isArray(e) || (e = Array.from(e)), e;
}
function Bg(r, e, t, n, a) {
  if (arguments.length !== 5)
    throw new RangeError("expected 4 arguments");
  if (Oc("startRow", e), Oc("endRow", t), Oc("startColumn", n), Oc("endColumn", a), e > t || n > a || e < 0 || e >= r.rows || t < 0 || t >= r.rows || n < 0 || n >= r.columns || a < 0 || a >= r.columns)
    throw new RangeError("Submatrix indices are out of range");
}
function Zd(r, e = 0) {
  let t = [];
  for (let n = 0; n < r; n++)
    t.push(e);
  return t;
}
function Oc(r, e) {
  if (typeof e != "number")
    throw new TypeError(`${r} must be a number`);
}
function Zre(r) {
  let e = Zd(r.rows);
  for (let t = 0; t < r.rows; ++t)
    for (let n = 0; n < r.columns; ++n)
      e[t] += r.get(t, n);
  return e;
}
function Qre(r) {
  let e = Zd(r.columns);
  for (let t = 0; t < r.rows; ++t)
    for (let n = 0; n < r.columns; ++n)
      e[n] += r.get(t, n);
  return e;
}
function Jre(r) {
  let e = 0;
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      e += r.get(t, n);
  return e;
}
function ene(r) {
  let e = Zd(r.rows, 1);
  for (let t = 0; t < r.rows; ++t)
    for (let n = 0; n < r.columns; ++n)
      e[t] *= r.get(t, n);
  return e;
}
function tne(r) {
  let e = Zd(r.columns, 1);
  for (let t = 0; t < r.rows; ++t)
    for (let n = 0; n < r.columns; ++n)
      e[n] *= r.get(t, n);
  return e;
}
function rne(r) {
  let e = 1;
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      e *= r.get(t, n);
  return e;
}
function nne(r, e, t) {
  const n = r.rows, a = r.columns, i = [];
  for (let o = 0; o < n; o++) {
    let s = 0, u = 0, f = 0;
    for (let l = 0; l < a; l++)
      f = r.get(o, l) - t[o], s += f, u += f * f;
    e ? i.push((u - s * s / a) / (a - 1)) : i.push((u - s * s / a) / a);
  }
  return i;
}
function ane(r, e, t) {
  const n = r.rows, a = r.columns, i = [];
  for (let o = 0; o < a; o++) {
    let s = 0, u = 0, f = 0;
    for (let l = 0; l < n; l++)
      f = r.get(l, o) - t[o], s += f, u += f * f;
    e ? i.push((u - s * s / n) / (n - 1)) : i.push((u - s * s / n) / n);
  }
  return i;
}
function ine(r, e, t) {
  const n = r.rows, a = r.columns, i = n * a;
  let o = 0, s = 0, u = 0;
  for (let f = 0; f < n; f++)
    for (let l = 0; l < a; l++)
      u = r.get(f, l) - t, o += u, s += u * u;
  return e ? (s - o * o / i) / (i - 1) : (s - o * o / i) / i;
}
function one(r, e) {
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      r.set(t, n, r.get(t, n) - e[t]);
}
function sne(r, e) {
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      r.set(t, n, r.get(t, n) - e[n]);
}
function une(r, e) {
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      r.set(t, n, r.get(t, n) - e);
}
function fne(r) {
  const e = [];
  for (let t = 0; t < r.rows; t++) {
    let n = 0;
    for (let a = 0; a < r.columns; a++)
      n += Math.pow(r.get(t, a), 2) / (r.columns - 1);
    e.push(Math.sqrt(n));
  }
  return e;
}
function lne(r, e) {
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      r.set(t, n, r.get(t, n) / e[t]);
}
function cne(r) {
  const e = [];
  for (let t = 0; t < r.columns; t++) {
    let n = 0;
    for (let a = 0; a < r.rows; a++)
      n += Math.pow(r.get(a, t), 2) / (r.rows - 1);
    e.push(Math.sqrt(n));
  }
  return e;
}
function hne(r, e) {
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      r.set(t, n, r.get(t, n) / e[n]);
}
function dne(r) {
  const e = r.size - 1;
  let t = 0;
  for (let n = 0; n < r.columns; n++)
    for (let a = 0; a < r.rows; a++)
      t += Math.pow(r.get(a, n), 2) / e;
  return Math.sqrt(t);
}
function vne(r, e) {
  for (let t = 0; t < r.rows; t++)
    for (let n = 0; n < r.columns; n++)
      r.set(t, n, r.get(t, n) / e);
}
class Xt {
  static from1DArray(e, t, n) {
    if (e * t !== n.length)
      throw new RangeError("data length does not match given dimensions");
    let i = new ct(e, t);
    for (let o = 0; o < e; o++)
      for (let s = 0; s < t; s++)
        i.set(o, s, n[o * t + s]);
    return i;
  }
  static rowVector(e) {
    let t = new ct(1, e.length);
    for (let n = 0; n < e.length; n++)
      t.set(0, n, e[n]);
    return t;
  }
  static columnVector(e) {
    let t = new ct(e.length, 1);
    for (let n = 0; n < e.length; n++)
      t.set(n, 0, e[n]);
    return t;
  }
  static zeros(e, t) {
    return new ct(e, t);
  }
  static ones(e, t) {
    return new ct(e, t).fill(1);
  }
  static rand(e, t, n = {}) {
    if (typeof n != "object")
      throw new TypeError("options must be an object");
    const { random: a = Math.random } = n;
    let i = new ct(e, t);
    for (let o = 0; o < e; o++)
      for (let s = 0; s < t; s++)
        i.set(o, s, a());
    return i;
  }
  static randInt(e, t, n = {}) {
    if (typeof n != "object")
      throw new TypeError("options must be an object");
    const { min: a = 0, max: i = 1e3, random: o = Math.random } = n;
    if (!Number.isInteger(a))
      throw new TypeError("min must be an integer");
    if (!Number.isInteger(i))
      throw new TypeError("max must be an integer");
    if (a >= i)
      throw new RangeError("min must be smaller than max");
    let s = i - a, u = new ct(e, t);
    for (let f = 0; f < e; f++)
      for (let l = 0; l < t; l++) {
        let c = a + Math.round(o() * s);
        u.set(f, l, c);
      }
    return u;
  }
  static eye(e, t, n) {
    t === void 0 && (t = e), n === void 0 && (n = 1);
    let a = Math.min(e, t), i = this.zeros(e, t);
    for (let o = 0; o < a; o++)
      i.set(o, o, n);
    return i;
  }
  static diag(e, t, n) {
    let a = e.length;
    t === void 0 && (t = a), n === void 0 && (n = t);
    let i = Math.min(a, t, n), o = this.zeros(t, n);
    for (let s = 0; s < i; s++)
      o.set(s, s, e[s]);
    return o;
  }
  static min(e, t) {
    e = this.checkMatrix(e), t = this.checkMatrix(t);
    let n = e.rows, a = e.columns, i = new ct(n, a);
    for (let o = 0; o < n; o++)
      for (let s = 0; s < a; s++)
        i.set(o, s, Math.min(e.get(o, s), t.get(o, s)));
    return i;
  }
  static max(e, t) {
    e = this.checkMatrix(e), t = this.checkMatrix(t);
    let n = e.rows, a = e.columns, i = new this(n, a);
    for (let o = 0; o < n; o++)
      for (let s = 0; s < a; s++)
        i.set(o, s, Math.max(e.get(o, s), t.get(o, s)));
    return i;
  }
  static checkMatrix(e) {
    return Xt.isMatrix(e) ? e : new ct(e);
  }
  static isMatrix(e) {
    return e != null && e.klass === "Matrix";
  }
  get size() {
    return this.rows * this.columns;
  }
  apply(e) {
    if (typeof e != "function")
      throw new TypeError("callback must be a function");
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        e.call(this, t, n);
    return this;
  }
  to1DArray() {
    let e = [];
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        e.push(this.get(t, n));
    return e;
  }
  to2DArray() {
    let e = [];
    for (let t = 0; t < this.rows; t++) {
      e.push([]);
      for (let n = 0; n < this.columns; n++)
        e[t].push(this.get(t, n));
    }
    return e;
  }
  toJSON() {
    return this.to2DArray();
  }
  isRowVector() {
    return this.rows === 1;
  }
  isColumnVector() {
    return this.columns === 1;
  }
  isVector() {
    return this.rows === 1 || this.columns === 1;
  }
  isSquare() {
    return this.rows === this.columns;
  }
  isSymmetric() {
    if (this.isSquare()) {
      for (let e = 0; e < this.rows; e++)
        for (let t = 0; t <= e; t++)
          if (this.get(e, t) !== this.get(t, e))
            return !1;
      return !0;
    }
    return !1;
  }
  isEchelonForm() {
    let e = 0, t = 0, n = -1, a = !0, i = !1;
    for (; e < this.rows && a; ) {
      for (t = 0, i = !1; t < this.columns && i === !1; )
        this.get(e, t) === 0 ? t++ : this.get(e, t) === 1 && t > n ? (i = !0, n = t) : (a = !1, i = !0);
      e++;
    }
    return a;
  }
  isReducedEchelonForm() {
    let e = 0, t = 0, n = -1, a = !0, i = !1;
    for (; e < this.rows && a; ) {
      for (t = 0, i = !1; t < this.columns && i === !1; )
        this.get(e, t) === 0 ? t++ : this.get(e, t) === 1 && t > n ? (i = !0, n = t) : (a = !1, i = !0);
      for (let o = t + 1; o < this.rows; o++)
        this.get(e, o) !== 0 && (a = !1);
      e++;
    }
    return a;
  }
  echelonForm() {
    let e = this.clone(), t = 0, n = 0;
    for (; t < e.rows && n < e.columns; ) {
      let a = t;
      for (let i = t; i < e.rows; i++)
        e.get(i, n) > e.get(a, n) && (a = i);
      if (e.get(a, n) === 0)
        n++;
      else {
        e.swapRows(t, a);
        let i = e.get(t, n);
        for (let o = n; o < e.columns; o++)
          e.set(t, o, e.get(t, o) / i);
        for (let o = t + 1; o < e.rows; o++) {
          let s = e.get(o, n) / e.get(t, n);
          e.set(o, n, 0);
          for (let u = n + 1; u < e.columns; u++)
            e.set(o, u, e.get(o, u) - e.get(t, u) * s);
        }
        t++, n++;
      }
    }
    return e;
  }
  reducedEchelonForm() {
    let e = this.echelonForm(), t = e.columns, n = e.rows, a = n - 1;
    for (; a >= 0; )
      if (e.maxRow(a) === 0)
        a--;
      else {
        let i = 0, o = !1;
        for (; i < n && o === !1; )
          e.get(a, i) === 1 ? o = !0 : i++;
        for (let s = 0; s < a; s++) {
          let u = e.get(s, i);
          for (let f = i; f < t; f++) {
            let l = e.get(s, f) - u * e.get(a, f);
            e.set(s, f, l);
          }
        }
        a--;
      }
    return e;
  }
  set() {
    throw new Error("set method is unimplemented");
  }
  get() {
    throw new Error("get method is unimplemented");
  }
  repeat(e = {}) {
    if (typeof e != "object")
      throw new TypeError("options must be an object");
    const { rows: t = 1, columns: n = 1 } = e;
    if (!Number.isInteger(t) || t <= 0)
      throw new TypeError("rows must be a positive integer");
    if (!Number.isInteger(n) || n <= 0)
      throw new TypeError("columns must be a positive integer");
    let a = new ct(this.rows * t, this.columns * n);
    for (let i = 0; i < t; i++)
      for (let o = 0; o < n; o++)
        a.setSubMatrix(this, this.rows * i, this.columns * o);
    return a;
  }
  fill(e) {
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, e);
    return this;
  }
  neg() {
    return this.mulS(-1);
  }
  getRow(e) {
    na(this, e);
    let t = [];
    for (let n = 0; n < this.columns; n++)
      t.push(this.get(e, n));
    return t;
  }
  getRowVector(e) {
    return ct.rowVector(this.getRow(e));
  }
  setRow(e, t) {
    na(this, e), t = Bs(this, t);
    for (let n = 0; n < this.columns; n++)
      this.set(e, n, t[n]);
    return this;
  }
  swapRows(e, t) {
    na(this, e), na(this, t);
    for (let n = 0; n < this.columns; n++) {
      let a = this.get(e, n);
      this.set(e, n, this.get(t, n)), this.set(t, n, a);
    }
    return this;
  }
  getColumn(e) {
    aa(this, e);
    let t = [];
    for (let n = 0; n < this.rows; n++)
      t.push(this.get(n, e));
    return t;
  }
  getColumnVector(e) {
    return ct.columnVector(this.getColumn(e));
  }
  setColumn(e, t) {
    aa(this, e), t = Fs(this, t);
    for (let n = 0; n < this.rows; n++)
      this.set(n, e, t[n]);
    return this;
  }
  swapColumns(e, t) {
    aa(this, e), aa(this, t);
    for (let n = 0; n < this.rows; n++) {
      let a = this.get(n, e);
      this.set(n, e, this.get(n, t)), this.set(n, t, a);
    }
    return this;
  }
  addRowVector(e) {
    e = Bs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) + e[n]);
    return this;
  }
  subRowVector(e) {
    e = Bs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) - e[n]);
    return this;
  }
  mulRowVector(e) {
    e = Bs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) * e[n]);
    return this;
  }
  divRowVector(e) {
    e = Bs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) / e[n]);
    return this;
  }
  addColumnVector(e) {
    e = Fs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) + e[t]);
    return this;
  }
  subColumnVector(e) {
    e = Fs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) - e[t]);
    return this;
  }
  mulColumnVector(e) {
    e = Fs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) * e[t]);
    return this;
  }
  divColumnVector(e) {
    e = Fs(this, e);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.set(t, n, this.get(t, n) / e[t]);
    return this;
  }
  mulRow(e, t) {
    na(this, e);
    for (let n = 0; n < this.columns; n++)
      this.set(e, n, this.get(e, n) * t);
    return this;
  }
  mulColumn(e, t) {
    aa(this, e);
    for (let n = 0; n < this.rows; n++)
      this.set(n, e, this.get(n, e) * t);
    return this;
  }
  max() {
    let e = this.get(0, 0);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.get(t, n) > e && (e = this.get(t, n));
    return e;
  }
  maxIndex() {
    let e = this.get(0, 0), t = [0, 0];
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.get(n, a) > e && (e = this.get(n, a), t[0] = n, t[1] = a);
    return t;
  }
  min() {
    let e = this.get(0, 0);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        this.get(t, n) < e && (e = this.get(t, n));
    return e;
  }
  minIndex() {
    let e = this.get(0, 0), t = [0, 0];
    for (let n = 0; n < this.rows; n++)
      for (let a = 0; a < this.columns; a++)
        this.get(n, a) < e && (e = this.get(n, a), t[0] = n, t[1] = a);
    return t;
  }
  maxRow(e) {
    na(this, e);
    let t = this.get(e, 0);
    for (let n = 1; n < this.columns; n++)
      this.get(e, n) > t && (t = this.get(e, n));
    return t;
  }
  maxRowIndex(e) {
    na(this, e);
    let t = this.get(e, 0), n = [e, 0];
    for (let a = 1; a < this.columns; a++)
      this.get(e, a) > t && (t = this.get(e, a), n[1] = a);
    return n;
  }
  minRow(e) {
    na(this, e);
    let t = this.get(e, 0);
    for (let n = 1; n < this.columns; n++)
      this.get(e, n) < t && (t = this.get(e, n));
    return t;
  }
  minRowIndex(e) {
    na(this, e);
    let t = this.get(e, 0), n = [e, 0];
    for (let a = 1; a < this.columns; a++)
      this.get(e, a) < t && (t = this.get(e, a), n[1] = a);
    return n;
  }
  maxColumn(e) {
    aa(this, e);
    let t = this.get(0, e);
    for (let n = 1; n < this.rows; n++)
      this.get(n, e) > t && (t = this.get(n, e));
    return t;
  }
  maxColumnIndex(e) {
    aa(this, e);
    let t = this.get(0, e), n = [0, e];
    for (let a = 1; a < this.rows; a++)
      this.get(a, e) > t && (t = this.get(a, e), n[0] = a);
    return n;
  }
  minColumn(e) {
    aa(this, e);
    let t = this.get(0, e);
    for (let n = 1; n < this.rows; n++)
      this.get(n, e) < t && (t = this.get(n, e));
    return t;
  }
  minColumnIndex(e) {
    aa(this, e);
    let t = this.get(0, e), n = [0, e];
    for (let a = 1; a < this.rows; a++)
      this.get(a, e) < t && (t = this.get(a, e), n[0] = a);
    return n;
  }
  diag() {
    let e = Math.min(this.rows, this.columns), t = [];
    for (let n = 0; n < e; n++)
      t.push(this.get(n, n));
    return t;
  }
  norm(e = "frobenius") {
    let t = 0;
    if (e === "max")
      return this.max();
    if (e === "frobenius") {
      for (let n = 0; n < this.rows; n++)
        for (let a = 0; a < this.columns; a++)
          t = t + this.get(n, a) * this.get(n, a);
      return Math.sqrt(t);
    } else
      throw new RangeError(`unknown norm type: ${e}`);
  }
  cumulativeSum() {
    let e = 0;
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        e += this.get(t, n), this.set(t, n, e);
    return this;
  }
  dot(e) {
    Xt.isMatrix(e) && (e = e.to1DArray());
    let t = this.to1DArray();
    if (t.length !== e.length)
      throw new RangeError("vectors do not have the same size");
    let n = 0;
    for (let a = 0; a < t.length; a++)
      n += t[a] * e[a];
    return n;
  }
  mmul(e) {
    e = ct.checkMatrix(e);
    let t = this.rows, n = this.columns, a = e.columns, i = new ct(t, a), o = new Float64Array(n);
    for (let s = 0; s < a; s++) {
      for (let u = 0; u < n; u++)
        o[u] = e.get(u, s);
      for (let u = 0; u < t; u++) {
        let f = 0;
        for (let l = 0; l < n; l++)
          f += this.get(u, l) * o[l];
        i.set(u, s, f);
      }
    }
    return i;
  }
  strassen2x2(e) {
    e = ct.checkMatrix(e);
    let t = new ct(2, 2);
    const n = this.get(0, 0), a = e.get(0, 0), i = this.get(0, 1), o = e.get(0, 1), s = this.get(1, 0), u = e.get(1, 0), f = this.get(1, 1), l = e.get(1, 1), c = (n + f) * (a + l), h = (s + f) * a, d = n * (o - l), v = f * (u - a), p = (n + i) * l, g = (s - n) * (a + o), y = (i - f) * (u + l), m = c + v - p + y, b = d + p, E = h + v, x = c - h + d + g;
    return t.set(0, 0, m), t.set(0, 1, b), t.set(1, 0, E), t.set(1, 1, x), t;
  }
  strassen3x3(e) {
    e = ct.checkMatrix(e);
    let t = new ct(3, 3);
    const n = this.get(0, 0), a = this.get(0, 1), i = this.get(0, 2), o = this.get(1, 0), s = this.get(1, 1), u = this.get(1, 2), f = this.get(2, 0), l = this.get(2, 1), c = this.get(2, 2), h = e.get(0, 0), d = e.get(0, 1), v = e.get(0, 2), p = e.get(1, 0), g = e.get(1, 1), y = e.get(1, 2), m = e.get(2, 0), b = e.get(2, 1), E = e.get(2, 2), x = (n + a + i - o - s - l - c) * g, w = (n - o) * (-d + g), _ = s * (-h + d + p - g - y - m + E), M = (-n + o + s) * (h - d + g), A = (o + s) * (-h + d), S = n * h, T = (-n + f + l) * (h - v + y), C = (-n + f) * (v - y), O = (f + l) * (-h + v), L = (n + a + i - s - u - f - l) * y, R = l * (-h + v + p - g - y - m + b), P = (-i + l + c) * (g + m - b), z = (i - c) * (g - b), V = i * m, N = (l + c) * (-m + b), F = (-i + s + u) * (y + m - E), q = (i - u) * (y - E), te = (s + u) * (-m + E), re = a * p, J = u * b, ye = o * v, Be = f * d, Pe = c * E, et = S + V + re, ut = x + M + A + S + P + V + N, at = S + T + O + L + V + F + te, At = w + _ + M + S + V + F + q, xt = w + M + A + S + J, lr = V + F + q + te + ye, Rt = S + T + C + R + P + z + V, Wt = P + z + V + N + Be, vr = S + T + C + O + Pe;
    return t.set(0, 0, et), t.set(0, 1, ut), t.set(0, 2, at), t.set(1, 0, At), t.set(1, 1, xt), t.set(1, 2, lr), t.set(2, 0, Rt), t.set(2, 1, Wt), t.set(2, 2, vr), t;
  }
  mmulStrassen(e) {
    e = ct.checkMatrix(e);
    let t = this.clone(), n = t.rows, a = t.columns, i = e.rows, o = e.columns;
    a !== i && console.warn(
      `Multiplying ${n} x ${a} and ${i} x ${o} matrix: dimensions do not match.`
    );
    function s(c, h, d) {
      let v = c.rows, p = c.columns;
      if (v === h && p === d)
        return c;
      {
        let g = Xt.zeros(h, d);
        return g = g.setSubMatrix(c, 0, 0), g;
      }
    }
    let u = Math.max(n, i), f = Math.max(a, o);
    t = s(t, u, f), e = s(e, u, f);
    function l(c, h, d, v) {
      if (d <= 512 || v <= 512)
        return c.mmul(h);
      d % 2 === 1 && v % 2 === 1 ? (c = s(c, d + 1, v + 1), h = s(h, d + 1, v + 1)) : d % 2 === 1 ? (c = s(c, d + 1, v), h = s(h, d + 1, v)) : v % 2 === 1 && (c = s(c, d, v + 1), h = s(h, d, v + 1));
      let p = parseInt(c.rows / 2, 10), g = parseInt(c.columns / 2, 10), y = c.subMatrix(0, p - 1, 0, g - 1), m = h.subMatrix(0, p - 1, 0, g - 1), b = c.subMatrix(0, p - 1, g, c.columns - 1), E = h.subMatrix(0, p - 1, g, h.columns - 1), x = c.subMatrix(p, c.rows - 1, 0, g - 1), w = h.subMatrix(p, h.rows - 1, 0, g - 1), _ = c.subMatrix(p, c.rows - 1, g, c.columns - 1), M = h.subMatrix(p, h.rows - 1, g, h.columns - 1), A = l(
        Xt.add(y, _),
        Xt.add(m, M),
        p,
        g
      ), S = l(Xt.add(x, _), m, p, g), T = l(y, Xt.sub(E, M), p, g), C = l(_, Xt.sub(w, m), p, g), O = l(Xt.add(y, b), M, p, g), L = l(
        Xt.sub(x, y),
        Xt.add(m, E),
        p,
        g
      ), R = l(
        Xt.sub(b, _),
        Xt.add(w, M),
        p,
        g
      ), P = Xt.add(A, C);
      P.sub(O), P.add(R);
      let z = Xt.add(T, O), V = Xt.add(S, C), N = Xt.sub(A, S);
      N.add(T), N.add(L);
      let F = Xt.zeros(2 * P.rows, 2 * P.columns);
      return F = F.setSubMatrix(P, 0, 0), F = F.setSubMatrix(z, P.rows, 0), F = F.setSubMatrix(V, 0, P.columns), F = F.setSubMatrix(N, P.rows, P.columns), F.subMatrix(0, d - 1, 0, v - 1);
    }
    return l(t, e, u, f);
  }
  scaleRows(e = {}) {
    if (typeof e != "object")
      throw new TypeError("options must be an object");
    const { min: t = 0, max: n = 1 } = e;
    if (!Number.isFinite(t))
      throw new TypeError("min must be a number");
    if (!Number.isFinite(n))
      throw new TypeError("max must be a number");
    if (t >= n)
      throw new RangeError("min must be smaller than max");
    let a = new ct(this.rows, this.columns);
    for (let i = 0; i < this.rows; i++) {
      const o = this.getRow(i);
      Q_(o, { min: t, max: n, output: o }), a.setRow(i, o);
    }
    return a;
  }
  scaleColumns(e = {}) {
    if (typeof e != "object")
      throw new TypeError("options must be an object");
    const { min: t = 0, max: n = 1 } = e;
    if (!Number.isFinite(t))
      throw new TypeError("min must be a number");
    if (!Number.isFinite(n))
      throw new TypeError("max must be a number");
    if (t >= n)
      throw new RangeError("min must be smaller than max");
    let a = new ct(this.rows, this.columns);
    for (let i = 0; i < this.columns; i++) {
      const o = this.getColumn(i);
      Q_(o, {
        min: t,
        max: n,
        output: o
      }), a.setColumn(i, o);
    }
    return a;
  }
  flipRows() {
    const e = Math.ceil(this.columns / 2);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < e; n++) {
        let a = this.get(t, n), i = this.get(t, this.columns - 1 - n);
        this.set(t, n, i), this.set(t, this.columns - 1 - n, a);
      }
    return this;
  }
  flipColumns() {
    const e = Math.ceil(this.rows / 2);
    for (let t = 0; t < this.columns; t++)
      for (let n = 0; n < e; n++) {
        let a = this.get(n, t), i = this.get(this.rows - 1 - n, t);
        this.set(n, t, i), this.set(this.rows - 1 - n, t, a);
      }
    return this;
  }
  kroneckerProduct(e) {
    e = ct.checkMatrix(e);
    let t = this.rows, n = this.columns, a = e.rows, i = e.columns, o = new ct(t * a, n * i);
    for (let s = 0; s < t; s++)
      for (let u = 0; u < n; u++)
        for (let f = 0; f < a; f++)
          for (let l = 0; l < i; l++)
            o.set(a * s + f, i * u + l, this.get(s, u) * e.get(f, l));
    return o;
  }
  transpose() {
    let e = new ct(this.columns, this.rows);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        e.set(n, t, this.get(t, n));
    return e;
  }
  sortRows(e = J_) {
    for (let t = 0; t < this.rows; t++)
      this.setRow(t, this.getRow(t).sort(e));
    return this;
  }
  sortColumns(e = J_) {
    for (let t = 0; t < this.columns; t++)
      this.setColumn(t, this.getColumn(t).sort(e));
    return this;
  }
  subMatrix(e, t, n, a) {
    Bg(this, e, t, n, a);
    let i = new ct(
      t - e + 1,
      a - n + 1
    );
    for (let o = e; o <= t; o++)
      for (let s = n; s <= a; s++)
        i.set(o - e, s - n, this.get(o, s));
    return i;
  }
  subMatrixRow(e, t, n) {
    if (t === void 0 && (t = 0), n === void 0 && (n = this.columns - 1), t > n || t < 0 || t >= this.columns || n < 0 || n >= this.columns)
      throw new RangeError("Argument out of range");
    let a = new ct(e.length, n - t + 1);
    for (let i = 0; i < e.length; i++)
      for (let o = t; o <= n; o++) {
        if (e[i] < 0 || e[i] >= this.rows)
          throw new RangeError(`Row index out of range: ${e[i]}`);
        a.set(i, o - t, this.get(e[i], o));
      }
    return a;
  }
  subMatrixColumn(e, t, n) {
    if (t === void 0 && (t = 0), n === void 0 && (n = this.rows - 1), t > n || t < 0 || t >= this.rows || n < 0 || n >= this.rows)
      throw new RangeError("Argument out of range");
    let a = new ct(n - t + 1, e.length);
    for (let i = 0; i < e.length; i++)
      for (let o = t; o <= n; o++) {
        if (e[i] < 0 || e[i] >= this.columns)
          throw new RangeError(`Column index out of range: ${e[i]}`);
        a.set(o - t, i, this.get(o, e[i]));
      }
    return a;
  }
  setSubMatrix(e, t, n) {
    e = ct.checkMatrix(e);
    let a = t + e.rows - 1, i = n + e.columns - 1;
    Bg(this, t, a, n, i);
    for (let o = 0; o < e.rows; o++)
      for (let s = 0; s < e.columns; s++)
        this.set(t + o, n + s, e.get(o, s));
    return this;
  }
  selection(e, t) {
    let n = bD(this, e, t), a = new ct(e.length, t.length);
    for (let i = 0; i < n.row.length; i++) {
      let o = n.row[i];
      for (let s = 0; s < n.column.length; s++) {
        let u = n.column[s];
        a.set(i, s, this.get(o, u));
      }
    }
    return a;
  }
  trace() {
    let e = Math.min(this.rows, this.columns), t = 0;
    for (let n = 0; n < e; n++)
      t += this.get(n, n);
    return t;
  }
  clone() {
    let e = new ct(this.rows, this.columns);
    for (let t = 0; t < this.rows; t++)
      for (let n = 0; n < this.columns; n++)
        e.set(t, n, this.get(t, n));
    return e;
  }
  sum(e) {
    switch (e) {
      case "row":
        return Zre(this);
      case "column":
        return Qre(this);
      case void 0:
        return Jre(this);
      default:
        throw new Error(`invalid option: ${e}`);
    }
  }
  product(e) {
    switch (e) {
      case "row":
        return ene(this);
      case "column":
        return tne(this);
      case void 0:
        return rne(this);
      default:
        throw new Error(`invalid option: ${e}`);
    }
  }
  mean(e) {
    const t = this.sum(e);
    switch (e) {
      case "row": {
        for (let n = 0; n < this.rows; n++)
          t[n] /= this.columns;
        return t;
      }
      case "column": {
        for (let n = 0; n < this.columns; n++)
          t[n] /= this.rows;
        return t;
      }
      case void 0:
        return t / this.size;
      default:
        throw new Error(`invalid option: ${e}`);
    }
  }
  variance(e, t = {}) {
    if (typeof e == "object" && (t = e, e = void 0), typeof t != "object")
      throw new TypeError("options must be an object");
    const { unbiased: n = !0, mean: a = this.mean(e) } = t;
    if (typeof n != "boolean")
      throw new TypeError("unbiased must be a boolean");
    switch (e) {
      case "row": {
        if (!Array.isArray(a))
          throw new TypeError("mean must be an array");
        return nne(this, n, a);
      }
      case "column": {
        if (!Array.isArray(a))
          throw new TypeError("mean must be an array");
        return ane(this, n, a);
      }
      case void 0: {
        if (typeof a != "number")
          throw new TypeError("mean must be a number");
        return ine(this, n, a);
      }
      default:
        throw new Error(`invalid option: ${e}`);
    }
  }
  standardDeviation(e, t) {
    typeof e == "object" && (t = e, e = void 0);
    const n = this.variance(e, t);
    if (e === void 0)
      return Math.sqrt(n);
    for (let a = 0; a < n.length; a++)
      n[a] = Math.sqrt(n[a]);
    return n;
  }
  center(e, t = {}) {
    if (typeof e == "object" && (t = e, e = void 0), typeof t != "object")
      throw new TypeError("options must be an object");
    const { center: n = this.mean(e) } = t;
    switch (e) {
      case "row": {
        if (!Array.isArray(n))
          throw new TypeError("center must be an array");
        return one(this, n), this;
      }
      case "column": {
        if (!Array.isArray(n))
          throw new TypeError("center must be an array");
        return sne(this, n), this;
      }
      case void 0: {
        if (typeof n != "number")
          throw new TypeError("center must be a number");
        return une(this, n), this;
      }
      default:
        throw new Error(`invalid option: ${e}`);
    }
  }
  scale(e, t = {}) {
    if (typeof e == "object" && (t = e, e = void 0), typeof t != "object")
      throw new TypeError("options must be an object");
    let n = t.scale;
    switch (e) {
      case "row": {
        if (n === void 0)
          n = fne(this);
        else if (!Array.isArray(n))
          throw new TypeError("scale must be an array");
        return lne(this, n), this;
      }
      case "column": {
        if (n === void 0)
          n = cne(this);
        else if (!Array.isArray(n))
          throw new TypeError("scale must be an array");
        return hne(this, n), this;
      }
      case void 0: {
        if (n === void 0)
          n = dne(this);
        else if (typeof n != "number")
          throw new TypeError("scale must be a number");
        return vne(this, n), this;
      }
      default:
        throw new Error(`invalid option: ${e}`);
    }
  }
  toString(e) {
    return mD(this, e);
  }
}
Xt.prototype.klass = "Matrix";
typeof Symbol < "u" && (Xt.prototype[Symbol.for("nodejs.util.inspect.custom")] = Yre);
function J_(r, e) {
  return r - e;
}
Xt.random = Xt.rand;
Xt.randomInt = Xt.randInt;
Xt.diagonal = Xt.diag;
Xt.prototype.diagonal = Xt.prototype.diag;
Xt.identity = Xt.eye;
Xt.prototype.negate = Xt.prototype.neg;
Xt.prototype.tensorProduct = Xt.prototype.kroneckerProduct;
class ct extends Xt {
  constructor(e, t) {
    if (super(), ct.isMatrix(e))
      return e.clone();
    if (Number.isInteger(e) && e > 0)
      if (this.data = [], Number.isInteger(t) && t > 0)
        for (let n = 0; n < e; n++)
          this.data.push(new Float64Array(t));
      else
        throw new TypeError("nColumns must be a positive integer");
    else if (Array.isArray(e)) {
      const n = e;
      if (e = n.length, t = n[0].length, typeof t != "number" || t === 0)
        throw new TypeError(
          "Data must be a 2D array with at least one element"
        );
      this.data = [];
      for (let a = 0; a < e; a++) {
        if (n[a].length !== t)
          throw new RangeError("Inconsistent array dimensions");
        this.data.push(Float64Array.from(n[a]));
      }
    } else
      throw new TypeError(
        "First argument must be a positive number or an array"
      );
    return this.rows = e, this.columns = t, this;
  }
  set(e, t, n) {
    return this.data[e][t] = n, this;
  }
  get(e, t) {
    return this.data[e][t];
  }
  removeRow(e) {
    if (na(this, e), this.rows === 1)
      throw new RangeError("A matrix cannot have less than one row");
    return this.data.splice(e, 1), this.rows -= 1, this;
  }
  addRow(e, t) {
    return t === void 0 && (t = e, e = this.rows), na(this, e, !0), t = Float64Array.from(Bs(this, t)), this.data.splice(e, 0, t), this.rows += 1, this;
  }
  removeColumn(e) {
    if (aa(this, e), this.columns === 1)
      throw new RangeError("A matrix cannot have less than one column");
    for (let t = 0; t < this.rows; t++) {
      const n = new Float64Array(this.columns - 1);
      for (let a = 0; a < e; a++)
        n[a] = this.data[t][a];
      for (let a = e + 1; a < this.columns; a++)
        n[a - 1] = this.data[t][a];
      this.data[t] = n;
    }
    return this.columns -= 1, this;
  }
  addColumn(e, t) {
    typeof t > "u" && (t = e, e = this.columns), aa(this, e, !0), t = Fs(this, t);
    for (let n = 0; n < this.rows; n++) {
      const a = new Float64Array(this.columns + 1);
      let i = 0;
      for (; i < e; i++)
        a[i] = this.data[n][i];
      for (a[i++] = t[n]; i < this.columns + 1; i++)
        a[i] = this.data[n][i - 1];
      this.data[n] = a;
    }
    return this.columns += 1, this;
  }
}
qre(Xt, ct);
class Di extends Xt {
  constructor(e, t, n) {
    super(), this.matrix = e, this.rows = t, this.columns = n;
  }
}
class pne extends Di {
  constructor(e, t) {
    aa(e, t), super(e, e.rows, 1), this.column = t;
  }
  set(e, t, n) {
    return this.matrix.set(e, this.column, n), this;
  }
  get(e) {
    return this.matrix.get(e, this.column);
  }
}
class gne extends Di {
  constructor(e, t) {
    t = xD(e, t), super(e, e.rows, t.length), this.columnIndices = t;
  }
  set(e, t, n) {
    return this.matrix.set(e, this.columnIndices[t], n), this;
  }
  get(e, t) {
    return this.matrix.get(e, this.columnIndices[t]);
  }
}
class yne extends Di {
  constructor(e) {
    super(e, e.rows, e.columns);
  }
  set(e, t, n) {
    return this.matrix.set(e, this.columns - t - 1, n), this;
  }
  get(e, t) {
    return this.matrix.get(e, this.columns - t - 1);
  }
}
class mne extends Di {
  constructor(e) {
    super(e, e.rows, e.columns);
  }
  set(e, t, n) {
    return this.matrix.set(this.rows - e - 1, t, n), this;
  }
  get(e, t) {
    return this.matrix.get(this.rows - e - 1, t);
  }
}
class bne extends Di {
  constructor(e, t) {
    na(e, t), super(e, 1, e.columns), this.row = t;
  }
  set(e, t, n) {
    return this.matrix.set(this.row, t, n), this;
  }
  get(e, t) {
    return this.matrix.get(this.row, t);
  }
}
class Ene extends Di {
  constructor(e, t) {
    t = ED(e, t), super(e, t.length, e.columns), this.rowIndices = t;
  }
  set(e, t, n) {
    return this.matrix.set(this.rowIndices[e], t, n), this;
  }
  get(e, t) {
    return this.matrix.get(this.rowIndices[e], t);
  }
}
class fh extends Di {
  constructor(e, t, n) {
    let a = bD(e, t, n);
    super(e, a.row.length, a.column.length), this.rowIndices = a.row, this.columnIndices = a.column;
  }
  set(e, t, n) {
    return this.matrix.set(
      this.rowIndices[e],
      this.columnIndices[t],
      n
    ), this;
  }
  get(e, t) {
    return this.matrix.get(
      this.rowIndices[e],
      this.columnIndices[t]
    );
  }
}
class xne extends Di {
  constructor(e, t, n, a, i) {
    Bg(e, t, n, a, i), super(e, n - t + 1, i - a + 1), this.startRow = t, this.startColumn = a;
  }
  set(e, t, n) {
    return this.matrix.set(
      this.startRow + e,
      this.startColumn + t,
      n
    ), this;
  }
  get(e, t) {
    return this.matrix.get(
      this.startRow + e,
      this.startColumn + t
    );
  }
}
class wne extends Di {
  constructor(e) {
    super(e, e.columns, e.rows);
  }
  set(e, t, n) {
    return this.matrix.set(t, e, n), this;
  }
  get(e, t) {
    return this.matrix.get(t, e);
  }
}
class wD extends Xt {
  constructor(e, t = {}) {
    const { rows: n = 1 } = t;
    if (e.length % n !== 0)
      throw new Error("the data length is not divisible by the number of rows");
    super(), this.rows = n, this.columns = e.length / n, this.data = e;
  }
  set(e, t, n) {
    let a = this._calculateIndex(e, t);
    return this.data[a] = n, this;
  }
  get(e, t) {
    let n = this._calculateIndex(e, t);
    return this.data[n];
  }
  _calculateIndex(e, t) {
    return e * this.columns + t;
  }
}
class Hn extends Xt {
  constructor(e) {
    super(), this.data = e, this.rows = e.length, this.columns = e[0].length;
  }
  set(e, t, n) {
    return this.data[e][t] = n, this;
  }
  get(e, t) {
    return this.data[e][t];
  }
}
function _ne(r, e) {
  if (Array.isArray(r))
    return r[0] && Array.isArray(r[0]) ? new Hn(r) : new wD(r, e);
  throw new Error("the argument is not an array");
}
class Zh {
  constructor(e) {
    e = Hn.checkMatrix(e);
    let t = e.clone(), n = t.rows, a = t.columns, i = new Float64Array(n), o = 1, s, u, f, l, c, h, d, v, p;
    for (s = 0; s < n; s++)
      i[s] = s;
    for (v = new Float64Array(n), u = 0; u < a; u++) {
      for (s = 0; s < n; s++)
        v[s] = t.get(s, u);
      for (s = 0; s < n; s++) {
        for (p = Math.min(s, u), c = 0, f = 0; f < p; f++)
          c += t.get(s, f) * v[f];
        v[s] -= c, t.set(s, u, v[s]);
      }
      for (l = u, s = u + 1; s < n; s++)
        Math.abs(v[s]) > Math.abs(v[l]) && (l = s);
      if (l !== u) {
        for (f = 0; f < a; f++)
          h = t.get(l, f), t.set(l, f, t.get(u, f)), t.set(u, f, h);
        d = i[l], i[l] = i[u], i[u] = d, o = -o;
      }
      if (u < n && t.get(u, u) !== 0)
        for (s = u + 1; s < n; s++)
          t.set(s, u, t.get(s, u) / t.get(u, u));
    }
    this.LU = t, this.pivotVector = i, this.pivotSign = o;
  }
  isSingular() {
    let e = this.LU, t = e.columns;
    for (let n = 0; n < t; n++)
      if (e.get(n, n) === 0)
        return !0;
    return !1;
  }
  solve(e) {
    e = ct.checkMatrix(e);
    let t = this.LU;
    if (t.rows !== e.rows)
      throw new Error("Invalid matrix dimensions");
    if (this.isSingular())
      throw new Error("LU matrix is singular");
    let a = e.columns, i = e.subMatrixRow(this.pivotVector, 0, a - 1), o = t.columns, s, u, f;
    for (f = 0; f < o; f++)
      for (s = f + 1; s < o; s++)
        for (u = 0; u < a; u++)
          i.set(s, u, i.get(s, u) - i.get(f, u) * t.get(s, f));
    for (f = o - 1; f >= 0; f--) {
      for (u = 0; u < a; u++)
        i.set(f, u, i.get(f, u) / t.get(f, f));
      for (s = 0; s < f; s++)
        for (u = 0; u < a; u++)
          i.set(s, u, i.get(s, u) - i.get(f, u) * t.get(s, f));
    }
    return i;
  }
  get determinant() {
    let e = this.LU;
    if (!e.isSquare())
      throw new Error("Matrix must be square");
    let t = this.pivotSign, n = e.columns;
    for (let a = 0; a < n; a++)
      t *= e.get(a, a);
    return t;
  }
  get lowerTriangularMatrix() {
    let e = this.LU, t = e.rows, n = e.columns, a = new ct(t, n);
    for (let i = 0; i < t; i++)
      for (let o = 0; o < n; o++)
        i > o ? a.set(i, o, e.get(i, o)) : i === o ? a.set(i, o, 1) : a.set(i, o, 0);
    return a;
  }
  get upperTriangularMatrix() {
    let e = this.LU, t = e.rows, n = e.columns, a = new ct(t, n);
    for (let i = 0; i < t; i++)
      for (let o = 0; o < n; o++)
        i <= o ? a.set(i, o, e.get(i, o)) : a.set(i, o, 0);
    return a;
  }
  get pivotPermutationVector() {
    return Array.from(this.pivotVector);
  }
}
function bi(r, e) {
  let t = 0;
  return Math.abs(r) > Math.abs(e) ? (t = e / r, Math.abs(r) * Math.sqrt(1 + t * t)) : e !== 0 ? (t = r / e, Math.abs(e) * Math.sqrt(1 + t * t)) : 0;
}
class Fg {
  constructor(e) {
    e = Hn.checkMatrix(e);
    let t = e.clone(), n = e.rows, a = e.columns, i = new Float64Array(a), o, s, u, f;
    for (u = 0; u < a; u++) {
      let l = 0;
      for (o = u; o < n; o++)
        l = bi(l, t.get(o, u));
      if (l !== 0) {
        for (t.get(u, u) < 0 && (l = -l), o = u; o < n; o++)
          t.set(o, u, t.get(o, u) / l);
        for (t.set(u, u, t.get(u, u) + 1), s = u + 1; s < a; s++) {
          for (f = 0, o = u; o < n; o++)
            f += t.get(o, u) * t.get(o, s);
          for (f = -f / t.get(u, u), o = u; o < n; o++)
            t.set(o, s, t.get(o, s) + f * t.get(o, u));
        }
      }
      i[u] = -l;
    }
    this.QR = t, this.Rdiag = i;
  }
  solve(e) {
    e = ct.checkMatrix(e);
    let t = this.QR, n = t.rows;
    if (e.rows !== n)
      throw new Error("Matrix row dimensions must agree");
    if (!this.isFullRank())
      throw new Error("Matrix is rank deficient");
    let a = e.columns, i = e.clone(), o = t.columns, s, u, f, l;
    for (f = 0; f < o; f++)
      for (u = 0; u < a; u++) {
        for (l = 0, s = f; s < n; s++)
          l += t.get(s, f) * i.get(s, u);
        for (l = -l / t.get(f, f), s = f; s < n; s++)
          i.set(s, u, i.get(s, u) + l * t.get(s, f));
      }
    for (f = o - 1; f >= 0; f--) {
      for (u = 0; u < a; u++)
        i.set(f, u, i.get(f, u) / this.Rdiag[f]);
      for (s = 0; s < f; s++)
        for (u = 0; u < a; u++)
          i.set(s, u, i.get(s, u) - i.get(f, u) * t.get(s, f));
    }
    return i.subMatrix(0, o - 1, 0, a - 1);
  }
  isFullRank() {
    let e = this.QR.columns;
    for (let t = 0; t < e; t++)
      if (this.Rdiag[t] === 0)
        return !1;
    return !0;
  }
  get upperTriangularMatrix() {
    let e = this.QR, t = e.columns, n = new ct(t, t), a, i;
    for (a = 0; a < t; a++)
      for (i = 0; i < t; i++)
        a < i ? n.set(a, i, e.get(a, i)) : a === i ? n.set(a, i, this.Rdiag[a]) : n.set(a, i, 0);
    return n;
  }
  get orthogonalMatrix() {
    let e = this.QR, t = e.rows, n = e.columns, a = new ct(t, n), i, o, s, u;
    for (s = n - 1; s >= 0; s--) {
      for (i = 0; i < t; i++)
        a.set(i, s, 0);
      for (a.set(s, s, 1), o = s; o < n; o++)
        if (e.get(s, s) !== 0) {
          for (u = 0, i = s; i < t; i++)
            u += e.get(i, s) * a.get(i, o);
          for (u = -u / e.get(s, s), i = s; i < t; i++)
            a.set(i, o, a.get(i, o) + u * e.get(i, s));
        }
    }
    return a;
  }
}
class hu {
  constructor(e, t = {}) {
    e = Hn.checkMatrix(e);
    let n = e.rows, a = e.columns;
    const {
      computeLeftSingularVectors: i = !0,
      computeRightSingularVectors: o = !0,
      autoTranspose: s = !1
    } = t;
    let u = !!i, f = !!o, l = !1, c;
    if (n < a)
      if (!s)
        c = e.clone(), console.warn(
          "Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose"
        );
      else {
        c = e.transpose(), n = c.rows, a = c.columns, l = !0;
        let S = u;
        u = f, f = S;
      }
    else
      c = e.clone();
    let h = Math.min(n, a), d = Math.min(n + 1, a), v = new Float64Array(d), p = new ct(n, h), g = new ct(a, a), y = new Float64Array(a), m = new Float64Array(n), b = new Float64Array(d);
    for (let S = 0; S < d; S++)
      b[S] = S;
    let E = Math.min(n - 1, a), x = Math.max(0, Math.min(a - 2, n)), w = Math.max(E, x);
    for (let S = 0; S < w; S++) {
      if (S < E) {
        v[S] = 0;
        for (let T = S; T < n; T++)
          v[S] = bi(v[S], c.get(T, S));
        if (v[S] !== 0) {
          c.get(S, S) < 0 && (v[S] = -v[S]);
          for (let T = S; T < n; T++)
            c.set(T, S, c.get(T, S) / v[S]);
          c.set(S, S, c.get(S, S) + 1);
        }
        v[S] = -v[S];
      }
      for (let T = S + 1; T < a; T++) {
        if (S < E && v[S] !== 0) {
          let C = 0;
          for (let O = S; O < n; O++)
            C += c.get(O, S) * c.get(O, T);
          C = -C / c.get(S, S);
          for (let O = S; O < n; O++)
            c.set(O, T, c.get(O, T) + C * c.get(O, S));
        }
        y[T] = c.get(S, T);
      }
      if (u && S < E)
        for (let T = S; T < n; T++)
          p.set(T, S, c.get(T, S));
      if (S < x) {
        y[S] = 0;
        for (let T = S + 1; T < a; T++)
          y[S] = bi(y[S], y[T]);
        if (y[S] !== 0) {
          y[S + 1] < 0 && (y[S] = 0 - y[S]);
          for (let T = S + 1; T < a; T++)
            y[T] /= y[S];
          y[S + 1] += 1;
        }
        if (y[S] = -y[S], S + 1 < n && y[S] !== 0) {
          for (let T = S + 1; T < n; T++)
            m[T] = 0;
          for (let T = S + 1; T < n; T++)
            for (let C = S + 1; C < a; C++)
              m[T] += y[C] * c.get(T, C);
          for (let T = S + 1; T < a; T++) {
            let C = -y[T] / y[S + 1];
            for (let O = S + 1; O < n; O++)
              c.set(O, T, c.get(O, T) + C * m[O]);
          }
        }
        if (f)
          for (let T = S + 1; T < a; T++)
            g.set(T, S, y[T]);
      }
    }
    let _ = Math.min(a, n + 1);
    if (E < a && (v[E] = c.get(E, E)), n < _ && (v[_ - 1] = 0), x + 1 < _ && (y[x] = c.get(x, _ - 1)), y[_ - 1] = 0, u) {
      for (let S = E; S < h; S++) {
        for (let T = 0; T < n; T++)
          p.set(T, S, 0);
        p.set(S, S, 1);
      }
      for (let S = E - 1; S >= 0; S--)
        if (v[S] !== 0) {
          for (let T = S + 1; T < h; T++) {
            let C = 0;
            for (let O = S; O < n; O++)
              C += p.get(O, S) * p.get(O, T);
            C = -C / p.get(S, S);
            for (let O = S; O < n; O++)
              p.set(O, T, p.get(O, T) + C * p.get(O, S));
          }
          for (let T = S; T < n; T++)
            p.set(T, S, -p.get(T, S));
          p.set(S, S, 1 + p.get(S, S));
          for (let T = 0; T < S - 1; T++)
            p.set(T, S, 0);
        } else {
          for (let T = 0; T < n; T++)
            p.set(T, S, 0);
          p.set(S, S, 1);
        }
    }
    if (f)
      for (let S = a - 1; S >= 0; S--) {
        if (S < x && y[S] !== 0)
          for (let T = S + 1; T < a; T++) {
            let C = 0;
            for (let O = S + 1; O < a; O++)
              C += g.get(O, S) * g.get(O, T);
            C = -C / g.get(S + 1, S);
            for (let O = S + 1; O < a; O++)
              g.set(O, T, g.get(O, T) + C * g.get(O, S));
          }
        for (let T = 0; T < a; T++)
          g.set(T, S, 0);
        g.set(S, S, 1);
      }
    let M = _ - 1, A = Number.EPSILON;
    for (; _ > 0; ) {
      let S, T;
      for (S = _ - 2; S >= -1 && S !== -1; S--) {
        const C = Number.MIN_VALUE + A * Math.abs(v[S] + Math.abs(v[S + 1]));
        if (Math.abs(y[S]) <= C || Number.isNaN(y[S])) {
          y[S] = 0;
          break;
        }
      }
      if (S === _ - 2)
        T = 4;
      else {
        let C;
        for (C = _ - 1; C >= S && C !== S; C--) {
          let O = (C !== _ ? Math.abs(y[C]) : 0) + (C !== S + 1 ? Math.abs(y[C - 1]) : 0);
          if (Math.abs(v[C]) <= A * O) {
            v[C] = 0;
            break;
          }
        }
        C === S ? T = 3 : C === _ - 1 ? T = 1 : (T = 2, S = C);
      }
      switch (S++, T) {
        case 1: {
          let C = y[_ - 2];
          y[_ - 2] = 0;
          for (let O = _ - 2; O >= S; O--) {
            let L = bi(v[O], C), R = v[O] / L, P = C / L;
            if (v[O] = L, O !== S && (C = -P * y[O - 1], y[O - 1] = R * y[O - 1]), f)
              for (let z = 0; z < a; z++)
                L = R * g.get(z, O) + P * g.get(z, _ - 1), g.set(z, _ - 1, -P * g.get(z, O) + R * g.get(z, _ - 1)), g.set(z, O, L);
          }
          break;
        }
        case 2: {
          let C = y[S - 1];
          y[S - 1] = 0;
          for (let O = S; O < _; O++) {
            let L = bi(v[O], C), R = v[O] / L, P = C / L;
            if (v[O] = L, C = -P * y[O], y[O] = R * y[O], u)
              for (let z = 0; z < n; z++)
                L = R * p.get(z, O) + P * p.get(z, S - 1), p.set(z, S - 1, -P * p.get(z, O) + R * p.get(z, S - 1)), p.set(z, O, L);
          }
          break;
        }
        case 3: {
          const C = Math.max(
            Math.abs(v[_ - 1]),
            Math.abs(v[_ - 2]),
            Math.abs(y[_ - 2]),
            Math.abs(v[S]),
            Math.abs(y[S])
          ), O = v[_ - 1] / C, L = v[_ - 2] / C, R = y[_ - 2] / C, P = v[S] / C, z = y[S] / C, V = ((L + O) * (L - O) + R * R) / 2, N = O * R * (O * R);
          let F = 0;
          (V !== 0 || N !== 0) && (V < 0 ? F = 0 - Math.sqrt(V * V + N) : F = Math.sqrt(V * V + N), F = N / (V + F));
          let q = (P + O) * (P - O) + F, te = P * z;
          for (let re = S; re < _ - 1; re++) {
            let J = bi(q, te);
            J === 0 && (J = Number.MIN_VALUE);
            let ye = q / J, Be = te / J;
            if (re !== S && (y[re - 1] = J), q = ye * v[re] + Be * y[re], y[re] = ye * y[re] - Be * v[re], te = Be * v[re + 1], v[re + 1] = ye * v[re + 1], f)
              for (let Pe = 0; Pe < a; Pe++)
                J = ye * g.get(Pe, re) + Be * g.get(Pe, re + 1), g.set(Pe, re + 1, -Be * g.get(Pe, re) + ye * g.get(Pe, re + 1)), g.set(Pe, re, J);
            if (J = bi(q, te), J === 0 && (J = Number.MIN_VALUE), ye = q / J, Be = te / J, v[re] = J, q = ye * y[re] + Be * v[re + 1], v[re + 1] = -Be * y[re] + ye * v[re + 1], te = Be * y[re + 1], y[re + 1] = ye * y[re + 1], u && re < n - 1)
              for (let Pe = 0; Pe < n; Pe++)
                J = ye * p.get(Pe, re) + Be * p.get(Pe, re + 1), p.set(Pe, re + 1, -Be * p.get(Pe, re) + ye * p.get(Pe, re + 1)), p.set(Pe, re, J);
          }
          y[_ - 2] = q;
          break;
        }
        case 4: {
          if (v[S] <= 0 && (v[S] = v[S] < 0 ? -v[S] : 0, f))
            for (let C = 0; C <= M; C++)
              g.set(C, S, -g.get(C, S));
          for (; S < M && !(v[S] >= v[S + 1]); ) {
            let C = v[S];
            if (v[S] = v[S + 1], v[S + 1] = C, f && S < a - 1)
              for (let O = 0; O < a; O++)
                C = g.get(O, S + 1), g.set(O, S + 1, g.get(O, S)), g.set(O, S, C);
            if (u && S < n - 1)
              for (let O = 0; O < n; O++)
                C = p.get(O, S + 1), p.set(O, S + 1, p.get(O, S)), p.set(O, S, C);
            S++;
          }
          _--;
          break;
        }
      }
    }
    if (l) {
      let S = g;
      g = p, p = S;
    }
    this.m = n, this.n = a, this.s = v, this.U = p, this.V = g;
  }
  solve(e) {
    let t = e, n = this.threshold, a = this.s.length, i = ct.zeros(a, a);
    for (let h = 0; h < a; h++)
      Math.abs(this.s[h]) <= n ? i.set(h, h, 0) : i.set(h, h, 1 / this.s[h]);
    let o = this.U, s = this.rightSingularVectors, u = s.mmul(i), f = s.rows, l = o.rows, c = ct.zeros(f, l);
    for (let h = 0; h < f; h++)
      for (let d = 0; d < l; d++) {
        let v = 0;
        for (let p = 0; p < a; p++)
          v += u.get(h, p) * o.get(d, p);
        c.set(h, d, v);
      }
    return c.mmul(t);
  }
  solveForDiagonal(e) {
    return this.solve(ct.diag(e));
  }
  inverse() {
    let e = this.V, t = this.threshold, n = e.rows, a = e.columns, i = new ct(n, this.s.length);
    for (let l = 0; l < n; l++)
      for (let c = 0; c < a; c++)
        Math.abs(this.s[c]) > t && i.set(l, c, e.get(l, c) / this.s[c]);
    let o = this.U, s = o.rows, u = o.columns, f = new ct(n, s);
    for (let l = 0; l < n; l++)
      for (let c = 0; c < s; c++) {
        let h = 0;
        for (let d = 0; d < u; d++)
          h += i.get(l, d) * o.get(c, d);
        f.set(l, c, h);
      }
    return f;
  }
  get condition() {
    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];
  }
  get norm2() {
    return this.s[0];
  }
  get rank() {
    let e = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON, t = 0, n = this.s;
    for (let a = 0, i = n.length; a < i; a++)
      n[a] > e && t++;
    return t;
  }
  get diagonal() {
    return Array.from(this.s);
  }
  get threshold() {
    return Number.EPSILON / 2 * Math.max(this.m, this.n) * this.s[0];
  }
  get leftSingularVectors() {
    return this.U;
  }
  get rightSingularVectors() {
    return this.V;
  }
  get diagonalMatrix() {
    return ct.diag(this.s);
  }
}
function Mne(r, e = !1) {
  return r = Hn.checkMatrix(r), e ? new hu(r).inverse() : _D(r, ct.eye(r.rows));
}
function _D(r, e, t = !1) {
  return r = Hn.checkMatrix(r), e = Hn.checkMatrix(e), t ? new hu(r).solve(e) : r.isSquare() ? new Zh(r).solve(e) : new Fg(r).solve(e);
}
function lh(r) {
  if (r = ct.checkMatrix(r), r.isSquare()) {
    let e, t, n, a;
    if (r.columns === 2)
      return e = r.get(0, 0), t = r.get(0, 1), n = r.get(1, 0), a = r.get(1, 1), e * a - t * n;
    if (r.columns === 3) {
      let i, o, s;
      return i = new fh(r, [1, 2], [1, 2]), o = new fh(r, [1, 2], [0, 2]), s = new fh(r, [1, 2], [0, 1]), e = r.get(0, 0), t = r.get(0, 1), n = r.get(0, 2), e * lh(i) - t * lh(o) + n * lh(s);
    } else
      return new Zh(r).determinant;
  } else
    throw Error("determinant can only be calculated for a square matrix");
}
function Sne(r, e) {
  let t = [];
  for (let n = 0; n < r; n++)
    n !== e && t.push(n);
  return t;
}
function Ane(r, e, t, n = 1e-9, a = 1e-9) {
  if (r > a)
    return new Array(e.rows + 1).fill(0);
  {
    let i = e.addRow(t, [0]);
    for (let o = 0; o < i.rows; o++)
      Math.abs(i.get(o, 0)) < n && i.set(o, 0, 0);
    return i.to1DArray();
  }
}
function Cne(r, e = {}) {
  const { thresholdValue: t = 1e-9, thresholdError: n = 1e-9 } = e;
  r = ct.checkMatrix(r);
  let a = r.rows, i = new ct(a, a);
  for (let o = 0; o < a; o++) {
    let s = ct.columnVector(r.getRow(o)), u = r.subMatrixRow(Sne(a, o)).transpose(), l = new hu(u).solve(s), c = ct.sub(s, u.mmul(l)).abs().max();
    i.setRow(
      o,
      Ane(c, l, o, t, n)
    );
  }
  return i;
}
function Tne(r, e = Number.EPSILON) {
  r = ct.checkMatrix(r);
  let t = new hu(r, { autoTranspose: !0 }), n = t.leftSingularVectors, a = t.rightSingularVectors, i = t.diagonal;
  for (let o = 0; o < i.length; o++)
    Math.abs(i[o]) > e ? i[o] = 1 / i[o] : i[o] = 0;
  return a.mmul(ct.diag(i).mmul(n.transpose()));
}
function Ine(r, e = r, t = {}) {
  r = new ct(r);
  let n = !1;
  if (typeof e == "object" && !ct.isMatrix(e) && !Array.isArray(e) ? (t = e, e = r, n = !0) : e = new ct(e), r.rows !== e.rows)
    throw new TypeError("Both matrices must have the same number of rows");
  const { center: a = !0 } = t;
  a && (r = r.center("column"), n || (e = e.center("column")));
  const i = r.transpose().mmul(e);
  for (let o = 0; o < i.rows; o++)
    for (let s = 0; s < i.columns; s++)
      i.set(o, s, i.get(o, s) * (1 / (r.rows - 1)));
  return i;
}
function One(r, e = r, t = {}) {
  r = new ct(r);
  let n = !1;
  if (typeof e == "object" && !ct.isMatrix(e) && !Array.isArray(e) ? (t = e, e = r, n = !0) : e = new ct(e), r.rows !== e.rows)
    throw new TypeError("Both matrices must have the same number of rows");
  const { center: a = !0, scale: i = !0 } = t;
  a && (r.center("column"), n || e.center("column")), i && (r.scale("column"), n || e.scale("column"));
  const o = r.standardDeviation("column", { unbiased: !0 }), s = n ? o : e.standardDeviation("column", { unbiased: !0 }), u = r.transpose().mmul(e);
  for (let f = 0; f < u.rows; f++)
    for (let l = 0; l < u.columns; l++)
      u.set(
        f,
        l,
        u.get(f, l) * (1 / (o[f] * s[l])) * (1 / (r.rows - 1))
      );
  return u;
}
class e2 {
  constructor(e, t = {}) {
    const { assumeSymmetric: n = !1 } = t;
    if (e = Hn.checkMatrix(e), !e.isSquare())
      throw new Error("Matrix is not a square matrix");
    let a = e.columns, i = new ct(a, a), o = new Float64Array(a), s = new Float64Array(a), u = e, f, l, c = !1;
    if (n ? c = !0 : c = e.isSymmetric(), c) {
      for (f = 0; f < a; f++)
        for (l = 0; l < a; l++)
          i.set(f, l, u.get(f, l));
      Dne(a, s, o, i), Lne(a, s, o, i);
    } else {
      let h = new ct(a, a), d = new Float64Array(a);
      for (l = 0; l < a; l++)
        for (f = 0; f < a; f++)
          h.set(f, l, u.get(f, l));
      Nne(a, h, d, i), Pne(a, s, o, i, h);
    }
    this.n = a, this.e = s, this.d = o, this.V = i;
  }
  get realEigenvalues() {
    return Array.from(this.d);
  }
  get imaginaryEigenvalues() {
    return Array.from(this.e);
  }
  get eigenvectorMatrix() {
    return this.V;
  }
  get diagonalMatrix() {
    let e = this.n, t = this.e, n = this.d, a = new ct(e, e), i, o;
    for (i = 0; i < e; i++) {
      for (o = 0; o < e; o++)
        a.set(i, o, 0);
      a.set(i, i, n[i]), t[i] > 0 ? a.set(i, i + 1, t[i]) : t[i] < 0 && a.set(i, i - 1, t[i]);
    }
    return a;
  }
}
function Dne(r, e, t, n) {
  let a, i, o, s, u, f, l, c;
  for (u = 0; u < r; u++)
    t[u] = n.get(r - 1, u);
  for (s = r - 1; s > 0; s--) {
    for (c = 0, o = 0, f = 0; f < s; f++)
      c = c + Math.abs(t[f]);
    if (c === 0)
      for (e[s] = t[s - 1], u = 0; u < s; u++)
        t[u] = n.get(s - 1, u), n.set(s, u, 0), n.set(u, s, 0);
    else {
      for (f = 0; f < s; f++)
        t[f] /= c, o += t[f] * t[f];
      for (a = t[s - 1], i = Math.sqrt(o), a > 0 && (i = -i), e[s] = c * i, o = o - a * i, t[s - 1] = a - i, u = 0; u < s; u++)
        e[u] = 0;
      for (u = 0; u < s; u++) {
        for (a = t[u], n.set(u, s, a), i = e[u] + n.get(u, u) * a, f = u + 1; f <= s - 1; f++)
          i += n.get(f, u) * t[f], e[f] += n.get(f, u) * a;
        e[u] = i;
      }
      for (a = 0, u = 0; u < s; u++)
        e[u] /= o, a += e[u] * t[u];
      for (l = a / (o + o), u = 0; u < s; u++)
        e[u] -= l * t[u];
      for (u = 0; u < s; u++) {
        for (a = t[u], i = e[u], f = u; f <= s - 1; f++)
          n.set(f, u, n.get(f, u) - (a * e[f] + i * t[f]));
        t[u] = n.get(s - 1, u), n.set(s, u, 0);
      }
    }
    t[s] = o;
  }
  for (s = 0; s < r - 1; s++) {
    if (n.set(r - 1, s, n.get(s, s)), n.set(s, s, 1), o = t[s + 1], o !== 0) {
      for (f = 0; f <= s; f++)
        t[f] = n.get(f, s + 1) / o;
      for (u = 0; u <= s; u++) {
        for (i = 0, f = 0; f <= s; f++)
          i += n.get(f, s + 1) * n.get(f, u);
        for (f = 0; f <= s; f++)
          n.set(f, u, n.get(f, u) - i * t[f]);
      }
    }
    for (f = 0; f <= s; f++)
      n.set(f, s + 1, 0);
  }
  for (u = 0; u < r; u++)
    t[u] = n.get(r - 1, u), n.set(r - 1, u, 0);
  n.set(r - 1, r - 1, 1), e[0] = 0;
}
function Lne(r, e, t, n) {
  let a, i, o, s, u, f, l, c, h, d, v, p, g, y, m, b;
  for (o = 1; o < r; o++)
    e[o - 1] = e[o];
  e[r - 1] = 0;
  let E = 0, x = 0, w = Number.EPSILON;
  for (f = 0; f < r; f++) {
    for (x = Math.max(x, Math.abs(t[f]) + Math.abs(e[f])), l = f; l < r && !(Math.abs(e[l]) <= w * x); )
      l++;
    if (l > f)
      do {
        for (a = t[f], c = (t[f + 1] - a) / (2 * e[f]), h = bi(c, 1), c < 0 && (h = -h), t[f] = e[f] / (c + h), t[f + 1] = e[f] * (c + h), d = t[f + 1], i = a - t[f], o = f + 2; o < r; o++)
          t[o] -= i;
        for (E = E + i, c = t[l], v = 1, p = v, g = v, y = e[f + 1], m = 0, b = 0, o = l - 1; o >= f; o--)
          for (g = p, p = v, b = m, a = v * e[o], i = v * c, h = bi(c, e[o]), e[o + 1] = m * h, m = e[o] / h, v = c / h, c = v * t[o] - m * a, t[o + 1] = i + m * (v * a + m * t[o]), u = 0; u < r; u++)
            i = n.get(u, o + 1), n.set(u, o + 1, m * n.get(u, o) + v * i), n.set(u, o, v * n.get(u, o) - m * i);
        c = -m * b * g * y * e[f] / d, e[f] = m * c, t[f] = v * c;
      } while (Math.abs(e[f]) > w * x);
    t[f] = t[f] + E, e[f] = 0;
  }
  for (o = 0; o < r - 1; o++) {
    for (u = o, c = t[o], s = o + 1; s < r; s++)
      t[s] < c && (u = s, c = t[s]);
    if (u !== o)
      for (t[u] = t[o], t[o] = c, s = 0; s < r; s++)
        c = n.get(s, o), n.set(s, o, n.get(s, u)), n.set(s, u, c);
  }
}
function Nne(r, e, t, n) {
  let a = 0, i = r - 1, o, s, u, f, l, c, h;
  for (c = a + 1; c <= i - 1; c++) {
    for (h = 0, f = c; f <= i; f++)
      h = h + Math.abs(e.get(f, c - 1));
    if (h !== 0) {
      for (u = 0, f = i; f >= c; f--)
        t[f] = e.get(f, c - 1) / h, u += t[f] * t[f];
      for (s = Math.sqrt(u), t[c] > 0 && (s = -s), u = u - t[c] * s, t[c] = t[c] - s, l = c; l < r; l++) {
        for (o = 0, f = i; f >= c; f--)
          o += t[f] * e.get(f, l);
        for (o = o / u, f = c; f <= i; f++)
          e.set(f, l, e.get(f, l) - o * t[f]);
      }
      for (f = 0; f <= i; f++) {
        for (o = 0, l = i; l >= c; l--)
          o += t[l] * e.get(f, l);
        for (o = o / u, l = c; l <= i; l++)
          e.set(f, l, e.get(f, l) - o * t[l]);
      }
      t[c] = h * t[c], e.set(c, c - 1, h * s);
    }
  }
  for (f = 0; f < r; f++)
    for (l = 0; l < r; l++)
      n.set(f, l, f === l ? 1 : 0);
  for (c = i - 1; c >= a + 1; c--)
    if (e.get(c, c - 1) !== 0) {
      for (f = c + 1; f <= i; f++)
        t[f] = e.get(f, c - 1);
      for (l = c; l <= i; l++) {
        for (s = 0, f = c; f <= i; f++)
          s += t[f] * n.get(f, l);
        for (s = s / t[c] / e.get(c, c - 1), f = c; f <= i; f++)
          n.set(f, l, n.get(f, l) + s * t[f]);
      }
    }
}
function Pne(r, e, t, n, a) {
  let i = r - 1, o = 0, s = r - 1, u = Number.EPSILON, f = 0, l = 0, c = 0, h = 0, d = 0, v = 0, p = 0, g = 0, y, m, b, E, x, w, _, M, A, S, T, C, O, L, R;
  for (y = 0; y < r; y++)
    for ((y < o || y > s) && (t[y] = a.get(y, y), e[y] = 0), m = Math.max(y - 1, 0); m < r; m++)
      l = l + Math.abs(a.get(y, m));
  for (; i >= o; ) {
    for (E = i; E > o && (v = Math.abs(a.get(E - 1, E - 1)) + Math.abs(a.get(E, E)), v === 0 && (v = l), !(Math.abs(a.get(E, E - 1)) < u * v)); )
      E--;
    if (E === i)
      a.set(i, i, a.get(i, i) + f), t[i] = a.get(i, i), e[i] = 0, i--, g = 0;
    else if (E === i - 1) {
      if (_ = a.get(i, i - 1) * a.get(i - 1, i), c = (a.get(i - 1, i - 1) - a.get(i, i)) / 2, h = c * c + _, p = Math.sqrt(Math.abs(h)), a.set(i, i, a.get(i, i) + f), a.set(i - 1, i - 1, a.get(i - 1, i - 1) + f), M = a.get(i, i), h >= 0) {
        for (p = c >= 0 ? c + p : c - p, t[i - 1] = M + p, t[i] = t[i - 1], p !== 0 && (t[i] = M - _ / p), e[i - 1] = 0, e[i] = 0, M = a.get(i, i - 1), v = Math.abs(M) + Math.abs(p), c = M / v, h = p / v, d = Math.sqrt(c * c + h * h), c = c / d, h = h / d, m = i - 1; m < r; m++)
          p = a.get(i - 1, m), a.set(i - 1, m, h * p + c * a.get(i, m)), a.set(i, m, h * a.get(i, m) - c * p);
        for (y = 0; y <= i; y++)
          p = a.get(y, i - 1), a.set(y, i - 1, h * p + c * a.get(y, i)), a.set(y, i, h * a.get(y, i) - c * p);
        for (y = o; y <= s; y++)
          p = n.get(y, i - 1), n.set(y, i - 1, h * p + c * n.get(y, i)), n.set(y, i, h * n.get(y, i) - c * p);
      } else
        t[i - 1] = M + c, t[i] = M + c, e[i - 1] = p, e[i] = -p;
      i = i - 2, g = 0;
    } else {
      if (M = a.get(i, i), A = 0, _ = 0, E < i && (A = a.get(i - 1, i - 1), _ = a.get(i, i - 1) * a.get(i - 1, i)), g === 10) {
        for (f += M, y = o; y <= i; y++)
          a.set(y, y, a.get(y, y) - M);
        v = Math.abs(a.get(i, i - 1)) + Math.abs(a.get(i - 1, i - 2)), M = A = 0.75 * v, _ = -0.4375 * v * v;
      }
      if (g === 30 && (v = (A - M) / 2, v = v * v + _, v > 0)) {
        for (v = Math.sqrt(v), A < M && (v = -v), v = M - _ / ((A - M) / 2 + v), y = o; y <= i; y++)
          a.set(y, y, a.get(y, y) - v);
        f += v, M = A = _ = 0.964;
      }
      for (g = g + 1, x = i - 2; x >= E && (p = a.get(x, x), d = M - p, v = A - p, c = (d * v - _) / a.get(x + 1, x) + a.get(x, x + 1), h = a.get(x + 1, x + 1) - p - d - v, d = a.get(x + 2, x + 1), v = Math.abs(c) + Math.abs(h) + Math.abs(d), c = c / v, h = h / v, d = d / v, !(x === E || Math.abs(a.get(x, x - 1)) * (Math.abs(h) + Math.abs(d)) < u * (Math.abs(c) * (Math.abs(a.get(x - 1, x - 1)) + Math.abs(p) + Math.abs(a.get(x + 1, x + 1)))))); )
        x--;
      for (y = x + 2; y <= i; y++)
        a.set(y, y - 2, 0), y > x + 2 && a.set(y, y - 3, 0);
      for (b = x; b <= i - 1 && (L = b !== i - 1, b !== x && (c = a.get(b, b - 1), h = a.get(b + 1, b - 1), d = L ? a.get(b + 2, b - 1) : 0, M = Math.abs(c) + Math.abs(h) + Math.abs(d), M !== 0 && (c = c / M, h = h / M, d = d / M)), M !== 0); b++)
        if (v = Math.sqrt(c * c + h * h + d * d), c < 0 && (v = -v), v !== 0) {
          for (b !== x ? a.set(b, b - 1, -v * M) : E !== x && a.set(b, b - 1, -a.get(b, b - 1)), c = c + v, M = c / v, A = h / v, p = d / v, h = h / c, d = d / c, m = b; m < r; m++)
            c = a.get(b, m) + h * a.get(b + 1, m), L && (c = c + d * a.get(b + 2, m), a.set(b + 2, m, a.get(b + 2, m) - c * p)), a.set(b, m, a.get(b, m) - c * M), a.set(b + 1, m, a.get(b + 1, m) - c * A);
          for (y = 0; y <= Math.min(i, b + 3); y++)
            c = M * a.get(y, b) + A * a.get(y, b + 1), L && (c = c + p * a.get(y, b + 2), a.set(y, b + 2, a.get(y, b + 2) - c * d)), a.set(y, b, a.get(y, b) - c), a.set(y, b + 1, a.get(y, b + 1) - c * h);
          for (y = o; y <= s; y++)
            c = M * n.get(y, b) + A * n.get(y, b + 1), L && (c = c + p * n.get(y, b + 2), n.set(y, b + 2, n.get(y, b + 2) - c * d)), n.set(y, b, n.get(y, b) - c), n.set(y, b + 1, n.get(y, b + 1) - c * h);
        }
    }
  }
  if (l !== 0) {
    for (i = r - 1; i >= 0; i--)
      if (c = t[i], h = e[i], h === 0)
        for (E = i, a.set(i, i, 1), y = i - 1; y >= 0; y--) {
          for (_ = a.get(y, y) - c, d = 0, m = E; m <= i; m++)
            d = d + a.get(y, m) * a.get(m, i);
          if (e[y] < 0)
            p = _, v = d;
          else if (E = y, e[y] === 0 ? a.set(y, i, _ !== 0 ? -d / _ : -d / (u * l)) : (M = a.get(y, y + 1), A = a.get(y + 1, y), h = (t[y] - c) * (t[y] - c) + e[y] * e[y], w = (M * v - p * d) / h, a.set(y, i, w), a.set(
            y + 1,
            i,
            Math.abs(M) > Math.abs(p) ? (-d - _ * w) / M : (-v - A * w) / p
          )), w = Math.abs(a.get(y, i)), u * w * w > 1)
            for (m = y; m <= i; m++)
              a.set(m, i, a.get(m, i) / w);
        }
      else if (h < 0)
        for (E = i - 1, Math.abs(a.get(i, i - 1)) > Math.abs(a.get(i - 1, i)) ? (a.set(i - 1, i - 1, h / a.get(i, i - 1)), a.set(i - 1, i, -(a.get(i, i) - c) / a.get(i, i - 1))) : (R = Dc(0, -a.get(i - 1, i), a.get(i - 1, i - 1) - c, h), a.set(i - 1, i - 1, R[0]), a.set(i - 1, i, R[1])), a.set(i, i - 1, 0), a.set(i, i, 1), y = i - 2; y >= 0; y--) {
          for (S = 0, T = 0, m = E; m <= i; m++)
            S = S + a.get(y, m) * a.get(m, i - 1), T = T + a.get(y, m) * a.get(m, i);
          if (_ = a.get(y, y) - c, e[y] < 0)
            p = _, d = S, v = T;
          else if (E = y, e[y] === 0 ? (R = Dc(-S, -T, _, h), a.set(y, i - 1, R[0]), a.set(y, i, R[1])) : (M = a.get(y, y + 1), A = a.get(y + 1, y), C = (t[y] - c) * (t[y] - c) + e[y] * e[y] - h * h, O = (t[y] - c) * 2 * h, C === 0 && O === 0 && (C = u * l * (Math.abs(_) + Math.abs(h) + Math.abs(M) + Math.abs(A) + Math.abs(p))), R = Dc(
            M * d - p * S + h * T,
            M * v - p * T - h * S,
            C,
            O
          ), a.set(y, i - 1, R[0]), a.set(y, i, R[1]), Math.abs(M) > Math.abs(p) + Math.abs(h) ? (a.set(
            y + 1,
            i - 1,
            (-S - _ * a.get(y, i - 1) + h * a.get(y, i)) / M
          ), a.set(
            y + 1,
            i,
            (-T - _ * a.get(y, i) - h * a.get(y, i - 1)) / M
          )) : (R = Dc(
            -d - A * a.get(y, i - 1),
            -v - A * a.get(y, i),
            p,
            h
          ), a.set(y + 1, i - 1, R[0]), a.set(y + 1, i, R[1]))), w = Math.max(Math.abs(a.get(y, i - 1)), Math.abs(a.get(y, i))), u * w * w > 1)
            for (m = y; m <= i; m++)
              a.set(m, i - 1, a.get(m, i - 1) / w), a.set(m, i, a.get(m, i) / w);
        }
    for (y = 0; y < r; y++)
      if (y < o || y > s)
        for (m = y; m < r; m++)
          n.set(y, m, a.get(y, m));
    for (m = r - 1; m >= o; m--)
      for (y = o; y <= s; y++) {
        for (p = 0, b = o; b <= Math.min(m, s); b++)
          p = p + n.get(y, b) * a.get(b, m);
        n.set(y, m, p);
      }
  }
}
function Dc(r, e, t, n) {
  let a, i;
  return Math.abs(t) > Math.abs(n) ? (a = n / t, i = t + a * n, [(r + a * e) / i, (e - a * r) / i]) : (a = t / n, i = n + a * t, [(a * r + e) / i, (a * e - r) / i]);
}
class t2 {
  constructor(e) {
    if (e = Hn.checkMatrix(e), !e.isSymmetric())
      throw new Error("Matrix is not symmetric");
    let t = e, n = t.rows, a = new ct(n, n), i = !0, o, s, u;
    for (s = 0; s < n; s++) {
      let f = 0;
      for (u = 0; u < s; u++) {
        let l = 0;
        for (o = 0; o < u; o++)
          l += a.get(u, o) * a.get(s, o);
        l = (t.get(s, u) - l) / a.get(u, u), a.set(s, u, l), f = f + l * l;
      }
      for (f = t.get(s, s) - f, i &= f > 0, a.set(s, s, Math.sqrt(Math.max(f, 0))), u = s + 1; u < n; u++)
        a.set(s, u, 0);
    }
    this.L = a, this.positiveDefinite = !!i;
  }
  isPositiveDefinite() {
    return this.positiveDefinite;
  }
  solve(e) {
    e = Hn.checkMatrix(e);
    let t = this.L, n = t.rows;
    if (e.rows !== n)
      throw new Error("Matrix dimensions do not match");
    if (this.isPositiveDefinite() === !1)
      throw new Error("Matrix is not positive definite");
    let a = e.columns, i = e.clone(), o, s, u;
    for (u = 0; u < n; u++)
      for (s = 0; s < a; s++) {
        for (o = 0; o < u; o++)
          i.set(u, s, i.get(u, s) - i.get(o, s) * t.get(u, o));
        i.set(u, s, i.get(u, s) / t.get(u, u));
      }
    for (u = n - 1; u >= 0; u--)
      for (s = 0; s < a; s++) {
        for (o = u + 1; o < n; o++)
          i.set(u, s, i.get(u, s) - i.get(o, s) * t.get(o, u));
        i.set(u, s, i.get(u, s) / t.get(u, u));
      }
    return i;
  }
  get lowerTriangularMatrix() {
    return this.L;
  }
}
class r2 {
  constructor(e, t = {}) {
    e = Hn.checkMatrix(e);
    let { Y: n } = t;
    const {
      scaleScores: a = !1,
      maxIterations: i = 1e3,
      terminationCriteria: o = 1e-10
    } = t;
    let s;
    if (n) {
      if (Array.isArray(n) && typeof n[0] == "number" ? n = ct.columnVector(n) : n = Hn.checkMatrix(n), !n.isColumnVector() || n.rows !== e.rows)
        throw new Error("Y must be a column vector of length X.rows");
      s = n;
    } else
      s = e.getColumnVector(0);
    let u = 1, f, l, c, h;
    for (let d = 0; d < i && u > o; d++)
      c = e.transpose().mmul(s).div(s.transpose().mmul(s).get(0, 0)), c = c.div(c.norm()), f = e.mmul(c).div(c.transpose().mmul(c).get(0, 0)), d > 0 && (u = f.clone().sub(h).pow(2).sum()), h = f.clone(), n ? (l = n.transpose().mmul(f).div(f.transpose().mmul(f).get(0, 0)), l = l.div(l.norm()), s = n.mmul(l).div(l.transpose().mmul(l).get(0, 0))) : s = f;
    if (n) {
      let d = e.transpose().mmul(f).div(f.transpose().mmul(f).get(0, 0));
      d = d.div(d.norm());
      let v = e.clone().sub(f.clone().mmul(d.transpose())), p = s.transpose().mmul(f).div(f.transpose().mmul(f).get(0, 0)), g = n.clone().sub(
        f.clone().mulS(p.get(0, 0)).mmul(l.transpose())
      );
      this.t = f, this.p = d.transpose(), this.w = c.transpose(), this.q = l, this.u = s, this.s = f.transpose().mmul(f), this.xResidual = v, this.yResidual = g, this.betas = p;
    } else
      this.w = c.transpose(), this.s = f.transpose().mmul(f).sqrt(), a ? this.t = f.clone().div(this.s.get(0, 0)) : this.t = f, this.xResidual = e.sub(f.mmul(c.transpose()));
  }
}
const kne = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  AbstractMatrix: Xt,
  CHO: t2,
  CholeskyDecomposition: t2,
  EVD: e2,
  EigenvalueDecomposition: e2,
  LU: Zh,
  LuDecomposition: Zh,
  Matrix: ct,
  MatrixColumnSelectionView: gne,
  MatrixColumnView: pne,
  MatrixFlipColumnView: yne,
  MatrixFlipRowView: mne,
  MatrixRowSelectionView: Ene,
  MatrixRowView: bne,
  MatrixSelectionView: fh,
  MatrixSubView: xne,
  MatrixTransposeView: wne,
  NIPALS: r2,
  Nipals: r2,
  QR: Fg,
  QrDecomposition: Fg,
  SVD: hu,
  SingularValueDecomposition: hu,
  WrapperMatrix1D: wD,
  WrapperMatrix2D: Hn,
  correlation: One,
  covariance: Ine,
  default: ct,
  determinant: lh,
  inverse: Mne,
  linearDependencies: Cne,
  pseudoInverse: Tne,
  solve: _D,
  wrap: _ne
}, Symbol.toStringTag, { value: "Module" })), MD = /* @__PURE__ */ ri(kne);
Object.defineProperty(Vm, "__esModule", { value: !0 });
var Yu = MD, Rne = (
  /** @class */
  function() {
    function r(e) {
      this.distances = e.distances, this.dimension = e.dimension || 2, this.linkDistance = e.linkDistance;
    }
    return r.prototype.layout = function() {
      var e = this, t = e.dimension, n = e.distances, a = e.linkDistance;
      try {
        var i = Yu.Matrix.mul(Yu.Matrix.pow(n, 2), -0.5), o = i.mean("row"), s = i.mean("column"), u = i.mean();
        i.add(u).subRowVector(o).subColumnVector(s);
        var f = new Yu.SingularValueDecomposition(i), l = Yu.Matrix.sqrt(f.diagonalMatrix).diagonal();
        return f.leftSingularVectors.toJSON().map(function(p) {
          return Yu.Matrix.mul([p], [l]).toJSON()[0].splice(0, t);
        });
      } catch {
        for (var c = [], h = 0; h < n.length; h++) {
          var d = Math.random() * a, v = Math.random() * a;
          c.push([d, v]);
        }
        return c;
      }
    }, r;
  }()
);
Vm.default = Rne;
var Ym = {};
Object.defineProperty(Ym, "__esModule", { value: !0 });
var Bne = 800, Fne = (
  /** @class */
  function() {
    function r(e) {
      this.disp = [], this.positions = e.positions, this.adjMatrix = e.adjMatrix, this.focusID = e.focusID, this.radii = e.radii, this.iterations = e.iterations || 10, this.height = e.height || 10, this.width = e.width || 10, this.speed = e.speed || 100, this.gravity = e.gravity || 10, this.nodeSizeFunc = e.nodeSizeFunc, this.k = e.k || 5, this.strictRadial = e.strictRadial, this.nodes = e.nodes;
    }
    return r.prototype.layout = function() {
      var e = this, t = e.positions, n = [], a = e.iterations, i = e.width / 10;
      e.maxDisplace = i, e.disp = n;
      for (var o = 0; o < a; o++)
        t.forEach(function(s, u) {
          n[u] = { x: 0, y: 0 };
        }), e.getRepulsion(), e.updatePositions();
      return t;
    }, r.prototype.getRepulsion = function() {
      var e = this, t = e.positions, n = e.nodes, a = e.disp, i = e.k, o = e.radii || [];
      t.forEach(function(s, u) {
        a[u] = { x: 0, y: 0 }, t.forEach(function(f, l) {
          if (u !== l && o[u] === o[l]) {
            var c = s[0] - f[0], h = s[1] - f[1], d = Math.sqrt(c * c + h * h);
            if (d === 0) {
              d = 1;
              var v = u > l ? 1 : -1;
              c = 0.01 * v, h = 0.01 * v;
            }
            if (d < e.nodeSizeFunc(n[u]) / 2 + e.nodeSizeFunc(n[l]) / 2) {
              var p = i * i / d;
              a[u].x += c / d * p, a[u].y += h / d * p;
            }
          }
        });
      });
    }, r.prototype.updatePositions = function() {
      var e = this, t = e.positions, n = e.disp, a = e.speed, i = e.strictRadial, o = e.focusID, s = e.maxDisplace || e.width / 10;
      i && n.forEach(function(f, l) {
        var c = t[l][0] - t[o][0], h = t[l][1] - t[o][1], d = Math.sqrt(c * c + h * h), v = h / d, p = -c / d, g = Math.sqrt(f.x * f.x + f.y * f.y), y = Math.acos((v * f.x + p * f.y) / g);
        y > Math.PI / 2 && (y -= Math.PI / 2, v *= -1, p *= -1);
        var m = Math.cos(y) * g;
        f.x = v * m, f.y = p * m;
      });
      var u = e.radii;
      t.forEach(function(f, l) {
        if (l !== o) {
          var c = Math.sqrt(n[l].x * n[l].x + n[l].y * n[l].y);
          if (c > 0 && l !== o) {
            var h = Math.min(s * (a / Bne), c);
            if (f[0] += n[l].x / c * h, f[1] += n[l].y / c * h, i) {
              var d = f[0] - t[o][0], v = f[1] - t[o][1], p = Math.sqrt(d * d + v * v);
              d = d / p * u[l], v = v / p * u[l], f[0] = t[o][0] + d, f[1] = t[o][1] + v;
            }
          }
        }
      });
    }, r;
  }()
);
Ym.default = Fne;
var Gne = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), SD = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(qd, "__esModule", { value: !0 });
qd.RadialLayout = void 0;
var ea = Dr(), zne = Gr, Une = SD(Vm), jne = SD(Ym);
function $ne(r) {
  for (var e = r.length, t = r[0].length, n = [], a = 0; a < e; a++) {
    for (var i = [], o = 0; o < t; o++)
      r[a][o] !== 0 ? i.push(1 / (r[a][o] * r[a][o])) : i.push(0);
    n.push(i);
  }
  return n;
}
function Wne(r, e) {
  var t = -1;
  return r.forEach(function(n, a) {
    n.id === e && (t = a);
  }), t;
}
function n2(r, e) {
  return Math.sqrt((r[0] - e[0]) * (r[0] - e[0]) + (r[1] - e[1]) * (r[1] - e[1]));
}
var Xne = (
  /** @class */
  function(r) {
    Gne(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.maxIteration = 1e3, n.focusNode = null, n.unitRadius = null, n.linkDistance = 50, n.preventOverlap = !1, n.strictRadial = !0, n.maxPreventOverlapIteration = 200, n.sortStrength = 10, n.nodes = [], n.edges = [], n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 1e3,
        focusNode: null,
        unitRadius: null,
        linkDistance: 50,
        preventOverlap: !1,
        nodeSize: void 0,
        nodeSpacing: void 0,
        strictRadial: !0,
        maxPreventOverlapIteration: 200,
        sortBy: void 0,
        sortStrength: 10
      };
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.edges || [];
      if (!n || n.length === 0) {
        t.onLayoutEnd && t.onLayoutEnd();
        return;
      }
      !t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight), t.center || (t.center = [t.width / 2, t.height / 2]);
      var i = t.center;
      if (n.length === 1) {
        n[0].x = i[0], n[0].y = i[1], t.onLayoutEnd && t.onLayoutEnd();
        return;
      }
      var o = t.linkDistance, s = null;
      if ((0, ea.isString)(t.focusNode)) {
        for (var u = !1, f = 0; f < n.length; f++)
          n[f].id === t.focusNode && (s = n[f], t.focusNode = s, u = !0, f = n.length);
        u || (s = null);
      } else
        s = t.focusNode;
      s || (s = n[0], t.focusNode = s);
      var l = Wne(n, s.id);
      l < 0 && (l = 0), t.focusIndex = l;
      var c = (0, ea.getAdjMatrix)({ nodes: n, edges: a }, !1), h = (0, ea.floydWarshall)(c), d = t.maxToFocus(h, l);
      t.handleInfinity(h, l, d + 1), t.distances = h;
      var v = h[l], p = t.width || 500, g = t.height || 500, y = p - i[0] > i[0] ? i[0] : p - i[0], m = g - i[1] > i[1] ? i[1] : g - i[1];
      y === 0 && (y = p / 2), m === 0 && (m = g / 2);
      var b = m > y ? y : m, E = Math.max.apply(Math, v), x = [];
      v.forEach(function(V, N) {
        t.unitRadius || (t.unitRadius = b / E), x[N] = V * t.unitRadius;
      }), t.radii = x;
      var w = t.eIdealDisMatrix();
      t.eIdealDistances = w;
      var _ = $ne(w);
      t.weights = _;
      var M = new Une.default({ linkDistance: o, distances: w }), A = M.layout();
      A.forEach(function(V) {
        (0, ea.isNaN)(V[0]) && (V[0] = Math.random() * o), (0, ea.isNaN)(V[1]) && (V[1] = Math.random() * o);
      }), t.positions = A, A.forEach(function(V, N) {
        n[N].x = V[0] + i[0], n[N].y = V[1] + i[1];
      }), A.forEach(function(V) {
        V[0] -= A[l][0], V[1] -= A[l][1];
      }), t.run();
      var S = t.preventOverlap, T = t.nodeSize, C, O = t.strictRadial;
      if (S) {
        var L = t.nodeSpacing, R;
        (0, ea.isNumber)(L) ? R = function() {
          return L;
        } : (0, ea.isFunction)(L) ? R = L : R = function() {
          return 0;
        }, T ? (0, ea.isArray)(T) ? C = function(V) {
          var N = T[0] > T[1] ? T[0] : T[1];
          return N + R(V);
        } : C = function(V) {
          return T + R(V);
        } : C = function(V) {
          if (V.size) {
            if ((0, ea.isArray)(V.size)) {
              var N = V.size[0] > V.size[1] ? V.size[0] : V.size[1];
              return N + R(V);
            }
            if ((0, ea.isObject)(V.size)) {
              var N = V.size.width > V.size.height ? V.size.width : V.size.height;
              return N + R(V);
            }
            return V.size + R(V);
          }
          return 10 + R(V);
        };
        var P = {
          nodes: n,
          nodeSizeFunc: C,
          adjMatrix: c,
          positions: A,
          radii: x,
          height: g,
          width: p,
          strictRadial: O,
          focusID: l,
          iterations: t.maxPreventOverlapIteration || 200,
          k: A.length / 4.5
        }, z = new jne.default(P);
        A = z.layout();
      }
      return A.forEach(function(V, N) {
        n[N].x = V[0] + i[0], n[N].y = V[1] + i[1];
      }), t.onLayoutEnd && t.onLayoutEnd(), {
        nodes: n,
        edges: a
      };
    }, e.prototype.run = function() {
      for (var t = this, n = t.maxIteration, a = t.positions || [], i = t.weights || [], o = t.eIdealDistances || [], s = t.radii || [], u = 0; u <= n; u++) {
        var f = u / n;
        t.oneIteration(f, a, s, o, i);
      }
    }, e.prototype.oneIteration = function(t, n, a, i, o) {
      var s = this, u = 1 - t, f = s.focusIndex;
      n.forEach(function(l, c) {
        var h = n2(l, [0, 0]), d = h === 0 ? 0 : 1 / h;
        if (c !== f) {
          var v = 0, p = 0, g = 0;
          n.forEach(function(m, b) {
            if (c !== b) {
              var E = n2(l, m), x = E === 0 ? 0 : 1 / E, w = i[b][c];
              g += o[c][b], v += o[c][b] * (m[0] + w * (l[0] - m[0]) * x), p += o[c][b] * (m[1] + w * (l[1] - m[1]) * x);
            }
          });
          var y = a[c] === 0 ? 0 : 1 / a[c];
          g *= u, g += t * y * y, v *= u, v += t * y * l[0] * d, l[0] = v / g, p *= u, p += t * y * l[1] * d, l[1] = p / g;
        }
      });
    }, e.prototype.eIdealDisMatrix = function() {
      var t = this, n = t.nodes;
      if (!n)
        return [];
      var a = t.distances, i = t.linkDistance, o = t.radii || [], s = t.unitRadius || 50, u = [];
      return a && a.forEach(function(f, l) {
        var c = [];
        f.forEach(function(h, d) {
          if (l === d)
            c.push(0);
          else if (o[l] === o[d])
            if (t.sortBy === "data")
              c.push(h * (Math.abs(l - d) * t.sortStrength) / (o[l] / s));
            else if (t.sortBy) {
              var v = n[l][t.sortBy] || 0, p = n[d][t.sortBy] || 0;
              (0, ea.isString)(v) && (v = v.charCodeAt(0)), (0, ea.isString)(p) && (p = p.charCodeAt(0)), c.push(h * (Math.abs(v - p) * t.sortStrength) / (o[l] / s));
            } else
              c.push(h * i / (o[l] / s));
          else {
            var g = (i + s) / 2;
            c.push(h * g);
          }
        }), u.push(c);
      }), u;
    }, e.prototype.handleInfinity = function(t, n, a) {
      for (var i = t.length, o = 0; o < i; o++)
        if (t[n][o] === 1 / 0) {
          t[n][o] = a, t[o][n] = a;
          for (var s = 0; s < i; s++)
            t[o][s] !== 1 / 0 && t[n][s] === 1 / 0 && (t[n][s] = a + t[o][s], t[s][n] = a + t[o][s]);
        }
      for (var o = 0; o < i; o++)
        if (o !== n) {
          for (var s = 0; s < i; s++)
            if (t[o][s] === 1 / 0) {
              var u = Math.abs(t[n][o] - t[n][s]);
              u = u === 0 ? 1 : u, t[o][s] = u;
            }
        }
    }, e.prototype.maxToFocus = function(t, n) {
      for (var a = 0, i = 0; i < t[n].length; i++)
        t[n][i] !== 1 / 0 && (a = t[n][i] > a ? t[n][i] : a);
      return a;
    }, e.prototype.getType = function() {
      return "radial";
    }, e;
  }(zne.Base)
);
qd.RadialLayout = Xne;
(function(r) {
  var e = be && be.__createBinding || (Object.create ? function(n, a, i, o) {
    o === void 0 && (o = i);
    var s = Object.getOwnPropertyDescriptor(a, i);
    (!s || ("get" in s ? !a.__esModule : s.writable || s.configurable)) && (s = { enumerable: !0, get: function() {
      return a[i];
    } }), Object.defineProperty(n, o, s);
  } : function(n, a, i, o) {
    o === void 0 && (o = i), n[o] = a[i];
  }), t = be && be.__exportStar || function(n, a) {
    for (var i in n)
      i !== "default" && !Object.prototype.hasOwnProperty.call(a, i) && e(a, n, i);
  };
  Object.defineProperty(r, "__esModule", { value: !0 }), t(qd, r);
})(Xm);
var hl = {}, Vne = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(hl, "__esModule", { value: !0 });
hl.ConcentricLayout = void 0;
var ka = Dr(), Yne = Gr, Hne = (
  /** @class */
  function(r) {
    Vne(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.nodeSize = 30, n.minNodeSpacing = 10, n.nodeSpacing = 10, n.preventOverlap = !1, n.equidistant = !1, n.startAngle = 3 / 2 * Math.PI, n.clockwise = !0, n.sortBy = "degree", n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.onLayoutEnd = function() {
      }, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        nodeSize: 30,
        minNodeSpacing: 10,
        nodeSpacing: 10,
        preventOverlap: !1,
        sweep: void 0,
        equidistant: !1,
        startAngle: 3 / 2 * Math.PI,
        clockwise: !0,
        maxLevelDiff: void 0,
        sortBy: "degree"
      };
    }, e.prototype.execute = function() {
      var t, n, a = this, i = a.nodes, o = a.edges, s = i.length;
      if (s === 0) {
        (t = a.onLayoutEnd) === null || t === void 0 || t.call(a);
        return;
      }
      !a.width && typeof window < "u" && (a.width = window.innerWidth), !a.height && typeof window < "u" && (a.height = window.innerHeight), a.center || (a.center = [a.width / 2, a.height / 2]);
      var u = a.center;
      if (s === 1) {
        i[0].x = u[0], i[0].y = u[1], (n = a.onLayoutEnd) === null || n === void 0 || n.call(a);
        return;
      }
      var f = a.nodeSize, l = a.nodeSpacing, c = [], h, d = 0;
      (0, ka.isArray)(f) ? h = Math.max(f[0], f[1]) : h = f, (0, ka.isArray)(l) ? d = Math.max(l[0], l[1]) : (0, ka.isNumber)(l) && (d = l), i.forEach(function(O) {
        c.push(O);
        var L = h;
        (0, ka.isArray)(O.size) ? L = Math.max(O.size[0], O.size[1]) : (0, ka.isNumber)(O.size) ? L = O.size : (0, ka.isObject)(O.size) && (L = Math.max(O.size.width, O.size.height)), h = Math.max(h, L), (0, ka.isFunction)(l) && (d = Math.max(l(O), d));
      }), a.clockwise = a.counterclockwise !== void 0 ? !a.counterclockwise : a.clockwise;
      var v = {}, p = {};
      if (c.forEach(function(O, L) {
        v[O.id] = O, p[O.id] = L;
      }), (a.sortBy === "degree" || !(0, ka.isString)(a.sortBy) || c[0][a.sortBy] === void 0) && (a.sortBy = "degree", !(0, ka.isNumber)(i[0].degree))) {
        var g = (0, ka.getDegree)(i.length, p, o);
        c.forEach(function(O, L) {
          O.degree = g[L].all;
        });
      }
      c.sort(function(O, L) {
        return L[a.sortBy] - O[a.sortBy];
      }), a.maxValueNode = c[0], a.maxLevelDiff = a.maxLevelDiff || a.maxValueNode[a.sortBy] / 4;
      var y = [[]], m = y[0];
      c.forEach(function(O) {
        if (m.length > 0) {
          var L = Math.abs(m[0][a.sortBy] - O[a.sortBy]);
          a.maxLevelDiff && L >= a.maxLevelDiff && (m = [], y.push(m));
        }
        m.push(O);
      });
      var b = h + (d || a.minNodeSpacing);
      if (!a.preventOverlap) {
        var E = y.length > 0 && y[0].length > 1, x = Math.min(a.width, a.height) / 2 - b, w = x / (y.length + (E ? 1 : 0));
        b = Math.min(b, w);
      }
      var _ = 0;
      if (y.forEach(function(O) {
        var L = a.sweep;
        L === void 0 && (L = 2 * Math.PI - 2 * Math.PI / O.length);
        var R = O.dTheta = L / Math.max(1, O.length - 1);
        if (O.length > 1 && a.preventOverlap) {
          var P = Math.cos(R) - Math.cos(0), z = Math.sin(R) - Math.sin(0), V = Math.sqrt(b * b / (P * P + z * z));
          _ = Math.max(V, _);
        }
        O.r = _, _ += b;
      }), a.equidistant) {
        for (var M = 0, A = 0, S = 0; S < y.length; S++) {
          var T = y[S], C = T.r - A;
          M = Math.max(M, C);
        }
        A = 0, y.forEach(function(O, L) {
          L === 0 && (A = O.r), O.r = A, A += M;
        });
      }
      return y.forEach(function(O) {
        var L = O.dTheta, R = O.r;
        O.forEach(function(P, z) {
          var V = a.startAngle + (a.clockwise ? 1 : -1) * L * z;
          P.x = u[0] + R * Math.cos(V), P.y = u[1] + R * Math.sin(V);
        });
      }), a.onLayoutEnd && a.onLayoutEnd(), {
        nodes: i,
        edges: o
      };
    }, e.prototype.getType = function() {
      return "concentric";
    }, e;
  }(Yne.Base)
);
hl.ConcentricLayout = Hne;
var dl = {}, Kne = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(dl, "__esModule", { value: !0 });
dl.MDSLayout = void 0;
var Hu = MD, s0 = Dr(), qne = Gr, Zne = (
  /** @class */
  function(r) {
    Kne(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.center = [0, 0], n.linkDistance = 50, n.nodes = [], n.edges = [], n.onLayoutEnd = function() {
      }, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        center: [0, 0],
        linkDistance: 50
      };
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.edges, i = a === void 0 ? [] : a, o = t.center;
      if (!n || n.length === 0) {
        t.onLayoutEnd && t.onLayoutEnd();
        return;
      }
      if (n.length === 1) {
        n[0].x = o[0], n[0].y = o[1], t.onLayoutEnd && t.onLayoutEnd();
        return;
      }
      var s = t.linkDistance, u = (0, s0.getAdjMatrix)({ nodes: n, edges: i }, !1), f = (0, s0.floydWarshall)(u);
      t.handleInfinity(f);
      var l = (0, s0.scaleMatrix)(f, s);
      t.scaledDistances = l;
      var c = t.runMDS();
      return t.positions = c, c.forEach(function(h, d) {
        n[d].x = h[0] + o[0], n[d].y = h[1] + o[1];
      }), t.onLayoutEnd && t.onLayoutEnd(), {
        nodes: n,
        edges: i
      };
    }, e.prototype.runMDS = function() {
      var t = this, n = 2, a = t.scaledDistances, i = Hu.Matrix.mul(Hu.Matrix.pow(a, 2), -0.5), o = i.mean("row"), s = i.mean("column"), u = i.mean();
      i.add(u).subRowVector(o).subColumnVector(s);
      var f = new Hu.SingularValueDecomposition(i), l = Hu.Matrix.sqrt(f.diagonalMatrix).diagonal();
      return f.leftSingularVectors.toJSON().map(function(c) {
        return Hu.Matrix.mul([c], [l]).toJSON()[0].splice(0, n);
      });
    }, e.prototype.handleInfinity = function(t) {
      var n = -999999;
      t.forEach(function(a) {
        a.forEach(function(i) {
          i !== 1 / 0 && n < i && (n = i);
        });
      }), t.forEach(function(a, i) {
        a.forEach(function(o, s) {
          o === 1 / 0 && (t[i][s] = n);
        });
      });
    }, e.prototype.getType = function() {
      return "mds";
    }, e;
  }(qne.Base)
);
dl.MDSLayout = Zne;
var vl = {}, Qne = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(vl, "__esModule", { value: !0 });
vl.FruchtermanLayout = void 0;
var Jne = Gr, Br = Dr(), eae = 800, tae = (
  /** @class */
  function(r) {
    Qne(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.maxIteration = 1e3, n.workerEnabled = !1, n.gravity = 10, n.speed = 5, n.clustering = !1, n.clusterGravity = 10, n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.nodeMap = {}, n.nodeIdxMap = {}, n.onLayoutEnd = function() {
      }, n.tick = function() {
      }, n.animate = !0, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 1e3,
        gravity: 10,
        speed: 1,
        clustering: !1,
        clusterGravity: 10,
        animate: !0
      };
    }, e.prototype.execute = function() {
      var t = this, n, a, i = this, o = i.nodes;
      if (i.timeInterval !== void 0 && typeof window < "u" && window.clearInterval(i.timeInterval), !o || o.length === 0) {
        (n = i.onLayoutEnd) === null || n === void 0 || n.call(i);
        return;
      }
      !i.width && typeof window < "u" && (i.width = window.innerWidth), !i.height && typeof window < "u" && (i.height = window.innerHeight), i.center || (i.center = [i.width / 2, i.height / 2]);
      var s = i.center;
      if (o.length === 1) {
        o[0].x = s[0], o[0].y = s[1], (a = i.onLayoutEnd) === null || a === void 0 || a.call(i);
        return;
      }
      var u = {}, f = {};
      return o.forEach(function(l, c) {
        (0, Br.isNumber)(l.x) || (l.x = Math.random() * t.width), (0, Br.isNumber)(l.y) || (l.y = Math.random() * t.height), u[l.id] = l, f[l.id] = c;
      }), i.nodeMap = u, i.nodeIdxMap = f, i.run();
    }, e.prototype.run = function() {
      var t, n = this, a = n.nodes;
      if (a) {
        var i = n.edges, o = n.maxIteration, s = n.workerEnabled, u = n.clustering, f = n.animate, l = {};
        if (u && a.forEach(function(d) {
          l[d.cluster] === void 0 && (l[d.cluster] = {
            name: d.cluster,
            cx: 0,
            cy: 0,
            count: 0
          });
        }), s || !f) {
          for (var c = 0; c < o; c++)
            n.runOneStep(l);
          (t = n.onLayoutEnd) === null || t === void 0 || t.call(n);
        } else {
          if (typeof window > "u")
            return;
          var h = 0;
          this.timeInterval = window.setInterval(function() {
            var d;
            n.runOneStep(l), h++, h >= o && ((d = n.onLayoutEnd) === null || d === void 0 || d.call(n), window.clearInterval(n.timeInterval));
          }, 0);
        }
        return {
          nodes: a,
          edges: i
        };
      }
    }, e.prototype.runOneStep = function(t) {
      var n, a = this, i = a.nodes;
      if (i) {
        var o = a.edges, s = a.center, u = a.gravity, f = a.speed, l = a.clustering, c = a.height * a.width, h = Math.sqrt(c) / 10, d = c / (i.length + 1), v = Math.sqrt(d), p = [];
        if (i.forEach(function(m, b) {
          p[b] = { x: 0, y: 0 };
        }), a.applyCalculate(i, o, p, v, d), l) {
          for (var g in t)
            t[g].cx = 0, t[g].cy = 0, t[g].count = 0;
          i.forEach(function(m) {
            var b = t[m.cluster];
            (0, Br.isNumber)(m.x) && (b.cx += m.x), (0, Br.isNumber)(m.y) && (b.cy += m.y), b.count++;
          });
          for (var g in t)
            t[g].cx /= t[g].count, t[g].cy /= t[g].count;
          var y = a.clusterGravity || u;
          i.forEach(function(m, b) {
            if (!(!(0, Br.isNumber)(m.x) || !(0, Br.isNumber)(m.y))) {
              var E = t[m.cluster], x = Math.sqrt((m.x - E.cx) * (m.x - E.cx) + (m.y - E.cy) * (m.y - E.cy)), w = v * y;
              p[b].x -= w * (m.x - E.cx) / x, p[b].y -= w * (m.y - E.cy) / x;
            }
          });
        }
        i.forEach(function(m, b) {
          if (!(!(0, Br.isNumber)(m.x) || !(0, Br.isNumber)(m.y))) {
            var E = 0.01 * v * u;
            p[b].x -= E * (m.x - s[0]), p[b].y -= E * (m.y - s[1]);
          }
        }), i.forEach(function(m, b) {
          if ((0, Br.isNumber)(m.fx) && (0, Br.isNumber)(m.fy)) {
            m.x = m.fx, m.y = m.fy;
            return;
          }
          if (!(!(0, Br.isNumber)(m.x) || !(0, Br.isNumber)(m.y))) {
            var E = Math.sqrt(p[b].x * p[b].x + p[b].y * p[b].y);
            if (E > 0) {
              var x = Math.min(h * (f / eae), E);
              m.x += p[b].x / E * x, m.y += p[b].y / E * x;
            }
          }
        }), (n = a.tick) === null || n === void 0 || n.call(a);
      }
    }, e.prototype.applyCalculate = function(t, n, a, i, o) {
      var s = this;
      s.calRepulsive(t, a, o), n && s.calAttractive(n, a, i);
    }, e.prototype.calRepulsive = function(t, n, a) {
      t.forEach(function(i, o) {
        n[o] = { x: 0, y: 0 }, t.forEach(function(s, u) {
          if (o !== u && !(!(0, Br.isNumber)(i.x) || !(0, Br.isNumber)(s.x) || !(0, Br.isNumber)(i.y) || !(0, Br.isNumber)(s.y))) {
            var f = i.x - s.x, l = i.y - s.y, c = f * f + l * l;
            if (c === 0) {
              c = 1;
              var h = o > u ? 1 : -1;
              f = 0.01 * h, l = 0.01 * h;
            }
            var d = a / c;
            n[o].x += f * d, n[o].y += l * d;
          }
        });
      });
    }, e.prototype.calAttractive = function(t, n, a) {
      var i = this;
      t.forEach(function(o) {
        var s = (0, Br.getEdgeTerminal)(o, "source"), u = (0, Br.getEdgeTerminal)(o, "target");
        if (!(!s || !u)) {
          var f = i.nodeIdxMap[s], l = i.nodeIdxMap[u];
          if (f !== l) {
            var c = i.nodeMap[s], h = i.nodeMap[u];
            if (!(!(0, Br.isNumber)(h.x) || !(0, Br.isNumber)(c.x) || !(0, Br.isNumber)(h.y) || !(0, Br.isNumber)(c.y))) {
              var d = h.x - c.x, v = h.y - c.y, p = Math.sqrt(d * d + v * v), g = p * p / a;
              n[l].x -= d / p * g, n[l].y -= v / p * g, n[f].x += d / p * g, n[f].y += v / p * g;
            }
          }
        }
      });
    }, e.prototype.stop = function() {
      this.timeInterval && typeof window < "u" && window.clearInterval(this.timeInterval);
    }, e.prototype.destroy = function() {
      var t = this;
      t.stop(), t.tick = null, t.nodes = null, t.edges = null, t.destroyed = !0;
    }, e.prototype.getType = function() {
      return "fruchterman";
    }, e;
  }(Jne.Base)
);
vl.FruchtermanLayout = tae;
var pl = {};
function a2(r, e, t, n, a, i, o) {
  try {
    var s = r[i](o), u = s.value;
  } catch (f) {
    t(f);
    return;
  }
  s.done ? e(u) : Promise.resolve(u).then(n, a);
}
function Ki(r) {
  return function() {
    var e = this, t = arguments;
    return new Promise(function(n, a) {
      var i = r.apply(e, t);
      function o(u) {
        a2(i, n, a, o, s, "next", u);
      }
      function s(u) {
        a2(i, n, a, o, s, "throw", u);
      }
      o(void 0);
    });
  };
}
function du(r) {
  "@babel/helpers - typeof";
  return du = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, du(r);
}
function rae(r, e) {
  if (du(r) != "object" || !r)
    return r;
  var t = r[Symbol.toPrimitive];
  if (t !== void 0) {
    var n = t.call(r, e || "default");
    if (du(n) != "object")
      return n;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (e === "string" ? String : Number)(r);
}
function AD(r) {
  var e = rae(r, "string");
  return du(e) == "symbol" ? e : e + "";
}
function Je(r, e, t) {
  return e = AD(e), e in r ? Object.defineProperty(r, e, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : r[e] = t, r;
}
function Ca(r, e) {
  if (!(r instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function i2(r, e) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(r, AD(n.key), n);
  }
}
function Ta(r, e, t) {
  return e && i2(r.prototype, e), t && i2(r, t), Object.defineProperty(r, "prototype", {
    writable: !1
  }), r;
}
var nae = typeof be == "object" && be && be.Object === Object && be, CD = nae, aae = CD, iae = typeof self == "object" && self && self.Object === Object && self, oae = aae || iae || Function("return this")(), sae = oae, uae = sae, fae = uae.Symbol, TD = fae, o2 = TD, ID = Object.prototype, lae = ID.hasOwnProperty, cae = ID.toString, Ku = o2 ? o2.toStringTag : void 0;
function hae(r) {
  var e = lae.call(r, Ku), t = r[Ku];
  try {
    r[Ku] = void 0;
    var n = !0;
  } catch {
  }
  var a = cae.call(r);
  return n && (e ? r[Ku] = t : delete r[Ku]), a;
}
var dae = hae, vae = Object.prototype, pae = vae.toString;
function gae(r) {
  return pae.call(r);
}
var yae = gae, s2 = TD, mae = dae, bae = yae, Eae = "[object Null]", xae = "[object Undefined]", u2 = s2 ? s2.toStringTag : void 0;
function wae(r) {
  return r == null ? r === void 0 ? xae : Eae : u2 && u2 in Object(r) ? mae(r) : bae(r);
}
var Hm = wae, _ae = 9007199254740991;
function Mae(r) {
  return typeof r == "number" && r > -1 && r % 1 == 0 && r <= _ae;
}
var Sae = Mae;
function Aae(r) {
  return r != null && typeof r == "object";
}
var Km = Aae, Cae = Hm, Tae = Sae, Iae = Km, Oae = "[object Arguments]", Dae = "[object Array]", Lae = "[object Boolean]", Nae = "[object Date]", Pae = "[object Error]", kae = "[object Function]", Rae = "[object Map]", Bae = "[object Number]", Fae = "[object Object]", Gae = "[object RegExp]", zae = "[object Set]", Uae = "[object String]", jae = "[object WeakMap]", $ae = "[object ArrayBuffer]", Wae = "[object DataView]", Xae = "[object Float32Array]", Vae = "[object Float64Array]", Yae = "[object Int8Array]", Hae = "[object Int16Array]", Kae = "[object Int32Array]", qae = "[object Uint8Array]", Zae = "[object Uint8ClampedArray]", Qae = "[object Uint16Array]", Jae = "[object Uint32Array]", xr = {};
xr[Xae] = xr[Vae] = xr[Yae] = xr[Hae] = xr[Kae] = xr[qae] = xr[Zae] = xr[Qae] = xr[Jae] = !0;
xr[Oae] = xr[Dae] = xr[$ae] = xr[Lae] = xr[Wae] = xr[Nae] = xr[Pae] = xr[kae] = xr[Rae] = xr[Bae] = xr[Fae] = xr[Gae] = xr[zae] = xr[Uae] = xr[jae] = !1;
function eie(r) {
  return Iae(r) && Tae(r.length) && !!xr[Cae(r)];
}
var tie = eie;
function rie(r) {
  return function(e) {
    return r(e);
  };
}
var nie = rie, Qh = { exports: {} };
Qh.exports;
(function(r, e) {
  var t = CD, n = e && !e.nodeType && e, a = n && !0 && r && !r.nodeType && r, i = a && a.exports === n, o = i && t.process, s = function() {
    try {
      var u = a && a.require && a.require("util").types;
      return u || o && o.binding && o.binding("util");
    } catch {
    }
  }();
  r.exports = s;
})(Qh, Qh.exports);
var aie = Qh.exports, iie = tie, oie = nie, f2 = aie, l2 = f2 && f2.isTypedArray, sie = l2 ? oie(l2) : iie, uie = sie;
const Jh = /* @__PURE__ */ Ai(uie);
var fie = Hm, lie = Km, cie = "[object Number]";
function hie(r) {
  return typeof r == "number" || lie(r) && fie(r) == cie;
}
var die = hie;
const vie = /* @__PURE__ */ Ai(die);
var pie = Array.isArray, gie = pie;
const yie = /* @__PURE__ */ Ai(gie);
var OD = { exports: {} }, DD = { exports: {} };
(function(r) {
  function e(t) {
    "@babel/helpers - typeof";
    return r.exports = e = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(n) {
      return typeof n;
    } : function(n) {
      return n && typeof Symbol == "function" && n.constructor === Symbol && n !== Symbol.prototype ? "symbol" : typeof n;
    }, r.exports.__esModule = !0, r.exports.default = r.exports, e(t);
  }
  r.exports = e, r.exports.__esModule = !0, r.exports.default = r.exports;
})(DD);
var mie = DD.exports;
(function(r) {
  var e = mie.default;
  function t() {
    r.exports = t = function() {
      return a;
    }, r.exports.__esModule = !0, r.exports.default = r.exports;
    var n, a = {}, i = Object.prototype, o = i.hasOwnProperty, s = Object.defineProperty || function(N, F, q) {
      N[F] = q.value;
    }, u = typeof Symbol == "function" ? Symbol : {}, f = u.iterator || "@@iterator", l = u.asyncIterator || "@@asyncIterator", c = u.toStringTag || "@@toStringTag";
    function h(N, F, q) {
      return Object.defineProperty(N, F, {
        value: q,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }), N[F];
    }
    try {
      h({}, "");
    } catch {
      h = function(q, te, re) {
        return q[te] = re;
      };
    }
    function d(N, F, q, te) {
      var re = F && F.prototype instanceof E ? F : E, J = Object.create(re.prototype), ye = new z(te || []);
      return s(J, "_invoke", {
        value: O(N, q, ye)
      }), J;
    }
    function v(N, F, q) {
      try {
        return {
          type: "normal",
          arg: N.call(F, q)
        };
      } catch (te) {
        return {
          type: "throw",
          arg: te
        };
      }
    }
    a.wrap = d;
    var p = "suspendedStart", g = "suspendedYield", y = "executing", m = "completed", b = {};
    function E() {
    }
    function x() {
    }
    function w() {
    }
    var _ = {};
    h(_, f, function() {
      return this;
    });
    var M = Object.getPrototypeOf, A = M && M(M(V([])));
    A && A !== i && o.call(A, f) && (_ = A);
    var S = w.prototype = E.prototype = Object.create(_);
    function T(N) {
      ["next", "throw", "return"].forEach(function(F) {
        h(N, F, function(q) {
          return this._invoke(F, q);
        });
      });
    }
    function C(N, F) {
      function q(re, J, ye, Be) {
        var Pe = v(N[re], N, J);
        if (Pe.type !== "throw") {
          var et = Pe.arg, ut = et.value;
          return ut && e(ut) == "object" && o.call(ut, "__await") ? F.resolve(ut.__await).then(function(at) {
            q("next", at, ye, Be);
          }, function(at) {
            q("throw", at, ye, Be);
          }) : F.resolve(ut).then(function(at) {
            et.value = at, ye(et);
          }, function(at) {
            return q("throw", at, ye, Be);
          });
        }
        Be(Pe.arg);
      }
      var te;
      s(this, "_invoke", {
        value: function(J, ye) {
          function Be() {
            return new F(function(Pe, et) {
              q(J, ye, Pe, et);
            });
          }
          return te = te ? te.then(Be, Be) : Be();
        }
      });
    }
    function O(N, F, q) {
      var te = p;
      return function(re, J) {
        if (te === y)
          throw Error("Generator is already running");
        if (te === m) {
          if (re === "throw")
            throw J;
          return {
            value: n,
            done: !0
          };
        }
        for (q.method = re, q.arg = J; ; ) {
          var ye = q.delegate;
          if (ye) {
            var Be = L(ye, q);
            if (Be) {
              if (Be === b)
                continue;
              return Be;
            }
          }
          if (q.method === "next")
            q.sent = q._sent = q.arg;
          else if (q.method === "throw") {
            if (te === p)
              throw te = m, q.arg;
            q.dispatchException(q.arg);
          } else
            q.method === "return" && q.abrupt("return", q.arg);
          te = y;
          var Pe = v(N, F, q);
          if (Pe.type === "normal") {
            if (te = q.done ? m : g, Pe.arg === b)
              continue;
            return {
              value: Pe.arg,
              done: q.done
            };
          }
          Pe.type === "throw" && (te = m, q.method = "throw", q.arg = Pe.arg);
        }
      };
    }
    function L(N, F) {
      var q = F.method, te = N.iterator[q];
      if (te === n)
        return F.delegate = null, q === "throw" && N.iterator.return && (F.method = "return", F.arg = n, L(N, F), F.method === "throw") || q !== "return" && (F.method = "throw", F.arg = new TypeError("The iterator does not provide a '" + q + "' method")), b;
      var re = v(te, N.iterator, F.arg);
      if (re.type === "throw")
        return F.method = "throw", F.arg = re.arg, F.delegate = null, b;
      var J = re.arg;
      return J ? J.done ? (F[N.resultName] = J.value, F.next = N.nextLoc, F.method !== "return" && (F.method = "next", F.arg = n), F.delegate = null, b) : J : (F.method = "throw", F.arg = new TypeError("iterator result is not an object"), F.delegate = null, b);
    }
    function R(N) {
      var F = {
        tryLoc: N[0]
      };
      1 in N && (F.catchLoc = N[1]), 2 in N && (F.finallyLoc = N[2], F.afterLoc = N[3]), this.tryEntries.push(F);
    }
    function P(N) {
      var F = N.completion || {};
      F.type = "normal", delete F.arg, N.completion = F;
    }
    function z(N) {
      this.tryEntries = [{
        tryLoc: "root"
      }], N.forEach(R, this), this.reset(!0);
    }
    function V(N) {
      if (N || N === "") {
        var F = N[f];
        if (F)
          return F.call(N);
        if (typeof N.next == "function")
          return N;
        if (!isNaN(N.length)) {
          var q = -1, te = function re() {
            for (; ++q < N.length; )
              if (o.call(N, q))
                return re.value = N[q], re.done = !1, re;
            return re.value = n, re.done = !0, re;
          };
          return te.next = te;
        }
      }
      throw new TypeError(e(N) + " is not iterable");
    }
    return x.prototype = w, s(S, "constructor", {
      value: w,
      configurable: !0
    }), s(w, "constructor", {
      value: x,
      configurable: !0
    }), x.displayName = h(w, c, "GeneratorFunction"), a.isGeneratorFunction = function(N) {
      var F = typeof N == "function" && N.constructor;
      return !!F && (F === x || (F.displayName || F.name) === "GeneratorFunction");
    }, a.mark = function(N) {
      return Object.setPrototypeOf ? Object.setPrototypeOf(N, w) : (N.__proto__ = w, h(N, c, "GeneratorFunction")), N.prototype = Object.create(S), N;
    }, a.awrap = function(N) {
      return {
        __await: N
      };
    }, T(C.prototype), h(C.prototype, l, function() {
      return this;
    }), a.AsyncIterator = C, a.async = function(N, F, q, te, re) {
      re === void 0 && (re = Promise);
      var J = new C(d(N, F, q, te), re);
      return a.isGeneratorFunction(F) ? J : J.next().then(function(ye) {
        return ye.done ? ye.value : J.next();
      });
    }, T(S), h(S, c, "Generator"), h(S, f, function() {
      return this;
    }), h(S, "toString", function() {
      return "[object Generator]";
    }), a.keys = function(N) {
      var F = Object(N), q = [];
      for (var te in F)
        q.push(te);
      return q.reverse(), function re() {
        for (; q.length; ) {
          var J = q.pop();
          if (J in F)
            return re.value = J, re.done = !1, re;
        }
        return re.done = !0, re;
      };
    }, a.values = V, z.prototype = {
      constructor: z,
      reset: function(F) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = n, this.done = !1, this.delegate = null, this.method = "next", this.arg = n, this.tryEntries.forEach(P), !F)
          for (var q in this)
            q.charAt(0) === "t" && o.call(this, q) && !isNaN(+q.slice(1)) && (this[q] = n);
      },
      stop: function() {
        this.done = !0;
        var F = this.tryEntries[0].completion;
        if (F.type === "throw")
          throw F.arg;
        return this.rval;
      },
      dispatchException: function(F) {
        if (this.done)
          throw F;
        var q = this;
        function te(et, ut) {
          return ye.type = "throw", ye.arg = F, q.next = et, ut && (q.method = "next", q.arg = n), !!ut;
        }
        for (var re = this.tryEntries.length - 1; re >= 0; --re) {
          var J = this.tryEntries[re], ye = J.completion;
          if (J.tryLoc === "root")
            return te("end");
          if (J.tryLoc <= this.prev) {
            var Be = o.call(J, "catchLoc"), Pe = o.call(J, "finallyLoc");
            if (Be && Pe) {
              if (this.prev < J.catchLoc)
                return te(J.catchLoc, !0);
              if (this.prev < J.finallyLoc)
                return te(J.finallyLoc);
            } else if (Be) {
              if (this.prev < J.catchLoc)
                return te(J.catchLoc, !0);
            } else {
              if (!Pe)
                throw Error("try statement without catch or finally");
              if (this.prev < J.finallyLoc)
                return te(J.finallyLoc);
            }
          }
        }
      },
      abrupt: function(F, q) {
        for (var te = this.tryEntries.length - 1; te >= 0; --te) {
          var re = this.tryEntries[te];
          if (re.tryLoc <= this.prev && o.call(re, "finallyLoc") && this.prev < re.finallyLoc) {
            var J = re;
            break;
          }
        }
        J && (F === "break" || F === "continue") && J.tryLoc <= q && q <= J.finallyLoc && (J = null);
        var ye = J ? J.completion : {};
        return ye.type = F, ye.arg = q, J ? (this.method = "next", this.next = J.finallyLoc, b) : this.complete(ye);
      },
      complete: function(F, q) {
        if (F.type === "throw")
          throw F.arg;
        return F.type === "break" || F.type === "continue" ? this.next = F.arg : F.type === "return" ? (this.rval = this.arg = F.arg, this.method = "return", this.next = "end") : F.type === "normal" && q && (this.next = q), b;
      },
      finish: function(F) {
        for (var q = this.tryEntries.length - 1; q >= 0; --q) {
          var te = this.tryEntries[q];
          if (te.finallyLoc === F)
            return this.complete(te.completion, te.afterLoc), P(te), b;
        }
      },
      catch: function(F) {
        for (var q = this.tryEntries.length - 1; q >= 0; --q) {
          var te = this.tryEntries[q];
          if (te.tryLoc === F) {
            var re = te.completion;
            if (re.type === "throw") {
              var J = re.arg;
              P(te);
            }
            return J;
          }
        }
        throw Error("illegal catch attempt");
      },
      delegateYield: function(F, q, te) {
        return this.delegate = {
          iterator: V(F),
          resultName: q,
          nextLoc: te
        }, this.method === "next" && (this.arg = n), b;
      }
    }, a;
  }
  r.exports = t, r.exports.__esModule = !0, r.exports.default = r.exports;
})(OD);
var bie = OD.exports, ch = bie(), Eie = ch;
try {
  regeneratorRuntime = ch;
} catch {
  typeof globalThis == "object" ? globalThis.regeneratorRuntime = ch : Function("r", "regeneratorRuntime = r")(ch);
}
const bn = /* @__PURE__ */ Ai(Eie);
var xie = 1;
function LD() {
  return xie++;
}
var Oe;
(function(r) {
  r[r.DEPTH_BUFFER_BIT = 256] = "DEPTH_BUFFER_BIT", r[r.STENCIL_BUFFER_BIT = 1024] = "STENCIL_BUFFER_BIT", r[r.COLOR_BUFFER_BIT = 16384] = "COLOR_BUFFER_BIT", r[r.POINTS = 0] = "POINTS", r[r.LINES = 1] = "LINES", r[r.LINE_LOOP = 2] = "LINE_LOOP", r[r.LINE_STRIP = 3] = "LINE_STRIP", r[r.TRIANGLES = 4] = "TRIANGLES", r[r.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", r[r.TRIANGLE_FAN = 6] = "TRIANGLE_FAN", r[r.ZERO = 0] = "ZERO", r[r.ONE = 1] = "ONE", r[r.SRC_COLOR = 768] = "SRC_COLOR", r[r.ONE_MINUS_SRC_COLOR = 769] = "ONE_MINUS_SRC_COLOR", r[r.SRC_ALPHA = 770] = "SRC_ALPHA", r[r.ONE_MINUS_SRC_ALPHA = 771] = "ONE_MINUS_SRC_ALPHA", r[r.DST_ALPHA = 772] = "DST_ALPHA", r[r.ONE_MINUS_DST_ALPHA = 773] = "ONE_MINUS_DST_ALPHA", r[r.DST_COLOR = 774] = "DST_COLOR", r[r.ONE_MINUS_DST_COLOR = 775] = "ONE_MINUS_DST_COLOR", r[r.SRC_ALPHA_SATURATE = 776] = "SRC_ALPHA_SATURATE", r[r.FUNC_ADD = 32774] = "FUNC_ADD", r[r.BLEND_EQUATION = 32777] = "BLEND_EQUATION", r[r.BLEND_EQUATION_RGB = 32777] = "BLEND_EQUATION_RGB", r[r.BLEND_EQUATION_ALPHA = 34877] = "BLEND_EQUATION_ALPHA", r[r.FUNC_SUBTRACT = 32778] = "FUNC_SUBTRACT", r[r.FUNC_REVERSE_SUBTRACT = 32779] = "FUNC_REVERSE_SUBTRACT", r[r.MAX_EXT = 32776] = "MAX_EXT", r[r.MIN_EXT = 32775] = "MIN_EXT", r[r.BLEND_DST_RGB = 32968] = "BLEND_DST_RGB", r[r.BLEND_SRC_RGB = 32969] = "BLEND_SRC_RGB", r[r.BLEND_DST_ALPHA = 32970] = "BLEND_DST_ALPHA", r[r.BLEND_SRC_ALPHA = 32971] = "BLEND_SRC_ALPHA", r[r.CONSTANT_COLOR = 32769] = "CONSTANT_COLOR", r[r.ONE_MINUS_CONSTANT_COLOR = 32770] = "ONE_MINUS_CONSTANT_COLOR", r[r.CONSTANT_ALPHA = 32771] = "CONSTANT_ALPHA", r[r.ONE_MINUS_CONSTANT_ALPHA = 32772] = "ONE_MINUS_CONSTANT_ALPHA", r[r.BLEND_COLOR = 32773] = "BLEND_COLOR", r[r.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", r[r.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", r[r.ARRAY_BUFFER_BINDING = 34964] = "ARRAY_BUFFER_BINDING", r[r.ELEMENT_ARRAY_BUFFER_BINDING = 34965] = "ELEMENT_ARRAY_BUFFER_BINDING", r[r.STREAM_DRAW = 35040] = "STREAM_DRAW", r[r.STATIC_DRAW = 35044] = "STATIC_DRAW", r[r.DYNAMIC_DRAW = 35048] = "DYNAMIC_DRAW", r[r.BUFFER_SIZE = 34660] = "BUFFER_SIZE", r[r.BUFFER_USAGE = 34661] = "BUFFER_USAGE", r[r.CURRENT_VERTEX_ATTRIB = 34342] = "CURRENT_VERTEX_ATTRIB", r[r.FRONT = 1028] = "FRONT", r[r.BACK = 1029] = "BACK", r[r.FRONT_AND_BACK = 1032] = "FRONT_AND_BACK", r[r.CULL_FACE = 2884] = "CULL_FACE", r[r.BLEND = 3042] = "BLEND", r[r.DITHER = 3024] = "DITHER", r[r.STENCIL_TEST = 2960] = "STENCIL_TEST", r[r.DEPTH_TEST = 2929] = "DEPTH_TEST", r[r.SCISSOR_TEST = 3089] = "SCISSOR_TEST", r[r.POLYGON_OFFSET_FILL = 32823] = "POLYGON_OFFSET_FILL", r[r.SAMPLE_ALPHA_TO_COVERAGE = 32926] = "SAMPLE_ALPHA_TO_COVERAGE", r[r.SAMPLE_COVERAGE = 32928] = "SAMPLE_COVERAGE", r[r.NO_ERROR = 0] = "NO_ERROR", r[r.INVALID_ENUM = 1280] = "INVALID_ENUM", r[r.INVALID_VALUE = 1281] = "INVALID_VALUE", r[r.INVALID_OPERATION = 1282] = "INVALID_OPERATION", r[r.OUT_OF_MEMORY = 1285] = "OUT_OF_MEMORY", r[r.CW = 2304] = "CW", r[r.CCW = 2305] = "CCW", r[r.LINE_WIDTH = 2849] = "LINE_WIDTH", r[r.ALIASED_POINT_SIZE_RANGE = 33901] = "ALIASED_POINT_SIZE_RANGE", r[r.ALIASED_LINE_WIDTH_RANGE = 33902] = "ALIASED_LINE_WIDTH_RANGE", r[r.CULL_FACE_MODE = 2885] = "CULL_FACE_MODE", r[r.FRONT_FACE = 2886] = "FRONT_FACE", r[r.DEPTH_RANGE = 2928] = "DEPTH_RANGE", r[r.DEPTH_WRITEMASK = 2930] = "DEPTH_WRITEMASK", r[r.DEPTH_CLEAR_VALUE = 2931] = "DEPTH_CLEAR_VALUE", r[r.DEPTH_FUNC = 2932] = "DEPTH_FUNC", r[r.STENCIL_CLEAR_VALUE = 2961] = "STENCIL_CLEAR_VALUE", r[r.STENCIL_FUNC = 2962] = "STENCIL_FUNC", r[r.STENCIL_FAIL = 2964] = "STENCIL_FAIL", r[r.STENCIL_PASS_DEPTH_FAIL = 2965] = "STENCIL_PASS_DEPTH_FAIL", r[r.STENCIL_PASS_DEPTH_PASS = 2966] = "STENCIL_PASS_DEPTH_PASS", r[r.STENCIL_REF = 2967] = "STENCIL_REF", r[r.STENCIL_VALUE_MASK = 2963] = "STENCIL_VALUE_MASK", r[r.STENCIL_WRITEMASK = 2968] = "STENCIL_WRITEMASK", r[r.STENCIL_BACK_FUNC = 34816] = "STENCIL_BACK_FUNC", r[r.STENCIL_BACK_FAIL = 34817] = "STENCIL_BACK_FAIL", r[r.STENCIL_BACK_PASS_DEPTH_FAIL = 34818] = "STENCIL_BACK_PASS_DEPTH_FAIL", r[r.STENCIL_BACK_PASS_DEPTH_PASS = 34819] = "STENCIL_BACK_PASS_DEPTH_PASS", r[r.STENCIL_BACK_REF = 36003] = "STENCIL_BACK_REF", r[r.STENCIL_BACK_VALUE_MASK = 36004] = "STENCIL_BACK_VALUE_MASK", r[r.STENCIL_BACK_WRITEMASK = 36005] = "STENCIL_BACK_WRITEMASK", r[r.VIEWPORT = 2978] = "VIEWPORT", r[r.SCISSOR_BOX = 3088] = "SCISSOR_BOX", r[r.COLOR_CLEAR_VALUE = 3106] = "COLOR_CLEAR_VALUE", r[r.COLOR_WRITEMASK = 3107] = "COLOR_WRITEMASK", r[r.UNPACK_ALIGNMENT = 3317] = "UNPACK_ALIGNMENT", r[r.PACK_ALIGNMENT = 3333] = "PACK_ALIGNMENT", r[r.MAX_TEXTURE_SIZE = 3379] = "MAX_TEXTURE_SIZE", r[r.MAX_VIEWPORT_DIMS = 3386] = "MAX_VIEWPORT_DIMS", r[r.SUBPIXEL_BITS = 3408] = "SUBPIXEL_BITS", r[r.RED_BITS = 3410] = "RED_BITS", r[r.GREEN_BITS = 3411] = "GREEN_BITS", r[r.BLUE_BITS = 3412] = "BLUE_BITS", r[r.ALPHA_BITS = 3413] = "ALPHA_BITS", r[r.DEPTH_BITS = 3414] = "DEPTH_BITS", r[r.STENCIL_BITS = 3415] = "STENCIL_BITS", r[r.POLYGON_OFFSET_UNITS = 10752] = "POLYGON_OFFSET_UNITS", r[r.POLYGON_OFFSET_FACTOR = 32824] = "POLYGON_OFFSET_FACTOR", r[r.TEXTURE_BINDING_2D = 32873] = "TEXTURE_BINDING_2D", r[r.SAMPLE_BUFFERS = 32936] = "SAMPLE_BUFFERS", r[r.SAMPLES = 32937] = "SAMPLES", r[r.SAMPLE_COVERAGE_VALUE = 32938] = "SAMPLE_COVERAGE_VALUE", r[r.SAMPLE_COVERAGE_INVERT = 32939] = "SAMPLE_COVERAGE_INVERT", r[r.COMPRESSED_TEXTURE_FORMATS = 34467] = "COMPRESSED_TEXTURE_FORMATS", r[r.DONT_CARE = 4352] = "DONT_CARE", r[r.FASTEST = 4353] = "FASTEST", r[r.NICEST = 4354] = "NICEST", r[r.GENERATE_MIPMAP_HINT = 33170] = "GENERATE_MIPMAP_HINT", r[r.BYTE = 5120] = "BYTE", r[r.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", r[r.SHORT = 5122] = "SHORT", r[r.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", r[r.INT = 5124] = "INT", r[r.UNSIGNED_INT = 5125] = "UNSIGNED_INT", r[r.FLOAT = 5126] = "FLOAT", r[r.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", r[r.ALPHA = 6406] = "ALPHA", r[r.RGB = 6407] = "RGB", r[r.RGBA = 6408] = "RGBA", r[r.LUMINANCE = 6409] = "LUMINANCE", r[r.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", r[r.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", r[r.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", r[r.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", r[r.FRAGMENT_SHADER = 35632] = "FRAGMENT_SHADER", r[r.VERTEX_SHADER = 35633] = "VERTEX_SHADER", r[r.MAX_VERTEX_ATTRIBS = 34921] = "MAX_VERTEX_ATTRIBS", r[r.MAX_VERTEX_UNIFORM_VECTORS = 36347] = "MAX_VERTEX_UNIFORM_VECTORS", r[r.MAX_VARYING_VECTORS = 36348] = "MAX_VARYING_VECTORS", r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 35661] = "MAX_COMBINED_TEXTURE_IMAGE_UNITS", r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS = 35660] = "MAX_VERTEX_TEXTURE_IMAGE_UNITS", r[r.MAX_TEXTURE_IMAGE_UNITS = 34930] = "MAX_TEXTURE_IMAGE_UNITS", r[r.MAX_FRAGMENT_UNIFORM_VECTORS = 36349] = "MAX_FRAGMENT_UNIFORM_VECTORS", r[r.SHADER_TYPE = 35663] = "SHADER_TYPE", r[r.DELETE_STATUS = 35712] = "DELETE_STATUS", r[r.LINK_STATUS = 35714] = "LINK_STATUS", r[r.VALIDATE_STATUS = 35715] = "VALIDATE_STATUS", r[r.ATTACHED_SHADERS = 35717] = "ATTACHED_SHADERS", r[r.ACTIVE_UNIFORMS = 35718] = "ACTIVE_UNIFORMS", r[r.ACTIVE_ATTRIBUTES = 35721] = "ACTIVE_ATTRIBUTES", r[r.SHADING_LANGUAGE_VERSION = 35724] = "SHADING_LANGUAGE_VERSION", r[r.CURRENT_PROGRAM = 35725] = "CURRENT_PROGRAM", r[r.NEVER = 512] = "NEVER", r[r.LESS = 513] = "LESS", r[r.EQUAL = 514] = "EQUAL", r[r.LEQUAL = 515] = "LEQUAL", r[r.GREATER = 516] = "GREATER", r[r.NOTEQUAL = 517] = "NOTEQUAL", r[r.GEQUAL = 518] = "GEQUAL", r[r.ALWAYS = 519] = "ALWAYS", r[r.KEEP = 7680] = "KEEP", r[r.REPLACE = 7681] = "REPLACE", r[r.INCR = 7682] = "INCR", r[r.DECR = 7683] = "DECR", r[r.INVERT = 5386] = "INVERT", r[r.INCR_WRAP = 34055] = "INCR_WRAP", r[r.DECR_WRAP = 34056] = "DECR_WRAP", r[r.VENDOR = 7936] = "VENDOR", r[r.RENDERER = 7937] = "RENDERER", r[r.VERSION = 7938] = "VERSION", r[r.NEAREST = 9728] = "NEAREST", r[r.LINEAR = 9729] = "LINEAR", r[r.NEAREST_MIPMAP_NEAREST = 9984] = "NEAREST_MIPMAP_NEAREST", r[r.LINEAR_MIPMAP_NEAREST = 9985] = "LINEAR_MIPMAP_NEAREST", r[r.NEAREST_MIPMAP_LINEAR = 9986] = "NEAREST_MIPMAP_LINEAR", r[r.LINEAR_MIPMAP_LINEAR = 9987] = "LINEAR_MIPMAP_LINEAR", r[r.TEXTURE_MAG_FILTER = 10240] = "TEXTURE_MAG_FILTER", r[r.TEXTURE_MIN_FILTER = 10241] = "TEXTURE_MIN_FILTER", r[r.TEXTURE_WRAP_S = 10242] = "TEXTURE_WRAP_S", r[r.TEXTURE_WRAP_T = 10243] = "TEXTURE_WRAP_T", r[r.TEXTURE_2D = 3553] = "TEXTURE_2D", r[r.TEXTURE = 5890] = "TEXTURE", r[r.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", r[r.TEXTURE_BINDING_CUBE_MAP = 34068] = "TEXTURE_BINDING_CUBE_MAP", r[r.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", r[r.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", r[r.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", r[r.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z", r[r.MAX_CUBE_MAP_TEXTURE_SIZE = 34076] = "MAX_CUBE_MAP_TEXTURE_SIZE", r[r.TEXTURE0 = 33984] = "TEXTURE0", r[r.TEXTURE1 = 33985] = "TEXTURE1", r[r.TEXTURE2 = 33986] = "TEXTURE2", r[r.TEXTURE3 = 33987] = "TEXTURE3", r[r.TEXTURE4 = 33988] = "TEXTURE4", r[r.TEXTURE5 = 33989] = "TEXTURE5", r[r.TEXTURE6 = 33990] = "TEXTURE6", r[r.TEXTURE7 = 33991] = "TEXTURE7", r[r.TEXTURE8 = 33992] = "TEXTURE8", r[r.TEXTURE9 = 33993] = "TEXTURE9", r[r.TEXTURE10 = 33994] = "TEXTURE10", r[r.TEXTURE11 = 33995] = "TEXTURE11", r[r.TEXTURE12 = 33996] = "TEXTURE12", r[r.TEXTURE13 = 33997] = "TEXTURE13", r[r.TEXTURE14 = 33998] = "TEXTURE14", r[r.TEXTURE15 = 33999] = "TEXTURE15", r[r.TEXTURE16 = 34e3] = "TEXTURE16", r[r.TEXTURE17 = 34001] = "TEXTURE17", r[r.TEXTURE18 = 34002] = "TEXTURE18", r[r.TEXTURE19 = 34003] = "TEXTURE19", r[r.TEXTURE20 = 34004] = "TEXTURE20", r[r.TEXTURE21 = 34005] = "TEXTURE21", r[r.TEXTURE22 = 34006] = "TEXTURE22", r[r.TEXTURE23 = 34007] = "TEXTURE23", r[r.TEXTURE24 = 34008] = "TEXTURE24", r[r.TEXTURE25 = 34009] = "TEXTURE25", r[r.TEXTURE26 = 34010] = "TEXTURE26", r[r.TEXTURE27 = 34011] = "TEXTURE27", r[r.TEXTURE28 = 34012] = "TEXTURE28", r[r.TEXTURE29 = 34013] = "TEXTURE29", r[r.TEXTURE30 = 34014] = "TEXTURE30", r[r.TEXTURE31 = 34015] = "TEXTURE31", r[r.ACTIVE_TEXTURE = 34016] = "ACTIVE_TEXTURE", r[r.REPEAT = 10497] = "REPEAT", r[r.CLAMP_TO_EDGE = 33071] = "CLAMP_TO_EDGE", r[r.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT", r[r.FLOAT_VEC2 = 35664] = "FLOAT_VEC2", r[r.FLOAT_VEC3 = 35665] = "FLOAT_VEC3", r[r.FLOAT_VEC4 = 35666] = "FLOAT_VEC4", r[r.INT_VEC2 = 35667] = "INT_VEC2", r[r.INT_VEC3 = 35668] = "INT_VEC3", r[r.INT_VEC4 = 35669] = "INT_VEC4", r[r.BOOL = 35670] = "BOOL", r[r.BOOL_VEC2 = 35671] = "BOOL_VEC2", r[r.BOOL_VEC3 = 35672] = "BOOL_VEC3", r[r.BOOL_VEC4 = 35673] = "BOOL_VEC4", r[r.FLOAT_MAT2 = 35674] = "FLOAT_MAT2", r[r.FLOAT_MAT3 = 35675] = "FLOAT_MAT3", r[r.FLOAT_MAT4 = 35676] = "FLOAT_MAT4", r[r.SAMPLER_2D = 35678] = "SAMPLER_2D", r[r.SAMPLER_CUBE = 35680] = "SAMPLER_CUBE", r[r.VERTEX_ATTRIB_ARRAY_ENABLED = 34338] = "VERTEX_ATTRIB_ARRAY_ENABLED", r[r.VERTEX_ATTRIB_ARRAY_SIZE = 34339] = "VERTEX_ATTRIB_ARRAY_SIZE", r[r.VERTEX_ATTRIB_ARRAY_STRIDE = 34340] = "VERTEX_ATTRIB_ARRAY_STRIDE", r[r.VERTEX_ATTRIB_ARRAY_TYPE = 34341] = "VERTEX_ATTRIB_ARRAY_TYPE", r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED = 34922] = "VERTEX_ATTRIB_ARRAY_NORMALIZED", r[r.VERTEX_ATTRIB_ARRAY_POINTER = 34373] = "VERTEX_ATTRIB_ARRAY_POINTER", r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 34975] = "VERTEX_ATTRIB_ARRAY_BUFFER_BINDING", r[r.COMPILE_STATUS = 35713] = "COMPILE_STATUS", r[r.LOW_FLOAT = 36336] = "LOW_FLOAT", r[r.MEDIUM_FLOAT = 36337] = "MEDIUM_FLOAT", r[r.HIGH_FLOAT = 36338] = "HIGH_FLOAT", r[r.LOW_INT = 36339] = "LOW_INT", r[r.MEDIUM_INT = 36340] = "MEDIUM_INT", r[r.HIGH_INT = 36341] = "HIGH_INT", r[r.FRAMEBUFFER = 36160] = "FRAMEBUFFER", r[r.RENDERBUFFER = 36161] = "RENDERBUFFER", r[r.RGBA4 = 32854] = "RGBA4", r[r.RGB5_A1 = 32855] = "RGB5_A1", r[r.RGB565 = 36194] = "RGB565", r[r.DEPTH_COMPONENT16 = 33189] = "DEPTH_COMPONENT16", r[r.STENCIL_INDEX = 6401] = "STENCIL_INDEX", r[r.STENCIL_INDEX8 = 36168] = "STENCIL_INDEX8", r[r.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL", r[r.RENDERBUFFER_WIDTH = 36162] = "RENDERBUFFER_WIDTH", r[r.RENDERBUFFER_HEIGHT = 36163] = "RENDERBUFFER_HEIGHT", r[r.RENDERBUFFER_INTERNAL_FORMAT = 36164] = "RENDERBUFFER_INTERNAL_FORMAT", r[r.RENDERBUFFER_RED_SIZE = 36176] = "RENDERBUFFER_RED_SIZE", r[r.RENDERBUFFER_GREEN_SIZE = 36177] = "RENDERBUFFER_GREEN_SIZE", r[r.RENDERBUFFER_BLUE_SIZE = 36178] = "RENDERBUFFER_BLUE_SIZE", r[r.RENDERBUFFER_ALPHA_SIZE = 36179] = "RENDERBUFFER_ALPHA_SIZE", r[r.RENDERBUFFER_DEPTH_SIZE = 36180] = "RENDERBUFFER_DEPTH_SIZE", r[r.RENDERBUFFER_STENCIL_SIZE = 36181] = "RENDERBUFFER_STENCIL_SIZE", r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 36048] = "FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE", r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 36049] = "FRAMEBUFFER_ATTACHMENT_OBJECT_NAME", r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 36050] = "FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL", r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 36051] = "FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE", r[r.COLOR_ATTACHMENT0 = 36064] = "COLOR_ATTACHMENT0", r[r.DEPTH_ATTACHMENT = 36096] = "DEPTH_ATTACHMENT", r[r.STENCIL_ATTACHMENT = 36128] = "STENCIL_ATTACHMENT", r[r.DEPTH_STENCIL_ATTACHMENT = 33306] = "DEPTH_STENCIL_ATTACHMENT", r[r.NONE = 0] = "NONE", r[r.FRAMEBUFFER_COMPLETE = 36053] = "FRAMEBUFFER_COMPLETE", r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 36054] = "FRAMEBUFFER_INCOMPLETE_ATTACHMENT", r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 36055] = "FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT", r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 36057] = "FRAMEBUFFER_INCOMPLETE_DIMENSIONS", r[r.FRAMEBUFFER_UNSUPPORTED = 36061] = "FRAMEBUFFER_UNSUPPORTED", r[r.FRAMEBUFFER_BINDING = 36006] = "FRAMEBUFFER_BINDING", r[r.RENDERBUFFER_BINDING = 36007] = "RENDERBUFFER_BINDING", r[r.MAX_RENDERBUFFER_SIZE = 34024] = "MAX_RENDERBUFFER_SIZE", r[r.INVALID_FRAMEBUFFER_OPERATION = 1286] = "INVALID_FRAMEBUFFER_OPERATION", r[r.UNPACK_FLIP_Y_WEBGL = 37440] = "UNPACK_FLIP_Y_WEBGL", r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 37441] = "UNPACK_PREMULTIPLY_ALPHA_WEBGL", r[r.CONTEXT_LOST_WEBGL = 37442] = "CONTEXT_LOST_WEBGL", r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL = 37443] = "UNPACK_COLORSPACE_CONVERSION_WEBGL", r[r.BROWSER_DEFAULT_WEBGL = 37444] = "BROWSER_DEFAULT_WEBGL", r[r.COPY_SRC = 1] = "COPY_SRC", r[r.COPY_DST = 2] = "COPY_DST", r[r.SAMPLED = 4] = "SAMPLED", r[r.STORAGE = 8] = "STORAGE", r[r.RENDER_ATTACHMENT = 16] = "RENDER_ATTACHMENT";
})(Oe || (Oe = {}));
var wie = /* @__PURE__ */ function() {
  function r() {
    Ca(this, r), this.config = void 0;
  }
  return Ta(r, [{
    key: "get",
    value: function() {
      return this.config;
    }
  }, {
    key: "set",
    value: function(t) {
      this.config = t;
    }
  }]), r;
}(), $f;
(function(r) {
  r.Void = "Void", r.Boolean = "Boolean", r.Float = "Float", r.Uint32 = "Uint32", r.Int32 = "Int32", r.Vector = "Vector", r.Vector2Float = "vec2<f32>", r.Vector3Float = "vec3<f32>", r.Vector4Float = "vec4<f32>", r.Vector2Boolean = "vec2<bool>", r.Vector3Boolean = "vec3<bool>", r.Vector4Boolean = "vec4<bool>", r.Vector2Uint = "vec2<u32>", r.Vector3Uint = "vec3<u32>", r.Vector4Uint = "vec4<u32>", r.Vector2Int = "vec2<i32>", r.Vector3Int = "vec3<i32>", r.Vector4Int = "vec4<i32>", r.Matrix = "Matrix", r.Matrix3x3Float = "mat3x3<f32>", r.Matrix4x4Float = "mat4x4<i32>", r.Struct = "Struct", r.FloatArray = "Float[]", r.Vector4FloatArray = "vec4<f32>[]";
})($f || ($f = {}));
var c2;
(function(r) {
  r.Program = "Program", r.Identifier = "Identifier", r.VariableDeclaration = "VariableDeclaration", r.BlockStatement = "BlockStatement", r.ReturnStatement = "ReturnStatement", r.FunctionDeclaration = "FunctionDeclaration", r.VariableDeclarator = "VariableDeclarator", r.AssignmentExpression = "AssignmentExpression", r.LogicalExpression = "LogicalExpression", r.BinaryExpression = "BinaryExpression", r.ArrayExpression = "ArrayExpression", r.UnaryExpression = "UnaryExpression", r.UpdateExpression = "UpdateExpression", r.FunctionExpression = "FunctionExpression", r.MemberExpression = "MemberExpression", r.ConditionalExpression = "ConditionalExpression", r.ExpressionStatement = "ExpressionStatement", r.CallExpression = "CallExpression", r.NumThreadStatement = "NumThreadStatement", r.StorageStatement = "StorageStatement", r.DoWhileStatement = "DoWhileStatement", r.WhileStatement = "WhileStatement", r.ForStatement = "ForStatement", r.BreakStatement = "BreakStatement", r.ContinueStatement = "ContinueStatement", r.IfStatement = "IfStatement", r.ImportedFunctionStatement = "ImportedFunctionStatement";
})(c2 || (c2 = {}));
var vu;
(function(r) {
  r.Input = "Input", r.Output = "Output", r.Uniform = "Uniform", r.Workgroup = "Workgroup", r.UniformConstant = "UniformConstant", r.Image = "Image", r.StorageBuffer = "StorageBuffer", r.Private = "Private", r.Function = "Function";
})(vu || (vu = {}));
var xf;
(function(r) {
  r.GLSL100 = "GLSL100", r.GLSL450 = "GLSL450", r.WGSL = "WGSL";
})(xf || (xf = {}));
var _ie = "__DefineValuePlaceholder__";
function Mie() {
  if (typeof document < "u")
    return document.createElement("canvas");
  throw new Error("Cannot create a canvas in this context");
}
function h2(r, e) {
  var t = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(r);
    e && (n = n.filter(function(a) {
      return Object.getOwnPropertyDescriptor(r, a).enumerable;
    })), t.push.apply(t, n);
  }
  return t;
}
function d2(r) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2 ? h2(Object(t), !0).forEach(function(n) {
      Je(r, n, t[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(t)) : h2(Object(t)).forEach(function(n) {
      Object.defineProperty(r, n, Object.getOwnPropertyDescriptor(t, n));
    });
  }
  return r;
}
var ND = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.engine = e, this.configService = t, this.model = void 0, this.dirty = !0, this.compiledBundle = void 0, this.initPromise = void 0;
  }
  return Ta(r, [{
    key: "init",
    value: function() {
      var t = this.configService.get(), n = t.canvas, a = t.engineOptions;
      this.initPromise = this.engine.init(d2({
        canvas: n || Mie(),
        // swapChainFormat: WebGPUConstants.TextureFormat.BGRA8Unorm,
        antialiasing: !1
      }, a));
    }
  }, {
    key: "setBundle",
    value: function(t) {
      this.compiledBundle = JSON.parse(JSON.stringify(t));
    }
  }, {
    key: "setDispatch",
    value: function(t) {
      return this.compiledBundle.context && (this.compiledBundle.context.dispatch = t), this;
    }
  }, {
    key: "setMaxIteration",
    value: function(t) {
      return this.compiledBundle.context && (this.compiledBundle.context.maxIteration = t), this;
    }
  }, {
    key: "setBinding",
    value: function(t, n) {
      var a = this;
      if (typeof t == "string") {
        var i = vie(n) || Jh(n) || yie(n);
        if (this.compiledBundle && this.compiledBundle.context) {
          var o = this.compiledBundle.context.defines.find(function(u) {
            return u.name === t;
          });
          if (o)
            return o.value = n, this;
          var s = this.compiledBundle.context.uniforms.find(function(u) {
            return u.name === t;
          });
          s && (i ? (s.data = n, s.isReferer = !1, s.storageClass === vu.Uniform ? this.model && this.model.updateUniform(t, n) : this.model && this.model.updateBuffer(t, n)) : (s.isReferer = !0, s.data = n));
        }
      } else
        Object.keys(t).forEach(function(u) {
          a.setBinding(u, t[u]);
        });
      return this;
    }
  }, {
    key: "execute",
    value: function() {
      var e = Ki(/* @__PURE__ */ bn.mark(function n() {
        var a = this, i, o, s = arguments;
        return bn.wrap(function(f) {
          for (; ; )
            switch (f.prev = f.next) {
              case 0:
                if (i = s.length > 0 && s[0] !== void 0 ? s[0] : 1, !this.dirty) {
                  f.next = 6;
                  break;
                }
                return this.compiledBundle.context && (i > 1 ? this.compiledBundle.context.maxIteration = i : this.compiledBundle.context.maxIteration++), f.next = 5, this.compile();
              case 5:
                this.dirty = !1;
              case 6:
                for (this.engine.beginFrame(), this.engine.clear({}), this.compiledBundle.context && this.compiledBundle.context.uniforms.filter(function(l) {
                  var c = l.isReferer;
                  return c;
                }).forEach(function(l) {
                  var c = l.data, h = l.name;
                  a.model.confirmInput(c.model, h);
                }), o = 0; o < i; o++)
                  this.model.run();
                return this.engine.endFrame(), f.abrupt("return", this);
              case 12:
              case "end":
                return f.stop();
            }
        }, n, this);
      }));
      function t() {
        return e.apply(this, arguments);
      }
      return t;
    }()
    /**
     * read output from GPUBuffer
     */
  }, {
    key: "getOutput",
    value: function() {
      var e = Ki(/* @__PURE__ */ bn.mark(function n() {
        return bn.wrap(function(i) {
          for (; ; )
            switch (i.prev = i.next) {
              case 0:
                return i.abrupt("return", this.model.readData());
              case 1:
              case "end":
                return i.stop();
            }
        }, n, this);
      }));
      function t() {
        return e.apply(this, arguments);
      }
      return t;
    }()
  }, {
    key: "compile",
    value: function() {
      var e = Ki(/* @__PURE__ */ bn.mark(function n() {
        var a, i, o;
        return bn.wrap(function(u) {
          for (; ; )
            switch (u.prev = u.next) {
              case 0:
                return u.next = 2, this.initPromise;
              case 2:
                return a = d2({}, this.compiledBundle.context), i = this.engine.supportWebGPU ? this.engine.useWGSL ? xf.WGSL : xf.GLSL450 : xf.GLSL100, o = this.compiledBundle.shaders[i], a.defines.filter(function(f) {
                  return f.runtime;
                }).forEach(function(f) {
                  var l = "".concat(_ie).concat(f.name);
                  o = o.replace(l, "".concat(f.value));
                }), a.shader = o, a.uniforms.forEach(function(f) {
                  if (!f.data && f.storageClass === vu.StorageBuffer) {
                    var l = 1;
                    f.type === $f.FloatArray ? l = 1 : f.type === $f.Vector4FloatArray && (l = 4), f.data = new Float32Array(a.output.length * l).fill(0);
                  }
                }), this.compiledBundle.context = a, u.next = 11, this.engine.createComputeModel(this.compiledBundle.context);
              case 11:
                this.model = u.sent;
              case 12:
              case "end":
                return u.stop();
            }
        }, n, this);
      }));
      function t() {
        return e.apply(this, arguments);
      }
      return t;
    }()
  }]), r;
}(), PD = { exports: {} };
(function(r, e) {
  (function(t, n) {
    r.exports = n();
  })(be, function() {
    var t = function(I) {
      return I instanceof Uint8Array || I instanceof Uint16Array || I instanceof Uint32Array || I instanceof Int8Array || I instanceof Int16Array || I instanceof Int32Array || I instanceof Float32Array || I instanceof Float64Array || I instanceof Uint8ClampedArray;
    }, n = function(I, G) {
      for (var X = Object.keys(G), ce = 0; ce < X.length; ++ce)
        I[X[ce]] = G[X[ce]];
      return I;
    }, a = `
`;
    function i(I) {
      return typeof atob < "u" ? atob(I) : "base64:" + I;
    }
    function o(I) {
      var G = new Error("(regl) " + I);
      throw console.error(G), G;
    }
    function s(I, G) {
      I || o(G);
    }
    function u(I) {
      return I ? ": " + I : "";
    }
    function f(I, G, X) {
      I in G || o("unknown parameter (" + I + ")" + u(X) + ". possible values: " + Object.keys(G).join());
    }
    function l(I, G) {
      t(I) || o(
        "invalid parameter type" + u(G) + ". must be a typed array"
      );
    }
    function c(I, G) {
      switch (G) {
        case "number":
          return typeof I == "number";
        case "object":
          return typeof I == "object";
        case "string":
          return typeof I == "string";
        case "boolean":
          return typeof I == "boolean";
        case "function":
          return typeof I == "function";
        case "undefined":
          return typeof I > "u";
        case "symbol":
          return typeof I == "symbol";
      }
    }
    function h(I, G, X) {
      c(I, G) || o(
        "invalid parameter type" + u(X) + ". expected " + G + ", got " + typeof I
      );
    }
    function d(I, G) {
      I >= 0 && (I | 0) === I || o("invalid parameter type, (" + I + ")" + u(G) + ". must be a nonnegative integer");
    }
    function v(I, G, X) {
      G.indexOf(I) < 0 && o("invalid value" + u(X) + ". must be one of: " + G);
    }
    var p = [
      "gl",
      "canvas",
      "container",
      "attributes",
      "pixelRatio",
      "extensions",
      "optionalExtensions",
      "profile",
      "onDone"
    ];
    function g(I) {
      Object.keys(I).forEach(function(G) {
        p.indexOf(G) < 0 && o('invalid regl constructor argument "' + G + '". must be one of ' + p);
      });
    }
    function y(I, G) {
      for (I = I + ""; I.length < G; )
        I = " " + I;
      return I;
    }
    function m() {
      this.name = "unknown", this.lines = [], this.index = {}, this.hasErrors = !1;
    }
    function b(I, G) {
      this.number = I, this.line = G, this.errors = [];
    }
    function E(I, G, X) {
      this.file = I, this.line = G, this.message = X;
    }
    function x() {
      var I = new Error(), G = (I.stack || I).toString(), X = /compileProcedure.*\n\s*at.*\((.*)\)/.exec(G);
      if (X)
        return X[1];
      var ce = /compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(G);
      return ce ? ce[1] : "unknown";
    }
    function w() {
      var I = new Error(), G = (I.stack || I).toString(), X = /at REGLCommand.*\n\s+at.*\((.*)\)/.exec(G);
      if (X)
        return X[1];
      var ce = /at REGLCommand.*\n\s+at\s+(.*)\n/.exec(G);
      return ce ? ce[1] : "unknown";
    }
    function _(I, G) {
      var X = I.split(`
`), ce = 1, Ee = 0, le = {
        unknown: new m(),
        0: new m()
      };
      le.unknown.name = le[0].name = G || x(), le.unknown.lines.push(new b(0, ""));
      for (var de = 0; de < X.length; ++de) {
        var Te = X[de], De = /^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Te);
        if (De)
          switch (De[1]) {
            case "line":
              var Re = /(\d+)(\s+\d+)?/.exec(De[2]);
              Re && (ce = Re[1] | 0, Re[2] && (Ee = Re[2] | 0, Ee in le || (le[Ee] = new m())));
              break;
            case "define":
              var Le = /SHADER_NAME(_B64)?\s+(.*)$/.exec(De[2]);
              Le && (le[Ee].name = Le[1] ? i(Le[2]) : Le[2]);
              break;
          }
        le[Ee].lines.push(new b(ce++, Te));
      }
      return Object.keys(le).forEach(function(ze) {
        var Ve = le[ze];
        Ve.lines.forEach(function(Ie) {
          Ve.index[Ie.number] = Ie;
        });
      }), le;
    }
    function M(I) {
      var G = [];
      return I.split(`
`).forEach(function(X) {
        if (!(X.length < 5)) {
          var ce = /^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(X);
          ce ? G.push(new E(
            ce[1] | 0,
            ce[2] | 0,
            ce[3].trim()
          )) : X.length > 0 && G.push(new E("unknown", 0, X));
        }
      }), G;
    }
    function A(I, G) {
      G.forEach(function(X) {
        var ce = I[X.file];
        if (ce) {
          var Ee = ce.index[X.line];
          if (Ee) {
            Ee.errors.push(X), ce.hasErrors = !0;
            return;
          }
        }
        I.unknown.hasErrors = !0, I.unknown.lines[0].errors.push(X);
      });
    }
    function S(I, G, X, ce, Ee) {
      if (!I.getShaderParameter(G, I.COMPILE_STATUS)) {
        var le = I.getShaderInfoLog(G), de = ce === I.FRAGMENT_SHADER ? "fragment" : "vertex";
        z(X, "string", de + " shader source must be a string", Ee);
        var Te = _(X, Ee), De = M(le);
        A(Te, De), Object.keys(Te).forEach(function(Re) {
          var Le = Te[Re];
          if (!Le.hasErrors)
            return;
          var ze = [""], Ve = [""];
          function Ie(Ue, oe) {
            ze.push(Ue), Ve.push(oe || "");
          }
          Ie("file number " + Re + ": " + Le.name + `
`, "color:red;text-decoration:underline;font-weight:bold"), Le.lines.forEach(function(Ue) {
            if (Ue.errors.length > 0) {
              Ie(y(Ue.number, 4) + "|  ", "background-color:yellow; font-weight:bold"), Ie(Ue.line + a, "color:red; background-color:yellow; font-weight:bold");
              var oe = 0;
              Ue.errors.forEach(function(ve) {
                var ke = ve.message, qe = /^\s*'(.*)'\s*:\s*(.*)$/.exec(ke);
                if (qe) {
                  var Me = qe[1];
                  switch (ke = qe[2], Me) {
                    case "assign":
                      Me = "=";
                      break;
                  }
                  oe = Math.max(Ue.line.indexOf(Me, oe), 0);
                } else
                  oe = 0;
                Ie(y("| ", 6)), Ie(y("^^^", oe + 3) + a, "font-weight:bold"), Ie(y("| ", 6)), Ie(ke + a, "font-weight:bold");
              }), Ie(y("| ", 6) + a);
            } else
              Ie(y(Ue.number, 4) + "|  "), Ie(Ue.line + a, "color:red");
          }), typeof document < "u" && !window.chrome ? (Ve[0] = ze.join("%c"), console.log.apply(console, Ve)) : console.log(ze.join(""));
        }), s.raise("Error compiling " + de + " shader, " + Te[0].name);
      }
    }
    function T(I, G, X, ce, Ee) {
      if (!I.getProgramParameter(G, I.LINK_STATUS)) {
        var le = I.getProgramInfoLog(G), de = _(X, Ee), Te = _(ce, Ee), De = 'Error linking program with vertex shader, "' + Te[0].name + '", and fragment shader "' + de[0].name + '"';
        typeof document < "u" ? console.log(
          "%c" + De + a + "%c" + le,
          "color:red;text-decoration:underline;font-weight:bold",
          "color:red"
        ) : console.log(De + a + le), s.raise(De);
      }
    }
    function C(I) {
      I._commandRef = x();
    }
    function O(I, G, X, ce) {
      C(I);
      function Ee(De) {
        return De ? ce.id(De) : 0;
      }
      I._fragId = Ee(I.static.frag), I._vertId = Ee(I.static.vert);
      function le(De, Re) {
        Object.keys(Re).forEach(function(Le) {
          De[ce.id(Le)] = !0;
        });
      }
      var de = I._uniformSet = {};
      le(de, G.static), le(de, G.dynamic);
      var Te = I._attributeSet = {};
      le(Te, X.static), le(Te, X.dynamic), I._hasCount = "count" in I.static || "count" in I.dynamic || "elements" in I.static || "elements" in I.dynamic;
    }
    function L(I, G) {
      var X = w();
      o(I + " in command " + (G || x()) + (X === "unknown" ? "" : " called from " + X));
    }
    function R(I, G, X) {
      I || L(G, X || x());
    }
    function P(I, G, X, ce) {
      I in G || L(
        "unknown parameter (" + I + ")" + u(X) + ". possible values: " + Object.keys(G).join(),
        ce || x()
      );
    }
    function z(I, G, X, ce) {
      c(I, G) || L(
        "invalid parameter type" + u(X) + ". expected " + G + ", got " + typeof I,
        ce || x()
      );
    }
    function V(I) {
      I();
    }
    function N(I, G, X) {
      I.texture ? v(
        I.texture._texture.internalformat,
        G,
        "unsupported texture format for attachment"
      ) : v(
        I.renderbuffer._renderbuffer.format,
        X,
        "unsupported renderbuffer format for attachment"
      );
    }
    var F = 33071, q = 9728, te = 9984, re = 9985, J = 9986, ye = 9987, Be = 5120, Pe = 5121, et = 5122, ut = 5123, at = 5124, At = 5125, xt = 5126, lr = 32819, Rt = 32820, Wt = 33635, vr = 34042, cr = 36193, jt = {};
    jt[Be] = jt[Pe] = 1, jt[et] = jt[ut] = jt[cr] = jt[Wt] = jt[lr] = jt[Rt] = 2, jt[at] = jt[At] = jt[xt] = jt[vr] = 4;
    function or(I, G) {
      return I === Rt || I === lr || I === Wt ? 2 : I === vr ? 4 : jt[I] * G;
    }
    function Wr(I) {
      return !(I & I - 1) && !!I;
    }
    function rt(I, G, X) {
      var ce, Ee = G.width, le = G.height, de = G.channels;
      s(
        Ee > 0 && Ee <= X.maxTextureSize && le > 0 && le <= X.maxTextureSize,
        "invalid texture shape"
      ), (I.wrapS !== F || I.wrapT !== F) && s(
        Wr(Ee) && Wr(le),
        "incompatible wrap mode for texture, both width and height must be power of 2"
      ), G.mipmask === 1 ? Ee !== 1 && le !== 1 && s(
        I.minFilter !== te && I.minFilter !== J && I.minFilter !== re && I.minFilter !== ye,
        "min filter requires mipmap"
      ) : (s(
        Wr(Ee) && Wr(le),
        "texture must be a square power of 2 to support mipmapping"
      ), s(
        G.mipmask === (Ee << 1) - 1,
        "missing or incomplete mipmap data"
      )), G.type === xt && (X.extensions.indexOf("oes_texture_float_linear") < 0 && s(
        I.minFilter === q && I.magFilter === q,
        "filter not supported, must enable oes_texture_float_linear"
      ), s(
        !I.genMipmaps,
        "mipmap generation not supported with float textures"
      ));
      var Te = G.images;
      for (ce = 0; ce < 16; ++ce)
        if (Te[ce]) {
          var De = Ee >> ce, Re = le >> ce;
          s(G.mipmask & 1 << ce, "missing mipmap data");
          var Le = Te[ce];
          if (s(
            Le.width === De && Le.height === Re,
            "invalid shape for mip images"
          ), s(
            Le.format === G.format && Le.internalformat === G.internalformat && Le.type === G.type,
            "incompatible type for mip image"
          ), !Le.compressed)
            if (Le.data) {
              var ze = Math.ceil(or(Le.type, de) * De / Le.unpackAlignment) * Le.unpackAlignment;
              s(
                Le.data.byteLength === ze * Re,
                "invalid data for image, buffer size is inconsistent with image format"
              );
            } else
              Le.element || Le.copy;
        } else
          I.genMipmaps || s((G.mipmask & 1 << ce) === 0, "extra mipmap data");
      G.compressed && s(
        !I.genMipmaps,
        "mipmap generation for compressed images not supported"
      );
    }
    function ie(I, G, X, ce) {
      var Ee = I.width, le = I.height, de = I.channels;
      s(
        Ee > 0 && Ee <= ce.maxTextureSize && le > 0 && le <= ce.maxTextureSize,
        "invalid texture shape"
      ), s(
        Ee === le,
        "cube map must be square"
      ), s(
        G.wrapS === F && G.wrapT === F,
        "wrap mode not supported by cube map"
      );
      for (var Te = 0; Te < X.length; ++Te) {
        var De = X[Te];
        s(
          De.width === Ee && De.height === le,
          "inconsistent cube map face shape"
        ), G.genMipmaps && (s(
          !De.compressed,
          "can not generate mipmap for compressed textures"
        ), s(
          De.mipmask === 1,
          "can not specify mipmaps and generate mipmaps"
        ));
        for (var Re = De.images, Le = 0; Le < 16; ++Le) {
          var ze = Re[Le];
          if (ze) {
            var Ve = Ee >> Le, Ie = le >> Le;
            s(De.mipmask & 1 << Le, "missing mipmap data"), s(
              ze.width === Ve && ze.height === Ie,
              "invalid shape for mip images"
            ), s(
              ze.format === I.format && ze.internalformat === I.internalformat && ze.type === I.type,
              "incompatible type for mip image"
            ), ze.compressed || (ze.data ? s(
              ze.data.byteLength === Ve * Ie * Math.max(or(ze.type, de), ze.unpackAlignment),
              "invalid data for image, buffer size is inconsistent with image format"
            ) : ze.element || ze.copy);
          }
        }
      }
    }
    var D = n(s, {
      optional: V,
      raise: o,
      commandRaise: L,
      command: R,
      parameter: f,
      commandParameter: P,
      constructor: g,
      type: h,
      commandType: z,
      isTypedArray: l,
      nni: d,
      oneOf: v,
      shaderError: S,
      linkError: T,
      callSite: w,
      saveCommandRef: C,
      saveDrawInfo: O,
      framebufferFormat: N,
      guessCommand: x,
      texture2D: rt,
      textureCube: ie
    }), _e = 0, Fe = 0, ge = 5, We = 6;
    function Xe(I, G) {
      this.id = _e++, this.type = I, this.data = G;
    }
    function Ke(I) {
      return I.replace(/\\/g, "\\\\").replace(/"/g, '\\"');
    }
    function Ze(I) {
      if (I.length === 0)
        return [];
      var G = I.charAt(0), X = I.charAt(I.length - 1);
      if (I.length > 1 && G === X && (G === '"' || G === "'"))
        return ['"' + Ke(I.substr(1, I.length - 2)) + '"'];
      var ce = /\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);
      if (ce)
        return Ze(I.substr(0, ce.index)).concat(Ze(ce[1])).concat(Ze(I.substr(ce.index + ce[0].length)));
      var Ee = I.split(".");
      if (Ee.length === 1)
        return ['"' + Ke(I) + '"'];
      for (var le = [], de = 0; de < Ee.length; ++de)
        le = le.concat(Ze(Ee[de]));
      return le;
    }
    function ht(I) {
      return "[" + Ze(I).join("][") + "]";
    }
    function It(I, G) {
      return new Xe(I, ht(G + ""));
    }
    function sr(I) {
      return typeof I == "function" && !I._reglType || I instanceof Xe;
    }
    function Ot(I, G) {
      if (typeof I == "function")
        return new Xe(Fe, I);
      if (typeof I == "number" || typeof I == "boolean")
        return new Xe(ge, I);
      if (Array.isArray(I))
        return new Xe(We, I.map((X, ce) => Ot(X, G + "[" + ce + "]")));
      if (I instanceof Xe)
        return I;
      D(!1, "invalid option type in uniform " + G);
    }
    var fr = {
      DynamicVariable: Xe,
      define: It,
      isDynamic: sr,
      unbox: Ot,
      accessor: ht
    }, ar = {
      next: typeof requestAnimationFrame == "function" ? function(I) {
        return requestAnimationFrame(I);
      } : function(I) {
        return setTimeout(I, 16);
      },
      cancel: typeof cancelAnimationFrame == "function" ? function(I) {
        return cancelAnimationFrame(I);
      } : clearTimeout
    }, pr = typeof performance < "u" && performance.now ? function() {
      return performance.now();
    } : function() {
      return +/* @__PURE__ */ new Date();
    };
    function hr() {
      var I = { "": 0 }, G = [""];
      return {
        id: function(X) {
          var ce = I[X];
          return ce || (ce = I[X] = G.length, G.push(X), ce);
        },
        str: function(X) {
          return G[X];
        }
      };
    }
    function Kr(I, G, X) {
      var ce = document.createElement("canvas");
      n(ce.style, {
        border: 0,
        margin: 0,
        padding: 0,
        top: 0,
        left: 0
      }), I.appendChild(ce), I === document.body && (ce.style.position = "absolute", n(I.style, {
        margin: 0,
        padding: 0
      }));
      function Ee() {
        var Te = window.innerWidth, De = window.innerHeight;
        if (I !== document.body) {
          var Re = I.getBoundingClientRect();
          Te = Re.right - Re.left, De = Re.bottom - Re.top;
        }
        ce.width = X * Te, ce.height = X * De, n(ce.style, {
          width: Te + "px",
          height: De + "px"
        });
      }
      var le;
      I !== document.body && typeof ResizeObserver == "function" ? (le = new ResizeObserver(function() {
        setTimeout(Ee);
      }), le.observe(I)) : window.addEventListener("resize", Ee, !1);
      function de() {
        le ? le.disconnect() : window.removeEventListener("resize", Ee), I.removeChild(ce);
      }
      return Ee(), {
        canvas: ce,
        onDestroy: de
      };
    }
    function Kt(I, G) {
      function X(ce) {
        try {
          return I.getContext(ce, G);
        } catch {
          return null;
        }
      }
      return X("webgl") || X("experimental-webgl") || X("webgl-experimental");
    }
    function Sr(I) {
      return typeof I.nodeName == "string" && typeof I.appendChild == "function" && typeof I.getBoundingClientRect == "function";
    }
    function Pn(I) {
      return typeof I.drawArrays == "function" || typeof I.drawElements == "function";
    }
    function Lr(I) {
      return typeof I == "string" ? I.split() : (D(Array.isArray(I), "invalid extension array"), I);
    }
    function Ia(I) {
      return typeof I == "string" ? (D(typeof document < "u", "not supported outside of DOM"), document.querySelector(I)) : I;
    }
    function ho(I) {
      var G = I || {}, X, ce, Ee, le, de = {}, Te = [], De = [], Re = typeof window > "u" ? 1 : window.devicePixelRatio, Le = !1, ze = function(Ue) {
        Ue && D.raise(Ue);
      }, Ve = function() {
      };
      if (typeof G == "string" ? (D(
        typeof document < "u",
        "selector queries only supported in DOM enviroments"
      ), X = document.querySelector(G), D(X, "invalid query string for element")) : typeof G == "object" ? Sr(G) ? X = G : Pn(G) ? (le = G, Ee = le.canvas) : (D.constructor(G), "gl" in G ? le = G.gl : "canvas" in G ? Ee = Ia(G.canvas) : "container" in G && (ce = Ia(G.container)), "attributes" in G && (de = G.attributes, D.type(de, "object", "invalid context attributes")), "extensions" in G && (Te = Lr(G.extensions)), "optionalExtensions" in G && (De = Lr(G.optionalExtensions)), "onDone" in G && (D.type(
        G.onDone,
        "function",
        "invalid or missing onDone callback"
      ), ze = G.onDone), "profile" in G && (Le = !!G.profile), "pixelRatio" in G && (Re = +G.pixelRatio, D(Re > 0, "invalid pixel ratio"))) : D.raise("invalid arguments to regl"), X && (X.nodeName.toLowerCase() === "canvas" ? Ee = X : ce = X), !le) {
        if (!Ee) {
          D(
            typeof document < "u",
            "must manually specify webgl context outside of DOM environments"
          );
          var Ie = Kr(ce || document.body, ze, Re);
          if (!Ie)
            return null;
          Ee = Ie.canvas, Ve = Ie.onDestroy;
        }
        de.premultipliedAlpha === void 0 && (de.premultipliedAlpha = !0), le = Kt(Ee, de);
      }
      return le ? {
        gl: le,
        canvas: Ee,
        container: ce,
        extensions: Te,
        optionalExtensions: De,
        pixelRatio: Re,
        profile: Le,
        onDone: ze,
        onDestroy: Ve
      } : (Ve(), ze("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"), null);
    }
    function vo(I, G) {
      var X = {};
      function ce(de) {
        D.type(de, "string", "extension name must be string");
        var Te = de.toLowerCase(), De;
        try {
          De = X[Te] = I.getExtension(Te);
        } catch {
        }
        return !!De;
      }
      for (var Ee = 0; Ee < G.extensions.length; ++Ee) {
        var le = G.extensions[Ee];
        if (!ce(le))
          return G.onDestroy(), G.onDone('"' + le + '" extension is not supported by the current WebGL context, try upgrading your system or a different browser'), null;
      }
      return G.optionalExtensions.forEach(ce), {
        extensions: X,
        restore: function() {
          Object.keys(X).forEach(function(de) {
            if (X[de] && !ce(de))
              throw new Error("(regl): error restoring extension " + de);
          });
        }
      };
    }
    function Xr(I, G) {
      for (var X = Array(I), ce = 0; ce < I; ++ce)
        X[ce] = G(ce);
      return X;
    }
    var fa = 5120, ii = 5121, po = 5122, go = 5123, yo = 5124, kn = 5125, Ar = 5126;
    function Rn(I) {
      for (var G = 16; G <= 1 << 28; G *= 16)
        if (I <= G)
          return G;
      return 0;
    }
    function Mt(I) {
      var G, X;
      return G = (I > 65535) << 4, I >>>= G, X = (I > 255) << 3, I >>>= X, G |= X, X = (I > 15) << 2, I >>>= X, G |= X, X = (I > 3) << 1, I >>>= X, G |= X, G | I >> 1;
    }
    function dr() {
      var I = Xr(8, function() {
        return [];
      });
      function G(le) {
        var de = Rn(le), Te = I[Mt(de) >> 2];
        return Te.length > 0 ? Te.pop() : new ArrayBuffer(de);
      }
      function X(le) {
        I[Mt(le.byteLength) >> 2].push(le);
      }
      function ce(le, de) {
        var Te = null;
        switch (le) {
          case fa:
            Te = new Int8Array(G(de), 0, de);
            break;
          case ii:
            Te = new Uint8Array(G(de), 0, de);
            break;
          case po:
            Te = new Int16Array(G(2 * de), 0, de);
            break;
          case go:
            Te = new Uint16Array(G(2 * de), 0, de);
            break;
          case yo:
            Te = new Int32Array(G(4 * de), 0, de);
            break;
          case kn:
            Te = new Uint32Array(G(4 * de), 0, de);
            break;
          case Ar:
            Te = new Float32Array(G(4 * de), 0, de);
            break;
          default:
            return null;
        }
        return Te.length !== de ? Te.subarray(0, de) : Te;
      }
      function Ee(le) {
        X(le.buffer);
      }
      return {
        alloc: G,
        free: X,
        allocType: ce,
        freeType: Ee
      };
    }
    var vt = dr();
    vt.zero = dr();
    var br = 3408, qr = 3410, oi = 3411, si = 3412, la = 3413, Oa = 3414, ui = 3415, fi = 33901, Qd = 33902, Jd = 3379, ev = 3386, tv = 34921, rv = 36347, nv = 36348, av = 35661, iv = 35660, ov = 34930, sv = 36349, uv = 34076, fv = 34024, aL = 7936, iL = 7937, oL = 7938, sL = 35724, uL = 34047, fL = 36063, lL = 34852, El = 3553, o1 = 34067, cL = 34069, hL = 33984, xu = 6408, lv = 5126, s1 = 5121, cv = 36160, dL = 36053, vL = 36064, pL = 16384, gL = function(I, G) {
      var X = 1;
      G.ext_texture_filter_anisotropic && (X = I.getParameter(uL));
      var ce = 1, Ee = 1;
      G.webgl_draw_buffers && (ce = I.getParameter(lL), Ee = I.getParameter(fL));
      var le = !!G.oes_texture_float;
      if (le) {
        var de = I.createTexture();
        I.bindTexture(El, de), I.texImage2D(El, 0, xu, 1, 1, 0, xu, lv, null);
        var Te = I.createFramebuffer();
        if (I.bindFramebuffer(cv, Te), I.framebufferTexture2D(cv, vL, El, de, 0), I.bindTexture(El, null), I.checkFramebufferStatus(cv) !== dL)
          le = !1;
        else {
          I.viewport(0, 0, 1, 1), I.clearColor(1, 0, 0, 1), I.clear(pL);
          var De = vt.allocType(lv, 4);
          I.readPixels(0, 0, 1, 1, xu, lv, De), I.getError() ? le = !1 : (I.deleteFramebuffer(Te), I.deleteTexture(de), le = De[0] === 1), vt.freeType(De);
        }
      }
      var Re = typeof navigator < "u" && (/MSIE/.test(navigator.userAgent) || /Trident\//.test(navigator.appVersion) || /Edge/.test(navigator.userAgent)), Le = !0;
      if (!Re) {
        var ze = I.createTexture(), Ve = vt.allocType(s1, 36);
        I.activeTexture(hL), I.bindTexture(o1, ze), I.texImage2D(cL, 0, xu, 3, 3, 0, xu, s1, Ve), vt.freeType(Ve), I.bindTexture(o1, null), I.deleteTexture(ze), Le = !I.getError();
      }
      return {
        // drawing buffer bit depth
        colorBits: [
          I.getParameter(qr),
          I.getParameter(oi),
          I.getParameter(si),
          I.getParameter(la)
        ],
        depthBits: I.getParameter(Oa),
        stencilBits: I.getParameter(ui),
        subpixelBits: I.getParameter(br),
        // supported extensions
        extensions: Object.keys(G).filter(function(Ie) {
          return !!G[Ie];
        }),
        // max aniso samples
        maxAnisotropic: X,
        // max draw buffers
        maxDrawbuffers: ce,
        maxColorAttachments: Ee,
        // point and line size ranges
        pointSizeDims: I.getParameter(fi),
        lineWidthDims: I.getParameter(Qd),
        maxViewportDims: I.getParameter(ev),
        maxCombinedTextureUnits: I.getParameter(av),
        maxCubeMapSize: I.getParameter(uv),
        maxRenderbufferSize: I.getParameter(fv),
        maxTextureUnits: I.getParameter(ov),
        maxTextureSize: I.getParameter(Jd),
        maxAttributes: I.getParameter(tv),
        maxVertexUniforms: I.getParameter(rv),
        maxVertexTextureUnits: I.getParameter(iv),
        maxVaryingVectors: I.getParameter(nv),
        maxFragmentUniforms: I.getParameter(sv),
        // vendor info
        glsl: I.getParameter(sL),
        renderer: I.getParameter(iL),
        vendor: I.getParameter(aL),
        version: I.getParameter(oL),
        // quirks
        readFloat: le,
        npotTextureCube: Le
      };
    };
    function ca(I) {
      return !!I && typeof I == "object" && Array.isArray(I.shape) && Array.isArray(I.stride) && typeof I.offset == "number" && I.shape.length === I.stride.length && (Array.isArray(I.data) || t(I.data));
    }
    var Bn = function(I) {
      return Object.keys(I).map(function(G) {
        return I[G];
      });
    }, xl = {
      shape: EL,
      flatten: bL
    };
    function yL(I, G, X) {
      for (var ce = 0; ce < G; ++ce)
        X[ce] = I[ce];
    }
    function mL(I, G, X, ce) {
      for (var Ee = 0, le = 0; le < G; ++le)
        for (var de = I[le], Te = 0; Te < X; ++Te)
          ce[Ee++] = de[Te];
    }
    function u1(I, G, X, ce, Ee, le) {
      for (var de = le, Te = 0; Te < G; ++Te)
        for (var De = I[Te], Re = 0; Re < X; ++Re)
          for (var Le = De[Re], ze = 0; ze < ce; ++ze)
            Ee[de++] = Le[ze];
    }
    function f1(I, G, X, ce, Ee) {
      for (var le = 1, de = X + 1; de < G.length; ++de)
        le *= G[de];
      var Te = G[X];
      if (G.length - X === 4) {
        var De = G[X + 1], Re = G[X + 2], Le = G[X + 3];
        for (de = 0; de < Te; ++de)
          u1(I[de], De, Re, Le, ce, Ee), Ee += le;
      } else
        for (de = 0; de < Te; ++de)
          f1(I[de], G, X + 1, ce, Ee), Ee += le;
    }
    function bL(I, G, X, ce) {
      var Ee = 1;
      if (G.length)
        for (var le = 0; le < G.length; ++le)
          Ee *= G[le];
      else
        Ee = 0;
      var de = ce || vt.allocType(X, Ee);
      switch (G.length) {
        case 0:
          break;
        case 1:
          yL(I, G[0], de);
          break;
        case 2:
          mL(I, G[0], G[1], de);
          break;
        case 3:
          u1(I, G[0], G[1], G[2], de, 0);
          break;
        default:
          f1(I, G, 0, de, 0);
      }
      return de;
    }
    function EL(I) {
      for (var G = [], X = I; X.length; X = X[0])
        G.push(X.length);
      return G;
    }
    var hv = {
      "[object Int8Array]": 5120,
      "[object Int16Array]": 5122,
      "[object Int32Array]": 5124,
      "[object Uint8Array]": 5121,
      "[object Uint8ClampedArray]": 5121,
      "[object Uint16Array]": 5123,
      "[object Uint32Array]": 5125,
      "[object Float32Array]": 5126,
      "[object Float64Array]": 5121,
      "[object ArrayBuffer]": 5121
    }, xL = 5120, wL = 5122, _L = 5124, ML = 5121, SL = 5123, AL = 5125, CL = 5126, TL = 5126, mo = {
      int8: xL,
      int16: wL,
      int32: _L,
      uint8: ML,
      uint16: SL,
      uint32: AL,
      float: CL,
      float32: TL
    }, IL = 35048, OL = 35040, wl = {
      dynamic: IL,
      stream: OL,
      static: 35044
    }, dv = xl.flatten, l1 = xl.shape, c1 = 35044, DL = 35040, vv = 5121, pv = 5126, Li = [];
    Li[5120] = 1, Li[5122] = 2, Li[5124] = 4, Li[5121] = 1, Li[5123] = 2, Li[5125] = 4, Li[5126] = 4;
    function _l(I) {
      return hv[Object.prototype.toString.call(I)] | 0;
    }
    function h1(I, G) {
      for (var X = 0; X < G.length; ++X)
        I[X] = G[X];
    }
    function d1(I, G, X, ce, Ee, le, de) {
      for (var Te = 0, De = 0; De < X; ++De)
        for (var Re = 0; Re < ce; ++Re)
          I[Te++] = G[Ee * De + le * Re + de];
    }
    function LL(I, G, X, ce) {
      var Ee = 0, le = {};
      function de(oe) {
        this.id = Ee++, this.buffer = I.createBuffer(), this.type = oe, this.usage = c1, this.byteLength = 0, this.dimension = 1, this.dtype = vv, this.persistentData = null, X.profile && (this.stats = { size: 0 });
      }
      de.prototype.bind = function() {
        I.bindBuffer(this.type, this.buffer);
      }, de.prototype.destroy = function() {
        Ve(this);
      };
      var Te = [];
      function De(oe, ve) {
        var ke = Te.pop();
        return ke || (ke = new de(oe)), ke.bind(), ze(ke, ve, DL, 0, 1, !1), ke;
      }
      function Re(oe) {
        Te.push(oe);
      }
      function Le(oe, ve, ke) {
        oe.byteLength = ve.byteLength, I.bufferData(oe.type, ve, ke);
      }
      function ze(oe, ve, ke, qe, Me, tt) {
        var Ce;
        if (oe.usage = ke, Array.isArray(ve)) {
          if (oe.dtype = qe || pv, ve.length > 0) {
            var je;
            if (Array.isArray(ve[0])) {
              Ce = l1(ve);
              for (var Ae = 1, $e = 1; $e < Ce.length; ++$e)
                Ae *= Ce[$e];
              oe.dimension = Ae, je = dv(ve, Ce, oe.dtype), Le(oe, je, ke), tt ? oe.persistentData = je : vt.freeType(je);
            } else if (typeof ve[0] == "number") {
              oe.dimension = Me;
              var dt = vt.allocType(oe.dtype, ve.length);
              h1(dt, ve), Le(oe, dt, ke), tt ? oe.persistentData = dt : vt.freeType(dt);
            } else
              t(ve[0]) ? (oe.dimension = ve[0].length, oe.dtype = qe || _l(ve[0]) || pv, je = dv(
                ve,
                [ve.length, ve[0].length],
                oe.dtype
              ), Le(oe, je, ke), tt ? oe.persistentData = je : vt.freeType(je)) : D.raise("invalid buffer data");
          }
        } else if (t(ve))
          oe.dtype = qe || _l(ve), oe.dimension = Me, Le(oe, ve, ke), tt && (oe.persistentData = new Uint8Array(new Uint8Array(ve.buffer)));
        else if (ca(ve)) {
          Ce = ve.shape;
          var St = ve.stride, Ye = ve.offset, Ge = 0, we = 0, wt = 0, Dt = 0;
          Ce.length === 1 ? (Ge = Ce[0], we = 1, wt = St[0], Dt = 0) : Ce.length === 2 ? (Ge = Ce[0], we = Ce[1], wt = St[0], Dt = St[1]) : D.raise("invalid shape"), oe.dtype = qe || _l(ve.data) || pv, oe.dimension = we;
          var it = vt.allocType(oe.dtype, Ge * we);
          d1(
            it,
            ve.data,
            Ge,
            we,
            wt,
            Dt,
            Ye
          ), Le(oe, it, ke), tt ? oe.persistentData = it : vt.freeType(it);
        } else
          ve instanceof ArrayBuffer ? (oe.dtype = vv, oe.dimension = Me, Le(oe, ve, ke), tt && (oe.persistentData = new Uint8Array(new Uint8Array(ve)))) : D.raise("invalid buffer data");
      }
      function Ve(oe) {
        G.bufferCount--, ce(oe);
        var ve = oe.buffer;
        D(ve, "buffer must not be deleted already"), I.deleteBuffer(ve), oe.buffer = null, delete le[oe.id];
      }
      function Ie(oe, ve, ke, qe) {
        G.bufferCount++;
        var Me = new de(ve);
        le[Me.id] = Me;
        function tt(Ae) {
          var $e = c1, dt = null, St = 0, Ye = 0, Ge = 1;
          return Array.isArray(Ae) || t(Ae) || ca(Ae) || Ae instanceof ArrayBuffer ? dt = Ae : typeof Ae == "number" ? St = Ae | 0 : Ae && (D.type(
            Ae,
            "object",
            "buffer arguments must be an object, a number or an array"
          ), "data" in Ae && (D(
            dt === null || Array.isArray(dt) || t(dt) || ca(dt),
            "invalid data for buffer"
          ), dt = Ae.data), "usage" in Ae && (D.parameter(Ae.usage, wl, "invalid buffer usage"), $e = wl[Ae.usage]), "type" in Ae && (D.parameter(Ae.type, mo, "invalid buffer type"), Ye = mo[Ae.type]), "dimension" in Ae && (D.type(Ae.dimension, "number", "invalid dimension"), Ge = Ae.dimension | 0), "length" in Ae && (D.nni(St, "buffer length must be a nonnegative integer"), St = Ae.length | 0)), Me.bind(), dt ? ze(Me, dt, $e, Ye, Ge, qe) : (St && I.bufferData(Me.type, St, $e), Me.dtype = Ye || vv, Me.usage = $e, Me.dimension = Ge, Me.byteLength = St), X.profile && (Me.stats.size = Me.byteLength * Li[Me.dtype]), tt;
        }
        function Ce(Ae, $e) {
          D(
            $e + Ae.byteLength <= Me.byteLength,
            "invalid buffer subdata call, buffer is too small.  Can't write data of size " + Ae.byteLength + " starting from offset " + $e + " to a buffer of size " + Me.byteLength
          ), I.bufferSubData(Me.type, $e, Ae);
        }
        function je(Ae, $e) {
          var dt = ($e || 0) | 0, St;
          if (Me.bind(), t(Ae) || Ae instanceof ArrayBuffer)
            Ce(Ae, dt);
          else if (Array.isArray(Ae)) {
            if (Ae.length > 0)
              if (typeof Ae[0] == "number") {
                var Ye = vt.allocType(Me.dtype, Ae.length);
                h1(Ye, Ae), Ce(Ye, dt), vt.freeType(Ye);
              } else if (Array.isArray(Ae[0]) || t(Ae[0])) {
                St = l1(Ae);
                var Ge = dv(Ae, St, Me.dtype);
                Ce(Ge, dt), vt.freeType(Ge);
              } else
                D.raise("invalid buffer data");
          } else if (ca(Ae)) {
            St = Ae.shape;
            var we = Ae.stride, wt = 0, Dt = 0, it = 0, Bt = 0;
            St.length === 1 ? (wt = St[0], Dt = 1, it = we[0], Bt = 0) : St.length === 2 ? (wt = St[0], Dt = St[1], it = we[0], Bt = we[1]) : D.raise("invalid shape");
            var Ct = Array.isArray(Ae.data) ? Me.dtype : _l(Ae.data), kt = vt.allocType(Ct, wt * Dt);
            d1(
              kt,
              Ae.data,
              wt,
              Dt,
              it,
              Bt,
              Ae.offset
            ), Ce(kt, dt), vt.freeType(kt);
          } else
            D.raise("invalid data for buffer subdata");
          return tt;
        }
        return ke || tt(oe), tt._reglType = "buffer", tt._buffer = Me, tt.subdata = je, X.profile && (tt.stats = Me.stats), tt.destroy = function() {
          Ve(Me);
        }, tt;
      }
      function Ue() {
        Bn(le).forEach(function(oe) {
          oe.buffer = I.createBuffer(), I.bindBuffer(oe.type, oe.buffer), I.bufferData(
            oe.type,
            oe.persistentData || oe.byteLength,
            oe.usage
          );
        });
      }
      return X.profile && (G.getTotalBufferSize = function() {
        var oe = 0;
        return Object.keys(le).forEach(function(ve) {
          oe += le[ve].stats.size;
        }), oe;
      }), {
        create: Ie,
        createStream: De,
        destroyStream: Re,
        clear: function() {
          Bn(le).forEach(Ve), Te.forEach(Ve);
        },
        getBuffer: function(oe) {
          return oe && oe._buffer instanceof de ? oe._buffer : null;
        },
        restore: Ue,
        _initBuffer: ze
      };
    }
    var NL = 0, PL = 0, kL = 1, RL = 1, BL = 4, FL = 4, as = {
      points: NL,
      point: PL,
      lines: kL,
      line: RL,
      triangles: BL,
      triangle: FL,
      "line loop": 2,
      "line strip": 3,
      "triangle strip": 5,
      "triangle fan": 6
    }, GL = 0, zL = 1, wu = 4, UL = 5120, is = 5121, v1 = 5122, os = 5123, p1 = 5124, bo = 5125, gv = 34963, jL = 35040, $L = 35044;
    function WL(I, G, X, ce) {
      var Ee = {}, le = 0, de = {
        uint8: is,
        uint16: os
      };
      G.oes_element_index_uint && (de.uint32 = bo);
      function Te(Ue) {
        this.id = le++, Ee[this.id] = this, this.buffer = Ue, this.primType = wu, this.vertCount = 0, this.type = 0;
      }
      Te.prototype.bind = function() {
        this.buffer.bind();
      };
      var De = [];
      function Re(Ue) {
        var oe = De.pop();
        return oe || (oe = new Te(X.create(
          null,
          gv,
          !0,
          !1
        )._buffer)), ze(oe, Ue, jL, -1, -1, 0, 0), oe;
      }
      function Le(Ue) {
        De.push(Ue);
      }
      function ze(Ue, oe, ve, ke, qe, Me, tt) {
        Ue.buffer.bind();
        var Ce;
        if (oe) {
          var je = tt;
          !tt && (!t(oe) || ca(oe) && !t(oe.data)) && (je = G.oes_element_index_uint ? bo : os), X._initBuffer(
            Ue.buffer,
            oe,
            ve,
            je,
            3
          );
        } else
          I.bufferData(gv, Me, ve), Ue.buffer.dtype = Ce || is, Ue.buffer.usage = ve, Ue.buffer.dimension = 3, Ue.buffer.byteLength = Me;
        if (Ce = tt, !tt) {
          switch (Ue.buffer.dtype) {
            case is:
            case UL:
              Ce = is;
              break;
            case os:
            case v1:
              Ce = os;
              break;
            case bo:
            case p1:
              Ce = bo;
              break;
            default:
              D.raise("unsupported type for element array");
          }
          Ue.buffer.dtype = Ce;
        }
        Ue.type = Ce, D(
          Ce !== bo || !!G.oes_element_index_uint,
          "32 bit element buffers not supported, enable oes_element_index_uint first"
        );
        var Ae = qe;
        Ae < 0 && (Ae = Ue.buffer.byteLength, Ce === os ? Ae >>= 1 : Ce === bo && (Ae >>= 2)), Ue.vertCount = Ae;
        var $e = ke;
        if (ke < 0) {
          $e = wu;
          var dt = Ue.buffer.dimension;
          dt === 1 && ($e = GL), dt === 2 && ($e = zL), dt === 3 && ($e = wu);
        }
        Ue.primType = $e;
      }
      function Ve(Ue) {
        ce.elementsCount--, D(Ue.buffer !== null, "must not double destroy elements"), delete Ee[Ue.id], Ue.buffer.destroy(), Ue.buffer = null;
      }
      function Ie(Ue, oe) {
        var ve = X.create(null, gv, !0), ke = new Te(ve._buffer);
        ce.elementsCount++;
        function qe(Me) {
          if (!Me)
            ve(), ke.primType = wu, ke.vertCount = 0, ke.type = is;
          else if (typeof Me == "number")
            ve(Me), ke.primType = wu, ke.vertCount = Me | 0, ke.type = is;
          else {
            var tt = null, Ce = $L, je = -1, Ae = -1, $e = 0, dt = 0;
            Array.isArray(Me) || t(Me) || ca(Me) ? tt = Me : (D.type(Me, "object", "invalid arguments for elements"), "data" in Me && (tt = Me.data, D(
              Array.isArray(tt) || t(tt) || ca(tt),
              "invalid data for element buffer"
            )), "usage" in Me && (D.parameter(
              Me.usage,
              wl,
              "invalid element buffer usage"
            ), Ce = wl[Me.usage]), "primitive" in Me && (D.parameter(
              Me.primitive,
              as,
              "invalid element buffer primitive"
            ), je = as[Me.primitive]), "count" in Me && (D(
              typeof Me.count == "number" && Me.count >= 0,
              "invalid vertex count for elements"
            ), Ae = Me.count | 0), "type" in Me && (D.parameter(
              Me.type,
              de,
              "invalid buffer type"
            ), dt = de[Me.type]), "length" in Me ? $e = Me.length | 0 : ($e = Ae, dt === os || dt === v1 ? $e *= 2 : (dt === bo || dt === p1) && ($e *= 4))), ze(
              ke,
              tt,
              Ce,
              je,
              Ae,
              $e,
              dt
            );
          }
          return qe;
        }
        return qe(Ue), qe._reglType = "elements", qe._elements = ke, qe.subdata = function(Me, tt) {
          return ve.subdata(Me, tt), qe;
        }, qe.destroy = function() {
          Ve(ke);
        }, qe;
      }
      return {
        create: Ie,
        createStream: Re,
        destroyStream: Le,
        getElements: function(Ue) {
          return typeof Ue == "function" && Ue._elements instanceof Te ? Ue._elements : null;
        },
        clear: function() {
          Bn(Ee).forEach(Ve);
        }
      };
    }
    var g1 = new Float32Array(1), XL = new Uint32Array(g1.buffer), VL = 5123;
    function y1(I) {
      for (var G = vt.allocType(VL, I.length), X = 0; X < I.length; ++X)
        if (isNaN(I[X]))
          G[X] = 65535;
        else if (I[X] === 1 / 0)
          G[X] = 31744;
        else if (I[X] === -1 / 0)
          G[X] = 64512;
        else {
          g1[0] = I[X];
          var ce = XL[0], Ee = ce >>> 31 << 15, le = (ce << 1 >>> 24) - 127, de = ce >> 13 & 1023;
          if (le < -24)
            G[X] = Ee;
          else if (le < -14) {
            var Te = -14 - le;
            G[X] = Ee + (de + 1024 >> Te);
          } else
            le > 15 ? G[X] = Ee + 31744 : G[X] = Ee + (le + 15 << 10) + de;
        }
      return G;
    }
    function Cr(I) {
      return Array.isArray(I) || t(I);
    }
    var m1 = function(I) {
      return !(I & I - 1) && !!I;
    }, YL = 34467, Da = 3553, yv = 34067, Ml = 34069, Eo = 6408, mv = 6406, Sl = 6407, _u = 6409, Al = 6410, b1 = 32854, bv = 32855, E1 = 36194, HL = 32819, KL = 32820, qL = 33635, ZL = 34042, Ev = 6402, Cl = 34041, xv = 35904, wv = 35906, ss = 36193, _v = 33776, Mv = 33777, Sv = 33778, Av = 33779, x1 = 35986, w1 = 35987, _1 = 34798, M1 = 35840, S1 = 35841, A1 = 35842, C1 = 35843, T1 = 36196, us = 5121, Cv = 5123, Tv = 5125, Mu = 5126, QL = 10242, JL = 10243, eN = 10497, Iv = 33071, tN = 33648, rN = 10240, nN = 10241, Ov = 9728, aN = 9729, Dv = 9984, I1 = 9985, O1 = 9986, Lv = 9987, iN = 33170, Tl = 4352, oN = 4353, sN = 4354, uN = 34046, fN = 3317, lN = 37440, cN = 37441, hN = 37443, D1 = 37444, Su = 33984, dN = [
      Dv,
      O1,
      I1,
      Lv
    ], Il = [
      0,
      _u,
      Al,
      Sl,
      Eo
    ], Zn = {};
    Zn[_u] = Zn[mv] = Zn[Ev] = 1, Zn[Cl] = Zn[Al] = 2, Zn[Sl] = Zn[xv] = 3, Zn[Eo] = Zn[wv] = 4;
    function fs(I) {
      return "[object " + I + "]";
    }
    var L1 = fs("HTMLCanvasElement"), N1 = fs("OffscreenCanvas"), P1 = fs("CanvasRenderingContext2D"), k1 = fs("ImageBitmap"), R1 = fs("HTMLImageElement"), B1 = fs("HTMLVideoElement"), vN = Object.keys(hv).concat([
      L1,
      N1,
      P1,
      k1,
      R1,
      B1
    ]), ls = [];
    ls[us] = 1, ls[Mu] = 4, ls[ss] = 2, ls[Cv] = 2, ls[Tv] = 4;
    var on = [];
    on[b1] = 2, on[bv] = 2, on[E1] = 2, on[Cl] = 4, on[_v] = 0.5, on[Mv] = 0.5, on[Sv] = 1, on[Av] = 1, on[x1] = 0.5, on[w1] = 1, on[_1] = 1, on[M1] = 0.5, on[S1] = 0.25, on[A1] = 0.5, on[C1] = 0.25, on[T1] = 0.5;
    function F1(I) {
      return Array.isArray(I) && (I.length === 0 || typeof I[0] == "number");
    }
    function G1(I) {
      if (!Array.isArray(I))
        return !1;
      var G = I.length;
      return !(G === 0 || !Cr(I[0]));
    }
    function xo(I) {
      return Object.prototype.toString.call(I);
    }
    function z1(I) {
      return xo(I) === L1;
    }
    function U1(I) {
      return xo(I) === N1;
    }
    function pN(I) {
      return xo(I) === P1;
    }
    function gN(I) {
      return xo(I) === k1;
    }
    function yN(I) {
      return xo(I) === R1;
    }
    function mN(I) {
      return xo(I) === B1;
    }
    function Nv(I) {
      if (!I)
        return !1;
      var G = xo(I);
      return vN.indexOf(G) >= 0 ? !0 : F1(I) || G1(I) || ca(I);
    }
    function j1(I) {
      return hv[Object.prototype.toString.call(I)] | 0;
    }
    function bN(I, G) {
      var X = G.length;
      switch (I.type) {
        case us:
        case Cv:
        case Tv:
        case Mu:
          var ce = vt.allocType(I.type, X);
          ce.set(G), I.data = ce;
          break;
        case ss:
          I.data = y1(G);
          break;
        default:
          D.raise("unsupported texture type, must specify a typed array");
      }
    }
    function $1(I, G) {
      return vt.allocType(
        I.type === ss ? Mu : I.type,
        G
      );
    }
    function W1(I, G) {
      I.type === ss ? (I.data = y1(G), vt.freeType(G)) : I.data = G;
    }
    function EN(I, G, X, ce, Ee, le) {
      for (var de = I.width, Te = I.height, De = I.channels, Re = de * Te * De, Le = $1(I, Re), ze = 0, Ve = 0; Ve < Te; ++Ve)
        for (var Ie = 0; Ie < de; ++Ie)
          for (var Ue = 0; Ue < De; ++Ue)
            Le[ze++] = G[X * Ie + ce * Ve + Ee * Ue + le];
      W1(I, Le);
    }
    function Ol(I, G, X, ce, Ee, le) {
      var de;
      if (typeof on[I] < "u" ? de = on[I] : de = Zn[I] * ls[G], le && (de *= 6), Ee) {
        for (var Te = 0, De = X; De >= 1; )
          Te += de * De * De, De /= 2;
        return Te;
      } else
        return de * X * ce;
    }
    function xN(I, G, X, ce, Ee, le, de) {
      var Te = {
        "don't care": Tl,
        "dont care": Tl,
        nice: sN,
        fast: oN
      }, De = {
        repeat: eN,
        clamp: Iv,
        mirror: tN
      }, Re = {
        nearest: Ov,
        linear: aN
      }, Le = n({
        mipmap: Lv,
        "nearest mipmap nearest": Dv,
        "linear mipmap nearest": I1,
        "nearest mipmap linear": O1,
        "linear mipmap linear": Lv
      }, Re), ze = {
        none: 0,
        browser: D1
      }, Ve = {
        uint8: us,
        rgba4: HL,
        rgb565: qL,
        "rgb5 a1": KL
      }, Ie = {
        alpha: mv,
        luminance: _u,
        "luminance alpha": Al,
        rgb: Sl,
        rgba: Eo,
        rgba4: b1,
        "rgb5 a1": bv,
        rgb565: E1
      }, Ue = {};
      G.ext_srgb && (Ie.srgb = xv, Ie.srgba = wv), G.oes_texture_float && (Ve.float32 = Ve.float = Mu), G.oes_texture_half_float && (Ve.float16 = Ve["half float"] = ss), G.webgl_depth_texture && (n(Ie, {
        depth: Ev,
        "depth stencil": Cl
      }), n(Ve, {
        uint16: Cv,
        uint32: Tv,
        "depth stencil": ZL
      })), G.webgl_compressed_texture_s3tc && n(Ue, {
        "rgb s3tc dxt1": _v,
        "rgba s3tc dxt1": Mv,
        "rgba s3tc dxt3": Sv,
        "rgba s3tc dxt5": Av
      }), G.webgl_compressed_texture_atc && n(Ue, {
        "rgb atc": x1,
        "rgba atc explicit alpha": w1,
        "rgba atc interpolated alpha": _1
      }), G.webgl_compressed_texture_pvrtc && n(Ue, {
        "rgb pvrtc 4bppv1": M1,
        "rgb pvrtc 2bppv1": S1,
        "rgba pvrtc 4bppv1": A1,
        "rgba pvrtc 2bppv1": C1
      }), G.webgl_compressed_texture_etc1 && (Ue["rgb etc1"] = T1);
      var oe = Array.prototype.slice.call(
        I.getParameter(YL)
      );
      Object.keys(Ue).forEach(function(W) {
        var he = Ue[W];
        oe.indexOf(he) >= 0 && (Ie[W] = he);
      });
      var ve = Object.keys(Ie);
      X.textureFormats = ve;
      var ke = [];
      Object.keys(Ie).forEach(function(W) {
        var he = Ie[W];
        ke[he] = W;
      });
      var qe = [];
      Object.keys(Ve).forEach(function(W) {
        var he = Ve[W];
        qe[he] = W;
      });
      var Me = [];
      Object.keys(Re).forEach(function(W) {
        var he = Re[W];
        Me[he] = W;
      });
      var tt = [];
      Object.keys(Le).forEach(function(W) {
        var he = Le[W];
        tt[he] = W;
      });
      var Ce = [];
      Object.keys(De).forEach(function(W) {
        var he = De[W];
        Ce[he] = W;
      });
      var je = ve.reduce(function(W, he) {
        var fe = Ie[he];
        return fe === _u || fe === mv || fe === _u || fe === Al || fe === Ev || fe === Cl || G.ext_srgb && (fe === xv || fe === wv) ? W[fe] = fe : fe === bv || he.indexOf("rgba") >= 0 ? W[fe] = Eo : W[fe] = Sl, W;
      }, {});
      function Ae() {
        this.internalformat = Eo, this.format = Eo, this.type = us, this.compressed = !1, this.premultiplyAlpha = !1, this.flipY = !1, this.unpackAlignment = 1, this.colorSpace = D1, this.width = 0, this.height = 0, this.channels = 0;
      }
      function $e(W, he) {
        W.internalformat = he.internalformat, W.format = he.format, W.type = he.type, W.compressed = he.compressed, W.premultiplyAlpha = he.premultiplyAlpha, W.flipY = he.flipY, W.unpackAlignment = he.unpackAlignment, W.colorSpace = he.colorSpace, W.width = he.width, W.height = he.height, W.channels = he.channels;
      }
      function dt(W, he) {
        if (!(typeof he != "object" || !he)) {
          if ("premultiplyAlpha" in he && (D.type(
            he.premultiplyAlpha,
            "boolean",
            "invalid premultiplyAlpha"
          ), W.premultiplyAlpha = he.premultiplyAlpha), "flipY" in he && (D.type(
            he.flipY,
            "boolean",
            "invalid texture flip"
          ), W.flipY = he.flipY), "alignment" in he && (D.oneOf(
            he.alignment,
            [1, 2, 4, 8],
            "invalid texture unpack alignment"
          ), W.unpackAlignment = he.alignment), "colorSpace" in he && (D.parameter(
            he.colorSpace,
            ze,
            "invalid colorSpace"
          ), W.colorSpace = ze[he.colorSpace]), "type" in he) {
            var fe = he.type;
            D(
              G.oes_texture_float || !(fe === "float" || fe === "float32"),
              "you must enable the OES_texture_float extension in order to use floating point textures."
            ), D(
              G.oes_texture_half_float || !(fe === "half float" || fe === "float16"),
              "you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."
            ), D(
              G.webgl_depth_texture || !(fe === "uint16" || fe === "uint32" || fe === "depth stencil"),
              "you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."
            ), D.parameter(
              fe,
              Ve,
              "invalid texture type"
            ), W.type = Ve[fe];
          }
          var nt = W.width, Ft = W.height, j = W.channels, k = !1;
          "shape" in he ? (D(
            Array.isArray(he.shape) && he.shape.length >= 2,
            "shape must be an array"
          ), nt = he.shape[0], Ft = he.shape[1], he.shape.length === 3 && (j = he.shape[2], D(j > 0 && j <= 4, "invalid number of channels"), k = !0), D(nt >= 0 && nt <= X.maxTextureSize, "invalid width"), D(Ft >= 0 && Ft <= X.maxTextureSize, "invalid height")) : ("radius" in he && (nt = Ft = he.radius, D(nt >= 0 && nt <= X.maxTextureSize, "invalid radius")), "width" in he && (nt = he.width, D(nt >= 0 && nt <= X.maxTextureSize, "invalid width")), "height" in he && (Ft = he.height, D(Ft >= 0 && Ft <= X.maxTextureSize, "invalid height")), "channels" in he && (j = he.channels, D(j > 0 && j <= 4, "invalid number of channels"), k = !0)), W.width = nt | 0, W.height = Ft | 0, W.channels = j | 0;
          var H = !1;
          if ("format" in he) {
            var ae = he.format;
            D(
              G.webgl_depth_texture || !(ae === "depth" || ae === "depth stencil"),
              "you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."
            ), D.parameter(
              ae,
              Ie,
              "invalid texture format"
            );
            var se = W.internalformat = Ie[ae];
            W.format = je[se], ae in Ve && ("type" in he || (W.type = Ve[ae])), ae in Ue && (W.compressed = !0), H = !0;
          }
          !k && H ? W.channels = Zn[W.format] : k && !H ? W.channels !== Il[W.format] && (W.format = W.internalformat = Il[W.channels]) : H && k && D(
            W.channels === Zn[W.format],
            "number of channels inconsistent with specified format"
          );
        }
      }
      function St(W) {
        I.pixelStorei(lN, W.flipY), I.pixelStorei(cN, W.premultiplyAlpha), I.pixelStorei(hN, W.colorSpace), I.pixelStorei(fN, W.unpackAlignment);
      }
      function Ye() {
        Ae.call(this), this.xOffset = 0, this.yOffset = 0, this.data = null, this.needsFree = !1, this.element = null, this.needsCopy = !1;
      }
      function Ge(W, he) {
        var fe = null;
        if (Nv(he) ? fe = he : he && (D.type(he, "object", "invalid pixel data type"), dt(W, he), "x" in he && (W.xOffset = he.x | 0), "y" in he && (W.yOffset = he.y | 0), Nv(he.data) && (fe = he.data)), D(
          !W.compressed || fe instanceof Uint8Array,
          "compressed texture data must be stored in a uint8array"
        ), he.copy) {
          D(!fe, "can not specify copy and data field for the same texture");
          var nt = Ee.viewportWidth, Ft = Ee.viewportHeight;
          W.width = W.width || nt - W.xOffset, W.height = W.height || Ft - W.yOffset, W.needsCopy = !0, D(
            W.xOffset >= 0 && W.xOffset < nt && W.yOffset >= 0 && W.yOffset < Ft && W.width > 0 && W.width <= nt && W.height > 0 && W.height <= Ft,
            "copy texture read out of bounds"
          );
        } else if (!fe)
          W.width = W.width || 1, W.height = W.height || 1, W.channels = W.channels || 4;
        else if (t(fe))
          W.channels = W.channels || 4, W.data = fe, !("type" in he) && W.type === us && (W.type = j1(fe));
        else if (F1(fe))
          W.channels = W.channels || 4, bN(W, fe), W.alignment = 1, W.needsFree = !0;
        else if (ca(fe)) {
          var j = fe.data;
          !Array.isArray(j) && W.type === us && (W.type = j1(j));
          var k = fe.shape, H = fe.stride, ae, se, Q, Z, ee, $;
          k.length === 3 ? (Q = k[2], $ = H[2]) : (D(k.length === 2, "invalid ndarray pixel data, must be 2 or 3D"), Q = 1, $ = 1), ae = k[0], se = k[1], Z = H[0], ee = H[1], W.alignment = 1, W.width = ae, W.height = se, W.channels = Q, W.format = W.internalformat = Il[Q], W.needsFree = !0, EN(W, j, Z, ee, $, fe.offset);
        } else if (z1(fe) || U1(fe) || pN(fe))
          z1(fe) || U1(fe) ? W.element = fe : W.element = fe.canvas, W.width = W.element.width, W.height = W.element.height, W.channels = 4;
        else if (gN(fe))
          W.element = fe, W.width = fe.width, W.height = fe.height, W.channels = 4;
        else if (yN(fe))
          W.element = fe, W.width = fe.naturalWidth, W.height = fe.naturalHeight, W.channels = 4;
        else if (mN(fe))
          W.element = fe, W.width = fe.videoWidth, W.height = fe.videoHeight, W.channels = 4;
        else if (G1(fe)) {
          var Y = W.width || fe[0].length, U = W.height || fe.length, ne = W.channels;
          Cr(fe[0][0]) ? ne = ne || fe[0][0].length : ne = ne || 1;
          for (var ue = xl.shape(fe), me = 1, xe = 0; xe < ue.length; ++xe)
            me *= ue[xe];
          var pe = $1(W, me);
          xl.flatten(fe, ue, "", pe), W1(W, pe), W.alignment = 1, W.width = Y, W.height = U, W.channels = ne, W.format = W.internalformat = Il[ne], W.needsFree = !0;
        }
        W.type === Mu ? D(
          X.extensions.indexOf("oes_texture_float") >= 0,
          "oes_texture_float extension not enabled"
        ) : W.type === ss && D(
          X.extensions.indexOf("oes_texture_half_float") >= 0,
          "oes_texture_half_float extension not enabled"
        );
      }
      function we(W, he, fe) {
        var nt = W.element, Ft = W.data, j = W.internalformat, k = W.format, H = W.type, ae = W.width, se = W.height;
        St(W), nt ? I.texImage2D(he, fe, k, k, H, nt) : W.compressed ? I.compressedTexImage2D(he, fe, j, ae, se, 0, Ft) : W.needsCopy ? (ce(), I.copyTexImage2D(
          he,
          fe,
          k,
          W.xOffset,
          W.yOffset,
          ae,
          se,
          0
        )) : I.texImage2D(he, fe, k, ae, se, 0, k, H, Ft || null);
      }
      function wt(W, he, fe, nt, Ft) {
        var j = W.element, k = W.data, H = W.internalformat, ae = W.format, se = W.type, Q = W.width, Z = W.height;
        St(W), j ? I.texSubImage2D(
          he,
          Ft,
          fe,
          nt,
          ae,
          se,
          j
        ) : W.compressed ? I.compressedTexSubImage2D(
          he,
          Ft,
          fe,
          nt,
          H,
          Q,
          Z,
          k
        ) : W.needsCopy ? (ce(), I.copyTexSubImage2D(
          he,
          Ft,
          fe,
          nt,
          W.xOffset,
          W.yOffset,
          Q,
          Z
        )) : I.texSubImage2D(
          he,
          Ft,
          fe,
          nt,
          Q,
          Z,
          ae,
          se,
          k
        );
      }
      var Dt = [];
      function it() {
        return Dt.pop() || new Ye();
      }
      function Bt(W) {
        W.needsFree && vt.freeType(W.data), Ye.call(W), Dt.push(W);
      }
      function Ct() {
        Ae.call(this), this.genMipmaps = !1, this.mipmapHint = Tl, this.mipmask = 0, this.images = Array(16);
      }
      function kt(W, he, fe) {
        var nt = W.images[0] = it();
        W.mipmask = 1, nt.width = W.width = he, nt.height = W.height = fe, nt.channels = W.channels = 4;
      }
      function Jt(W, he) {
        var fe = null;
        if (Nv(he))
          fe = W.images[0] = it(), $e(fe, W), Ge(fe, he), W.mipmask = 1;
        else if (dt(W, he), Array.isArray(he.mipmap))
          for (var nt = he.mipmap, Ft = 0; Ft < nt.length; ++Ft)
            fe = W.images[Ft] = it(), $e(fe, W), fe.width >>= Ft, fe.height >>= Ft, Ge(fe, nt[Ft]), W.mipmask |= 1 << Ft;
        else
          fe = W.images[0] = it(), $e(fe, W), Ge(fe, he), W.mipmask = 1;
        $e(W, W.images[0]), W.compressed && (W.internalformat === _v || W.internalformat === Mv || W.internalformat === Sv || W.internalformat === Av) && D(
          W.width % 4 === 0 && W.height % 4 === 0,
          "for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4"
        );
      }
      function Pr(W, he) {
        for (var fe = W.images, nt = 0; nt < fe.length; ++nt) {
          if (!fe[nt])
            return;
          we(fe[nt], he, nt);
        }
      }
      var Vr = [];
      function zt() {
        var W = Vr.pop() || new Ct();
        Ae.call(W), W.mipmask = 0;
        for (var he = 0; he < 16; ++he)
          W.images[he] = null;
        return W;
      }
      function zr(W) {
        for (var he = W.images, fe = 0; fe < he.length; ++fe)
          he[fe] && Bt(he[fe]), he[fe] = null;
        Vr.push(W);
      }
      function gr() {
        this.minFilter = Ov, this.magFilter = Ov, this.wrapS = Iv, this.wrapT = Iv, this.anisotropic = 1, this.genMipmaps = !1, this.mipmapHint = Tl;
      }
      function kr(W, he) {
        if ("min" in he) {
          var fe = he.min;
          D.parameter(fe, Le), W.minFilter = Le[fe], dN.indexOf(W.minFilter) >= 0 && !("faces" in he) && (W.genMipmaps = !0);
        }
        if ("mag" in he) {
          var nt = he.mag;
          D.parameter(nt, Re), W.magFilter = Re[nt];
        }
        var Ft = W.wrapS, j = W.wrapT;
        if ("wrap" in he) {
          var k = he.wrap;
          typeof k == "string" ? (D.parameter(k, De), Ft = j = De[k]) : Array.isArray(k) && (D.parameter(k[0], De), D.parameter(k[1], De), Ft = De[k[0]], j = De[k[1]]);
        } else {
          if ("wrapS" in he) {
            var H = he.wrapS;
            D.parameter(H, De), Ft = De[H];
          }
          if ("wrapT" in he) {
            var ae = he.wrapT;
            D.parameter(ae, De), j = De[ae];
          }
        }
        if (W.wrapS = Ft, W.wrapT = j, "anisotropic" in he) {
          var se = he.anisotropic;
          D(
            typeof se == "number" && se >= 1 && se <= X.maxAnisotropic,
            "aniso samples must be between 1 and "
          ), W.anisotropic = he.anisotropic;
        }
        if ("mipmap" in he) {
          var Q = !1;
          switch (typeof he.mipmap) {
            case "string":
              D.parameter(
                he.mipmap,
                Te,
                "invalid mipmap hint"
              ), W.mipmapHint = Te[he.mipmap], W.genMipmaps = !0, Q = !0;
              break;
            case "boolean":
              Q = W.genMipmaps = he.mipmap;
              break;
            case "object":
              D(Array.isArray(he.mipmap), "invalid mipmap type"), W.genMipmaps = !1, Q = !0;
              break;
            default:
              D.raise("invalid mipmap type");
          }
          Q && !("min" in he) && (W.minFilter = Dv);
        }
      }
      function Ur(W, he) {
        I.texParameteri(he, nN, W.minFilter), I.texParameteri(he, rN, W.magFilter), I.texParameteri(he, QL, W.wrapS), I.texParameteri(he, JL, W.wrapT), G.ext_texture_filter_anisotropic && I.texParameteri(he, uN, W.anisotropic), W.genMipmaps && (I.hint(iN, W.mipmapHint), I.generateMipmap(he));
      }
      var jr = 0, Zr = {}, sn = X.maxTextureUnits, Tr = Array(sn).map(function() {
        return null;
      });
      function Lt(W) {
        Ae.call(this), this.mipmask = 0, this.internalformat = Eo, this.id = jr++, this.refCount = 1, this.target = W, this.texture = I.createTexture(), this.unit = -1, this.bindCount = 0, this.texInfo = new gr(), de.profile && (this.stats = { size: 0 });
      }
      function un(W) {
        I.activeTexture(Su), I.bindTexture(W.target, W.texture);
      }
      function ur() {
        var W = Tr[0];
        W ? I.bindTexture(W.target, W.texture) : I.bindTexture(Da, null);
      }
      function pt(W) {
        var he = W.texture;
        D(he, "must not double destroy texture");
        var fe = W.unit, nt = W.target;
        fe >= 0 && (I.activeTexture(Su + fe), I.bindTexture(nt, null), Tr[fe] = null), I.deleteTexture(he), W.texture = null, W.params = null, W.pixels = null, W.refCount = 0, delete Zr[W.id], le.textureCount--;
      }
      n(Lt.prototype, {
        bind: function() {
          var W = this;
          W.bindCount += 1;
          var he = W.unit;
          if (he < 0) {
            for (var fe = 0; fe < sn; ++fe) {
              var nt = Tr[fe];
              if (nt) {
                if (nt.bindCount > 0)
                  continue;
                nt.unit = -1;
              }
              Tr[fe] = W, he = fe;
              break;
            }
            he >= sn && D.raise("insufficient number of texture units"), de.profile && le.maxTextureUnits < he + 1 && (le.maxTextureUnits = he + 1), W.unit = he, I.activeTexture(Su + he), I.bindTexture(W.target, W.texture);
          }
          return he;
        },
        unbind: function() {
          this.bindCount -= 1;
        },
        decRef: function() {
          --this.refCount <= 0 && pt(this);
        }
      });
      function Gt(W, he) {
        var fe = new Lt(Da);
        Zr[fe.id] = fe, le.textureCount++;
        function nt(k, H) {
          var ae = fe.texInfo;
          gr.call(ae);
          var se = zt();
          return typeof k == "number" ? typeof H == "number" ? kt(se, k | 0, H | 0) : kt(se, k | 0, k | 0) : k ? (D.type(k, "object", "invalid arguments to regl.texture"), kr(ae, k), Jt(se, k)) : kt(se, 1, 1), ae.genMipmaps && (se.mipmask = (se.width << 1) - 1), fe.mipmask = se.mipmask, $e(fe, se), D.texture2D(ae, se, X), fe.internalformat = se.internalformat, nt.width = se.width, nt.height = se.height, un(fe), Pr(se, Da), Ur(ae, Da), ur(), zr(se), de.profile && (fe.stats.size = Ol(
            fe.internalformat,
            fe.type,
            se.width,
            se.height,
            ae.genMipmaps,
            !1
          )), nt.format = ke[fe.internalformat], nt.type = qe[fe.type], nt.mag = Me[ae.magFilter], nt.min = tt[ae.minFilter], nt.wrapS = Ce[ae.wrapS], nt.wrapT = Ce[ae.wrapT], nt;
        }
        function Ft(k, H, ae, se) {
          D(!!k, "must specify image data");
          var Q = H | 0, Z = ae | 0, ee = se | 0, $ = it();
          return $e($, fe), $.width = 0, $.height = 0, Ge($, k), $.width = $.width || (fe.width >> ee) - Q, $.height = $.height || (fe.height >> ee) - Z, D(
            fe.type === $.type && fe.format === $.format && fe.internalformat === $.internalformat,
            "incompatible format for texture.subimage"
          ), D(
            Q >= 0 && Z >= 0 && Q + $.width <= fe.width && Z + $.height <= fe.height,
            "texture.subimage write out of bounds"
          ), D(
            fe.mipmask & 1 << ee,
            "missing mipmap data"
          ), D(
            $.data || $.element || $.needsCopy,
            "missing image data"
          ), un(fe), wt($, Da, Q, Z, ee), ur(), Bt($), nt;
        }
        function j(k, H) {
          var ae = k | 0, se = H | 0 || ae;
          if (ae === fe.width && se === fe.height)
            return nt;
          nt.width = fe.width = ae, nt.height = fe.height = se, un(fe);
          for (var Q = 0; fe.mipmask >> Q; ++Q) {
            var Z = ae >> Q, ee = se >> Q;
            if (!Z || !ee)
              break;
            I.texImage2D(
              Da,
              Q,
              fe.format,
              Z,
              ee,
              0,
              fe.format,
              fe.type,
              null
            );
          }
          return ur(), de.profile && (fe.stats.size = Ol(
            fe.internalformat,
            fe.type,
            ae,
            se,
            !1,
            !1
          )), nt;
        }
        return nt(W, he), nt.subimage = Ft, nt.resize = j, nt._reglType = "texture2d", nt._texture = fe, de.profile && (nt.stats = fe.stats), nt.destroy = function() {
          fe.decRef();
        }, nt;
      }
      function Vt(W, he, fe, nt, Ft, j) {
        var k = new Lt(yv);
        Zr[k.id] = k, le.cubeCount++;
        var H = new Array(6);
        function ae(Z, ee, $, Y, U, ne) {
          var ue, me = k.texInfo;
          for (gr.call(me), ue = 0; ue < 6; ++ue)
            H[ue] = zt();
          if (typeof Z == "number" || !Z) {
            var xe = Z | 0 || 1;
            for (ue = 0; ue < 6; ++ue)
              kt(H[ue], xe, xe);
          } else if (typeof Z == "object")
            if (ee)
              Jt(H[0], Z), Jt(H[1], ee), Jt(H[2], $), Jt(H[3], Y), Jt(H[4], U), Jt(H[5], ne);
            else if (kr(me, Z), dt(k, Z), "faces" in Z) {
              var pe = Z.faces;
              for (D(
                Array.isArray(pe) && pe.length === 6,
                "cube faces must be a length 6 array"
              ), ue = 0; ue < 6; ++ue)
                D(
                  typeof pe[ue] == "object" && !!pe[ue],
                  "invalid input for cube map face"
                ), $e(H[ue], k), Jt(H[ue], pe[ue]);
            } else
              for (ue = 0; ue < 6; ++ue)
                Jt(H[ue], Z);
          else
            D.raise("invalid arguments to cube map");
          for ($e(k, H[0]), X.npotTextureCube || D(m1(k.width) && m1(k.height), "your browser does not support non power or two texture dimensions"), me.genMipmaps ? k.mipmask = (H[0].width << 1) - 1 : k.mipmask = H[0].mipmask, D.textureCube(k, me, H, X), k.internalformat = H[0].internalformat, ae.width = H[0].width, ae.height = H[0].height, un(k), ue = 0; ue < 6; ++ue)
            Pr(H[ue], Ml + ue);
          for (Ur(me, yv), ur(), de.profile && (k.stats.size = Ol(
            k.internalformat,
            k.type,
            ae.width,
            ae.height,
            me.genMipmaps,
            !0
          )), ae.format = ke[k.internalformat], ae.type = qe[k.type], ae.mag = Me[me.magFilter], ae.min = tt[me.minFilter], ae.wrapS = Ce[me.wrapS], ae.wrapT = Ce[me.wrapT], ue = 0; ue < 6; ++ue)
            zr(H[ue]);
          return ae;
        }
        function se(Z, ee, $, Y, U) {
          D(!!ee, "must specify image data"), D(typeof Z == "number" && Z === (Z | 0) && Z >= 0 && Z < 6, "invalid face");
          var ne = $ | 0, ue = Y | 0, me = U | 0, xe = it();
          return $e(xe, k), xe.width = 0, xe.height = 0, Ge(xe, ee), xe.width = xe.width || (k.width >> me) - ne, xe.height = xe.height || (k.height >> me) - ue, D(
            k.type === xe.type && k.format === xe.format && k.internalformat === xe.internalformat,
            "incompatible format for texture.subimage"
          ), D(
            ne >= 0 && ue >= 0 && ne + xe.width <= k.width && ue + xe.height <= k.height,
            "texture.subimage write out of bounds"
          ), D(
            k.mipmask & 1 << me,
            "missing mipmap data"
          ), D(
            xe.data || xe.element || xe.needsCopy,
            "missing image data"
          ), un(k), wt(xe, Ml + Z, ne, ue, me), ur(), Bt(xe), ae;
        }
        function Q(Z) {
          var ee = Z | 0;
          if (ee !== k.width) {
            ae.width = k.width = ee, ae.height = k.height = ee, un(k);
            for (var $ = 0; $ < 6; ++$)
              for (var Y = 0; k.mipmask >> Y; ++Y)
                I.texImage2D(
                  Ml + $,
                  Y,
                  k.format,
                  ee >> Y,
                  ee >> Y,
                  0,
                  k.format,
                  k.type,
                  null
                );
            return ur(), de.profile && (k.stats.size = Ol(
              k.internalformat,
              k.type,
              ae.width,
              ae.height,
              !1,
              !0
            )), ae;
          }
        }
        return ae(W, he, fe, nt, Ft, j), ae.subimage = se, ae.resize = Q, ae._reglType = "textureCube", ae._texture = k, de.profile && (ae.stats = k.stats), ae.destroy = function() {
          k.decRef();
        }, ae;
      }
      function Ir() {
        for (var W = 0; W < sn; ++W)
          I.activeTexture(Su + W), I.bindTexture(Da, null), Tr[W] = null;
        Bn(Zr).forEach(pt), le.cubeCount = 0, le.textureCount = 0;
      }
      de.profile && (le.getTotalTextureSize = function() {
        var W = 0;
        return Object.keys(Zr).forEach(function(he) {
          W += Zr[he].stats.size;
        }), W;
      });
      function Na() {
        for (var W = 0; W < sn; ++W) {
          var he = Tr[W];
          he && (he.bindCount = 0, he.unit = -1, Tr[W] = null);
        }
        Bn(Zr).forEach(function(fe) {
          fe.texture = I.createTexture(), I.bindTexture(fe.target, fe.texture);
          for (var nt = 0; nt < 32; ++nt)
            if (fe.mipmask & 1 << nt)
              if (fe.target === Da)
                I.texImage2D(
                  Da,
                  nt,
                  fe.internalformat,
                  fe.width >> nt,
                  fe.height >> nt,
                  0,
                  fe.internalformat,
                  fe.type,
                  null
                );
              else
                for (var Ft = 0; Ft < 6; ++Ft)
                  I.texImage2D(
                    Ml + Ft,
                    nt,
                    fe.internalformat,
                    fe.width >> nt,
                    fe.height >> nt,
                    0,
                    fe.internalformat,
                    fe.type,
                    null
                  );
          Ur(fe.texInfo, fe.target);
        });
      }
      function To() {
        for (var W = 0; W < sn; ++W) {
          var he = Tr[W];
          he && (he.bindCount = 0, he.unit = -1, Tr[W] = null), I.activeTexture(Su + W), I.bindTexture(Da, null), I.bindTexture(yv, null);
        }
      }
      return {
        create2D: Gt,
        createCube: Vt,
        clear: Ir,
        getTexture: function(W) {
          return null;
        },
        restore: Na,
        refresh: To
      };
    }
    var Ni = 36161, Dl = 32854, X1 = 32855, V1 = 36194, Y1 = 33189, H1 = 36168, K1 = 34041, q1 = 35907, Z1 = 34836, Q1 = 34842, J1 = 34843, ha = [];
    ha[Dl] = 2, ha[X1] = 2, ha[V1] = 2, ha[Y1] = 2, ha[H1] = 1, ha[K1] = 4, ha[q1] = 4, ha[Z1] = 16, ha[Q1] = 8, ha[J1] = 6;
    function eb(I, G, X) {
      return ha[I] * G * X;
    }
    var wN = function(I, G, X, ce, Ee) {
      var le = {
        rgba4: Dl,
        rgb565: V1,
        "rgb5 a1": X1,
        depth: Y1,
        stencil: H1,
        "depth stencil": K1
      };
      G.ext_srgb && (le.srgba = q1), G.ext_color_buffer_half_float && (le.rgba16f = Q1, le.rgb16f = J1), G.webgl_color_buffer_float && (le.rgba32f = Z1);
      var de = [];
      Object.keys(le).forEach(function(Ie) {
        var Ue = le[Ie];
        de[Ue] = Ie;
      });
      var Te = 0, De = {};
      function Re(Ie) {
        this.id = Te++, this.refCount = 1, this.renderbuffer = Ie, this.format = Dl, this.width = 0, this.height = 0, Ee.profile && (this.stats = { size: 0 });
      }
      Re.prototype.decRef = function() {
        --this.refCount <= 0 && Le(this);
      };
      function Le(Ie) {
        var Ue = Ie.renderbuffer;
        D(Ue, "must not double destroy renderbuffer"), I.bindRenderbuffer(Ni, null), I.deleteRenderbuffer(Ue), Ie.renderbuffer = null, Ie.refCount = 0, delete De[Ie.id], ce.renderbufferCount--;
      }
      function ze(Ie, Ue) {
        var oe = new Re(I.createRenderbuffer());
        De[oe.id] = oe, ce.renderbufferCount++;
        function ve(qe, Me) {
          var tt = 0, Ce = 0, je = Dl;
          if (typeof qe == "object" && qe) {
            var Ae = qe;
            if ("shape" in Ae) {
              var $e = Ae.shape;
              D(
                Array.isArray($e) && $e.length >= 2,
                "invalid renderbuffer shape"
              ), tt = $e[0] | 0, Ce = $e[1] | 0;
            } else
              "radius" in Ae && (tt = Ce = Ae.radius | 0), "width" in Ae && (tt = Ae.width | 0), "height" in Ae && (Ce = Ae.height | 0);
            "format" in Ae && (D.parameter(
              Ae.format,
              le,
              "invalid renderbuffer format"
            ), je = le[Ae.format]);
          } else
            typeof qe == "number" ? (tt = qe | 0, typeof Me == "number" ? Ce = Me | 0 : Ce = tt) : qe ? D.raise("invalid arguments to renderbuffer constructor") : tt = Ce = 1;
          if (D(
            tt > 0 && Ce > 0 && tt <= X.maxRenderbufferSize && Ce <= X.maxRenderbufferSize,
            "invalid renderbuffer size"
          ), !(tt === oe.width && Ce === oe.height && je === oe.format))
            return ve.width = oe.width = tt, ve.height = oe.height = Ce, oe.format = je, I.bindRenderbuffer(Ni, oe.renderbuffer), I.renderbufferStorage(Ni, je, tt, Ce), D(
              I.getError() === 0,
              "invalid render buffer format"
            ), Ee.profile && (oe.stats.size = eb(oe.format, oe.width, oe.height)), ve.format = de[oe.format], ve;
        }
        function ke(qe, Me) {
          var tt = qe | 0, Ce = Me | 0 || tt;
          return tt === oe.width && Ce === oe.height || (D(
            tt > 0 && Ce > 0 && tt <= X.maxRenderbufferSize && Ce <= X.maxRenderbufferSize,
            "invalid renderbuffer size"
          ), ve.width = oe.width = tt, ve.height = oe.height = Ce, I.bindRenderbuffer(Ni, oe.renderbuffer), I.renderbufferStorage(Ni, oe.format, tt, Ce), D(
            I.getError() === 0,
            "invalid render buffer format"
          ), Ee.profile && (oe.stats.size = eb(
            oe.format,
            oe.width,
            oe.height
          ))), ve;
        }
        return ve(Ie, Ue), ve.resize = ke, ve._reglType = "renderbuffer", ve._renderbuffer = oe, Ee.profile && (ve.stats = oe.stats), ve.destroy = function() {
          oe.decRef();
        }, ve;
      }
      Ee.profile && (ce.getTotalRenderbufferSize = function() {
        var Ie = 0;
        return Object.keys(De).forEach(function(Ue) {
          Ie += De[Ue].stats.size;
        }), Ie;
      });
      function Ve() {
        Bn(De).forEach(function(Ie) {
          Ie.renderbuffer = I.createRenderbuffer(), I.bindRenderbuffer(Ni, Ie.renderbuffer), I.renderbufferStorage(Ni, Ie.format, Ie.width, Ie.height);
        }), I.bindRenderbuffer(Ni, null);
      }
      return {
        create: ze,
        clear: function() {
          Bn(De).forEach(Le);
        },
        restore: Ve
      };
    }, li = 36160, Pv = 36161, wo = 3553, Ll = 34069, tb = 36064, rb = 36096, nb = 36128, ab = 33306, ib = 36053, _N = 36054, MN = 36055, SN = 36057, AN = 36061, CN = 36193, TN = 5121, IN = 5126, ob = 6407, sb = 6408, ON = 6402, DN = [
      ob,
      sb
    ], kv = [];
    kv[sb] = 4, kv[ob] = 3;
    var Nl = [];
    Nl[TN] = 1, Nl[IN] = 4, Nl[CN] = 2;
    var LN = 32854, NN = 32855, PN = 36194, kN = 33189, RN = 36168, ub = 34041, BN = 35907, FN = 34836, GN = 34842, zN = 34843, UN = [
      LN,
      NN,
      PN,
      BN,
      GN,
      zN,
      FN
    ], cs = {};
    cs[ib] = "complete", cs[_N] = "incomplete attachment", cs[SN] = "incomplete dimensions", cs[MN] = "incomplete, missing attachment", cs[AN] = "unsupported";
    function jN(I, G, X, ce, Ee, le) {
      var de = {
        cur: null,
        next: null,
        dirty: !1,
        setFBO: null
      }, Te = ["rgba"], De = ["rgba4", "rgb565", "rgb5 a1"];
      G.ext_srgb && De.push("srgba"), G.ext_color_buffer_half_float && De.push("rgba16f", "rgb16f"), G.webgl_color_buffer_float && De.push("rgba32f");
      var Re = ["uint8"];
      G.oes_texture_half_float && Re.push("half float", "float16"), G.oes_texture_float && Re.push("float", "float32");
      function Le(Ye, Ge, we) {
        this.target = Ye, this.texture = Ge, this.renderbuffer = we;
        var wt = 0, Dt = 0;
        Ge ? (wt = Ge.width, Dt = Ge.height) : we && (wt = we.width, Dt = we.height), this.width = wt, this.height = Dt;
      }
      function ze(Ye) {
        Ye && (Ye.texture && Ye.texture._texture.decRef(), Ye.renderbuffer && Ye.renderbuffer._renderbuffer.decRef());
      }
      function Ve(Ye, Ge, we) {
        if (Ye)
          if (Ye.texture) {
            var wt = Ye.texture._texture, Dt = Math.max(1, wt.width), it = Math.max(1, wt.height);
            D(
              Dt === Ge && it === we,
              "inconsistent width/height for supplied texture"
            ), wt.refCount += 1;
          } else {
            var Bt = Ye.renderbuffer._renderbuffer;
            D(
              Bt.width === Ge && Bt.height === we,
              "inconsistent width/height for renderbuffer"
            ), Bt.refCount += 1;
          }
      }
      function Ie(Ye, Ge) {
        Ge && (Ge.texture ? I.framebufferTexture2D(
          li,
          Ye,
          Ge.target,
          Ge.texture._texture.texture,
          0
        ) : I.framebufferRenderbuffer(
          li,
          Ye,
          Pv,
          Ge.renderbuffer._renderbuffer.renderbuffer
        ));
      }
      function Ue(Ye) {
        var Ge = wo, we = null, wt = null, Dt = Ye;
        typeof Ye == "object" && (Dt = Ye.data, "target" in Ye && (Ge = Ye.target | 0)), D.type(Dt, "function", "invalid attachment data");
        var it = Dt._reglType;
        return it === "texture2d" ? (we = Dt, D(Ge === wo)) : it === "textureCube" ? (we = Dt, D(
          Ge >= Ll && Ge < Ll + 6,
          "invalid cube map target"
        )) : it === "renderbuffer" ? (wt = Dt, Ge = Pv) : D.raise("invalid regl object for attachment"), new Le(Ge, we, wt);
      }
      function oe(Ye, Ge, we, wt, Dt) {
        if (we) {
          var it = ce.create2D({
            width: Ye,
            height: Ge,
            format: wt,
            type: Dt
          });
          return it._texture.refCount = 0, new Le(wo, it, null);
        } else {
          var Bt = Ee.create({
            width: Ye,
            height: Ge,
            format: wt
          });
          return Bt._renderbuffer.refCount = 0, new Le(Pv, null, Bt);
        }
      }
      function ve(Ye) {
        return Ye && (Ye.texture || Ye.renderbuffer);
      }
      function ke(Ye, Ge, we) {
        Ye && (Ye.texture ? Ye.texture.resize(Ge, we) : Ye.renderbuffer && Ye.renderbuffer.resize(Ge, we), Ye.width = Ge, Ye.height = we);
      }
      var qe = 0, Me = {};
      function tt() {
        this.id = qe++, Me[this.id] = this, this.framebuffer = I.createFramebuffer(), this.width = 0, this.height = 0, this.colorAttachments = [], this.depthAttachment = null, this.stencilAttachment = null, this.depthStencilAttachment = null;
      }
      function Ce(Ye) {
        Ye.colorAttachments.forEach(ze), ze(Ye.depthAttachment), ze(Ye.stencilAttachment), ze(Ye.depthStencilAttachment);
      }
      function je(Ye) {
        var Ge = Ye.framebuffer;
        D(Ge, "must not double destroy framebuffer"), I.deleteFramebuffer(Ge), Ye.framebuffer = null, le.framebufferCount--, delete Me[Ye.id];
      }
      function Ae(Ye) {
        var Ge;
        I.bindFramebuffer(li, Ye.framebuffer);
        var we = Ye.colorAttachments;
        for (Ge = 0; Ge < we.length; ++Ge)
          Ie(tb + Ge, we[Ge]);
        for (Ge = we.length; Ge < X.maxColorAttachments; ++Ge)
          I.framebufferTexture2D(
            li,
            tb + Ge,
            wo,
            null,
            0
          );
        I.framebufferTexture2D(
          li,
          ab,
          wo,
          null,
          0
        ), I.framebufferTexture2D(
          li,
          rb,
          wo,
          null,
          0
        ), I.framebufferTexture2D(
          li,
          nb,
          wo,
          null,
          0
        ), Ie(rb, Ye.depthAttachment), Ie(nb, Ye.stencilAttachment), Ie(ab, Ye.depthStencilAttachment);
        var wt = I.checkFramebufferStatus(li);
        !I.isContextLost() && wt !== ib && D.raise("framebuffer configuration not supported, status = " + cs[wt]), I.bindFramebuffer(li, de.next ? de.next.framebuffer : null), de.cur = de.next, I.getError();
      }
      function $e(Ye, Ge) {
        var we = new tt();
        le.framebufferCount++;
        function wt(it, Bt) {
          var Ct;
          D(
            de.next !== we,
            "can not update framebuffer which is currently in use"
          );
          var kt = 0, Jt = 0, Pr = !0, Vr = !0, zt = null, zr = !0, gr = "rgba", kr = "uint8", Ur = 1, jr = null, Zr = null, sn = null, Tr = !1;
          if (typeof it == "number")
            kt = it | 0, Jt = Bt | 0 || kt;
          else if (!it)
            kt = Jt = 1;
          else {
            D.type(it, "object", "invalid arguments for framebuffer");
            var Lt = it;
            if ("shape" in Lt) {
              var un = Lt.shape;
              D(
                Array.isArray(un) && un.length >= 2,
                "invalid shape for framebuffer"
              ), kt = un[0], Jt = un[1];
            } else
              "radius" in Lt && (kt = Jt = Lt.radius), "width" in Lt && (kt = Lt.width), "height" in Lt && (Jt = Lt.height);
            ("color" in Lt || "colors" in Lt) && (zt = Lt.color || Lt.colors, Array.isArray(zt) && D(
              zt.length === 1 || G.webgl_draw_buffers,
              "multiple render targets not supported"
            )), zt || ("colorCount" in Lt && (Ur = Lt.colorCount | 0, D(Ur > 0, "invalid color buffer count")), "colorTexture" in Lt && (zr = !!Lt.colorTexture, gr = "rgba4"), "colorType" in Lt && (kr = Lt.colorType, zr ? (D(
              G.oes_texture_float || !(kr === "float" || kr === "float32"),
              "you must enable OES_texture_float in order to use floating point framebuffer objects"
            ), D(
              G.oes_texture_half_float || !(kr === "half float" || kr === "float16"),
              "you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects"
            )) : kr === "half float" || kr === "float16" ? (D(
              G.ext_color_buffer_half_float,
              "you must enable EXT_color_buffer_half_float to use 16-bit render buffers"
            ), gr = "rgba16f") : (kr === "float" || kr === "float32") && (D(
              G.webgl_color_buffer_float,
              "you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"
            ), gr = "rgba32f"), D.oneOf(kr, Re, "invalid color type")), "colorFormat" in Lt && (gr = Lt.colorFormat, Te.indexOf(gr) >= 0 ? zr = !0 : De.indexOf(gr) >= 0 ? zr = !1 : zr ? D.oneOf(
              Lt.colorFormat,
              Te,
              "invalid color format for texture"
            ) : D.oneOf(
              Lt.colorFormat,
              De,
              "invalid color format for renderbuffer"
            ))), ("depthTexture" in Lt || "depthStencilTexture" in Lt) && (Tr = !!(Lt.depthTexture || Lt.depthStencilTexture), D(
              !Tr || G.webgl_depth_texture,
              "webgl_depth_texture extension not supported"
            )), "depth" in Lt && (typeof Lt.depth == "boolean" ? Pr = Lt.depth : (jr = Lt.depth, Vr = !1)), "stencil" in Lt && (typeof Lt.stencil == "boolean" ? Vr = Lt.stencil : (Zr = Lt.stencil, Pr = !1)), "depthStencil" in Lt && (typeof Lt.depthStencil == "boolean" ? Pr = Vr = Lt.depthStencil : (sn = Lt.depthStencil, Pr = !1, Vr = !1));
          }
          var ur = null, pt = null, Gt = null, Vt = null;
          if (Array.isArray(zt))
            ur = zt.map(Ue);
          else if (zt)
            ur = [Ue(zt)];
          else
            for (ur = new Array(Ur), Ct = 0; Ct < Ur; ++Ct)
              ur[Ct] = oe(
                kt,
                Jt,
                zr,
                gr,
                kr
              );
          D(
            G.webgl_draw_buffers || ur.length <= 1,
            "you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."
          ), D(
            ur.length <= X.maxColorAttachments,
            "too many color attachments, not supported"
          ), kt = kt || ur[0].width, Jt = Jt || ur[0].height, jr ? pt = Ue(jr) : Pr && !Vr && (pt = oe(
            kt,
            Jt,
            Tr,
            "depth",
            "uint32"
          )), Zr ? Gt = Ue(Zr) : Vr && !Pr && (Gt = oe(
            kt,
            Jt,
            !1,
            "stencil",
            "uint8"
          )), sn ? Vt = Ue(sn) : !jr && !Zr && Vr && Pr && (Vt = oe(
            kt,
            Jt,
            Tr,
            "depth stencil",
            "depth stencil"
          )), D(
            !!jr + !!Zr + !!sn <= 1,
            "invalid framebuffer configuration, can specify exactly one depth/stencil attachment"
          );
          var Ir = null;
          for (Ct = 0; Ct < ur.length; ++Ct)
            if (Ve(ur[Ct], kt, Jt), D(
              !ur[Ct] || ur[Ct].texture && DN.indexOf(ur[Ct].texture._texture.format) >= 0 || ur[Ct].renderbuffer && UN.indexOf(ur[Ct].renderbuffer._renderbuffer.format) >= 0,
              "framebuffer color attachment " + Ct + " is invalid"
            ), ur[Ct] && ur[Ct].texture) {
              var Na = kv[ur[Ct].texture._texture.format] * Nl[ur[Ct].texture._texture.type];
              Ir === null ? Ir = Na : D(
                Ir === Na,
                "all color attachments much have the same number of bits per pixel."
              );
            }
          return Ve(pt, kt, Jt), D(
            !pt || pt.texture && pt.texture._texture.format === ON || pt.renderbuffer && pt.renderbuffer._renderbuffer.format === kN,
            "invalid depth attachment for framebuffer object"
          ), Ve(Gt, kt, Jt), D(
            !Gt || Gt.renderbuffer && Gt.renderbuffer._renderbuffer.format === RN,
            "invalid stencil attachment for framebuffer object"
          ), Ve(Vt, kt, Jt), D(
            !Vt || Vt.texture && Vt.texture._texture.format === ub || Vt.renderbuffer && Vt.renderbuffer._renderbuffer.format === ub,
            "invalid depth-stencil attachment for framebuffer object"
          ), Ce(we), we.width = kt, we.height = Jt, we.colorAttachments = ur, we.depthAttachment = pt, we.stencilAttachment = Gt, we.depthStencilAttachment = Vt, wt.color = ur.map(ve), wt.depth = ve(pt), wt.stencil = ve(Gt), wt.depthStencil = ve(Vt), wt.width = we.width, wt.height = we.height, Ae(we), wt;
        }
        function Dt(it, Bt) {
          D(
            de.next !== we,
            "can not resize a framebuffer which is currently in use"
          );
          var Ct = Math.max(it | 0, 1), kt = Math.max(Bt | 0 || Ct, 1);
          if (Ct === we.width && kt === we.height)
            return wt;
          for (var Jt = we.colorAttachments, Pr = 0; Pr < Jt.length; ++Pr)
            ke(Jt[Pr], Ct, kt);
          return ke(we.depthAttachment, Ct, kt), ke(we.stencilAttachment, Ct, kt), ke(we.depthStencilAttachment, Ct, kt), we.width = wt.width = Ct, we.height = wt.height = kt, Ae(we), wt;
        }
        return wt(Ye, Ge), n(wt, {
          resize: Dt,
          _reglType: "framebuffer",
          _framebuffer: we,
          destroy: function() {
            je(we), Ce(we);
          },
          use: function(it) {
            de.setFBO({
              framebuffer: wt
            }, it);
          }
        });
      }
      function dt(Ye) {
        var Ge = Array(6);
        function we(Dt) {
          var it;
          D(
            Ge.indexOf(de.next) < 0,
            "can not update framebuffer which is currently in use"
          );
          var Bt = {
            color: null
          }, Ct = 0, kt = null, Jt = "rgba", Pr = "uint8", Vr = 1;
          if (typeof Dt == "number")
            Ct = Dt | 0;
          else if (!Dt)
            Ct = 1;
          else {
            D.type(Dt, "object", "invalid arguments for framebuffer");
            var zt = Dt;
            if ("shape" in zt) {
              var zr = zt.shape;
              D(
                Array.isArray(zr) && zr.length >= 2,
                "invalid shape for framebuffer"
              ), D(
                zr[0] === zr[1],
                "cube framebuffer must be square"
              ), Ct = zr[0];
            } else
              "radius" in zt && (Ct = zt.radius | 0), "width" in zt ? (Ct = zt.width | 0, "height" in zt && D(zt.height === Ct, "must be square")) : "height" in zt && (Ct = zt.height | 0);
            ("color" in zt || "colors" in zt) && (kt = zt.color || zt.colors, Array.isArray(kt) && D(
              kt.length === 1 || G.webgl_draw_buffers,
              "multiple render targets not supported"
            )), kt || ("colorCount" in zt && (Vr = zt.colorCount | 0, D(Vr > 0, "invalid color buffer count")), "colorType" in zt && (D.oneOf(
              zt.colorType,
              Re,
              "invalid color type"
            ), Pr = zt.colorType), "colorFormat" in zt && (Jt = zt.colorFormat, D.oneOf(
              zt.colorFormat,
              Te,
              "invalid color format for texture"
            ))), "depth" in zt && (Bt.depth = zt.depth), "stencil" in zt && (Bt.stencil = zt.stencil), "depthStencil" in zt && (Bt.depthStencil = zt.depthStencil);
          }
          var gr;
          if (kt)
            if (Array.isArray(kt))
              for (gr = [], it = 0; it < kt.length; ++it)
                gr[it] = kt[it];
            else
              gr = [kt];
          else {
            gr = Array(Vr);
            var kr = {
              radius: Ct,
              format: Jt,
              type: Pr
            };
            for (it = 0; it < Vr; ++it)
              gr[it] = ce.createCube(kr);
          }
          for (Bt.color = Array(gr.length), it = 0; it < gr.length; ++it) {
            var Ur = gr[it];
            D(
              typeof Ur == "function" && Ur._reglType === "textureCube",
              "invalid cube map"
            ), Ct = Ct || Ur.width, D(
              Ur.width === Ct && Ur.height === Ct,
              "invalid cube map shape"
            ), Bt.color[it] = {
              target: Ll,
              data: gr[it]
            };
          }
          for (it = 0; it < 6; ++it) {
            for (var jr = 0; jr < gr.length; ++jr)
              Bt.color[jr].target = Ll + it;
            it > 0 && (Bt.depth = Ge[0].depth, Bt.stencil = Ge[0].stencil, Bt.depthStencil = Ge[0].depthStencil), Ge[it] ? Ge[it](Bt) : Ge[it] = $e(Bt);
          }
          return n(we, {
            width: Ct,
            height: Ct,
            color: gr
          });
        }
        function wt(Dt) {
          var it, Bt = Dt | 0;
          if (D(
            Bt > 0 && Bt <= X.maxCubeMapSize,
            "invalid radius for cube fbo"
          ), Bt === we.width)
            return we;
          var Ct = we.color;
          for (it = 0; it < Ct.length; ++it)
            Ct[it].resize(Bt);
          for (it = 0; it < 6; ++it)
            Ge[it].resize(Bt);
          return we.width = we.height = Bt, we;
        }
        return we(Ye), n(we, {
          faces: Ge,
          resize: wt,
          _reglType: "framebufferCube",
          destroy: function() {
            Ge.forEach(function(Dt) {
              Dt.destroy();
            });
          }
        });
      }
      function St() {
        de.cur = null, de.next = null, de.dirty = !0, Bn(Me).forEach(function(Ye) {
          Ye.framebuffer = I.createFramebuffer(), Ae(Ye);
        });
      }
      return n(de, {
        getFramebuffer: function(Ye) {
          if (typeof Ye == "function" && Ye._reglType === "framebuffer") {
            var Ge = Ye._framebuffer;
            if (Ge instanceof tt)
              return Ge;
          }
          return null;
        },
        create: $e,
        createCube: dt,
        clear: function() {
          Bn(Me).forEach(je);
        },
        restore: St
      });
    }
    var $N = 5126, fb = 34962;
    function Rv() {
      this.state = 0, this.x = 0, this.y = 0, this.z = 0, this.w = 0, this.buffer = null, this.size = 0, this.normalized = !1, this.type = $N, this.offset = 0, this.stride = 0, this.divisor = 0;
    }
    function WN(I, G, X, ce, Ee) {
      for (var le = X.maxAttributes, de = new Array(le), Te = 0; Te < le; ++Te)
        de[Te] = new Rv();
      var De = 0, Re = {}, Le = {
        Record: Rv,
        scope: {},
        state: de,
        currentVAO: null,
        targetVAO: null,
        restore: Ve() ? Me : function() {
        },
        createVAO: tt,
        getVAO: Ue,
        destroyBuffer: ze,
        setVAO: Ve() ? oe : ve,
        clear: Ve() ? ke : function() {
        }
      };
      function ze(Ce) {
        for (var je = 0; je < de.length; ++je) {
          var Ae = de[je];
          Ae.buffer === Ce && (I.disableVertexAttribArray(je), Ae.buffer = null);
        }
      }
      function Ve() {
        return G.oes_vertex_array_object;
      }
      function Ie() {
        return G.angle_instanced_arrays;
      }
      function Ue(Ce) {
        return typeof Ce == "function" && Ce._vao ? Ce._vao : null;
      }
      function oe(Ce) {
        if (Ce !== Le.currentVAO) {
          var je = Ve();
          Ce ? je.bindVertexArrayOES(Ce.vao) : je.bindVertexArrayOES(null), Le.currentVAO = Ce;
        }
      }
      function ve(Ce) {
        if (Ce !== Le.currentVAO) {
          if (Ce)
            Ce.bindAttrs();
          else
            for (var je = Ie(), Ae = 0; Ae < de.length; ++Ae) {
              var $e = de[Ae];
              $e.buffer ? (I.enableVertexAttribArray(Ae), I.vertexAttribPointer(Ae, $e.size, $e.type, $e.normalized, $e.stride, $e.offfset), je && $e.divisor && je.vertexAttribDivisorANGLE(Ae, $e.divisor)) : (I.disableVertexAttribArray(Ae), I.vertexAttrib4f(Ae, $e.x, $e.y, $e.z, $e.w));
            }
          Le.currentVAO = Ce;
        }
      }
      function ke() {
        Bn(Re).forEach(function(Ce) {
          Ce.destroy();
        });
      }
      function qe() {
        this.id = ++De, this.attributes = [];
        var Ce = Ve();
        Ce ? this.vao = Ce.createVertexArrayOES() : this.vao = null, Re[this.id] = this, this.buffers = [];
      }
      qe.prototype.bindAttrs = function() {
        for (var Ce = Ie(), je = this.attributes, Ae = 0; Ae < je.length; ++Ae) {
          var $e = je[Ae];
          $e.buffer ? (I.enableVertexAttribArray(Ae), I.bindBuffer(fb, $e.buffer.buffer), I.vertexAttribPointer(Ae, $e.size, $e.type, $e.normalized, $e.stride, $e.offset), Ce && $e.divisor && Ce.vertexAttribDivisorANGLE(Ae, $e.divisor)) : (I.disableVertexAttribArray(Ae), I.vertexAttrib4f(Ae, $e.x, $e.y, $e.z, $e.w));
        }
        for (var dt = je.length; dt < le; ++dt)
          I.disableVertexAttribArray(dt);
      }, qe.prototype.refresh = function() {
        var Ce = Ve();
        Ce && (Ce.bindVertexArrayOES(this.vao), this.bindAttrs(), Le.currentVAO = this);
      }, qe.prototype.destroy = function() {
        if (this.vao) {
          var Ce = Ve();
          this === Le.currentVAO && (Le.currentVAO = null, Ce.bindVertexArrayOES(null)), Ce.deleteVertexArrayOES(this.vao), this.vao = null;
        }
        Re[this.id] && (delete Re[this.id], ce.vaoCount -= 1);
      };
      function Me() {
        var Ce = Ve();
        Ce && Bn(Re).forEach(function(je) {
          je.refresh();
        });
      }
      function tt(Ce) {
        var je = new qe();
        ce.vaoCount += 1;
        function Ae($e) {
          D(Array.isArray($e), "arguments to vertex array constructor must be an array"), D($e.length < le, "too many attributes"), D($e.length > 0, "must specify at least one attribute");
          var dt = {}, St = je.attributes;
          St.length = $e.length;
          for (var Ye = 0; Ye < $e.length; ++Ye) {
            var Ge = $e[Ye], we = St[Ye] = new Rv(), wt = Ge.data || Ge;
            if (Array.isArray(wt) || t(wt) || ca(wt)) {
              var Dt;
              je.buffers[Ye] && (Dt = je.buffers[Ye], t(wt) && Dt._buffer.byteLength >= wt.byteLength ? Dt.subdata(wt) : (Dt.destroy(), je.buffers[Ye] = null)), je.buffers[Ye] || (Dt = je.buffers[Ye] = Ee.create(Ge, fb, !1, !0)), we.buffer = Ee.getBuffer(Dt), we.size = we.buffer.dimension | 0, we.normalized = !1, we.type = we.buffer.dtype, we.offset = 0, we.stride = 0, we.divisor = 0, we.state = 1, dt[Ye] = 1;
            } else
              Ee.getBuffer(Ge) ? (we.buffer = Ee.getBuffer(Ge), we.size = we.buffer.dimension | 0, we.normalized = !1, we.type = we.buffer.dtype, we.offset = 0, we.stride = 0, we.divisor = 0, we.state = 1) : Ee.getBuffer(Ge.buffer) ? (we.buffer = Ee.getBuffer(Ge.buffer), we.size = (+Ge.size || we.buffer.dimension) | 0, we.normalized = !!Ge.normalized || !1, "type" in Ge ? (D.parameter(Ge.type, mo, "invalid buffer type"), we.type = mo[Ge.type]) : we.type = we.buffer.dtype, we.offset = (Ge.offset || 0) | 0, we.stride = (Ge.stride || 0) | 0, we.divisor = (Ge.divisor || 0) | 0, we.state = 1, D(we.size >= 1 && we.size <= 4, "size must be between 1 and 4"), D(we.offset >= 0, "invalid offset"), D(we.stride >= 0 && we.stride <= 255, "stride must be between 0 and 255"), D(we.divisor >= 0, "divisor must be positive"), D(!we.divisor || !!G.angle_instanced_arrays, "ANGLE_instanced_arrays must be enabled to use divisor")) : "x" in Ge ? (D(Ye > 0, "first attribute must not be a constant"), we.x = +Ge.x || 0, we.y = +Ge.y || 0, we.z = +Ge.z || 0, we.w = +Ge.w || 0, we.state = 2) : D(!1, "invalid attribute spec for location " + Ye);
          }
          for (var it = 0; it < je.buffers.length; ++it)
            !dt[it] && je.buffers[it] && (je.buffers[it].destroy(), je.buffers[it] = null);
          return je.refresh(), Ae;
        }
        return Ae.destroy = function() {
          for (var $e = 0; $e < je.buffers.length; ++$e)
            je.buffers[$e] && je.buffers[$e].destroy();
          je.buffers.length = 0, je.destroy();
        }, Ae._vao = je, Ae._reglType = "vao", Ae(Ce);
      }
      return Le;
    }
    var lb = 35632, XN = 35633, VN = 35718, YN = 35721;
    function HN(I, G, X, ce) {
      var Ee = {}, le = {};
      function de(oe, ve, ke, qe) {
        this.name = oe, this.id = ve, this.location = ke, this.info = qe;
      }
      function Te(oe, ve) {
        for (var ke = 0; ke < oe.length; ++ke)
          if (oe[ke].id === ve.id) {
            oe[ke].location = ve.location;
            return;
          }
        oe.push(ve);
      }
      function De(oe, ve, ke) {
        var qe = oe === lb ? Ee : le, Me = qe[ve];
        if (!Me) {
          var tt = G.str(ve);
          Me = I.createShader(oe), I.shaderSource(Me, tt), I.compileShader(Me), D.shaderError(I, Me, tt, oe, ke), qe[ve] = Me;
        }
        return Me;
      }
      var Re = {}, Le = [], ze = 0;
      function Ve(oe, ve) {
        this.id = ze++, this.fragId = oe, this.vertId = ve, this.program = null, this.uniforms = [], this.attributes = [], this.refCount = 1, ce.profile && (this.stats = {
          uniformsCount: 0,
          attributesCount: 0
        });
      }
      function Ie(oe, ve, ke) {
        var qe, Me, tt = De(lb, oe.fragId), Ce = De(XN, oe.vertId), je = oe.program = I.createProgram();
        if (I.attachShader(je, tt), I.attachShader(je, Ce), ke)
          for (qe = 0; qe < ke.length; ++qe) {
            var Ae = ke[qe];
            I.bindAttribLocation(je, Ae[0], Ae[1]);
          }
        I.linkProgram(je), D.linkError(
          I,
          je,
          G.str(oe.fragId),
          G.str(oe.vertId),
          ve
        );
        var $e = I.getProgramParameter(je, VN);
        ce.profile && (oe.stats.uniformsCount = $e);
        var dt = oe.uniforms;
        for (qe = 0; qe < $e; ++qe)
          if (Me = I.getActiveUniform(je, qe), Me)
            if (Me.size > 1)
              for (var St = 0; St < Me.size; ++St) {
                var Ye = Me.name.replace("[0]", "[" + St + "]");
                Te(dt, new de(
                  Ye,
                  G.id(Ye),
                  I.getUniformLocation(je, Ye),
                  Me
                ));
              }
            else
              Te(dt, new de(
                Me.name,
                G.id(Me.name),
                I.getUniformLocation(je, Me.name),
                Me
              ));
        var Ge = I.getProgramParameter(je, YN);
        ce.profile && (oe.stats.attributesCount = Ge);
        var we = oe.attributes;
        for (qe = 0; qe < Ge; ++qe)
          Me = I.getActiveAttrib(je, qe), Me && Te(we, new de(
            Me.name,
            G.id(Me.name),
            I.getAttribLocation(je, Me.name),
            Me
          ));
      }
      ce.profile && (X.getMaxUniformsCount = function() {
        var oe = 0;
        return Le.forEach(function(ve) {
          ve.stats.uniformsCount > oe && (oe = ve.stats.uniformsCount);
        }), oe;
      }, X.getMaxAttributesCount = function() {
        var oe = 0;
        return Le.forEach(function(ve) {
          ve.stats.attributesCount > oe && (oe = ve.stats.attributesCount);
        }), oe;
      });
      function Ue() {
        Ee = {}, le = {};
        for (var oe = 0; oe < Le.length; ++oe)
          Ie(Le[oe], null, Le[oe].attributes.map(function(ve) {
            return [ve.location, ve.name];
          }));
      }
      return {
        clear: function() {
          var oe = I.deleteShader.bind(I);
          Bn(Ee).forEach(oe), Ee = {}, Bn(le).forEach(oe), le = {}, Le.forEach(function(ve) {
            I.deleteProgram(ve.program);
          }), Le.length = 0, Re = {}, X.shaderCount = 0;
        },
        program: function(oe, ve, ke, qe) {
          D.command(oe >= 0, "missing vertex shader", ke), D.command(ve >= 0, "missing fragment shader", ke);
          var Me = Re[ve];
          Me || (Me = Re[ve] = {});
          var tt = Me[oe];
          if (tt && (tt.refCount++, !qe))
            return tt;
          var Ce = new Ve(ve, oe);
          return X.shaderCount++, Ie(Ce, ke, qe), tt || (Me[oe] = Ce), Le.push(Ce), n(Ce, {
            destroy: function() {
              if (Ce.refCount--, Ce.refCount <= 0) {
                I.deleteProgram(Ce.program);
                var je = Le.indexOf(Ce);
                Le.splice(je, 1), X.shaderCount--;
              }
              Me[Ce.vertId].refCount <= 0 && (I.deleteShader(le[Ce.vertId]), delete le[Ce.vertId], delete Re[Ce.fragId][Ce.vertId]), Object.keys(Re[Ce.fragId]).length || (I.deleteShader(Ee[Ce.fragId]), delete Ee[Ce.fragId], delete Re[Ce.fragId]);
            }
          });
        },
        restore: Ue,
        shader: De,
        frag: -1,
        vert: -1
      };
    }
    var KN = 6408, Au = 5121, qN = 3333, Pl = 5126;
    function ZN(I, G, X, ce, Ee, le, de) {
      function Te(Le) {
        var ze;
        G.next === null ? (D(
          Ee.preserveDrawingBuffer,
          'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'
        ), ze = Au) : (D(
          G.next.colorAttachments[0].texture !== null,
          "You cannot read from a renderbuffer"
        ), ze = G.next.colorAttachments[0].texture._texture.type, le.oes_texture_float ? (D(
          ze === Au || ze === Pl,
          "Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"
        ), ze === Pl && D(de.readFloat, "Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")) : D(
          ze === Au,
          "Reading from a framebuffer is only allowed for the type 'uint8'"
        ));
        var Ve = 0, Ie = 0, Ue = ce.framebufferWidth, oe = ce.framebufferHeight, ve = null;
        t(Le) ? ve = Le : Le && (D.type(Le, "object", "invalid arguments to regl.read()"), Ve = Le.x | 0, Ie = Le.y | 0, D(
          Ve >= 0 && Ve < ce.framebufferWidth,
          "invalid x offset for regl.read"
        ), D(
          Ie >= 0 && Ie < ce.framebufferHeight,
          "invalid y offset for regl.read"
        ), Ue = (Le.width || ce.framebufferWidth - Ve) | 0, oe = (Le.height || ce.framebufferHeight - Ie) | 0, ve = Le.data || null), ve && (ze === Au ? D(
          ve instanceof Uint8Array,
          "buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"
        ) : ze === Pl && D(
          ve instanceof Float32Array,
          "buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"
        )), D(
          Ue > 0 && Ue + Ve <= ce.framebufferWidth,
          "invalid width for read pixels"
        ), D(
          oe > 0 && oe + Ie <= ce.framebufferHeight,
          "invalid height for read pixels"
        ), X();
        var ke = Ue * oe * 4;
        return ve || (ze === Au ? ve = new Uint8Array(ke) : ze === Pl && (ve = ve || new Float32Array(ke))), D.isTypedArray(ve, "data buffer for regl.read() must be a typedarray"), D(ve.byteLength >= ke, "data buffer for regl.read() too small"), I.pixelStorei(qN, 4), I.readPixels(
          Ve,
          Ie,
          Ue,
          oe,
          KN,
          ze,
          ve
        ), ve;
      }
      function De(Le) {
        var ze;
        return G.setFBO({
          framebuffer: Le.framebuffer
        }, function() {
          ze = Te(Le);
        }), ze;
      }
      function Re(Le) {
        return !Le || !("framebuffer" in Le) ? Te(Le) : De(Le);
      }
      return Re;
    }
    function hs(I) {
      return Array.prototype.slice.call(I);
    }
    function ds(I) {
      return hs(I).join("");
    }
    function QN() {
      var I = 0, G = [], X = [];
      function ce(ze) {
        for (var Ve = 0; Ve < X.length; ++Ve)
          if (X[Ve] === ze)
            return G[Ve];
        var Ie = "g" + I++;
        return G.push(Ie), X.push(ze), Ie;
      }
      function Ee() {
        var ze = [];
        function Ve() {
          ze.push.apply(ze, hs(arguments));
        }
        var Ie = [];
        function Ue() {
          var oe = "v" + I++;
          return Ie.push(oe), arguments.length > 0 && (ze.push(oe, "="), ze.push.apply(ze, hs(arguments)), ze.push(";")), oe;
        }
        return n(Ve, {
          def: Ue,
          toString: function() {
            return ds([
              Ie.length > 0 ? "var " + Ie.join(",") + ";" : "",
              ds(ze)
            ]);
          }
        });
      }
      function le() {
        var ze = Ee(), Ve = Ee(), Ie = ze.toString, Ue = Ve.toString;
        function oe(ve, ke) {
          Ve(ve, ke, "=", ze.def(ve, ke), ";");
        }
        return n(function() {
          ze.apply(ze, hs(arguments));
        }, {
          def: ze.def,
          entry: ze,
          exit: Ve,
          save: oe,
          set: function(ve, ke, qe) {
            oe(ve, ke), ze(ve, ke, "=", qe, ";");
          },
          toString: function() {
            return Ie() + Ue();
          }
        });
      }
      function de() {
        var ze = ds(arguments), Ve = le(), Ie = le(), Ue = Ve.toString, oe = Ie.toString;
        return n(Ve, {
          then: function() {
            return Ve.apply(Ve, hs(arguments)), this;
          },
          else: function() {
            return Ie.apply(Ie, hs(arguments)), this;
          },
          toString: function() {
            var ve = oe();
            return ve && (ve = "else{" + ve + "}"), ds([
              "if(",
              ze,
              "){",
              Ue(),
              "}",
              ve
            ]);
          }
        });
      }
      var Te = Ee(), De = {};
      function Re(ze, Ve) {
        var Ie = [];
        function Ue() {
          var Me = "a" + Ie.length;
          return Ie.push(Me), Me;
        }
        Ve = Ve || 0;
        for (var oe = 0; oe < Ve; ++oe)
          Ue();
        var ve = le(), ke = ve.toString, qe = De[ze] = n(ve, {
          arg: Ue,
          toString: function() {
            return ds([
              "function(",
              Ie.join(),
              "){",
              ke(),
              "}"
            ]);
          }
        });
        return qe;
      }
      function Le() {
        var ze = [
          '"use strict";',
          Te,
          "return {"
        ];
        Object.keys(De).forEach(function(Ue) {
          ze.push('"', Ue, '":', De[Ue].toString(), ",");
        }), ze.push("}");
        var Ve = ds(ze).replace(/;/g, `;
`).replace(/}/g, `}
`).replace(/{/g, `{
`), Ie = Function.apply(null, G.concat(Ve));
        return Ie.apply(null, X);
      }
      return {
        global: Te,
        link: ce,
        block: Ee,
        proc: Re,
        scope: le,
        cond: de,
        compile: Le
      };
    }
    var vs = "xyzw".split(""), cb = 5121, ps = 1, Bv = 2, Fv = 0, Gv = 1, zv = 2, Uv = 3, kl = 4, hb = 5, db = 6, vb = "dither", pb = "blend.enable", gb = "blend.color", jv = "blend.equation", $v = "blend.func", yb = "depth.enable", mb = "depth.func", bb = "depth.range", Eb = "depth.mask", Wv = "colorMask", xb = "cull.enable", wb = "cull.face", Xv = "frontFace", Vv = "lineWidth", _b = "polygonOffset.enable", Yv = "polygonOffset.offset", Mb = "sample.alpha", Sb = "sample.enable", Hv = "sample.coverage", Ab = "stencil.enable", Cb = "stencil.mask", Kv = "stencil.func", qv = "stencil.opFront", Cu = "stencil.opBack", Tb = "scissor.enable", Rl = "scissor.box", ci = "viewport", Tu = "profile", _o = "framebuffer", Iu = "vert", Ou = "frag", Mo = "elements", So = "primitive", Ao = "count", Bl = "offset", Fl = "instances", Du = "vao", Zv = "Width", Qv = "Height", gs = _o + Zv, ys = _o + Qv, JN = ci + Zv, eP = ci + Qv, Ib = "drawingBuffer", Ob = Ib + Zv, Db = Ib + Qv, tP = [
      $v,
      jv,
      Kv,
      qv,
      Cu,
      Hv,
      ci,
      Rl,
      Yv
    ], ms = 34962, rP = 34963, nP = 35632, aP = 35633, Lb = 3553, iP = 34067, oP = 2884, sP = 3042, uP = 3024, fP = 2960, lP = 2929, cP = 3089, hP = 32823, dP = 32926, vP = 32928, Jv = 5126, Gl = 35664, zl = 35665, Ul = 35666, ep = 5124, jl = 35667, $l = 35668, Wl = 35669, tp = 35670, Xl = 35671, Vl = 35672, Yl = 35673, Lu = 35674, Nu = 35675, Pu = 35676, ku = 35678, Ru = 35680, Nb = 4, Bu = 1028, Co = 1029, Pb = 2304, rp = 2305, pP = 32775, gP = 32776, yP = 519, Pi = 7680, kb = 0, Rb = 1, Bb = 32774, mP = 513, Fb = 36160, bP = 36064, La = {
      0: 0,
      1: 1,
      zero: 0,
      one: 1,
      "src color": 768,
      "one minus src color": 769,
      "src alpha": 770,
      "one minus src alpha": 771,
      "dst color": 774,
      "one minus dst color": 775,
      "dst alpha": 772,
      "one minus dst alpha": 773,
      "constant color": 32769,
      "one minus constant color": 32770,
      "constant alpha": 32771,
      "one minus constant alpha": 32772,
      "src alpha saturate": 776
    }, Gb = [
      "constant color, constant alpha",
      "one minus constant color, constant alpha",
      "constant color, one minus constant alpha",
      "one minus constant color, one minus constant alpha",
      "constant alpha, constant color",
      "constant alpha, one minus constant color",
      "one minus constant alpha, constant color",
      "one minus constant alpha, one minus constant color"
    ], bs = {
      never: 512,
      less: 513,
      "<": 513,
      equal: 514,
      "=": 514,
      "==": 514,
      "===": 514,
      lequal: 515,
      "<=": 515,
      greater: 516,
      ">": 516,
      notequal: 517,
      "!=": 517,
      "!==": 517,
      gequal: 518,
      ">=": 518,
      always: 519
    }, ki = {
      0: 0,
      zero: 0,
      keep: 7680,
      replace: 7681,
      increment: 7682,
      decrement: 7683,
      "increment wrap": 34055,
      "decrement wrap": 34056,
      invert: 5386
    }, zb = {
      frag: nP,
      vert: aP
    }, np = {
      cw: Pb,
      ccw: rp
    };
    function Hl(I) {
      return Array.isArray(I) || t(I) || ca(I);
    }
    function Ub(I) {
      return I.sort(function(G, X) {
        return G === ci ? -1 : X === ci ? 1 : G < X ? -1 : 1;
      });
    }
    function _n(I, G, X, ce) {
      this.thisDep = I, this.contextDep = G, this.propDep = X, this.append = ce;
    }
    function Ri(I) {
      return I && !(I.thisDep || I.contextDep || I.propDep);
    }
    function Nr(I) {
      return new _n(!1, !1, !1, I);
    }
    function Cn(I, G) {
      var X = I.type;
      if (X === Fv) {
        var ce = I.data.length;
        return new _n(
          !0,
          ce >= 1,
          ce >= 2,
          G
        );
      } else if (X === kl) {
        var Ee = I.data;
        return new _n(
          Ee.thisDep,
          Ee.contextDep,
          Ee.propDep,
          G
        );
      } else {
        if (X === hb)
          return new _n(
            !1,
            !1,
            !1,
            G
          );
        if (X === db) {
          for (var le = !1, de = !1, Te = !1, De = 0; De < I.data.length; ++De) {
            var Re = I.data[De];
            if (Re.type === Gv)
              Te = !0;
            else if (Re.type === zv)
              de = !0;
            else if (Re.type === Uv)
              le = !0;
            else if (Re.type === Fv) {
              le = !0;
              var Le = Re.data;
              Le >= 1 && (de = !0), Le >= 2 && (Te = !0);
            } else
              Re.type === kl && (le = le || Re.data.thisDep, de = de || Re.data.contextDep, Te = Te || Re.data.propDep);
          }
          return new _n(
            le,
            de,
            Te,
            G
          );
        } else
          return new _n(
            X === Uv,
            X === zv,
            X === Gv,
            G
          );
      }
    }
    var jb = new _n(!1, !1, !1, function() {
    });
    function EP(I, G, X, ce, Ee, le, de, Te, De, Re, Le, ze, Ve, Ie, Ue) {
      var oe = Re.Record, ve = {
        add: 32774,
        subtract: 32778,
        "reverse subtract": 32779
      };
      X.ext_blend_minmax && (ve.min = pP, ve.max = gP);
      var ke = X.angle_instanced_arrays, qe = X.webgl_draw_buffers, Me = {
        dirty: !0,
        profile: Ue.profile
      }, tt = {}, Ce = [], je = {}, Ae = {};
      function $e(j) {
        return j.replace(".", "_");
      }
      function dt(j, k, H) {
        var ae = $e(j);
        Ce.push(j), tt[ae] = Me[ae] = !!H, je[ae] = k;
      }
      function St(j, k, H) {
        var ae = $e(j);
        Ce.push(j), Array.isArray(H) ? (Me[ae] = H.slice(), tt[ae] = H.slice()) : Me[ae] = tt[ae] = H, Ae[ae] = k;
      }
      dt(vb, uP), dt(pb, sP), St(gb, "blendColor", [0, 0, 0, 0]), St(
        jv,
        "blendEquationSeparate",
        [Bb, Bb]
      ), St(
        $v,
        "blendFuncSeparate",
        [Rb, kb, Rb, kb]
      ), dt(yb, lP, !0), St(mb, "depthFunc", mP), St(bb, "depthRange", [0, 1]), St(Eb, "depthMask", !0), St(Wv, Wv, [!0, !0, !0, !0]), dt(xb, oP), St(wb, "cullFace", Co), St(Xv, Xv, rp), St(Vv, Vv, 1), dt(_b, hP), St(Yv, "polygonOffset", [0, 0]), dt(Mb, dP), dt(Sb, vP), St(Hv, "sampleCoverage", [1, !1]), dt(Ab, fP), St(Cb, "stencilMask", -1), St(Kv, "stencilFunc", [yP, 0, -1]), St(
        qv,
        "stencilOpSeparate",
        [Bu, Pi, Pi, Pi]
      ), St(
        Cu,
        "stencilOpSeparate",
        [Co, Pi, Pi, Pi]
      ), dt(Tb, cP), St(
        Rl,
        "scissor",
        [0, 0, I.drawingBufferWidth, I.drawingBufferHeight]
      ), St(
        ci,
        ci,
        [0, 0, I.drawingBufferWidth, I.drawingBufferHeight]
      );
      var Ye = {
        gl: I,
        context: Ve,
        strings: G,
        next: tt,
        current: Me,
        draw: ze,
        elements: le,
        buffer: Ee,
        shader: Le,
        attributes: Re.state,
        vao: Re,
        uniforms: De,
        framebuffer: Te,
        extensions: X,
        timer: Ie,
        isBufferArgs: Hl
      }, Ge = {
        primTypes: as,
        compareFuncs: bs,
        blendFuncs: La,
        blendEquations: ve,
        stencilOps: ki,
        glTypes: mo,
        orientationType: np
      };
      D.optional(function() {
        Ye.isArrayLike = Cr;
      }), qe && (Ge.backBuffer = [Co], Ge.drawBuffer = Xr(ce.maxDrawbuffers, function(j) {
        return j === 0 ? [0] : Xr(j, function(k) {
          return bP + k;
        });
      }));
      var we = 0;
      function wt() {
        var j = QN(), k = j.link, H = j.global;
        j.id = we++, j.batchId = "0";
        var ae = k(Ye), se = j.shared = {
          props: "a0"
        };
        Object.keys(Ye).forEach(function(Y) {
          se[Y] = H.def(ae, ".", Y);
        }), D.optional(function() {
          j.CHECK = k(D), j.commandStr = D.guessCommand(), j.command = k(j.commandStr), j.assert = function(Y, U, ne) {
            Y(
              "if(!(",
              U,
              "))",
              this.CHECK,
              ".commandRaise(",
              k(ne),
              ",",
              this.command,
              ");"
            );
          }, Ge.invalidBlendCombinations = Gb;
        });
        var Q = j.next = {}, Z = j.current = {};
        Object.keys(Ae).forEach(function(Y) {
          Array.isArray(Me[Y]) && (Q[Y] = H.def(se.next, ".", Y), Z[Y] = H.def(se.current, ".", Y));
        });
        var ee = j.constants = {};
        Object.keys(Ge).forEach(function(Y) {
          ee[Y] = H.def(JSON.stringify(Ge[Y]));
        }), j.invoke = function(Y, U) {
          switch (U.type) {
            case Fv:
              var ne = [
                "this",
                se.context,
                se.props,
                j.batchId
              ];
              return Y.def(
                k(U.data),
                ".call(",
                ne.slice(0, Math.max(U.data.length + 1, 4)),
                ")"
              );
            case Gv:
              return Y.def(se.props, U.data);
            case zv:
              return Y.def(se.context, U.data);
            case Uv:
              return Y.def("this", U.data);
            case kl:
              return U.data.append(j, Y), U.data.ref;
            case hb:
              return U.data.toString();
            case db:
              return U.data.map(function(ue) {
                return j.invoke(Y, ue);
              });
          }
        }, j.attribCache = {};
        var $ = {};
        return j.scopeAttrib = function(Y) {
          var U = G.id(Y);
          if (U in $)
            return $[U];
          var ne = Re.scope[U];
          ne || (ne = Re.scope[U] = new oe());
          var ue = $[U] = k(ne);
          return ue;
        }, j;
      }
      function Dt(j) {
        var k = j.static, H = j.dynamic, ae;
        if (Tu in k) {
          var se = !!k[Tu];
          ae = Nr(function(Z, ee) {
            return se;
          }), ae.enable = se;
        } else if (Tu in H) {
          var Q = H[Tu];
          ae = Cn(Q, function(Z, ee) {
            return Z.invoke(ee, Q);
          });
        }
        return ae;
      }
      function it(j, k) {
        var H = j.static, ae = j.dynamic;
        if (_o in H) {
          var se = H[_o];
          return se ? (se = Te.getFramebuffer(se), D.command(se, "invalid framebuffer object"), Nr(function(Z, ee) {
            var $ = Z.link(se), Y = Z.shared;
            ee.set(
              Y.framebuffer,
              ".next",
              $
            );
            var U = Y.context;
            return ee.set(
              U,
              "." + gs,
              $ + ".width"
            ), ee.set(
              U,
              "." + ys,
              $ + ".height"
            ), $;
          })) : Nr(function(Z, ee) {
            var $ = Z.shared;
            ee.set(
              $.framebuffer,
              ".next",
              "null"
            );
            var Y = $.context;
            return ee.set(
              Y,
              "." + gs,
              Y + "." + Ob
            ), ee.set(
              Y,
              "." + ys,
              Y + "." + Db
            ), "null";
          });
        } else if (_o in ae) {
          var Q = ae[_o];
          return Cn(Q, function(Z, ee) {
            var $ = Z.invoke(ee, Q), Y = Z.shared, U = Y.framebuffer, ne = ee.def(
              U,
              ".getFramebuffer(",
              $,
              ")"
            );
            D.optional(function() {
              Z.assert(
                ee,
                "!" + $ + "||" + ne,
                "invalid framebuffer object"
              );
            }), ee.set(
              U,
              ".next",
              ne
            );
            var ue = Y.context;
            return ee.set(
              ue,
              "." + gs,
              ne + "?" + ne + ".width:" + ue + "." + Ob
            ), ee.set(
              ue,
              "." + ys,
              ne + "?" + ne + ".height:" + ue + "." + Db
            ), ne;
          });
        } else
          return null;
      }
      function Bt(j, k, H) {
        var ae = j.static, se = j.dynamic;
        function Q($) {
          if ($ in ae) {
            var Y = ae[$];
            D.commandType(Y, "object", "invalid " + $, H.commandStr);
            var U = !0, ne = Y.x | 0, ue = Y.y | 0, me, xe;
            return "width" in Y ? (me = Y.width | 0, D.command(me >= 0, "invalid " + $, H.commandStr)) : U = !1, "height" in Y ? (xe = Y.height | 0, D.command(xe >= 0, "invalid " + $, H.commandStr)) : U = !1, new _n(
              !U && k && k.thisDep,
              !U && k && k.contextDep,
              !U && k && k.propDep,
              function(ft, Nt) {
                var ot = ft.shared.context, gt = me;
                "width" in Y || (gt = Nt.def(ot, ".", gs, "-", ne));
                var Tt = xe;
                return "height" in Y || (Tt = Nt.def(ot, ".", ys, "-", ue)), [ne, ue, gt, Tt];
              }
            );
          } else if ($ in se) {
            var pe = se[$], Ne = Cn(pe, function(ft, Nt) {
              var ot = ft.invoke(Nt, pe);
              D.optional(function() {
                ft.assert(
                  Nt,
                  ot + "&&typeof " + ot + '==="object"',
                  "invalid " + $
                );
              });
              var gt = ft.shared.context, Tt = Nt.def(ot, ".x|0"), er = Nt.def(ot, ".y|0"), wr = Nt.def(
                '"width" in ',
                ot,
                "?",
                ot,
                ".width|0:",
                "(",
                gt,
                ".",
                gs,
                "-",
                Tt,
                ")"
              ), Mn = Nt.def(
                '"height" in ',
                ot,
                "?",
                ot,
                ".height|0:",
                "(",
                gt,
                ".",
                ys,
                "-",
                er,
                ")"
              );
              return D.optional(function() {
                ft.assert(
                  Nt,
                  wr + ">=0&&" + Mn + ">=0",
                  "invalid " + $
                );
              }), [Tt, er, wr, Mn];
            });
            return k && (Ne.thisDep = Ne.thisDep || k.thisDep, Ne.contextDep = Ne.contextDep || k.contextDep, Ne.propDep = Ne.propDep || k.propDep), Ne;
          } else
            return k ? new _n(
              k.thisDep,
              k.contextDep,
              k.propDep,
              function(ft, Nt) {
                var ot = ft.shared.context;
                return [
                  0,
                  0,
                  Nt.def(ot, ".", gs),
                  Nt.def(ot, ".", ys)
                ];
              }
            ) : null;
        }
        var Z = Q(ci);
        if (Z) {
          var ee = Z;
          Z = new _n(
            Z.thisDep,
            Z.contextDep,
            Z.propDep,
            function($, Y) {
              var U = ee.append($, Y), ne = $.shared.context;
              return Y.set(
                ne,
                "." + JN,
                U[2]
              ), Y.set(
                ne,
                "." + eP,
                U[3]
              ), U;
            }
          );
        }
        return {
          viewport: Z,
          scissor_box: Q(Rl)
        };
      }
      function Ct(j, k) {
        var H = j.static, ae = typeof H[Ou] == "string" && typeof H[Iu] == "string";
        if (ae) {
          if (Object.keys(k.dynamic).length > 0)
            return null;
          var se = k.static, Q = Object.keys(se);
          if (Q.length > 0 && typeof se[Q[0]] == "number") {
            for (var Z = [], ee = 0; ee < Q.length; ++ee)
              D(typeof se[Q[ee]] == "number", "must specify all vertex attribute locations when using vaos"), Z.push([se[Q[ee]] | 0, Q[ee]]);
            return Z;
          }
        }
        return null;
      }
      function kt(j, k, H) {
        var ae = j.static, se = j.dynamic;
        function Q(U) {
          if (U in ae) {
            var ne = G.id(ae[U]);
            D.optional(function() {
              Le.shader(zb[U], ne, D.guessCommand());
            });
            var ue = Nr(function() {
              return ne;
            });
            return ue.id = ne, ue;
          } else if (U in se) {
            var me = se[U];
            return Cn(me, function(xe, pe) {
              var Ne = xe.invoke(pe, me), ft = pe.def(xe.shared.strings, ".id(", Ne, ")");
              return D.optional(function() {
                pe(
                  xe.shared.shader,
                  ".shader(",
                  zb[U],
                  ",",
                  ft,
                  ",",
                  xe.command,
                  ");"
                );
              }), ft;
            });
          }
          return null;
        }
        var Z = Q(Ou), ee = Q(Iu), $ = null, Y;
        return Ri(Z) && Ri(ee) ? ($ = Le.program(ee.id, Z.id, null, H), Y = Nr(function(U, ne) {
          return U.link($);
        })) : Y = new _n(
          Z && Z.thisDep || ee && ee.thisDep,
          Z && Z.contextDep || ee && ee.contextDep,
          Z && Z.propDep || ee && ee.propDep,
          function(U, ne) {
            var ue = U.shared.shader, me;
            Z ? me = Z.append(U, ne) : me = ne.def(ue, ".", Ou);
            var xe;
            ee ? xe = ee.append(U, ne) : xe = ne.def(ue, ".", Iu);
            var pe = ue + ".program(" + xe + "," + me;
            return D.optional(function() {
              pe += "," + U.command;
            }), ne.def(pe + ")");
          }
        ), {
          frag: Z,
          vert: ee,
          progVar: Y,
          program: $
        };
      }
      function Jt(j, k) {
        var H = j.static, ae = j.dynamic;
        function se() {
          if (Mo in H) {
            var U = H[Mo];
            Hl(U) ? U = le.getElements(le.create(U, !0)) : U && (U = le.getElements(U), D.command(U, "invalid elements", k.commandStr));
            var ne = Nr(function(me, xe) {
              if (U) {
                var pe = me.link(U);
                return me.ELEMENTS = pe, pe;
              }
              return me.ELEMENTS = null, null;
            });
            return ne.value = U, ne;
          } else if (Mo in ae) {
            var ue = ae[Mo];
            return Cn(ue, function(me, xe) {
              var pe = me.shared, Ne = pe.isBufferArgs, ft = pe.elements, Nt = me.invoke(xe, ue), ot = xe.def("null"), gt = xe.def(Ne, "(", Nt, ")"), Tt = me.cond(gt).then(ot, "=", ft, ".createStream(", Nt, ");").else(ot, "=", ft, ".getElements(", Nt, ");");
              return D.optional(function() {
                me.assert(
                  Tt.else,
                  "!" + Nt + "||" + ot,
                  "invalid elements"
                );
              }), xe.entry(Tt), xe.exit(
                me.cond(gt).then(ft, ".destroyStream(", ot, ");")
              ), me.ELEMENTS = ot, ot;
            });
          }
          return null;
        }
        var Q = se();
        function Z() {
          if (So in H) {
            var U = H[So];
            return D.commandParameter(U, as, "invalid primitve", k.commandStr), Nr(function(ue, me) {
              return as[U];
            });
          } else if (So in ae) {
            var ne = ae[So];
            return Cn(ne, function(ue, me) {
              var xe = ue.constants.primTypes, pe = ue.invoke(me, ne);
              return D.optional(function() {
                ue.assert(
                  me,
                  pe + " in " + xe,
                  "invalid primitive, must be one of " + Object.keys(as)
                );
              }), me.def(xe, "[", pe, "]");
            });
          } else if (Q)
            return Ri(Q) ? Q.value ? Nr(function(ue, me) {
              return me.def(ue.ELEMENTS, ".primType");
            }) : Nr(function() {
              return Nb;
            }) : new _n(
              Q.thisDep,
              Q.contextDep,
              Q.propDep,
              function(ue, me) {
                var xe = ue.ELEMENTS;
                return me.def(xe, "?", xe, ".primType:", Nb);
              }
            );
          return null;
        }
        function ee(U, ne) {
          if (U in H) {
            var ue = H[U] | 0;
            return D.command(!ne || ue >= 0, "invalid " + U, k.commandStr), Nr(function(xe, pe) {
              return ne && (xe.OFFSET = ue), ue;
            });
          } else if (U in ae) {
            var me = ae[U];
            return Cn(me, function(xe, pe) {
              var Ne = xe.invoke(pe, me);
              return ne && (xe.OFFSET = Ne, D.optional(function() {
                xe.assert(
                  pe,
                  Ne + ">=0",
                  "invalid " + U
                );
              })), Ne;
            });
          } else if (ne && Q)
            return Nr(function(xe, pe) {
              return xe.OFFSET = "0", 0;
            });
          return null;
        }
        var $ = ee(Bl, !0);
        function Y() {
          if (Ao in H) {
            var U = H[Ao] | 0;
            return D.command(
              typeof U == "number" && U >= 0,
              "invalid vertex count",
              k.commandStr
            ), Nr(function() {
              return U;
            });
          } else if (Ao in ae) {
            var ne = ae[Ao];
            return Cn(ne, function(xe, pe) {
              var Ne = xe.invoke(pe, ne);
              return D.optional(function() {
                xe.assert(
                  pe,
                  "typeof " + Ne + '==="number"&&' + Ne + ">=0&&" + Ne + "===(" + Ne + "|0)",
                  "invalid vertex count"
                );
              }), Ne;
            });
          } else if (Q)
            if (Ri(Q)) {
              if (Q)
                return $ ? new _n(
                  $.thisDep,
                  $.contextDep,
                  $.propDep,
                  function(xe, pe) {
                    var Ne = pe.def(
                      xe.ELEMENTS,
                      ".vertCount-",
                      xe.OFFSET
                    );
                    return D.optional(function() {
                      xe.assert(
                        pe,
                        Ne + ">=0",
                        "invalid vertex offset/element buffer too small"
                      );
                    }), Ne;
                  }
                ) : Nr(function(xe, pe) {
                  return pe.def(xe.ELEMENTS, ".vertCount");
                });
              var ue = Nr(function() {
                return -1;
              });
              return D.optional(function() {
                ue.MISSING = !0;
              }), ue;
            } else {
              var me = new _n(
                Q.thisDep || $.thisDep,
                Q.contextDep || $.contextDep,
                Q.propDep || $.propDep,
                function(xe, pe) {
                  var Ne = xe.ELEMENTS;
                  return xe.OFFSET ? pe.def(
                    Ne,
                    "?",
                    Ne,
                    ".vertCount-",
                    xe.OFFSET,
                    ":-1"
                  ) : pe.def(Ne, "?", Ne, ".vertCount:-1");
                }
              );
              return D.optional(function() {
                me.DYNAMIC = !0;
              }), me;
            }
          return null;
        }
        return {
          elements: Q,
          primitive: Z(),
          count: Y(),
          instances: ee(Fl, !1),
          offset: $
        };
      }
      function Pr(j, k) {
        var H = j.static, ae = j.dynamic, se = {};
        return Ce.forEach(function(Q) {
          var Z = $e(Q);
          function ee($, Y) {
            if (Q in H) {
              var U = $(H[Q]);
              se[Z] = Nr(function() {
                return U;
              });
            } else if (Q in ae) {
              var ne = ae[Q];
              se[Z] = Cn(ne, function(ue, me) {
                return Y(ue, me, ue.invoke(me, ne));
              });
            }
          }
          switch (Q) {
            case xb:
            case pb:
            case vb:
            case Ab:
            case yb:
            case Tb:
            case _b:
            case Mb:
            case Sb:
            case Eb:
              return ee(
                function($) {
                  return D.commandType($, "boolean", Q, k.commandStr), $;
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      "typeof " + U + '==="boolean"',
                      "invalid flag " + Q,
                      $.commandStr
                    );
                  }), U;
                }
              );
            case mb:
              return ee(
                function($) {
                  return D.commandParameter($, bs, "invalid " + Q, k.commandStr), bs[$];
                },
                function($, Y, U) {
                  var ne = $.constants.compareFuncs;
                  return D.optional(function() {
                    $.assert(
                      Y,
                      U + " in " + ne,
                      "invalid " + Q + ", must be one of " + Object.keys(bs)
                    );
                  }), Y.def(ne, "[", U, "]");
                }
              );
            case bb:
              return ee(
                function($) {
                  return D.command(
                    Cr($) && $.length === 2 && typeof $[0] == "number" && typeof $[1] == "number" && $[0] <= $[1],
                    "depth range is 2d array",
                    k.commandStr
                  ), $;
                },
                function($, Y, U) {
                  D.optional(function() {
                    $.assert(
                      Y,
                      $.shared.isArrayLike + "(" + U + ")&&" + U + ".length===2&&typeof " + U + '[0]==="number"&&typeof ' + U + '[1]==="number"&&' + U + "[0]<=" + U + "[1]",
                      "depth range must be a 2d array"
                    );
                  });
                  var ne = Y.def("+", U, "[0]"), ue = Y.def("+", U, "[1]");
                  return [ne, ue];
                }
              );
            case $v:
              return ee(
                function($) {
                  D.commandType($, "object", "blend.func", k.commandStr);
                  var Y = "srcRGB" in $ ? $.srcRGB : $.src, U = "srcAlpha" in $ ? $.srcAlpha : $.src, ne = "dstRGB" in $ ? $.dstRGB : $.dst, ue = "dstAlpha" in $ ? $.dstAlpha : $.dst;
                  return D.commandParameter(Y, La, Z + ".srcRGB", k.commandStr), D.commandParameter(U, La, Z + ".srcAlpha", k.commandStr), D.commandParameter(ne, La, Z + ".dstRGB", k.commandStr), D.commandParameter(ue, La, Z + ".dstAlpha", k.commandStr), D.command(
                    Gb.indexOf(Y + ", " + ne) === -1,
                    "unallowed blending combination (srcRGB, dstRGB) = (" + Y + ", " + ne + ")",
                    k.commandStr
                  ), [
                    La[Y],
                    La[ne],
                    La[U],
                    La[ue]
                  ];
                },
                function($, Y, U) {
                  var ne = $.constants.blendFuncs;
                  D.optional(function() {
                    $.assert(
                      Y,
                      U + "&&typeof " + U + '==="object"',
                      "invalid blend func, must be an object"
                    );
                  });
                  function ue(ot, gt) {
                    var Tt = Y.def(
                      '"',
                      ot,
                      gt,
                      '" in ',
                      U,
                      "?",
                      U,
                      ".",
                      ot,
                      gt,
                      ":",
                      U,
                      ".",
                      ot
                    );
                    return D.optional(function() {
                      $.assert(
                        Y,
                        Tt + " in " + ne,
                        "invalid " + Q + "." + ot + gt + ", must be one of " + Object.keys(La)
                      );
                    }), Tt;
                  }
                  var me = ue("src", "RGB"), xe = ue("dst", "RGB");
                  D.optional(function() {
                    var ot = $.constants.invalidBlendCombinations;
                    $.assert(
                      Y,
                      ot + ".indexOf(" + me + '+", "+' + xe + ") === -1 ",
                      "unallowed blending combination for (srcRGB, dstRGB)"
                    );
                  });
                  var pe = Y.def(ne, "[", me, "]"), Ne = Y.def(ne, "[", ue("src", "Alpha"), "]"), ft = Y.def(ne, "[", xe, "]"), Nt = Y.def(ne, "[", ue("dst", "Alpha"), "]");
                  return [pe, ft, Ne, Nt];
                }
              );
            case jv:
              return ee(
                function($) {
                  if (typeof $ == "string")
                    return D.commandParameter($, ve, "invalid " + Q, k.commandStr), [
                      ve[$],
                      ve[$]
                    ];
                  if (typeof $ == "object")
                    return D.commandParameter(
                      $.rgb,
                      ve,
                      Q + ".rgb",
                      k.commandStr
                    ), D.commandParameter(
                      $.alpha,
                      ve,
                      Q + ".alpha",
                      k.commandStr
                    ), [
                      ve[$.rgb],
                      ve[$.alpha]
                    ];
                  D.commandRaise("invalid blend.equation", k.commandStr);
                },
                function($, Y, U) {
                  var ne = $.constants.blendEquations, ue = Y.def(), me = Y.def(), xe = $.cond("typeof ", U, '==="string"');
                  return D.optional(function() {
                    function pe(Ne, ft, Nt) {
                      $.assert(
                        Ne,
                        Nt + " in " + ne,
                        "invalid " + ft + ", must be one of " + Object.keys(ve)
                      );
                    }
                    pe(xe.then, Q, U), $.assert(
                      xe.else,
                      U + "&&typeof " + U + '==="object"',
                      "invalid " + Q
                    ), pe(xe.else, Q + ".rgb", U + ".rgb"), pe(xe.else, Q + ".alpha", U + ".alpha");
                  }), xe.then(
                    ue,
                    "=",
                    me,
                    "=",
                    ne,
                    "[",
                    U,
                    "];"
                  ), xe.else(
                    ue,
                    "=",
                    ne,
                    "[",
                    U,
                    ".rgb];",
                    me,
                    "=",
                    ne,
                    "[",
                    U,
                    ".alpha];"
                  ), Y(xe), [ue, me];
                }
              );
            case gb:
              return ee(
                function($) {
                  return D.command(
                    Cr($) && $.length === 4,
                    "blend.color must be a 4d array",
                    k.commandStr
                  ), Xr(4, function(Y) {
                    return +$[Y];
                  });
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      $.shared.isArrayLike + "(" + U + ")&&" + U + ".length===4",
                      "blend.color must be a 4d array"
                    );
                  }), Xr(4, function(ne) {
                    return Y.def("+", U, "[", ne, "]");
                  });
                }
              );
            case Cb:
              return ee(
                function($) {
                  return D.commandType($, "number", Z, k.commandStr), $ | 0;
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      "typeof " + U + '==="number"',
                      "invalid stencil.mask"
                    );
                  }), Y.def(U, "|0");
                }
              );
            case Kv:
              return ee(
                function($) {
                  D.commandType($, "object", Z, k.commandStr);
                  var Y = $.cmp || "keep", U = $.ref || 0, ne = "mask" in $ ? $.mask : -1;
                  return D.commandParameter(Y, bs, Q + ".cmp", k.commandStr), D.commandType(U, "number", Q + ".ref", k.commandStr), D.commandType(ne, "number", Q + ".mask", k.commandStr), [
                    bs[Y],
                    U,
                    ne
                  ];
                },
                function($, Y, U) {
                  var ne = $.constants.compareFuncs;
                  D.optional(function() {
                    function pe() {
                      $.assert(
                        Y,
                        Array.prototype.join.call(arguments, ""),
                        "invalid stencil.func"
                      );
                    }
                    pe(U + "&&typeof ", U, '==="object"'), pe(
                      '!("cmp" in ',
                      U,
                      ")||(",
                      U,
                      ".cmp in ",
                      ne,
                      ")"
                    );
                  });
                  var ue = Y.def(
                    '"cmp" in ',
                    U,
                    "?",
                    ne,
                    "[",
                    U,
                    ".cmp]",
                    ":",
                    Pi
                  ), me = Y.def(U, ".ref|0"), xe = Y.def(
                    '"mask" in ',
                    U,
                    "?",
                    U,
                    ".mask|0:-1"
                  );
                  return [ue, me, xe];
                }
              );
            case qv:
            case Cu:
              return ee(
                function($) {
                  D.commandType($, "object", Z, k.commandStr);
                  var Y = $.fail || "keep", U = $.zfail || "keep", ne = $.zpass || "keep";
                  return D.commandParameter(Y, ki, Q + ".fail", k.commandStr), D.commandParameter(U, ki, Q + ".zfail", k.commandStr), D.commandParameter(ne, ki, Q + ".zpass", k.commandStr), [
                    Q === Cu ? Co : Bu,
                    ki[Y],
                    ki[U],
                    ki[ne]
                  ];
                },
                function($, Y, U) {
                  var ne = $.constants.stencilOps;
                  D.optional(function() {
                    $.assert(
                      Y,
                      U + "&&typeof " + U + '==="object"',
                      "invalid " + Q
                    );
                  });
                  function ue(me) {
                    return D.optional(function() {
                      $.assert(
                        Y,
                        '!("' + me + '" in ' + U + ")||(" + U + "." + me + " in " + ne + ")",
                        "invalid " + Q + "." + me + ", must be one of " + Object.keys(ki)
                      );
                    }), Y.def(
                      '"',
                      me,
                      '" in ',
                      U,
                      "?",
                      ne,
                      "[",
                      U,
                      ".",
                      me,
                      "]:",
                      Pi
                    );
                  }
                  return [
                    Q === Cu ? Co : Bu,
                    ue("fail"),
                    ue("zfail"),
                    ue("zpass")
                  ];
                }
              );
            case Yv:
              return ee(
                function($) {
                  D.commandType($, "object", Z, k.commandStr);
                  var Y = $.factor | 0, U = $.units | 0;
                  return D.commandType(Y, "number", Z + ".factor", k.commandStr), D.commandType(U, "number", Z + ".units", k.commandStr), [Y, U];
                },
                function($, Y, U) {
                  D.optional(function() {
                    $.assert(
                      Y,
                      U + "&&typeof " + U + '==="object"',
                      "invalid " + Q
                    );
                  });
                  var ne = Y.def(U, ".factor|0"), ue = Y.def(U, ".units|0");
                  return [ne, ue];
                }
              );
            case wb:
              return ee(
                function($) {
                  var Y = 0;
                  return $ === "front" ? Y = Bu : $ === "back" && (Y = Co), D.command(!!Y, Z, k.commandStr), Y;
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      U + '==="front"||' + U + '==="back"',
                      "invalid cull.face"
                    );
                  }), Y.def(U, '==="front"?', Bu, ":", Co);
                }
              );
            case Vv:
              return ee(
                function($) {
                  return D.command(
                    typeof $ == "number" && $ >= ce.lineWidthDims[0] && $ <= ce.lineWidthDims[1],
                    "invalid line width, must be a positive number between " + ce.lineWidthDims[0] + " and " + ce.lineWidthDims[1],
                    k.commandStr
                  ), $;
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      "typeof " + U + '==="number"&&' + U + ">=" + ce.lineWidthDims[0] + "&&" + U + "<=" + ce.lineWidthDims[1],
                      "invalid line width"
                    );
                  }), U;
                }
              );
            case Xv:
              return ee(
                function($) {
                  return D.commandParameter($, np, Z, k.commandStr), np[$];
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      U + '==="cw"||' + U + '==="ccw"',
                      "invalid frontFace, must be one of cw,ccw"
                    );
                  }), Y.def(U + '==="cw"?' + Pb + ":" + rp);
                }
              );
            case Wv:
              return ee(
                function($) {
                  return D.command(
                    Cr($) && $.length === 4,
                    "color.mask must be length 4 array",
                    k.commandStr
                  ), $.map(function(Y) {
                    return !!Y;
                  });
                },
                function($, Y, U) {
                  return D.optional(function() {
                    $.assert(
                      Y,
                      $.shared.isArrayLike + "(" + U + ")&&" + U + ".length===4",
                      "invalid color.mask"
                    );
                  }), Xr(4, function(ne) {
                    return "!!" + U + "[" + ne + "]";
                  });
                }
              );
            case Hv:
              return ee(
                function($) {
                  D.command(typeof $ == "object" && $, Z, k.commandStr);
                  var Y = "value" in $ ? $.value : 1, U = !!$.invert;
                  return D.command(
                    typeof Y == "number" && Y >= 0 && Y <= 1,
                    "sample.coverage.value must be a number between 0 and 1",
                    k.commandStr
                  ), [Y, U];
                },
                function($, Y, U) {
                  D.optional(function() {
                    $.assert(
                      Y,
                      U + "&&typeof " + U + '==="object"',
                      "invalid sample.coverage"
                    );
                  });
                  var ne = Y.def(
                    '"value" in ',
                    U,
                    "?+",
                    U,
                    ".value:1"
                  ), ue = Y.def("!!", U, ".invert");
                  return [ne, ue];
                }
              );
          }
        }), se;
      }
      function Vr(j, k) {
        var H = j.static, ae = j.dynamic, se = {};
        return Object.keys(H).forEach(function(Q) {
          var Z = H[Q], ee;
          if (typeof Z == "number" || typeof Z == "boolean")
            ee = Nr(function() {
              return Z;
            });
          else if (typeof Z == "function") {
            var $ = Z._reglType;
            $ === "texture2d" || $ === "textureCube" ? ee = Nr(function(Y) {
              return Y.link(Z);
            }) : $ === "framebuffer" || $ === "framebufferCube" ? (D.command(
              Z.color.length > 0,
              'missing color attachment for framebuffer sent to uniform "' + Q + '"',
              k.commandStr
            ), ee = Nr(function(Y) {
              return Y.link(Z.color[0]);
            })) : D.commandRaise('invalid data for uniform "' + Q + '"', k.commandStr);
          } else
            Cr(Z) ? ee = Nr(function(Y) {
              var U = Y.global.def(
                "[",
                Xr(Z.length, function(ne) {
                  return D.command(
                    typeof Z[ne] == "number" || typeof Z[ne] == "boolean",
                    "invalid uniform " + Q,
                    Y.commandStr
                  ), Z[ne];
                }),
                "]"
              );
              return U;
            }) : D.commandRaise('invalid or missing data for uniform "' + Q + '"', k.commandStr);
          ee.value = Z, se[Q] = ee;
        }), Object.keys(ae).forEach(function(Q) {
          var Z = ae[Q];
          se[Q] = Cn(Z, function(ee, $) {
            return ee.invoke($, Z);
          });
        }), se;
      }
      function zt(j, k) {
        var H = j.static, ae = j.dynamic, se = {};
        return Object.keys(H).forEach(function(Q) {
          var Z = H[Q], ee = G.id(Q), $ = new oe();
          if (Hl(Z))
            $.state = ps, $.buffer = Ee.getBuffer(
              Ee.create(Z, ms, !1, !0)
            ), $.type = 0;
          else {
            var Y = Ee.getBuffer(Z);
            if (Y)
              $.state = ps, $.buffer = Y, $.type = 0;
            else if (D.command(
              typeof Z == "object" && Z,
              "invalid data for attribute " + Q,
              k.commandStr
            ), "constant" in Z) {
              var U = Z.constant;
              $.buffer = "null", $.state = Bv, typeof U == "number" ? $.x = U : (D.command(
                Cr(U) && U.length > 0 && U.length <= 4,
                "invalid constant for attribute " + Q,
                k.commandStr
              ), vs.forEach(function(ft, Nt) {
                Nt < U.length && ($[ft] = U[Nt]);
              }));
            } else {
              Hl(Z.buffer) ? Y = Ee.getBuffer(
                Ee.create(Z.buffer, ms, !1, !0)
              ) : Y = Ee.getBuffer(Z.buffer), D.command(!!Y, 'missing buffer for attribute "' + Q + '"', k.commandStr);
              var ne = Z.offset | 0;
              D.command(
                ne >= 0,
                'invalid offset for attribute "' + Q + '"',
                k.commandStr
              );
              var ue = Z.stride | 0;
              D.command(
                ue >= 0 && ue < 256,
                'invalid stride for attribute "' + Q + '", must be integer betweeen [0, 255]',
                k.commandStr
              );
              var me = Z.size | 0;
              D.command(
                !("size" in Z) || me > 0 && me <= 4,
                'invalid size for attribute "' + Q + '", must be 1,2,3,4',
                k.commandStr
              );
              var xe = !!Z.normalized, pe = 0;
              "type" in Z && (D.commandParameter(
                Z.type,
                mo,
                "invalid type for attribute " + Q,
                k.commandStr
              ), pe = mo[Z.type]);
              var Ne = Z.divisor | 0;
              "divisor" in Z && (D.command(
                Ne === 0 || ke,
                'cannot specify divisor for attribute "' + Q + '", instancing not supported',
                k.commandStr
              ), D.command(
                Ne >= 0,
                'invalid divisor for attribute "' + Q + '"',
                k.commandStr
              )), D.optional(function() {
                var ft = k.commandStr, Nt = [
                  "buffer",
                  "offset",
                  "divisor",
                  "normalized",
                  "type",
                  "size",
                  "stride"
                ];
                Object.keys(Z).forEach(function(ot) {
                  D.command(
                    Nt.indexOf(ot) >= 0,
                    'unknown parameter "' + ot + '" for attribute pointer "' + Q + '" (valid parameters are ' + Nt + ")",
                    ft
                  );
                });
              }), $.buffer = Y, $.state = ps, $.size = me, $.normalized = xe, $.type = pe || Y.dtype, $.offset = ne, $.stride = ue, $.divisor = Ne;
            }
          }
          se[Q] = Nr(function(ft, Nt) {
            var ot = ft.attribCache;
            if (ee in ot)
              return ot[ee];
            var gt = {
              isStream: !1
            };
            return Object.keys($).forEach(function(Tt) {
              gt[Tt] = $[Tt];
            }), $.buffer && (gt.buffer = ft.link($.buffer), gt.type = gt.type || gt.buffer + ".dtype"), ot[ee] = gt, gt;
          });
        }), Object.keys(ae).forEach(function(Q) {
          var Z = ae[Q];
          function ee($, Y) {
            var U = $.invoke(Y, Z), ne = $.shared, ue = $.constants, me = ne.isBufferArgs, xe = ne.buffer;
            D.optional(function() {
              $.assert(
                Y,
                U + "&&(typeof " + U + '==="object"||typeof ' + U + '==="function")&&(' + me + "(" + U + ")||" + xe + ".getBuffer(" + U + ")||" + xe + ".getBuffer(" + U + ".buffer)||" + me + "(" + U + '.buffer)||("constant" in ' + U + "&&(typeof " + U + '.constant==="number"||' + ne.isArrayLike + "(" + U + ".constant))))",
                'invalid dynamic attribute "' + Q + '"'
              );
            });
            var pe = {
              isStream: Y.def(!1)
            }, Ne = new oe();
            Ne.state = ps, Object.keys(Ne).forEach(function(gt) {
              pe[gt] = Y.def("" + Ne[gt]);
            });
            var ft = pe.buffer, Nt = pe.type;
            Y(
              "if(",
              me,
              "(",
              U,
              ")){",
              pe.isStream,
              "=true;",
              ft,
              "=",
              xe,
              ".createStream(",
              ms,
              ",",
              U,
              ");",
              Nt,
              "=",
              ft,
              ".dtype;",
              "}else{",
              ft,
              "=",
              xe,
              ".getBuffer(",
              U,
              ");",
              "if(",
              ft,
              "){",
              Nt,
              "=",
              ft,
              ".dtype;",
              '}else if("constant" in ',
              U,
              "){",
              pe.state,
              "=",
              Bv,
              ";",
              "if(typeof " + U + '.constant === "number"){',
              pe[vs[0]],
              "=",
              U,
              ".constant;",
              vs.slice(1).map(function(gt) {
                return pe[gt];
              }).join("="),
              "=0;",
              "}else{",
              vs.map(function(gt, Tt) {
                return pe[gt] + "=" + U + ".constant.length>" + Tt + "?" + U + ".constant[" + Tt + "]:0;";
              }).join(""),
              "}}else{",
              "if(",
              me,
              "(",
              U,
              ".buffer)){",
              ft,
              "=",
              xe,
              ".createStream(",
              ms,
              ",",
              U,
              ".buffer);",
              "}else{",
              ft,
              "=",
              xe,
              ".getBuffer(",
              U,
              ".buffer);",
              "}",
              Nt,
              '="type" in ',
              U,
              "?",
              ue.glTypes,
              "[",
              U,
              ".type]:",
              ft,
              ".dtype;",
              pe.normalized,
              "=!!",
              U,
              ".normalized;"
            );
            function ot(gt) {
              Y(pe[gt], "=", U, ".", gt, "|0;");
            }
            return ot("size"), ot("offset"), ot("stride"), ot("divisor"), Y("}}"), Y.exit(
              "if(",
              pe.isStream,
              "){",
              xe,
              ".destroyStream(",
              ft,
              ");",
              "}"
            ), pe;
          }
          se[Q] = Cn(Z, ee);
        }), se;
      }
      function zr(j, k) {
        var H = j.static, ae = j.dynamic;
        if (Du in H) {
          var se = H[Du];
          return se !== null && Re.getVAO(se) === null && (se = Re.createVAO(se)), Nr(function(Z) {
            return Z.link(Re.getVAO(se));
          });
        } else if (Du in ae) {
          var Q = ae[Du];
          return Cn(Q, function(Z, ee) {
            var $ = Z.invoke(ee, Q);
            return ee.def(Z.shared.vao + ".getVAO(" + $ + ")");
          });
        }
        return null;
      }
      function gr(j) {
        var k = j.static, H = j.dynamic, ae = {};
        return Object.keys(k).forEach(function(se) {
          var Q = k[se];
          ae[se] = Nr(function(Z, ee) {
            return typeof Q == "number" || typeof Q == "boolean" ? "" + Q : Z.link(Q);
          });
        }), Object.keys(H).forEach(function(se) {
          var Q = H[se];
          ae[se] = Cn(Q, function(Z, ee) {
            return Z.invoke(ee, Q);
          });
        }), ae;
      }
      function kr(j, k, H, ae, se) {
        var Q = j.static, Z = j.dynamic;
        D.optional(function() {
          var ot = [
            _o,
            Iu,
            Ou,
            Mo,
            So,
            Bl,
            Ao,
            Fl,
            Tu,
            Du
          ].concat(Ce);
          function gt(Tt) {
            Object.keys(Tt).forEach(function(er) {
              D.command(
                ot.indexOf(er) >= 0,
                'unknown parameter "' + er + '"',
                se.commandStr
              );
            });
          }
          gt(Q), gt(Z);
        });
        var ee = Ct(j, k), $ = it(j), Y = Bt(j, $, se), U = Jt(j, se), ne = Pr(j, se), ue = kt(j, se, ee);
        function me(ot) {
          var gt = Y[ot];
          gt && (ne[ot] = gt);
        }
        me(ci), me($e(Rl));
        var xe = Object.keys(ne).length > 0, pe = {
          framebuffer: $,
          draw: U,
          shader: ue,
          state: ne,
          dirty: xe,
          scopeVAO: null,
          drawVAO: null,
          useVAO: !1,
          attributes: {}
        };
        if (pe.profile = Dt(j), pe.uniforms = Vr(H, se), pe.drawVAO = pe.scopeVAO = zr(j), !pe.drawVAO && ue.program && !ee && X.angle_instanced_arrays) {
          var Ne = !0, ft = ue.program.attributes.map(function(ot) {
            var gt = k.static[ot];
            return Ne = Ne && !!gt, gt;
          });
          if (Ne && ft.length > 0) {
            var Nt = Re.getVAO(Re.createVAO(ft));
            pe.drawVAO = new _n(null, null, null, function(ot, gt) {
              return ot.link(Nt);
            }), pe.useVAO = !0;
          }
        }
        return ee ? pe.useVAO = !0 : pe.attributes = zt(k, se), pe.context = gr(ae), pe;
      }
      function Ur(j, k, H) {
        var ae = j.shared, se = ae.context, Q = j.scope();
        Object.keys(H).forEach(function(Z) {
          k.save(se, "." + Z);
          var ee = H[Z], $ = ee.append(j, k);
          Array.isArray($) ? Q(se, ".", Z, "=[", $.join(), "];") : Q(se, ".", Z, "=", $, ";");
        }), k(Q);
      }
      function jr(j, k, H, ae) {
        var se = j.shared, Q = se.gl, Z = se.framebuffer, ee;
        qe && (ee = k.def(se.extensions, ".webgl_draw_buffers"));
        var $ = j.constants, Y = $.drawBuffer, U = $.backBuffer, ne;
        H ? ne = H.append(j, k) : ne = k.def(Z, ".next"), ae || k("if(", ne, "!==", Z, ".cur){"), k(
          "if(",
          ne,
          "){",
          Q,
          ".bindFramebuffer(",
          Fb,
          ",",
          ne,
          ".framebuffer);"
        ), qe && k(
          ee,
          ".drawBuffersWEBGL(",
          Y,
          "[",
          ne,
          ".colorAttachments.length]);"
        ), k(
          "}else{",
          Q,
          ".bindFramebuffer(",
          Fb,
          ",null);"
        ), qe && k(ee, ".drawBuffersWEBGL(", U, ");"), k(
          "}",
          Z,
          ".cur=",
          ne,
          ";"
        ), ae || k("}");
      }
      function Zr(j, k, H) {
        var ae = j.shared, se = ae.gl, Q = j.current, Z = j.next, ee = ae.current, $ = ae.next, Y = j.cond(ee, ".dirty");
        Ce.forEach(function(U) {
          var ne = $e(U);
          if (!(ne in H.state)) {
            var ue, me;
            if (ne in Z) {
              ue = Z[ne], me = Q[ne];
              var xe = Xr(Me[ne].length, function(Ne) {
                return Y.def(ue, "[", Ne, "]");
              });
              Y(j.cond(xe.map(function(Ne, ft) {
                return Ne + "!==" + me + "[" + ft + "]";
              }).join("||")).then(
                se,
                ".",
                Ae[ne],
                "(",
                xe,
                ");",
                xe.map(function(Ne, ft) {
                  return me + "[" + ft + "]=" + Ne;
                }).join(";"),
                ";"
              ));
            } else {
              ue = Y.def($, ".", ne);
              var pe = j.cond(ue, "!==", ee, ".", ne);
              Y(pe), ne in je ? pe(
                j.cond(ue).then(se, ".enable(", je[ne], ");").else(se, ".disable(", je[ne], ");"),
                ee,
                ".",
                ne,
                "=",
                ue,
                ";"
              ) : pe(
                se,
                ".",
                Ae[ne],
                "(",
                ue,
                ");",
                ee,
                ".",
                ne,
                "=",
                ue,
                ";"
              );
            }
          }
        }), Object.keys(H.state).length === 0 && Y(ee, ".dirty=false;"), k(Y);
      }
      function sn(j, k, H, ae) {
        var se = j.shared, Q = j.current, Z = se.current, ee = se.gl;
        Ub(Object.keys(H)).forEach(function($) {
          var Y = H[$];
          if (!(ae && !ae(Y))) {
            var U = Y.append(j, k);
            if (je[$]) {
              var ne = je[$];
              Ri(Y) ? U ? k(ee, ".enable(", ne, ");") : k(ee, ".disable(", ne, ");") : k(j.cond(U).then(ee, ".enable(", ne, ");").else(ee, ".disable(", ne, ");")), k(Z, ".", $, "=", U, ";");
            } else if (Cr(U)) {
              var ue = Q[$];
              k(
                ee,
                ".",
                Ae[$],
                "(",
                U,
                ");",
                U.map(function(me, xe) {
                  return ue + "[" + xe + "]=" + me;
                }).join(";"),
                ";"
              );
            } else
              k(
                ee,
                ".",
                Ae[$],
                "(",
                U,
                ");",
                Z,
                ".",
                $,
                "=",
                U,
                ";"
              );
          }
        });
      }
      function Tr(j, k) {
        ke && (j.instancing = k.def(
          j.shared.extensions,
          ".angle_instanced_arrays"
        ));
      }
      function Lt(j, k, H, ae, se) {
        var Q = j.shared, Z = j.stats, ee = Q.current, $ = Q.timer, Y = H.profile;
        function U() {
          return typeof performance > "u" ? "Date.now()" : "performance.now()";
        }
        var ne, ue;
        function me(ot) {
          ne = k.def(), ot(ne, "=", U(), ";"), typeof se == "string" ? ot(Z, ".count+=", se, ";") : ot(Z, ".count++;"), Ie && (ae ? (ue = k.def(), ot(ue, "=", $, ".getNumPendingQueries();")) : ot($, ".beginQuery(", Z, ");"));
        }
        function xe(ot) {
          ot(Z, ".cpuTime+=", U(), "-", ne, ";"), Ie && (ae ? ot(
            $,
            ".pushScopeStats(",
            ue,
            ",",
            $,
            ".getNumPendingQueries(),",
            Z,
            ");"
          ) : ot($, ".endQuery();"));
        }
        function pe(ot) {
          var gt = k.def(ee, ".profile");
          k(ee, ".profile=", ot, ";"), k.exit(ee, ".profile=", gt, ";");
        }
        var Ne;
        if (Y) {
          if (Ri(Y)) {
            Y.enable ? (me(k), xe(k.exit), pe("true")) : pe("false");
            return;
          }
          Ne = Y.append(j, k), pe(Ne);
        } else
          Ne = k.def(ee, ".profile");
        var ft = j.block();
        me(ft), k("if(", Ne, "){", ft, "}");
        var Nt = j.block();
        xe(Nt), k.exit("if(", Ne, "){", Nt, "}");
      }
      function un(j, k, H, ae, se) {
        var Q = j.shared;
        function Z($) {
          switch ($) {
            case Gl:
            case jl:
            case Xl:
              return 2;
            case zl:
            case $l:
            case Vl:
              return 3;
            case Ul:
            case Wl:
            case Yl:
              return 4;
            default:
              return 1;
          }
        }
        function ee($, Y, U) {
          var ne = Q.gl, ue = k.def($, ".location"), me = k.def(Q.attributes, "[", ue, "]"), xe = U.state, pe = U.buffer, Ne = [
            U.x,
            U.y,
            U.z,
            U.w
          ], ft = [
            "buffer",
            "normalized",
            "offset",
            "stride"
          ];
          function Nt() {
            k(
              "if(!",
              me,
              ".buffer){",
              ne,
              ".enableVertexAttribArray(",
              ue,
              ");}"
            );
            var gt = U.type, Tt;
            if (U.size ? Tt = k.def(U.size, "||", Y) : Tt = Y, k(
              "if(",
              me,
              ".type!==",
              gt,
              "||",
              me,
              ".size!==",
              Tt,
              "||",
              ft.map(function(wr) {
                return me + "." + wr + "!==" + U[wr];
              }).join("||"),
              "){",
              ne,
              ".bindBuffer(",
              ms,
              ",",
              pe,
              ".buffer);",
              ne,
              ".vertexAttribPointer(",
              [
                ue,
                Tt,
                gt,
                U.normalized,
                U.stride,
                U.offset
              ],
              ");",
              me,
              ".type=",
              gt,
              ";",
              me,
              ".size=",
              Tt,
              ";",
              ft.map(function(wr) {
                return me + "." + wr + "=" + U[wr] + ";";
              }).join(""),
              "}"
            ), ke) {
              var er = U.divisor;
              k(
                "if(",
                me,
                ".divisor!==",
                er,
                "){",
                j.instancing,
                ".vertexAttribDivisorANGLE(",
                [ue, er],
                ");",
                me,
                ".divisor=",
                er,
                ";}"
              );
            }
          }
          function ot() {
            k(
              "if(",
              me,
              ".buffer){",
              ne,
              ".disableVertexAttribArray(",
              ue,
              ");",
              me,
              ".buffer=null;",
              "}if(",
              vs.map(function(gt, Tt) {
                return me + "." + gt + "!==" + Ne[Tt];
              }).join("||"),
              "){",
              ne,
              ".vertexAttrib4f(",
              ue,
              ",",
              Ne,
              ");",
              vs.map(function(gt, Tt) {
                return me + "." + gt + "=" + Ne[Tt] + ";";
              }).join(""),
              "}"
            );
          }
          xe === ps ? Nt() : xe === Bv ? ot() : (k("if(", xe, "===", ps, "){"), Nt(), k("}else{"), ot(), k("}"));
        }
        ae.forEach(function($) {
          var Y = $.name, U = H.attributes[Y], ne;
          if (U) {
            if (!se(U))
              return;
            ne = U.append(j, k);
          } else {
            if (!se(jb))
              return;
            var ue = j.scopeAttrib(Y);
            D.optional(function() {
              j.assert(
                k,
                ue + ".state",
                "missing attribute " + Y
              );
            }), ne = {}, Object.keys(new oe()).forEach(function(me) {
              ne[me] = k.def(ue, ".", me);
            });
          }
          ee(
            j.link($),
            Z($.info.type),
            ne
          );
        });
      }
      function ur(j, k, H, ae, se) {
        for (var Q = j.shared, Z = Q.gl, ee, $ = 0; $ < ae.length; ++$) {
          var Y = ae[$], U = Y.name, ne = Y.info.type, ue = H.uniforms[U], me = j.link(Y), xe = me + ".location", pe;
          if (ue) {
            if (!se(ue))
              continue;
            if (Ri(ue)) {
              var Ne = ue.value;
              if (D.command(
                Ne !== null && typeof Ne < "u",
                'missing uniform "' + U + '"',
                j.commandStr
              ), ne === ku || ne === Ru) {
                D.command(
                  typeof Ne == "function" && (ne === ku && (Ne._reglType === "texture2d" || Ne._reglType === "framebuffer") || ne === Ru && (Ne._reglType === "textureCube" || Ne._reglType === "framebufferCube")),
                  "invalid texture for uniform " + U,
                  j.commandStr
                );
                var ft = j.link(Ne._texture || Ne.color[0]._texture);
                k(Z, ".uniform1i(", xe, ",", ft + ".bind());"), k.exit(ft, ".unbind();");
              } else if (ne === Lu || ne === Nu || ne === Pu) {
                D.optional(function() {
                  D.command(
                    Cr(Ne),
                    "invalid matrix for uniform " + U,
                    j.commandStr
                  ), D.command(
                    ne === Lu && Ne.length === 4 || ne === Nu && Ne.length === 9 || ne === Pu && Ne.length === 16,
                    "invalid length for matrix uniform " + U,
                    j.commandStr
                  );
                });
                var Nt = j.global.def("new Float32Array([" + Array.prototype.slice.call(Ne) + "])"), ot = 2;
                ne === Nu ? ot = 3 : ne === Pu && (ot = 4), k(
                  Z,
                  ".uniformMatrix",
                  ot,
                  "fv(",
                  xe,
                  ",false,",
                  Nt,
                  ");"
                );
              } else {
                switch (ne) {
                  case Jv:
                    D.commandType(Ne, "number", "uniform " + U, j.commandStr), ee = "1f";
                    break;
                  case Gl:
                    D.command(
                      Cr(Ne) && Ne.length === 2,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "2f";
                    break;
                  case zl:
                    D.command(
                      Cr(Ne) && Ne.length === 3,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "3f";
                    break;
                  case Ul:
                    D.command(
                      Cr(Ne) && Ne.length === 4,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "4f";
                    break;
                  case tp:
                    D.commandType(Ne, "boolean", "uniform " + U, j.commandStr), ee = "1i";
                    break;
                  case ep:
                    D.commandType(Ne, "number", "uniform " + U, j.commandStr), ee = "1i";
                    break;
                  case Xl:
                    D.command(
                      Cr(Ne) && Ne.length === 2,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "2i";
                    break;
                  case jl:
                    D.command(
                      Cr(Ne) && Ne.length === 2,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "2i";
                    break;
                  case Vl:
                    D.command(
                      Cr(Ne) && Ne.length === 3,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "3i";
                    break;
                  case $l:
                    D.command(
                      Cr(Ne) && Ne.length === 3,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "3i";
                    break;
                  case Yl:
                    D.command(
                      Cr(Ne) && Ne.length === 4,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "4i";
                    break;
                  case Wl:
                    D.command(
                      Cr(Ne) && Ne.length === 4,
                      "uniform " + U,
                      j.commandStr
                    ), ee = "4i";
                    break;
                }
                k(
                  Z,
                  ".uniform",
                  ee,
                  "(",
                  xe,
                  ",",
                  Cr(Ne) ? Array.prototype.slice.call(Ne) : Ne,
                  ");"
                );
              }
              continue;
            } else
              pe = ue.append(j, k);
          } else {
            if (!se(jb))
              continue;
            pe = k.def(Q.uniforms, "[", G.id(U), "]");
          }
          ne === ku ? (D(!Array.isArray(pe), "must specify a scalar prop for textures"), k(
            "if(",
            pe,
            "&&",
            pe,
            '._reglType==="framebuffer"){',
            pe,
            "=",
            pe,
            ".color[0];",
            "}"
          )) : ne === Ru && (D(!Array.isArray(pe), "must specify a scalar prop for cube maps"), k(
            "if(",
            pe,
            "&&",
            pe,
            '._reglType==="framebufferCube"){',
            pe,
            "=",
            pe,
            ".color[0];",
            "}"
          )), D.optional(function() {
            function Mn(da, Kb) {
              j.assert(
                k,
                da,
                'bad data or missing for uniform "' + U + '".  ' + Kb
              );
            }
            function ap(da) {
              D(!Array.isArray(pe), "must not specify an array type for uniform"), Mn(
                "typeof " + pe + '==="' + da + '"',
                "invalid type, expected " + da
              );
            }
            function Qn(da, Kb) {
              Array.isArray(pe) ? D(pe.length === da, "must have length " + da) : Mn(
                Q.isArrayLike + "(" + pe + ")&&" + pe + ".length===" + da,
                "invalid vector, should have length " + da,
                j.commandStr
              );
            }
            function Hb(da) {
              D(!Array.isArray(pe), "must not specify a value type"), Mn(
                "typeof " + pe + '==="function"&&' + pe + '._reglType==="texture' + (da === Lb ? "2d" : "Cube") + '"',
                "invalid texture type",
                j.commandStr
              );
            }
            switch (ne) {
              case ep:
                ap("number");
                break;
              case jl:
                Qn(2);
                break;
              case $l:
                Qn(3);
                break;
              case Wl:
                Qn(4);
                break;
              case Jv:
                ap("number");
                break;
              case Gl:
                Qn(2);
                break;
              case zl:
                Qn(3);
                break;
              case Ul:
                Qn(4);
                break;
              case tp:
                ap("boolean");
                break;
              case Xl:
                Qn(2);
                break;
              case Vl:
                Qn(3);
                break;
              case Yl:
                Qn(4);
                break;
              case Lu:
                Qn(4);
                break;
              case Nu:
                Qn(9);
                break;
              case Pu:
                Qn(16);
                break;
              case ku:
                Hb(Lb);
                break;
              case Ru:
                Hb(iP);
                break;
            }
          });
          var gt = 1;
          switch (ne) {
            case ku:
            case Ru:
              var Tt = k.def(pe, "._texture");
              k(Z, ".uniform1i(", xe, ",", Tt, ".bind());"), k.exit(Tt, ".unbind();");
              continue;
            case ep:
            case tp:
              ee = "1i";
              break;
            case jl:
            case Xl:
              ee = "2i", gt = 2;
              break;
            case $l:
            case Vl:
              ee = "3i", gt = 3;
              break;
            case Wl:
            case Yl:
              ee = "4i", gt = 4;
              break;
            case Jv:
              ee = "1f";
              break;
            case Gl:
              ee = "2f", gt = 2;
              break;
            case zl:
              ee = "3f", gt = 3;
              break;
            case Ul:
              ee = "4f", gt = 4;
              break;
            case Lu:
              ee = "Matrix2fv";
              break;
            case Nu:
              ee = "Matrix3fv";
              break;
            case Pu:
              ee = "Matrix4fv";
              break;
          }
          if (k(Z, ".uniform", ee, "(", xe, ","), ee.charAt(0) === "M") {
            var er = Math.pow(ne - Lu + 2, 2), wr = j.global.def("new Float32Array(", er, ")");
            Array.isArray(pe) ? k(
              "false,(",
              Xr(er, function(Mn) {
                return wr + "[" + Mn + "]=" + pe[Mn];
              }),
              ",",
              wr,
              ")"
            ) : k(
              "false,(Array.isArray(",
              pe,
              ")||",
              pe,
              " instanceof Float32Array)?",
              pe,
              ":(",
              Xr(er, function(Mn) {
                return wr + "[" + Mn + "]=" + pe + "[" + Mn + "]";
              }),
              ",",
              wr,
              ")"
            );
          } else
            gt > 1 ? k(Xr(gt, function(Mn) {
              return Array.isArray(pe) ? pe[Mn] : pe + "[" + Mn + "]";
            })) : (D(!Array.isArray(pe), "uniform value must not be an array"), k(pe));
          k(");");
        }
      }
      function pt(j, k, H, ae) {
        var se = j.shared, Q = se.gl, Z = se.draw, ee = ae.draw;
        function $() {
          var Tt = ee.elements, er, wr = k;
          return Tt ? ((Tt.contextDep && ae.contextDynamic || Tt.propDep) && (wr = H), er = Tt.append(j, wr)) : er = wr.def(Z, ".", Mo), er && wr(
            "if(" + er + ")" + Q + ".bindBuffer(" + rP + "," + er + ".buffer.buffer);"
          ), er;
        }
        function Y() {
          var Tt = ee.count, er, wr = k;
          return Tt ? ((Tt.contextDep && ae.contextDynamic || Tt.propDep) && (wr = H), er = Tt.append(j, wr), D.optional(function() {
            Tt.MISSING && j.assert(k, "false", "missing vertex count"), Tt.DYNAMIC && j.assert(wr, er + ">=0", "missing vertex count");
          })) : (er = wr.def(Z, ".", Ao), D.optional(function() {
            j.assert(wr, er + ">=0", "missing vertex count");
          })), er;
        }
        var U = $();
        function ne(Tt) {
          var er = ee[Tt];
          return er ? er.contextDep && ae.contextDynamic || er.propDep ? er.append(j, H) : er.append(j, k) : k.def(Z, ".", Tt);
        }
        var ue = ne(So), me = ne(Bl), xe = Y();
        if (typeof xe == "number") {
          if (xe === 0)
            return;
        } else
          H("if(", xe, "){"), H.exit("}");
        var pe, Ne;
        ke && (pe = ne(Fl), Ne = j.instancing);
        var ft = U + ".type", Nt = ee.elements && Ri(ee.elements);
        function ot() {
          function Tt() {
            H(Ne, ".drawElementsInstancedANGLE(", [
              ue,
              xe,
              ft,
              me + "<<((" + ft + "-" + cb + ")>>1)",
              pe
            ], ");");
          }
          function er() {
            H(
              Ne,
              ".drawArraysInstancedANGLE(",
              [ue, me, xe, pe],
              ");"
            );
          }
          U ? Nt ? Tt() : (H("if(", U, "){"), Tt(), H("}else{"), er(), H("}")) : er();
        }
        function gt() {
          function Tt() {
            H(Q + ".drawElements(" + [
              ue,
              xe,
              ft,
              me + "<<((" + ft + "-" + cb + ")>>1)"
            ] + ");");
          }
          function er() {
            H(Q + ".drawArrays(" + [ue, me, xe] + ");");
          }
          U ? Nt ? Tt() : (H("if(", U, "){"), Tt(), H("}else{"), er(), H("}")) : er();
        }
        ke && (typeof pe != "number" || pe >= 0) ? typeof pe == "string" ? (H("if(", pe, ">0){"), ot(), H("}else if(", pe, "<0){"), gt(), H("}")) : ot() : gt();
      }
      function Gt(j, k, H, ae, se) {
        var Q = wt(), Z = Q.proc("body", se);
        return D.optional(function() {
          Q.commandStr = k.commandStr, Q.command = Q.link(k.commandStr);
        }), ke && (Q.instancing = Z.def(
          Q.shared.extensions,
          ".angle_instanced_arrays"
        )), j(Q, Z, H, ae), Q.compile().body;
      }
      function Vt(j, k, H, ae) {
        Tr(j, k), H.useVAO ? H.drawVAO ? k(j.shared.vao, ".setVAO(", H.drawVAO.append(j, k), ");") : k(j.shared.vao, ".setVAO(", j.shared.vao, ".targetVAO);") : (k(j.shared.vao, ".setVAO(null);"), un(j, k, H, ae.attributes, function() {
          return !0;
        })), ur(j, k, H, ae.uniforms, function() {
          return !0;
        }), pt(j, k, k, H);
      }
      function Ir(j, k) {
        var H = j.proc("draw", 1);
        Tr(j, H), Ur(j, H, k.context), jr(j, H, k.framebuffer), Zr(j, H, k), sn(j, H, k.state), Lt(j, H, k, !1, !0);
        var ae = k.shader.progVar.append(j, H);
        if (H(j.shared.gl, ".useProgram(", ae, ".program);"), k.shader.program)
          Vt(j, H, k, k.shader.program);
        else {
          H(j.shared.vao, ".setVAO(null);");
          var se = j.global.def("{}"), Q = H.def(ae, ".id"), Z = H.def(se, "[", Q, "]");
          H(
            j.cond(Z).then(Z, ".call(this,a0);").else(
              Z,
              "=",
              se,
              "[",
              Q,
              "]=",
              j.link(function(ee) {
                return Gt(Vt, j, k, ee, 1);
              }),
              "(",
              ae,
              ");",
              Z,
              ".call(this,a0);"
            )
          );
        }
        Object.keys(k.state).length > 0 && H(j.shared.current, ".dirty=true;");
      }
      function Na(j, k, H, ae) {
        j.batchId = "a1", Tr(j, k);
        function se() {
          return !0;
        }
        un(j, k, H, ae.attributes, se), ur(j, k, H, ae.uniforms, se), pt(j, k, k, H);
      }
      function To(j, k, H, ae) {
        Tr(j, k);
        var se = H.contextDep, Q = k.def(), Z = "a0", ee = "a1", $ = k.def();
        j.shared.props = $, j.batchId = Q;
        var Y = j.scope(), U = j.scope();
        k(
          Y.entry,
          "for(",
          Q,
          "=0;",
          Q,
          "<",
          ee,
          ";++",
          Q,
          "){",
          $,
          "=",
          Z,
          "[",
          Q,
          "];",
          U,
          "}",
          Y.exit
        );
        function ne(ft) {
          return ft.contextDep && se || ft.propDep;
        }
        function ue(ft) {
          return !ne(ft);
        }
        if (H.needsContext && Ur(j, U, H.context), H.needsFramebuffer && jr(j, U, H.framebuffer), sn(j, U, H.state, ne), H.profile && ne(H.profile) && Lt(j, U, H, !1, !0), ae)
          H.useVAO ? H.drawVAO ? ne(H.drawVAO) ? U(j.shared.vao, ".setVAO(", H.drawVAO.append(j, U), ");") : Y(j.shared.vao, ".setVAO(", H.drawVAO.append(j, Y), ");") : Y(j.shared.vao, ".setVAO(", j.shared.vao, ".targetVAO);") : (Y(j.shared.vao, ".setVAO(null);"), un(j, Y, H, ae.attributes, ue), un(j, U, H, ae.attributes, ne)), ur(j, Y, H, ae.uniforms, ue), ur(j, U, H, ae.uniforms, ne), pt(j, Y, U, H);
        else {
          var me = j.global.def("{}"), xe = H.shader.progVar.append(j, U), pe = U.def(xe, ".id"), Ne = U.def(me, "[", pe, "]");
          U(
            j.shared.gl,
            ".useProgram(",
            xe,
            ".program);",
            "if(!",
            Ne,
            "){",
            Ne,
            "=",
            me,
            "[",
            pe,
            "]=",
            j.link(function(ft) {
              return Gt(
                Na,
                j,
                H,
                ft,
                2
              );
            }),
            "(",
            xe,
            ");}",
            Ne,
            ".call(this,a0[",
            Q,
            "],",
            Q,
            ");"
          );
        }
      }
      function W(j, k) {
        var H = j.proc("batch", 2);
        j.batchId = "0", Tr(j, H);
        var ae = !1, se = !0;
        Object.keys(k.context).forEach(function(me) {
          ae = ae || k.context[me].propDep;
        }), ae || (Ur(j, H, k.context), se = !1);
        var Q = k.framebuffer, Z = !1;
        Q ? (Q.propDep ? ae = Z = !0 : Q.contextDep && ae && (Z = !0), Z || jr(j, H, Q)) : jr(j, H, null), k.state.viewport && k.state.viewport.propDep && (ae = !0);
        function ee(me) {
          return me.contextDep && ae || me.propDep;
        }
        Zr(j, H, k), sn(j, H, k.state, function(me) {
          return !ee(me);
        }), (!k.profile || !ee(k.profile)) && Lt(j, H, k, !1, "a1"), k.contextDep = ae, k.needsContext = se, k.needsFramebuffer = Z;
        var $ = k.shader.progVar;
        if ($.contextDep && ae || $.propDep)
          To(
            j,
            H,
            k,
            null
          );
        else {
          var Y = $.append(j, H);
          if (H(j.shared.gl, ".useProgram(", Y, ".program);"), k.shader.program)
            To(
              j,
              H,
              k,
              k.shader.program
            );
          else {
            H(j.shared.vao, ".setVAO(null);");
            var U = j.global.def("{}"), ne = H.def(Y, ".id"), ue = H.def(U, "[", ne, "]");
            H(
              j.cond(ue).then(ue, ".call(this,a0,a1);").else(
                ue,
                "=",
                U,
                "[",
                ne,
                "]=",
                j.link(function(me) {
                  return Gt(To, j, k, me, 2);
                }),
                "(",
                Y,
                ");",
                ue,
                ".call(this,a0,a1);"
              )
            );
          }
        }
        Object.keys(k.state).length > 0 && H(j.shared.current, ".dirty=true;");
      }
      function he(j, k) {
        var H = j.proc("scope", 3);
        j.batchId = "a2";
        var ae = j.shared, se = ae.current;
        Ur(j, H, k.context), k.framebuffer && k.framebuffer.append(j, H), Ub(Object.keys(k.state)).forEach(function(Z) {
          var ee = k.state[Z], $ = ee.append(j, H);
          Cr($) ? $.forEach(function(Y, U) {
            H.set(j.next[Z], "[" + U + "]", Y);
          }) : H.set(ae.next, "." + Z, $);
        }), Lt(j, H, k, !0, !0), [Mo, Bl, Ao, Fl, So].forEach(
          function(Z) {
            var ee = k.draw[Z];
            ee && H.set(ae.draw, "." + Z, "" + ee.append(j, H));
          }
        ), Object.keys(k.uniforms).forEach(function(Z) {
          var ee = k.uniforms[Z].append(j, H);
          Array.isArray(ee) && (ee = "[" + ee.join() + "]"), H.set(
            ae.uniforms,
            "[" + G.id(Z) + "]",
            ee
          );
        }), Object.keys(k.attributes).forEach(function(Z) {
          var ee = k.attributes[Z].append(j, H), $ = j.scopeAttrib(Z);
          Object.keys(new oe()).forEach(function(Y) {
            H.set($, "." + Y, ee[Y]);
          });
        }), k.scopeVAO && H.set(ae.vao, ".targetVAO", k.scopeVAO.append(j, H));
        function Q(Z) {
          var ee = k.shader[Z];
          ee && H.set(ae.shader, "." + Z, ee.append(j, H));
        }
        Q(Iu), Q(Ou), Object.keys(k.state).length > 0 && (H(se, ".dirty=true;"), H.exit(se, ".dirty=true;")), H("a1(", j.shared.context, ",a0,", j.batchId, ");");
      }
      function fe(j) {
        if (!(typeof j != "object" || Cr(j))) {
          for (var k = Object.keys(j), H = 0; H < k.length; ++H)
            if (fr.isDynamic(j[k[H]]))
              return !0;
          return !1;
        }
      }
      function nt(j, k, H) {
        var ae = k.static[H];
        if (!ae || !fe(ae))
          return;
        var se = j.global, Q = Object.keys(ae), Z = !1, ee = !1, $ = !1, Y = j.global.def("{}");
        Q.forEach(function(ne) {
          var ue = ae[ne];
          if (fr.isDynamic(ue)) {
            typeof ue == "function" && (ue = ae[ne] = fr.unbox(ue));
            var me = Cn(ue, null);
            Z = Z || me.thisDep, $ = $ || me.propDep, ee = ee || me.contextDep;
          } else {
            switch (se(Y, ".", ne, "="), typeof ue) {
              case "number":
                se(ue);
                break;
              case "string":
                se('"', ue, '"');
                break;
              case "object":
                Array.isArray(ue) && se("[", ue.join(), "]");
                break;
              default:
                se(j.link(ue));
                break;
            }
            se(";");
          }
        });
        function U(ne, ue) {
          Q.forEach(function(me) {
            var xe = ae[me];
            if (fr.isDynamic(xe)) {
              var pe = ne.invoke(ue, xe);
              ue(Y, ".", me, "=", pe, ";");
            }
          });
        }
        k.dynamic[H] = new fr.DynamicVariable(kl, {
          thisDep: Z,
          contextDep: ee,
          propDep: $,
          ref: Y,
          append: U
        }), delete k.static[H];
      }
      function Ft(j, k, H, ae, se) {
        var Q = wt();
        Q.stats = Q.link(se), Object.keys(k.static).forEach(function(ee) {
          nt(Q, k, ee);
        }), tP.forEach(function(ee) {
          nt(Q, j, ee);
        });
        var Z = kr(j, k, H, ae, Q);
        return Ir(Q, Z), he(Q, Z), W(Q, Z), n(Q.compile(), {
          destroy: function() {
            Z.shader.program.destroy();
          }
        });
      }
      return {
        next: tt,
        current: Me,
        procs: function() {
          var j = wt(), k = j.proc("poll"), H = j.proc("refresh"), ae = j.block();
          k(ae), H(ae);
          var se = j.shared, Q = se.gl, Z = se.next, ee = se.current;
          ae(ee, ".dirty=false;"), jr(j, k), jr(j, H, null, !0);
          var $;
          ke && ($ = j.link(ke)), X.oes_vertex_array_object && H(j.link(X.oes_vertex_array_object), ".bindVertexArrayOES(null);");
          for (var Y = 0; Y < ce.maxAttributes; ++Y) {
            var U = H.def(se.attributes, "[", Y, "]"), ne = j.cond(U, ".buffer");
            ne.then(
              Q,
              ".enableVertexAttribArray(",
              Y,
              ");",
              Q,
              ".bindBuffer(",
              ms,
              ",",
              U,
              ".buffer.buffer);",
              Q,
              ".vertexAttribPointer(",
              Y,
              ",",
              U,
              ".size,",
              U,
              ".type,",
              U,
              ".normalized,",
              U,
              ".stride,",
              U,
              ".offset);"
            ).else(
              Q,
              ".disableVertexAttribArray(",
              Y,
              ");",
              Q,
              ".vertexAttrib4f(",
              Y,
              ",",
              U,
              ".x,",
              U,
              ".y,",
              U,
              ".z,",
              U,
              ".w);",
              U,
              ".buffer=null;"
            ), H(ne), ke && H(
              $,
              ".vertexAttribDivisorANGLE(",
              Y,
              ",",
              U,
              ".divisor);"
            );
          }
          return H(
            j.shared.vao,
            ".currentVAO=null;",
            j.shared.vao,
            ".setVAO(",
            j.shared.vao,
            ".targetVAO);"
          ), Object.keys(je).forEach(function(ue) {
            var me = je[ue], xe = ae.def(Z, ".", ue), pe = j.block();
            pe(
              "if(",
              xe,
              "){",
              Q,
              ".enable(",
              me,
              ")}else{",
              Q,
              ".disable(",
              me,
              ")}",
              ee,
              ".",
              ue,
              "=",
              xe,
              ";"
            ), H(pe), k(
              "if(",
              xe,
              "!==",
              ee,
              ".",
              ue,
              "){",
              pe,
              "}"
            );
          }), Object.keys(Ae).forEach(function(ue) {
            var me = Ae[ue], xe = Me[ue], pe, Ne, ft = j.block();
            if (ft(Q, ".", me, "("), Cr(xe)) {
              var Nt = xe.length;
              pe = j.global.def(Z, ".", ue), Ne = j.global.def(ee, ".", ue), ft(
                Xr(Nt, function(ot) {
                  return pe + "[" + ot + "]";
                }),
                ");",
                Xr(Nt, function(ot) {
                  return Ne + "[" + ot + "]=" + pe + "[" + ot + "];";
                }).join("")
              ), k(
                "if(",
                Xr(Nt, function(ot) {
                  return pe + "[" + ot + "]!==" + Ne + "[" + ot + "]";
                }).join("||"),
                "){",
                ft,
                "}"
              );
            } else
              pe = ae.def(Z, ".", ue), Ne = ae.def(ee, ".", ue), ft(
                pe,
                ");",
                ee,
                ".",
                ue,
                "=",
                pe,
                ";"
              ), k(
                "if(",
                pe,
                "!==",
                Ne,
                "){",
                ft,
                "}"
              );
            H(ft);
          }), j.compile();
        }(),
        compile: Ft
      };
    }
    function xP() {
      return {
        vaoCount: 0,
        bufferCount: 0,
        elementsCount: 0,
        framebufferCount: 0,
        shaderCount: 0,
        textureCount: 0,
        cubeCount: 0,
        renderbufferCount: 0,
        maxTextureUnits: 0
      };
    }
    var wP = 34918, _P = 34919, $b = 35007, MP = function(I, G) {
      if (!G.ext_disjoint_timer_query)
        return null;
      var X = [];
      function ce() {
        return X.pop() || G.ext_disjoint_timer_query.createQueryEXT();
      }
      function Ee(ke) {
        X.push(ke);
      }
      var le = [];
      function de(ke) {
        var qe = ce();
        G.ext_disjoint_timer_query.beginQueryEXT($b, qe), le.push(qe), Ie(le.length - 1, le.length, ke);
      }
      function Te() {
        G.ext_disjoint_timer_query.endQueryEXT($b);
      }
      function De() {
        this.startQueryIndex = -1, this.endQueryIndex = -1, this.sum = 0, this.stats = null;
      }
      var Re = [];
      function Le() {
        return Re.pop() || new De();
      }
      function ze(ke) {
        Re.push(ke);
      }
      var Ve = [];
      function Ie(ke, qe, Me) {
        var tt = Le();
        tt.startQueryIndex = ke, tt.endQueryIndex = qe, tt.sum = 0, tt.stats = Me, Ve.push(tt);
      }
      var Ue = [], oe = [];
      function ve() {
        var ke, qe, Me = le.length;
        if (Me !== 0) {
          oe.length = Math.max(oe.length, Me + 1), Ue.length = Math.max(Ue.length, Me + 1), Ue[0] = 0, oe[0] = 0;
          var tt = 0;
          for (ke = 0, qe = 0; qe < le.length; ++qe) {
            var Ce = le[qe];
            G.ext_disjoint_timer_query.getQueryObjectEXT(Ce, _P) ? (tt += G.ext_disjoint_timer_query.getQueryObjectEXT(Ce, wP), Ee(Ce)) : le[ke++] = Ce, Ue[qe + 1] = tt, oe[qe + 1] = ke;
          }
          for (le.length = ke, ke = 0, qe = 0; qe < Ve.length; ++qe) {
            var je = Ve[qe], Ae = je.startQueryIndex, $e = je.endQueryIndex;
            je.sum += Ue[$e] - Ue[Ae];
            var dt = oe[Ae], St = oe[$e];
            St === dt ? (je.stats.gpuTime += je.sum / 1e6, ze(je)) : (je.startQueryIndex = dt, je.endQueryIndex = St, Ve[ke++] = je);
          }
          Ve.length = ke;
        }
      }
      return {
        beginQuery: de,
        endQuery: Te,
        pushScopeStats: Ie,
        update: ve,
        getNumPendingQueries: function() {
          return le.length;
        },
        clear: function() {
          X.push.apply(X, le);
          for (var ke = 0; ke < X.length; ke++)
            G.ext_disjoint_timer_query.deleteQueryEXT(X[ke]);
          le.length = 0, X.length = 0;
        },
        restore: function() {
          le.length = 0, X.length = 0;
        }
      };
    }, SP = 16384, AP = 256, CP = 1024, TP = 34962, Wb = "webglcontextlost", Xb = "webglcontextrestored", Vb = 1, IP = 2, OP = 3;
    function Yb(I, G) {
      for (var X = 0; X < I.length; ++X)
        if (I[X] === G)
          return X;
      return -1;
    }
    function DP(I) {
      var G = ho(I);
      if (!G)
        return null;
      var X = G.gl, ce = X.getContextAttributes(), Ee = X.isContextLost(), le = vo(X, G);
      if (!le)
        return null;
      var de = hr(), Te = xP(), De = le.extensions, Re = MP(X, De), Le = pr(), ze = X.drawingBufferWidth, Ve = X.drawingBufferHeight, Ie = {
        tick: 0,
        time: 0,
        viewportWidth: ze,
        viewportHeight: Ve,
        framebufferWidth: ze,
        framebufferHeight: Ve,
        drawingBufferWidth: ze,
        drawingBufferHeight: Ve,
        pixelRatio: G.pixelRatio
      }, Ue = {}, oe = {
        elements: null,
        primitive: 4,
        // GL_TRIANGLES
        count: -1,
        offset: 0,
        instances: -1
      }, ve = gL(X, De), ke = LL(
        X,
        Te,
        G,
        Me
      ), qe = WN(
        X,
        De,
        ve,
        Te,
        ke
      );
      function Me(pt) {
        return qe.destroyBuffer(pt);
      }
      var tt = WL(X, De, ke, Te), Ce = HN(X, de, Te, G), je = xN(
        X,
        De,
        ve,
        function() {
          dt.procs.poll();
        },
        Ie,
        Te,
        G
      ), Ae = wN(X, De, ve, Te, G), $e = jN(
        X,
        De,
        ve,
        je,
        Ae,
        Te
      ), dt = EP(
        X,
        de,
        De,
        ve,
        ke,
        tt,
        je,
        $e,
        Ue,
        qe,
        Ce,
        oe,
        Ie,
        Re,
        G
      ), St = ZN(
        X,
        $e,
        dt.procs.poll,
        Ie,
        ce,
        De,
        ve
      ), Ye = dt.next, Ge = X.canvas, we = [], wt = [], Dt = [], it = [G.onDestroy], Bt = null;
      function Ct() {
        if (we.length === 0) {
          Re && Re.update(), Bt = null;
          return;
        }
        Bt = ar.next(Ct), sn();
        for (var pt = we.length - 1; pt >= 0; --pt) {
          var Gt = we[pt];
          Gt && Gt(Ie, null, 0);
        }
        X.flush(), Re && Re.update();
      }
      function kt() {
        !Bt && we.length > 0 && (Bt = ar.next(Ct));
      }
      function Jt() {
        Bt && (ar.cancel(Ct), Bt = null);
      }
      function Pr(pt) {
        pt.preventDefault(), Ee = !0, Jt(), wt.forEach(function(Gt) {
          Gt();
        });
      }
      function Vr(pt) {
        X.getError(), Ee = !1, le.restore(), Ce.restore(), ke.restore(), je.restore(), Ae.restore(), $e.restore(), qe.restore(), Re && Re.restore(), dt.procs.refresh(), kt(), Dt.forEach(function(Gt) {
          Gt();
        });
      }
      Ge && (Ge.addEventListener(Wb, Pr, !1), Ge.addEventListener(Xb, Vr, !1));
      function zt() {
        we.length = 0, Jt(), Ge && (Ge.removeEventListener(Wb, Pr), Ge.removeEventListener(Xb, Vr)), Ce.clear(), $e.clear(), Ae.clear(), je.clear(), tt.clear(), ke.clear(), qe.clear(), Re && Re.clear(), it.forEach(function(pt) {
          pt();
        });
      }
      function zr(pt) {
        D(!!pt, "invalid args to regl({...})"), D.type(pt, "object", "invalid args to regl({...})");
        function Gt(se) {
          var Q = n({}, se);
          delete Q.uniforms, delete Q.attributes, delete Q.context, delete Q.vao, "stencil" in Q && Q.stencil.op && (Q.stencil.opBack = Q.stencil.opFront = Q.stencil.op, delete Q.stencil.op);
          function Z(ee) {
            if (ee in Q) {
              var $ = Q[ee];
              delete Q[ee], Object.keys($).forEach(function(Y) {
                Q[ee + "." + Y] = $[Y];
              });
            }
          }
          return Z("blend"), Z("depth"), Z("cull"), Z("stencil"), Z("polygonOffset"), Z("scissor"), Z("sample"), "vao" in se && (Q.vao = se.vao), Q;
        }
        function Vt(se, Q) {
          var Z = {}, ee = {};
          return Object.keys(se).forEach(function($) {
            var Y = se[$];
            if (fr.isDynamic(Y)) {
              ee[$] = fr.unbox(Y, $);
              return;
            } else if (Q && Array.isArray(Y)) {
              for (var U = 0; U < Y.length; ++U)
                if (fr.isDynamic(Y[U])) {
                  ee[$] = fr.unbox(Y, $);
                  return;
                }
            }
            Z[$] = Y;
          }), {
            dynamic: ee,
            static: Z
          };
        }
        var Ir = Vt(pt.context || {}, !0), Na = Vt(pt.uniforms || {}, !0), To = Vt(pt.attributes || {}, !1), W = Vt(Gt(pt), !1), he = {
          gpuTime: 0,
          cpuTime: 0,
          count: 0
        }, fe = dt.compile(W, To, Na, Ir, he), nt = fe.draw, Ft = fe.batch, j = fe.scope, k = [];
        function H(se) {
          for (; k.length < se; )
            k.push(null);
          return k;
        }
        function ae(se, Q) {
          var Z;
          if (Ee && D.raise("context lost"), typeof se == "function")
            return j.call(this, null, se, 0);
          if (typeof Q == "function")
            if (typeof se == "number")
              for (Z = 0; Z < se; ++Z)
                j.call(this, null, Q, Z);
            else if (Array.isArray(se))
              for (Z = 0; Z < se.length; ++Z)
                j.call(this, se[Z], Q, Z);
            else
              return j.call(this, se, Q, 0);
          else if (typeof se == "number") {
            if (se > 0)
              return Ft.call(this, H(se | 0), se | 0);
          } else if (Array.isArray(se)) {
            if (se.length)
              return Ft.call(this, se, se.length);
          } else
            return nt.call(this, se);
        }
        return n(ae, {
          stats: he,
          destroy: function() {
            fe.destroy();
          }
        });
      }
      var gr = $e.setFBO = zr({
        framebuffer: fr.define.call(null, Vb, "framebuffer")
      });
      function kr(pt, Gt) {
        var Vt = 0;
        dt.procs.poll();
        var Ir = Gt.color;
        Ir && (X.clearColor(+Ir[0] || 0, +Ir[1] || 0, +Ir[2] || 0, +Ir[3] || 0), Vt |= SP), "depth" in Gt && (X.clearDepth(+Gt.depth), Vt |= AP), "stencil" in Gt && (X.clearStencil(Gt.stencil | 0), Vt |= CP), D(!!Vt, "called regl.clear with no buffer specified"), X.clear(Vt);
      }
      function Ur(pt) {
        if (D(
          typeof pt == "object" && pt,
          "regl.clear() takes an object as input"
        ), "framebuffer" in pt)
          if (pt.framebuffer && pt.framebuffer_reglType === "framebufferCube")
            for (var Gt = 0; Gt < 6; ++Gt)
              gr(n({
                framebuffer: pt.framebuffer.faces[Gt]
              }, pt), kr);
          else
            gr(pt, kr);
        else
          kr(null, pt);
      }
      function jr(pt) {
        D.type(pt, "function", "regl.frame() callback must be a function"), we.push(pt);
        function Gt() {
          var Vt = Yb(we, pt);
          D(Vt >= 0, "cannot cancel a frame twice");
          function Ir() {
            var Na = Yb(we, Ir);
            we[Na] = we[we.length - 1], we.length -= 1, we.length <= 0 && Jt();
          }
          we[Vt] = Ir;
        }
        return kt(), {
          cancel: Gt
        };
      }
      function Zr() {
        var pt = Ye.viewport, Gt = Ye.scissor_box;
        pt[0] = pt[1] = Gt[0] = Gt[1] = 0, Ie.viewportWidth = Ie.framebufferWidth = Ie.drawingBufferWidth = pt[2] = Gt[2] = X.drawingBufferWidth, Ie.viewportHeight = Ie.framebufferHeight = Ie.drawingBufferHeight = pt[3] = Gt[3] = X.drawingBufferHeight;
      }
      function sn() {
        Ie.tick += 1, Ie.time = Lt(), Zr(), dt.procs.poll();
      }
      function Tr() {
        je.refresh(), Zr(), dt.procs.refresh(), Re && Re.update();
      }
      function Lt() {
        return (pr() - Le) / 1e3;
      }
      Tr();
      function un(pt, Gt) {
        D.type(Gt, "function", "listener callback must be a function");
        var Vt;
        switch (pt) {
          case "frame":
            return jr(Gt);
          case "lost":
            Vt = wt;
            break;
          case "restore":
            Vt = Dt;
            break;
          case "destroy":
            Vt = it;
            break;
          default:
            D.raise("invalid event, must be one of frame,lost,restore,destroy");
        }
        return Vt.push(Gt), {
          cancel: function() {
            for (var Ir = 0; Ir < Vt.length; ++Ir)
              if (Vt[Ir] === Gt) {
                Vt[Ir] = Vt[Vt.length - 1], Vt.pop();
                return;
              }
          }
        };
      }
      var ur = n(zr, {
        // Clear current FBO
        clear: Ur,
        // Short cuts for dynamic variables
        prop: fr.define.bind(null, Vb),
        context: fr.define.bind(null, IP),
        this: fr.define.bind(null, OP),
        // executes an empty draw command
        draw: zr({}),
        // Resources
        buffer: function(pt) {
          return ke.create(pt, TP, !1, !1);
        },
        elements: function(pt) {
          return tt.create(pt, !1);
        },
        texture: je.create2D,
        cube: je.createCube,
        renderbuffer: Ae.create,
        framebuffer: $e.create,
        framebufferCube: $e.createCube,
        vao: qe.createVAO,
        // Expose context attributes
        attributes: ce,
        // Frame rendering
        frame: jr,
        on: un,
        // System limits
        limits: ve,
        hasExtension: function(pt) {
          return ve.extensions.indexOf(pt.toLowerCase()) >= 0;
        },
        // Read pixels
        read: St,
        // Destroy regl and all associated resources
        destroy: zt,
        // Direct GL state manipulation
        _gl: X,
        _refresh: Tr,
        poll: function() {
          sn(), Re && Re.update();
        },
        // Current time
        now: Lt,
        // regl Statistics Information
        stats: Te
      });
      return G.onDone(null, ur), ur;
    }
    return DP;
  });
})(PD);
var Sie = PD.exports;
const Aie = /* @__PURE__ */ Ai(Sie);
var Cie = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.attribute = void 0, this.buffer = void 0;
    var n = t.buffer, a = t.offset, i = t.stride, o = t.normalized, s = t.size, u = t.divisor;
    this.buffer = n, this.attribute = {
      buffer: n.get(),
      offset: a || 0,
      stride: i || 0,
      normalized: o || !1,
      divisor: u || 0
    }, s && (this.attribute.size = s);
  }
  return Ta(r, [{
    key: "get",
    value: function() {
      return this.attribute;
    }
  }, {
    key: "updateBuffer",
    value: function(t) {
      this.buffer.subData(t);
    }
  }, {
    key: "destroy",
    value: function() {
      this.buffer.destroy();
    }
  }]), r;
}(), vi, qu, pi, ta, Zu, zi, Qu, Lc, Ra, Do, pn, Ba, Fa, Nc, Tie = (vi = {}, Je(vi, Oe.POINTS, "points"), Je(vi, Oe.LINES, "lines"), Je(vi, Oe.LINE_LOOP, "line loop"), Je(vi, Oe.LINE_STRIP, "line strip"), Je(vi, Oe.TRIANGLES, "triangles"), Je(vi, Oe.TRIANGLE_FAN, "triangle fan"), Je(vi, Oe.TRIANGLE_STRIP, "triangle strip"), vi), kD = (qu = {}, Je(qu, Oe.STATIC_DRAW, "static"), Je(qu, Oe.DYNAMIC_DRAW, "dynamic"), Je(qu, Oe.STREAM_DRAW, "stream"), qu), qm = (pi = {}, Je(pi, Oe.BYTE, "int8"), Je(pi, Oe.UNSIGNED_INT, "int16"), Je(pi, Oe.INT, "int32"), Je(pi, Oe.UNSIGNED_BYTE, "uint8"), Je(pi, Oe.UNSIGNED_SHORT, "uint16"), Je(pi, Oe.UNSIGNED_INT, "uint32"), Je(pi, Oe.FLOAT, "float"), pi), Iie = (ta = {}, Je(ta, Oe.ALPHA, "alpha"), Je(ta, Oe.LUMINANCE, "luminance"), Je(ta, Oe.LUMINANCE_ALPHA, "luminance alpha"), Je(ta, Oe.RGB, "rgb"), Je(ta, Oe.RGBA, "rgba"), Je(ta, Oe.RGBA4, "rgba4"), Je(ta, Oe.RGB5_A1, "rgb5 a1"), Je(ta, Oe.RGB565, "rgb565"), Je(ta, Oe.DEPTH_COMPONENT, "depth"), Je(ta, Oe.DEPTH_STENCIL, "depth stencil"), ta), Oie = (Zu = {}, Je(Zu, Oe.DONT_CARE, "dont care"), Je(Zu, Oe.NICEST, "nice"), Je(Zu, Oe.FASTEST, "fast"), Zu), v2 = (zi = {}, Je(zi, Oe.NEAREST, "nearest"), Je(zi, Oe.LINEAR, "linear"), Je(zi, Oe.LINEAR_MIPMAP_LINEAR, "mipmap"), Je(zi, Oe.NEAREST_MIPMAP_LINEAR, "nearest mipmap linear"), Je(zi, Oe.LINEAR_MIPMAP_NEAREST, "linear mipmap nearest"), Je(zi, Oe.NEAREST_MIPMAP_NEAREST, "nearest mipmap nearest"), zi), p2 = (Qu = {}, Je(Qu, Oe.REPEAT, "repeat"), Je(Qu, Oe.CLAMP_TO_EDGE, "clamp"), Je(Qu, Oe.MIRRORED_REPEAT, "mirror"), Qu), Die = (Lc = {}, Je(Lc, Oe.NONE, "none"), Je(Lc, Oe.BROWSER_DEFAULT_WEBGL, "browser"), Lc), Lie = (Ra = {}, Je(Ra, Oe.NEVER, "never"), Je(Ra, Oe.ALWAYS, "always"), Je(Ra, Oe.LESS, "less"), Je(Ra, Oe.LEQUAL, "lequal"), Je(Ra, Oe.GREATER, "greater"), Je(Ra, Oe.GEQUAL, "gequal"), Je(Ra, Oe.EQUAL, "equal"), Je(Ra, Oe.NOTEQUAL, "notequal"), Ra), g2 = (Do = {}, Je(Do, Oe.FUNC_ADD, "add"), Je(Do, Oe.MIN_EXT, "min"), Je(Do, Oe.MAX_EXT, "max"), Je(Do, Oe.FUNC_SUBTRACT, "subtract"), Je(Do, Oe.FUNC_REVERSE_SUBTRACT, "reverse subtract"), Do), Pc = (pn = {}, Je(pn, Oe.ZERO, "zero"), Je(pn, Oe.ONE, "one"), Je(pn, Oe.SRC_COLOR, "src color"), Je(pn, Oe.ONE_MINUS_SRC_COLOR, "one minus src color"), Je(pn, Oe.SRC_ALPHA, "src alpha"), Je(pn, Oe.ONE_MINUS_SRC_ALPHA, "one minus src alpha"), Je(pn, Oe.DST_COLOR, "dst color"), Je(pn, Oe.ONE_MINUS_DST_COLOR, "one minus dst color"), Je(pn, Oe.DST_ALPHA, "dst alpha"), Je(pn, Oe.ONE_MINUS_DST_ALPHA, "one minus dst alpha"), Je(pn, Oe.CONSTANT_COLOR, "constant color"), Je(pn, Oe.ONE_MINUS_CONSTANT_COLOR, "one minus constant color"), Je(pn, Oe.CONSTANT_ALPHA, "constant alpha"), Je(pn, Oe.ONE_MINUS_CONSTANT_ALPHA, "one minus constant alpha"), Je(pn, Oe.SRC_ALPHA_SATURATE, "src alpha saturate"), pn), Nie = (Ba = {}, Je(Ba, Oe.NEVER, "never"), Je(Ba, Oe.ALWAYS, "always"), Je(Ba, Oe.LESS, "less"), Je(Ba, Oe.LEQUAL, "lequal"), Je(Ba, Oe.GREATER, "greater"), Je(Ba, Oe.GEQUAL, "gequal"), Je(Ba, Oe.EQUAL, "equal"), Je(Ba, Oe.NOTEQUAL, "notequal"), Ba), Cs = (Fa = {}, Je(Fa, Oe.ZERO, "zero"), Je(Fa, Oe.KEEP, "keep"), Je(Fa, Oe.REPLACE, "replace"), Je(Fa, Oe.INVERT, "invert"), Je(Fa, Oe.INCR, "increment"), Je(Fa, Oe.DECR, "decrement"), Je(Fa, Oe.INCR_WRAP, "increment wrap"), Je(Fa, Oe.DECR_WRAP, "decrement wrap"), Fa), Pie = (Nc = {}, Je(Nc, Oe.FRONT, "front"), Je(Nc, Oe.BACK, "back"), Nc), kie = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.buffer = void 0;
    var n = t.data, a = t.usage, i = t.type;
    this.buffer = e.buffer({
      data: n,
      usage: kD[a || Oe.STATIC_DRAW],
      type: qm[i || Oe.UNSIGNED_BYTE]
      // length: 0,
    });
  }
  return Ta(r, [{
    key: "get",
    value: function() {
      return this.buffer;
    }
  }, {
    key: "destroy",
    value: function() {
    }
  }, {
    key: "subData",
    value: function(t) {
      var n = t.data, a = t.offset;
      this.buffer.subdata(n, a);
    }
  }]), r;
}();
function Gg(r, e) {
  (e == null || e > r.length) && (e = r.length);
  for (var t = 0, n = new Array(e); t < e; t++)
    n[t] = r[t];
  return n;
}
function Rie(r) {
  if (Array.isArray(r))
    return Gg(r);
}
function Bie(r) {
  if (typeof Symbol < "u" && r[Symbol.iterator] != null || r["@@iterator"] != null)
    return Array.from(r);
}
function Fie(r, e) {
  if (r) {
    if (typeof r == "string")
      return Gg(r, e);
    var t = Object.prototype.toString.call(r).slice(8, -1);
    if (t === "Object" && r.constructor && (t = r.constructor.name), t === "Map" || t === "Set")
      return Array.from(r);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return Gg(r, e);
  }
}
function Gie() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function zie(r) {
  return Rie(r) || Bie(r) || Fie(r) || Gie();
}
function y2(r, e) {
  var t = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(r);
    e && (n = n.filter(function(a) {
      return Object.getOwnPropertyDescriptor(r, a).enumerable;
    })), t.push.apply(t, n);
  }
  return t;
}
function m2(r) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2 ? y2(Object(t), !0).forEach(function(n) {
      Je(r, n, t[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(t)) : y2(Object(t)).forEach(function(n) {
      Object.defineProperty(r, n, Object.getOwnPropertyDescriptor(t, n));
    });
  }
  return r;
}
var Uie = `attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`, b2 = 0, jie = /* @__PURE__ */ function() {
  function r(e, t) {
    var n = this;
    Ca(this, r), this.reGl = e, this.context = t, this.entity = LD(), this.texFBO = void 0, this.computeCommand = void 0, this.textureCache = {}, this.outputTextureName = void 0, this.swapOutputTextureName = void 0, this.compiledPingpong = void 0, this.dynamicPingpong = void 0;
    var a = {};
    this.context.uniforms.forEach(function(f) {
      var l = f.name, c = f.type, h = f.data, d = f.isReferer, v = f.storageClass;
      if (v === vu.StorageBuffer) {
        if (d)
          n.textureCache[l] = {
            data: void 0
          }, a["".concat(l, "Size")] = function() {
            return (
              // @ts-ignore
              h.compiledBundle.context.output.textureSize
            );
          };
        else {
          n.textureCache[l] = n.calcDataTexture(l, c, h);
          var p = n.textureCache[l], g = p.textureWidth, y = p.isOutput;
          a["".concat(l, "Size")] = [g, g], y && (n.outputTextureName = l, n.context.needPingpong && (n.outputTextureName = "".concat(l, "Output"), n.textureCache[n.outputTextureName] = n.calcDataTexture(l, c, h)));
        }
        a[l] = function() {
          return n.textureCache[l].texture;
        };
      } else if (v === vu.Uniform) {
        if (h && (Array.isArray(h) || Jh(h)) && h.length > 16)
          throw new Error("invalid data type ".concat(c));
        a[l] = function() {
          return f.data;
        };
      }
    });
    var i = this.getOuputDataTexture(), o = i.textureWidth, s = i.texelCount;
    a.u_OutputTextureSize = [o, o], a.u_OutputTexelCount = s, this.context.output.textureSize = [o, o];
    var u = {
      attributes: {
        a_Position: [[-1, 1, 0], [-1, -1, 0], [1, 1, 0], [1, -1, 0]],
        a_TexCoord: [[0, 1], [0, 0], [1, 1], [1, 0]]
      },
      frag: `#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),
      uniforms: a,
      vert: Uie,
      // TODO: use a fullscreen triangle instead.
      primitive: "triangle strip",
      count: 4
    };
    this.computeCommand = this.reGl(u);
  }
  return Ta(r, [{
    key: "run",
    value: function() {
      var t = this;
      this.context.maxIteration > 1 && this.context.needPingpong && (this.compiledPingpong = !0), (this.compiledPingpong || this.dynamicPingpong) && this.swap(), this.texFBO = this.reGl.framebuffer({
        color: this.getOuputDataTexture().texture
      }), this.texFBO.use(function() {
        t.computeCommand();
      });
    }
  }, {
    key: "readData",
    value: function() {
      var e = Ki(/* @__PURE__ */ bn.mark(function n() {
        var a = this, i, o, s, u, f, l, c, h;
        return bn.wrap(function(v) {
          for (; ; )
            switch (v.prev = v.next) {
              case 0:
                if (this.reGl({
                  framebuffer: this.texFBO
                })(function() {
                  i = a.reGl.read();
                }), !i) {
                  v.next = 6;
                  break;
                }
                if (o = this.getOuputDataTexture(), s = o.originalDataLength, u = o.elementsPerTexel, f = o.typedArrayConstructor, l = f === void 0 ? Float32Array : f, c = [], u !== 4)
                  for (h = 0; h < i.length; h += 4)
                    u === 1 ? c.push(i[h]) : u === 2 ? c.push(i[h], i[h + 1]) : c.push(i[h], i[h + 1], i[h + 2]);
                else
                  c = i;
                return v.abrupt("return", new l(c.slice(0, s)));
              case 6:
                return v.abrupt("return", new Float32Array());
              case 7:
              case "end":
                return v.stop();
            }
        }, n, this);
      }));
      function t() {
        return e.apply(this, arguments);
      }
      return t;
    }()
  }, {
    key: "confirmInput",
    value: function(t, n) {
      var a;
      this.entity === t.entity ? (this.dynamicPingpong = !0, a = this) : a = t, this.textureCache[n].id = a.getOuputDataTexture().id, this.textureCache[n].texture = a.getOuputDataTexture().texture;
    }
  }, {
    key: "updateUniform",
    value: function() {
    }
  }, {
    key: "updateBuffer",
    value: function(t, n) {
      var a = this.context.uniforms.find(function(u) {
        var f = u.name;
        return f === t;
      });
      if (a) {
        var i = this.calcDataTexture(t, a.type, n), o = i.texture, s = i.data;
        this.textureCache[t].data = s, this.textureCache[t].texture = o;
      }
    }
  }, {
    key: "destroy",
    value: function() {
    }
  }, {
    key: "swap",
    value: function() {
      if (this.swapOutputTextureName || this.createSwapOutputDataTexture(), this.compiledPingpong) {
        var t = this.context.output.name;
        this.textureCache[t].id = this.getOuputDataTexture().id, this.textureCache[t].texture = this.getOuputDataTexture().texture;
      }
      var n = this.outputTextureName;
      this.outputTextureName = this.swapOutputTextureName, this.swapOutputTextureName = n;
    }
  }, {
    key: "getOuputDataTexture",
    value: function() {
      return this.textureCache[this.outputTextureName];
    }
  }, {
    key: "createSwapOutputDataTexture",
    value: function() {
      var t = this.cloneDataTexture(this.getOuputDataTexture());
      this.swapOutputTextureName = "".concat(this.entity, "-swap"), this.textureCache[this.swapOutputTextureName] = t;
    }
  }, {
    key: "cloneDataTexture",
    value: function(t) {
      var n = t.data, a = t.textureWidth;
      return m2(m2({}, t), {}, {
        id: b2++,
        // @ts-ignore
        texture: this.reGl.texture({
          width: a,
          height: a,
          data: n,
          type: "float"
        })
      });
    }
  }, {
    key: "calcDataTexture",
    value: function(t, n, a) {
      var i = 1;
      n === $f.Vector4FloatArray && (i = 4);
      for (var o = [], s = 0; s < a.length; s += i)
        i === 1 ? o.push(a[s], 0, 0, 0) : i === 2 ? o.push(a[s], a[s + 1], 0, 0) : i === 3 ? o.push(a[s], a[s + 1], a[s + 2], 0) : i === 4 && o.push(a[s], a[s + 1], a[s + 2], a[s + 3]);
      var u = a.length, f = Math.ceil(u / i), l = Math.ceil(Math.sqrt(f)), c = l * l;
      f < c && o.push.apply(o, zie(new Array((c - f) * 4).fill(0)));
      var h = this.reGl.texture({
        width: l,
        height: l,
        data: o,
        type: "float"
      });
      return {
        id: b2++,
        data: o,
        originalDataLength: u,
        typedArrayConstructor: Jh(a) ? a.constructor : void 0,
        textureWidth: l,
        texture: h,
        texelCount: f,
        elementsPerTexel: i,
        isOutput: t === this.context.output.name
      };
    }
  }]), r;
}(), $ie = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.elements = void 0;
    var n = t.data, a = t.usage, i = t.type, o = t.count;
    this.elements = e.elements({
      data: n,
      usage: kD[a || Oe.STATIC_DRAW],
      type: qm[i || Oe.UNSIGNED_BYTE],
      count: o
    });
  }
  return Ta(r, [{
    key: "get",
    value: function() {
      return this.elements;
    }
  }, {
    key: "subData",
    value: function(t) {
      var n = t.data;
      this.elements.subdata(n);
    }
  }, {
    key: "destroy",
    value: function() {
      this.elements.destroy();
    }
  }]), r;
}(), Wie = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.framebuffer = void 0;
    var n = t.width, a = t.height, i = t.color, o = t.colors;
    t.depth, t.stencil;
    var s = {
      width: n,
      height: a
    };
    Array.isArray(o) && (s.colors = o.map(function(u) {
      return u.get();
    })), i && typeof i != "boolean" && (s.color = i.get()), this.framebuffer = e.framebuffer(s);
  }
  return Ta(r, [{
    key: "get",
    value: function() {
      return this.framebuffer;
    }
  }, {
    key: "destroy",
    value: function() {
      this.framebuffer.destroy();
    }
  }, {
    key: "resize",
    value: function(t) {
      var n = t.width, a = t.height;
      this.framebuffer.resize(n, a);
    }
  }]), r;
}();
function Xie(r, e) {
  return function(t) {
    return r(e(t));
  };
}
var Vie = Xie, Yie = Vie, Hie = Yie(Object.getPrototypeOf, Object), Kie = Hie, qie = Hm, Zie = Kie, Qie = Km, Jie = "[object Object]", eoe = Function.prototype, toe = Object.prototype, RD = eoe.toString, roe = toe.hasOwnProperty, noe = RD.call(Object);
function aoe(r) {
  if (!Qie(r) || qie(r) != Jie)
    return !1;
  var e = Zie(r);
  if (e === null)
    return !0;
  var t = roe.call(e, "constructor") && e.constructor;
  return typeof t == "function" && t instanceof t && RD.call(t) == noe;
}
var ioe = aoe;
const ooe = /* @__PURE__ */ Ai(ioe);
function u0(r) {
  var e = {};
  return Object.keys(r).forEach(function(t) {
    zg(t, r[t], e, "");
  }), e;
}
function zg(r, e, t, n) {
  if (e === null || typeof e == "number" || // u_A: 1
  typeof e == "boolean" || // u_A: false
  Array.isArray(e) && typeof e[0] == "number" || // u_A: [1, 2, 3]
  Jh(e) || // u_A: Float32Array
  // @ts-ignore
  e === "" || // @ts-ignore
  e.resize !== void 0) {
    t["".concat(n && n + ".").concat(r)] = e;
    return;
  }
  ooe(e) && Object.keys(e).forEach(function(a) {
    zg(
      a,
      // @ts-ignore
      e[a],
      t,
      "".concat(n && n + ".").concat(r)
    );
  }), Array.isArray(e) && e.forEach(function(a, i) {
    Object.keys(a).forEach(function(o) {
      zg(
        o,
        // @ts-ignore
        a[o],
        t,
        "".concat(n && n + ".").concat(r, "[").concat(i, "]")
      );
    });
  });
}
function E2(r, e) {
  var t = Object.keys(r);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(r);
    e && (n = n.filter(function(a) {
      return Object.getOwnPropertyDescriptor(r, a).enumerable;
    })), t.push.apply(t, n);
  }
  return t;
}
function Ts(r) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2 ? E2(Object(t), !0).forEach(function(n) {
      Je(r, n, t[n]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(r, Object.getOwnPropertyDescriptors(t)) : E2(Object(t)).forEach(function(n) {
      Object.defineProperty(r, n, Object.getOwnPropertyDescriptor(t, n));
    });
  }
  return r;
}
var soe = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.reGl = void 0, this.drawCommand = void 0, this.uniforms = {}, this.reGl = e;
    var n = t.vs, a = t.fs, i = t.defines, o = t.attributes, s = t.uniforms, u = t.primitive, f = t.count, l = t.elements, c = t.depth, h = t.blend, d = t.stencil, v = t.cull, p = t.instances, g = t.scissor, y = t.viewport, m = {};
    s && (this.uniforms = u0(s), Object.keys(s).forEach(function(w) {
      m[w] = e.prop(w);
    }));
    var b = {};
    Object.keys(o).forEach(function(w) {
      b[w] = o[w].get();
    });
    var E = i && this.generateDefines(i) || "", x = {
      attributes: b,
      frag: `#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(E, `
`).concat(a),
      uniforms: m,
      vert: `
`.concat(E, `
`).concat(n),
      primitive: Tie[u === void 0 ? Oe.TRIANGLES : u]
    };
    p && (x.instances = p), f && (x.count = f), l && (x.elements = l.get()), g && (x.scissor = g), y && (x.viewport = y), this.initDepthDrawParams({
      depth: c
    }, x), this.initBlendDrawParams({
      blend: h
    }, x), this.initStencilDrawParams({
      stencil: d
    }, x), this.initCullDrawParams({
      cull: v
    }, x), this.drawCommand = e(x);
  }
  return Ta(r, [{
    key: "addUniforms",
    value: function(t) {
      this.uniforms = Ts(Ts({}, this.uniforms), u0(t));
    }
  }, {
    key: "draw",
    value: function(t) {
      var n = Ts(Ts({}, this.uniforms), u0(t.uniforms || {})), a = {};
      Object.keys(n).forEach(function(i) {
        var o = du(n[i]);
        o === "boolean" || o === "number" || Array.isArray(n[i]) || // @ts-ignore
        n[i].BYTES_PER_ELEMENT ? a[i] = n[i] : o === "string" || (a[i] = n[i].get());
      }), this.drawCommand(a);
    }
  }, {
    key: "destroy",
    value: function() {
    }
    /**
     * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#depth-buffer
     */
  }, {
    key: "initDepthDrawParams",
    value: function(t, n) {
      var a = t.depth;
      a && (n.depth = {
        enable: a.enable === void 0 ? !0 : !!a.enable,
        mask: a.mask === void 0 ? !0 : !!a.mask,
        func: Lie[a.func || Oe.LESS],
        range: a.range || [0, 1]
      });
    }
    /**
     * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#blending
     */
  }, {
    key: "initBlendDrawParams",
    value: function(t, n) {
      var a = t.blend;
      if (a) {
        var i = a.enable, o = a.func, s = a.equation, u = a.color, f = u === void 0 ? [0, 0, 0, 0] : u;
        n.blend = {
          enable: !!i,
          func: {
            srcRGB: Pc[o && o.srcRGB || Oe.SRC_ALPHA],
            srcAlpha: Pc[o && o.srcAlpha || Oe.SRC_ALPHA],
            dstRGB: Pc[o && o.dstRGB || Oe.ONE_MINUS_SRC_ALPHA],
            dstAlpha: Pc[o && o.dstAlpha || Oe.ONE_MINUS_SRC_ALPHA]
          },
          equation: {
            rgb: g2[s && s.rgb || Oe.FUNC_ADD],
            alpha: g2[s && s.alpha || Oe.FUNC_ADD]
          },
          color: f
        };
      }
    }
    /**
     * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#stencil
     */
  }, {
    key: "initStencilDrawParams",
    value: function(t, n) {
      var a = t.stencil;
      if (a) {
        var i = a.enable, o = a.mask, s = o === void 0 ? -1 : o, u = a.func, f = u === void 0 ? {
          cmp: Oe.ALWAYS,
          ref: 0,
          mask: -1
        } : u, l = a.opFront, c = l === void 0 ? {
          fail: Oe.KEEP,
          zfail: Oe.KEEP,
          zpass: Oe.KEEP
        } : l, h = a.opBack, d = h === void 0 ? {
          fail: Oe.KEEP,
          zfail: Oe.KEEP,
          zpass: Oe.KEEP
        } : h;
        n.stencil = {
          enable: !!i,
          mask: s,
          func: Ts(Ts({}, f), {}, {
            cmp: Nie[f.cmp]
          }),
          opFront: {
            fail: Cs[c.fail],
            zfail: Cs[c.zfail],
            zpass: Cs[c.zpass]
          },
          opBack: {
            fail: Cs[d.fail],
            zfail: Cs[d.zfail],
            zpass: Cs[d.zpass]
          }
        };
      }
    }
    /**
     * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#culling
     */
  }, {
    key: "initCullDrawParams",
    value: function(t, n) {
      var a = t.cull;
      if (a) {
        var i = a.enable, o = a.face, s = o === void 0 ? Oe.BACK : o;
        n.cull = {
          enable: !!i,
          face: Pie[s]
        };
      }
    }
  }, {
    key: "generateDefines",
    value: function(t) {
      return Object.keys(t).map(function(n) {
        return "#define ".concat(n, " ").concat(Number(t[n]));
      }).join(`
`);
    }
  }]), r;
}(), uoe = /* @__PURE__ */ function() {
  function r(e, t) {
    Ca(this, r), this.texture = void 0, this.width = void 0, this.height = void 0;
    var n = t.data, a = t.type, i = a === void 0 ? Oe.UNSIGNED_BYTE : a, o = t.width, s = t.height, u = t.flipY, f = u === void 0 ? !1 : u, l = t.format, c = l === void 0 ? Oe.RGBA : l, h = t.mipmap, d = h === void 0 ? !1 : h, v = t.wrapS, p = v === void 0 ? Oe.CLAMP_TO_EDGE : v, g = t.wrapT, y = g === void 0 ? Oe.CLAMP_TO_EDGE : g, m = t.aniso, b = m === void 0 ? 0 : m, E = t.alignment, x = E === void 0 ? 1 : E, w = t.premultiplyAlpha, _ = w === void 0 ? !1 : w, M = t.mag, A = M === void 0 ? Oe.NEAREST : M, S = t.min, T = S === void 0 ? Oe.NEAREST : S, C = t.colorSpace, O = C === void 0 ? Oe.BROWSER_DEFAULT_WEBGL : C;
    this.width = o, this.height = s;
    var L = {
      width: o,
      height: s,
      // @ts-ignore
      type: qm[i],
      format: Iie[c],
      wrapS: p2[p],
      wrapT: p2[y],
      // @ts-ignore
      mag: v2[A],
      min: v2[T],
      alignment: x,
      flipY: f,
      colorSpace: Die[O],
      premultiplyAlpha: _,
      aniso: b
    };
    n && (L.data = n), typeof d == "number" ? L.mipmap = Oie[d] : typeof d == "boolean" && (L.mipmap = d), this.texture = e.texture(L);
  }
  return Ta(r, [{
    key: "get",
    value: function() {
      return this.texture;
    }
  }, {
    key: "update",
    value: function() {
      this.texture._texture.bind();
    }
  }, {
    key: "resize",
    value: function(t) {
      var n = t.width, a = t.height;
      this.texture.resize(n, a), this.width = n, this.height = a;
    }
  }, {
    key: "destroy",
    value: function() {
      this.texture.destroy();
    }
  }]), r;
}(), foe = /* @__PURE__ */ function() {
  function r() {
    var e = this;
    Ca(this, r), this.supportWebGPU = !1, this.useWGSL = !1, this.$canvas = void 0, this.gl = void 0, this.inited = void 0, this.createModel = /* @__PURE__ */ function() {
      var t = Ki(/* @__PURE__ */ bn.mark(function n(a) {
        return bn.wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                if (!a.uniforms) {
                  o.next = 3;
                  break;
                }
                return o.next = 3, Promise.all(Object.keys(a.uniforms).map(/* @__PURE__ */ function() {
                  var s = Ki(/* @__PURE__ */ bn.mark(function u(f) {
                    var l;
                    return bn.wrap(function(h) {
                      for (; ; )
                        switch (h.prev = h.next) {
                          case 0:
                            if (!(a.uniforms[f] && // @ts-ignore
                            a.uniforms[f].load !== void 0)) {
                              h.next = 5;
                              break;
                            }
                            return h.next = 3, a.uniforms[f].load();
                          case 3:
                            l = h.sent, a.uniforms[f] = l;
                          case 5:
                          case "end":
                            return h.stop();
                        }
                    }, u);
                  }));
                  return function(u) {
                    return s.apply(this, arguments);
                  };
                }()));
              case 3:
                return o.abrupt("return", new soe(e.gl, a));
              case 4:
              case "end":
                return o.stop();
            }
        }, n);
      }));
      return function(n) {
        return t.apply(this, arguments);
      };
    }(), this.createAttribute = function(t) {
      return new Cie(e.gl, t);
    }, this.createBuffer = function(t) {
      return new kie(e.gl, t);
    }, this.createElements = function(t) {
      return new $ie(e.gl, t);
    }, this.createTexture2D = function(t) {
      return new uoe(e.gl, t);
    }, this.createFramebuffer = function(t) {
      return new Wie(e.gl, t);
    }, this.useFramebuffer = function(t, n) {
      e.gl({
        framebuffer: t ? t.get() : null
      })(n);
    }, this.createComputeModel = /* @__PURE__ */ function() {
      var t = Ki(/* @__PURE__ */ bn.mark(function n(a) {
        return bn.wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                return o.abrupt("return", new jie(e.gl, a));
              case 1:
              case "end":
                return o.stop();
            }
        }, n);
      }));
      return function(n) {
        return t.apply(this, arguments);
      };
    }(), this.clear = function(t) {
      var n = t.color, a = t.depth, i = t.stencil, o = t.framebuffer, s = o === void 0 ? null : o, u = {
        color: n,
        depth: a,
        stencil: i
      };
      u.framebuffer = s === null ? s : s.get(), e.gl.clear(u);
    }, this.setScissor = function(t) {
      e.gl && e.gl._gl && (t.enable && t.box ? (e.gl._gl.enable(Oe.SCISSOR_TEST), e.gl._gl.scissor(t.box.x, t.box.y, t.box.width, t.box.height)) : e.gl._gl.disable(Oe.SCISSOR_TEST), e.gl._refresh());
    }, this.viewport = function(t) {
      var n = t.x, a = t.y, i = t.width, o = t.height;
      e.gl && e.gl._gl && (e.gl._gl.viewport(n, a, i, o), e.gl._refresh());
    }, this.readPixels = function(t) {
      var n = t.framebuffer, a = t.x, i = t.y, o = t.width, s = t.height, u = {
        x: a,
        y: i,
        width: o,
        height: s
      };
      return n && (u.framebuffer = n.get()), e.gl.read(u);
    }, this.getCanvas = function() {
      return e.$canvas;
    }, this.getGLContext = function() {
      return e.gl._gl;
    }, this.destroy = function() {
      e.gl && (e.gl.destroy(), e.inited = !1);
    };
  }
  return Ta(r, [{
    key: "init",
    value: function() {
      var e = Ki(/* @__PURE__ */ bn.mark(function n(a) {
        return bn.wrap(function(o) {
          for (; ; )
            switch (o.prev = o.next) {
              case 0:
                if (!this.inited) {
                  o.next = 2;
                  break;
                }
                return o.abrupt("return");
              case 2:
                return this.$canvas = a.canvas, o.next = 5, new Promise(function(s, u) {
                  Aie({
                    canvas: a.canvas,
                    attributes: {
                      alpha: !0,
                      // use TAA instead of MSAA
                      // @see https://www.khronos.org/registry/webgl/specs/1.0/#5.2.1
                      antialias: a.antialias,
                      premultipliedAlpha: !0
                      // preserveDrawingBuffer: false,
                    },
                    pixelRatio: 1,
                    // TODO: use extensions
                    extensions: [
                      "OES_element_index_uint",
                      "OES_texture_float",
                      "OES_standard_derivatives",
                      // wireframe
                      "angle_instanced_arrays"
                      // VSM shadow map
                    ],
                    optionalExtensions: ["EXT_texture_filter_anisotropic", "EXT_blend_minmax", "WEBGL_depth_texture"],
                    profile: !0,
                    onDone: function(l, c) {
                      (l || !c) && u(l), s(c);
                    }
                  });
                });
              case 5:
                this.gl = o.sent, this.inited = !0;
              case 7:
              case "end":
                return o.stop();
            }
        }, n, this);
      }));
      function t(n) {
        return e.apply(this, arguments);
      }
      return t;
    }()
  }, {
    key: "isFloatSupported",
    value: function() {
      return this.gl.limits.readFloat;
    }
  }, {
    key: "beginFrame",
    value: function() {
    }
  }, {
    key: "endFrame",
    value: function() {
    }
  }]), r;
}(), loe = /* @__PURE__ */ function() {
  function r() {
    Ca(this, r), this.engine = void 0, this.configService = new wie();
  }
  return Ta(r, [{
    key: "setConfig",
    value: function(t) {
      this.configService.set(t);
    }
  }, {
    key: "setEngine",
    value: function(t) {
      this.engine = t;
    }
  }, {
    key: "createEntity",
    value: function() {
      return LD();
    }
  }, {
    key: "createKernel",
    value: function(t) {
      var n = new ND(this.engine, this.configService);
      return typeof t == "string" ? n.setBundle(JSON.parse(t)) : n.setBundle(t), n.init(), n;
    }
  }, {
    key: "destroy",
    value: function() {
      this.engine.destroy();
    }
  }], [{
    key: "create",
    value: function() {
      var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, n = new r();
      return n.setConfig(t), n.setEngine(new foe()), n;
    }
  }]), r;
}();
const coe = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Kernel: ND,
  World: loe
}, Symbol.toStringTag, { value: "Module" })), BD = /* @__PURE__ */ ri(coe);
var $n = {};
Object.defineProperty($n, "__esModule", { value: !0 });
$n.arrayToTextureData = $n.attributesToTextureData = $n.buildTextureDataWithTwoEdgeAttr = $n.buildTextureData = $n.proccessToFunc = void 0;
var hoe = Dr(), ed = Sd, doe = function(r, e) {
  var t;
  return r ? (0, hoe.isNumber)(r) ? t = function() {
    return r;
  } : t = r : t = function() {
    return e || 1;
  }, t;
};
$n.proccessToFunc = doe;
var voe = function(r, e) {
  var t = [], n = [], a = {}, i = 0;
  for (i = 0; i < r.length; i++) {
    var o = r[i];
    a[o.id] = i, t.push(o.x), t.push(o.y), t.push(0), t.push(0), n.push([]);
  }
  for (i = 0; i < e.length; i++) {
    var s = e[i], u = (0, ed.getEdgeTerminal)(s, "source"), f = (0, ed.getEdgeTerminal)(s, "target");
    !isNaN(a[u]) && !isNaN(a[f]) && (n[a[u]].push(a[f]), n[a[f]].push(a[u]));
  }
  var l = 0;
  for (i = 0; i < r.length; i++) {
    var c = t.length, h = n[i], d = h.length;
    t[i * 4 + 2] = c, t[i * 4 + 3] = d, l = Math.max(l, d);
    for (var v = 0; v < d; ++v) {
      var p = h[v];
      t.push(+p);
    }
  }
  for (; t.length % 4 !== 0; )
    t.push(0);
  return {
    maxEdgePerVetex: l,
    array: new Float32Array(t)
  };
};
$n.buildTextureData = voe;
var poe = function(r, e, t, n) {
  var a = [], i = [], o = {}, s = 0;
  for (s = 0; s < r.length; s++) {
    var u = r[s];
    o[u.id] = s, a.push(u.x), a.push(u.y), a.push(0), a.push(0), i.push([]);
  }
  for (s = 0; s < e.length; s++) {
    var f = e[s], l = (0, ed.getEdgeTerminal)(f, "source"), c = (0, ed.getEdgeTerminal)(f, "target");
    i[o[l]].push(o[c]), i[o[l]].push(t(f)), i[o[l]].push(n(f)), i[o[l]].push(0), i[o[c]].push(o[l]), i[o[c]].push(t(f)), i[o[c]].push(n(f)), i[o[c]].push(0);
  }
  var h = 0;
  for (s = 0; s < r.length; s++) {
    var d = a.length, v = i[s], p = v.length;
    a[s * 4 + 2] = d + 1048576 * p / 4, a[s * 4 + 3] = 0, h = Math.max(h, p / 4);
    for (var g = 0; g < p; ++g) {
      var y = v[g];
      a.push(+y);
    }
  }
  for (; a.length % 4 !== 0; )
    a.push(0);
  return {
    maxEdgePerVetex: h,
    array: new Float32Array(a)
  };
};
$n.buildTextureDataWithTwoEdgeAttr = poe;
var goe = function(r, e) {
  var t = [], n = r.length, a = {};
  return e.forEach(function(i) {
    r.forEach(function(o, s) {
      if (a[i[o]] === void 0 && (a[i[o]] = Object.keys(a).length), t.push(a[i[o]]), s === n - 1)
        for (; t.length % 4 !== 0; )
          t.push(0);
    });
  }), {
    array: new Float32Array(t),
    count: Object.keys(a).length
  };
};
$n.attributesToTextureData = goe;
var yoe = function(r) {
  for (var e = [], t = r.length, n = r[0].length, a = function(o) {
    r.forEach(function(s, u) {
      if (e.push(s[o]), u === t - 1)
        for (; e.length % 4 !== 0; )
          e.push(0);
    });
  }, i = 0; i < n; i++)
    a(i);
  return new Float32Array(e);
};
$n.arrayToTextureData = yoe;
var Ha = {};
Object.defineProperty(Ha, "__esModule", { value: !0 });
Ha.clusterBundle = Ha.clusterCode = Ha.fruchtermanBundle = Ha.fruchtermanCode = void 0;
Ha.fruchtermanCode = `
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;
Ha.fruchtermanBundle = '{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';
Ha.clusterCode = `
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;
Ha.clusterBundle = '{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';
var moe = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), kc = be && be.__awaiter || function(r, e, t, n) {
  function a(i) {
    return i instanceof t ? i : new t(function(o) {
      o(i);
    });
  }
  return new (t || (t = Promise))(function(i, o) {
    function s(l) {
      try {
        f(n.next(l));
      } catch (c) {
        o(c);
      }
    }
    function u(l) {
      try {
        f(n.throw(l));
      } catch (c) {
        o(c);
      }
    }
    function f(l) {
      l.done ? i(l.value) : a(l.value).then(s, u);
    }
    f((n = n.apply(r, e || [])).next());
  });
}, Rc = be && be.__generator || function(r, e) {
  var t = { label: 0, sent: function() {
    if (i[0] & 1)
      throw i[1];
    return i[1];
  }, trys: [], ops: [] }, n, a, i, o;
  return o = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function s(f) {
    return function(l) {
      return u([f, l]);
    };
  }
  function u(f) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; o && (o = 0, f[0] && (t = 0)), t; )
      try {
        if (n = 1, a && (i = f[0] & 2 ? a.return : f[0] ? a.throw || ((i = a.return) && i.call(a), 0) : a.next) && !(i = i.call(a, f[1])).done)
          return i;
        switch (a = 0, i && (f = [f[0] & 2, i.value]), f[0]) {
          case 0:
          case 1:
            i = f;
            break;
          case 4:
            return t.label++, { value: f[1], done: !1 };
          case 5:
            t.label++, a = f[1], f = [0];
            continue;
          case 7:
            f = t.ops.pop(), t.trys.pop();
            continue;
          default:
            if (i = t.trys, !(i = i.length > 0 && i[i.length - 1]) && (f[0] === 6 || f[0] === 2)) {
              t = 0;
              continue;
            }
            if (f[0] === 3 && (!i || f[1] > i[0] && f[1] < i[3])) {
              t.label = f[1];
              break;
            }
            if (f[0] === 6 && t.label < i[1]) {
              t.label = i[1], i = f;
              break;
            }
            if (i && t.label < i[2]) {
              t.label = i[2], t.ops.push(f);
              break;
            }
            i[2] && t.ops.pop(), t.trys.pop();
            continue;
        }
        f = e.call(r, t);
      } catch (l) {
        f = [6, l], a = 0;
      } finally {
        n = i = 0;
      }
    if (f[0] & 5)
      throw f[1];
    return { value: f[0] ? f[1] : void 0, done: !0 };
  }
};
Object.defineProperty(pl, "__esModule", { value: !0 });
pl.FruchtermanGPULayout = void 0;
var boe = Gr, Is = Dr(), x2 = BD, w2 = $n, _2 = Ha, Eoe = Si, xoe = (
  /** @class */
  function(r) {
    moe(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.maxIteration = 1e3, n.gravity = 10, n.speed = 1, n.clustering = !1, n.clusterField = "cluster", n.clusterGravity = 10, n.workerEnabled = !1, n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.nodeMap = {}, n.nodeIdxMap = {}, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 1e3,
        gravity: 10,
        speed: 1,
        clustering: !1,
        clusterGravity: 10
      };
    }, e.prototype.execute = function() {
      return kc(this, void 0, void 0, function() {
        var t, n, a, i, o, s = this;
        return Rc(this, function(u) {
          switch (u.label) {
            case 0:
              return t = this, n = t.nodes, !n || n.length === 0 ? (t.onLayoutEnd && t.onLayoutEnd(), [
                2
                /*return*/
              ]) : (!t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight), t.center || (t.center = [t.width / 2, t.height / 2]), a = t.center, n.length === 1 ? (n[0].x = a[0], n[0].y = a[1], t.onLayoutEnd && t.onLayoutEnd(), [
                2
                /*return*/
              ]) : (i = {}, o = {}, n.forEach(function(f, l) {
                (0, Is.isNumber)(f.x) || (f.x = Math.random() * s.width), (0, Is.isNumber)(f.y) || (f.y = Math.random() * s.height), i[f.id] = f, o[f.id] = l;
              }), t.nodeMap = i, t.nodeIdxMap = o, [4, t.run()]));
            case 1:
              return u.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.executeWithWorker = function(t, n) {
      return kc(this, void 0, void 0, function() {
        var a, i, o, s, u, f = this;
        return Rc(this, function(l) {
          switch (l.label) {
            case 0:
              return a = this, i = a.nodes, o = a.center, !i || i.length === 0 ? [
                2
                /*return*/
              ] : i.length === 1 ? (i[0].x = o[0], i[0].y = o[1], [
                2
                /*return*/
              ]) : (s = {}, u = {}, i.forEach(function(c, h) {
                (0, Is.isNumber)(c.x) || (c.x = Math.random() * f.width), (0, Is.isNumber)(c.y) || (c.y = Math.random() * f.height), s[c.id] = c, u[c.id] = h;
              }), a.nodeMap = s, a.nodeIdxMap = u, [4, a.run(t, n)]);
            case 1:
              return l.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.run = function(t, n) {
      return kc(this, void 0, void 0, function() {
        var a, i, o, s, u, f, l, c, h, d, v, p, g, y, m, b, E, x, w, _, M, A, S, T, C, O, L = this;
        return Rc(this, function(R) {
          switch (R.label) {
            case 0:
              for (a = this, i = a.nodes, o = a.edges, s = a.maxIteration, u = a.center, f = a.height * a.width, l = Math.sqrt(f) / 10, c = f / (i.length + 1), h = Math.sqrt(c), d = a.speed, v = a.clustering, p = (0, w2.attributesToTextureData)([a.clusterField], i), g = p.array, y = p.count, i.forEach(function(P, z) {
                var V = 0, N = 0;
                (0, Is.isNumber)(P.fx) && (0, Is.isNumber)(P.fy) && (V = P.fx || 1e-3, N = P.fy || 1e-3), g[4 * z + 1] = V, g[4 * z + 2] = N;
              }), m = i.length, b = (0, w2.buildTextureData)(i, o), E = b.maxEdgePerVetex, x = b.array, w = a.workerEnabled, w ? _ = x2.World.create({
                canvas: t,
                engineOptions: {
                  supportCompute: !0
                }
              }) : _ = x2.World.create({
                engineOptions: {
                  supportCompute: !0
                }
              }), M = a.onLayoutEnd, A = [], S = 0; S < y; S++)
                A.push(0, 0, 0, 0);
              return T = _.createKernel(_2.fruchtermanBundle).setDispatch([m, 1, 1]).setBinding({
                u_Data: x,
                u_K: h,
                u_K2: c,
                u_Gravity: a.gravity,
                u_ClusterGravity: a.clusterGravity || a.gravity || 1,
                u_Speed: d,
                u_MaxDisplace: l,
                u_Clustering: v ? 1 : 0,
                u_Center: u,
                u_AttributeArray: g,
                u_ClusterCenters: A,
                MAX_EDGE_PER_VERTEX: E,
                VERTEX_COUNT: m
              }), v && (C = _.createKernel(_2.clusterBundle).setDispatch([y, 1, 1]).setBinding({
                u_Data: x,
                u_NodeAttributes: g,
                u_ClusterCenters: A,
                VERTEX_COUNT: m,
                CLUSTER_COUNT: y
              })), O = function() {
                return kc(L, void 0, void 0, function() {
                  var P, z;
                  return Rc(this, function(V) {
                    switch (V.label) {
                      case 0:
                        P = 0, V.label = 1;
                      case 1:
                        return P < s ? [4, T.execute()] : [3, 6];
                      case 2:
                        return V.sent(), v ? (C.setBinding({
                          u_Data: T
                        }), [4, C.execute()]) : [3, 4];
                      case 3:
                        V.sent(), T.setBinding({
                          u_ClusterCenters: C
                        }), V.label = 4;
                      case 4:
                        T.setBinding({
                          u_MaxDisplace: l *= 0.99
                        }), V.label = 5;
                      case 5:
                        return P++, [3, 1];
                      case 6:
                        return [4, T.getOutput()];
                      case 7:
                        return z = V.sent(), t ? n.postMessage({
                          type: Eoe.LAYOUT_MESSAGE.GPUEND,
                          vertexEdgeData: z
                          // edgeIndexBufferData,
                        }) : i.forEach(function(N, F) {
                          var q = z[4 * F], te = z[4 * F + 1];
                          N.x = q, N.y = te;
                        }), M && M(), [
                          2
                          /*return*/
                        ];
                    }
                  });
                });
              }, [4, O()];
            case 1:
              return R.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.getType = function() {
      return "fruchterman-gpu";
    }, e;
  }(boe.Base)
);
pl.FruchtermanGPULayout = xoe;
var gl = {}, Ka = {};
Object.defineProperty(Ka, "__esModule", { value: !0 });
Ka.aveMovementBundle = Ka.aveMovementCode = Ka.gForceBundle = Ka.gForceCode = void 0;
Ka.gForceCode = `
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 每个节点属性占两个数组中各一格
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;
Ka.gForceBundle = '{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';
Ka.aveMovementCode = `
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;
Ka.aveMovementBundle = '{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';
var woe = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), f0 = be && be.__awaiter || function(r, e, t, n) {
  function a(i) {
    return i instanceof t ? i : new t(function(o) {
      o(i);
    });
  }
  return new (t || (t = Promise))(function(i, o) {
    function s(l) {
      try {
        f(n.next(l));
      } catch (c) {
        o(c);
      }
    }
    function u(l) {
      try {
        f(n.throw(l));
      } catch (c) {
        o(c);
      }
    }
    function f(l) {
      l.done ? i(l.value) : a(l.value).then(s, u);
    }
    f((n = n.apply(r, e || [])).next());
  });
}, l0 = be && be.__generator || function(r, e) {
  var t = { label: 0, sent: function() {
    if (i[0] & 1)
      throw i[1];
    return i[1];
  }, trys: [], ops: [] }, n, a, i, o;
  return o = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function s(f) {
    return function(l) {
      return u([f, l]);
    };
  }
  function u(f) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; o && (o = 0, f[0] && (t = 0)), t; )
      try {
        if (n = 1, a && (i = f[0] & 2 ? a.return : f[0] ? a.throw || ((i = a.return) && i.call(a), 0) : a.next) && !(i = i.call(a, f[1])).done)
          return i;
        switch (a = 0, i && (f = [f[0] & 2, i.value]), f[0]) {
          case 0:
          case 1:
            i = f;
            break;
          case 4:
            return t.label++, { value: f[1], done: !1 };
          case 5:
            t.label++, a = f[1], f = [0];
            continue;
          case 7:
            f = t.ops.pop(), t.trys.pop();
            continue;
          default:
            if (i = t.trys, !(i = i.length > 0 && i[i.length - 1]) && (f[0] === 6 || f[0] === 2)) {
              t = 0;
              continue;
            }
            if (f[0] === 3 && (!i || f[1] > i[0] && f[1] < i[3])) {
              t.label = f[1];
              break;
            }
            if (f[0] === 6 && t.label < i[1]) {
              t.label = i[1], i = f;
              break;
            }
            if (i && t.label < i[2]) {
              t.label = i[2], t.ops.push(f);
              break;
            }
            i[2] && t.ops.pop(), t.trys.pop();
            continue;
        }
        f = e.call(r, t);
      } catch (l) {
        f = [6, l], a = 0;
      } finally {
        n = i = 0;
      }
    if (f[0] & 5)
      throw f[1];
    return { value: f[0] ? f[1] : void 0, done: !0 };
  }
};
Object.defineProperty(gl, "__esModule", { value: !0 });
gl.GForceGPULayout = void 0;
var _oe = Gr, gi = Dr(), M2 = BD, yi = $n, Moe = Sd, S2 = Ka, Soe = Si, Aoe = (
  /** @class */
  function(r) {
    woe(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.maxIteration = 1e3, n.edgeStrength = 200, n.nodeStrength = 1e3, n.coulombDisScale = 5e-3, n.damping = 0.9, n.maxSpeed = 1e3, n.minMovement = 0.5, n.interval = 0.02, n.factor = 1, n.linkDistance = 1, n.gravity = 10, n.workerEnabled = !1, n.nodes = [], n.edges = [], n.width = 300, n.height = 300, n.nodeMap = {}, n.nodeIdxMap = {}, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 2e3,
        gravity: 10,
        clustering: !1,
        clusterGravity: 10
      };
    }, e.prototype.execute = function() {
      return f0(this, void 0, void 0, function() {
        var t, n, a, i, o;
        return l0(this, function(s) {
          switch (s.label) {
            case 0:
              return t = this, n = t.nodes, !n || n.length === 0 ? (t.onLayoutEnd && t.onLayoutEnd(), [
                2
                /*return*/
              ]) : (!t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight), t.center || (t.center = [t.width / 2, t.height / 2]), a = t.center, n.length === 1 ? (n[0].x = a[0], n[0].y = a[1], t.onLayoutEnd && t.onLayoutEnd(), [
                2
                /*return*/
              ]) : (i = {}, o = {}, n.forEach(function(u, f) {
                (0, gi.isNumber)(u.x) || (u.x = Math.random() * t.width), (0, gi.isNumber)(u.y) || (u.y = Math.random() * t.height), i[u.id] = u, o[u.id] = f;
              }), t.nodeMap = i, t.nodeIdxMap = o, t.nodeStrength = (0, yi.proccessToFunc)(t.nodeStrength, 1), t.edgeStrength = (0, yi.proccessToFunc)(t.edgeStrength, 1), [4, t.run()]));
            case 1:
              return s.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.executeWithWorker = function(t, n) {
      var a = this, i = a.nodes, o = a.center;
      if (!(!i || i.length === 0)) {
        if (i.length === 1) {
          i[0].x = o[0], i[0].y = o[1];
          return;
        }
        var s = {}, u = {};
        i.forEach(function(f, l) {
          (0, gi.isNumber)(f.x) || (f.x = Math.random() * a.width), (0, gi.isNumber)(f.y) || (f.y = Math.random() * a.height), s[f.id] = f, u[f.id] = l;
        }), a.nodeMap = s, a.nodeIdxMap = u, a.nodeStrength = (0, yi.proccessToFunc)(a.nodeStrength, 1), a.edgeStrength = (0, yi.proccessToFunc)(a.edgeStrength, 1), a.run(t, n);
      }
    }, e.prototype.run = function(t, n) {
      return f0(this, void 0, void 0, function() {
        var a, i, o, s, u, f, l, c, h, d, v, p, g, y, m, b, E, x, w, _, M, A, S, T, C, O, L, R = this;
        return l0(this, function(P) {
          switch (P.label) {
            case 0:
              for (a = this, i = a.nodes, o = a.edges, s = a.maxIteration, !a.width && typeof window < "u" && (a.width = window.innerWidth), !a.height && typeof window < "u" && (a.height = window.innerHeight), u = i.length, a.linkDistance = (0, yi.proccessToFunc)(a.linkDistance), a.edgeStrength = (0, yi.proccessToFunc)(a.edgeStrength), f = (0, yi.buildTextureDataWithTwoEdgeAttr)(i, o, a.linkDistance, a.edgeStrength), l = f.maxEdgePerVetex, c = f.array, a.degrees = (0, Moe.getDegree)(i.length, a.nodeIdxMap, o).map(function(z) {
                return z.all;
              }), h = [], d = [], v = [], p = [], g = [], y = [], m = [], a.getMass || (a.getMass = function(z) {
                return a.degrees[a.nodeIdxMap[z.id]] || 1;
              }), b = a.gravity, E = a.center, i.forEach(function(z, V) {
                h.push(a.getMass(z)), d.push(a.nodeStrength(z)), a.degrees[V] || (a.degrees[V] = 0);
                var N = [E[0], E[1], b];
                if (a.getCenter) {
                  var F = a.getCenter(z, a.degrees[V]);
                  F && (0, gi.isNumber)(F[0]) && (0, gi.isNumber)(F[1]) && (0, gi.isNumber)(F[2]) && (N = F);
                }
                v.push(N[0]), p.push(N[1]), g.push(N[2]), (0, gi.isNumber)(z.fx) && (0, gi.isNumber)(z.fy) ? (y.push(z.fx || 1e-3), m.push(z.fy || 1e-3)) : (y.push(0), m.push(0));
              }), x = (0, yi.arrayToTextureData)([
                h,
                a.degrees,
                d,
                y
              ]), w = (0, yi.arrayToTextureData)([
                v,
                p,
                g,
                m
              ]), _ = a.workerEnabled, _ ? M = M2.World.create({
                canvas: t,
                engineOptions: {
                  supportCompute: !0
                }
              }) : M = M2.World.create({
                engineOptions: {
                  supportCompute: !0
                }
              }), A = a.onLayoutEnd, S = [], c.forEach(function(z) {
                S.push(z);
              }), T = 0; T < 4; T++)
                S.push(0);
              return C = M.createKernel(S2.gForceBundle).setDispatch([u, 1, 1]).setBinding({
                u_Data: c,
                u_damping: a.damping,
                u_maxSpeed: a.maxSpeed,
                u_minMovement: a.minMovement,
                u_coulombDisScale: a.coulombDisScale,
                u_factor: a.factor,
                u_NodeAttributeArray1: x,
                u_NodeAttributeArray2: w,
                MAX_EDGE_PER_VERTEX: l,
                VERTEX_COUNT: u,
                u_AveMovement: S,
                u_interval: a.interval
                // 每次迭代更新，首次设置为 interval，在 onIterationCompleted 中更新
              }), O = M.createKernel(S2.aveMovementBundle).setDispatch([1, 1, 1]).setBinding({
                u_Data: c,
                VERTEX_COUNT: u,
                u_AveMovement: [0, 0, 0, 0]
              }), L = function() {
                return f0(R, void 0, void 0, function() {
                  var z, V, N;
                  return l0(this, function(F) {
                    switch (F.label) {
                      case 0:
                        z = 0, F.label = 1;
                      case 1:
                        return z < s ? [4, C.execute()] : [3, 5];
                      case 2:
                        return F.sent(), O.setBinding({
                          u_Data: C
                        }), [4, O.execute()];
                      case 3:
                        F.sent(), V = Math.max(0.02, a.interval - z * 2e-3), C.setBinding({
                          u_interval: V,
                          u_AveMovement: O
                        }), F.label = 4;
                      case 4:
                        return z++, [3, 1];
                      case 5:
                        return [4, C.getOutput()];
                      case 6:
                        return N = F.sent(), t ? n.postMessage({
                          type: Soe.LAYOUT_MESSAGE.GPUEND,
                          vertexEdgeData: N
                          // edgeIndexBufferData,
                        }) : i.forEach(function(q, te) {
                          var re = N[4 * te], J = N[4 * te + 1];
                          q.x = re, q.y = J;
                        }), A && A(), [
                          2
                          /*return*/
                        ];
                    }
                  });
                });
              }, [4, L()];
            case 1:
              return P.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.getType = function() {
      return "gForce-gpu";
    }, e;
  }(_oe.Base)
);
gl.GForceGPULayout = Aoe;
var yl = {}, Coe = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}();
Object.defineProperty(yl, "__esModule", { value: !0 });
yl.ComboForceLayout = void 0;
var Toe = Gr, $t = Dr(), Ioe = (
  /** @class */
  function(r) {
    Coe(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.center = [0, 0], n.maxIteration = 100, n.gravity = 10, n.comboGravity = 10, n.linkDistance = 10, n.alpha = 1, n.alphaMin = 1e-3, n.alphaDecay = 1 - Math.pow(n.alphaMin, 1 / 300), n.alphaTarget = 0, n.velocityDecay = 0.6, n.edgeStrength = 0.6, n.nodeStrength = 30, n.preventOverlap = !1, n.preventNodeOverlap = !1, n.preventComboOverlap = !1, n.collideStrength = void 0, n.nodeCollideStrength = 0.5, n.comboCollideStrength = 0.5, n.comboSpacing = 20, n.comboPadding = 10, n.optimizeRangeFactor = 1, n.onTick = function() {
      }, n.onLayoutEnd = function() {
      }, n.depthAttractiveForceScale = 1, n.depthRepulsiveForceScale = 2, n.nodes = [], n.edges = [], n.combos = [], n.comboTrees = [], n.width = 300, n.height = 300, n.bias = [], n.nodeMap = {}, n.oriComboMap = {}, n.indexMap = {}, n.comboMap = {}, n.previousLayouted = !1, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        maxIteration: 100,
        center: [0, 0],
        gravity: 10,
        speed: 1,
        comboGravity: 30,
        preventOverlap: !1,
        preventComboOverlap: !0,
        preventNodeOverlap: !0,
        nodeSpacing: void 0,
        collideStrength: void 0,
        nodeCollideStrength: 0.5,
        comboCollideStrength: 0.5,
        comboSpacing: 20,
        comboPadding: 10,
        edgeStrength: 0.6,
        nodeStrength: 30,
        linkDistance: 10
      };
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.center;
      if (t.comboTree = {
        id: "comboTreeRoot",
        depth: -1,
        children: t.comboTrees
      }, !n || n.length === 0) {
        t.onLayoutEnd && t.onLayoutEnd();
        return;
      }
      if (n.length === 1) {
        n[0].x = a[0], n[0].y = a[1], t.onLayoutEnd && t.onLayoutEnd();
        return;
      }
      t.initVals(), t.run(), t.onLayoutEnd && t.onLayoutEnd();
    }, e.prototype.run = function() {
      var t = this, n = t.nodes, a = t.previousLayouted ? t.maxIteration / 5 : t.maxIteration;
      !t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight);
      var i = t.center, o = t.velocityDecay, s = t.comboMap;
      t.previousLayouted || t.initPos(s);
      for (var u = function(h) {
        var d = [];
        n.forEach(function(v, p) {
          d[p] = { x: 0, y: 0 };
        }), t.applyCalculate(d), t.applyComboCenterForce(d), n.forEach(function(v, p) {
          !(0, $t.isNumber)(v.x) || !(0, $t.isNumber)(v.y) || (v.x += d[p].x * o, v.y += d[p].y * o);
        }), t.alpha += (t.alphaTarget - t.alpha) * t.alphaDecay, t.onTick();
      }, f = 0; f < a; f++)
        u();
      var l = [0, 0];
      n.forEach(function(h) {
        !(0, $t.isNumber)(h.x) || !(0, $t.isNumber)(h.y) || (l[0] += h.x, l[1] += h.y);
      }), l[0] /= n.length, l[1] /= n.length;
      var c = [i[0] - l[0], i[1] - l[1]];
      n.forEach(function(h, d) {
        !(0, $t.isNumber)(h.x) || !(0, $t.isNumber)(h.y) || (h.x += c[0], h.y += c[1]);
      }), t.combos.forEach(function(h) {
        var d = s[h.id];
        d && d.empty && (h.x = d.cx || h.x, h.y = d.cy || h.y);
      }), t.previousLayouted = !0;
    }, e.prototype.initVals = function() {
      var t = this, n = t.edges, a = t.nodes, i = t.combos, o = {}, s = {}, u = {};
      a.forEach(function(z, V) {
        s[z.id] = z, u[z.id] = V;
      }), t.nodeMap = s, t.indexMap = u;
      var f = {};
      i.forEach(function(z) {
        f[z.id] = z;
      }), t.oriComboMap = f, t.comboMap = t.getComboMap();
      var l = t.preventOverlap;
      t.preventComboOverlap = t.preventComboOverlap || l, t.preventNodeOverlap = t.preventNodeOverlap || l;
      var c = t.collideStrength;
      c && (t.comboCollideStrength = c, t.nodeCollideStrength = c), t.comboCollideStrength = t.comboCollideStrength ? t.comboCollideStrength : 0, t.nodeCollideStrength = t.nodeCollideStrength ? t.nodeCollideStrength : 0;
      for (var h = 0; h < n.length; ++h) {
        var d = (0, $t.getEdgeTerminal)(n[h], "source"), v = (0, $t.getEdgeTerminal)(n[h], "target");
        o[d] ? o[d]++ : o[d] = 1, o[v] ? o[v]++ : o[v] = 1;
      }
      for (var p = [], h = 0; h < n.length; ++h) {
        var d = (0, $t.getEdgeTerminal)(n[h], "source"), v = (0, $t.getEdgeTerminal)(n[h], "target");
        p[h] = o[d] / (o[d] + o[v]);
      }
      this.bias = p;
      var g = t.nodeSize, y = t.nodeSpacing, m, b;
      if ((0, $t.isNumber)(y) ? b = function() {
        return y;
      } : (0, $t.isFunction)(y) ? b = y : b = function() {
        return 0;
      }, this.nodeSpacing = b, !g)
        m = function(z) {
          if (z.size) {
            if ((0, $t.isArray)(z.size)) {
              var V = z.size[0] > z.size[1] ? z.size[0] : z.size[1];
              return V / 2;
            }
            if ((0, $t.isObject)(z.size)) {
              var V = z.size.width > z.size.height ? z.size.width : z.size.height;
              return V / 2;
            }
            return z.size / 2;
          }
          return 10;
        };
      else if ((0, $t.isFunction)(g))
        m = function(z) {
          return g(z);
        };
      else if ((0, $t.isArray)(g)) {
        var E = g[0] > g[1] ? g[0] : g[1], x = E / 2;
        m = function(z) {
          return x;
        };
      } else {
        var w = g / 2;
        m = function(z) {
          return w;
        };
      }
      this.nodeSize = m;
      var _ = t.comboSpacing, M;
      (0, $t.isNumber)(_) ? M = function() {
        return _;
      } : (0, $t.isFunction)(_) ? M = _ : M = function() {
        return 0;
      }, this.comboSpacing = M;
      var A = t.comboPadding, S;
      (0, $t.isNumber)(A) ? S = function() {
        return A;
      } : (0, $t.isArray)(A) ? S = function() {
        return Math.max.apply(null, A);
      } : (0, $t.isFunction)(A) ? S = A : S = function() {
        return 0;
      }, this.comboPadding = S;
      var T = this.linkDistance, C;
      T || (T = 10), (0, $t.isNumber)(T) ? C = function(z) {
        return T;
      } : C = T, this.linkDistance = C;
      var O = this.edgeStrength, L;
      O || (O = 1), (0, $t.isNumber)(O) ? L = function(z) {
        return O;
      } : L = O, this.edgeStrength = L;
      var R = this.nodeStrength, P;
      R || (R = 30), (0, $t.isNumber)(R) ? P = function(z) {
        return R;
      } : P = R, this.nodeStrength = P;
    }, e.prototype.initPos = function(t) {
      var n = this, a = n.nodes;
      a.forEach(function(i, o) {
        var s = i.comboId, u = t[s];
        s && u ? (i.x = u.cx + 100 / (o + 1), i.y = u.cy + 100 / (o + 1)) : (i.x = 100 / (o + 1), i.y = 100 / (o + 1));
      });
    }, e.prototype.getComboMap = function() {
      var t = this, n = t.nodeMap, a = t.comboTrees, i = t.oriComboMap, o = {};
      return (a || []).forEach(function(s) {
        var u = [];
        (0, $t.traverseTreeUp)(s, function(f) {
          if (f.itemType === "node" || !i[f.id])
            return !0;
          if (o[f.id] === void 0) {
            var l = {
              id: f.id,
              name: f.id,
              cx: 0,
              cy: 0,
              count: 0,
              depth: t.oriComboMap[f.id].depth || 0,
              children: []
            };
            o[f.id] = l;
          }
          var c = f.children;
          c && c.forEach(function(v) {
            if (!o[v.id] && !n[v.id])
              return !0;
            u.push(v);
          });
          var h = o[f.id];
          if (h.cx = 0, h.cy = 0, u.length === 0) {
            h.empty = !0;
            var d = i[f.id];
            h.cx = d.x, h.cy = d.y;
          }
          return u.forEach(function(v) {
            if (h.count++, v.itemType !== "node") {
              var p = o[v.id];
              (0, $t.isNumber)(p.cx) && (h.cx += p.cx), (0, $t.isNumber)(p.cy) && (h.cy += p.cy);
              return;
            }
            var g = n[v.id];
            g && ((0, $t.isNumber)(g.x) && (h.cx += g.x), (0, $t.isNumber)(g.y) && (h.cy += g.y));
          }), h.cx /= h.count || 1, h.cy /= h.count || 1, h.children = u, !0;
        });
      }), o;
    }, e.prototype.applyComboCenterForce = function(t) {
      var n = this, a = n.gravity, i = n.comboGravity || a, o = this.alpha, s = n.comboTrees, u = n.indexMap, f = n.nodeMap, l = n.comboMap;
      (s || []).forEach(function(c) {
        (0, $t.traverseTreeUp)(c, function(h) {
          if (h.itemType === "node")
            return !0;
          var d = l[h.id];
          if (!d)
            return !0;
          var v = l[h.id], p = (v.depth + 1) / 10 * 0.5, g = v.cx, y = v.cy;
          return v.cx = 0, v.cy = 0, v.children.forEach(function(m) {
            if (m.itemType !== "node") {
              var b = l[m.id];
              b && (0, $t.isNumber)(b.cx) && (v.cx += b.cx), b && (0, $t.isNumber)(b.cy) && (v.cy += b.cy);
              return;
            }
            var E = f[m.id], x = E.x - g || 5e-3, w = E.y - y || 5e-3, _ = Math.sqrt(x * x + w * w), M = u[E.id], A = i * o / _ * p;
            t[M].x -= x * A, t[M].y -= w * A, (0, $t.isNumber)(E.x) && (v.cx += E.x), (0, $t.isNumber)(E.y) && (v.cy += E.y);
          }), v.cx /= v.count || 1, v.cy /= v.count || 1, !0;
        });
      });
    }, e.prototype.applyCalculate = function(t) {
      var n = this, a = n.comboMap, i = n.nodes, o = {};
      i.forEach(function(u, f) {
        i.forEach(function(l, c) {
          if (!(f < c)) {
            var h = u.x - l.x || 5e-3, d = u.y - l.y || 5e-3, v = h * h + d * d, p = Math.sqrt(v);
            v < 1 && (v = p), o["".concat(u.id, "-").concat(l.id)] = { vx: h, vy: d, vl2: v, vl: p }, o["".concat(l.id, "-").concat(u.id)] = { vl2: v, vl: p, vx: -h, vy: -d };
          }
        });
      }), n.updateComboSizes(a), n.calRepulsive(t, o), n.calAttractive(t, o);
      var s = n.preventComboOverlap;
      s && n.comboNonOverlapping(t, a);
    }, e.prototype.updateComboSizes = function(t) {
      var n = this, a = n.comboTrees, i = n.nodeMap, o = n.nodeSize, s = n.comboSpacing, u = n.comboPadding;
      (a || []).forEach(function(f) {
        var l = [];
        (0, $t.traverseTreeUp)(f, function(c) {
          if (c.itemType === "node")
            return !0;
          var h = t[c.id];
          if (!h)
            return !1;
          var d = c.children;
          d && d.forEach(function(g) {
            !t[g.id] && !i[g.id] || l.push(g);
          }), h.minX = 1 / 0, h.minY = 1 / 0, h.maxX = -1 / 0, h.maxY = -1 / 0, l.forEach(function(g) {
            if (g.itemType !== "node")
              return !0;
            var y = i[g.id];
            if (!y)
              return !0;
            var m = o(y), b = y.x - m, E = y.y - m, x = y.x + m, w = y.y + m;
            h.minX > b && (h.minX = b), h.minY > E && (h.minY = E), h.maxX < x && (h.maxX = x), h.maxY < w && (h.maxY = w);
          });
          var v = n.oriComboMap[c.id].size || 10;
          (0, $t.isArray)(v) && (v = v[0]);
          var p = Math.max(h.maxX - h.minX, h.maxY - h.minY, v);
          return h.r = p / 2 + s(h) / 2 + u(h), !0;
        });
      });
    }, e.prototype.comboNonOverlapping = function(t, n) {
      var a = this, i = a.comboTree, o = a.comboCollideStrength, s = a.indexMap, u = a.nodeMap;
      (0, $t.traverseTreeUp)(i, function(f) {
        if (!n[f.id] && !u[f.id] && f.id !== "comboTreeRoot")
          return !1;
        var l = f.children;
        return l && l.length > 1 && l.forEach(function(c, h) {
          if (c.itemType === "node")
            return !1;
          var d = n[c.id];
          d && l.forEach(function(v, p) {
            if (h <= p || v.itemType === "node")
              return !1;
            var g = n[v.id];
            if (!g)
              return !1;
            var y = d.cx - g.cx || 5e-3, m = d.cy - g.cy || 5e-3, b = y * y + m * m, E = d.r || 1, x = g.r || 1, w = E + x, _ = x * x, M = E * E;
            if (b < w * w) {
              var A = c.children;
              if (!A || A.length === 0)
                return !1;
              var S = v.children;
              if (!S || S.length === 0)
                return !1;
              var T = Math.sqrt(b), C = (w - T) / T * o, O = y * C, L = m * C, R = _ / (M + _), P = 1 - R;
              A.forEach(function(z) {
                if (z.itemType !== "node")
                  return !1;
                if (u[z.id]) {
                  var V = s[z.id];
                  S.forEach(function(N) {
                    if (N.itemType !== "node" || !u[N.id])
                      return !1;
                    var F = s[N.id];
                    t[V].x += O * R, t[V].y += L * R, t[F].x -= O * P, t[F].y -= L * P;
                  });
                }
              });
            }
          });
        }), !0;
      });
    }, e.prototype.calRepulsive = function(t, n) {
      var a = this, i = a.nodes, o = a.width * a.optimizeRangeFactor, s = a.nodeStrength, u = a.alpha, f = a.nodeCollideStrength, l = a.preventNodeOverlap, c = a.nodeSize, h = a.nodeSpacing, d = a.depthRepulsiveForceScale, v = a.center;
      i.forEach(function(p, g) {
        if (!(!p.x || !p.y)) {
          if (v) {
            var y = a.gravity, m = p.x - v[0] || 5e-3, b = p.y - v[1] || 5e-3, E = Math.sqrt(m * m + b * b);
            t[g].x -= m * y * u / E, t[g].y -= b * y * u / E;
          }
          i.forEach(function(x, w) {
            if (g !== w && !(!x.x || !x.y)) {
              var _ = n["".concat(p.id, "-").concat(x.id)], M = _.vl2, A = _.vl;
              if (!(A > o)) {
                var S = n["".concat(p.id, "-").concat(x.id)], T = S.vx, C = S.vy, O = Math.log(Math.abs(x.depth - p.depth) / 10) + 1 || 1;
                O = O < 1 ? 1 : O, x.comboId !== p.comboId && (O += 1);
                var L = O ? Math.pow(d, O) : 1, R = s(x) * u / M * L;
                if (t[g].x += T * R, t[g].y += C * R, g < w && l) {
                  var P = c(p) + h(p) || 1, z = c(x) + h(x) || 1, V = P + z;
                  if (M < V * V) {
                    var N = (V - A) / A * f, F = z * z, q = F / (P * P + F), te = T * N, re = C * N;
                    t[g].x += te * q, t[g].y += re * q, q = 1 - q, t[w].x -= te * q, t[w].y -= re * q;
                  }
                }
              }
            }
          });
        }
      });
    }, e.prototype.calAttractive = function(t, n) {
      var a = this, i = a.edges, o = a.linkDistance, s = a.alpha, u = a.edgeStrength, f = a.bias, l = a.depthAttractiveForceScale;
      i.forEach(function(c, h) {
        var d = (0, $t.getEdgeTerminal)(c, "source"), v = (0, $t.getEdgeTerminal)(c, "target");
        if (!(!d || !v || d === v)) {
          var p = a.indexMap[d], g = a.indexMap[v], y = a.nodeMap[d], m = a.nodeMap[v];
          if (!(!y || !m)) {
            var b = y.depth === m.depth ? 0 : Math.log(Math.abs(y.depth - m.depth) / 10);
            y.comboId === m.comboId && (b = b / 2);
            var E = b ? Math.pow(l, b) : 1;
            if (y.comboId !== m.comboId && E === 1 ? E = l / 2 : y.comboId === m.comboId && (E = 2), !(!(0, $t.isNumber)(m.x) || !(0, $t.isNumber)(y.x) || !(0, $t.isNumber)(m.y) || !(0, $t.isNumber)(y.y))) {
              var x = n["".concat(v, "-").concat(d)], w = x.vl, _ = x.vx, M = x.vy, A = (w - o(c)) / w * s * u(c) * E, S = _ * A, T = M * A, C = f[h];
              t[g].x -= S * C, t[g].y -= T * C, t[p].x += S * (1 - C), t[p].y += T * (1 - C);
            }
          }
        }
      });
    }, e.prototype.getType = function() {
      return "comboForce";
    }, e;
  }(Toe.Base)
);
yl.ComboForceLayout = Ioe;
var Ju = {}, A2;
function FD() {
  if (A2)
    return Ju;
  A2 = 1;
  var r = be && be.__extends || /* @__PURE__ */ function() {
    var s = function(u, f) {
      return s = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(l, c) {
        l.__proto__ = c;
      } || function(l, c) {
        for (var h in c)
          Object.prototype.hasOwnProperty.call(c, h) && (l[h] = c[h]);
      }, s(u, f);
    };
    return function(u, f) {
      if (typeof f != "function" && f !== null)
        throw new TypeError("Class extends value " + String(f) + " is not a constructor or null");
      s(u, f);
      function l() {
        this.constructor = u;
      }
      u.prototype = f === null ? Object.create(f) : (l.prototype = f.prototype, new l());
    };
  }(), e = be && be.__assign || function() {
    return e = Object.assign || function(s) {
      for (var u, f = 1, l = arguments.length; f < l; f++) {
        u = arguments[f];
        for (var c in u)
          Object.prototype.hasOwnProperty.call(u, c) && (s[c] = u[c]);
      }
      return s;
    }, e.apply(this, arguments);
  };
  Object.defineProperty(Ju, "__esModule", { value: !0 }), Ju.ComboCombinedLayout = void 0;
  var t = Si, n = Gr, a = Dr(), i = VD(), o = (
    /** @class */
    function(s) {
      r(u, s);
      function u(f) {
        var l = s.call(this) || this;
        return l.center = [0, 0], l.nodes = [], l.edges = [], l.combos = [], l.comboEdges = [], l.comboPadding = 10, l.comboTrees = [], l.updateCfg(f), l;
      }
      return u.prototype.getDefaultCfg = function() {
        return {};
      }, u.prototype.execute = function() {
        var f = this, l = f.nodes, c = f.center;
        if (!l || l.length === 0) {
          f.onLayoutEnd && f.onLayoutEnd();
          return;
        }
        if (l.length === 1) {
          l[0].x = c[0], l[0].y = c[1], f.onLayoutEnd && f.onLayoutEnd();
          return;
        }
        f.initVals(), f.run(), f.onLayoutEnd && f.onLayoutEnd();
      }, u.prototype.run = function() {
        var f, l = this, c = l.nodes, h = l.edges, d = l.combos, v = l.comboEdges, p = l.center, g = {};
        c.forEach(function(R) {
          g[R.id] = R;
        });
        var y = {};
        d.forEach(function(R) {
          y[R.id] = R;
        });
        var m = l.getInnerGraphs(g), b = [], E = [], x = {}, w = !0;
        this.comboTrees.forEach(function(R) {
          var P = m[R.id];
          if (P) {
            var z = e(e({}, R), { x: P.x || y[R.id].x, y: P.y || y[R.id].y, fx: P.fx || y[R.id].fx, fy: P.fy || y[R.id].fy, mass: P.mass || y[R.id].mass, size: P.size });
            E.push(z), !isNaN(z.x) && z.x !== 0 && !isNaN(z.y) && z.y !== 0 ? w = !1 : (z.x = Math.random() * 100, z.y = Math.random() * 100), b.push(R.id), (0, a.traverseTreeUp)(R, function(V) {
              return V.id !== R.id && (x[V.id] = R.id), !0;
            });
          }
        }), c.forEach(function(R) {
          if (!(R.comboId && y[R.comboId])) {
            var P = e({}, R);
            E.push(P), !isNaN(P.x) && P.x !== 0 && !isNaN(P.y) && P.y !== 0 ? w = !1 : (P.x = Math.random() * 100, P.y = Math.random() * 100), b.push(R.id);
          }
        });
        var _ = [];
        if (h.concat(v).forEach(function(R) {
          var P = x[R.source] || R.source, z = x[R.target] || R.target;
          P !== z && b.includes(P) && b.includes(z) && _.push({
            source: P,
            target: z
          });
        }), E != null && E.length) {
          if (E.length === 1)
            E[0].x = p[0], E[0].y = p[1];
          else {
            var M = {
              nodes: E,
              edges: _
            }, A = this.outerLayout || new i.GForceLayout({
              gravity: 1,
              factor: 4,
              linkDistance: function(R, P, z) {
                var V, N, F = ((((V = P.size) === null || V === void 0 ? void 0 : V[0]) || 30) + (((N = z.size) === null || N === void 0 ? void 0 : N[0]) || 30)) / 2;
                return Math.min(F * 1.5, 700);
              }
            }), S = (f = A.getType) === null || f === void 0 ? void 0 : f.call(A);
            if (A.updateCfg({
              center: p,
              kg: 5,
              preventOverlap: !0,
              animate: !1
            }), w && t.FORCE_LAYOUT_TYPE_MAP[S]) {
              var T = E.length < 100 ? new i.MDSLayout() : new i.GridLayout();
              T.layout(M);
            }
            A.layout(M);
          }
          E.forEach(function(R) {
            var P = m[R.id];
            if (!P) {
              var z = g[R.id];
              z && (z.x = R.x, z.y = R.y);
              return;
            }
            P.visited = !0, P.x = R.x, P.y = R.y, P.nodes.forEach(function(V) {
              V.x += R.x, V.y += R.y;
            });
          });
        }
        for (var C = Object.keys(m), O = function(R) {
          var P = C[R], z = m[P];
          if (!z)
            return "continue";
          z.nodes.forEach(function(V) {
            z.visited || (V.x += z.x || 0, V.y += z.y || 0), g[V.id] && (g[V.id].x = V.x, g[V.id].y = V.y);
          }), y[P] && (y[P].x = z.x, y[P].y = z.y);
        }, L = C.length - 1; L >= 0; L--)
          O(L);
        return { nodes: c, edges: h, combos: d, comboEdges: v };
      }, u.prototype.getInnerGraphs = function(f) {
        var l = this, c = l.comboTrees, h = l.nodeSize, d = l.edges, v = l.comboPadding, p = l.spacing, g = {}, y = this.innerLayout || new i.ConcentricLayout({ type: "concentric", sortBy: "id" });
        return y.center = [0, 0], y.preventOverlap = !0, y.nodeSpacing = p, (c || []).forEach(function(m) {
          (0, a.traverseTreeUp)(m, function(b) {
            var E, x = (v == null ? void 0 : v(b)) || 10;
            if ((0, a.isArray)(x) && (x = Math.max.apply(Math, x)), !((E = b.children) === null || E === void 0) && E.length) {
              var _ = b.children.map(function(N) {
                if (N.itemType === "combo")
                  return g[N.id];
                var F = f[N.id] || {};
                return e(e({}, F), N);
              }), M = _.map(function(N) {
                return N.id;
              }), A = {
                nodes: _,
                edges: d.filter(function(N) {
                  return M.includes(N.source) && M.includes(N.target);
                })
              }, S = 1 / 0;
              _.forEach(function(N) {
                var F;
                N.size || (N.size = ((F = g[N.id]) === null || F === void 0 ? void 0 : F.size) || (h == null ? void 0 : h(N)) || [30, 30]), (0, a.isNumber)(N.size) && (N.size = [N.size, N.size]), S > N.size[0] && (S = N.size[0]), S > N.size[1] && (S = N.size[1]);
              }), y.layout(A);
              var T = (0, a.getLayoutBBox)(_), C = T.minX, O = T.minY, L = T.maxX, R = T.maxY, P = { x: (L + C) / 2, y: (R + O) / 2 };
              A.nodes.forEach(function(N) {
                N.x -= P.x, N.y -= P.y;
              });
              var z = Math.max(L - C, S) + x * 2, V = Math.max(R - O, S) + x * 2;
              g[b.id] = {
                id: b.id,
                nodes: _,
                size: [z, V]
              };
            } else if (b.itemType === "combo") {
              var w = x ? [x * 2, x * 2] : [30, 30];
              g[b.id] = {
                id: b.id,
                nodes: [],
                size: w
              };
            }
            return !0;
          });
        }), g;
      }, u.prototype.initVals = function() {
        var f = this, l = f.nodeSize, c = f.spacing, h, d;
        if ((0, a.isNumber)(c) ? d = function() {
          return c;
        } : (0, a.isFunction)(c) ? d = c : d = function() {
          return 0;
        }, this.spacing = d, !l)
          h = function(b) {
            var E = d(b);
            if (b.size) {
              if ((0, a.isArray)(b.size)) {
                var x = b.size[0] > b.size[1] ? b.size[0] : b.size[1];
                return (x + E) / 2;
              }
              if ((0, a.isObject)(b.size)) {
                var x = b.size.width > b.size.height ? b.size.width : b.size.height;
                return (x + E) / 2;
              }
              return (b.size + E) / 2;
            }
            return 10 + E / 2;
          };
        else if ((0, a.isFunction)(l))
          h = function(b) {
            var E = l(b), x = d(b);
            if ((0, a.isArray)(b.size)) {
              var w = b.size[0] > b.size[1] ? b.size[0] : b.size[1];
              return (w + x) / 2;
            }
            return ((E || 10) + x) / 2;
          };
        else if ((0, a.isArray)(l)) {
          var v = l[0] > l[1] ? l[0] : l[1], p = v / 2;
          h = function(b) {
            return p + d(b) / 2;
          };
        } else {
          var g = l / 2;
          h = function(b) {
            return g + d(b) / 2;
          };
        }
        this.nodeSize = h;
        var y = f.comboPadding, m;
        (0, a.isNumber)(y) ? m = function() {
          return y;
        } : (0, a.isArray)(y) ? m = function() {
          return Math.max.apply(null, y);
        } : (0, a.isFunction)(y) ? m = y : m = function() {
          return 0;
        }, this.comboPadding = m;
      }, u.prototype.getType = function() {
        return "comboCombined";
      }, u;
    }(n.Base)
  );
  return Ju.ComboCombinedLayout = o, Ju;
}
var ml = {}, Zm = {};
Object.defineProperty(Zm, "__esModule", { value: !0 });
var Ooe = (
  /** @class */
  function() {
    function r(e) {
      this.id = e.id || 0, this.rx = e.rx, this.ry = e.ry, this.fx = 0, this.fy = 0, this.mass = e.mass, this.degree = e.degree, this.g = e.g || 0;
    }
    return r.prototype.distanceTo = function(e) {
      var t = this.rx - e.rx, n = this.ry - e.ry;
      return Math.hypot(t, n);
    }, r.prototype.setPos = function(e, t) {
      this.rx = e, this.ry = t;
    }, r.prototype.resetForce = function() {
      this.fx = 0, this.fy = 0;
    }, r.prototype.addForce = function(e) {
      var t = e.rx - this.rx, n = e.ry - this.ry, a = Math.hypot(t, n);
      a = a < 1e-4 ? 1e-4 : a;
      var i = this.g * (this.degree + 1) * (e.degree + 1) / a;
      this.fx += i * t / a, this.fy += i * n / a;
    }, r.prototype.in = function(e) {
      return e.contains(this.rx, this.ry);
    }, r.prototype.add = function(e) {
      var t = this.mass + e.mass, n = (this.rx * this.mass + e.rx * e.mass) / t, a = (this.ry * this.mass + e.ry * e.mass) / t, i = this.degree + e.degree, o = {
        rx: n,
        ry: a,
        mass: t,
        degree: i
      };
      return new r(o);
    }, r;
  }()
);
Zm.default = Ooe;
var Qm = {};
Object.defineProperty(Qm, "__esModule", { value: !0 });
var Doe = (
  /** @class */
  function() {
    function r(e) {
      this.xmid = e.xmid, this.ymid = e.ymid, this.length = e.length, this.massCenter = e.massCenter || [0, 0], this.mass = e.mass || 1;
    }
    return r.prototype.getLength = function() {
      return this.length;
    }, r.prototype.contains = function(e, t) {
      var n = this.length / 2;
      return e <= this.xmid + n && e >= this.xmid - n && t <= this.ymid + n && t >= this.ymid - n;
    }, r.prototype.NW = function() {
      var e = this.xmid - this.length / 4, t = this.ymid + this.length / 4, n = this.length / 2, a = {
        xmid: e,
        ymid: t,
        length: n
      }, i = new r(a);
      return i;
    }, r.prototype.NE = function() {
      var e = this.xmid + this.length / 4, t = this.ymid + this.length / 4, n = this.length / 2, a = {
        xmid: e,
        ymid: t,
        length: n
      }, i = new r(a);
      return i;
    }, r.prototype.SW = function() {
      var e = this.xmid - this.length / 4, t = this.ymid - this.length / 4, n = this.length / 2, a = {
        xmid: e,
        ymid: t,
        length: n
      }, i = new r(a);
      return i;
    }, r.prototype.SE = function() {
      var e = this.xmid + this.length / 4, t = this.ymid - this.length / 4, n = this.length / 2, a = {
        xmid: e,
        ymid: t,
        length: n
      }, i = new r(a);
      return i;
    }, r;
  }()
);
Qm.default = Doe;
var Jm = {};
Object.defineProperty(Jm, "__esModule", { value: !0 });
var Loe = (
  /** @class */
  function() {
    function r(e) {
      this.body = null, this.quad = null, this.NW = null, this.NE = null, this.SW = null, this.SE = null, this.theta = 0.5, e != null && (this.quad = e);
    }
    return r.prototype.insert = function(e) {
      if (this.body == null) {
        this.body = e;
        return;
      }
      this._isExternal() ? (this.quad && (this.NW = new r(this.quad.NW()), this.NE = new r(this.quad.NE()), this.SW = new r(this.quad.SW()), this.SE = new r(this.quad.SE())), this._putBody(this.body), this._putBody(e), this.body = this.body.add(e)) : (this.body = this.body.add(e), this._putBody(e));
    }, r.prototype._putBody = function(e) {
      this.quad && (e.in(this.quad.NW()) && this.NW ? this.NW.insert(e) : e.in(this.quad.NE()) && this.NE ? this.NE.insert(e) : e.in(this.quad.SW()) && this.SW ? this.SW.insert(e) : e.in(this.quad.SE()) && this.SE && this.SE.insert(e));
    }, r.prototype._isExternal = function() {
      return this.NW == null && this.NE == null && this.SW == null && this.SE == null;
    }, r.prototype.updateForce = function(e) {
      if (!(this.body == null || e === this.body))
        if (this._isExternal())
          e.addForce(this.body);
        else {
          var t = this.quad ? this.quad.getLength() : 0, n = this.body.distanceTo(e);
          t / n < this.theta ? e.addForce(this.body) : (this.NW && this.NW.updateForce(e), this.NE && this.NE.updateForce(e), this.SW && this.SW.updateForce(e), this.SE && this.SE.updateForce(e));
        }
    }, r;
  }()
);
Jm.default = Loe;
var Noe = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), e1 = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(ml, "__esModule", { value: !0 });
ml.ForceAtlas2Layout = void 0;
var Poe = Gr, mi = Dr(), koe = e1(Zm), Roe = e1(Qm), Boe = e1(Jm), Foe = (
  /** @class */
  function(r) {
    Noe(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.center = [0, 0], n.width = 300, n.height = 300, n.nodes = [], n.edges = [], n.kr = 5, n.kg = 1, n.mode = "normal", n.preventOverlap = !1, n.dissuadeHubs = !1, n.barnesHut = void 0, n.maxIteration = 0, n.ks = 0.1, n.ksmax = 10, n.tao = 0.1, n.onLayoutEnd = function() {
      }, n.prune = void 0, n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {};
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.onLayoutEnd, i = t.prune, o = t.maxIteration;
      !t.width && typeof window < "u" && (t.width = window.innerWidth), !t.height && typeof window < "u" && (t.height = window.innerHeight);
      for (var s = [], u = n.length, f = 0; f < u; f += 1) {
        var l = n[f], c = 10, h = 10;
        (0, mi.isNumber)(l.size) && (c = l.size, h = l.size), (0, mi.isArray)(l.size) ? (isNaN(l.size[0]) || (c = l.size[0]), isNaN(l.size[1]) || (h = l.size[1])) : (0, mi.isObject)(l.size) && (c = l.size.width, h = l.size.height), t.getWidth && !isNaN(t.getWidth(l)) && (h = t.getWidth(l)), t.getHeight && !isNaN(t.getHeight(l)) && (c = t.getHeight(l));
        var d = Math.max(c, h);
        s.push(d);
      }
      t.barnesHut === void 0 && u > 250 && (t.barnesHut = !0), t.prune === void 0 && u > 100 && (t.prune = !0), this.maxIteration === 0 && !t.prune ? (o = 250, u <= 200 && u > 100 ? o = 1e3 : u > 200 && (o = 1200), this.maxIteration = o) : this.maxIteration === 0 && i && (o = 100, u <= 200 && u > 100 ? o = 500 : u > 200 && (o = 950), this.maxIteration = o), t.kr || (t.kr = 50, u > 100 && u <= 500 ? t.kr = 20 : u > 500 && (t.kr = 1)), t.kg || (t.kg = 20, u > 100 && u <= 500 ? t.kg = 10 : u > 500 && (t.kg = 1)), this.nodes = t.updateNodesByForces(s), a();
    }, e.prototype.updateNodesByForces = function(t) {
      for (var n = this, a = n.edges, i = n.maxIteration, o = n.nodes, s = a.filter(function(_) {
        var M = (0, mi.getEdgeTerminal)(_, "source"), A = (0, mi.getEdgeTerminal)(_, "target");
        return M !== A;
      }), u = o.length, f = s.length, l = [], c = {}, h = {}, d = [], v = 0; v < u; v += 1)
        c[o[v].id] = v, l[v] = 0, (o[v].x === void 0 || isNaN(o[v].x)) && (o[v].x = Math.random() * 1e3), (o[v].y === void 0 || isNaN(o[v].y)) && (o[v].y = Math.random() * 1e3), d.push({ x: o[v].x, y: o[v].y });
      for (var v = 0; v < f; v += 1) {
        for (var p = void 0, g = void 0, y = 0, m = 0, b = 0; b < u; b += 1) {
          var E = (0, mi.getEdgeTerminal)(s[v], "source"), x = (0, mi.getEdgeTerminal)(s[v], "target");
          o[b].id === E ? (p = o[b], y = b) : o[b].id === x && (g = o[b], m = b), h[v] = { sourceIdx: y, targetIdx: m };
        }
        p && (l[c[p.id]] += 1), g && (l[c[g.id]] += 1);
      }
      var w = i;
      if (o = this.iterate(w, c, h, f, l, t), n.prune) {
        for (var b = 0; b < f; b += 1)
          l[h[b].sourceIdx] <= 1 ? (o[h[b].sourceIdx].x = o[h[b].targetIdx].x, o[h[b].sourceIdx].y = o[h[b].targetIdx].y) : l[h[b].targetIdx] <= 1 && (o[h[b].targetIdx].x = o[h[b].sourceIdx].x, o[h[b].targetIdx].y = o[h[b].sourceIdx].y);
        n.prune = !1, n.barnesHut = !1, w = 100, o = this.iterate(w, c, h, f, l, t);
      }
      return o;
    }, e.prototype.iterate = function(t, n, a, i, o, s) {
      for (var u = this, f = u.nodes, l = u.kr, c = u.preventOverlap, h = u.barnesHut, d = f.length, v = 0, p = 100, g = t, y = 50, m = [], b = [], E = [], x = 0; x < d; x += 1)
        if (m[2 * x] = 0, m[2 * x + 1] = 0, h) {
          var w = {
            id: x,
            rx: f[x].x,
            ry: f[x].y,
            mass: 1,
            g: l,
            degree: o[x]
          };
          E[x] = new koe.default(w);
        }
      for (; g > 0; ) {
        for (var x = 0; x < d; x += 1)
          b[2 * x] = m[2 * x], b[2 * x + 1] = m[2 * x + 1], m[2 * x] = 0, m[2 * x + 1] = 0;
        m = this.getAttrForces(g, y, i, n, a, o, s, m), h && (c && g > y || !c) ? m = this.getOptRepGraForces(m, E, o) : m = this.getRepGraForces(g, y, m, p, s, o);
        var _ = this.updatePos(m, b, v, o);
        f = _.nodes, v = _.sg, g--, u.tick && u.tick();
      }
      return f;
    }, e.prototype.getAttrForces = function(t, n, a, i, o, s, u, f) {
      for (var l = this, c = l.nodes, h = l.preventOverlap, d = l.dissuadeHubs, v = l.mode, p = l.prune, g = 0; g < a; g += 1) {
        var y = c[o[g].sourceIdx], m = o[g].sourceIdx, b = c[o[g].targetIdx], E = o[g].targetIdx;
        if (!(p && (s[m] <= 1 || s[E] <= 1))) {
          var x = [b.x - y.x, b.y - y.y], w = Math.hypot(x[0], x[1]);
          w = w < 1e-4 ? 1e-4 : w, x[0] = x[0] / w, x[1] = x[1] / w, h && t < n && (w = w - u[m] - u[E]);
          var _ = w, M = _;
          v === "linlog" && (_ = Math.log(1 + w), M = _), d && (_ = w / s[m], M = w / s[E]), h && t < n && w <= 0 ? (_ = 0, M = 0) : h && t < n && w > 0 && (_ = w, M = w), f[2 * i[y.id]] += _ * x[0], f[2 * i[b.id]] -= M * x[0], f[2 * i[y.id] + 1] += _ * x[1], f[2 * i[b.id] + 1] -= M * x[1];
        }
      }
      return f;
    }, e.prototype.getRepGraForces = function(t, n, a, i, o, s) {
      for (var u = this, f = u.nodes, l = u.preventOverlap, c = u.kr, h = u.kg, d = u.center, v = u.prune, p = f.length, g = 0; g < p; g += 1) {
        for (var y = g + 1; y < p; y += 1)
          if (!(v && (s[g] <= 1 || s[y] <= 1))) {
            var m = [f[y].x - f[g].x, f[y].y - f[g].y], b = Math.hypot(m[0], m[1]);
            b = b < 1e-4 ? 1e-4 : b, m[0] = m[0] / b, m[1] = m[1] / b, l && t < n && (b = b - o[g] - o[y]);
            var E = c * (s[g] + 1) * (s[y] + 1) / b;
            l && t < n && b < 0 ? E = i * (s[g] + 1) * (s[y] + 1) : l && t < n && b === 0 ? E = 0 : l && t < n && b > 0 && (E = c * (s[g] + 1) * (s[y] + 1) / b), a[2 * g] -= E * m[0], a[2 * y] += E * m[0], a[2 * g + 1] -= E * m[1], a[2 * y + 1] += E * m[1];
          }
        var x = [f[g].x - d[0], f[g].y - d[1]], w = Math.hypot(x[0], x[1]);
        x[0] = x[0] / w, x[1] = x[1] / w;
        var _ = h * (s[g] + 1);
        a[2 * g] -= _ * x[0], a[2 * g + 1] -= _ * x[1];
      }
      return a;
    }, e.prototype.getOptRepGraForces = function(t, n, a) {
      for (var i = this, o = i.nodes, s = i.kg, u = i.center, f = i.prune, l = o.length, c = 9e10, h = -9e10, d = 9e10, v = -9e10, p = 0; p < l; p += 1)
        f && a[p] <= 1 || (n[p].setPos(o[p].x, o[p].y), o[p].x >= h && (h = o[p].x), o[p].x <= c && (c = o[p].x), o[p].y >= v && (v = o[p].y), o[p].y <= d && (d = o[p].y));
      for (var g = Math.max(h - c, v - d), y = {
        xmid: (h + c) / 2,
        ymid: (v + d) / 2,
        length: g,
        massCenter: u,
        mass: l
      }, m = new Roe.default(y), b = new Boe.default(m), p = 0; p < l; p += 1)
        f && a[p] <= 1 || n[p].in(m) && b.insert(n[p]);
      for (var p = 0; p < l; p += 1)
        if (!(f && a[p] <= 1)) {
          n[p].resetForce(), b.updateForce(n[p]), t[2 * p] -= n[p].fx, t[2 * p + 1] -= n[p].fy;
          var E = [o[p].x - u[0], o[p].y - u[1]], x = Math.hypot(E[0], E[1]);
          x = x < 1e-4 ? 1e-4 : x, E[0] = E[0] / x, E[1] = E[1] / x;
          var w = s * (a[p] + 1);
          t[2 * p] -= w * E[0], t[2 * p + 1] -= w * E[1];
        }
      return t;
    }, e.prototype.updatePos = function(t, n, a, i) {
      for (var o = this, s = o.nodes, u = o.ks, f = o.tao, l = o.prune, c = o.ksmax, h = s.length, d = [], v = [], p = 0, g = 0, y = 0; y < h; y += 1)
        if (!(l && i[y] <= 1)) {
          var m = [
            t[2 * y] - n[2 * y],
            t[2 * y + 1] - n[2 * y + 1]
          ], b = Math.hypot(m[0], m[1]), E = [
            t[2 * y] + n[2 * y],
            t[2 * y + 1] + n[2 * y + 1]
          ], x = Math.hypot(E[0], E[1]);
          d[y] = b, v[y] = x / 2, p += (i[y] + 1) * d[y], g += (i[y] + 1) * v[y];
        }
      var w = a;
      a = f * g / p, w !== 0 && (a = a > 1.5 * w ? 1.5 * w : a);
      for (var y = 0; y < h; y += 1)
        if (!(l && i[y] <= 1) && !((0, mi.isNumber)(s[y].fx) && (0, mi.isNumber)(s[y].fy))) {
          var _ = u * a / (1 + a * Math.sqrt(d[y])), M = Math.hypot(t[2 * y], t[2 * y + 1]);
          M = M < 1e-4 ? 1e-4 : M;
          var A = c / M;
          _ = _ > A ? A : _;
          var S = _ * t[2 * y], T = _ * t[2 * y + 1];
          s[y].x += S, s[y].y += T;
        }
      return { nodes: s, sg: a };
    }, e;
  }(Poe.Base)
);
ml.ForceAtlas2Layout = Foe;
var bl = {}, t1 = {}, r1 = {}, n1 = {}, js = be && be.__assign || function() {
  return js = Object.assign || function(r) {
    for (var e, t = 1, n = arguments.length; t < n; t++) {
      e = arguments[t];
      for (var a in e)
        Object.prototype.hasOwnProperty.call(e, a) && (r[a] = e[a]);
    }
    return r;
  }, js.apply(this, arguments);
};
Object.defineProperty(n1, "__esModule", { value: !0 });
var Goe = (
  /** @class */
  function() {
    function r() {
      this.cells = [], this.columnNum = 0, this.rowNum = 0, this.additionColumn = [], this.additionRow = [];
    }
    return r.prototype.init = function(e, t, n) {
      this.cells = [], this.CELL_W = n.CELL_W || r.DEFAULT_CELL_W, this.CELL_H = n.CELL_H || r.DEFAULT_CELL_H, this.columnNum = Math.ceil(e / this.CELL_W), this.rowNum = Math.ceil(t / this.CELL_H), r.MIN_DIST = Math.pow(e, 2) + Math.pow(t, 2);
      for (var a = 0; a < this.columnNum; a++) {
        for (var i = [], o = 0; o < this.rowNum; o++) {
          var s = {
            dx: a,
            dy: o,
            x: a * this.CELL_W,
            y: o * this.CELL_H,
            occupied: !1
          };
          i.push(s);
        }
        this.cells.push(i);
      }
    }, r.prototype.findGridByNodeId = function(e) {
      for (var t, n, a = 0; a < this.columnNum; a++)
        for (var i = 0; i < this.rowNum; i++)
          if (this.cells[a][i].node && ((n = (t = this.cells[a][i]) === null || t === void 0 ? void 0 : t.node) === null || n === void 0 ? void 0 : n.id) === e)
            return { column: a, row: i };
      return null;
    }, r.prototype.sqdist = function(e, t) {
      return Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2);
    }, r.prototype.occupyNearest = function(e) {
      for (var t = r.MIN_DIST, n, a = null, i = 0; i < this.columnNum; i++)
        for (var o = 0; o < this.rowNum; o++)
          !this.cells[i][o].occupied && (n = this.sqdist(e, this.cells[i][o])) < t && (t = n, a = this.cells[i][o]);
      return a && (a.occupied = !0), a;
    }, r.prototype.insertColumn = function(e, t) {
      if (!(t <= 0)) {
        for (var n = 0; n < t; n++) {
          this.cells[n + this.columnNum] = [];
          for (var a = 0; a < this.rowNum; a++)
            this.cells[n + this.columnNum][a] = {
              dx: n,
              dy: a,
              x: n * this.CELL_W,
              y: a * this.CELL_H,
              occupied: !1,
              node: null
            };
        }
        for (var n = this.columnNum - 1; n > e; n--)
          for (var a = 0; a < this.rowNum; a++)
            this.cells[n + t][a] = js(js({}, this.cells[n][a]), { x: (n + t) * this.CELL_W, y: a * this.CELL_H }), this.cells[n][a] = {
              x: n * this.CELL_W,
              y: a * this.CELL_H,
              occupied: !0,
              node: null
            };
        for (var a = 0; a < this.additionColumn.length; a++)
          this.additionColumn[a] >= e && (this.additionColumn[a] += t);
        for (var n = 0; n < t; n++)
          this.additionColumn.push(e + n + 1);
        this.columnNum += t;
      }
    }, r.prototype.insertRow = function(e, t) {
      if (!(t <= 0)) {
        for (var n = 0; n < t; n++)
          for (var a = 0; a < this.columnNum; a++)
            this.cells[a][n + this.rowNum] = {
              dx: a,
              dy: n,
              x: a * this.CELL_W,
              y: n * this.CELL_H,
              occupied: !1,
              node: null
            };
        for (var a = 0; a < this.columnNum; a++)
          for (var n = this.rowNum - 1; n > e; n--)
            this.cells[a][n + t] = js(js({}, this.cells[a][n]), { dx: a, dy: n + t, x: a * this.CELL_W, y: (n + t) * this.CELL_H }), this.cells[a][n] = {
              dx: a,
              dy: n,
              x: a * this.CELL_W,
              y: n * this.CELL_H,
              occupied: !1,
              node: null
            };
        for (var n = 0; n < this.additionRow.length; n++)
          this.additionRow[n] >= e && (this.additionRow[n] += t);
        for (var a = 0; a < t; a++)
          this.additionRow.push(e + a + 1);
        this.rowNum += t;
      }
    }, r.prototype.getNodes = function() {
      for (var e = [], t = 0; t < this.columnNum; t++)
        for (var n = 0; n < this.rowNum; n++)
          this.cells[t][n].node && e.push(this.cells[t][n]);
      return e;
    }, r.MIN_DIST = 50, r.DEFAULT_CELL_W = 80, r.DEFAULT_CELL_H = 80, r;
  }()
);
n1.default = Goe;
var zoe = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(r1, "__esModule", { value: !0 });
var Uoe = zoe(n1);
function joe(r, e) {
  if (!r.nodes || r.nodes.length === 0)
    return r;
  var t = e.width, n = e.height, a = e.nodeMinGap, i = 1e4, o = 1e4;
  r.nodes.forEach(function(m) {
    var b = m.size[0] || 50, E = m.size[1] || 50;
    i = Math.min(b, i), o = Math.min(E, o);
  });
  var s = new Uoe.default();
  s.init(t, n, {
    CELL_H: o,
    CELL_W: i
  }), r.nodes.forEach(function(m) {
    var b = s.occupyNearest(m);
    b && (b.node = {
      id: m.id,
      size: m.size
    }, m.x = b.x, m.y = b.y, m.dx = b.dx, m.dy = b.dy);
  });
  for (var u = 0; u < r.nodes.length; u++) {
    var f = r.nodes[u], l = s.findGridByNodeId(f.id);
    if (!l)
      throw new Error("can not find node cell");
    var c = l.column, h = l.row;
    if (f.size[0] + a > i) {
      for (var d = Math.ceil((f.size[0] + a) / i) - 1, v = d, p = 0; p < d; p++) {
        var g = s.additionColumn.indexOf(c + p + 1) > -1;
        if (g && !s.cells[c + p + 1][h].node)
          v--;
        else
          break;
      }
      s.insertColumn(c, v);
    }
    if (f.size[1] + a > o) {
      for (var d = Math.ceil((f.size[1] + a) / o) - 1, v = d, p = 0; p < d; p++) {
        var g = s.additionRow.indexOf(h + p + 1) > -1;
        if (g && !s.cells[c][h + p + 1].node)
          v--;
        else
          break;
      }
      s.insertRow(h, v);
    }
  }
  for (var u = 0; u < s.columnNum; u++)
    for (var y = function(b) {
      var E = s.cells[u][b];
      if (E.node) {
        var x = r.nodes.find(function(w) {
          var _;
          return w.id === ((_ = E == null ? void 0 : E.node) === null || _ === void 0 ? void 0 : _.id);
        });
        x && (x.x = E.x + x.size[0] / 2, x.y = E.y + x.size[1] / 2);
      }
    }, p = 0; p < s.rowNum; p++)
      y(p);
}
r1.default = joe;
var a1 = {};
Object.defineProperty(a1, "__esModule", { value: !0 });
var GD = 1200, zD = 800, Bc = 1e7, ef = 10, UD = 3.141592653589793, c0 = 1.5707963267948966, $oe = UD * 0.375, Woe = UD * 0.625, hh = /* @__PURE__ */ new Map(), Xoe = 10, Voe = 10, h0 = 0.8, C2 = 0.1, Yoe = 0.5;
function Hoe(r, e, t) {
  var n = r.x - r.size[0] / 2, a = r.y - r.size[1] / 2, i = r.x + r.size[0] / 2, o = r.y + r.size[1] / 2, s = e.x - e.size[0] / 2, u = e.y - e.size[1] / 2, f = e.x + e.size[0] / 2, l = e.y + e.size[1] / 2, c = r.x, h = r.y, d = e.x, v = e.y, p = d - c, g = Math.atan2(p, v - h), y = 0, m = 0, b = 0, E = 0;
  g > c0 ? (m = a - l, y = s - i, b = parseFloat(m ? (m / Math.cos(g)).toFixed(2) : y.toFixed(2)), E = parseFloat(y ? (y / Math.sin(g)).toFixed(2) : m.toFixed(2))) : 0 < g && g <= c0 ? (m = u - o, y = s - i, m > y ? b = E = parseFloat(m ? (m / Math.cos(g)).toFixed(2) : y.toFixed(2)) : b = E = parseFloat(y ? (y / Math.sin(g)).toFixed(2) : m.toFixed(2))) : g < -c0 ? (m = a - l, y = -(f - n), m > y ? b = E = parseFloat(m ? (m / Math.cos(g)).toFixed(2) : y.toFixed(2)) : b = E = parseFloat(y ? (y / Math.sin(g)).toFixed(2) : m.toFixed(2))) : (m = u - o, Math.abs(p) > (i - n) / 2 ? y = n - f : y = p, m > y ? b = E = parseFloat(m ? (m / Math.cos(g)).toFixed(2) : y.toFixed(2)) : b = E = parseFloat(y && g !== 0 ? (y / Math.sin(g)).toFixed(2) : m.toFixed(2)));
  var x = parseFloat(g.toFixed(2)), w = t;
  return t && (w = $oe < x && x < Woe), {
    distance: Math.abs(b < E ? b : E),
    isHoriz: w
  };
}
function jD(r, e) {
  var t = hh.get(r.id) || [], n = t.find(function(P) {
    return P.source === e.id || P.target === e.id;
  }), a = r.size[0] * r.size[1], i = e.size[0] * e.size[1], o = a > i ? e : r, s = a > i ? r : e, u = o.x - o.size[0] / 2, f = o.y - o.size[1] / 2, l = o.x + o.size[0] / 2, c = o.y + o.size[1] / 2, h = s.x - s.size[0] / 2, d = s.y - s.size[1] / 2, v = s.x + s.size[0] / 2, p = s.y + s.size[1] / 2, g = o.x, y = o.y, m = s.x, b = s.y, E = l >= h && v >= u && c >= d && p >= f, x = 0, w = 0;
  if (E) {
    w = Math.sqrt(Math.pow(m - g, 2) + Math.pow(b - y, 2));
    var _ = u > h ? u : h, M = f > d ? f : d, A = l < v ? l : v, S = c < p ? c : p, T = A - _, C = S - M, O = T * C;
    w === 0 && (w = 1e-7), x = ef * 1 / w * 100 + O, x *= Bc;
  } else {
    var L = !1, R = Hoe(o, s, L);
    w = R.distance, L = R.isHoriz, w <= ef ? w !== 0 ? n ? x += ef + Bc * 1 / w : x += ef + Bc * ef / w : x += Bc : (x += w, n && (x += w * w));
  }
  return x;
}
function $D(r) {
  for (var e = 0, t = 0; t < r.length; t++) {
    var n = r[t];
    (n.x < 0 || n.y < 0 || n.x > GD || n.y > zD) && (e += 1e12);
    for (var a = t + 1; a < r.length; a++)
      e += jD(n, r[a]);
  }
  return e;
}
function Koe(r, e, t, n) {
  var a = /* @__PURE__ */ new Map();
  t.forEach(function(g, y) {
    a.set(g.id, g);
  });
  var i = n.filter(function(g) {
    return g.source === r.id || g.target === r.id;
  }) || [], o = [];
  i.forEach(function(g) {
    var y = g.source === r.id ? g.target : g.source, m = a.get(y);
    m && o.push(m);
  });
  for (var s = !0, u = 0; u < o.length; u++) {
    var f = o[u], l = Math.atan((r.y - f.y) / (f.x - r.y)) * 180, c = Math.atan((e.y - f.y) / (f.x - e.y)) * 180, h = l < 30 || l > 150, d = c < 30 || c > 150, v = l > 70 && l < 110, p = c > 70 && c < 110;
    if (h && !d || l * c < 0) {
      s = !1;
      break;
    } else if (v && !p || l * c < 0) {
      s = !1;
      break;
    } else if ((f.x - r.x) * (f.x - e.x) < 0) {
      s = !1;
      break;
    } else if ((f.y - r.y) * (f.y - e.y) < 0) {
      s = !1;
      break;
    }
  }
  return s;
}
function qoe(r, e) {
  for (var t = !1, n = 1, a = Xoe * n, i = Voe * n, o = [a, -a, 0, 0], s = [0, 0, i, -i], u = 0; u < r.length; ++u)
    for (var f = r[u], l = T2(f, r), c = 0; c < o.length; c++) {
      var h = Koe(f, { x: f.x + o[c], y: f.y + s[c] }, r, e);
      if (h) {
        f.x += o[c], f.y += s[c];
        var d = T2(f, r), v = Math.random();
        d < l || v < h0 && v > C2 ? (l = d, t = !0) : (f.x -= o[c], f.y -= s[c]);
      }
    }
  return h0 > C2 && (h0 *= Yoe), t ? $D(r) : 0;
}
function T2(r, e) {
  var t = 0;
  (r.x < 0 || r.y < 0 || r.x + r.size[0] + 20 > GD || r.y + r.size[1] + 20 > zD) && (t += 1e12);
  for (var n = 0; n < e.length; ++n)
    r.id !== e[n].id && (t += jD(r, e[n]));
  return t;
}
function Zoe(r, e) {
  if (r.length === 0)
    return { nodes: r, edges: e };
  r.forEach(function(f) {
    var l = e.filter(function(c) {
      return c.source === f.id || c.target === f.id;
    });
    hh.set(f, l);
  }), r.sort(function(f, l) {
    var c, h;
    return ((c = hh.get(f.id)) === null || c === void 0 ? void 0 : c.length) - ((h = hh.get(l.id)) === null || h === void 0 ? void 0 : h.length);
  });
  for (var t = $D(r), n = 20, a = 1, i = 0, o = 50, s = 0; n > 0 && (s++, !(s >= o)); ) {
    var u = qoe(r, e);
    u !== 0 && (i = u), a = i - t, t = i, a === 0 ? --n : n = 20;
  }
  return r.forEach(function(f) {
    f.x = f.x - f.size[0] / 2, f.y = f.y - f.size[1] / 2;
  }), {
    nodes: r,
    edges: e
  };
}
a1.default = Zoe;
var Ug = be && be.__assign || function() {
  return Ug = Object.assign || function(r) {
    for (var e, t = 1, n = arguments.length; t < n; t++) {
      e = arguments[t];
      for (var a in e)
        Object.prototype.hasOwnProperty.call(e, a) && (r[a] = e[a]);
    }
    return r;
  }, Ug.apply(this, arguments);
}, Qoe = be && be.__createBinding || (Object.create ? function(r, e, t, n) {
  n === void 0 && (n = t);
  var a = Object.getOwnPropertyDescriptor(e, t);
  (!a || ("get" in a ? !e.__esModule : a.writable || a.configurable)) && (a = { enumerable: !0, get: function() {
    return e[t];
  } }), Object.defineProperty(r, n, a);
} : function(r, e, t, n) {
  n === void 0 && (n = t), r[n] = e[t];
}), Joe = be && be.__setModuleDefault || (Object.create ? function(r, e) {
  Object.defineProperty(r, "default", { enumerable: !0, value: e });
} : function(r, e) {
  r.default = e;
}), ese = be && be.__importStar || function(r) {
  if (r && r.__esModule)
    return r;
  var e = {};
  if (r != null)
    for (var t in r)
      t !== "default" && Object.prototype.hasOwnProperty.call(r, t) && Qoe(e, r, t);
  return Joe(e, r), e;
}, WD = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(t1, "__esModule", { value: !0 });
var Os = ese(Zy), tse = WD(r1), rse = WD(a1), nse = mu;
function ase(r, e) {
  var t = r.nodes, n = r.edges, a = e.width, i = e.height;
  if (!(t != null && t.length))
    return Promise.resolve();
  var o = [];
  t.forEach(function(v) {
    var p = n.filter(function(y) {
      return y.source === v.id || y.target === v.id;
    });
    if (p.length > 1) {
      var g = Ug({}, v);
      delete g.size, o.push(g);
    }
  });
  var s = [];
  n.forEach(function(v) {
    var p = o.find(function(y) {
      return y.id === v.source;
    }), g = o.find(function(y) {
      return y.id === v.target;
    });
    p && g && s.push(v);
  });
  var u = new nse.DagreLayout({
    type: "dagre",
    ranksep: e.nodeMinGap,
    nodesep: e.nodeMinGap
  }), f = u.layout({
    nodes: o,
    edges: s
  }).nodes;
  t.forEach(function(v) {
    var p = (f || []).find(function(g) {
      return g.id === v.id;
    });
    v.x = (p == null ? void 0 : p.x) || a / 2, v.y = (p == null ? void 0 : p.y) || i / 2;
  });
  var l = JSON.parse(JSON.stringify(t)), c = JSON.parse(JSON.stringify(n)), h = Os.forceSimulation().nodes(l).force("link", Os.forceLink(c).id(function(v) {
    return v.id;
  }).distance(function(v) {
    var p = s.find(function(g) {
      return g.source === v.source && g.target === v.target;
    });
    return p ? 30 : 20;
  })).force("charge", Os.forceManyBody()).force("center", Os.forceCenter(a / 2, i / 2)).force("x", Os.forceX(a / 2)).force("y", Os.forceY(i / 2)).alpha(0.3).alphaDecay(0.08).alphaMin(1e-3), d = new Promise(function(v) {
    h.on("end", function() {
      t.forEach(function(x) {
        var w = l.find(function(_) {
          return _.id === x.id;
        });
        w && (x.x = w.x, x.y = w.y);
      });
      var p = Math.min.apply(Math, t.map(function(x) {
        return x.x;
      })), g = Math.max.apply(Math, t.map(function(x) {
        return x.x;
      })), y = Math.min.apply(Math, t.map(function(x) {
        return x.y;
      })), m = Math.max.apply(Math, t.map(function(x) {
        return x.y;
      })), b = a / (g - p), E = i / (m - y);
      t.forEach(function(x) {
        x.x !== void 0 && b < 1 && (x.x = (x.x - p) * b), x.y !== void 0 && E < 1 && (x.y = (x.y - y) * E);
      }), t.forEach(function(x) {
        x.sizeTemp = x.size, x.size = [10, 10];
      }), (0, rse.default)(t, n), t.forEach(function(x) {
        x.size = x.sizeTemp || [], delete x.sizeTemp;
      }), (0, tse.default)({
        nodes: t,
        edges: n
      }, e), v();
    });
  });
  return d;
}
t1.default = ase;
var ise = be && be.__extends || /* @__PURE__ */ function() {
  var r = function(e, t) {
    return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
      n.__proto__ = a;
    } || function(n, a) {
      for (var i in a)
        Object.prototype.hasOwnProperty.call(a, i) && (n[i] = a[i]);
    }, r(e, t);
  };
  return function(e, t) {
    if (typeof t != "function" && t !== null)
      throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    r(e, t);
    function n() {
      this.constructor = e;
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
  };
}(), ose = be && be.__importDefault || function(r) {
  return r && r.__esModule ? r : { default: r };
};
Object.defineProperty(bl, "__esModule", { value: !0 });
bl.ERLayout = void 0;
var sse = Gr, use = ose(t1), fse = (
  /** @class */
  function(r) {
    ise(e, r);
    function e(t) {
      var n = r.call(this) || this;
      return n.width = 300, n.height = 300, n.nodeMinGap = 50, n.onLayoutEnd = function() {
      }, t && n.updateCfg(t), n;
    }
    return e.prototype.getDefaultCfg = function() {
      return {
        width: 300,
        height: 300,
        nodeMinGap: 50
      };
    }, e.prototype.execute = function() {
      var t = this, n = t.nodes, a = t.edges;
      return n == null || n.forEach(function(i) {
        i.size || (i.size = [50, 50]);
      }), (0, use.default)({
        nodes: n,
        edges: a
      }, {
        width: this.width,
        height: this.height,
        nodeMinGap: this.nodeMinGap
      }).then(function() {
        t.onLayoutEnd && t.onLayoutEnd();
      });
    }, e.prototype.getType = function() {
      return "er";
    }, e;
  }(sse.Base)
);
bl.ERLayout = fse;
var Lo = {}, I2;
function lse() {
  if (I2)
    return Lo;
  I2 = 1, Object.defineProperty(Lo, "__esModule", { value: !0 }), Lo.Layouts = Lo.Layout = void 0;
  var r = _i, e = el, t = tl, n = nl, a = rl, i = qy, o = al, s = mu, u = Xm, f = hl, l = dl, c = vl, h = pl, d = gl, v = yl, p = FD(), g = ml, y = bl, m = sl, b = Dr(), E = (
    /** @class */
    function() {
      function x(w) {
        var _ = (0, r.getLayoutByName)(w.type);
        this.layoutInstance = new _(w);
      }
      return x.prototype.layout = function(w) {
        return this.layoutInstance.layout(w);
      }, x.prototype.updateCfg = function(w) {
        this.layoutInstance.updateCfg(w);
      }, x.prototype.init = function(w) {
        this.correctLayers(w.nodes), this.layoutInstance.init(w);
      }, x.prototype.correctLayers = function(w) {
        if (w != null && w.length) {
          var _ = 1 / 0, M = [];
          if (w.forEach(function(S) {
            (0, b.isString)(S.layer) && (S.layer = parseInt(S.layer, 10)), !(S.layer === void 0 || isNaN(S.layer)) && (M.push(S), S.layer < _ && (_ = S.layer));
          }), _ <= 0) {
            var A = Math.abs(_) + 1;
            M.forEach(function(S) {
              return S.layer += A;
            });
          }
        }
      }, x.prototype.execute = function() {
        this.layoutInstance.execute();
      }, x.prototype.getDefaultCfg = function() {
        return this.layoutInstance.getDefaultCfg();
      }, x.prototype.destroy = function() {
        return this.layoutInstance.destroy();
      }, x;
    }()
  );
  return Lo.Layout = E, Lo.Layouts = {
    force: i.ForceLayout,
    fruchterman: c.FruchtermanLayout,
    forceAtlas2: g.ForceAtlas2Layout,
    gForce: a.GForceLayout,
    force2: n.Force2Layout,
    dagre: s.DagreLayout,
    dagreCompound: m.DagreCompoundLayout,
    circular: o.CircularLayout,
    radial: u.RadialLayout,
    concentric: f.ConcentricLayout,
    grid: e.GridLayout,
    mds: l.MDSLayout,
    comboForce: v.ComboForceLayout,
    comboCombined: p.ComboCombinedLayout,
    random: t.RandomLayout,
    "gForce-gpu": d.GForceGPULayout,
    "fruchterman-gpu": h.FruchtermanGPULayout,
    er: y.ERLayout
  }, Lo;
}
var XD = {};
Object.defineProperty(XD, "__esModule", { value: !0 });
var O2;
function VD() {
  return O2 || (O2 = 1, function(r) {
    var e = be && be.__createBinding || (Object.create ? function(w, _, M, A) {
      A === void 0 && (A = M);
      var S = Object.getOwnPropertyDescriptor(_, M);
      (!S || ("get" in S ? !_.__esModule : S.writable || S.configurable)) && (S = { enumerable: !0, get: function() {
        return _[M];
      } }), Object.defineProperty(w, A, S);
    } : function(w, _, M, A) {
      A === void 0 && (A = M), w[A] = _[M];
    }), t = be && be.__exportStar || function(w, _) {
      for (var M in w)
        M !== "default" && !Object.prototype.hasOwnProperty.call(_, M) && e(_, w, M);
    };
    Object.defineProperty(r, "__esModule", { value: !0 }), r.ERLayout = r.ForceAtlas2Layout = r.ComboCombinedLayout = r.ComboForceLayout = r.GForceGPULayout = r.FruchtermanGPULayout = r.FruchtermanLayout = r.MDSLayout = r.ConcentricLayout = r.RadialLayout = r.DagreCompoundLayout = r.DagreLayout = r.CircularLayout = r.ForceLayout = r.Force2Layout = r.GForceLayout = r.RandomLayout = r.GridLayout = r.Layouts = r.Layout = void 0;
    var n = el;
    Object.defineProperty(r, "GridLayout", { enumerable: !0, get: function() {
      return n.GridLayout;
    } });
    var a = tl;
    Object.defineProperty(r, "RandomLayout", { enumerable: !0, get: function() {
      return a.RandomLayout;
    } });
    var i = rl;
    Object.defineProperty(r, "GForceLayout", { enumerable: !0, get: function() {
      return i.GForceLayout;
    } });
    var o = nl;
    Object.defineProperty(r, "Force2Layout", { enumerable: !0, get: function() {
      return o.Force2Layout;
    } });
    var s = qy;
    Object.defineProperty(r, "ForceLayout", { enumerable: !0, get: function() {
      return s.ForceLayout;
    } });
    var u = al;
    Object.defineProperty(r, "CircularLayout", { enumerable: !0, get: function() {
      return u.CircularLayout;
    } });
    var f = mu;
    Object.defineProperty(r, "DagreLayout", { enumerable: !0, get: function() {
      return f.DagreLayout;
    } });
    var l = sl;
    Object.defineProperty(r, "DagreCompoundLayout", { enumerable: !0, get: function() {
      return l.DagreCompoundLayout;
    } });
    var c = Xm;
    Object.defineProperty(r, "RadialLayout", { enumerable: !0, get: function() {
      return c.RadialLayout;
    } });
    var h = hl;
    Object.defineProperty(r, "ConcentricLayout", { enumerable: !0, get: function() {
      return h.ConcentricLayout;
    } });
    var d = dl;
    Object.defineProperty(r, "MDSLayout", { enumerable: !0, get: function() {
      return d.MDSLayout;
    } });
    var v = vl;
    Object.defineProperty(r, "FruchtermanLayout", { enumerable: !0, get: function() {
      return v.FruchtermanLayout;
    } });
    var p = pl;
    Object.defineProperty(r, "FruchtermanGPULayout", { enumerable: !0, get: function() {
      return p.FruchtermanGPULayout;
    } });
    var g = gl;
    Object.defineProperty(r, "GForceGPULayout", { enumerable: !0, get: function() {
      return g.GForceGPULayout;
    } });
    var y = yl;
    Object.defineProperty(r, "ComboForceLayout", { enumerable: !0, get: function() {
      return y.ComboForceLayout;
    } });
    var m = FD();
    Object.defineProperty(r, "ComboCombinedLayout", { enumerable: !0, get: function() {
      return m.ComboCombinedLayout;
    } });
    var b = ml;
    Object.defineProperty(r, "ForceAtlas2Layout", { enumerable: !0, get: function() {
      return b.ForceAtlas2Layout;
    } });
    var E = bl;
    Object.defineProperty(r, "ERLayout", { enumerable: !0, get: function() {
      return E.ERLayout;
    } });
    var x = lse();
    Object.defineProperty(r, "Layout", { enumerable: !0, get: function() {
      return x.Layout;
    } }), Object.defineProperty(r, "Layouts", { enumerable: !0, get: function() {
      return x.Layouts;
    } }), t(XD, r);
  }(kp)), kp;
}
(function(r) {
  var e = be && be.__createBinding || (Object.create ? function(a, i, o, s) {
    s === void 0 && (s = o);
    var u = Object.getOwnPropertyDescriptor(i, o);
    (!u || ("get" in u ? !i.__esModule : u.writable || u.configurable)) && (u = { enumerable: !0, get: function() {
      return i[o];
    } }), Object.defineProperty(a, s, u);
  } : function(a, i, o, s) {
    s === void 0 && (s = o), a[s] = i[o];
  }), t = be && be.__exportStar || function(a, i) {
    for (var o in a)
      o !== "default" && !Object.prototype.hasOwnProperty.call(i, o) && e(i, a, o);
  };
  Object.defineProperty(r, "__esModule", { value: !0 }), r.getLayoutByName = r.unRegisterLayout = r.registerLayout = void 0;
  var n = _i;
  Object.defineProperty(r, "registerLayout", { enumerable: !0, get: function() {
    return n.registerLayout;
  } }), Object.defineProperty(r, "unRegisterLayout", { enumerable: !0, get: function() {
    return n.unRegisterLayout;
  } }), Object.defineProperty(r, "getLayoutByName", { enumerable: !0, get: function() {
    return n.getLayoutByName;
  } }), t(VD(), r);
})(Qt);
var YD = { exports: {} };
(function(r, e) {
  (function(n, a) {
    r.exports = a();
  })(typeof self < "u" ? self : be, function() {
    return (
      /******/
      function(t) {
        var n = {};
        function a(i) {
          if (n[i])
            return n[i].exports;
          var o = n[i] = {
            /******/
            i,
            /******/
            l: !1,
            /******/
            exports: {}
            /******/
          };
          return t[i].call(o.exports, o, o.exports, a), o.l = !0, o.exports;
        }
        return a.m = t, a.c = n, a.d = function(i, o, s) {
          a.o(i, o) || Object.defineProperty(i, o, {
            /******/
            configurable: !1,
            /******/
            enumerable: !0,
            /******/
            get: s
            /******/
          });
        }, a.n = function(i) {
          var o = i && i.__esModule ? (
            /******/
            function() {
              return i.default;
            }
          ) : (
            /******/
            function() {
              return i;
            }
          );
          return a.d(o, "a", o), o;
        }, a.o = function(i, o) {
          return Object.prototype.hasOwnProperty.call(i, o);
        }, a.p = "", a(a.s = 36);
      }([
        /* 0 */
        /***/
        function(t, n, a) {
          var i = a(3);
          n.a = function(o) {
            return Array.isArray ? Array.isArray(o) : Object(i.a)(o, "Array");
          };
        },
        /* 1 */
        /***/
        function(t, n, a) {
          var i = function(o) {
            return o !== null && typeof o != "function" && isFinite(o.length);
          };
          n.a = i;
        },
        /* 2 */
        /***/
        function(t, n, a) {
          var i = a(3);
          n.a = function(o) {
            return Object(i.a)(o, "Function");
          };
        },
        /* 3 */
        /***/
        function(t, n, a) {
          var i = {}.toString, o = function(s, u) {
            return i.call(s) === "[object " + u + "]";
          };
          n.a = o;
        },
        /* 4 */
        /***/
        function(t, n, a) {
          var i = a(3);
          n.a = function(o) {
            return Object(i.a)(o, "String");
          };
        },
        /* 5 */
        /***/
        function(t, n, a) {
          var i = a(3), o = function(s) {
            return Object(i.a)(s, "Number");
          };
          n.a = o;
        },
        /* 6 */
        /***/
        function(t, n, a) {
          var i = a(38), o = i.mix;
          function s(u, f, l, c) {
            return c === void 0 && (c = "height"), l === "center" ? (u[c] + f[c]) / 2 : u.height;
          }
          t.exports = {
            assign: o,
            getHeight: s
          };
        },
        /* 7 */
        /***/
        function(t, n, a) {
          var i = function(o) {
            return o == null;
          };
          n.a = i;
        },
        /* 8 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(12);
          function s(u, f) {
            if (u) {
              var l;
              if (Object(i.a)(u))
                for (var c = 0, h = u.length; c < h && (l = f(u[c], c), l !== !1); c++)
                  ;
              else if (Object(o.a)(u)) {
                for (var d in u)
                  if (u.hasOwnProperty(d) && (l = f(u[d], d), l === !1))
                    break;
              }
            }
          }
          n.a = s;
        },
        /* 9 */
        /***/
        function(t, n, a) {
          var i = a(7);
          n.a = function(o) {
            return Object(i.a)(o) ? "" : o.toString();
          };
        },
        /* 10 */
        /***/
        function(t, n, a) {
          var i = a(14), o = a(3), s = function(u) {
            if (!Object(i.a)(u) || !Object(o.a)(u, "Object"))
              return !1;
            if (Object.getPrototypeOf(u) === null)
              return !0;
            for (var f = u; Object.getPrototypeOf(f) !== null; )
              f = Object.getPrototypeOf(f);
            return Object.getPrototypeOf(u) === f;
          };
          n.a = s;
        },
        /* 11 */
        /***/
        function(t, n, a) {
          var i = a(18), o = /* @__PURE__ */ function() {
            function s(f, l) {
              l === void 0 && (l = {});
              var c = this;
              c.options = l, c.rootNode = i(f, l);
            }
            var u = s.prototype;
            return u.execute = function() {
              throw new Error("please override this method");
            }, s;
          }();
          t.exports = o;
        },
        /* 12 */
        /***/
        function(t, n, a) {
          n.a = function(i) {
            var o = typeof i;
            return i !== null && o === "object" || o === "function";
          };
        },
        /* 13 */
        /***/
        function(t, n, a) {
          var i = a(1), o = function(s, u) {
            return Object(i.a)(s) ? s.indexOf(u) > -1 : !1;
          };
          n.a = o;
        },
        /* 14 */
        /***/
        function(t, n, a) {
          var i = function(o) {
            return typeof o == "object" && o !== null;
          };
          n.a = i;
        },
        /* 15 */
        /***/
        function(t, n, a) {
          var i = a(8), o = a(2), s = Object.values ? function(u) {
            return Object.values(u);
          } : function(u) {
            var f = [];
            return Object(i.a)(u, function(l, c) {
              Object(o.a)(u) && c === "prototype" || f.push(l);
            }), f;
          };
          n.a = s;
        },
        /* 16 */
        /***/
        function(t, n, a) {
          n.a = o;
          function i(s, u) {
            for (var f in u)
              u.hasOwnProperty(f) && f !== "constructor" && u[f] !== void 0 && (s[f] = u[f]);
          }
          function o(s, u, f, l) {
            return u && i(s, u), f && i(s, f), l && i(s, l), s;
          }
        },
        /* 17 */
        /***/
        function(t, n, a) {
          var i = a(35), o = [
            "LR",
            // left to right
            "RL",
            // right to left
            "TB",
            // top to bottom
            "BT",
            // bottom to top
            "H",
            // horizontal
            "V"
            // vertical
          ], s = ["LR", "RL", "H"], u = function(c) {
            return s.indexOf(c) > -1;
          }, f = o[0];
          t.exports = function(l, c, h) {
            var d = c.direction || f;
            if (c.isHorizontal = u(d), d && o.indexOf(d) === -1)
              throw new TypeError("Invalid direction: " + d);
            if (d === o[0])
              h(l, c);
            else if (d === o[1])
              h(l, c), l.right2left();
            else if (d === o[2])
              h(l, c);
            else if (d === o[3])
              h(l, c), l.bottom2top();
            else if (d === o[4] || d === o[5]) {
              var v = i(l, c), p = v.left, g = v.right;
              h(p, c), h(g, c), c.isHorizontal ? p.right2left() : p.bottom2top(), g.translate(p.x - g.x, p.y - g.y), l.x = p.x, l.y = g.y;
              var y = l.getBoundingBox();
              c.isHorizontal ? y.top < 0 && l.translate(0, -y.top) : y.left < 0 && l.translate(-y.left, 0);
            }
            var m = c.fixedRoot;
            return m === void 0 && (m = !0), m && l.translate(-(l.x + l.width / 2 + l.hgap), -(l.y + l.height / 2 + l.vgap)), l;
          };
        },
        /* 18 */
        /***/
        function(t, n, a) {
          var i = a(6), o = 18, s = o * 2, u = o, f = {
            getId: function(d) {
              return d.id || d.name;
            },
            getPreH: function(d) {
              return d.preH || 0;
            },
            getPreV: function(d) {
              return d.preV || 0;
            },
            getHGap: function(d) {
              return d.hgap || u;
            },
            getVGap: function(d) {
              return d.vgap || u;
            },
            getChildren: function(d) {
              return d.children;
            },
            getHeight: function(d) {
              return d.height || s;
            },
            getWidth: function(d) {
              var v = d.label || " ";
              return d.width || v.split("").length * o;
            }
          };
          function l(h, d) {
            var v = this;
            if (v.vgap = v.hgap = 0, h instanceof l)
              return h;
            v.data = h;
            var p = d.getHGap(h), g = d.getVGap(h);
            return v.preH = d.getPreH(h), v.preV = d.getPreV(h), v.width = d.getWidth(h), v.height = d.getHeight(h), v.width += v.preH, v.height += v.preV, v.id = d.getId(h), v.x = v.y = 0, v.depth = 0, v.children || (v.children = []), v.addGap(p, g), v;
          }
          i.assign(l.prototype, {
            isRoot: function() {
              return this.depth === 0;
            },
            isLeaf: function() {
              return this.children.length === 0;
            },
            addGap: function(d, v) {
              var p = this;
              p.hgap += d, p.vgap += v, p.width += 2 * d, p.height += 2 * v;
            },
            eachNode: function(d) {
              for (var v = this, p = [v], g; g = p.shift(); )
                d(g), p = g.children.concat(p);
            },
            DFTraverse: function(d) {
              this.eachNode(d);
            },
            BFTraverse: function(d) {
              for (var v = this, p = [v], g; g = p.shift(); )
                d(g), p = p.concat(g.children);
            },
            getBoundingBox: function() {
              var d = {
                left: Number.MAX_VALUE,
                top: Number.MAX_VALUE,
                width: 0,
                height: 0
              };
              return this.eachNode(function(v) {
                d.left = Math.min(d.left, v.x), d.top = Math.min(d.top, v.y), d.width = Math.max(d.width, v.x + v.width), d.height = Math.max(d.height, v.y + v.height);
              }), d;
            },
            // translate
            translate: function(d, v) {
              d === void 0 && (d = 0), v === void 0 && (v = 0), this.eachNode(function(p) {
                p.x += d, p.y += v, p.x += p.preH, p.y += p.preV;
              });
            },
            right2left: function() {
              var d = this, v = d.getBoundingBox();
              d.eachNode(function(p) {
                p.x = p.x - (p.x - v.left) * 2 - p.width;
              }), d.translate(v.width, 0);
            },
            bottom2top: function() {
              var d = this, v = d.getBoundingBox();
              d.eachNode(function(p) {
                p.y = p.y - (p.y - v.top) * 2 - p.height;
              }), d.translate(0, v.height);
            }
          });
          function c(h, d, v) {
            d === void 0 && (d = {}), d = i.assign({}, f, d);
            var p = new l(h, d), g = [p], y;
            if (!v && !h.collapsed) {
              for (; y = g.shift(); )
                if (!y.data.collapsed) {
                  var m = d.getChildren(y.data), b = m ? m.length : 0;
                  if (y.children = new Array(b), m && b)
                    for (var E = 0; E < b; E++) {
                      var x = new l(m[E], d);
                      y.children[E] = x, g.push(x), x.parent = y, x.depth = y.depth + 1;
                    }
                }
            }
            return p;
          }
          t.exports = c;
        },
        /* 19 */
        /***/
        function(t, n, a) {
          var i = a(1), o = function(s, u) {
            if (!Object(i.a)(s))
              return s;
            for (var f = [], l = 0; l < s.length; l++) {
              var c = s[l];
              u(c, l) && f.push(c);
            }
            return f;
          };
          n.a = o;
        },
        /* 20 */
        /***/
        function(t, n, a) {
          var i = a(7), o = a(21);
          function s(u, f) {
            var l = Object(o.a)(f), c = l.length;
            if (Object(i.a)(u))
              return !c;
            for (var h = 0; h < c; h += 1) {
              var d = l[h];
              if (f[d] !== u[d] || !(d in u))
                return !1;
            }
            return !0;
          }
          n.a = s;
        },
        /* 21 */
        /***/
        function(t, n, a) {
          var i = a(8), o = a(2), s = Object.keys ? function(u) {
            return Object.keys(u);
          } : function(u) {
            var f = [];
            return Object(i.a)(u, function(l, c) {
              Object(o.a)(u) && c === "prototype" || f.push(c);
            }), f;
          };
          n.a = s;
        },
        /* 22 */
        /***/
        function(t, n, a) {
          var i = a(0);
          n.a = function(o) {
            if (Object(i.a)(o))
              return o.reduce(function(s, u) {
                return Math.max(s, u);
              }, o[0]);
          };
        },
        /* 23 */
        /***/
        function(t, n, a) {
          var i = a(0);
          n.a = function(o) {
            if (Object(i.a)(o))
              return o.reduce(function(s, u) {
                return Math.min(s, u);
              }, o[0]);
          };
        },
        /* 24 */
        /***/
        function(t, n, a) {
          var i = a(1), o = Array.prototype.splice, s = function(f, l) {
            if (!Object(i.a)(f))
              return [];
            for (var c = f ? l.length : 0, h = c - 1; c--; ) {
              var d = void 0, v = l[c];
              (c === h || v !== d) && (d = v, o.call(f, v, 1));
            }
            return f;
          };
          n.a = s;
        },
        /* 25 */
        /***/
        function(t, n, a) {
          var i = a(8), o = a(0), s = a(10), u = function(f, l, c) {
            if (!Object(o.a)(f) && !Object(s.a)(f))
              return f;
            var h = c;
            return Object(i.a)(f, function(d, v) {
              h = l(h, d, v);
            }), h;
          };
          n.a = u;
        },
        /* 26 */
        /***/
        function(t, n, a) {
          n.a = i;
          function i(o, s) {
            s === void 0 && (s = /* @__PURE__ */ new Map());
            var u = [];
            if (Array.isArray(o))
              for (var f = 0, l = o.length; f < l; f++) {
                var c = o[f];
                s.has(c) || (u.push(c), s.set(c, !0));
              }
            return u;
          }
        },
        /* 27 */
        /***/
        function(t, n, a) {
          n.a = u;
          var i = a(0), o = a(2), s = a(28);
          function u(f, l) {
            if (!l)
              return {
                0: f
              };
            if (!Object(o.a)(l)) {
              var c = Object(i.a)(l) ? l : l.replace(/\s+/g, "").split("*");
              l = function(h) {
                for (var d = "_", v = 0, p = c.length; v < p; v++)
                  d += h[c[v]] && h[c[v]].toString();
                return d;
              };
            }
            return Object(s.a)(f, l);
          }
        },
        /* 28 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(2), s = Object.prototype.hasOwnProperty;
          function u(f, l) {
            if (!l || !Object(i.a)(f))
              return {};
            for (var c = {}, h = Object(o.a)(l) ? l : function(g) {
              return g[l];
            }, d, v = 0; v < f.length; v++) {
              var p = f[v];
              d = h(p), s.call(c, d) ? c[d].push(p) : c[d] = [p];
            }
            return c;
          }
          n.a = u;
        },
        /* 29 */
        /***/
        function(t, n, a) {
          n.a = function(i, o) {
            return i.hasOwnProperty(o);
          };
        },
        /* 30 */
        /***/
        function(t, n, a) {
          var i = {}.toString, o = function(s) {
            return i.call(s).replace(/^\[object /, "").replace(/]$/, "");
          };
          n.a = o;
        },
        /* 31 */
        /***/
        function(t, n, a) {
          var i = Object.prototype, o = function(s) {
            var u = s && s.constructor, f = typeof u == "function" && u.prototype || i;
            return s === f;
          };
          n.a = o;
        },
        /* 32 */
        /***/
        function(t, n, a) {
          var i = a(2);
          n.a = function(o, s) {
            if (!Object(i.a)(o))
              throw new TypeError("Expected a function");
            var u = function() {
              for (var f = [], l = 0; l < arguments.length; l++)
                f[l] = arguments[l];
              var c = s ? s.apply(this, f) : f[0], h = u.cache;
              if (h.has(c))
                return h.get(c);
              var d = o.apply(this, f);
              return h.set(c, d), d;
            };
            return u.cache = /* @__PURE__ */ new Map(), u;
          };
        },
        /* 33 */
        /***/
        function(t, n, a) {
          var i = a(14), o = a(1), s = a(4), u = function(f, l) {
            if (f === l)
              return !0;
            if (!f || !l || Object(s.a)(f) || Object(s.a)(l))
              return !1;
            if (Object(o.a)(f) || Object(o.a)(l)) {
              if (f.length !== l.length)
                return !1;
              for (var c = !0, h = 0; h < f.length && (c = u(f[h], l[h]), !!c); h++)
                ;
              return c;
            }
            if (Object(i.a)(f) || Object(i.a)(l)) {
              var d = Object.keys(f), v = Object.keys(l);
              if (d.length !== v.length)
                return !1;
              for (var c = !0, h = 0; h < d.length && (c = u(f[d[h]], l[d[h]]), !!c); h++)
                ;
              return c;
            }
            return !1;
          };
          n.a = u;
        },
        /* 34 */
        /***/
        function(t, n, a) {
          var i = a(116), o = a(15), s = a(32), u = a(4), f;
          n.a = Object(s.a)(function(l, c) {
            c === void 0 && (c = {});
            var h = c.fontSize, d = c.fontFamily, v = c.fontWeight, p = c.fontStyle, g = c.fontVariant;
            return f || (f = document.createElement("canvas").getContext("2d")), f.font = [p, g, v, h + "px", d].join(" "), f.measureText(Object(u.a)(l) ? l : "").width;
          }, function(l, c) {
            return c === void 0 && (c = {}), Object(i.a)([l], Object(o.a)(c)).join("");
          });
        },
        /* 35 */
        /***/
        function(t, n, a) {
          var i = a(18);
          t.exports = function(o, s) {
            for (var u = i(o.data, s, !0), f = i(o.data, s, !0), l = o.children.length, c = Math.round(l / 2), h = s.getSide || function(g, y) {
              return y < c ? "right" : "left";
            }, d = 0; d < l; d++) {
              var v = o.children[d], p = h(v, d);
              p === "right" ? f.children.push(v) : u.children.push(v);
            }
            return u.eachNode(function(g) {
              g.isRoot() || (g.side = "left");
            }), f.eachNode(function(g) {
              g.isRoot() || (g.side = "right");
            }), {
              left: u,
              right: f
            };
          };
        },
        /* 36 */
        /***/
        function(t, n, a) {
          var i = {
            compactBox: a(37),
            dendrogram: a(120),
            indented: a(122),
            mindmap: a(124)
          };
          t.exports = i;
        },
        /* 37 */
        /***/
        function(t, n, a) {
          function i(v, p) {
            v.prototype = Object.create(p.prototype), v.prototype.constructor = v, o(v, p);
          }
          function o(v, p) {
            return o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(y, m) {
              return y.__proto__ = m, y;
            }, o(v, p);
          }
          var s = a(11), u = a(119), f = a(17), l = a(6), c = /* @__PURE__ */ function(v) {
            i(p, v);
            function p() {
              return v.apply(this, arguments) || this;
            }
            var g = p.prototype;
            return g.execute = function() {
              var m = this;
              return f(m.rootNode, m.options, u);
            }, p;
          }(s), h = {};
          function d(v, p) {
            return p = l.assign({}, h, p), new c(v, p).execute();
          }
          t.exports = d;
        },
        /* 38 */
        /***/
        function(t, n, a) {
          Object.defineProperty(n, "__esModule", { value: !0 });
          var i = a(13);
          a.d(n, "contains", function() {
            return i.a;
          }), a.d(n, "includes", function() {
            return i.a;
          });
          var o = a(39);
          a.d(n, "difference", function() {
            return o.a;
          });
          var s = a(40);
          a.d(n, "find", function() {
            return s.a;
          });
          var u = a(41);
          a.d(n, "findIndex", function() {
            return u.a;
          });
          var f = a(42);
          a.d(n, "firstValue", function() {
            return f.a;
          });
          var l = a(43);
          a.d(n, "flatten", function() {
            return l.a;
          });
          var c = a(44);
          a.d(n, "flattenDeep", function() {
            return c.a;
          });
          var h = a(45);
          a.d(n, "getRange", function() {
            return h.a;
          });
          var d = a(46);
          a.d(n, "pull", function() {
            return d.a;
          });
          var v = a(24);
          a.d(n, "pullAt", function() {
            return v.a;
          });
          var p = a(25);
          a.d(n, "reduce", function() {
            return p.a;
          });
          var g = a(47);
          a.d(n, "remove", function() {
            return g.a;
          });
          var y = a(48);
          a.d(n, "sortBy", function() {
            return y.a;
          });
          var m = a(49);
          a.d(n, "union", function() {
            return m.a;
          });
          var b = a(26);
          a.d(n, "uniq", function() {
            return b.a;
          });
          var E = a(50);
          a.d(n, "valuesOfKey", function() {
            return E.a;
          });
          var x = a(51);
          a.d(n, "head", function() {
            return x.a;
          });
          var w = a(52);
          a.d(n, "last", function() {
            return w.a;
          });
          var _ = a(53);
          a.d(n, "startsWith", function() {
            return _.a;
          });
          var M = a(54);
          a.d(n, "endsWith", function() {
            return M.a;
          });
          var A = a(19);
          a.d(n, "filter", function() {
            return A.a;
          });
          var S = a(55);
          a.d(n, "every", function() {
            return S.a;
          });
          var T = a(56);
          a.d(n, "some", function() {
            return T.a;
          });
          var C = a(57);
          a.d(n, "group", function() {
            return C.a;
          });
          var O = a(28);
          a.d(n, "groupBy", function() {
            return O.a;
          });
          var L = a(27);
          a.d(n, "groupToMap", function() {
            return L.a;
          });
          var R = a(58);
          a.d(n, "getWrapBehavior", function() {
            return R.a;
          });
          var P = a(59);
          a.d(n, "wrapBehavior", function() {
            return P.a;
          });
          var z = a(60);
          a.d(n, "number2color", function() {
            return z.a;
          });
          var V = a(61);
          a.d(n, "parseRadius", function() {
            return V.a;
          });
          var N = a(62);
          a.d(n, "clamp", function() {
            return N.a;
          });
          var F = a(63);
          a.d(n, "fixedBase", function() {
            return F.a;
          });
          var q = a(64);
          a.d(n, "isDecimal", function() {
            return q.a;
          });
          var te = a(65);
          a.d(n, "isEven", function() {
            return te.a;
          });
          var re = a(66);
          a.d(n, "isInteger", function() {
            return re.a;
          });
          var J = a(67);
          a.d(n, "isNegative", function() {
            return J.a;
          });
          var ye = a(68);
          a.d(n, "isNumberEqual", function() {
            return ye.a;
          });
          var Be = a(69);
          a.d(n, "isOdd", function() {
            return Be.a;
          });
          var Pe = a(70);
          a.d(n, "isPositive", function() {
            return Pe.a;
          });
          var et = a(22);
          a.d(n, "max", function() {
            return et.a;
          });
          var ut = a(71);
          a.d(n, "maxBy", function() {
            return ut.a;
          });
          var at = a(23);
          a.d(n, "min", function() {
            return at.a;
          });
          var At = a(72);
          a.d(n, "minBy", function() {
            return At.a;
          });
          var xt = a(73);
          a.d(n, "mod", function() {
            return xt.a;
          });
          var lr = a(74);
          a.d(n, "toDegree", function() {
            return lr.a;
          });
          var Rt = a(75);
          a.d(n, "toInteger", function() {
            return Rt.a;
          });
          var Wt = a(76);
          a.d(n, "toRadian", function() {
            return Wt.a;
          });
          var vr = a(77);
          a.d(n, "forIn", function() {
            return vr.a;
          });
          var cr = a(29);
          a.d(n, "has", function() {
            return cr.a;
          });
          var jt = a(78);
          a.d(n, "hasKey", function() {
            return jt.a;
          });
          var or = a(79);
          a.d(n, "hasValue", function() {
            return or.a;
          });
          var Wr = a(21);
          a.d(n, "keys", function() {
            return Wr.a;
          });
          var rt = a(20);
          a.d(n, "isMatch", function() {
            return rt.a;
          });
          var ie = a(15);
          a.d(n, "values", function() {
            return ie.a;
          });
          var D = a(80);
          a.d(n, "lowerCase", function() {
            return D.a;
          });
          var _e = a(81);
          a.d(n, "lowerFirst", function() {
            return _e.a;
          });
          var Fe = a(82);
          a.d(n, "substitute", function() {
            return Fe.a;
          });
          var ge = a(83);
          a.d(n, "upperCase", function() {
            return ge.a;
          });
          var We = a(84);
          a.d(n, "upperFirst", function() {
            return We.a;
          });
          var Xe = a(30);
          a.d(n, "getType", function() {
            return Xe.a;
          });
          var Ke = a(85);
          a.d(n, "isArguments", function() {
            return Ke.a;
          });
          var Ze = a(0);
          a.d(n, "isArray", function() {
            return Ze.a;
          });
          var ht = a(1);
          a.d(n, "isArrayLike", function() {
            return ht.a;
          });
          var It = a(86);
          a.d(n, "isBoolean", function() {
            return It.a;
          });
          var sr = a(87);
          a.d(n, "isDate", function() {
            return sr.a;
          });
          var Ot = a(88);
          a.d(n, "isError", function() {
            return Ot.a;
          });
          var fr = a(2);
          a.d(n, "isFunction", function() {
            return fr.a;
          });
          var ar = a(89);
          a.d(n, "isFinite", function() {
            return ar.a;
          });
          var pr = a(7);
          a.d(n, "isNil", function() {
            return pr.a;
          });
          var hr = a(90);
          a.d(n, "isNull", function() {
            return hr.a;
          });
          var Kr = a(5);
          a.d(n, "isNumber", function() {
            return Kr.a;
          });
          var Kt = a(12);
          a.d(n, "isObject", function() {
            return Kt.a;
          });
          var Sr = a(14);
          a.d(n, "isObjectLike", function() {
            return Sr.a;
          });
          var Pn = a(10);
          a.d(n, "isPlainObject", function() {
            return Pn.a;
          });
          var Lr = a(31);
          a.d(n, "isPrototype", function() {
            return Lr.a;
          });
          var Ia = a(91);
          a.d(n, "isRegExp", function() {
            return Ia.a;
          });
          var ho = a(4);
          a.d(n, "isString", function() {
            return ho.a;
          });
          var vo = a(3);
          a.d(n, "isType", function() {
            return vo.a;
          });
          var Xr = a(92);
          a.d(n, "isUndefined", function() {
            return Xr.a;
          });
          var fa = a(93);
          a.d(n, "isElement", function() {
            return fa.a;
          });
          var ii = a(94);
          a.d(n, "requestAnimationFrame", function() {
            return ii.a;
          });
          var po = a(95);
          a.d(n, "clearAnimationFrame", function() {
            return po.a;
          });
          var go = a(96);
          a.d(n, "augment", function() {
            return go.a;
          });
          var yo = a(97);
          a.d(n, "clone", function() {
            return yo.a;
          });
          var kn = a(98);
          a.d(n, "debounce", function() {
            return kn.a;
          });
          var Ar = a(32);
          a.d(n, "memoize", function() {
            return Ar.a;
          });
          var Rn = a(99);
          a.d(n, "deepMix", function() {
            return Rn.a;
          });
          var Mt = a(8);
          a.d(n, "each", function() {
            return Mt.a;
          });
          var dr = a(100);
          a.d(n, "extend", function() {
            return dr.a;
          });
          var vt = a(101);
          a.d(n, "indexOf", function() {
            return vt.a;
          });
          var br = a(102);
          a.d(n, "isEmpty", function() {
            return br.a;
          });
          var qr = a(33);
          a.d(n, "isEqual", function() {
            return qr.a;
          });
          var oi = a(103);
          a.d(n, "isEqualWith", function() {
            return oi.a;
          });
          var si = a(104);
          a.d(n, "map", function() {
            return si.a;
          });
          var la = a(105);
          a.d(n, "mapValues", function() {
            return la.a;
          });
          var Oa = a(16);
          a.d(n, "mix", function() {
            return Oa.a;
          }), a.d(n, "assign", function() {
            return Oa.a;
          });
          var ui = a(106);
          a.d(n, "get", function() {
            return ui.a;
          });
          var fi = a(107);
          a.d(n, "set", function() {
            return fi.a;
          });
          var Qd = a(108);
          a.d(n, "pick", function() {
            return Qd.a;
          });
          var Jd = a(109);
          a.d(n, "omit", function() {
            return Jd.a;
          });
          var ev = a(110);
          a.d(n, "throttle", function() {
            return ev.a;
          });
          var tv = a(111);
          a.d(n, "toArray", function() {
            return tv.a;
          });
          var rv = a(9);
          a.d(n, "toString", function() {
            return rv.a;
          });
          var nv = a(112);
          a.d(n, "uniqueId", function() {
            return nv.a;
          });
          var av = a(113);
          a.d(n, "noop", function() {
            return av.a;
          });
          var iv = a(114);
          a.d(n, "identity", function() {
            return iv.a;
          });
          var ov = a(115);
          a.d(n, "size", function() {
            return ov.a;
          });
          var sv = a(34);
          a.d(n, "measureTextWidth", function() {
            return sv.a;
          });
          var uv = a(117);
          a.d(n, "getEllipsisText", function() {
            return uv.a;
          });
          var fv = a(118);
          a.d(n, "Cache", function() {
            return fv.a;
          });
        },
        /* 39 */
        /***/
        function(t, n, a) {
          var i = a(19), o = a(13), s = function(u, f) {
            return f === void 0 && (f = []), Object(i.a)(u, function(l) {
              return !Object(o.a)(f, l);
            });
          };
          n.a = s;
        },
        /* 40 */
        /***/
        function(t, n, a) {
          var i = a(2), o = a(20), s = a(0), u = a(10);
          function f(l, c) {
            if (!Object(s.a)(l))
              return null;
            var h;
            if (Object(i.a)(c) && (h = c), Object(u.a)(c) && (h = function(v) {
              return Object(o.a)(v, c);
            }), h) {
              for (var d = 0; d < l.length; d += 1)
                if (h(l[d]))
                  return l[d];
            }
            return null;
          }
          n.a = f;
        },
        /* 41 */
        /***/
        function(t, n, a) {
          function i(o, s, u) {
            u === void 0 && (u = 0);
            for (var f = u; f < o.length; f++)
              if (s(o[f], f))
                return f;
            return -1;
          }
          n.a = i;
        },
        /* 42 */
        /***/
        function(t, n, a) {
          var i = a(7), o = a(0), s = function(u, f) {
            for (var l = null, c = 0; c < u.length; c++) {
              var h = u[c], d = h[f];
              if (!Object(i.a)(d)) {
                Object(o.a)(d) ? l = d[0] : l = d;
                break;
              }
            }
            return l;
          };
          n.a = s;
        },
        /* 43 */
        /***/
        function(t, n, a) {
          var i = a(0), o = function(s) {
            if (!Object(i.a)(s))
              return [];
            for (var u = [], f = 0; f < s.length; f++)
              u = u.concat(s[f]);
            return u;
          };
          n.a = o;
        },
        /* 44 */
        /***/
        function(t, n, a) {
          var i = a(0), o = function(s, u) {
            if (u === void 0 && (u = []), !Object(i.a)(s))
              u.push(s);
            else
              for (var f = 0; f < s.length; f += 1)
                o(s[f], u);
            return u;
          };
          n.a = o;
        },
        /* 45 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(22), s = a(23), u = function(f) {
            var l = f.filter(function(p) {
              return !isNaN(p);
            });
            if (!l.length)
              return {
                min: 0,
                max: 0
              };
            if (Object(i.a)(f[0])) {
              for (var c = [], h = 0; h < f.length; h++)
                c = c.concat(f[h]);
              l = c;
            }
            var d = Object(o.a)(l), v = Object(s.a)(l);
            return {
              min: v,
              max: d
            };
          };
          n.a = u;
        },
        /* 46 */
        /***/
        function(t, n, a) {
          var i = Array.prototype, o = i.splice, s = i.indexOf, u = function(f) {
            for (var l = [], c = 1; c < arguments.length; c++)
              l[c - 1] = arguments[c];
            for (var h = 0; h < l.length; h++)
              for (var d = l[h], v = -1; (v = s.call(f, d)) > -1; )
                o.call(f, v, 1);
            return f;
          };
          n.a = u;
        },
        /* 47 */
        /***/
        function(t, n, a) {
          var i = a(1), o = a(24), s = function(u, f) {
            var l = [];
            if (!Object(i.a)(u))
              return l;
            for (var c = -1, h = [], d = u.length; ++c < d; ) {
              var v = u[c];
              f(v, c, u) && (l.push(v), h.push(c));
            }
            return Object(o.a)(u, h), l;
          };
          n.a = s;
        },
        /* 48 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(4), s = a(2);
          function u(f, l) {
            var c;
            if (Object(s.a)(l))
              c = function(d, v) {
                return l(d) - l(v);
              };
            else {
              var h = [];
              Object(o.a)(l) ? h.push(l) : Object(i.a)(l) && (h = l), c = function(d, v) {
                for (var p = 0; p < h.length; p += 1) {
                  var g = h[p];
                  if (d[g] > v[g])
                    return 1;
                  if (d[g] < v[g])
                    return -1;
                }
                return 0;
              };
            }
            return f.sort(c), f;
          }
          n.a = u;
        },
        /* 49 */
        /***/
        function(t, n, a) {
          var i = a(26), o = function() {
            for (var s = [], u = 0; u < arguments.length; u++)
              s[u] = arguments[u];
            return Object(i.a)([].concat.apply([], s));
          };
          n.a = o;
        },
        /* 50 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(7);
          n.a = function(s, u) {
            for (var f = [], l = {}, c = 0; c < s.length; c++) {
              var h = s[c], d = h[u];
              if (!Object(o.a)(d)) {
                Object(i.a)(d) || (d = [d]);
                for (var v = 0; v < d.length; v++) {
                  var p = d[v];
                  l[p] || (f.push(p), l[p] = !0);
                }
              }
            }
            return f;
          };
        },
        /* 51 */
        /***/
        function(t, n, a) {
          n.a = o;
          var i = a(1);
          function o(s) {
            if (Object(i.a)(s))
              return s[0];
          }
        },
        /* 52 */
        /***/
        function(t, n, a) {
          n.a = o;
          var i = a(1);
          function o(s) {
            if (Object(i.a)(s)) {
              var u = s;
              return u[u.length - 1];
            }
          }
        },
        /* 53 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(4);
          function s(u, f) {
            return Object(i.a)(u) || Object(o.a)(u) ? u[0] === f : !1;
          }
          n.a = s;
        },
        /* 54 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(4);
          function s(u, f) {
            return Object(i.a)(u) || Object(o.a)(u) ? u[u.length - 1] === f : !1;
          }
          n.a = s;
        },
        /* 55 */
        /***/
        function(t, n, a) {
          var i = function(o, s) {
            for (var u = 0; u < o.length; u++)
              if (!s(o[u], u))
                return !1;
            return !0;
          };
          n.a = i;
        },
        /* 56 */
        /***/
        function(t, n, a) {
          var i = function(o, s) {
            for (var u = 0; u < o.length; u++)
              if (s(o[u], u))
                return !0;
            return !1;
          };
          n.a = i;
        },
        /* 57 */
        /***/
        function(t, n, a) {
          var i = a(27);
          n.a = function(o, s) {
            if (!s)
              return [o];
            var u = Object(i.a)(o, s), f = [];
            for (var l in u)
              f.push(u[l]);
            return f;
          };
        },
        /* 58 */
        /***/
        function(t, n, a) {
          function i(o, s) {
            return o["_wrap_" + s];
          }
          n.a = i;
        },
        /* 59 */
        /***/
        function(t, n, a) {
          function i(o, s) {
            if (o["_wrap_" + s])
              return o["_wrap_" + s];
            var u = function(f) {
              o[s](f);
            };
            return o["_wrap_" + s] = u, u;
          }
          n.a = i;
        },
        /* 60 */
        /***/
        function(t, n, a) {
          var i = {};
          function o(s) {
            var u = i[s];
            if (!u) {
              for (var f = s.toString(16), l = f.length; l < 6; l++)
                f = "0" + f;
              u = "#" + f, i[s] = u;
            }
            return u;
          }
          n.a = o;
        },
        /* 61 */
        /***/
        function(t, n, a) {
          var i = a(0);
          function o(s) {
            var u = 0, f = 0, l = 0, c = 0;
            return Object(i.a)(s) ? s.length === 1 ? u = f = l = c = s[0] : s.length === 2 ? (u = l = s[0], f = c = s[1]) : s.length === 3 ? (u = s[0], f = c = s[1], l = s[2]) : (u = s[0], f = s[1], l = s[2], c = s[3]) : u = f = l = c = s, {
              r1: u,
              r2: f,
              r3: l,
              r4: c
            };
          }
          n.a = o;
        },
        /* 62 */
        /***/
        function(t, n, a) {
          var i = function(o, s, u) {
            return o < s ? s : o > u ? u : o;
          };
          n.a = i;
        },
        /* 63 */
        /***/
        function(t, n, a) {
          var i = function(o, s) {
            var u = s.toString(), f = u.indexOf(".");
            if (f === -1)
              return Math.round(o);
            var l = u.substr(f + 1).length;
            return l > 20 && (l = 20), parseFloat(o.toFixed(l));
          };
          n.a = i;
        },
        /* 64 */
        /***/
        function(t, n, a) {
          var i = a(5), o = function(s) {
            return Object(i.a)(s) && s % 1 !== 0;
          };
          n.a = o;
        },
        /* 65 */
        /***/
        function(t, n, a) {
          var i = a(5), o = function(s) {
            return Object(i.a)(s) && s % 2 === 0;
          };
          n.a = o;
        },
        /* 66 */
        /***/
        function(t, n, a) {
          var i = a(5), o = Number.isInteger ? Number.isInteger : function(s) {
            return Object(i.a)(s) && s % 1 === 0;
          };
          n.a = o;
        },
        /* 67 */
        /***/
        function(t, n, a) {
          var i = a(5), o = function(s) {
            return Object(i.a)(s) && s < 0;
          };
          n.a = o;
        },
        /* 68 */
        /***/
        function(t, n, a) {
          n.a = o;
          var i = 1e-5;
          function o(s, u, f) {
            return f === void 0 && (f = i), Math.abs(s - u) < f;
          }
        },
        /* 69 */
        /***/
        function(t, n, a) {
          var i = a(5), o = function(s) {
            return Object(i.a)(s) && s % 2 !== 0;
          };
          n.a = o;
        },
        /* 70 */
        /***/
        function(t, n, a) {
          var i = a(5), o = function(s) {
            return Object(i.a)(s) && s > 0;
          };
          n.a = o;
        },
        /* 71 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(2);
          n.a = function(s, u) {
            if (Object(i.a)(s)) {
              for (var f, l = -1 / 0, c = 0; c < s.length; c++) {
                var h = s[c], d = Object(o.a)(u) ? u(h) : h[u];
                d > l && (f = h, l = d);
              }
              return f;
            }
          };
        },
        /* 72 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(2);
          n.a = function(s, u) {
            if (Object(i.a)(s)) {
              for (var f, l = 1 / 0, c = 0; c < s.length; c++) {
                var h = s[c], d = Object(o.a)(u) ? u(h) : h[u];
                d < l && (f = h, l = d);
              }
              return f;
            }
          };
        },
        /* 73 */
        /***/
        function(t, n, a) {
          var i = function(o, s) {
            return (o % s + s) % s;
          };
          n.a = i;
        },
        /* 74 */
        /***/
        function(t, n, a) {
          var i = 180 / Math.PI, o = function(s) {
            return i * s;
          };
          n.a = o;
        },
        /* 75 */
        /***/
        function(t, n, a) {
          n.a = parseInt;
        },
        /* 76 */
        /***/
        function(t, n, a) {
          var i = Math.PI / 180, o = function(s) {
            return i * s;
          };
          n.a = o;
        },
        /* 77 */
        /***/
        function(t, n, a) {
          var i = a(8);
          n.a = i.a;
        },
        /* 78 */
        /***/
        function(t, n, a) {
          var i = a(29);
          n.a = i.a;
        },
        /* 79 */
        /***/
        function(t, n, a) {
          var i = a(13), o = a(15);
          n.a = function(s, u) {
            return Object(i.a)(Object(o.a)(s), u);
          };
        },
        /* 80 */
        /***/
        function(t, n, a) {
          var i = a(9), o = function(s) {
            return Object(i.a)(s).toLowerCase();
          };
          n.a = o;
        },
        /* 81 */
        /***/
        function(t, n, a) {
          var i = a(9), o = function(s) {
            var u = Object(i.a)(s);
            return u.charAt(0).toLowerCase() + u.substring(1);
          };
          n.a = o;
        },
        /* 82 */
        /***/
        function(t, n, a) {
          function i(o, s) {
            return !o || !s ? o : o.replace(/\\?\{([^{}]+)\}/g, function(u, f) {
              return u.charAt(0) === "\\" ? u.slice(1) : s[f] === void 0 ? "" : s[f];
            });
          }
          n.a = i;
        },
        /* 83 */
        /***/
        function(t, n, a) {
          var i = a(9), o = function(s) {
            return Object(i.a)(s).toUpperCase();
          };
          n.a = o;
        },
        /* 84 */
        /***/
        function(t, n, a) {
          var i = a(9), o = function(s) {
            var u = Object(i.a)(s);
            return u.charAt(0).toUpperCase() + u.substring(1);
          };
          n.a = o;
        },
        /* 85 */
        /***/
        function(t, n, a) {
          var i = a(3), o = function(s) {
            return Object(i.a)(s, "Arguments");
          };
          n.a = o;
        },
        /* 86 */
        /***/
        function(t, n, a) {
          var i = a(3), o = function(s) {
            return Object(i.a)(s, "Boolean");
          };
          n.a = o;
        },
        /* 87 */
        /***/
        function(t, n, a) {
          var i = a(3), o = function(s) {
            return Object(i.a)(s, "Date");
          };
          n.a = o;
        },
        /* 88 */
        /***/
        function(t, n, a) {
          var i = a(3), o = function(s) {
            return Object(i.a)(s, "Error");
          };
          n.a = o;
        },
        /* 89 */
        /***/
        function(t, n, a) {
          var i = a(5);
          n.a = function(o) {
            return Object(i.a)(o) && isFinite(o);
          };
        },
        /* 90 */
        /***/
        function(t, n, a) {
          var i = function(o) {
            return o === null;
          };
          n.a = i;
        },
        /* 91 */
        /***/
        function(t, n, a) {
          var i = a(3), o = function(s) {
            return Object(i.a)(s, "RegExp");
          };
          n.a = o;
        },
        /* 92 */
        /***/
        function(t, n, a) {
          var i = function(o) {
            return o === void 0;
          };
          n.a = i;
        },
        /* 93 */
        /***/
        function(t, n, a) {
          var i = function(o) {
            return o instanceof Element || o instanceof HTMLDocument;
          };
          n.a = i;
        },
        /* 94 */
        /***/
        function(t, n, a) {
          n.a = i;
          function i(o) {
            var s = window.requestAnimationFrame || window.webkitRequestAnimationFrame || // @ts-ignore
            window.mozRequestAnimationFrame || // @ts-ignore
            window.msRequestAnimationFrame || function(u) {
              return setTimeout(u, 16);
            };
            return s(o);
          }
        },
        /* 95 */
        /***/
        function(t, n, a) {
          n.a = i;
          function i(o) {
            var s = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || // @ts-ignore
            window.mozCancelAnimationFrame || // @ts-ignore
            window.msCancelAnimationFrame || clearTimeout;
            s(o);
          }
        },
        /* 96 */
        /***/
        function(t, n, a) {
          var i = a(16), o = a(2), s = function() {
            for (var u = [], f = 0; f < arguments.length; f++)
              u[f] = arguments[f];
            for (var l = u[0], c = 1; c < u.length; c++) {
              var h = u[c];
              Object(o.a)(h) && (h = h.prototype), Object(i.a)(l.prototype, h);
            }
          };
          n.a = s;
        },
        /* 97 */
        /***/
        function(t, n, a) {
          var i = a(0), o = function(s) {
            if (typeof s != "object" || s === null)
              return s;
            var u;
            if (Object(i.a)(s)) {
              u = [];
              for (var f = 0, l = s.length; f < l; f++)
                typeof s[f] == "object" && s[f] != null ? u[f] = o(s[f]) : u[f] = s[f];
            } else {
              u = {};
              for (var c in s)
                typeof s[c] == "object" && s[c] != null ? u[c] = o(s[c]) : u[c] = s[c];
            }
            return u;
          };
          n.a = o;
        },
        /* 98 */
        /***/
        function(t, n, a) {
          function i(o, s, u) {
            var f;
            return function() {
              var l = this, c = arguments, h = function() {
                f = null, u || o.apply(l, c);
              }, d = u && !f;
              clearTimeout(f), f = setTimeout(h, s), d && o.apply(l, c);
            };
          }
          n.a = i;
        },
        /* 99 */
        /***/
        function(t, n, a) {
          var i = a(0), o = a(10), s = 5;
          function u(l, c, h, d) {
            h = h || 0, d = d || s;
            for (var v in c)
              if (c.hasOwnProperty(v)) {
                var p = c[v];
                p !== null && Object(o.a)(p) ? (Object(o.a)(l[v]) || (l[v] = {}), h < d ? u(l[v], p, h + 1, d) : l[v] = c[v]) : Object(i.a)(p) ? (l[v] = [], l[v] = l[v].concat(p)) : p !== void 0 && (l[v] = p);
              }
          }
          var f = function(l) {
            for (var c = [], h = 1; h < arguments.length; h++)
              c[h - 1] = arguments[h];
            for (var d = 0; d < c.length; d += 1)
              u(l, c[d]);
            return l;
          };
          n.a = f;
        },
        /* 100 */
        /***/
        function(t, n, a) {
          var i = a(16), o = a(2), s = function(u, f, l, c) {
            Object(o.a)(f) || (l = f, f = u, u = function() {
            });
            var h = Object.create ? function(v, p) {
              return Object.create(v, {
                constructor: {
                  value: p
                }
              });
            } : function(v, p) {
              function g() {
              }
              g.prototype = v;
              var y = new g();
              return y.constructor = p, y;
            }, d = h(f.prototype, u);
            return u.prototype = Object(i.a)(d, u.prototype), u.superclass = h(f.prototype, f), Object(i.a)(d, l), Object(i.a)(u, c), u;
          };
          n.a = s;
        },
        /* 101 */
        /***/
        function(t, n, a) {
          var i = a(1), o = function(s, u) {
            if (!Object(i.a)(s))
              return -1;
            var f = Array.prototype.indexOf;
            if (f)
              return f.call(s, u);
            for (var l = -1, c = 0; c < s.length; c++)
              if (s[c] === u) {
                l = c;
                break;
              }
            return l;
          };
          n.a = o;
        },
        /* 102 */
        /***/
        function(t, n, a) {
          var i = a(7), o = a(1), s = a(30), u = a(31), f = Object.prototype.hasOwnProperty;
          function l(c) {
            if (Object(i.a)(c))
              return !0;
            if (Object(o.a)(c))
              return !c.length;
            var h = Object(s.a)(c);
            if (h === "Map" || h === "Set")
              return !c.size;
            if (Object(u.a)(c))
              return !Object.keys(c).length;
            for (var d in c)
              if (f.call(c, d))
                return !1;
            return !0;
          }
          n.a = l;
        },
        /* 103 */
        /***/
        function(t, n, a) {
          var i = a(2), o = a(33);
          n.a = function(s, u, f) {
            return Object(i.a)(f) ? !!f(s, u) : Object(o.a)(s, u);
          };
        },
        /* 104 */
        /***/
        function(t, n, a) {
          var i = a(1), o = function(s, u) {
            if (!Object(i.a)(s))
              return s;
            for (var f = [], l = 0; l < s.length; l++) {
              var c = s[l];
              f.push(u(c, l));
            }
            return f;
          };
          n.a = o;
        },
        /* 105 */
        /***/
        function(t, n, a) {
          var i = a(7), o = a(12), s = function(u) {
            return u;
          };
          n.a = function(u, f) {
            f === void 0 && (f = s);
            var l = {};
            return Object(o.a)(u) && !Object(i.a)(u) && Object.keys(u).forEach(function(c) {
              l[c] = f(u[c], c);
            }), l;
          };
        },
        /* 106 */
        /***/
        function(t, n, a) {
          var i = a(4);
          n.a = function(o, s, u) {
            for (var f = 0, l = Object(i.a)(s) ? s.split(".") : s; o && f < l.length; )
              o = o[l[f++]];
            return o === void 0 || f < l.length ? u : o;
          };
        },
        /* 107 */
        /***/
        function(t, n, a) {
          var i = a(12), o = a(4), s = a(5);
          n.a = function(u, f, l) {
            var c = u, h = Object(o.a)(f) ? f.split(".") : f;
            return h.forEach(function(d, v) {
              v < h.length - 1 ? (Object(i.a)(c[d]) || (c[d] = Object(s.a)(h[v + 1]) ? [] : {}), c = c[d]) : c[d] = l;
            }), u;
          };
        },
        /* 108 */
        /***/
        function(t, n, a) {
          var i = a(8), o = a(10), s = Object.prototype.hasOwnProperty;
          n.a = function(u, f) {
            if (u === null || !Object(o.a)(u))
              return {};
            var l = {};
            return Object(i.a)(f, function(c) {
              s.call(u, c) && (l[c] = u[c]);
            }), l;
          };
        },
        /* 109 */
        /***/
        function(t, n, a) {
          var i = a(25);
          n.a = function(o, s) {
            return Object(i.a)(o, function(u, f, l) {
              return s.includes(l) || (u[l] = f), u;
            }, {});
          };
        },
        /* 110 */
        /***/
        function(t, n, a) {
          n.a = function(i, o, s) {
            var u, f, l, c, h = 0;
            s || (s = {});
            var d = function() {
              h = s.leading === !1 ? 0 : Date.now(), u = null, c = i.apply(f, l), u || (f = l = null);
            }, v = function() {
              var p = Date.now();
              !h && s.leading === !1 && (h = p);
              var g = o - (p - h);
              return f = this, l = arguments, g <= 0 || g > o ? (u && (clearTimeout(u), u = null), h = p, c = i.apply(f, l), u || (f = l = null)) : !u && s.trailing !== !1 && (u = setTimeout(d, g)), c;
            };
            return v.cancel = function() {
              clearTimeout(u), h = 0, u = f = l = null;
            }, v;
          };
        },
        /* 111 */
        /***/
        function(t, n, a) {
          var i = a(1);
          n.a = function(o) {
            return Object(i.a)(o) ? Array.prototype.slice.call(o) : [];
          };
        },
        /* 112 */
        /***/
        function(t, n, a) {
          var i = {};
          n.a = function(o) {
            return o = o || "g", i[o] ? i[o] += 1 : i[o] = 1, o + i[o];
          };
        },
        /* 113 */
        /***/
        function(t, n, a) {
          n.a = function() {
          };
        },
        /* 114 */
        /***/
        function(t, n, a) {
          n.a = function(i) {
            return i;
          };
        },
        /* 115 */
        /***/
        function(t, n, a) {
          n.a = s;
          var i = a(7), o = a(1);
          function s(u) {
            return Object(i.a)(u) ? 0 : Object(o.a)(u) ? u.length : Object.keys(u).length;
          }
        },
        /* 116 */
        /***/
        function(t, n, a) {
          n.a = i;
          function i() {
            for (var o = 0, s = 0, u = arguments.length; s < u; s++)
              o += arguments[s].length;
            for (var f = Array(o), l = 0, s = 0; s < u; s++)
              for (var c = arguments[s], h = 0, d = c.length; h < d; h++, l++)
                f[l] = c[h];
            return f;
          }
        },
        /* 117 */
        /***/
        function(t, n, a) {
          var i = a(4), o = a(9), s = a(34);
          n.a = function(u, f, l, c) {
            c === void 0 && (c = "...");
            var h = 16, d = Object(s.a)(c, l), v = Object(i.a)(u) ? u : Object(o.a)(u), p = f, g = [], y, m;
            if (Object(s.a)(u, l) <= f)
              return u;
            for (; y = v.substr(0, h), m = Object(s.a)(y, l), !(m + d > p && m > p); )
              if (g.push(y), p -= m, v = v.substr(h), !v)
                return g.join("");
            for (; y = v.substr(0, 1), m = Object(s.a)(y, l), !(m + d > p); )
              if (g.push(y), p -= m, v = v.substr(1), !v)
                return g.join("");
            return "" + g.join("") + c;
          };
        },
        /* 118 */
        /***/
        function(t, n, a) {
          var i = (
            /** @class */
            function() {
              function o() {
                this.map = {};
              }
              return o.prototype.has = function(s) {
                return this.map[s] !== void 0;
              }, o.prototype.get = function(s, u) {
                var f = this.map[s];
                return f === void 0 ? u : f;
              }, o.prototype.set = function(s, u) {
                this.map[s] = u;
              }, o.prototype.clear = function() {
                this.map = {};
              }, o.prototype.delete = function(s) {
                delete this.map[s];
              }, o.prototype.size = function() {
                return Object.keys(this.map).length;
              }, o;
            }()
          );
          n.a = i;
        },
        /* 119 */
        /***/
        function(t, n) {
          function a(l, c, h, d) {
            d === void 0 && (d = []);
            var v = this;
            v.w = l || 0, v.h = c || 0, v.y = h || 0, v.x = 0, v.c = d || [], v.cs = d.length, v.prelim = 0, v.mod = 0, v.shift = 0, v.change = 0, v.tl = null, v.tr = null, v.el = null, v.er = null, v.msel = 0, v.mser = 0;
          }
          a.fromNode = function(l, c) {
            if (!l)
              return null;
            var h = [];
            return l.children.forEach(function(d) {
              h.push(a.fromNode(d, c));
            }), c ? new a(l.height, l.width, l.x, h) : new a(l.width, l.height, l.y, h);
          };
          function i(l, c, h) {
            h ? l.y += c : l.x += c, l.children.forEach(function(d) {
              i(d, c, h);
            });
          }
          function o(l, c) {
            var h = c ? l.y : l.x;
            return l.children.forEach(function(d) {
              h = Math.min(o(d, c), h);
            }), h;
          }
          function s(l, c) {
            var h = o(l, c);
            i(l, -h, c);
          }
          function u(l, c, h) {
            h ? c.y = l.x : c.x = l.x, l.c.forEach(function(d, v) {
              u(d, c.children[v], h);
            });
          }
          function f(l, c, h) {
            h === void 0 && (h = 0), c ? (l.x = h, h += l.width) : (l.y = h, h += l.height), l.children.forEach(function(d) {
              f(d, c, h);
            });
          }
          t.exports = function(l, c) {
            c === void 0 && (c = {});
            var h = c.isHorizontal;
            function d(C) {
              if (C.cs === 0) {
                v(C);
                return;
              }
              d(C.c[0]);
              for (var O = S(b(C.c[0].el), 0, null), L = 1; L < C.cs; ++L) {
                d(C.c[L]);
                var R = b(C.c[L].er);
                p(C, L, O), O = S(R, L, O);
              }
              w(C), v(C);
            }
            function v(C) {
              C.cs === 0 ? (C.el = C, C.er = C, C.msel = C.mser = 0) : (C.el = C.c[0].el, C.msel = C.c[0].msel, C.er = C.c[C.cs - 1].er, C.mser = C.c[C.cs - 1].mser);
            }
            function p(C, O, L) {
              for (var R = C.c[O - 1], P = R.mod, z = C.c[O], V = z.mod; R !== null && z !== null; ) {
                b(R) > L.low && (L = L.nxt);
                var N = P + R.prelim + R.w - (V + z.prelim);
                N > 0 && (V += N, g(C, O, L.index, N));
                var F = b(R), q = b(z);
                F <= q && (R = m(R), R !== null && (P += R.mod)), F >= q && (z = y(z), z !== null && (V += z.mod));
              }
              !R && z ? E(C, O, z, V) : R && !z && x(C, O, R, P);
            }
            function g(C, O, L, R) {
              C.c[O].mod += R, C.c[O].msel += R, C.c[O].mser += R, M(C, O, L, R);
            }
            function y(C) {
              return C.cs === 0 ? C.tl : C.c[0];
            }
            function m(C) {
              return C.cs === 0 ? C.tr : C.c[C.cs - 1];
            }
            function b(C) {
              return C.y + C.h;
            }
            function E(C, O, L, R) {
              var P = C.c[0].el;
              P.tl = L;
              var z = R - L.mod - C.c[0].msel;
              P.mod += z, P.prelim -= z, C.c[0].el = C.c[O].el, C.c[0].msel = C.c[O].msel;
            }
            function x(C, O, L, R) {
              var P = C.c[O].er;
              P.tr = L;
              var z = R - L.mod - C.c[O].mser;
              P.mod += z, P.prelim -= z, C.c[O].er = C.c[O - 1].er, C.c[O].mser = C.c[O - 1].mser;
            }
            function w(C) {
              C.prelim = (C.c[0].prelim + C.c[0].mod + C.c[C.cs - 1].mod + C.c[C.cs - 1].prelim + C.c[C.cs - 1].w) / 2 - C.w / 2;
            }
            function _(C, O) {
              O += C.mod, C.x = C.prelim + O, A(C);
              for (var L = 0; L < C.cs; L++)
                _(C.c[L], O);
            }
            function M(C, O, L, R) {
              if (L !== O - 1) {
                var P = O - L;
                C.c[L + 1].shift += R / P, C.c[O].shift -= R / P, C.c[O].change -= R - R / P;
              }
            }
            function A(C) {
              for (var O = 0, L = 0, R = 0; R < C.cs; R++)
                O += C.c[R].shift, L += O + C.c[R].change, C.c[R].mod += L;
            }
            function S(C, O, L) {
              for (; L !== null && C >= L.low; )
                L = L.nxt;
              return {
                low: C,
                index: O,
                nxt: L
              };
            }
            f(l, h);
            var T = a.fromNode(l, h);
            return d(T), _(T, 0), u(T, l, h), s(l, h), l;
          };
        },
        /* 120 */
        /***/
        function(t, n, a) {
          function i(v, p) {
            v.prototype = Object.create(p.prototype), v.prototype.constructor = v, o(v, p);
          }
          function o(v, p) {
            return o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(y, m) {
              return y.__proto__ = m, y;
            }, o(v, p);
          }
          var s = a(11), u = a(121), f = a(17), l = a(6), c = /* @__PURE__ */ function(v) {
            i(p, v);
            function p() {
              return v.apply(this, arguments) || this;
            }
            var g = p.prototype;
            return g.execute = function() {
              var m = this;
              return m.rootNode.width = 0, f(m.rootNode, m.options, u);
            }, p;
          }(s), h = {};
          function d(v, p) {
            return p = l.assign({}, h, p), new c(v, p).execute();
          }
          t.exports = d;
        },
        /* 121 */
        /***/
        function(t, n, a) {
          var i = a(6);
          function o(f, l) {
            l === void 0 && (l = []);
            var c = this;
            c.x = c.y = 0, c.leftChild = c.rightChild = null, c.height = 0, c.children = l;
          }
          var s = {
            isHorizontal: !0,
            nodeSep: 20,
            nodeSize: 20,
            rankSep: 200,
            subTreeSep: 10
          };
          function u(f, l, c) {
            c ? (l.x = f.x, l.y = f.y) : (l.x = f.y, l.y = f.x), f.children.forEach(function(h, d) {
              u(h, l.children[d], c);
            });
          }
          t.exports = function(f, l) {
            l === void 0 && (l = {}), l = i.assign({}, s, l);
            var c = 0;
            function h(y) {
              if (!y)
                return null;
              y.width = 0, y.depth && y.depth > c && (c = y.depth);
              var m = y.children, b = m.length, E = new o(y.height, []);
              return m.forEach(function(x, w) {
                var _ = h(x);
                E.children.push(_), w === 0 && (E.leftChild = _), w === b - 1 && (E.rightChild = _);
              }), E.originNode = y, E.isLeaf = y.isLeaf(), E;
            }
            function d(y) {
              if (y.isLeaf || y.children.length === 0)
                y.drawingDepth = c;
              else {
                var m = y.children.map(function(E) {
                  return d(E);
                }), b = Math.min.apply(null, m);
                y.drawingDepth = b - 1;
              }
              return y.drawingDepth;
            }
            var v;
            function p(y) {
              y.x = y.drawingDepth * l.rankSep, y.isLeaf ? (y.y = 0, v && (y.y = v.y + v.height + l.nodeSep, y.originNode.parent !== v.originNode.parent && (y.y += l.subTreeSep)), v = y) : (y.children.forEach(function(m) {
                p(m);
              }), y.y = (y.leftChild.y + y.rightChild.y) / 2);
            }
            var g = h(f);
            return d(g), p(g), u(g, f, l.isHorizontal), f;
          };
        },
        /* 122 */
        /***/
        function(t, n, a) {
          function i(g, y) {
            g.prototype = Object.create(y.prototype), g.prototype.constructor = g, o(g, y);
          }
          function o(g, y) {
            return o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(b, E) {
              return b.__proto__ = E, b;
            }, o(g, y);
          }
          var s = a(11), u = a(123), f = a(35), l = a(6), c = [
            "LR",
            // left to right
            "RL",
            // right to left
            "H"
            // horizontal
          ], h = c[0], d = /* @__PURE__ */ function(g) {
            i(y, g);
            function y() {
              return g.apply(this, arguments) || this;
            }
            var m = y.prototype;
            return m.execute = function() {
              var E = this, x = E.options, w = E.rootNode;
              x.isHorizontal = !0;
              var _ = x.indent, M = _ === void 0 ? 20 : _, A = x.dropCap, S = A === void 0 ? !0 : A, T = x.direction, C = T === void 0 ? h : T, O = x.align;
              if (C && c.indexOf(C) === -1)
                throw new TypeError("Invalid direction: " + C);
              if (C === c[0])
                u(w, M, S, O);
              else if (C === c[1])
                u(w, M, S, O), w.right2left();
              else if (C === c[2]) {
                var L = f(w, x), R = L.left, P = L.right;
                u(R, M, S, O), R.right2left(), u(P, M, S, O);
                var z = R.getBoundingBox();
                P.translate(z.width, 0), w.x = P.x - w.width / 2;
              }
              return w;
            }, y;
          }(s), v = {};
          function p(g, y) {
            return y = l.assign({}, v, y), new d(g, y).execute();
          }
          t.exports = p;
        },
        /* 123 */
        /***/
        function(t, n, a) {
          var i = a(6);
          function o(s, u, f, l, c) {
            var h = typeof f == "function" ? f(s) : f * s.depth;
            if (!l)
              try {
                if (s.id === s.parent.children[0].id) {
                  s.x += h, s.y = u ? u.y : 0;
                  return;
                }
              } catch {
              }
            if (s.x += h, u) {
              if (s.y = u.y + i.getHeight(u, s, c), u.parent && s.parent.id !== u.parent.id) {
                var d = u.parent, v = d.y + i.getHeight(d, s, c);
                s.y = v > s.y ? v : s.y;
              }
            } else
              s.y = 0;
          }
          t.exports = function(s, u, f, l) {
            var c = null;
            s.eachNode(function(h) {
              o(h, c, u, f, l), c = h;
            });
          };
        },
        /* 124 */
        /***/
        function(t, n, a) {
          function i(v, p) {
            v.prototype = Object.create(p.prototype), v.prototype.constructor = v, o(v, p);
          }
          function o(v, p) {
            return o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(y, m) {
              return y.__proto__ = m, y;
            }, o(v, p);
          }
          var s = a(11), u = a(125), f = a(17), l = a(6), c = /* @__PURE__ */ function(v) {
            i(p, v);
            function p() {
              return v.apply(this, arguments) || this;
            }
            var g = p.prototype;
            return g.execute = function() {
              var m = this;
              return f(m.rootNode, m.options, u);
            }, p;
          }(s), h = {};
          function d(v, p) {
            return p = l.assign({}, h, p), new c(v, p).execute();
          }
          t.exports = d;
        },
        /* 125 */
        /***/
        function(t, n, a) {
          var i = a(6);
          function o(f, l) {
            var c = 0;
            return f.children.length ? f.children.forEach(function(h) {
              c += o(h, l);
            }) : c = f.height, f._subTreeSep = l.getSubTreeSep(f.data), f.totalHeight = Math.max(f.height, c) + 2 * f._subTreeSep, f.totalHeight;
          }
          function s(f) {
            var l = f.children, c = l.length;
            if (c) {
              l.forEach(function(y) {
                s(y);
              });
              var h = l[0], d = l[c - 1], v = d.y - h.y + d.height, p = 0;
              if (l.forEach(function(y) {
                p += y.totalHeight;
              }), v > f.height)
                f.y = h.y + v / 2 - f.height / 2;
              else if (l.length !== 1 || f.height > p) {
                var g = f.y + (f.height - v) / 2 - h.y;
                l.forEach(function(y) {
                  y.translate(0, g);
                });
              } else
                f.y = (h.y + h.height / 2 + d.y + d.height / 2) / 2 - f.height / 2;
            }
          }
          var u = {
            getSubTreeSep: function() {
              return 0;
            }
          };
          t.exports = function(f, l) {
            l === void 0 && (l = {}), l = i.assign({}, u, l), f.parent = {
              x: 0,
              width: 0,
              height: 0,
              y: 0
            }, f.BFTraverse(function(c) {
              c.x = c.parent.x + c.parent.width;
            }), f.parent = null, o(f, l), f.startY = 0, f.y = f.totalHeight / 2 - f.height / 2, f.eachNode(function(c) {
              var h = c.children, d = h.length;
              if (d) {
                var v = h[0];
                if (v.startY = c.startY + c._subTreeSep, d === 1)
                  v.y = c.y + c.height / 2 - v.height / 2;
                else {
                  v.y = v.startY + v.totalHeight / 2 - v.height / 2;
                  for (var p = 1; p < d; p++) {
                    var g = h[p];
                    g.startY = h[p - 1].startY + h[p - 1].totalHeight, g.y = g.startY + g.totalHeight / 2 - g.height / 2;
                  }
                }
              }
            }), s(f);
          };
        }
        /******/
      ])
    );
  });
})(YD);
var cse = YD.exports;
const D2 = /* @__PURE__ */ Ai(cse);
var L2 = xa.traverseTree, hse = function(e, t) {
  var n;
  return e ? Pt(e) ? n = function(i) {
    return e;
  } : n = e : n = function(i) {
    return t || 1;
  }, n;
}, dse = function(e, t) {
  var n = [], a = [], i = {}, o = 0;
  for (o = 0; o < e.length; o++) {
    var s = e[o];
    i[s.id] = o, n.push(s.x), n.push(s.y), n.push(0), n.push(0), a.push([]);
  }
  for (o = 0; o < t.length; o++) {
    var u = t[o];
    a[i[u.source]].push(i[u.target]), a[i[u.target]].push(i[u.source]);
  }
  var f = 0;
  for (o = 0; o < e.length; o++) {
    var l = n.length, c = a[o], h = c.length;
    n[o * 4 + 2] = l, n[o * 4 + 3] = c.length, f = Math.max(f, c.length);
    for (var d = 0; d < h; ++d) {
      var v = c[d];
      n.push(+v);
    }
  }
  for (; n.length % 4 !== 0; )
    n.push(0);
  return {
    array: new Float32Array(n),
    maxEdgePerVetex: f
  };
}, vse = function(e, t, n) {
  var a = [], i = [], o = {}, s = 0;
  for (s = 0; s < e.length; s++) {
    var u = e[s];
    o[u.id] = s, a.push(u.x), a.push(u.y), a.push(0), a.push(0), i.push([]);
  }
  for (s = 0; s < t.length; s++) {
    var f = t[s];
    i[o[f.source]].push(o[f.target]), i[o[f.source]].push(n(f)), i[o[f.target]].push(o[f.source]), i[o[f.target]].push(n(f));
  }
  var l = 0;
  for (s = 0; s < e.length; s++) {
    var c = a.length, h = i[s], d = h.length;
    a[s * 4 + 2] = c, a[s * 4 + 3] = d / 2, l = Math.max(l, d / 2);
    for (var v = 0; v < d; ++v) {
      var p = h[v];
      a.push(+p);
    }
  }
  for (; a.length % 4 !== 0; )
    a.push(0);
  return {
    array: new Float32Array(a),
    maxEdgePerVetex: l
  };
}, pse = function(e, t, n, a) {
  var i = [], o = [], s = {}, u = 0;
  for (u = 0; u < e.length; u++) {
    var f = e[u];
    s[f.id] = u, i.push(f.x), i.push(f.y), i.push(0), i.push(0), o.push([]);
  }
  for (u = 0; u < t.length; u++) {
    var l = t[u];
    o[s[l.source]].push(s[l.target]), o[s[l.source]].push(n(l)), o[s[l.source]].push(a(l)), o[s[l.source]].push(0), o[s[l.target]].push(s[l.source]), o[s[l.target]].push(n(l)), o[s[l.target]].push(a(l)), o[s[l.target]].push(0);
  }
  var c = 0;
  for (u = 0; u < e.length; u++) {
    var h = i.length, d = o[u], v = d.length;
    i[u * 4 + 2] = h + 1048576 * v / 4, i[u * 4 + 3] = 0, c = Math.max(c, v / 4);
    for (var p = 0; p < v; ++p) {
      var g = d[p];
      i.push(+g);
    }
  }
  for (; i.length % 4 !== 0; )
    i.push(0);
  return {
    array: new Float32Array(i),
    maxEdgePerVetex: c
  };
}, gse = function(e, t) {
  var n = [], a = e.length, i = {};
  return t.forEach(function(o) {
    e.forEach(function(s, u) {
      if (i[o[s]] === void 0 && (i[o[s]] = Object.keys(i).length), n.push(i[o[s]]), u === a - 1)
        for (; n.length % 4 !== 0; )
          n.push(0);
    });
  }), {
    array: new Float32Array(n),
    count: Object.keys(i).length
  };
}, yse = function(e) {
  for (var t = [], n = e.length, a = e[0].length, i = function(u) {
    e.forEach(function(f, l) {
      if (t.push(f[u]), l === n - 1)
        for (; t.length % 4 !== 0; )
          t.push(0);
    });
  }, o = 0; o < a; o++)
    i(o);
  return new Float32Array(t);
}, mse = function(e, t) {
  var n = ["V", "TB", "BT"], a = {
    x: 1 / 0,
    y: 1 / 0
  }, i = {
    x: -1 / 0,
    y: -1 / 0
  }, o = "x", s = "y";
  t && n.indexOf(t) >= 0 && (s = "x", o = "y");
  var u = 0;
  L2(e, function(c) {
    return u++, c.x > i.x && (i.x = c.x), c.x < a.x && (a.x = c.x), c.y > i.y && (i.y = c.y), c.y < a.y && (a.y = c.y), !0;
  });
  var f = Math.PI * 2 / u, l = i[s] - a[s];
  return l === 0 || L2(e, function(c) {
    var h = (c[s] - a[s]) / l * (Math.PI * 2 - f) + f, d = Math.abs(o === "x" ? c.x - e.x : c.y - e.y);
    return c.x = d * Math.cos(h), c.y = d * Math.sin(h), !0;
  }), e;
};
const bse = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  arrayToTextureData: yse,
  attributesToTextureData: gse,
  buildTextureData: dse,
  buildTextureDataWithOneEdgeAttr: vse,
  buildTextureDataWithTwoEdgeAttr: pse,
  proccessToFunc: hse,
  radialLayout: mse
}, Symbol.toStringTag, { value: "Module" }));
var HD = function r() {
  return typeof window > "u" || typeof document > "u" ? {} : {
    canvas: !!window.CanvasRenderingContext2D,
    webgl: function() {
      try {
        var e = document.createElement("canvas");
        return !!(window.WebGLRenderingContext && (e.getContext("webgl") || e.getContext("experimental-webgl")));
      } catch {
        return !1;
      }
    }(),
    workers: !!window.Worker,
    fileapi: window.File && window.FileReader && window.FileList && window.Blob,
    getWebGLErrorMessage: function() {
      var t = document.createElement("div");
      return t.id = "webgl-error-message", t.style.fontFamily = "monospace", t.style.fontSize = "13px", t.style.fontWeight = "normal", t.style.textAlign = "center", t.style.background = "#fff", t.style.color = "#000", t.style.padding = "1.5em", t.style.width = "400px", t.style.margin = "5em auto 0", this.webgl || (t.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`) : ['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)), t;
    },
    addGetWebGLMessage: function(t) {
      t = t || {};
      var n = t.parent !== void 0 ? t.parent : document.body, a = t.id !== void 0 ? t.id : "oldie", i = r().getWebGLErrorMessage();
      i.id = a, n.appendChild(i);
    }
  };
};
const Ese = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  gpuDetector: HD
}, Symbol.toStringTag, { value: "Module" }));
var KD = function() {
  var e = navigator.userAgent.toLowerCase();
  return e.indexOf("firefox") > -1 ? "firefox" : e.indexOf("safari") > -1 ? "safari" : e.indexOf("opr") > -1 ? "opera" : e.indexOf("chrome") > -1 ? "chrome" : e.indexOf("trident") > -1 ? "ie 11" : e.indexOf("ie") > -1 ? "ie" : "unknown";
};
const xse = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  getBrowserName: KD
}, Symbol.toStringTag, { value: "Module" }));
var co = B(B(B(B(B({}, xa), o9), bse), Ese), xse);
co.radialLayout;
Qt.registerLayout("grid", Qt.GridLayout);
Qt.registerLayout("random", Qt.RandomLayout);
Qt.registerLayout("force", Qt.ForceLayout);
Qt.registerLayout("circular", Qt.CircularLayout);
Qt.registerLayout("dagre", Qt.DagreLayout);
Qt.registerLayout("dagreCompound", Qt.DagreCompoundLayout);
Qt.registerLayout("radial", Qt.RadialLayout);
Qt.registerLayout("concentric", Qt.ConcentricLayout);
Qt.registerLayout("mds", Qt.MDSLayout);
Qt.registerLayout("fruchterman", Qt.FruchtermanLayout);
Qt.registerLayout("fruchterman-gpu", Qt.FruchtermanGPULayout);
Qt.registerLayout("gForce", Qt.GForceLayout);
Qt.registerLayout("force2", Qt.Force2Layout);
Qt.registerLayout("gForce-gpu", Qt.GForceGPULayout);
Qt.registerLayout("comboForce", Qt.ComboForceLayout);
Qt.registerLayout("comboCombined", Qt.ComboCombinedLayout);
Qt.registerLayout("forceAtlas2", Qt.ForceAtlas2Layout);
var wse = (
  /** @class */
  /* @__PURE__ */ function() {
    function r(e, t) {
      var n = e.toString(), a = new Blob(["importScripts('".concat(t, "');(").concat(n, ")()")], {
        type: "text/javascript"
      });
      return new Worker(URL.createObjectURL(a));
    }
    return r;
  }()
), _se = function(e) {
  e === void 0 && (e = "https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");
  function t() {
    var a = {
      // run layout
      RUN: "LAYOUT_RUN",
      // layout ended with success
      END: "LAYOUT_END",
      // layout error
      ERROR: "LAYOUT_ERROR",
      // layout tick, used in force directed layout
      TICK: "LAYOUT_TICK",
      GPURUN: "GPU_LAYOUT_RUN",
      GPUEND: "GPU_LAYOUT_END"
    };
    layout.registerLayout("grid", layout.GridLayout), layout.registerLayout("random", layout.RandomLayout), layout.registerLayout("force", layout.ForceLayout), layout.registerLayout("force2", layout.Force2Layout), layout.registerLayout("circular", layout.CircularLayout), layout.registerLayout("dagre", layout.DagreLayout), layout.registerLayout("dagreCompound", layout.DagreCompoundLayout), layout.registerLayout("radial", layout.RadialLayout), layout.registerLayout("concentric", layout.ConcentricLayout), layout.registerLayout("mds", layout.MDSLayout), layout.registerLayout("fruchterman", layout.FruchtermanLayout), layout.registerLayout("fruchterman-gpu", layout.FruchtermanGPULayout), layout.registerLayout("gForce", layout.GForceLayout), layout.registerLayout("gForce-gpu", layout.GForceGPULayout), layout.registerLayout("comboForce", layout.ComboForceLayout), layout.registerLayout("comboCombined", layout.ComboCombinedLayout), layout.registerLayout("forceAtlas2", layout.ForceAtlas2Layout);
    function i(s) {
      var u = s.data.type;
      return u === a.RUN || u === a.GPURUN;
    }
    function o(s) {
      var u = this, f = s.data.type;
      switch (f) {
        case a.RUN: {
          var l = s.data, c = l.nodes, h = l.edges, d = l.layoutCfg, v = d === void 0 ? {} : d, p = v.type, g = layout.getLayoutByName(p);
          if (!g) {
            this.postMessage({
              type: a.ERROR,
              message: "layout ".concat(p, " not found")
            });
            break;
          }
          var y;
          v.onLayoutEnd = function() {
            u.postMessage({
              type: a.END,
              nodes: c
            }), y == null || y.destroy();
          }, y = new g(v), y.init({
            nodes: c,
            edges: h
          }), y.execute();
          break;
        }
        case a.GPURUN: {
          var m = s.data, b = m.nodes, h = m.edges, E = m.layoutCfg, v = E === void 0 ? {} : E, x = m.canvas, p = v.type, g = layout.getLayoutByName(p);
          if (!g) {
            this.postMessage({
              type: a.ERROR,
              message: "layout ".concat(p, " not found")
            });
            break;
          }
          if (p.split("-")[1] !== "gpu") {
            this.postMessage({
              type: a.ERROR,
              message: "layout ".concat(p, " does not support GPU")
            });
            break;
          }
          var w = new g(v);
          w.init({
            nodes: b,
            edges: h
          }), w.executeWithWorker(x, this);
          break;
        }
      }
    }
    onmessage = function(u) {
      i(u) && o(u);
    };
  }
  var n = new wse(t, e);
  return n;
}, Ds = {
  // run layout
  RUN: "LAYOUT_RUN",
  // layout ended with success
  END: "LAYOUT_END",
  // layout error
  ERROR: "LAYOUT_ERROR",
  // layout tick, used in force directed layout
  TICK: "LAYOUT_TICK",
  GPURUN: "GPU_LAYOUT_RUN",
  GPUEND: "GPU_LAYOUT_END"
};
function jg(r) {
  "@babel/helpers - typeof";
  return jg = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, jg(r);
}
var N2 = function(e) {
  return setTimeout(e, 16);
}, P2 = function(e) {
  return clearTimeout(e);
}, Fc = {
  // pollyfill
  requestAnimationFrame: function(e) {
    var t = typeof window < "u" && (window.requestAnimationFrame || window.webkitRequestAnimationFrame) || N2;
    return t(e);
  },
  cancelAnimationFrame: function(e) {
    var t = typeof window < "u" && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame) || P2;
    return t(e);
  }
}, Mse = ["fruchterman", "gForce"], Sse = ["force", "grid", "circular"], Ase = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this, t) || this;
      return n.graph = t, n.layoutCfg = t.get("layout") || {}, n.layoutType = n.getLayoutType(), n.worker = null, n.workerData = {}, n.initLayout(), n;
    }
    return e.prototype.initLayout = function() {
    }, e.prototype.getWorker = function() {
      return this.worker ? this.worker : (typeof Worker > "u" ? (console.warn("Web worker is not supported in current browser."), this.worker = null) : this.worker = _se(this.layoutCfg.workerScriptURL), this.worker);
    }, e.prototype.stopWorker = function() {
      var t = this.workerData;
      this.worker && (this.worker.terminate(), this.worker = null, t.requestId && (Fc.cancelAnimationFrame(t.requestId), t.requestId = null), t.requestId2 && (Fc.cancelAnimationFrame(t.requestId2), t.requestId2 = null));
    }, e.prototype.execLayoutMethod = function(t, n) {
      var a = this;
      return new Promise(function(i, o) {
        return zn(a, void 0, void 0, function() {
          var s, u, f, l, c, p, h, d, v, p, g;
          return Un(this, function(y) {
            switch (y.label) {
              case 0:
                if (s = this.graph, !s || s.get("destroyed"))
                  return [
                    2
                    /*return*/
                  ];
                u = t.type, t.onLayoutEnd = function() {
                  s.emit("aftersublayout", {
                    type: u
                  }), i();
                }, u && this.isGPU && (qD(u) ? u = "".concat(u, "-gpu") : console.warn("The '".concat(u, "' layout does not support GPU calculation for now, it will run in CPU."))), xa.isForce(u) ? (f = t.onTick, l = t.animate, c = l === void 0 && (u === "force" || u === "force2"), p = function() {
                  f && f(), (l || c) && s.refreshPositions();
                }, t.tick = p) : (u === "comboForce" || u === "comboCombined") && (t.comboTrees = s.get("comboTrees")), h = !1;
                try {
                  d = new Qt.Layouts[u](t), this.layoutMethods[n] && this.layoutMethods[n].destroy(), this.layoutMethods[n] = d;
                } catch {
                  console.warn("The layout method: '".concat(u, "' does not exist! Please specify it first.")), o();
                }
                return h = d.enableTick, h && (v = t.onTick, p = function() {
                  v && v(), s.refreshPositions();
                }, d.tick = p), g = this.filterLayoutData(this.data, t), Ise(g, n), d.init(g), s.emit("beforesublayout", {
                  type: u
                }), [4, d.execute()];
              case 1:
                return y.sent(), d.isCustomLayout && t.onLayoutEnd && t.onLayoutEnd(), [
                  2
                  /*return*/
                ];
            }
          });
        });
      });
    }, e.prototype.updateLayoutMethod = function(t, n) {
      var a = this;
      return new Promise(function(i, o) {
        return zn(a, void 0, void 0, function() {
          var s, u, f, l, c, h, d;
          return Un(this, function(v) {
            switch (v.label) {
              case 0:
                return s = this.graph, u = n == null ? void 0 : n.type, n.onLayoutEnd = function() {
                  s.emit("aftersublayout", {
                    type: u
                  }), i();
                }, xa.isForce(u) && (f = n.onTick, l = n.animate, c = l === void 0 && (u === "force" || u === "force2"), h = function() {
                  f == null || f(), (l || c) && s.refreshPositions();
                }, n.tick = h), d = this.filterLayoutData(this.data, n), t.init(d), t.updateCfg(n), s.emit("beforesublayout", {
                  type: u
                }), [4, t.execute()];
              case 1:
                return v.sent(), t.isCustomLayout && n.onLayoutEnd && n.onLayoutEnd(), [
                  2
                  /*return*/
                ];
            }
          });
        });
      });
    }, e.prototype.layout = function(t) {
      var n = this, a, i = this.graph;
      if (!(!i || i.get("destroyed"))) {
        this.data = this.setDataFromGraph();
        var o = this.data, s = o.nodes, u = o.hiddenNodes;
        if (!s)
          return !1;
        var f = i.get("width"), l = i.get("height"), c = {};
        Object.assign(c, {
          width: f,
          height: l,
          center: [f / 2, l / 2]
        }, this.layoutCfg), this.layoutCfg = c;
        var h = c.type, d = !1;
        (a = this.layoutMethods) === null || a === void 0 || a.forEach(function(x) {
          var w;
          return d = !!(!((w = x.nodes) === null || w === void 0) && w.length) || d;
        });
        var v = this.destoryLayoutMethods();
        i.emit("beforelayout");
        var p = Promise.resolve();
        d && h && (v == null ? void 0 : v.length) === 1 && v[0] === h ? this.tweakInit() : p = this.initPositions(c.center, s);
        var g = this.initPositions(c.center, u);
        g.then(), this.isGPU = k2(c, h);
        var y = c.onLayoutEnd, m = c.layoutEndFormatted, b = c.adjust;
        if (m || (c.layoutEndFormatted = !0, c.onAllLayoutEnd = function() {
          return zn(n, void 0, void 0, function() {
            return Un(this, function(x) {
              switch (x.label) {
                case 0:
                  return y && y(s), this.refreshLayout(), b && c.pipes ? [4, this.adjustPipesBox(this.data, b)] : [3, 2];
                case 1:
                  x.sent(), this.refreshLayout(), x.label = 2;
                case 2:
                  return i.emit("afterlayout"), [
                    2
                    /*return*/
                  ];
              }
            });
          });
        }), this.stopWorker(), c.workerEnabled && this.layoutWithWorker(this.data, t))
          return !0;
        var E = !1;
        return c.type ? (E = !0, p = p.then(function() {
          return zn(n, void 0, void 0, function() {
            return Un(this, function(x) {
              switch (x.label) {
                case 0:
                  return [4, this.execLayoutMethod(c, 0)];
                case 1:
                  return [2, x.sent()];
              }
            });
          });
        })) : c.pipes && (E = !0, c.pipes.forEach(function(x, w) {
          p = p.then(function() {
            return zn(n, void 0, void 0, function() {
              return Un(this, function(_) {
                switch (_.label) {
                  case 0:
                    return [4, this.execLayoutMethod(x, w)];
                  case 1:
                    return [2, _.sent()];
                }
              });
            });
          });
        })), E ? p.then(function() {
          c.onAllLayoutEnd && c.onAllLayoutEnd(), t && t();
        }).catch(function(x) {
          console.warn("graph layout failed,", x);
        }) : (i.refreshPositions(), t == null || t()), !1;
      }
    }, e.prototype.tweakInit = function() {
      var t = this, n = t.data, a = t.graph, i = n.nodes, o = n.edges;
      if (i != null && i.length) {
        var s = {};
        i.forEach(function(l) {
          var c = l.x, h = l.y;
          !isNaN(c) && !isNaN(h) && (s[l.id] = {
            x: c,
            y: h
          }, l.mass = l.mass || 2);
        }), o.forEach(function(l) {
          var c = l.source, h = l.target, d = s[c], v = s[h];
          !d && v ? s[c] = {
            x: v.x + (Math.random() - 0.5) * 80,
            y: v.y + (Math.random() - 0.5) * 80
          } : !v && d && (s[h] = {
            x: d.x + (Math.random() - 0.5) * 80,
            y: d.y + (Math.random() - 0.5) * 80
          });
        });
        var u = a.get("width"), f = a.get("height");
        i.forEach(function(l) {
          var c = s[l.id] || {
            x: u / 2 + (Math.random() - 0.5) * 20,
            y: f / 2 + (Math.random() - 0.5) * 20
          };
          l.x = c.x, l.y = c.y;
        });
      }
    }, e.prototype.initWithPreset = function(t, n) {
      var a = this;
      return new Promise(function(i, o) {
        return zn(a, void 0, void 0, function() {
          var s, u, f, l, c, h, d;
          return Un(this, function(v) {
            switch (v.label) {
              case 0:
                return s = this, u = s.layoutCfg, f = s.data, l = u.preset, !(l != null && l.type) || !Qt.Layouts[l == null ? void 0 : l.type] ? (n == null || n(), i(), [2, !1]) : (c = k2(l, l.type), h = c ? "".concat(l.type, "-gpu") : l.type, d = new Qt.Layouts[h](l), delete u.preset, d.init(f), [4, d.execute()]);
              case 1:
                return v.sent(), t == null || t(), i(), [2, !0];
            }
          });
        });
      });
    }, e.prototype.layoutWithWorker = function(t, n) {
      var a = this, i = this, o = i.layoutCfg, s = i.graph, u = this.getWorker(), f = this.workerData;
      if (!u)
        return !1;
      f.requestId = null, f.requestId2 = null, f.currentTick = null, f.currentTickData = null, s.emit("beforelayout");
      var l = Promise.resolve(), c = !1;
      if (o.type)
        c = !0, l = l.then(function() {
          return a.runWebworker(u, t, o);
        });
      else if (o.pipes) {
        c = !0;
        for (var h = function(y) {
          l = l.then(function() {
            return a.runWebworker(u, t, y);
          });
        }, d = 0, v = o.pipes; d < v.length; d++) {
          var p = v[d];
          h(p);
        }
      }
      return c && l.then(function() {
        o.onAllLayoutEnd && o.onAllLayoutEnd(), n == null || n();
      }).catch(function(g) {
        console.error("layout failed", g);
      }), !0;
    }, e.prototype.runWebworker = function(t, n, a) {
      var i = this, o = this.isGPU, s = this.filterLayoutData(n, a), u = s.nodes, f = s.edges, l = document.createElement("canvas"), c = o && typeof window < "u" && // eslint-disable-next-line @typescript-eslint/dot-notation
      window.navigator && !navigator.gpu && // WebGPU 还不支持 OffscreenCanvas
      "OffscreenCanvas" in window && "transferControlToOffscreen" in l, h = Cse(a, function(v) {
        return typeof v != "function";
      });
      if (!c)
        t.postMessage({
          type: Ds.RUN,
          nodes: u,
          edges: f,
          layoutCfg: h
        });
      else {
        var d = l.transferControlToOffscreen();
        h.type = "".concat(h.type, "-gpu"), t.postMessage({
          type: Ds.GPURUN,
          nodes: u,
          edges: f,
          layoutCfg: h,
          canvas: d
        }, [d]);
      }
      return new Promise(function(v, p) {
        t.onmessage = function(g) {
          i.handleWorkerMessage(v, p, g, s, a);
        };
      });
    }, e.prototype.handleWorkerMessage = function(t, n, a, i, o) {
      var s = this, u = s.graph, f = s.workerData, l = a.data, c = l.type, h = function() {
        o.onTick && o.onTick();
      };
      switch (c) {
        case Ds.TICK:
          f.currentTick = l.currentTick, f.currentTickData = l, f.requestId || (f.requestId = Fc.requestAnimationFrame(function() {
            d0(i, l), u.refreshPositions(), h(), l.currentTick === l.totalTicks ? t() : f.currentTick === l.totalTicks && (f.requestId2 = Fc.requestAnimationFrame(function() {
              d0(i, f.currentTickData), u.refreshPositions(), f.requestId2 = null, h(), t();
            })), f.requestId = null;
          }));
          break;
        case Ds.END:
          f.currentTick == null && (d0(i, l), t());
          break;
        case Ds.GPUEND:
          f.currentTick == null && (Tse(i, l), t());
          break;
        case Ds.ERROR:
          console.warn("Web-Worker layout error!", l.message), n();
          break;
        default:
          n();
          break;
      }
    }, e.prototype.updateLayoutCfg = function(t) {
      var n = this, a = this, i = a.graph, o = a.layoutMethods;
      if (!(!i || i.get("destroyed"))) {
        var s = t.disableTriggerLayout, u = tn(t, ["disableTriggerLayout"]), f = _t({}, this.layoutCfg, u);
        if (this.layoutCfg = f, !s) {
          if (!(o != null && o.length)) {
            this.layout();
            return;
          }
          if (this.data = this.setDataFromGraph(), this.stopWorker(), !(u.workerEnabled && this.layoutWithWorker(this.data, null))) {
            i.emit("beforelayout");
            var l = Promise.resolve(), c = !1;
            (o == null ? void 0 : o.length) === 1 ? (c = !0, l = l.then(function() {
              return zn(n, void 0, void 0, function() {
                return Un(this, function(h) {
                  switch (h.label) {
                    case 0:
                      return [4, this.updateLayoutMethod(o[0], f)];
                    case 1:
                      return [2, h.sent()];
                  }
                });
              });
            })) : o != null && o.length && (c = !0, o.forEach(function(h, d) {
              var v = f.pipes[d];
              l = l.then(function() {
                return zn(n, void 0, void 0, function() {
                  return Un(this, function(p) {
                    switch (p.label) {
                      case 0:
                        return [4, this.updateLayoutMethod(h, v)];
                      case 1:
                        return [2, p.sent()];
                    }
                  });
                });
              });
            })), c && l.then(function() {
              f.onAllLayoutEnd && f.onAllLayoutEnd();
            }).catch(function(h) {
              console.warn("layout failed", h);
            });
          }
        }
      }
    }, e.prototype.adjustPipesBox = function(t, n) {
      var a = this;
      return new Promise(function(i) {
        var o = t.nodes;
        o != null && o.length || i(), Sse.includes(n) || (console.warn("The adjust type ".concat(n, " is not supported yet, please assign it with 'force', 'grid', or 'circular'.")), i());
        var s = {
          center: a.layoutCfg.center,
          nodeSize: function(v) {
            return Math.max(v.height, v.width);
          },
          preventOverlap: !0,
          onLayoutEnd: function() {
          }
        }, u = a.getLayoutBBox(o), f = u.groupNodes, l = u.layoutNodes, c = nr(l);
        s.onLayoutEnd = function() {
          l == null || l.forEach(function(d, v) {
            var p, g, y, m = d.x - ((p = c[v]) === null || p === void 0 ? void 0 : p.x), b = d.y - ((g = c[v]) === null || g === void 0 ? void 0 : g.y);
            (y = f[v]) === null || y === void 0 || y.forEach(function(E) {
              E.x += m, E.y += b;
            });
          }), i();
        };
        var h = new Qt.Layouts[n](s);
        h.layout({
          nodes: l
        });
      });
    }, e.prototype.destroy = function() {
      this.destoryLayoutMethods();
      var t = this.worker;
      t && (t.terminate(), this.worker = null), this.destroyed = !0, this.graph.set("layout", void 0), this.layoutCfg = void 0, this.layoutType = void 0, this.layoutMethods = void 0, this.graph = null;
    }, e;
  }(jC)
);
function d0(r, e) {
  for (var t = r.nodes, n = e.nodes, a = t.length, i = 0; i < a; i++) {
    var o = t[i];
    o.x = n[i].x, o.y = n[i].y;
  }
}
function Cse(r, e) {
  var t = {};
  return r && jg(r) === "object" ? (Object.keys(r).forEach(function(n) {
    r.hasOwnProperty(n) && e(r[n]) && (t[n] = r[n]);
  }), t) : r;
}
function Tse(r, e) {
  for (var t = r.nodes, n = e.vertexEdgeData, a = t.length, i = 0; i < a; i++) {
    var o = t[i], s = n[4 * i], u = n[4 * i + 1];
    o.x = s, o.y = u;
  }
}
function Ise(r, e) {
  var t;
  if (!((t = r == null ? void 0 : r.nodes) === null || t === void 0) && t.length) {
    var n = r.nodes;
    n.forEach(function(a) {
      a.layoutOrder = e;
    });
  }
}
function qD(r) {
  return Mse.includes(r);
}
function k2(r, e) {
  var t = e;
  e && e.split("-")[1] === "gpu" && (t = e.split("-")[0], r.gpuEnabled = !0);
  var n = !1;
  return r.gpuEnabled && (n = !0, HD().webgl || (console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."), n = !1)), n && !qD(t) && (console.warn("The '".concat(t, "' layout does not support GPU calculation for now, it will run in CPU.")), n = !1), n;
}
var Ose = function(e) {
  var t = e.clone();
  return Dse(e, t), t;
}, Dse = function r(e, t) {
  var n;
  e.isGroup() && t.isGroup() && ((n = e.get("children")) === null || n === void 0 || n.forEach(function(s, u) {
    var f = t.get("children")[u];
    r(s, f);
  }));
  var a = e.get("type"), i = t.get("type");
  if (!(a !== "image" || i !== "image")) {
    var o = e.get("clipShape");
    o && t.setClip({
      type: o.get("type"),
      attrs: o.attr()
    });
  }
}, R2 = io, Lse = "svg", ZD = (
  /** @class */
  function(r) {
    Ut(e, r);
    function e(t) {
      var n = r.call(this, t) || this, a = n.get("defaultNode");
      return a || n.set("defaultNode", {
        type: "circle"
      }), a.type || (a.type = "circle", n.set("defaultNode", a)), n.destroyed = !1, n;
    }
    return e.prototype.initLayoutController = function() {
      var t = new Ase(this);
      this.set({
        layoutController: t
      });
    }, e.prototype.initEventController = function() {
      var t = new h9(this);
      this.set({
        eventController: t
      });
    }, e.prototype.initCanvas = function() {
      var t = this.get("container");
      if (typeof t == "string" && (t = document.getElementById(t), this.set("container", t)), !t)
        throw new Error("invalid container");
      var n = t.clientWidth, a = t.clientHeight, i = this.get("width") || n, o = this.get("height") || a;
      !this.get("width") && !this.get("height") && (this.set("width", n), this.set("height", a));
      var s = this.get("renderer"), u;
      if (s === Lse)
        u = new Ap({
          container: t,
          width: i,
          height: o
        });
      else {
        var f = {
          container: t,
          width: i,
          height: o
        }, l = this.get("pixelRatio");
        l && (f.pixelRatio = l, window.devicePixelRatio = l), u = new $u(f);
      }
      this.set("canvas", u);
    }, e.prototype.initPlugins = function() {
      var t = this;
      Se(t.get("plugins"), function(n) {
        !n.destroyed && n.initPlugin && n.initPlugin(t);
      });
    }, e.prototype.downloadImageWatermark = function(t, n, a, i) {
      return zn(this, void 0, void 0, function() {
        var o, s, u;
        return Un(this, function(f) {
          switch (f.label) {
            case 0:
              return o = t.style.backgroundImage, s = o.slice(5, o.length - 2), u = new Image(), u.src = s, [4, new Promise(function(l) {
                u.onload = function() {
                  var c = n.createPattern(u, "repeat");
                  n.rect(0, 0, a, i), n.fillStyle = c, n.fill(), l("");
                };
              })];
            case 1:
              return f.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.asyncToDataUrl = function(t, n, a, i, o, s) {
      var u = this, f = document.querySelector(".g6-graph-watermarker"), l = this.get("canvas"), c = l.getRenderer(), h = s || l.get("el"), d = "";
      t || (t = "image/png"), setTimeout(function() {
        return zn(u, void 0, void 0, function() {
          var v, p, g, y, m, b, E, x, w, _;
          return Un(this, function(M) {
            switch (M.label) {
              case 0:
                return c !== "svg" ? [3, 1] : (v = h.cloneNode(!0), p = document.implementation.createDocumentType("svg", "-//W3C//DTD SVG 1.1//EN", "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"), g = document.implementation.createDocument("http://www.w3.org/2000/svg", "svg", p), g.replaceChild(v, g.documentElement), y = new XMLSerializer().serializeToString(g), d = "data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(y)), [3, 4]);
              case 1:
                return m = void 0, b = h.getContext("2d"), E = i || this.get("width"), x = o || this.get("height"), w = void 0, f ? [4, this.downloadImageWatermark(f, b, E, x)] : [3, 3];
              case 2:
                M.sent(), M.label = 3;
              case 3:
                if (n) {
                  _ = typeof window < "u" ? window.devicePixelRatio : 1;
                  try {
                    m = b.getImageData(0, 0, E * _, x * _), w = b.globalCompositeOperation, b.globalCompositeOperation = "destination-over", b.fillStyle = n, b.fillRect(0, 0, E, x);
                  } catch {
                    console.error("Download image failed. Out of memory at ImageData creation");
                  }
                }
                d = h.toDataURL(t), n && (b.clearRect(0, 0, E, x), b.putImageData(m, 0, 0), b.globalCompositeOperation = w), M.label = 4;
              case 4:
                return a && a(d), [
                  2
                  /*return*/
                ];
            }
          });
        });
      }, 16);
    }, e.prototype.toDataURL = function(t, n) {
      var a = this.get("canvas"), i = a.getRenderer(), o = a.get("el");
      t || (t = "image/png");
      var s = "";
      if (i === "svg") {
        var u = o.cloneNode(!0), f = document.implementation.createDocumentType("svg", "-//W3C//DTD SVG 1.1//EN", "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"), l = document.implementation.createDocument("http://www.w3.org/2000/svg", "svg", f);
        l.replaceChild(u, l.documentElement);
        var c = new XMLSerializer().serializeToString(l);
        s = "data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(c));
      } else {
        var h = void 0, d = o.getContext("2d"), v = Math.max(this.get("width"), 500), p = Math.max(this.get("height"), 500), g = void 0;
        if (n) {
          var y = typeof window < "u" && window.devicePixelRatio || 1;
          try {
            h = d.getImageData(0, 0, v * y, p * y), g = d.globalCompositeOperation, d.globalCompositeOperation = "destination-over", d.fillStyle = n, d.fillRect(0, 0, v, p);
          } catch {
            console.error("Download image failed. Out of memory at ImageData creation");
          }
        }
        s = o.toDataURL(t), n && (d.clearRect(0, 0, v, p), d.putImageData(h, 0, 0), d.globalCompositeOperation = g);
      }
      return s;
    }, e.prototype.toFullDataURL = function(t, n, a) {
      var i = this.get("group").getCanvasBBox(), o = i.height, s = i.width, u = this.get("renderer"), f = cg('<div id="virtual-image"></div>'), l = a ? a.backgroundColor : void 0, c = a ? a.padding : void 0;
      c ? Pt(c) && (c = [c, c, c, c]) : c = [0, 0, 0, 0];
      var h = o + c[0] + c[2], d = s + c[1] + c[3], v = {
        container: f,
        height: h,
        width: d,
        quickHit: !0
      }, p = u === "svg" ? new Ap(v) : new $u(v), g = this.get("group"), y = g.clone(), m = nr(y.getMatrix());
      m || (m = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
      var b = (i.maxX + i.minX) / 2, E = (i.maxY + i.minY) / 2;
      m = R2(m, [["t", -b, -E], ["t", s / 2 + c[3], o / 2 + c[0]]]), y.resetMatrix(), y.setMatrix(m), p.add(y);
      var x = p.get("el"), w = "";
      n || (n = "image/png"), setTimeout(function() {
        if (u === "svg") {
          var _ = x.cloneNode(!0), M = document.implementation.createDocumentType("svg", "-//W3C//DTD SVG 1.1//EN", "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"), A = document.implementation.createDocument("http://www.w3.org/2000/svg", "svg", M);
          A.replaceChild(_, A.documentElement);
          var S = new XMLSerializer().serializeToString(A);
          w = "data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(S));
        } else {
          var T = void 0, C = x.getContext("2d"), O = void 0;
          if (l) {
            var L = typeof window < "u" ? window.devicePixelRatio : 1;
            try {
              T = C.getImageData(0, 0, d * L, h * L), O = C.globalCompositeOperation, C.globalCompositeOperation = "destination-over", C.fillStyle = l, C.fillRect(0, 0, d, h);
            } catch {
              console.error("Download image failed. Out of memory at ImageData creation");
            }
          }
          w = x.toDataURL(n), l && (C.clearRect(0, 0, d, h), C.putImageData(T, 0, 0), C.globalCompositeOperation = O);
        }
        t && t(w);
      }, 16);
    }, e.prototype.downloadFullImage = function(t, n, a) {
      var i = this, o = this.get("group").getCanvasBBox(), s = o.height, u = o.width, f = this.get("renderer"), l = cg('<div id="virtual-image"></div>'), c = document.querySelector(".g6-graph-watermarker"), h = a ? a.backgroundColor : void 0, d = a ? a.padding : void 0;
      d ? Pt(d) && (d = [d, d, d, d]) : d = [0, 0, 0, 0];
      var v = s + d[0] + d[2], p = u + d[1] + d[3];
      if (c) {
        var g = this.get("graphWaterMarker").cfg || {}, y = g.width, m = g.height;
        v = Math.ceil(v / m) * m, p = Math.ceil(p / y) * y;
      }
      var b = {
        container: l,
        height: v,
        width: p
      }, E = f === "svg" ? new Ap(b) : new $u(b), x = this.get("group"), w = Ose(x), _ = nr(w.getMatrix());
      _ || (_ = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
      var M = (o.maxX + o.minX) / 2, A = (o.maxY + o.minY) / 2;
      _ = R2(_, [["t", -M, -A], ["t", u / 2 + d[3], s / 2 + d[0]]]), w.resetMatrix(), w.setMatrix(_), E.add(w);
      var S = E.get("el");
      n || (n = "image/png"), this.asyncToDataUrl(n, h, function(T) {
        var C = document.createElement("a"), O = (t || "graph") + (f === "svg" ? ".svg" : ".".concat(n.split("/")[1]));
        i.dataURLToImage(T, f, C, O);
        var L = document.createEvent("MouseEvents");
        L.initEvent("click", !1, !1), C.dispatchEvent(L);
      }, p, v, S);
    }, e.prototype.downloadImage = function(t, n, a) {
      var i = this, o = this;
      o.stopAnimate();
      var s = o.get("canvas"), u = s.getRenderer();
      n || (n = "image/png");
      var f = (t || "graph") + (u === "svg" ? ".svg" : n.split("/")[1]), l = document.createElement("a");
      o.asyncToDataUrl(n, a, function(c) {
        i.dataURLToImage(c, u, l, f);
        var h = document.createEvent("MouseEvents");
        h.initEvent("click", !1, !1), l.dispatchEvent(h);
      });
    }, e.prototype.dataURLToImage = function(t, n, a, i) {
      if (!t || t === "data:") {
        console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");
        return;
      }
      if (typeof window < "u")
        if (window.Blob && window.URL && n !== "svg") {
          var o = t.split(","), s = "";
          if (o && o.length > 0) {
            var u = o[0].match(/:(.*?);/);
            u && u.length >= 2 && (s = u[1]);
          }
          for (var f = atob(o[1]), l = f.length, c = new Uint8Array(l); l--; )
            c[l] = f.charCodeAt(l);
          var h = new Blob([c], {
            type: s
          });
          window.navigator.msSaveBlob ? window.navigator.msSaveBlob(h, i) : a.addEventListener("click", function() {
            a.download = i, a.href = window.URL.createObjectURL(h);
          });
        } else
          a.addEventListener("click", function() {
            a.download = i, a.href = t;
          });
    }, e.prototype.addPlugin = function(t) {
      var n = this;
      t.destroyed || (n.get("plugins").push(t), t.initPlugin(n));
    }, e.prototype.removePlugin = function(t) {
      var n = this.get("plugins"), a = n.indexOf(t);
      a >= 0 && (t.destroyPlugin(), n.splice(a, 1));
    }, e.prototype.setImageWaterMarker = function(t, n) {
      t === void 0 && (t = mf.waterMarkerImage);
      var a = this.get("container");
      He(a) && (a = document.getElementById(a)), a.style.position || (a.style.position = "relative");
      var i = this.get("graphWaterMarker"), o = Mr({}, mf.imageWaterMarkerConfig, n), s = o.width, u = o.height, f = o.compatible, l = o.image;
      if (!t) {
        var c = f ? a : document.querySelector(".g6-graph-watermarker");
        c && (c.style.cssText = void 0), i && i.clear();
        return;
      }
      if (i)
        i.clear();
      else {
        var h = {
          container: a,
          width: s,
          height: u,
          capture: !1
        }, d = this.get("pixelRatio");
        d && (h.pixelRatio = d, window.devicePixelRatio = d), i = new $u(h), this.set("graphWaterMarker", i);
      }
      i.get("el").style.display = "none";
      var v = i.get("context"), p = l.rotate, g = l.x, y = l.y;
      v.rotate(-p * Math.PI / 180);
      var m = new Image();
      m.crossOrigin = "anonymous", m.src = t, m.onload = function() {
        if (v.drawImage(m, g, y, l.width, l.height), v.rotate(p * Math.PI / 180), f)
          a.style.cssText = "background-image: url(".concat(i.get("el").toDataURL("image/png"), ");background-repeat:repeat;");
        else {
          var b = document.querySelector(".g6-graph-watermarker");
          b || (b = document.createElement("div"), b.className = "g6-graph-watermarker"), b.className = "g6-graph-watermarker", i.destroyed || (b.style.cssText = "background-image: url(".concat(i.get("el").toDataURL("image/png"), ");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"), a.appendChild(b));
        }
      };
    }, e.prototype.setTextWaterMarker = function(t, n) {
      var a = this.get("container");
      He(a) && (a = document.getElementById(a)), a.style.position || (a.style.position = "relative");
      var i = this.get("graphWaterMarker"), o = Mr({}, mf.textWaterMarkerConfig, n), s = o.width, u = o.height, f = o.compatible, l = o.text;
      if (!(t != null && t.length)) {
        var c = f ? a : document.querySelector(".g6-graph-watermarker");
        c && (c.style.cssText = void 0), i && i.clear();
        return;
      }
      if (i)
        i.clear();
      else {
        var h = {
          container: a,
          width: s,
          height: u,
          capture: !1
        }, d = this.get("pixelRatio");
        d && (h.pixelRatio = d, window.devicePixelRatio = d), i = new $u(h), this.set("graphWaterMarker", i);
      }
      i.get("el").style.display = "none";
      var v = i.get("context"), p = l.rotate, g = l.fill, y = l.fontFamily, m = l.fontSize, b = l.baseline, E = l.x, x = l.y, w = l.lineHeight;
      v.rotate(-p * Math.PI / 180), v.font = "".concat(m, "px ").concat(y), v.fillStyle = g, v.textBaseline = b;
      for (var _ = He(t) ? [t] : t, M = _.length - 1; M >= 0; M--)
        v.fillText(_[M], E, x + M * w);
      if (v.rotate(p * Math.PI / 180), f)
        a.style.cssText = "background-image: url(".concat(i.get("el").toDataURL("image/png"), ");background-repeat:repeat;");
      else {
        var A = document.querySelector(".g6-graph-watermarker");
        A || (A = document.createElement("div"), A.className = "g6-graph-watermarker"), A.style.cssText = "background-image: url(".concat(i.get("el").toDataURL("image/png"), ");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"), a.appendChild(A);
      }
    }, e.prototype.destroy = function() {
      var t, n, a, i;
      Se(this.get("plugins"), function(l) {
        l.destroyPlugin();
      });
      var o = this.get("tooltips");
      if (o)
        for (var s = 0; s < o.length; s++) {
          var u = o[s];
          if (u) {
            var f = u.parentElement;
            f && f.removeChild(u);
          }
        }
      (t = this.get("eventController")) === null || t === void 0 || t.destroy(), (n = this.get("layoutController")) === null || n === void 0 || n.destroy(), (a = this.get("graphWaterMarker")) === null || a === void 0 || a.destroy(), (i = document.querySelector(".g6-graph-watermarker")) === null || i === void 0 || i.remove(), r.prototype.destroy.call(this);
    }, e;
  }(zC)
), Nse = co.radialLayout, v0 = co.traverseTree;
(function(r) {
  Ut(e, r);
  function e(t) {
    var n = r.call(this, t) || this;
    return n.layoutAnimating = !1, n.set("removeList", []), n.set("layoutMethod", n.getLayout()), n;
  }
  return e.prototype.getLayout = function() {
    var t = this.get("layout");
    return t ? typeof t == "function" ? t : (t.type || (t.type = "dendrogram"), t.direction || (t.direction = t.type === "indented" ? "LR" : "TB"), t.radial ? function(n) {
      var a = D2[t.type](n, t);
      return Nse(a), a;
    } : function(n) {
      return D2[t.type](n, t);
    }) : null;
  }, e.indexOfChild = function(t, n) {
    var a = -1;
    return Se(t, function(i, o) {
      if (n === i.id)
        return a = o, !1;
    }), a;
  }, e.prototype.getDefaultCfg = function() {
    var t = r.prototype.getDefaultCfg.call(this);
    return t.animate = !0, t;
  }, e.prototype.innerAddChild = function(t, n, a) {
    var i = this, o = t.data;
    o && (o.x = t.x, o.y = t.y, o.depth = t.depth);
    var s = i.addItem("node", o, !1);
    if (n) {
      if (s.set("parent", n), a) {
        var u = n.get("originAttrs");
        if (u)
          s.set("originAttrs", u);
        else {
          var f = n.getModel();
          s.set("originAttrs", {
            x: f.x,
            y: f.y
          });
        }
      }
      var l = n.get("children");
      l ? l.push(s) : n.set("children", [s]), i.addItem("edge", {
        source: n.get("id"),
        target: s.get("id"),
        id: "".concat(n.get("id"), ":").concat(s.get("id"))
      }, !1);
    }
    return Se(t.children || [], function(c) {
      i.innerAddChild(c, s, a);
    }), i.emit("afteraddchild", {
      item: s,
      parent: n
    }), s;
  }, e.prototype.innerUpdateChild = function(t, n, a) {
    var i = this, o = i.findById(t.id);
    if (!o) {
      i.innerAddChild(t, n, a);
      return;
    }
    Se(t.children || [], function(v) {
      i.innerUpdateChild(v, o, a);
    });
    var s = o.get("children");
    if (s) {
      var u = s.length;
      if (u > 0)
        for (var f = s.length - 1; f >= 0; f--) {
          var l = s[f].getModel();
          e.indexOfChild(t.children || [], l.id) === -1 && (i.innerRemoveChild(l.id, {
            x: t.x,
            y: t.y
          }, a), s.splice(f, 1));
        }
    }
    var c, h;
    o.get("originAttrs") && (c = o.get("originAttrs").x, h = o.get("originAttrs").y);
    var d = o.getModel();
    a && o.set("originAttrs", {
      x: d.x,
      y: d.y
    }), o.set("model", Object.assign(d, t.data)), (c !== t.x || h !== t.y) && o.updatePosition({
      x: t.x,
      y: t.y
    });
  }, e.prototype.innerRemoveChild = function(t, n, a) {
    var i = this, o = i.findById(t);
    if (o)
      if (Se(o.get("children"), function(u) {
        i.innerRemoveChild(u.getModel().id, n, a);
      }), a) {
        var s = o.getModel();
        o.set("to", n), o.set("originAttrs", {
          x: s.x,
          y: s.y
        }), i.get("removeList").push(o);
      } else
        i.removeItem(o, !1);
  }, e.prototype.changeData = function(t, n) {
    n === void 0 && (n = !0);
    var a = this;
    this.getNodes().map(function(i) {
      return a.clearItemStates(i);
    }), this.getEdges().map(function(i) {
      return a.clearItemStates(i);
    }), n && this.get("enabledStack") && this.pushStack("changedata", {
      before: a.get("originData"),
      after: t || a.get("data")
    }), t ? (a.data(t), a.render(!1)) : a.layout(this.get("fitView"));
  }, e.prototype.changeLayout = function(t) {
    console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");
    var n = this;
    n.updateLayout(t);
  }, e.prototype.updateLayout = function(t, n, a, i) {
    i === void 0 && (i = !0);
    var o = this;
    if (!t) {
      console.warn("layout cannot be null");
      return;
    }
    if (i && this.get("enabledStack") && this.pushStack("layout", {
      before: o.get("layout"),
      after: t
    }), o.set("layout", t), o.set("layoutMethod", o.getLayout()), o.layout(), n) {
      var s = a;
      s || (n === "begin" ? s = {
        x: 0,
        y: 0
      } : s = {
        x: this.getWidth() / 2,
        y: this.getHeight() / 2
      }), s = this.getPointByCanvas(s.x, s.y);
      var u = this.getGroup().getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];
      s.x = s.x * u[0] + u[6], s.y = s.y * u[0] + u[7];
      var f = this.getGroup().getCanvasBBox(), l = f.minX, c = f.maxX, h = f.minY, d = f.maxY, v = {
        x: (l + c) / 2,
        y: (h + d) / 2
      };
      n === "begin" && (v.x = l, v.y = h), this.translate(s.x - v.x, s.y - v.y);
    }
  }, e.prototype.refreshLayout = function(t) {
    console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");
    var n = this;
    n.layout(t);
  }, e.prototype.layout = function(t) {
    var n = this, a = this, i = a.get("data"), o = a.get("layoutMethod"), s = a.get("layout"), u = i;
    if (s != null && s.excludeInvisibles) {
      i = nr(a.get("data"));
      var f = {};
      v0(i, function(h) {
        var d = h.children;
        if (!(d != null && d.length))
          return !0;
        for (var v = d.length - 1; v >= 0; v--) {
          var p = n.findById(d[v].id), g = p ? !p.isVisible() : d[v].visible === !1;
          g && (f[h.id] = f[h.id] || [], f[h.id].push({
            idx: v,
            child: d.splice(v, 1)[0]
          }));
        }
      }), u = o ? o(i, a.get("layout")) : i, v0(u, function(h) {
        var d = f[h.id];
        if (d != null && d.length)
          for (var v = d.length - 1; v >= 0; v--) {
            var p = d[v], g = p.idx, y = p.child;
            h.children.splice(g, 0, y);
          }
      });
    } else
      u = o ? o(i, a.get("layout")) : i;
    var l = a.get("animate");
    if (a.emit("beforerefreshlayout", {
      data: i,
      layoutData: u
    }), a.emit("beforelayout"), a.innerUpdateChild(u, void 0, l), t) {
      var c = a.get("viewController");
      c.fitView();
    }
    l ? a.layoutAnimate(u) : (a.refresh(), a.paint()), a.emit("afterrefreshlayout", {
      data: i,
      layoutData: u
    }), a.emit("afterlayout");
  }, e.prototype.addChild = function(t, n, a) {
    a === void 0 && (a = !0);
    var i = this;
    i.emit("beforeaddchild", {
      model: t,
      parent: n
    }), He(n) || (n = n.get("id"));
    var o = i.findDataById(n);
    if (o) {
      o.children || (o.children = []), o.children.push(t);
      var s = i.findById(n);
      s.refresh(), i.changeData(void 0, a);
    }
  }, e.prototype.updateChildren = function(t, n, a) {
    a === void 0 && (a = !0);
    var i = this, o = i.findById(n);
    if (!n || !o) {
      console.warn("Update children failed! There is no node with id '".concat(n, "'"));
      return;
    }
    var s = i.findDataById(n);
    s.children = t, o.refresh(), i.changeData(void 0, a);
  }, e.prototype.updateChild = function(t, n, a) {
    a === void 0 && (a = !0);
    var i = this;
    if (!n || !i.findById(n)) {
      i.changeData(t, a);
      return;
    }
    var o = i.findDataById(n), s = i.findById(t.id);
    if (o.children || (o.children = []), !s)
      o.children.push(t);
    else {
      var u = e.indexOfChild(o.children, t.id);
      u > -1 && (o.children[u] = t);
    }
    var f = i.findById(n);
    f == null || f.refresh(), i.changeData(void 0, a);
  }, e.prototype.removeChild = function(t, n) {
    n === void 0 && (n = !0);
    var a = this, i = a.findById(t), o;
    if (i ? o = i == null ? void 0 : i.get("parent") : o = a.getNodes().find(function(c) {
      var h = c.getModel().children || [];
      return !!h.find(function(d) {
        return d.id === t;
      });
    }), o && !o.destroyed) {
      var s = o.get("id"), u = a.findDataById(s), f = u && u.children || [], l = e.indexOfChild(f, t);
      f.splice(l, 1), o.refresh();
    }
    a.changeData(void 0, n);
  }, e.prototype.findDataById = function(t, n) {
    var a = this;
    if (n || (n = a.get("data")), t === n.id)
      return n;
    var i = null;
    return Se(n.children || [], function(o) {
      if (o.id === t)
        return i = o, !1;
      if (i = a.findDataById(t, o), i)
        return !1;
    }), i;
  }, e.prototype.layoutAnimate = function(t, n) {
    var a = this, i = this.get("animateCfg");
    a.emit("beforeanimate", {
      data: t
    }), a.getEdges().forEach(function(o) {
      var s = o.get("model");
      s.sourceAnchor || (s.sourceAnchor = o.get("sourceAnchorIndex"));
    }), this.get("canvas").animate(function(o) {
      v0(t, function(s) {
        var u = a.findById(s.id);
        if (u) {
          var f = u.get("originAttrs"), l = u.get("model");
          if (f || (f = {
            x: l.x,
            y: l.y
          }, u.set("originAttrs", f)), n) {
            var c = n(u, o, f, t);
            u.set("model", Object.assign(l, c));
          } else
            l.x = f.x + (s.x - f.x) * o, l.y = f.y + (s.y - f.y) * o;
        }
        return !0;
      }), Se(a.get("removeList"), function(s) {
        var u = s.getModel(), f = s.get("originAttrs"), l = s.get("to");
        u.x = f.x + (l.x - f.x) * o, u.y = f.y + (l.y - f.y) * o;
      }), a.refreshPositions();
    }, {
      duration: i.duration,
      easing: i.ease,
      callback: function() {
        Se(a.getNodes(), function(s) {
          s.set("originAttrs", null);
        }), Se(a.get("removeList"), function(s) {
          a.removeItem(s, !1);
        }), a.set("removeList", []), i.callback && i.callback(), a.emit("afteranimate", {
          data: t
        });
      },
      delay: i.delay
    });
  }, e.prototype.stopLayoutAnimate = function() {
    this.get("canvas").stopAnimate(), this.emit("layoutanimateend", {
      data: this.get("data")
    }), this.layoutAnimating = !1;
  }, e.prototype.isLayoutAnimating = function() {
    return this.layoutAnimating;
  }, e.prototype.render = function(t) {
    t === void 0 && (t = !0);
    var n = this, a = n.get("data");
    if (!a || !yn(a) || !Object.keys(a).length)
      throw new Error("data must be defined first");
    n.clear(), t && this.get("enabledStack") && this.clearStack(), n.emit("beforerender"), n.layout(this.get("fitView")), n.emit("afterrender");
  }, e.prototype.save = function() {
    return this.get("data");
  }, e.prototype.data = function(t) {
    r.prototype.data.call(this, t), this.set("originData", JSON.parse(JSON.stringify(t)));
  }, e;
})(ZD);
so("circle", {
  // 自定义节点时的配置
  options: {
    size: Qe.defaultNode.size,
    style: {
      x: 0,
      y: 0,
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20
    },
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "circle",
  // 文本位置
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).icon, a = n === void 0 ? {} : n, i = this.getShapeStyle(e), o = Mr({}, a, e.icon), s = "".concat(this.type, "-keyShape"), u = t.addShape("circle", {
      attrs: i,
      className: s,
      name: s,
      draggable: !0
    });
    t.shapeMap[s] = u;
    var f = o.width, l = o.height, c = o.show, h = o.text;
    if (c) {
      var d = "".concat(this.type, "-icon");
      h ? t.shapeMap[d] = t.addShape("text", {
        attrs: B({
          x: 0,
          y: 0,
          fontSize: 12,
          fill: "#000",
          stroke: "#000",
          textBaseline: "middle",
          textAlign: "center"
        }, o),
        className: d,
        name: d,
        draggable: !0
      }) : t.shapeMap[d] = t.addShape("image", {
        attrs: B({
          x: -f / 2,
          y: -l / 2
        }, o),
        className: d,
        name: d,
        draggable: !0
      });
    }
    return this.drawLinkPoints(e, t), u;
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints;
    if (n) {
      var a = n || {}, i = a.top, o = a.left, s = a.right, u = a.bottom, f = a.size, l = a.r, c = tn(a, ["top", "left", "right", "bottom", "size", "r"]), h = this.getSize(e), d = h[0] / 2;
      if (o) {
        var v = "link-point-left";
        t.shapeMap[v] = t.addShape("circle", {
          attrs: B(B({}, c), {
            x: -d,
            y: 0,
            r: f / 2 || l || 5
          }),
          className: v,
          name: v,
          isAnchorPoint: !0
        });
      }
      if (s) {
        var p = "link-point-right";
        t.shapeMap[p] = t.addShape("circle", {
          attrs: B(B({}, c), {
            x: d,
            y: 0,
            r: f / 2 || l || 5
          }),
          className: p,
          name: p,
          isAnchorPoint: !0
        });
      }
      if (i) {
        var g = "link-point-top";
        t.shapeMap[g] = t.addShape("circle", {
          attrs: B(B({}, c), {
            x: 0,
            y: -d,
            r: f / 2 || l || 5
          }),
          className: g,
          name: g,
          isAnchorPoint: !0
        });
      }
      if (u) {
        var y = "link-point-bottom";
        t.shapeMap[y] = t.addShape("circle", {
          attrs: B(B({}, c), {
            x: 0,
            y: d,
            r: f / 2 || l || 5
          }),
          className: y,
          name: y,
          isAnchorPoint: !0
        });
      }
    }
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = Mr({}, t, n), i = this.getSize(e), o = i[0] / 2, s = B({
      x: 0,
      y: 0,
      r: o
    }, a);
    return s;
  },
  update: function(e, t, n) {
    var a = t.getContainer(), i = this.getSize(e), o = B({}, e.style);
    e.style.stroke === void 0 && e.color && (o.stroke = e.color), e.style.r === void 0 && !isNaN(i[0]) && (o.r = i[0] / 2), this.updateShape(e, t, o, !0, n), this.updateLinkPoints(e, a);
  }
}, "single-node");
so("rect", {
  // 自定义节点时的配置
  options: {
    size: [100, 30],
    style: {
      radius: 0,
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20
    },
    // 连接点，默认为左右
    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]
    anchorPoints: [[0, 0.5], [1, 0.5]],
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "rect",
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e), a = t.addShape("rect", {
      attrs: n,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    return t.shapeMap["".concat(this.type, "-keyShape")] = a, this.drawLinkPoints(e, t), a;
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints, a = n === void 0 ? {} : n, i = a.top, o = a.left, s = a.right, u = a.bottom, f = a.size, l = a.r, c = tn(a, ["top", "left", "right", "bottom", "size", "r"]), h = this.getSize(e), d = h[0], v = h[1];
    o && (t.shapeMap["link-point-left"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: -d / 2,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-left",
      name: "link-point-left",
      isAnchorPoint: !0
    })), s && (t.shapeMap["link-point-right"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: d / 2,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-right",
      name: "link-point-right",
      isAnchorPoint: !0
    })), i && (t.shapeMap["link-point-top"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: -v / 2,
        r: f / 2 || l || 5
      }),
      className: "link-point-top",
      name: "link-point-top",
      isAnchorPoint: !0
    })), u && (t.shapeMap["link-point-bottom"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: v / 2,
        r: f / 2 || l || 5
      }),
      className: "link-point-bottom",
      name: "link-point-bottom",
      isAnchorPoint: !0
    }));
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getSize(e), o = a.width || i[0], s = a.height || i[1], u = B({
      x: -o / 2,
      y: -s / 2,
      width: o,
      height: s
    }, a);
    return u;
  },
  update: function(e, t, n) {
    var a = t.getContainer(), i = this.getOptions({}).style, o = this.getSize(e), s = t.get("keyShape");
    e.size || (o[0] = s.attr("width") || i.width, o[1] = s.attr("height") || i.height);
    var u = {
      stroke: e.color,
      x: -o[0] / 2,
      y: -o[1] / 2,
      width: o[0],
      height: o[1]
    }, f = _t({}, i, s.attr(), u);
    f = _t(f, e.style), this.updateShape(e, t, f, !1, n), this.updateLinkPoints(e, a);
  }
}, "single-node");
so("ellipse", {
  // 自定义节点时的配置
  options: {
    size: [80, 40],
    style: {
      x: 0,
      y: 0,
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20
    },
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "ellipse",
  // 文本位置
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).icon, a = n === void 0 ? {} : n, i = this.getShapeStyle(e), o = t.addShape("ellipse", {
      attrs: i,
      className: "ellipse-keyShape",
      name: "ellipse-keyShape",
      draggable: !0
    });
    t.shapeMap["ellipse-keyShape"] = o;
    var s = a.width, u = a.height, f = a.show, l = a.text;
    return f && (l ? t.shapeMap["".concat(this.type, "-icon")] = t.addShape("text", {
      attrs: B({
        x: 0,
        y: 0,
        fontSize: 12,
        fill: "#000",
        stroke: "#000",
        textBaseline: "middle",
        textAlign: "center"
      }, a),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    }) : t.shapeMap["".concat(this.type, "-icon")] = t.addShape("image", {
      attrs: B({
        x: -s / 2,
        y: -u / 2
      }, a),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    })), this.drawLinkPoints(e, t), o;
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints, a = n === void 0 ? {} : n, i = a.top, o = a.left, s = a.right, u = a.bottom, f = a.size, l = a.r, c = tn(a, ["top", "left", "right", "bottom", "size", "r"]), h = this.getSize(e), d = h[0] / 2, v = h[1] / 2;
    o && (t.shapeMap["link-point-left"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: -d,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-left",
      name: "link-point-left",
      isAnchorPoint: !0
    })), s && (t.shapeMap["link-point-right"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: d,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-right",
      name: "link-point-right",
      isAnchorPoint: !0
    })), i && (t.shapeMap["link-point-top"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: -v,
        r: f / 2 || l || 5
      }),
      className: "link-point-top",
      name: "link-point-top",
      isAnchorPoint: !0
    })), u && (t.shapeMap["link-point-bottom"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: v,
        r: f / 2 || l || 5
      }),
      className: "link-point-bottom",
      name: "link-point-bottom",
      isAnchorPoint: !0
    }));
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getSize(e), o = i[0] / 2, s = i[1] / 2, u = B({
      x: 0,
      y: 0,
      rx: o,
      ry: s
    }, a);
    return u;
  },
  update: function(e, t, n) {
    var a = t.getContainer(), i = this.getOptions({}).style, o = this.getSize(e), s = {
      stroke: e.color,
      rx: o[0] / 2,
      ry: o[1] / 2
    }, u = t.get("keyShape"), f = _t({}, i, u.attr(), s);
    f = _t(f, e.style), this.updateShape(e, t, f, !0, n), this.updateLinkPoints(e, a);
  }
}, "single-node");
so("diamond", {
  // 自定义节点时的配置
  options: {
    size: [80, 80],
    style: {
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20
    },
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "diamond",
  // 文本位置
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).icon, a = n === void 0 ? {} : n, i = this.getShapeStyle(e), o = t.addShape("path", {
      attrs: i,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    t.shapeMap["".concat(this.type, "-keyShape")] = o;
    var s = a.width, u = a.height, f = a.show, l = a.text;
    return f && (l ? t.shapeMap["".concat(this.type, "-icon")] = t.addShape("text", {
      attrs: B({
        x: 0,
        y: 0,
        fontSize: 12,
        fill: "#000",
        stroke: "#000",
        textBaseline: "middle",
        textAlign: "center"
      }, a),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    }) : t.shapeMap["".concat(this.type, "-icon")] = t.addShape("image", {
      attrs: B({
        x: -s / 2,
        y: -u / 2
      }, a),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    })), this.drawLinkPoints(e, t), o;
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints, a = n === void 0 ? {} : n, i = a.top, o = a.left, s = a.right, u = a.bottom, f = a.size, l = a.r, c = tn(a, ["top", "left", "right", "bottom", "size", "r"]), h = this.getSize(e), d = h[0], v = h[1];
    o && (t.shapeMap["link-point-left"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: -d / 2,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-left",
      name: "link-point-left",
      isAnchorPoint: !0
    })), s && (t.shapeMap["link-point-right"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: d / 2,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-right",
      name: "link-point-right",
      isAnchorPoint: !0
    })), i && (t.shapeMap["link-point-top"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: -v / 2,
        r: f / 2 || l || 5
      }),
      className: "link-point-top",
      name: "link-point-top",
      isAnchorPoint: !0
    })), u && (t.shapeMap["link-point-bottom"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: v / 2,
        r: f / 2 || l || 5
      }),
      className: "link-point-bottom",
      name: "link-point-bottom",
      isAnchorPoint: !0
    }));
  },
  getPath: function(e) {
    var t = this.getSize(e), n = t[0], a = t[1], i = [
      ["M", 0, -a / 2],
      ["L", n / 2, 0],
      ["L", 0, a / 2],
      ["L", -n / 2, 0],
      ["Z"]
      // 封闭
    ];
    return i;
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getPath(e), o = B({
      path: i
    }, a);
    return o;
  },
  update: function(e, t, n) {
    var a = t.getContainer(), i = this.getOptions({}).style, o = this.getPath(e), s = {
      stroke: e.color,
      path: o
    }, u = t.get("keyShape"), f = _t({}, i, u.attr(), s);
    f = _t(f, e.style), this.updateShape(e, t, f, !0, n), this.updateLinkPoints(e, a);
  }
}, "single-node");
so("triangle", {
  // 自定义节点时的配置
  options: {
    size: 40,
    direction: "up",
    style: {
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize
      },
      offset: 15
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20,
      offset: 6
    },
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "triangle",
  // 文本位置
  labelPosition: "bottom",
  drawShape: function(e, t) {
    var n = this.mergeStyle || this.getOptions(e), a = n.icon, i = a === void 0 ? {} : a, o = n.direction, s = this.getShapeStyle(e), u = e.direction || o, f = t.addShape("path", {
      attrs: s,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    t.shapeMap["".concat(this.type, "-keyShape")] = f;
    var l = i.width, c = i.height, h = i.show, d = i.offset, v = i.text;
    if (h)
      if (v)
        t.shapeMap["".concat(this.type, "-icon")] = t.addShape("text", {
          attrs: B({
            x: 0,
            y: 0,
            fontSize: 12,
            fill: "#000",
            stroke: "#000",
            textBaseline: "middle",
            textAlign: "center"
          }, i),
          className: "".concat(this.type, "-icon"),
          name: "".concat(this.type, "-icon"),
          draggable: !0
        });
      else {
        var p = -l / 2, g = -c / 2;
        (u === "up" || u === "down") && (g += d), (u === "left" || u === "right") && (p += d), t.shapeMap["".concat(this.type, "-icon")] = t.addShape("image", {
          attrs: B({
            x: p,
            y: g
          }, i),
          className: "".concat(this.type, "-icon"),
          name: "".concat(this.type, "-icon"),
          draggable: !0
        });
      }
    return this.drawLinkPoints(e, t), f;
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = this.mergeStyle || this.getOptions(e), a = n.linkPoints, i = a === void 0 ? {} : a, o = n.direction, s = e.direction || o, u = i.top, f = i.left, l = i.right, c = i.bottom, h = i.size, d = i.r, v = tn(i, ["top", "left", "right", "bottom", "size", "r"]), p = this.getSize(e), g = p[0];
    if (f) {
      var y = null, m = g * Math.sin(1 / 3 * Math.PI), b = g * Math.sin(1 / 3 * Math.PI);
      s === "up" ? y = [-b, m] : s === "down" ? y = [-b, -m] : s === "left" && (y = [-b, b - m]), y && (t.shapeMap["link-point-left"] = t.addShape("circle", {
        attrs: B(B({}, v), {
          x: y[0],
          y: y[1],
          r: h / 2 || d || 5
        }),
        className: "link-point-left",
        name: "link-point-left"
      }));
    }
    if (l) {
      var E = null, m = g * Math.sin(1 / 3 * Math.PI), b = g * Math.sin(1 / 3 * Math.PI);
      s === "up" ? E = [b, m] : s === "down" ? E = [b, -m] : s === "right" && (E = [b, b - m]), E && (t.shapeMap["link-point-right"] = t.addShape("circle", {
        attrs: B(B({}, v), {
          x: E[0],
          y: E[1],
          r: h / 2 || d || 5
        }),
        className: "link-point-right",
        name: "link-point-right"
      }));
    }
    if (u) {
      var x = null, m = g * Math.sin(1 / 3 * Math.PI), b = g * Math.sin(1 / 3 * Math.PI);
      s === "up" ? x = [b - m, -m] : s === "left" ? x = [b, -m] : s === "right" && (x = [-b, -m]), x && (t.shapeMap["link-point-top"] = t.addShape("circle", {
        attrs: B(B({}, v), {
          x: x[0],
          y: x[1],
          r: h / 2 || d || 5
        }),
        className: "link-point-top",
        name: "link-point-top"
      }));
    }
    if (c) {
      var w = null, m = g * Math.sin(1 / 3 * Math.PI), b = g * Math.sin(1 / 3 * Math.PI);
      s === "down" ? w = [-b + m, m] : s === "left" ? w = [b, m] : s === "right" && (w = [-b, m]), w && (t.shapeMap["link-point-bottom"] = t.addShape("circle", {
        attrs: B(B({}, v), {
          x: w[0],
          y: w[1],
          r: h / 2 || d || 5
        }),
        className: "link-point-bottom",
        name: "link-point-bottom"
      }));
    }
  },
  getPath: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).direction, n = e.direction || t, a = this.getSize(e), i = a[0], o = i * Math.sin(1 / 3 * Math.PI), s = i * Math.sin(1 / 3 * Math.PI), u = [
      ["M", -s, o],
      ["L", 0, -o],
      ["L", s, o],
      ["Z"]
      // 封闭
    ];
    return n === "down" ? u = [
      ["M", -s, -o],
      ["L", s, -o],
      ["L", 0, o],
      ["Z"]
      // 封闭
    ] : n === "left" ? u = [
      ["M", -s, s - o],
      ["L", s, -s],
      ["L", s, s],
      ["Z"]
      // 封闭
    ] : n === "right" && (u = [
      ["M", s, s - o],
      ["L", -s, s],
      ["L", -s, -s],
      ["Z"]
      // 封闭
    ]), u;
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getPath(e), o = B({
      path: i
    }, a);
    return o;
  },
  update: function(e, t, n) {
    var a = t.getContainer(), i = this.getOptions({}).style, o = this.getPath(e), s = {
      stroke: e.color,
      path: o
    }, u = t.get("keyShape"), f = _t({}, i, u.attr(), s);
    f = _t(f, e.style), this.updateShape(e, t, f, !0, n), this.updateLinkPoints(e, a);
  },
  /**
   * 更新linkPoints
   * @param {Object} cfg 节点数据配置项
   * @param {Group} group Item所在的group
   */
  updateLinkPoints: function(e, t) {
    var n = this.getOptions({}), a = n.linkPoints, i = n.direction, o = e.direction || i, s = t.shapeMap["link-point-left"] || t.find(function(P) {
      return P.get("className") === "link-point-left";
    }), u = t.shapeMap["link-point-right"] || t.find(function(P) {
      return P.get("className") === "link-point-right";
    }), f = t.shapeMap["link-point-top"] || t.find(function(P) {
      return P.get("className") === "link-point-top";
    }), l = t.shapeMap["link-point-bottom"] || t.find(function(P) {
      return P.get("className") === "link-point-bottom";
    }), c = a, h = s || u || f || l;
    h && (c = h.attr());
    var d = _t({}, c, e.linkPoints), v = d.fill, p = d.stroke, g = d.lineWidth, y = d.size / 2;
    y || (y = d.r);
    var m = e.linkPoints ? e.linkPoints : {
      left: void 0,
      right: void 0,
      top: void 0,
      bottom: void 0
    }, b = m.left, E = m.right, x = m.top, w = m.bottom, _ = this.getSize(e), M = _[0], A = {
      r: y,
      fill: v,
      stroke: p,
      lineWidth: g
    }, S = null, T = M * Math.sin(1 / 3 * Math.PI), C = M * Math.sin(1 / 3 * Math.PI);
    o === "up" ? S = [-C, T] : o === "down" ? S = [-C, -T] : o === "left" && (S = [-C, C - T]), S && (s ? !b && b !== void 0 ? (s.remove(), delete t.shapeMap["link-point-left"]) : s.attr(B(B({}, A), {
      x: S[0],
      y: S[1]
    })) : b && (t.shapeMap["link-point-left"] = t.addShape("circle", {
      attrs: B(B({}, A), {
        x: S[0],
        y: S[1]
      }),
      className: "link-point-left",
      name: "link-point-left",
      isAnchorPoint: !0
    })));
    var O = null;
    o === "up" ? O = [C, T] : o === "down" ? O = [C, -T] : o === "right" && (O = [C, C - T]), O && (u ? !E && E !== void 0 ? (u.remove(), delete t.shapeMap["link-point-right"]) : u.attr(B(B({}, A), {
      x: O[0],
      y: O[1]
    })) : E && (t.shapeMap["link-point-right"] = t.addShape("circle", {
      attrs: B(B({}, A), {
        x: O[0],
        y: O[1]
      }),
      className: "link-point-right",
      name: "link-point-right",
      isAnchorPoint: !0
    })));
    var L = null;
    o === "up" ? L = [C - T, -T] : o === "left" ? L = [C, -T] : o === "right" && (L = [-C, -T]), L && (f ? !x && x !== void 0 ? (f.remove(), delete t.shapeMap["link-point-top"]) : f.attr(B(B({}, A), {
      x: L[0],
      y: L[1]
    })) : x && (t.shapeMap["link-point-top"] = t.addShape("circle", {
      attrs: B(B({}, A), {
        x: L[0],
        y: L[1]
      }),
      className: "link-point-top",
      name: "link-point-top",
      isAnchorPoint: !0
    })));
    var R = null;
    o === "down" ? R = [-C + T, T] : o === "left" ? R = [C, T] : o === "right" && (R = [-C, T]), R && (l ? !w && w !== void 0 ? (l.remove(), delete t.shapeMap["link-point-bottom"]) : l.attr(B(B({}, A), {
      x: R[0],
      y: R[1]
    })) : w && (t.shapeMap["link-point-bottom"] = t.addShape("circle", {
      attrs: B(B({}, A), {
        x: R[0],
        y: R[1]
      }),
      className: "link-point-bottom",
      name: "link-point-bottom",
      isAnchorPoint: !0
    })));
  }
}, "single-node");
so("modelRect", {
  // 自定义节点时的配置
  options: {
    size: [185, 70],
    style: {
      radius: 5,
      stroke: "#69c0ff",
      fill: "#ffffff",
      lineWidth: Qe.defaultNode.style.lineWidth,
      fillOpacity: 1
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: "#595959",
        fontSize: 14,
        fontFamily: Qe.windowFontFamily
      },
      offset: 30
      // 距离左侧的 offset，没有设置 y 轴上移动的配置
    },
    descriptionCfg: {
      style: {
        fontSize: 12,
        fill: "#bfbfbf",
        fontFamily: Qe.windowFontFamily
      },
      paddingTop: 0
    },
    preRect: {
      show: !0,
      width: 4,
      fill: "#40a9ff",
      radius: 2
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: 10,
      lineWidth: 1,
      fill: "#72CC4A",
      stroke: "#72CC4A"
    },
    // 节点中icon配置
    logoIcon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !0,
      x: 0,
      y: 0,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",
      width: 16,
      height: 16,
      // 用于调整图标的左右位置
      offset: 0
    },
    // 节点中表示状态的icon配置
    stateIcon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !0,
      x: 0,
      y: 0,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",
      width: 16,
      height: 16,
      // 用于调整图标的左右位置
      offset: -5
    },
    // 连接点，默认为左右
    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]
    anchorPoints: [[0, 0.5], [1, 0.5]]
  },
  shapeType: "modelRect",
  drawShape: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).preRect, a = n === void 0 ? {} : n, i = this.getShapeStyle(e), o = this.getSize(e), s = o[0], u = o[1], f = t.addShape("rect", {
      attrs: i,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    t.shapeMap["".concat(this.type, "-keyShape")] = f;
    var l = a.show, c = tn(a, ["show"]);
    return l && (t.shapeMap["pre-rect"] = t.addShape("rect", {
      attrs: B({
        x: -s / 2,
        y: -u / 2,
        height: u
      }, c),
      className: "pre-rect",
      name: "pre-rect",
      draggable: !0
    })), this.drawLogoIcon(e, t), this.drawStateIcon(e, t), this.drawLinkPoints(e, t), f;
  },
  /**
   * 绘制模型矩形左边的logo图标
   * @param {Object} cfg 数据配置项
   * @param {Group} group Group实例
   */
  drawLogoIcon: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).logoIcon, a = n === void 0 ? {} : n, i = this.getSize(e), o = i[0];
    if (a.show) {
      var s = a.width, u = a.height, f = a.x, l = a.y, c = a.offset, h = a.text, d = tn(a, ["width", "height", "x", "y", "offset", "text"]);
      h ? t.shapeMap["rect-logo-icon"] = t.addShape("text", {
        attrs: B({
          x: 0,
          y: 0,
          fontSize: 12,
          fill: "#000",
          stroke: "#000",
          textBaseline: "middle",
          textAlign: "center"
        }, d),
        className: "rect-logo-icon",
        name: "rect-logo-icon",
        draggable: !0
      }) : t.shapeMap["rect-logo-icon"] = t.addShape("image", {
        attrs: B(B({}, d), {
          x: f || -o / 2 + s + c,
          y: l || -u / 2,
          width: s,
          height: u
        }),
        className: "rect-logo-icon",
        name: "rect-logo-icon",
        draggable: !0
      });
    }
  },
  /**
   * 绘制模型矩形右边的状态图标
   * @param {Object} cfg 数据配置项
   * @param {Group} group Group实例
   */
  drawStateIcon: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).stateIcon, a = n === void 0 ? {} : n, i = this.getSize(e), o = i[0];
    if (a.show) {
      var s = a.width, u = a.height, f = a.x, l = a.y, c = a.offset, h = a.text, d = tn(a, ["width", "height", "x", "y", "offset", "text"]);
      h ? t.shapeMap["rect-state-icon"] = t.addShape("text", {
        attrs: B({
          x: 0,
          y: 0,
          fontSize: 12,
          fill: "#000",
          stroke: "#000",
          textBaseline: "middle",
          textAlign: "center"
        }, d),
        className: "rect-state-icon",
        name: "rect-state-icon",
        draggable: !0
      }) : t.shapeMap["rect-state-icon"] = t.addShape("image", {
        attrs: B(B({}, d), {
          x: f || o / 2 - s + c,
          y: l || -u / 2,
          width: s,
          height: u
        }),
        className: "rect-state-icon",
        name: "rect-state-icon",
        draggable: !0
      });
    }
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints, a = n === void 0 ? {} : n, i = a.top, o = a.left, s = a.right, u = a.bottom, f = a.size, l = a.r, c = tn(a, ["top", "left", "right", "bottom", "size", "r"]), h = this.getSize(e), d = h[0], v = h[1];
    o && (t.shapeMap["link-point-left"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: -d / 2,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-left",
      name: "link-point-left",
      isAnchorPoint: !0
    })), s && (t.shapeMap["link-point-right"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: d / 2,
        y: 0,
        r: f / 2 || l || 5
      }),
      className: "link-point-right",
      name: "link-point-right",
      isAnchorPoint: !0
    })), i && (t.shapeMap["link-point-top"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: -v / 2,
        r: f / 2 || l || 5
      }),
      className: "link-point-top",
      name: "link-point-top",
      isAnchorPoint: !0
    })), u && (t.shapeMap["link-point-bottom"] = t.addShape("circle", {
      attrs: B(B({}, c), {
        x: 0,
        y: v / 2,
        r: f / 2 || l || 5
      }),
      className: "link-point-bottom",
      name: "link-point-bottom",
      isAnchorPoint: !0
    }));
  },
  drawLabel: function(e, t) {
    var n = this.getOptions(e), a = n.labelCfg, i = a === void 0 ? {} : a, o = n.logoIcon, s = o === void 0 ? {} : o, u = n.descriptionCfg, f = u === void 0 ? {} : u, l = this.getSize(e), c = l[0], h = null, d = s.show, v = s.width, p = -c / 2 + i.offset;
    d && (p = -c / 2 + v + i.offset);
    var g = i.style, y = f.style, m = f.paddingTop;
    return He(e.description) ? (h = t.addShape("text", {
      attrs: B(B({}, g), {
        x: p,
        y: -5,
        text: e.label
      }),
      className: "text-shape",
      name: "text-shape",
      draggable: !0,
      labelRelated: !0
    }), t.shapeMap["text-shape"] = h, t.shapeMap["rect-description"] = t.addShape("text", {
      attrs: B(B({}, y), {
        x: p,
        y: 17 + (m || 0),
        text: e.description
      }),
      className: "rect-description",
      name: "rect-description",
      draggable: !0,
      labelRelated: !0
    })) : (h = t.addShape("text", {
      attrs: B(B({}, g), {
        x: p,
        y: 7,
        text: e.label
      }),
      className: "text-shape",
      name: "text-shape",
      draggable: !0,
      labelRelated: !0
    }), t.shapeMap["text-shape"] = h), h;
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getSize(e), o = a.width || i[0], s = a.height || i[1], u = B({
      x: -o / 2,
      y: -s / 2,
      width: o,
      height: s
    }, a);
    return u;
  },
  update: function(e, t) {
    var n = this.mergeStyle || this.getOptions(e), a = n.style, i = a === void 0 ? {} : a, o = n.labelCfg, s = o === void 0 ? {} : o, u = n.descriptionCfg, f = u === void 0 ? {} : u, l = this.getSize(e), c = l[0], h = l[1], d = t.get("keyShape");
    d.attr(B(B({}, i), {
      x: -c / 2,
      y: -h / 2,
      width: c,
      height: h
    }));
    var v = t.getContainer(), p = v.shapeMap["rect-logo-icon"] || v.find(function(Be) {
      return Be.get("className") === "rect-logo-icon";
    }), g = p ? p.attr() : {}, y = _t({}, g, e.logoIcon), m = y.width;
    m === void 0 && (m = this.options.logoIcon.width);
    var b = e.logoIcon ? e.logoIcon.show : void 0, E = s.offset, x = -c / 2 + m + E;
    !b && b !== void 0 && (x = -c / 2 + E);
    var w = v.shapeMap["node-label"] || v.find(function(Be) {
      return Be.get("className") === "node-label";
    }), _ = v.shapeMap["rect-description"] || v.find(function(Be) {
      return Be.get("className") === "rect-description";
    });
    if (e.label)
      if (!w)
        v.shapeMap["node-label"] = v.addShape("text", {
          attrs: B(B({}, s.style), {
            x,
            y: e.description ? -5 : 7,
            text: e.label
          }),
          className: "node-label",
          name: "node-label",
          draggable: !0,
          labelRelated: !0
        });
      else {
        var M = e.labelCfg ? e.labelCfg.style : {}, A = _t({}, w.attr(), M);
        e.label && (A.text = e.label), A.x = x, He(e.description) && (A.y = -5), _ && (_.resetMatrix(), _.attr({
          x
        })), w.resetMatrix(), w.attr(A);
      }
    if (He(e.description)) {
      var S = f.paddingTop;
      if (!_)
        v.shapeMap["rect-description"] = v.addShape("text", {
          attrs: B(B({}, f.style), {
            x,
            y: 17 + (S || 0),
            text: e.description
          }),
          className: "rect-description",
          name: "rect-description",
          draggable: !0,
          labelRelated: !0
        });
      else {
        var M = e.descriptionCfg ? e.descriptionCfg.style : {}, T = _t({}, _.attr(), M);
        He(e.description) && (T.text = e.description), T.x = x, _.resetMatrix(), _.attr(B(B({}, T), {
          y: 17 + (S || 0)
        }));
      }
    }
    var C = v.shapeMap["pre-rect"] || v.find(function(Be) {
      return Be.get("className") === "pre-rect";
    });
    if (C && !C.destroyed) {
      var O = _t({}, C.attr(), e.preRect);
      C.attr(B(B({}, O), {
        x: -c / 2,
        y: -h / 2,
        height: h
      }));
    }
    if (p && !p.destroyed)
      if (!b && b !== void 0)
        p.remove(), delete v.shapeMap["pre-rect"];
      else {
        var L = y.width, R = y.height, P = y.x, z = y.y, V = y.offset, N = tn(y, ["width", "height", "x", "y", "offset"]);
        p.attr(B(B({}, N), {
          x: P || -c / 2 + L + V,
          y: z || -R / 2,
          width: L,
          height: R
        }));
      }
    else
      b && this.drawLogoIcon(e, v);
    var F = v.shapeMap["rect-state-icon"] || v.find(function(Be) {
      return Be.get("className") === "rect-state-icon";
    }), q = F ? F.attr() : {}, te = _t({}, q, e.stateIcon);
    if (F) {
      !te.show && te.show !== void 0 && (F.remove(), delete v.shapeMap["rect-state-icon"]);
      var re = te.width, R = te.height, P = te.x, z = te.y, J = te.offset, ye = tn(te, ["width", "height", "x", "y", "offset"]);
      F.attr(B(B({}, ye), {
        x: P || c / 2 - re + J,
        y: z || -R / 2,
        width: re,
        height: R
      }));
    } else
      te.show && this.drawStateIcon(e, v);
    this.updateLinkPoints(e, v);
  },
  getOptions: function(e, t) {
    return t === "move" ? e : Mr({}, this.options, this.getCustomConfig(e) || {}, e);
  }
}, "single-node");
so("star", {
  // 自定义节点时的配置
  options: {
    size: 60,
    style: {
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20
    },
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "star",
  // 文本位置
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).icon, a = n === void 0 ? {} : n, i = this.getShapeStyle(e), o = t.addShape("path", {
      attrs: i,
      className: "".concat(this.type, "-keyShape"),
      name: "".concat(this.type, "-keyShape"),
      draggable: !0
    });
    t.shapeMap["".concat(this.type, "-keyShape")] = o;
    var s = a.width, u = a.height, f = a.show, l = a.text;
    return f && (l ? t.shapeMap["".concat(this.type, "-icon")] = t.addShape("text", {
      attrs: B({
        x: 0,
        y: 0,
        fontSize: 12,
        fill: "#000",
        stroke: "#000",
        textBaseline: "middle",
        textAlign: "center"
      }, a),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    }) : t.shapeMap["".concat(this.type, "-icon")] = t.addShape("image", {
      attrs: B({
        x: -s / 2,
        y: -u / 2
      }, a),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    })), this.drawLinkPoints(e, t), o;
  },
  /**
   * 绘制节点上的LinkPoints
   * @param {Object} cfg data数据配置项
   * @param {Group} group Group实例
   */
  drawLinkPoints: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).linkPoints, a = n === void 0 ? {} : n, i = a.top, o = a.left, s = a.right, u = a.leftBottom, f = a.rightBottom, l = a.size, c = a.r, h = tn(a, ["top", "left", "right", "leftBottom", "rightBottom", "size", "r"]), d = this.getSize(e), v = d[0];
    if (s) {
      var p = Math.cos(0.1 * Math.PI) * v, g = Math.sin((18 + 72 * 0) / 180 * Math.PI) * v;
      t.shapeMap["link-point-right"] = t.addShape("circle", {
        attrs: B(B({}, h), {
          x: p,
          y: -g,
          r: l / 2 || c || 5
        }),
        className: "link-point-right",
        name: "link-point-right"
      });
    }
    if (i) {
      var p = Math.cos(0.5 * Math.PI) * v, g = Math.sin((18 + 72 * 1) / 180 * Math.PI) * v;
      t.shapeMap["link-point-top"] = t.addShape("circle", {
        attrs: B(B({}, h), {
          x: p,
          y: -g,
          r: l / 2 || c || 5
        }),
        className: "link-point-top",
        name: "link-point-top"
      });
    }
    if (o) {
      var p = Math.cos(0.9 * Math.PI) * v, g = Math.sin((18 + 72 * 2) / 180 * Math.PI) * v;
      t.shapeMap["link-point-left"] = t.addShape("circle", {
        attrs: B(B({}, h), {
          x: p,
          y: -g,
          r: l / 2 || c || 5
        }),
        className: "link-point-left",
        name: "link-point-left"
      });
    }
    if (u) {
      var p = Math.cos(1.3 * Math.PI) * v, g = Math.sin((18 + 72 * 3) / 180 * Math.PI) * v;
      t.shapeMap["link-point-bottom"] = t.addShape("circle", {
        attrs: B(B({}, h), {
          x: p,
          y: -g,
          r: l / 2 || c || 5
        }),
        className: "link-point-left-bottom",
        name: "link-point-left-bottom"
      });
    }
    if (f) {
      var p = Math.cos(1.7 * Math.PI) * v, g = Math.sin((18 + 72 * 4) / 180 * Math.PI) * v;
      t.shapeMap["link-point-right-bottom"] = t.addShape("circle", {
        attrs: B(B({}, h), {
          x: p,
          y: -g,
          r: l / 2 || c || 5
        }),
        className: "link-point-right-bottom",
        name: "link-point-right-bottom"
      });
    }
  },
  getPath: function(e) {
    var t = this.getSize(e), n = t[0], a = n * 3 / 8, i = e.innerR || a;
    return xa.getStarPath(n, i);
  },
  /**
   * 获取节点的样式，供基于该节点自定义时使用
   * @param {Object} cfg 节点数据模型
   * @return {Object} 节点的样式
   */
  getShapeStyle: function(e) {
    var t = (this.mergeStyle || this.getOptions(e)).style, n = {
      stroke: e.color
    }, a = _t({}, t, n), i = this.getPath(e), o = B({
      path: i
    }, a);
    return o;
  },
  update: function(e, t, n) {
    var a = t.getContainer(), i = this.getOptions({}).style, o = this.getPath(e), s = {
      stroke: e.color,
      path: o
    }, u = t.get("keyShape"), f = _t({}, i, u.attr(), s);
    f = _t(f, e.style), this.updateShape(e, t, f, !0, n), this.updateLinkPoints(e, a);
  },
  /**
   * 更新linkPoints
   * @param {Object} cfg 节点数据配置项
   * @param {Group} group Item所在的group
   */
  updateLinkPoints: function(e, t) {
    var n = this.getOptions({}).linkPoints, a = t.shapeMap["link-point-left"] || t.find(function(T) {
      return T.get("className") === "link-point-left";
    }), i = t.shapeMap["link-point-right"] || t.find(function(T) {
      return T.get("className") === "link-point-right";
    }), o = t.shapeMap["link-point-top"] || t.find(function(T) {
      return T.get("className") === "link-point-top";
    }), s = t.shapeMap["link-point-left-bottom"] || t.find(function(T) {
      return T.get("className") === "link-point-left-bottom";
    }), u = t.shapeMap["link-point-left-bottom"] || t.find(function(T) {
      return T.get("className") === "link-point-right-bottom";
    }), f = n, l = a || i || o || s || u;
    l && (f = l.attr());
    var c = _t({}, f, e.linkPoints), h = c.fill, d = c.stroke, v = c.lineWidth, p = c.size / 2;
    p || (p = c.r);
    var g = e.linkPoints ? e.linkPoints : {
      left: void 0,
      right: void 0,
      top: void 0,
      leftBottom: void 0,
      rightBottom: void 0
    }, y = g.left, m = g.right, b = g.top, E = g.leftBottom, x = g.rightBottom, w = this.getSize(e), _ = w[0], M = {
      r: p,
      fill: h,
      stroke: d,
      lineWidth: v
    }, A = Math.cos((18 + 72 * 0) / 180 * Math.PI) * _, S = Math.sin((18 + 72 * 0) / 180 * Math.PI) * _;
    i ? !m && m !== void 0 ? (i.remove(), delete t.shapeMap["link-point-right"]) : i.attr(B(B({}, M), {
      x: A,
      y: -S
    })) : m && (t.shapeMap["link-point-right"] = t.addShape("circle", {
      attrs: B(B({}, M), {
        x: A,
        y: -S
      }),
      className: "link-point-right",
      name: "link-point-right",
      isAnchorPoint: !0
    })), A = Math.cos((18 + 72 * 1) / 180 * Math.PI) * _, S = Math.sin((18 + 72 * 1) / 180 * Math.PI) * _, o ? !b && b !== void 0 ? (o.remove(), delete t.shapeMap["link-point-top"]) : o.attr(B(B({}, M), {
      x: A,
      y: -S
    })) : b && (t.shapeMap["link-point-top"] = t.addShape("circle", {
      attrs: B(B({}, M), {
        x: A,
        y: -S
      }),
      className: "link-point-top",
      name: "link-point-top",
      isAnchorPoint: !0
    })), A = Math.cos((18 + 72 * 2) / 180 * Math.PI) * _, S = Math.sin((18 + 72 * 2) / 180 * Math.PI) * _, a ? !y && y !== void 0 ? (a.remove(), delete t.shapeMap["link-point-left"]) : a.attr(B(B({}, M), {
      x: A,
      y: -S
    })) : y && (t.shapeMap["link-point-left"] = t.addShape("circle", {
      attrs: B(B({}, M), {
        x: A,
        y: -S
      }),
      className: "link-point-left",
      name: "link-point-left",
      isAnchorPoint: !0
    })), A = Math.cos((18 + 72 * 3) / 180 * Math.PI) * _, S = Math.sin((18 + 72 * 3) / 180 * Math.PI) * _, s ? !E && E !== void 0 ? (s.remove(), delete t.shapeMap["link-point-left-bottom"]) : s.attr(B(B({}, M), {
      x: A,
      y: -S
    })) : E && (t.shapeMap["link-point-left-bottom"] = t.addShape("circle", {
      attrs: B(B({}, M), {
        x: A,
        y: -S
      }),
      className: "link-point-left-bottom",
      name: "link-point-left-bottom",
      isAnchorPoint: !0
    })), A = Math.cos((18 + 72 * 4) / 180 * Math.PI) * _, S = Math.sin((18 + 72 * 4) / 180 * Math.PI) * _, u ? !x && x !== void 0 ? (u.remove(), delete t.shapeMap["link-point-right-bottom"]) : u.attr(B(B({}, M), {
      x: A,
      y: -S
    })) : x && (t.shapeMap["link-point-right-bottom"] = t.addShape("circle", {
      attrs: B(B({}, M), {
        x: A,
        y: -S
      }),
      className: "link-point-right-bottom",
      name: "link-point-right-bottom",
      isAnchorPoint: !0
    }));
  }
}, "single-node");
var B2 = xa.defaultSubjectColors, wf = "fan-shape-";
so("donut", {
  // 自定义节点时的配置
  options: {
    size: Qe.defaultNode.size,
    style: {
      x: 0,
      y: 0,
      stroke: Qe.defaultNode.style.stroke,
      fill: Qe.defaultNode.style.fill,
      lineWidth: Qe.defaultNode.style.lineWidth
    },
    labelCfg: {
      style: {
        fill: Qe.nodeLabel.style.fill,
        fontSize: Qe.nodeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    // 节点上左右上下四个方向上的链接circle配置
    linkPoints: {
      top: !1,
      right: !1,
      bottom: !1,
      left: !1,
      // circle的大小
      size: Qe.defaultNode.linkPoints.size,
      lineWidth: Qe.defaultNode.linkPoints.lineWidth,
      fill: Qe.defaultNode.linkPoints.fill,
      stroke: Qe.defaultNode.linkPoints.stroke
    },
    // 节点中icon配置
    icon: {
      // 是否显示icon，值为 false 则不渲染icon
      show: !1,
      // icon的地址，字符串类型
      img: "https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",
      width: 20,
      height: 20
    },
    stateStyles: B({}, Qe.nodeStateStyles)
  },
  shapeType: "circle",
  // 文本位置
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = (this.mergeStyle || this.getOptions(e)).icon, a = n === void 0 ? {} : n, i = this.getShapeStyle(e), o = Mr({}, a, e.icon), s = t.addShape("circle", {
      attrs: i,
      className: "".concat(this.type, "-keyShape"),
      draggable: !0,
      name: "".concat(this.type, "-keyShape")
    });
    t.shapeMap["".concat(this.type, "-keyShape")] = s;
    var u = o.width, f = o.height, l = o.show, c = o.text;
    return l && (c ? t.shapeMap["".concat(this.type, "-icon")] = t.addShape("text", {
      attrs: B({
        x: 0,
        y: 0,
        fontSize: 12,
        fill: "#000",
        stroke: "#000",
        textBaseline: "middle",
        textAlign: "center"
      }, o),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    }) : t.shapeMap["".concat(this.type, "-icon")] = t.addShape("image", {
      attrs: B({
        x: -u / 2,
        y: -f / 2
      }, o),
      className: "".concat(this.type, "-icon"),
      name: "".concat(this.type, "-icon"),
      draggable: !0
    })), Pse(e, t, s), this.drawLinkPoints(e, t), s;
  },
  updateShape: function(e, t, n, a, i) {
    var o = t.get("keyShape");
    o.attr(B({}, n)), kse(e, t, o), this.updateLabel(e, t, i), a && this.updateIcon(e, t);
  }
}, "circle");
var Pse = function(e, t, n) {
  var a = e.donutAttrs, i = a === void 0 ? {} : a, o = e.donutColorMap, s = o === void 0 ? {} : o, u = Object.keys(i).length;
  if (i && u > 1) {
    var f = QD(i, s), l = f.configs, c = f.totalValue;
    if (c) {
      var h = JD(n), d = h.lineWidth, v = h.arcR, p = [v, 0], g = 0;
      if (u === 1) {
        $g(t, {
          arcR: v,
          arcBegin: p,
          beginAngle: g,
          config: l[0],
          fanIndex: 0,
          lineWidth: d,
          totalValue: c,
          drawWhole: !0
        });
        return;
      }
      for (var y = 0; y < l.length; y++) {
        var m = $g(t, {
          arcR: v,
          arcBegin: p,
          beginAngle: g,
          config: l[y],
          fanIndex: y,
          lineWidth: d,
          totalValue: c
        });
        if (m.shouldEnd)
          return;
        p = m.arcBegin, g = m.beginAngle;
      }
    }
  }
}, $g = function(e, t) {
  var n = t.arcR, a = t.arcBegin, i = t.beginAngle, o = t.config, s = t.fanIndex, u = t.lineWidth, f = t.totalValue, l = t.drawWhole, c = l === void 0 ? !1 : l, h = t.updateShape, d = h === void 0 ? void 0 : h, v = o.value / f;
  if (v < 1e-3)
    return {
      beginAngle: i,
      arcBegin: a,
      shape: void 0,
      shouldEnd: !1
    };
  var p, g, y;
  if (c || v > 0.999)
    p = [n, 1e-4], y = 1;
  else {
    var m = v * Math.PI * 2;
    g = i + m, p = [n * Math.cos(g), -n * Math.sin(g)], y = m > Math.PI ? 1 : 0;
  }
  var b = {
    path: [["M", a[0], a[1]], ["A", n, n, 0, y, 0, p[0], p[1]]],
    stroke: o.color || (d == null ? void 0 : d.attr("stroke")) || B2[s % B2.length],
    lineWidth: u
  };
  return d ? d.attr(b) : e.shapeMap["".concat(wf).concat(s)] = e.addShape("path", {
    attrs: b,
    name: "".concat(wf).concat(s),
    draggable: !0
  }), {
    beginAngle: g,
    arcBegin: p,
    shape: e.shapeMap["".concat(wf).concat(s)],
    shouldEnd: c || v > 0.999
  };
}, kse = function(e, t, n) {
  var a = e.donutAttrs, i = e.donutColorMap, o = i === void 0 ? {} : i, s = {}, u = t.getContainer();
  if (a) {
    var f = QD(a, o), l = f.configs, c = f.totalValue;
    if (c)
      for (var h = JD(n), d = h.lineWidth, v = h.arcR, p = [v, 0], g = 0, y = 0; y < l.length; y++) {
        var m = "".concat(wf).concat(y), b = $g(u, {
          arcR: v,
          arcBegin: p,
          beginAngle: g,
          config: l[y],
          fanIndex: y,
          lineWidth: d,
          totalValue: c,
          drawWhole: l.length === 1,
          updateShape: u.shapeMap[m]
        });
        if (b.shape && (s[m] = !0), b.shouldEnd)
          break;
        p = b.arcBegin, g = b.beginAngle;
      }
  }
  var E = Object.keys(u.shapeMap).filter(function(x) {
    return x.includes(wf);
  });
  E.forEach(function(x) {
    s[x] || (u.shapeMap[x].remove(!0), delete u.shapeMap[x]);
  });
}, QD = function(e, t) {
  var n = 0, a = [];
  return Object.keys(e).forEach(function(i) {
    var o = +e[i];
    isNaN(o) || (a.push({
      key: i,
      value: o,
      color: t[i]
    }), n += o);
  }), {
    totalValue: n,
    configs: a
  };
}, JD = function(e) {
  var t = e.attr("r"), n = 0.6 * t, a = (t + n) / 2, i = t - n;
  return {
    lineWidth: i,
    arcR: a
  };
}, Gc = function(e) {
  var t = e.x, n = e.y;
  return {
    x: t,
    y: n,
    centerX: t,
    centerY: n,
    minX: t,
    minY: n,
    maxX: t,
    maxY: n,
    height: 0,
    width: 0
  };
}, Rse = function(e) {
  e === void 0 && (e = []);
  var t = [], n = [];
  e.forEach(function(u) {
    t.push(u.x), n.push(u.y);
  });
  var a = Math.min.apply(Math, t), i = Math.max.apply(Math, t), o = Math.min.apply(Math, n), s = Math.max.apply(Math, n);
  return {
    centerX: (a + i) / 2,
    centerY: (o + s) / 2,
    maxX: i,
    maxY: s,
    minX: a,
    minY: o,
    height: s - o,
    width: i - a
  };
}, i1 = function(e) {
  for (var t = [], n = {}, a = e.length, i = a - 1; i >= 0; i--) {
    var o = e[i];
    o.id = "".concat(o.x, "|||").concat(o.y), n[o.id] || (n[o.id] = o, t.push(o));
  }
  return t;
}, eL = function(e) {
  return i1(e);
}, td = function(e, t) {
  return e.width || e.height ? {
    centerX: e.centerX,
    centerY: e.centerY,
    minX: e.minX - t,
    minY: e.minY - t,
    maxX: e.maxX + t,
    maxY: e.maxY + t,
    height: e.height + 2 * t,
    width: e.width + 2 * t
  } : e;
}, Bse = function(e, t) {
  var n = Math.abs(e.x - t.centerX), a = Math.abs(e.y - t.centerY);
  return n === 0 && a === 0 ? 0 : n / t.width > a / t.height;
}, Wg = function(e, t, n) {
  var a = Bse(t, e);
  if (a === 0) {
    var i = e.centerX, o = e.centerY;
    return n.y < t.y ? o = e.minY : n.x > t.x ? i = e.maxX : n.x < t.x ? i = e.minX : n.x === t.x && (o = e.maxY), {
      x: i,
      y: o
    };
  }
  return a ? {
    x: t.x > e.centerX ? e.maxX : e.minX,
    y: t.y
  } : {
    x: t.x,
    y: t.y > e.centerY ? e.maxY : e.minY
  };
}, F2 = function(e, t) {
  var n = Math.min(e.minX, t.minX), a = Math.min(e.minY, t.minY), i = Math.max(e.maxX, t.maxX), o = Math.max(e.maxY, t.maxY);
  return {
    centerX: (n + i) / 2,
    centerY: (a + o) / 2,
    minX: n,
    minY: a,
    maxX: i,
    maxY: o,
    height: o - a,
    width: i - n
  };
}, Xg = function(e) {
  return [{
    x: e.minX,
    y: e.minY
  }, {
    x: e.maxX,
    y: e.minY
  }, {
    x: e.maxX,
    y: e.maxY
  }, {
    x: e.minX,
    y: e.maxY
  }];
}, zc = function(e, t) {
  var n = e.x, a = e.y;
  return n < t.minX || n > t.maxX || a < t.minY || a > t.maxY;
}, Fse = function(e, t) {
  return t < e.minX || t > e.maxX ? [] : [{
    x: t,
    y: e.minY
  }, {
    x: t,
    y: e.maxY
  }];
}, Gse = function(e, t) {
  return t < e.minY || t > e.maxY ? [] : [{
    x: e.minX,
    y: t
  }, {
    x: e.maxX,
    y: t
  }];
}, zse = function(e, t) {
  return Fse(e, t.x).concat(Gse(e, t.y));
}, Wf = function(e, t) {
  return Math.abs(e.x - t.x) + Math.abs(e.y - t.y);
}, Use = function(e, t) {
  var n = -2, a = 0;
  return t.forEach(function(i) {
    i && (e.x === i.x && (a += n), e.y === i.y && (a += n));
  }), a;
}, G2 = function(e, t, n, a, i) {
  return Wf(e, t) + Wf(e, n) + Use(e, [t, n, a, i]);
}, jse = function r(e, t, n, a, i) {
  i === void 0 && (i = 0), e.unshift(t[a]), n[a] && n[a] !== a && i <= 100 && r(e, t, n, n[a], i + 1);
}, Uc = function(e, t, n, a) {
  var i = n.x - e.x, o = n.y - e.y, s = a.x - e.x, u = a.y - e.y, f = n.x - t.x, l = n.y - t.y, c = a.x - t.x, h = a.y - t.y, d = i * u - o * s, v = f * h - l * c, p = i * l - o * f, g = s * h - u * c;
  return d * v <= 0 && p * g <= 0;
}, Vg = function(e, t, n) {
  if (n.width || n.height) {
    var a = Xg(n), i = a[0], o = a[1], s = a[2], u = a[3];
    return Uc(e, t, i, o) || Uc(e, t, i, u) || Uc(e, t, o, s) || Uc(e, t, s, u);
  }
  return !1;
}, $se = function(e, t, n, a) {
  var i = [];
  return e.forEach(function(o) {
    if (o !== t && (o.x === t.x || o.y === t.y)) {
      if (Vg(o, t, n) || Vg(o, t, a))
        return;
      i.push(o);
    }
  }), i1(i);
}, Wse = function(e, t, n, a, i, o, s) {
  var u, f = [], l = (u = {}, u[t.id] = t, u), c = {}, h = {}, d = {};
  h[t.id] = 0, d[t.id] = G2(t, n, t);
  var v = new rL();
  v.add({
    id: t.id,
    value: d[t.id]
  });
  var p = {};
  e.forEach(function(x) {
    p[x.id] = x;
  });
  for (var g; Object.keys(l).length; ) {
    var y = v.minId(!1);
    if (y)
      g = l[y];
    else
      break;
    if (g === n) {
      var m = [];
      return jse(m, p, c, n.id), m;
    }
    delete l[g.id], v.remove(g.id), f.push(g);
    var b = $se(e, g, a, i), E = function(w) {
      w.forEach(function(_) {
        if (f.indexOf(_) === -1) {
          var M = _.id;
          l[M] || (l[M] = _);
          var A = d[g.id] + Wf(g, _);
          if (h[M] && A >= h[M]) {
            v.add({
              id: M,
              value: d[M]
            });
            return;
          }
          c[M] = g.id, h[M] = A, d[M] = h[M] + G2(_, n, t, o, s), v.add({
            id: M,
            value: d[M]
          });
        }
      });
    };
    E(b);
  }
  return [t, n];
}, Xse = function(e, t, n) {
  return !(e.x === t.x && t.x === n.x || e.y === t.y && t.y === n.y);
}, Vse = function(e, t, n, a) {
  var i = Wf(e, t), o = Wf(n, t);
  i < a && (a = i), o < a && (a = o);
  var s = {
    x: t.x - a / i * (t.x - e.x),
    y: t.y - a / i * (t.y - e.y)
  }, u = {
    x: t.x - a / o * (t.x - n.x),
    y: t.y - a / o * (t.y - n.y)
  };
  return [s, u];
}, z2 = function(e, t) {
  var n = [], a = e[0];
  return n.push("M".concat(a.x, " ").concat(a.y)), e.forEach(function(i, o) {
    var s = e[o + 1], u = e[o + 2];
    if (s && u)
      if (Xse(i, s, u)) {
        var f = Vse(i, s, u, t), l = f[0], c = f[1];
        n.push("L".concat(l.x, " ").concat(l.y)), n.push("Q".concat(s.x, " ").concat(s.y, " ").concat(c.x, " ").concat(c.y)), n.push("L".concat(c.x, " ").concat(c.y));
      } else
        n.push("L".concat(s.x, " ").concat(s.y));
    else
      s && n.push("L".concat(s.x, " ").concat(s.y));
  }), n.join("");
}, tL = function(e, t, n, a, i) {
  var o, s;
  if (!n || !n.getType())
    o = Gc(e);
  else if (n.getType() === "combo") {
    var u = n.getKeyShape().getBBox();
    if (u) {
      var f = n.getModel(), l = f.x, c = f.y;
      o = {
        x: l,
        y: c,
        width: u.width,
        height: u.height,
        minX: u.minX + l,
        maxX: u.maxX + l,
        minY: u.minY + c,
        maxY: u.maxY + c
      }, o.centerX = (o.minX + o.maxX) / 2, o.centerY = (o.minY + o.maxY) / 2;
    } else
      o = Gc(e);
  } else
    o = n && n.getBBox();
  if (!a || !a.getType())
    s = Gc(t);
  else if (a.getType() === "combo") {
    var h = a.getKeyShape().getBBox();
    if (h) {
      var d = a.getModel(), v = d.x, p = d.y;
      s = {
        x: v,
        y: p,
        width: h.width,
        height: h.height,
        minX: h.minX + v,
        maxX: h.maxX + v,
        minY: h.minY + p,
        maxY: h.maxY + p
      }, s.centerX = (s.minX + s.maxX) / 2, s.centerY = (s.minY + s.maxY) / 2;
    } else
      s = Gc(t);
  } else
    s = a && a.getBBox();
  var g = td(o, i), y = td(s, i), m = Wg(g, e, t), b = Wg(y, t, e), E = Rse([m, b]), x = F2(g, E), w = F2(y, E), _ = [];
  _ = _.concat(Xg(x)).concat(Xg(w));
  var M = {
    x: (e.x + t.x) / 2,
    y: (e.y + t.y) / 2
  };
  [E, x, w].forEach(function(S) {
    _ = _.concat(zse(S, M).filter(function(T) {
      return zc(T, g) && zc(T, y);
    }));
  }), [{
    x: m.x,
    y: b.y
  }, {
    x: b.x,
    y: m.y
  }].forEach(function(S) {
    zc(S, g) && zc(S, y) && _.push(S);
  }), _.unshift(m), _.push(b), _ = i1(_);
  var A = Wse(_, m, b, o, s, e, t);
  return A.unshift(e), A.push(t), eL(A);
}, Yse = function(e) {
  if (!(e != null && e.length))
    return e;
  for (var t = e[e.length - 1], n = {
    x: t.x,
    y: t.y
  }, a = [t], i = [t], o = e.length - 2; o >= 0; o--) {
    var s = e[o];
    if (s.x === n.x ? a.push(s) : (a = [s], n.x = s.x), s.y === n.y ? i.push(s) : (i = [s], n.y = s.y), a.length > 2) {
      var u = e.indexOf(a[1]);
      u > -1 && e.splice(u, 1);
      continue;
    }
    if (i.length > 2) {
      var u = e.indexOf(i[1]);
      u > -1 && e.splice(u, 1);
    }
  }
  return e;
}, rL = (
  /** @class */
  function() {
    function r() {
      this.arr = [], this.map = {}, this.arr = [], this.map = {};
    }
    return r.prototype._innerAdd = function(e, t) {
      for (var n = [0, t - 1]; n[1] - n[0] > 1; ) {
        var a = Math.floor((n[0] + n[1]) / 2);
        if (this.arr[a].value > e.value)
          n[1] = a;
        else if (this.arr[a].value < e.value)
          n[0] = a;
        else {
          this.arr.splice(a, 0, e), this.map[e.id] = !0;
          return;
        }
      }
      this.arr.splice(n[1], 0, e), this.map[e.id] = !0;
    }, r.prototype.add = function(e) {
      delete this.map[e.id];
      var t = this.arr.length;
      if (!t) {
        this.arr.push(e), this.map[e.id] = !0;
        return;
      }
      if (this.arr[t - 1].value < e.value) {
        this.arr.push(e), this.map[e.id] = !0;
        return;
      }
      this._innerAdd(e, t);
    }, r.prototype.remove = function(e) {
      this.map[e] && delete this.map[e];
    }, r.prototype._clearAndGetMinId = function() {
      for (var e, t = this.arr.length - 1; t >= 0; t--)
        this.map[this.arr[t].id] ? e = this.arr[t].id : this.arr.splice(t, 1);
      return e;
    }, r.prototype._findFirstId = function() {
      for (; this.arr.length; ) {
        var e = this.arr.shift();
        if (this.map[e.id])
          return e.id;
      }
    }, r.prototype.minId = function(e) {
      return e ? this._clearAndGetMinId() : this._findFirstId();
    }, r;
  }()
), Hse = function(e, t) {
  return Math.abs(e.x - t.x) + Math.abs(e.y - t.y);
}, Kse = function(e, t, n, a, i) {
  return eL(tL(e, t, n, a, i.offset));
}, qse = {
  offset: 20,
  maxAllowedDirectionChange: Math.PI / 2,
  maximumLoops: 2e3,
  gridSize: 10,
  directions: [
    {
      stepX: 1,
      stepY: 0
    },
    {
      stepX: -1,
      stepY: 0
    },
    {
      stepX: 0,
      stepY: 1
    },
    {
      stepX: 0,
      stepY: -1
    }
    // top
  ],
  get penalties() {
    return {
      0: 0,
      45: this.gridSize / 2,
      90: this.gridSize / 2
    };
  },
  distFunc: Hse,
  fallbackRoute: Kse
}, xi = function(e, t) {
  var n = Math.round(Math.abs(e / t)), a = e < 0 ? -1 : 1;
  return n < 0 ? 0 : a * n;
}, Zse = function(e, t, n) {
  var a = {};
  return e.forEach(function(i) {
    if (i)
      for (var o = td(i.getBBox(), n), s = xi(o.minX, t); s <= xi(o.maxX, t); s += 1)
        for (var u = xi(o.minY, t); u <= xi(o.maxY, t); u += 1)
          a["".concat(s, "|||").concat(u)] = !0;
  }), a;
}, p0 = function(e, t) {
  var n = t.x - e.x, a = t.y - e.y;
  return n || a ? Math.atan2(a, n) : 0;
}, U2 = function(e, t) {
  var n = Math.abs(e - t);
  return n > Math.PI ? 2 * Math.PI - n : n;
}, j2 = function(e, t, n) {
  for (var a = 1 / 0, i = 0, o = t.length; i < o; i++) {
    var s = n(e, t[i]);
    s < a && (a = s);
  }
  return a;
}, $2 = function(e, t, n, a, i) {
  var o = [];
  if (!n)
    return [e];
  var s = i.directions, u = i.offset, f = n.getBBox(), l = t.x > f.minX && t.x < f.maxX && t.y > f.minY && t.y < f.maxY, c = td(f, u);
  for (var h in c)
    c[h] = xi(c[h], i.gridSize);
  if (l) {
    for (var d = 0, v = s; d < v.length; d++)
      for (var p = v[d], g = [[{
        x: c.minX,
        y: c.minY
      }, {
        x: c.maxX,
        y: c.minY
      }], [{
        x: c.minX,
        y: c.minY
      }, {
        x: c.minX,
        y: c.maxY
      }], [{
        x: c.maxX,
        y: c.minY
      }, {
        x: c.maxX,
        y: c.maxY
      }], [{
        x: c.minX,
        y: c.maxY
      }, {
        x: c.maxX,
        y: c.maxY
      }]], h = 0; h < 4; h++) {
        var y = g[h], m = xa.getLineIntersect(e, {
          x: e.x + p.stepX * c.width,
          y: e.y + p.stepY * c.height
        }, y[0], y[1]);
        m && !Vg(e, m, f) && (m.id = "".concat(m.x, "|||").concat(m.y), o.push(m));
      }
    return o;
  }
  var b = Wg(c, e, a);
  return b.id = "".concat(b.x, "|||").concat(b.y), [b];
}, Yg = function(e, t, n, a) {
  var i = p0(e, t), o = n[e.id];
  if (!o) {
    var s = p0(a, e);
    return U2(s, i);
  }
  var u = p0({
    x: o.x,
    y: o.y
  }, e);
  return U2(u, i);
}, Qse = function(e, t, n, a, i, o, s) {
  var u = [a], f = a, l = e.id, c = e.x, h = e.y, d = {
    x: c,
    y: h,
    id: l
  };
  Yg(d, o, t, n) && (f = {
    x: o.x === a.x ? a.x : d.x * s,
    y: o.y === a.y ? a.y : d.y * s
  }, u.unshift(f));
  for (var v = t[l]; v && v.id !== l; ) {
    var p = {
      x: c,
      y: h,
      id: l
    }, g = {
      x: v.x,
      y: v.y,
      id: v.id
    }, y = Yg(g, p, t, n);
    y && (f = {
      x: g.x === p.x ? f.x : g.x * s,
      y: g.y === p.y ? f.y : g.y * s
    }, u.unshift(f)), l = g.id, c = g.x, h = g.y, v = t[l];
  }
  return u[0].x = c === n.x ? i.x : f.x, u[0].y = h === n.y ? i.y : f.y, u.unshift(i), u;
}, Jse = function(e, t, n, a, i) {
  if (isNaN(e.x) || isNaN(t.x))
    return [];
  var o = Mr(qse, i);
  o.obstacles = o.obstacles || [];
  var s = o.penalties, u = o.gridSize, f = Zse(o.obstacles.concat([n, a]), u, o.offset), l = {
    x: xi(e.x, u),
    y: xi(e.y, u)
  }, c = {
    x: xi(t.x, u),
    y: xi(t.y, u)
  };
  e.id = "".concat(l.x, "|||").concat(l.y), t.id = "".concat(c.x, "|||").concat(c.y);
  var h = $2(l, e, n, c, o), d = $2(c, t, a, l, o);
  h.forEach(function(N) {
    delete f[N.id];
  }), d.forEach(function(N) {
    delete f[N.id];
  });
  for (var v = {}, p = {}, g = {}, y = {}, m = {}, b = new rL(), E = 0; E < h.length; E++) {
    var x = h[E];
    v[x.id] = x, y[x.id] = 0, m[x.id] = j2(x, d, o.distFunc), b.add({
      id: x.id,
      value: m[x.id]
    });
  }
  var w = o.maximumLoops, _, M, A, S, T, C, O = 1 / 0, L = {};
  for (d.forEach(function(N) {
    L["".concat(N.x, "|||").concat(N.y)] = !0;
  }), Object.keys(v).forEach(function(N) {
    var F = v[N].id;
    m[F] <= O && (O = m[F], _ = v[F]);
  }); Object.keys(v).length > 0 && w > 0; ) {
    var R = b.minId((w + 1) % 30 === 0);
    if (R)
      _ = v[R];
    else
      break;
    if (L["".concat(_.x, "|||").concat(_.y)])
      return Qse(_, g, l, t, e, c, u);
    delete v[_.id], b.remove(_.id), p[_.id] = !0;
    for (var E = 0; E < o.directions.length; E++) {
      M = o.directions[E];
      var P = "".concat(Math.round(_.x) + M.stepX, "|||").concat(Math.round(_.y) + M.stepY);
      if (A = {
        x: _.x + M.stepX,
        y: _.y + M.stepY,
        id: P
      }, !p[P] && (C = Yg(_, A, g, l), !(C > o.maxAllowedDirectionChange) && !f[P])) {
        v[P] || (v[P] = A);
        var z = s[C];
        S = o.distFunc(_, A) + (isNaN(z) ? u : z), T = y[_.id] + S;
        var V = y[P];
        V && T >= V || (g[P] = _, y[P] = T, m[P] = T + j2(A, d, o.distFunc), b.add({
          id: P,
          value: m[P]
        }));
      }
    }
    w -= 1;
  }
  return o.fallbackRoute(e, t, n, a, o);
};
TU("polyline", {
  options: {
    color: Qe.defaultEdge.color,
    size: Qe.defaultEdge.size,
    style: {
      radius: 0,
      offset: 15,
      x: 0,
      y: 0,
      stroke: Qe.defaultEdge.style.stroke,
      lineAppendWidth: Qe.defaultEdge.style.lineAppendWidth
    },
    // 文本样式配置
    labelCfg: {
      style: {
        fill: Qe.edgeLabel.style.fill,
        fontSize: Qe.edgeLabel.style.fontSize,
        fontFamily: Qe.windowFontFamily
      }
    },
    routeCfg: {
      obstacles: [],
      maxAllowedDirectionChange: Math.PI,
      maximumLoops: 500,
      gridSize: 10
      // 指定精度
    },
    stateStyles: B({}, Qe.edgeStateStyles)
  },
  shapeType: "polyline",
  // 文本位置
  labelPosition: "center",
  drawShape: function(e, t) {
    var n = this.getShapeStyle(e);
    n.radius === 0 && delete n.radius;
    var a = t.addShape("path", {
      className: "edge-shape",
      name: "edge-shape",
      attrs: n
    });
    return t.shapeMap["edge-shape"] = a, a;
  },
  getShapeStyle: function(e) {
    var t = this.options.style, n = {
      stroke: e.color
    }, a = _t({}, t, n, e.style);
    e = this.getPathPoints(e), this.radius = a.radius, this.offset = a.offset;
    var i = e.startPoint, o = e.endPoint, s = this.getControlPoints(e), u = [i];
    s && (u = u.concat(s)), u.push(o);
    var f = e.sourceNode, l = e.targetNode, c = a.radius, h = this.options.routeCfg, d = _t({}, h, e.routeCfg);
    d.offset = a.offset;
    var v = this.getPath(u, f, l, c, d, !s);
    (bt(v) && v.length <= 1 || He(v) && v.indexOf("L") === -1) && (v = "M0 0, L0 0"), (isNaN(i.x) || isNaN(i.y) || isNaN(o.x) || isNaN(o.y)) && (v = "M0 0, L0 0");
    var p = _t({}, Qe.defaultEdge.style, a, {
      lineWidth: e.size,
      path: v
    });
    return p;
  },
  updateShapeStyle: function(e, t) {
    var n = t.getContainer();
    if (t.isVisible()) {
      var a = {
        stroke: e.color
      }, i = n.shapeMap["edge-shape"] || n.find(function(E) {
        return E.get("className") === "edge-shape";
      }) || t.getKeyShape(), o = e.size;
      e = this.getPathPoints(e);
      var s = e.startPoint, u = e.endPoint, f = this.getControlPoints(e), l = [s];
      f && (l = l.concat(f)), l.push(u);
      var c = i.attr(), h = _t({}, a, c, e.style), d = e.sourceNode, v = e.targetNode, p = h.radius, g = this.options.routeCfg, y = _t({}, g, e.routeCfg);
      y.offset = h.offset;
      var m = this.getPath(l, d, v, p, y, !f);
      (bt(m) && m.length <= 1 || He(m) && m.indexOf("L") === -1) && (m = "M0 0, L0 0"), (isNaN(s.x) || isNaN(s.y) || isNaN(u.x) || isNaN(u.y)) && (m = "M0 0, L0 0"), c.endArrow && h.endArrow === !1 && (e.style.endArrow = {
        path: ""
      }), c.startArrow && h.startArrow === !1 && (e.style.startArrow = {
        path: ""
      });
      var b = _t(a, i.attr(), {
        lineWidth: o,
        path: m
      }, e.style);
      i && i.attr(b);
    }
  },
  getPath: function(e, t, n, a, i, o) {
    var s = i.offset, u = i.obstacles, f = i.simple;
    if (!s || e.length > 2 || o === !1) {
      if (a)
        return z2(e, a);
      var l = [];
      return Se(e, function(v, p) {
        p === 0 ? l.push(["M", v.x, v.y]) : l.push(["L", v.x, v.y]);
      }), l;
    }
    f !== !1 && !(u != null && u.length) && (f = !0);
    var c = f ? tL(e[e.length - 1], e[0], n, t, s) : Jse(e[0], e[e.length - 1], t, n, i);
    if (!c || !c.length)
      return "M0 0, L0 0";
    if (a) {
      var h = z2(c, a);
      return h;
    }
    c = Yse(c);
    var d = xa.pointsToPolygon(c);
    return d;
  }
}, "single-edge");
var W2 = co.cloneEvent, X2 = co.isNaN, V2 = Math.abs, eue = 10, tue = ["shift", "ctrl", "alt", "control"];
const rue = {
  getDefaultCfg: function() {
    return {
      direction: "both",
      enableOptimize: !1,
      // drag-canvas 可拖动的扩展范围，默认为 0，即最多可以拖动一屏的位置
      // 当设置的值大于 0 时，即拖动可以超过一屏
      // 当设置的值小于 0 时，相当于缩小了可拖动范围
      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ
      scalableRange: 0,
      allowDragOnItem: !1
    };
  },
  getEvents: function() {
    return {
      mousedown: "onMouseDown",
      drag: "onDragMove",
      dragend: "onMouseUp",
      "canvas:click": "onMouseUp",
      keyup: "onKeyUp",
      focus: "onKeyUp",
      keydown: "onKeyDown",
      touchstart: "onTouchStart",
      touchmove: "onTouchMove",
      touchend: "onMouseUp"
    };
  },
  updateViewport: function(e) {
    var t = this.origin, n = +e.clientX, a = +e.clientY;
    if (!(X2(n) || X2(a))) {
      var i = n - t.x, o = a - t.y;
      this.get("direction") === "x" ? o = 0 : this.get("direction") === "y" && (i = 0), this.origin = {
        x: n,
        y: a
      };
      var s = this.graph.get("width"), u = this.graph.get("height"), f = this.graph.get("canvas").getCanvasBBox(), l = this.scalableRange, c = this.scalableRange;
      l < 1 && l > -1 && (l = s * l, c = u * c), (f.minX <= s + l && f.minX + i > s + l || f.maxX + l >= 0 && f.maxX + l + i < 0) && (i = 0), (f.minY <= u + c && f.minY + o > u + c || f.maxY + c >= 0 && f.maxY + c + o < 0) && (o = 0), this.graph.translate(i, o);
    }
  },
  onTouchStart: function(e) {
    var t = this, n = e.originalEvent.touches, a = n[0], i = n[1];
    a && i || (e.preventDefault(), this.mousedown = !0, t.onDragStart(e));
  },
  onMouseDown: function(e) {
    this.mousedown = !0;
  },
  onDragMove: function(e) {
    this.mousedown && (this.dragstart ? this.onDrag(e) : (this.dragstart = !0, this.onDragStart(e)));
  },
  onDragStart: function(e) {
    var t = this, n = e.originalEvent;
    if (!(n && e.name !== "touchstart" && n.button !== 0) && !(e.name !== "touchstart" && typeof window < "u" && window.event && !window.event.buttons && !window.event.button) && this.shouldBegin(e, this) && !t.keydown && this.allowDrag(e)) {
      if (t.origin = {
        x: e.clientX,
        y: e.clientY
      }, t.dragging = !1, this.enableOptimize) {
        for (var a = this.graph, i = a.getEdges(), o = 0, s = i.length; o < s; o++) {
          var u = i[o].get("group").get("children");
          u && u.forEach(function(b) {
            b.set("ori-visibility", b.get("ori-visibility") || b.get("visible")), b.hide();
          });
        }
        for (var f = a.getNodes(), l = 0, c = f.length; l < c; l++)
          for (var h = f[l].getContainer(), d = h.get("children"), v = 0, p = d; v < p.length; v++) {
            var g = p[v], y = g.get("isKeyShape");
            y || (g.set("ori-visibility", g.get("ori-visibility") || g.get("visible")), g.hide());
          }
      }
      if (typeof window < "u") {
        var m = this;
        this.handleDOMContextMenu = function(b) {
          return m.onMouseUp(b);
        }, document.body.addEventListener("contextmenu", this.handleDOMContextMenu);
      }
    }
  },
  onTouchMove: function(e) {
    var t = this, n = e.originalEvent.touches, a = n[0], i = n[1];
    if (a && i) {
      this.onMouseUp(e);
      return;
    }
    e.preventDefault(), t.onDrag(e);
  },
  onDrag: function(e) {
    if (this.mousedown) {
      var t = this.graph;
      if (!this.keydown && this.allowDrag(e) && (e = W2(e), !!this.origin)) {
        if (this.dragging)
          e.type = "drag", t.emit("canvas:drag", e);
        else {
          if (V2(this.origin.x - e.clientX) + V2(this.origin.y - e.clientY) < eue)
            return;
          this.shouldBegin(e, this) && (e.type = "dragstart", t.emit("canvas:dragstart", e), this.originPosition = {
            x: e.clientX,
            y: e.clientY
          }, this.dragging = !0);
        }
        this.shouldUpdate(e, this) && this.updateViewport(e);
      }
    }
  },
  onMouseUp: function(e) {
    var t, n;
    this.mousedown = !1, this.dragstart = !1;
    var a = this.graph;
    if (!this.keydown) {
      var i = a.getZoom(), o = a.get("modeController"), s = (n = (t = o == null ? void 0 : o.modes[o.mode]) === null || t === void 0 ? void 0 : t.filter(function(_) {
        return _.type === "zoom-canvas";
      })) === null || n === void 0 ? void 0 : n[0], u = s ? s.optimizeZoom || 0.1 : 0;
      if (this.enableOptimize) {
        for (var f = a.getEdges(), l = 0, c = f.length; l < c; l++) {
          var h = f[l].get("group").get("children");
          h && h.forEach(function(_) {
            var M = _.get("ori-visibility");
            _.set("ori-visibility", void 0), M && _.show();
          });
        }
        if (i > u)
          for (var d = a.getNodes(), v = 0, p = d.length; v < p; v++)
            for (var g = d[v].getContainer(), y = g.get("children"), m = 0, b = y; m < b.length; m++) {
              var E = b[m], x = E.get("isKeyShape");
              if (!x) {
                var w = E.get("ori-visibility");
                E.set("ori-visibility", void 0), w && E.show();
              }
            }
      }
      if (!this.dragging) {
        this.origin = null;
        return;
      }
      e = W2(e), this.shouldEnd(e, this) && this.updateViewport(e), e.type = "dragend", e.dx = e.clientX - this.originPosition.x, e.dy = e.clientY - this.originPosition.y, a.emit("canvas:dragend", e), this.endDrag(), typeof window < "u" && document.body.removeEventListener("contextmenu", this.handleDOMContextMenu);
    }
  },
  endDrag: function() {
    this.origin = null, this.dragging = !1, this.dragbegin = !1, this.mousedown = !1, this.dragstart = !1;
  },
  onKeyDown: function(e) {
    var t = this, n = e.key;
    n && (tue.indexOf(n.toLowerCase()) > -1 ? t.keydown = !0 : t.keydown = !1);
  },
  onKeyUp: function() {
    this.keydown = !1, this.origin = null, this.dragging = !1, this.dragbegin = !1;
  },
  allowDrag: function(e) {
    var t, n, a = e.target, i = a && a.isCanvas && a.isCanvas();
    if (Xf(this.allowDragOnItem) && !this.allowDragOnItem && !i)
      return !1;
    if (yn(this.allowDragOnItem)) {
      var o = this.allowDragOnItem, s = o.node, u = o.edge, f = o.combo, l = (n = (t = e.item) === null || t === void 0 ? void 0 : t.getType) === null || n === void 0 ? void 0 : n.call(t);
      if (!s && l === "node" || !u && l === "edge" || !f && l === "combo")
        return !1;
    }
    return !0;
  }
}, nue = {
  getDefaultCfg: function() {
    return {
      updateEdge: !0,
      delegateStyle: {},
      // 是否开启delegate
      enableDelegate: !1,
      // 拖动节点过程中是否只改变 Combo 的大小，而不改变其结构
      onlyChangeComboSize: !1,
      // 拖动过程中目标 combo 状态样式
      comboActiveState: "",
      selectedState: "selected",
      enableOptimize: !1,
      enableDebounce: !1,
      enableStack: !0
    };
  },
  getEvents: function() {
    return {
      "node:mousedown": "onMouseDown",
      drag: "onDragMove",
      dragend: "onDragEnd",
      "combo:dragenter": "onDragEnter",
      "combo:dragleave": "onDragLeave",
      "combo:drop": "onDropCombo",
      "node:drop": "onDropNode",
      "canvas:drop": "onDropCanvas",
      touchstart: "onTouchStart",
      touchmove: "onTouchMove",
      touchend: "onDragEnd",
      afterchangedata: "onDragEnd"
    };
  },
  validationCombo: function(e) {
    if (!this.origin || !e || e.destroyed)
      return !1;
    var t = e.getType();
    return t === "combo";
  },
  onTouchStart: function(e) {
    if (e.item) {
      var t = this;
      try {
        var n = e.originalEvent.touches, a = n[0], i = n[1];
        if (a && i)
          return;
        e.preventDefault();
      } catch {
        console.warn("Touch original event not exist!");
      }
      this.mousedown = {
        item: e.item,
        target: e.target,
        origin: {
          x: e.x,
          y: e.y
        }
      }, this.dragstart = !0, t.onDragStart(e);
    }
  },
  onTouchMove: function(e) {
    var t = this;
    try {
      var n = e.originalEvent.touches, a = n[0], i = n[1];
      if (a && i) {
        t.onDragEnd(e);
        return;
      }
      e.preventDefault();
    } catch {
      console.warn("Touch original event not exist!");
    }
    t.onDrag(e);
  },
  /**
   * cache the manipulated item and target, since drag and dragend are global events but not node:*
   * @param evt event param
   */
  onMouseDown: function(e) {
    this.mousedown = {
      item: e.item,
      target: e.target,
      origin: {
        x: e.x,
        y: e.y
      }
    }, typeof window < "u" && !this.windowEventBinded && (this.windowEventBinded = !0, document.body.addEventListener("contextmenu", this.onDragEnd.bind(this)), document.body.addEventListener("mouseup", this.onDragEnd.bind(this)));
  },
  /**
   * trigger dragstart/drag by mousedown and drag events
   * @param evt event param
   */
  onDragMove: function(e) {
    var t, n;
    if (((n = (t = e.item) === null || t === void 0 ? void 0 : t.getType) === null || n === void 0 ? void 0 : n.call(t)) !== "node") {
      this.onDragEnd();
      return;
    }
    this.mousedown && (this.dragstart ? this.onDrag(B(B({}, e), this.mousedown)) : (this.dragstart = !0, this.onDragStart(e)));
  },
  /**
   * 开始拖动节点
   * @param evt
   */
  onDragStart: function(e) {
    var t = this;
    if (this.currentShouldEnd = !0, !!this.shouldBegin(B(B({}, e), this.mousedown), this)) {
      var n = this.mousedown, a = n.item, i = n.target;
      if (!(!a || a.destroyed || a.hasLocked())) {
        var o = a.getContainer();
        if (o.set("capture", !1), this.cachedCaptureItems || (this.cachedCaptureItems = []), this.cachedCaptureItems.push(a), i) {
          var s = i.get("isAnchorPoint");
          if (s)
            return;
        }
        var u = this.graph;
        this.targets = [], this.targetCombo = null;
        var f = u.findAllByState("node", this.selectedState), l = a.get("id"), c = f.filter(function(d) {
          var v = d.get("id");
          return l === v;
        });
        if (c.length === 0 ? this.targets.push(a) : f.length > 1 ? f.forEach(function(d) {
          var v = d.hasLocked();
          v || t.targets.push(d);
        }) : this.targets.push(a), this.graph.get("enabledStack") && this.enableStack) {
          var h = [];
          this.targets.forEach(function(d) {
            var v = d.getModel(), p = v.x, g = v.y, y = v.id;
            h.push({
              x: p,
              y: g,
              id: y
            });
          }), this.set("beforeDragNodes", h);
        }
        this.hidenEdge = {}, this.get("updateEdge") && this.enableOptimize && !this.enableDelegate && this.targets.forEach(function(d) {
          var v = d.getEdges();
          v.forEach(function(p) {
            p.isVisible() && (t.hidenEdge[p.getID()] = !0, p.hide());
          });
        }), this.origin = this.mousedown.origin, this.point = {}, this.originPoint = {};
      }
    }
  },
  /**
   * 持续拖动节点
   * @param evt
   */
  onDrag: function(e) {
    var t = this;
    if (!(!this.mousedown || !this.origin) && this.shouldUpdate(e, this))
      if (this.get("enableDelegate"))
        this.updateDelegate(e);
      else if (this.enableDebounce)
        this.debounceUpdate({
          targets: this.targets,
          graph: this.graph,
          point: this.point,
          origin: this.origin,
          evt: e,
          updateEdge: this.get("updateEdge"),
          onlyChangeComboSize: this.onlyChangeComboSize,
          updateParentCombos: this.updateParentCombos
        });
      else {
        var n = {};
        this.targets.map(function(a) {
          t.update(a, e);
          var i = a.getModel().comboId;
          i && (n[i] = t.graph.findById(i));
        }), this.onlyChangeComboSize && this.updateParentCombos();
      }
  },
  /**
   * 拖动结束，设置拖动元素capture为true，更新元素位置，如果是拖动涉及到 combo，则更新 combo 结构
   * @param evt
   */
  onDragEnd: function(e) {
    var t = this, n;
    if (this.mousedown = !1, this.dragstart = !1, typeof window < "u" && this.windowEventBinded && (this.windowEventBinded = !1, document.body.removeEventListener("contextmenu", this.onDragEnd.bind(this)), document.body.removeEventListener("mouseup", this.onDragEnd.bind(this))), !!this.origin) {
      (n = this.cachedCaptureItems) === null || n === void 0 || n.forEach(function(o) {
        var s = o.getContainer();
        s.set("capture", !0);
      }), this.cachedCaptureItems = [], this.delegateRect && (this.delegateRect.remove(), this.delegateRect = null), this.get("updateEdge") && this.enableOptimize && !this.enableDelegate && this.targets.forEach(function(o) {
        var s = o.getEdges();
        s.forEach(function(u) {
          t.hidenEdge[u.getID()] && u.show(), u.refresh();
        });
      }), this.hidenEdge = {};
      var a = this.graph;
      if (a.get("enabledStack") && this.enableStack) {
        var i = {
          before: {
            nodes: [],
            edges: [],
            combos: []
          },
          after: {
            nodes: [],
            edges: [],
            combos: []
          }
        };
        this.get("beforeDragNodes").forEach(function(o) {
          i.before.nodes.push(o);
        }), this.targets.forEach(function(o) {
          var s = o.getModel(), u = s.x, f = s.y, l = s.id;
          i.after.nodes.push({
            x: u,
            y: f,
            id: l
          });
        }), a.pushStack("update", nr(i));
      }
      a.emit("dragnodeend", {
        items: this.targets,
        targetItem: null
      }), this.point = {}, this.origin = null, this.originPoint = {}, this.targets.length = 0, this.targetCombo = null;
    }
  },
  /**
   * 拖动过程中将节点放置到 combo 上
   * @param evt
   */
  onDropCombo: function(e) {
    var t = e.item;
    if (this.currentShouldEnd = this.shouldEnd(e, t, this), this.updatePositions(e, !this.currentShouldEnd), !(!this.currentShouldEnd || !this.validationCombo(t))) {
      var n = this.graph;
      if (this.comboActiveState && n.setItemState(t, this.comboActiveState, !1), this.targetCombo = t, this.onlyChangeComboSize)
        n.updateCombos();
      else {
        var a = t.getModel();
        this.targets.map(function(i) {
          var o = i.getModel();
          o.comboId !== a.id && n.updateComboTree(i, a.id);
        }), n.updateCombo(t);
      }
      n.emit("dragnodeend", {
        items: this.targets,
        targetItem: this.targetCombo
      });
    }
  },
  onDropCanvas: function(e) {
    var t = this.graph;
    this.currentShouldEnd = this.shouldEnd(e, void 0, this), this.updatePositions(e, !this.currentShouldEnd), !(!this.targets || this.targets.length === 0 || !this.currentShouldEnd) && (this.onlyChangeComboSize ? this.updateParentCombos() : this.targets.map(function(n) {
      var a = n.getModel();
      a.comboId && t.updateComboTree(n);
    }));
  },
  /**
   * 拖动放置到某个 combo 中的子 node 上
   * @param evt
   */
  onDropNode: function(e) {
    if (!(!this.targets || this.targets.length === 0)) {
      var t = this, n = e.item, a = t.graph, i = n.getModel().comboId, o = i ? a.findById(i) : void 0;
      if (this.currentShouldEnd = this.shouldEnd(e, o, this), this.updatePositions(e, !this.currentShouldEnd), !!this.currentShouldEnd) {
        if (this.onlyChangeComboSize)
          this.updateParentCombos();
        else if (i) {
          var s = a.findById(i);
          t.comboActiveState && a.setItemState(s, t.comboActiveState, !1), this.targets.map(function(u) {
            var f = u.getModel();
            i !== f.comboId && a.updateComboTree(u, i);
          }), a.updateCombo(s);
        } else
          this.targets.map(function(u) {
            var f = u.getModel();
            f.comboId && a.updateComboTree(u);
          });
        a.emit("dragnodeend", {
          items: this.targets,
          targetItem: n
        });
      }
    }
  },
  /**
   * 将节点拖入到 Combo 中
   * @param evt
   */
  onDragEnter: function(e) {
    var t = e.item;
    if (this.validationCombo(t)) {
      var n = this.graph;
      this.comboActiveState && n.setItemState(t, this.comboActiveState, !0);
    }
  },
  /**
   * 将节点从 Combo 中拖出
   * @param evt
   */
  onDragLeave: function(e) {
    var t = e.item;
    if (this.validationCombo(t)) {
      var n = this.graph;
      this.comboActiveState && n.setItemState(t, this.comboActiveState, !1);
    }
  },
  updatePositions: function(e, t) {
    var n = this;
    !this.targets || this.targets.length === 0 || (this.get("enableDelegate") ? this.enableDebounce ? this.debounceUpdate({
      targets: this.targets,
      graph: this.graph,
      point: this.point,
      origin: this.origin,
      evt: e,
      updateEdge: this.get("updateEdge"),
      onlyChangeComboSize: this.onlyChangeComboSize,
      updateParentCombos: this.updateParentCombos
    }) : t || this.targets.map(function(a) {
      return n.update(a, e);
    }) : this.targets.map(function(a) {
      return n.update(a, e, t);
    }));
  },
  /**
   * 更新节点
   * @param item 拖动的节点实例
   * @param evt
   */
  update: function(e, t, n) {
    var a = this.origin, i = e.get("model"), o = e.get("id");
    this.point[o] || (this.point[o] = {
      x: i.x || 0,
      y: i.y || 0
    });
    var s = t.x - a.x + this.point[o].x, u = t.y - a.y + this.point[o].y;
    n && (s += a.x - t.x, u += a.y - t.y);
    var f = {
      x: s,
      y: u
    };
    this.get("updateEdge") ? this.graph.updateItem(e, f, !1) : e.updatePosition(f);
  },
  /**
   * 限流更新节点
   * @param item 拖动的节点实例
   * @param evt
   */
  debounceUpdate: Jg(function(r) {
    var e = r.targets, t = r.graph, n = r.point, a = r.origin, i = r.evt, o = r.updateEdge, s = r.onlyChangeComboSize, u = r.updateParentCombos;
    e.map(function(f) {
      var l = f.get("model"), c = f.get("id");
      n[c] || (n[c] = {
        x: l.x || 0,
        y: l.y || 0
      });
      var h = i.x - a.x + n[c].x, d = i.y - a.y + n[c].y, v = {
        x: h,
        y: d
      };
      o ? t.updateItem(f, v, !1) : f.updatePosition(v);
    }), s && u(t, e);
  }, 50, !0),
  /**
   * 更新拖动元素时的delegate
   * @param {Event} evt 事件句柄
   * @param {number} x 拖动单个元素时候的x坐标
   * @param {number} y 拖动单个元素时候的y坐标
   */
  updateDelegate: function(e) {
    var t = this.graph;
    if (this.delegateRect) {
      var h = e.x - this.origin.x + this.originPoint.minX, d = e.y - this.origin.y + this.originPoint.minY;
      this.delegateRect.attr({
        x: h,
        y: d
      });
    } else {
      var n = t.get("group"), a = Mr({}, mf.delegateStyle, this.delegateStyle), i = this.calculationGroupPosition(e), o = i.x, s = i.y, u = i.width, f = i.height, l = i.minX, c = i.minY;
      this.originPoint = {
        x: o,
        y: s,
        width: u,
        height: f,
        minX: l,
        minY: c
      }, this.delegateRect = n.addShape("rect", {
        attrs: B({
          width: u,
          height: f,
          x: o,
          y: s
        }, a),
        name: "rect-delegate-shape"
      }), this.delegate = this.delegateRect, this.delegateRect.set("capture", !1);
    }
  },
  /**
   * 计算delegate位置，包括左上角左边及宽度和高度
   * @memberof ItemGroup
   * @return {object} 计算出来的delegate坐标信息及宽高
   */
  calculationGroupPosition: function(e) {
    var t = this.targets;
    t.length === 0 && t.push(e.item);
    for (var n = 1 / 0, a = -1 / 0, i = 1 / 0, o = -1 / 0, s = 0; s < t.length; s++) {
      var u = t[s], f = u.getBBox(), l = f.minX, c = f.minY, h = f.maxX, d = f.maxY;
      l < n && (n = l), c < i && (i = c), h > a && (a = h), d > o && (o = d);
    }
    var v = Math.floor(n), p = Math.floor(i), g = Math.ceil(a) - Math.floor(n), y = Math.ceil(o) - Math.floor(i);
    return {
      x: v,
      y: p,
      width: g,
      height: y,
      minX: n,
      minY: i
    };
  },
  /**
   * updates the parent combos' size and position
   * @param paramGraph param for debounce function, where 'this' is not available
   * @param paramTargets param for debounce function, where 'this' is not available
   */
  updateParentCombos: function(e, t) {
    var n = e || this.graph, a = t || this.targets, i = {};
    a == null || a.forEach(function(o) {
      var s = o.getModel().comboId;
      s && (i[s] = n.findById(s));
    }), Object.values(i).forEach(function(o) {
      o && n.updateCombo(o);
    });
  }
}, aue = {
  getDefaultCfg: function() {
    return {
      // 可选 mouseenter || click
      // 选择 click 会监听 touch，mouseenter 不会监听
      trigger: "mouseenter",
      activeState: "active",
      inactiveState: "inactive",
      resetSelected: !1,
      shouldUpdate: function() {
        return !0;
      }
    };
  },
  getEvents: function() {
    return this.get("trigger") === "mouseenter" ? {
      "node:mouseenter": "setAllItemStates",
      "combo:mouseenter": "setAllItemStates",
      "node:mouseleave": "clearActiveState",
      "combo:mouseleave": "clearActiveState"
    } : {
      "node:click": "setAllItemStates",
      "combo:click": "setAllItemStates",
      "canvas:click": "clearActiveState",
      "node:touchstart": "setOnTouchStart",
      "combo:touchstart": "setOnTouchStart",
      "canvas:touchstart": "clearOnTouchStart"
    };
  },
  setOnTouchStart: function(e) {
    var t = this;
    try {
      var n = e.originalEvent.touches, a = n[0], i = n[1];
      if (a && i)
        return;
      e.preventDefault();
    } catch {
      console.warn("Touch original event not exist!");
    }
    t.setAllItemStates(e);
  },
  clearOnTouchStart: function(e) {
    var t = this;
    try {
      var n = e.originalEvent.touches, a = n[0], i = n[1];
      if (a && i)
        return;
      e.preventDefault();
    } catch {
      console.warn("Touch original event not exist!");
    }
    t.clearActiveState(e);
  },
  setAllItemStates: function(e) {
    clearTimeout(this.timer), this.throttleSetAllItemStates(e, this);
  },
  clearActiveState: function(e) {
    var t = this;
    this.timer = setTimeout(function() {
      t.throttleClearActiveState(e, t);
    }, 50);
  },
  throttleSetAllItemStates: yh(function(r, e) {
    var t = r.item, n = e.graph;
    if (!(!n || n.destroyed) && (e.item = t, !!e.shouldUpdate(r.item, {
      event: r,
      action: "activate"
    }, e))) {
      for (var a = e.activeState, i = e.inactiveState, o = n.getNodes(), s = n.getCombos(), u = n.getEdges(), f = n.get("vedges"), l = o.length, c = s.length, h = u.length, d = f.length, v = e.inactiveItems || {}, p = e.activeItems || {}, g = 0; g < l; g++) {
        var y = o[g], m = y.getID(), b = y.hasState("selected");
        e.resetSelected && b && n.setItemState(y, "selected", !1), p[m] && (n.setItemState(y, a, !1), delete p[m]), i && !v[m] && (n.setItemState(y, i, !0), v[m] = y);
      }
      for (var g = 0; g < c; g++) {
        var E = s[g], x = E.getID(), b = E.hasState("selected");
        e.resetSelected && b && n.setItemState(E, "selected", !1), p[x] && (n.setItemState(E, a, !1), delete p[x]), i && !v[x] && (n.setItemState(E, i, !0), v[x] = E);
      }
      for (var g = 0; g < h; g++) {
        var w = u[g], _ = w.getID();
        p[_] && (n.setItemState(w, a, !1), delete p[_]), i && !v[_] && (n.setItemState(w, i, !0), v[_] = w);
      }
      for (var g = 0; g < d; g++) {
        var M = f[g], A = M.getID();
        p[A] && (n.setItemState(M, a, !1), delete p[A]), i && !v[A] && (n.setItemState(M, i, !0), v[A] = M);
      }
      if (t && !t.destroyed) {
        i && (n.setItemState(t, i, !1), delete v[t.getID()]), p[t.getID()] || (n.setItemState(t, a, !0), p[t.getID()] = t);
        for (var S = t.getEdges(), T = S.length, g = 0; g < T; g++) {
          var w = S[g], _ = w.getID(), C = void 0;
          w.getSource() === t ? C = w.getTarget() : C = w.getSource();
          var O = C.getID();
          i && v[O] && (n.setItemState(C, i, !1), delete v[O]), p[O] || (n.setItemState(C, a, !0), p[O] = C), v[_] && (n.setItemState(w, i, !1), delete v[_]), p[_] || (n.setItemState(w, a, !0), p[_] = w), w.toFront();
        }
      }
      e.activeItems = p, e.inactiveItems = v, n.emit("afteractivaterelations", {
        item: r.item,
        action: "activate"
      });
    }
  }, 50, {
    trailing: !0,
    leading: !0
  }),
  throttleClearActiveState: yh(function(r, e) {
    var t = e.get("graph");
    if (!(!t || t.destroyed) && e.shouldUpdate(r.item, {
      event: r,
      action: "deactivate"
    }, e)) {
      var n = e.activeState, a = e.inactiveState, i = e.activeItems || {}, o = e.inactiveItems || {};
      Object.values(i).filter(function(s) {
        return !s.destroyed;
      }).forEach(function(s) {
        t.clearItemStates(s, n);
      }), Object.values(o).filter(function(s) {
        return !s.destroyed;
      }).forEach(function(s) {
        t.clearItemStates(s, a);
      }), e.activeItems = {}, e.inactiveItems = {}, t.emit("afteractivaterelations", {
        item: r.item || e.get("item"),
        action: "deactivate"
      });
    }
  }, 50, {
    trailing: !0,
    leading: !0
  })
};
var jc = Math.min, Y2 = Math.max, H2 = Math.abs, K2 = "shift", iue = ["drag", "shift", "ctrl", "alt", "control"];
const oue = {
  getDefaultCfg: function() {
    return {
      brushStyle: {
        fill: "#EEF6FF",
        fillOpacity: 0.4,
        stroke: "#DDEEFE",
        lineWidth: 1
      },
      onSelect: function() {
      },
      onDeselect: function() {
      },
      selectedState: "selected",
      trigger: K2,
      includeEdges: !0,
      includeCombos: !1,
      selectedEdges: [],
      selectedNodes: [],
      selectedCombos: []
    };
  },
  getEvents: function() {
    return iue.indexOf(this.trigger.toLowerCase()) > -1 || (this.trigger = K2, console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")), this.trigger === "drag" ? {
      dragstart: "onMouseDown",
      drag: "onMouseMove",
      dragend: "onMouseUp",
      "canvas:click": "clearStates"
    } : {
      dragstart: "onMouseDown",
      drag: "onMouseMove",
      dragend: "onMouseUp",
      "canvas:click": "clearStates",
      keyup: "onKeyUp",
      keydown: "onKeyDown"
    };
  },
  onMouseDown: function(e) {
    var t = e.item, n = this.brush;
    t || this.trigger !== "drag" && !this.keydown || (this.selectedNodes && this.selectedNodes.length !== 0 && this.clearStates(), n || (n = this.createBrush()), this.originPoint = {
      x: e.canvasX,
      y: e.canvasY
    }, n.attr({
      width: 0,
      height: 0
    }), n.show(), this.dragging = !0);
  },
  onMouseMove: function(e) {
    this.dragging && (this.trigger !== "drag" && !this.keydown || this.updateBrush(e));
  },
  onMouseUp: function(e) {
    this.graph, !(!this.brush && !this.dragging) && (this.trigger !== "drag" && !this.keydown || (this.brush.remove(!0), this.brush = null, this.getSelectedNodes(e), this.dragging = !1));
  },
  clearStates: function() {
    var e = this, t = e.graph, n = e.selectedState, a = t.findAllByState("node", n), i = t.findAllByState("edge", n), o = t.findAllByState("combo", n);
    a.forEach(function(s) {
      return t.setItemState(s, n, !1);
    }), i.forEach(function(s) {
      return t.setItemState(s, n, !1);
    }), o.forEach(function(s) {
      return t.setItemState(s, n, !1);
    }), this.selectedNodes = [], this.selectedEdges = [], this.selectedCombos = [], this.onDeselect && this.onDeselect(this.selectedNodes, this.selectedEdges, this.selectedCombos), t.emit("nodeselectchange", {
      selectedItems: {
        nodes: [],
        edges: [],
        combos: []
      },
      select: !1
    });
  },
  isBBoxCenterInRect: function(e, t, n, a, i) {
    var o = e.getBBox();
    return o.centerX >= t && o.centerX <= n && o.centerY >= a && o.centerY <= i;
  },
  getSelectedNodes: function(e) {
    var t = this, n = this, a = n.graph, i = n.originPoint, o = n.shouldUpdate, s = n.isBBoxCenterInRect, u = this.selectedState, f = {
      x: e.x,
      y: e.y
    }, l = a.getPointByCanvas(i.x, i.y), c = jc(f.x, l.x), h = Y2(f.x, l.x), d = jc(f.y, l.y), v = Y2(f.y, l.y), p = [], g = [];
    a.getNodes().forEach(function(b) {
      if (b.isVisible() && // 隐藏节点不能被选中
      s(b, c, h, d, v) && o(b, "select", t)) {
        p.push(b);
        var E = b.getModel();
        g.push(E.id), a.setItemState(b, u, !0);
      }
    });
    var y = [];
    this.includeEdges && p.forEach(function(b) {
      var E = b.getOutEdges();
      E.forEach(function(x) {
        if (x.isVisible()) {
          var w = x.getModel(), _ = w.source, M = w.target;
          g.includes(_) && g.includes(M) && o(x, "select", t) && (y.push(x), a.setItemState(x, t.selectedState, !0));
        }
      });
    });
    var m = [];
    this.includeCombos && a.getCombos().forEach(function(b) {
      if (b.isVisible() && // 隐藏节点不能被选中
      s(b, c, h, d, v) && o(b, "select", t)) {
        m.push(b);
        var E = b.getModel();
        g.push(E.id), a.setItemState(b, u, !0);
      }
    }), this.selectedEdges = y, this.selectedNodes = p, this.selectedCombos = m, this.onSelect && this.onSelect(p, y, m), a.emit("nodeselectchange", {
      selectedItems: {
        nodes: p,
        edges: y,
        combos: m
      },
      select: !0
    });
  },
  createBrush: function() {
    var e = this, t = e.graph.get("canvas").addShape("rect", {
      attrs: e.brushStyle,
      capture: !1,
      name: "brush-shape"
    });
    return this.brush = t, this.delegate = t, t;
  },
  updateBrush: function(e) {
    var t = this.originPoint;
    this.brush.attr({
      width: H2(e.canvasX - t.x),
      height: H2(e.canvasY - t.y),
      x: jc(e.canvasX, t.x),
      y: jc(e.canvasY, t.y)
    });
  },
  onKeyDown: function(e) {
    var t = e.key;
    if (t) {
      var n = this.trigger.toLowerCase(), a = t.toLowerCase();
      a === n || a === "control" && n === "ctrl" || a === "ctrl" && n === "control" ? this.keydown = !0 : this.keydown = !1;
    }
  },
  onKeyUp: function() {
    this.brush && (this.brush.remove(!0), this.brush = null, this.dragging = !1), this.keydown = !1;
  }
};
var q2 = "shift", sue = ["shift", "ctrl", "alt", "control"];
const uue = {
  getDefaultCfg: function() {
    return {
      multiple: !0,
      trigger: q2,
      selectedState: "selected",
      selectNode: !0,
      selectEdge: !1,
      selectCombo: !0
    };
  },
  getEvents: function() {
    var e = this;
    return sue.indexOf(e.trigger.toLowerCase()) > -1 || (e.trigger = q2, console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")), e.multiple ? {
      "node:click": "onClick",
      "combo:click": "onClick",
      "edge:click": "onClick",
      "canvas:click": "onCanvasClick",
      keyup: "onKeyUp",
      keydown: "onKeyDown"
    } : {
      "node:click": "onClick",
      "combo:click": "onClick",
      "edge:click": "onClick",
      "canvas:click": "onCanvasClick"
    };
  },
  onClick: function(e) {
    var t = this, n = e.item;
    if (!(!n || n.destroyed)) {
      var a = n.getType(), i = t.graph, o = t.keydown, s = t.multiple, u = t.shouldUpdate, f = t.shouldBegin;
      if (f(e, t)) {
        if (!o || !s) {
          var l = i.findAllByState("node", t.selectedState).concat(i.findAllByState("edge", t.selectedState)).concat(i.findAllByState("combo", t.selectedState));
          Se(l, function(p) {
            p !== n && i.setItemState(p, t.selectedState, !1);
          });
        }
        var c = function() {
          switch (a) {
            case "node":
              return t.selectNode;
            case "edge":
              return t.selectEdge;
            case "combo":
              return t.selectCombo;
            default:
              return !1;
          }
        }();
        if (!c) {
          var h = i.findAllByState("node", t.selectedState), d = i.findAllByState("edge", t.selectedState), v = i.findAllByState("combo", t.selectedState);
          i.emit("nodeselectchange", {
            selectedItems: {
              nodes: h,
              edges: d,
              combos: v
            },
            select: !1
          });
          return;
        }
        if (n.hasState(t.selectedState)) {
          u(e, t) && i.setItemState(n, t.selectedState, !1);
          var h = i.findAllByState("node", t.selectedState), d = i.findAllByState("edge", t.selectedState), v = i.findAllByState("combo", t.selectedState);
          i.emit("nodeselectchange", {
            target: n,
            selectedItems: {
              nodes: h,
              edges: d,
              combos: v
            },
            select: !1
          });
        } else {
          u(e, t) && i.setItemState(n, t.selectedState, !0);
          var h = i.findAllByState("node", t.selectedState), d = i.findAllByState("edge", t.selectedState), v = i.findAllByState("combo", t.selectedState);
          i.emit("nodeselectchange", {
            target: n,
            selectedItems: {
              nodes: h,
              edges: d,
              combos: v
            },
            select: !0
          });
        }
      }
    }
  },
  onCanvasClick: function(e) {
    var t = this, n = this, a = n.graph, i = n.shouldBegin;
    if (i(e, this)) {
      var o = a.findAllByState("node", this.selectedState);
      Se(o, function(f) {
        a.setItemState(f, t.selectedState, !1);
      });
      var s = a.findAllByState("edge", this.selectedState);
      Se(s, function(f) {
        a.setItemState(f, t.selectedState, !1);
      });
      var u = a.findAllByState("combo", this.selectedState);
      Se(u, function(f) {
        a.setItemState(f, t.selectedState, !1);
      }), a.emit("nodeselectchange", {
        selectedItems: {
          nodes: [],
          edges: [],
          combos: []
        },
        select: !1
      });
    }
  },
  onKeyDown: function(e) {
    var t = this, n = e.key;
    n && (n.toLowerCase() === this.trigger.toLowerCase() || n.toLowerCase() === "control" ? t.keydown = !0 : t.keydown = !1);
  },
  onKeyUp: function() {
    var e = this;
    e.keydown = !1;
  }
};
var fue = io, $c = 0.05;
const lue = {
  getDefaultCfg: function() {
    return this.isFireFox = KD() === "firefox", {
      sensitivity: 2,
      minZoom: void 0,
      maxZoom: void 0,
      enableOptimize: !1,
      optimizeZoom: 0.1,
      fixSelectedItems: {
        fixAll: !1,
        fixLineWidth: !1,
        fixLabel: !1,
        fixState: "selected"
      },
      animate: !1,
      animateCfg: {
        duration: 500
      }
    };
  },
  getEvents: function() {
    var e = this.fixSelectedItems;
    return e.fixState || (e.fixState = "selected"), e.fixAll && (e.fixLineWidth = !0, e.fixLabel = !0), {
      wheel: "onWheel",
      touchstart: "onTouchStart",
      touchmove: "onTouchMove",
      touchend: "onTouchEnd"
    };
  },
  onTouchStart: function(e) {
    var t = e.originalEvent.touches, n = t[0], a = t[1];
    e.preventDefault(), a && (this.shouldBegin && !this.shouldBegin(e, this) || (this.startPoint = {
      pageX: n.pageX,
      pageY: n.pageY
    }, this.moveable = !0, a && (this.endPoint = {
      pageX: a.pageX,
      pageY: a.pageY
    }), this.originScale = this.graph.getZoom() || this.currentScale || 1));
  },
  onTouchMove: function(e) {
    if (this.moveable) {
      e.preventDefault();
      var t = e.originalEvent.touches, n = t[0], a = t[1];
      if (a) {
        this.endPoint || (this.endPoint = {
          pageX: a.pageX,
          pageY: a.pageY
        });
        var i = function(p, g) {
          return Math.hypot(g.x - p.x, g.y - p.y);
        }, o = i({
          x: n.pageX,
          y: n.pageY
        }, {
          x: a.pageX,
          y: a.pageY
        }) / i({
          x: this.startPoint.pageX,
          y: this.startPoint.pageY
        }, {
          x: this.endPoint.pageX,
          y: this.endPoint.pageY
        }), s = this.originScale * o;
        this.currentScale = s;
        var u = this.get("minZoom") || this.graph.get("minZoom"), f = this.get("maxZoom") || this.graph.get("maxZoom");
        if (!(s > f || s < u)) {
          var l = this.get("animate"), c = this.get("animateCfg"), h = this.graph.get("canvas"), d = h.getPointByClient(e.clientX, e.clientY);
          this.graph.zoomTo(s, {
            x: d.x,
            y: d.y
          }, l, c), this.graph.emit("wheelzoom", e);
        }
      }
    }
  },
  onTouchEnd: function() {
    this.moveable = !1, this.endPoint = null;
  },
  onWheel: function(e) {
    var t = this, n = this, a = n.graph, i = n.fixSelectedItems;
    if (!(this.shouldBegin && !this.shouldBegin(e, this)) && this.shouldUpdate(e, this)) {
      e.preventDefault();
      var o = a.get("canvas"), s = o.getPointByClient(e.clientX, e.clientY), u = this.get("sensitivity"), f = a.getZoom(), l = f, c = f;
      this.isFireFox ? e.deltaY > 0 || e.wheelDelta < 0 ? l = 1 - $c * u : l = 1 / (1 - $c * u) : e.wheelDelta < 0 ? l = 1 - $c * u : l = 1 / (1 - $c * u), c = f * l;
      var h = this.get("minZoom") || a.get("minZoom"), d = this.get("maxZoom") || a.get("maxZoom");
      c > d ? c = d : c < h && (c = h);
      var v = this.get("enableOptimize");
      if (v) {
        var p = this.get("optimizeZoom"), g = this.get("optimized"), y = a.getNodes(), m = a.getEdges(), b = y.length, E = m.length;
        if (!g) {
          for (var x = 0; x < b; x++) {
            var w = y[x];
            if (!w.destroyed)
              for (var _ = w.get("group").get("children"), M = _.length, A = 0; A < M; A++) {
                var S = _[A];
                !S.destoryed && !S.get("isKeyShape") && (S.set("ori-visibility", S.get("ori-visibility") || S.get("visible")), S.hide());
              }
          }
          for (var T = 0; T < E; T++)
            for (var C = m[T], _ = C.get("group").get("children"), M = _.length, A = 0; A < M; A++) {
              var S = _[A];
              S.set("ori-visibility", S.get("ori-visibility") || S.get("visible")), S.hide();
            }
          this.set("optimized", !0);
        }
        clearTimeout(this.get("timeout"));
        var O = setTimeout(function() {
          var rt = a.getZoom(), ie = t.get("optimized");
          if (ie) {
            t.set("optimized", !1);
            for (var D = 0; D < b; D++) {
              var _e = y[D], Fe = _e.get("group").get("children"), ge = Fe.length;
              if (rt < p) {
                var We = _e.getKeyShape(), Xe = We.get("ori-visibility");
                We.set("ori-visibility", void 0), Xe && We.show();
              } else
                for (var Ke = 0; Ke < ge; Ke++) {
                  var Ze = Fe[Ke], Xe = Ze.get("ori-visibility");
                  Ze.set("ori-visibility", void 0), !Ze.get("visible") && Xe && Xe && Ze.show();
                }
            }
            for (var ht = 0; ht < E; ht++) {
              var It = m[ht], Fe = It.get("group").get("children"), ge = Fe.length;
              if (rt < p) {
                var We = It.getKeyShape(), Xe = We.get("ori-visibility");
                We.set("ori-visibility", void 0), Xe && We.show();
              } else
                for (var Ke = 0; Ke < ge; Ke++) {
                  var Ze = Fe[Ke];
                  if (!Ze.get("visible")) {
                    var Xe = Ze.get("ori-visibility");
                    Ze.set("ori-visibility", void 0), Xe && Ze.show();
                  }
                }
            }
          }
        }, 100);
        this.set("timeout", O);
      }
      if (f <= 1) {
        var L = void 0, R = void 0;
        if (i.fixAll || i.fixLineWidth || i.fixLabel) {
          L = a.findAllByState("node", i.fixState), R = a.findAllByState("edge", i.fixState);
          for (var P = f / c, z = L.length, V = 0; V < z; V++) {
            var w = L[V], N = w.getContainer(), F = w.getModel(), q = w.getOriginStyle(), te = w.getStateStyle(i.fixState), re = w.get("shapeFactory").getShape(F.type).getStateStyle(i.fixState, w)[i.fixState];
            if (i.fixAll) {
              if (c <= 1) {
                var J = nr(N.getMatrix());
                J || (J = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
                var ye = w.getModel(), Be = ye.x, Pe = ye.y;
                J = fue(J, [["t", -Be, -Pe], ["s", P, P], ["t", Be, Pe]]), N.setMatrix(J);
              }
            } else
              for (var _ = N.get("children"), M = _.length, A = 0; A < M; A++) {
                var S = _[A], et = void 0, ut = void 0;
                if (i.fixLabel) {
                  var at = S.get("type");
                  if (at === "text") {
                    et = S.attr("fontSize") || 12;
                    var At = te[S.get("name")], xt = re[S.get("name")], lr = At ? At.fontSize : 12, Rt = xt ? xt.fontSize : 12, Wt = lr || Rt || 12;
                    if (c <= 1 && S.attr("fontSize", Wt / c), ut)
                      break;
                  }
                }
                if (i.fixLineWidth && S.get("isKeyShape")) {
                  ut = S.attr("lineWidth") || 0;
                  var vr = te.lineWidth || re.lineWidth || q.lineWidth || 0;
                  if (c <= 1 && S.attr("lineWidth", vr / c), et)
                    break;
                }
              }
          }
          for (var cr = R.length, jt = 0; jt < cr; jt++)
            for (var C = R[jt], N = C.getContainer(), _ = N.get("children"), F = C.getModel(), te = C.getStateStyle(i.fixState), re = C.get("shapeFactory").getShape(F.type).getStateStyle(i.fixState, C)[i.fixState], M = _.length, A = 0; A < M; A++) {
              var S = _[A], et = void 0, ut = void 0;
              if (i.fixLabel || i.fixAll) {
                var at = S.get("type");
                if (at === "text") {
                  et = S.attr("fontSize") || 12;
                  var At = te[S.get("name")], xt = re[S.get("name")], lr = At ? At.fontSize : 12, Rt = xt ? xt.fontSize : 12, Wt = lr || Rt || 12;
                  if (c <= 1 && S.attr("fontSize", Wt / c), ut)
                    break;
                }
              }
              if ((i.fixLineWidth || i.fixAll) && S.get("isKeyShape")) {
                ut = S.attr("lineWidth") || 0;
                var vr = te.lineWidth || re.lineWidth || 1;
                if (c <= 1 && S.attr("lineWidth", vr / c), et)
                  break;
              }
            }
        }
      }
      var or = this.get("animate"), Wr = this.get("animateCfg");
      a.zoomTo(c, {
        x: s.x,
        y: s.y
      }, or, Wr), a.emit("wheelzoom", e);
    }
  }
}, nL = {
  onMouseEnter: function(e) {
    var t = e.item;
    this.currentTarget = t, this.showTooltip(e), this.graph.emit("tooltipchange", {
      item: e.item,
      action: "show"
    });
  },
  onMouseMove: function(e) {
    if (!this.shouldUpdate(e, this)) {
      this.hideTooltip();
      return;
    }
    !this.currentTarget || e.item !== this.currentTarget || this.updatePosition(e);
  },
  onMouseLeave: function(e) {
    this.shouldEnd(e, this) && (this.hideTooltip(), this.graph.emit("tooltipchange", {
      item: this.currentTarget,
      action: "hide"
    }), this.currentTarget = null);
  },
  showTooltip: function(e) {
    var t = this.container;
    if (!(!e.item || e.item.destroyed)) {
      t || (t = this.createTooltip(this.graph.get("canvas")), this.container = t);
      var n = this.formatText(e.item.get("model"), e);
      t.innerHTML = n, Wu(this.container, {
        visibility: "visible"
      }), this.updatePosition(e);
    }
  },
  hideTooltip: function() {
    Wu(this.container, {
      visibility: "hidden"
    });
  },
  updatePosition: function(e) {
    var t = this.get("shouldBegin"), n = this, a = n.width, i = n.height, o = n.container, s = n.graph;
    if (!t(e, this)) {
      Wu(o, {
        visibility: "hidden"
      });
      return;
    }
    var u = s.getPointByClient(e.clientX, e.clientY), f = s.getCanvasByPoint(u.x, u.y), l = f.x, c = f.y, h = o.getBoundingClientRect();
    l > a / 2 ? l -= h.width : l += this.offset, c > i / 2 ? c -= h.height : c += this.offset;
    var d = "".concat(l, "px"), v = "".concat(c, "px");
    Wu(this.container, {
      left: d,
      top: v,
      visibility: "visible"
    });
  },
  createTooltip: function(e) {
    var t = e.get("el");
    t.style.position = "relative";
    var n = cg('<div class="g6-tooltip g6-'.concat(this.item, '-tooltip"></div>'));
    return t.parentNode.appendChild(n), Wu(n, {
      position: "absolute",
      visibility: "visible"
    }), this.width = e.get("width"), this.height = e.get("height"), this.container = n, this.graph.get("tooltips").push(n), n;
  }
}, cue = B({
  getDefaultCfg: function() {
    return {
      item: "node",
      offset: 12,
      formatText: function(t) {
        return t.label;
      }
    };
  },
  getEvents: function() {
    return {
      "node:mouseenter": "onMouseEnter",
      "node:mouseleave": "onMouseLeave",
      "node:mousemove": "onMouseMove",
      afterremoveitem: "onMouseLeave"
    };
  }
}, nL), hue = B({
  getDefaultCfg: function() {
    return {
      item: "edge",
      offset: 12,
      formatText: function(t) {
        return "source: ".concat(t.source, " target: ").concat(t.target);
      }
    };
  },
  getEvents: function() {
    return {
      "edge:mouseenter": "onMouseEnter",
      "edge:mouseleave": "onMouseLeave",
      "edge:mousemove": "onMouseMove",
      afterremoveitem: "onMouseLeave"
    };
  }
}, nL);
var Z2 = "click", due = ["click", "dblclick"];
const vue = {
  getDefaultCfg: function() {
    return {
      /**
       * 发生收缩/扩展变化时的回调
       */
      trigger: Z2,
      onChange: function() {
      }
    };
  },
  getEvents: function() {
    var e, t;
    return due.includes(this.trigger) ? t = this.trigger : (t = Z2, console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")), e = {}, e["node:".concat(t)] = "onNodeClick", // 支持移动端事件
    e.touchstart = "onNodeClick", e;
  },
  onNodeClick: function(e) {
    var t = this;
    if (this.trigger === "click") {
      if (this.timer) {
        clearTimeout(this.timer), this.timer = 0;
        return;
      }
      this.timer = setTimeout(function() {
        t.toggle(e), clearTimeout(t.timer), t.timer = 0;
      }, 200);
    } else
      this.toggle(e);
  },
  toggle: function(e) {
    var t = e.item;
    if (t) {
      var n = this.graph.findDataById(t.get("id"));
      if (n) {
        var a = n.children;
        if (!(!a || a.length === 0)) {
          var i = !n.collapsed;
          this.shouldBegin(e, i, this) && (n.collapsed = i, t.getModel().collapsed = i, this.graph.emit("itemcollapsed", {
            item: e.item,
            collapsed: i
          }), this.shouldUpdate(e, i, this) && (this.onChange(t, i, this), this.graph.layout()));
        }
      }
    }
  }
};
var pue = co.calculationItemsBBox, gue = function r(e, t) {
  if (t(e) !== !1 && e) {
    var n = e.get("combos");
    if (n.length === 0)
      return !1;
    Se(n, function(a) {
      r(a, t);
    });
  }
};
const yue = {
  getDefaultCfg: function() {
    return {
      enableDelegate: !1,
      delegateStyle: {},
      // 拖动节点过程中是否只改变 Combo 的大小，而不改变其结构
      onlyChangeComboSize: !1,
      // 拖动过程中目标 combo 状态样式
      activeState: "",
      selectedState: "selected",
      enableStack: !0
    };
  },
  getEvents: function() {
    return {
      "combo:mousedown": "onMouseDown",
      "combo:dragstart": "onDragStart",
      "combo:drag": "onDrag",
      "combo:dragend": "onDragEnd",
      "combo:drop": "onDrop",
      "node:drop": "onNodeDrop",
      "combo:dragenter": "onDragEnter",
      "combo:dragleave": "onDragLeave"
    };
  },
  validationCombo: function(e) {
    var t = e.item;
    if (!t || t.destroyed || !this.shouldUpdate(e, this))
      return !1;
    var n = t.getType();
    return n === "combo";
  },
  onMouseDown: function(e) {
    this.origin = {
      x: e.x,
      y: e.y
    };
  },
  onDragStart: function(e) {
    var t = this, n = this.graph, a = e.item;
    if (this.currentShouldEnd = !0, !!this.validationCombo(e)) {
      this.targets = [];
      var i = n.findAllByState("combo", this.selectedState), o = a.get("id"), s = i.filter(function(f) {
        var l = f.get("id");
        return o === l;
      });
      s.length === 0 ? this.targets.push(a) : this.targets = i;
      var u = [];
      this.targets.forEach(function(f) {
        var l = f.getModel(), c = l.x, h = l.y, d = l.id;
        u.push({
          x: c,
          y: h,
          id: d
        });
      }), this.set("beforeDragItems", u), this.activeState && this.targets.map(function(f) {
        var l = f.getModel();
        if (l.parentId) {
          var c = n.findById(l.parentId);
          c && n.setItemState(c, t.activeState, !0);
        }
      }), this.point = {}, this.originPoint = {}, this.currentItemChildCombos = [], gue(a, function(f) {
        if (f.destroyed)
          return !1;
        var l = f.getModel();
        return t.currentItemChildCombos.push(l.id), !0;
      });
    }
  },
  onDrag: function(e) {
    var t = this;
    if (this.origin && this.validationCombo(e))
      if (this.enableDelegate)
        this.updateDelegate(e);
      else {
        if (this.activeState) {
          var n = this.graph, a = e.item, i = a.getModel(), o = n.getCombos(), s = a.getBBox(), u = s.centerX, f = s.centerY, l = s.width, c = o.filter(function(h) {
            var d = h.getModel();
            return i.parentId, d.id !== i.id && !t.currentItemChildCombos.includes(d.id);
          });
          c.map(function(h) {
            var d = h.getBBox(), v = d.centerX, p = d.centerY, g = d.width, y = u - v, m = f - p, b = 2 * Math.sqrt(y * y + m * m);
            l + g - b > 0.8 * l ? n.setItemState(h, t.activeState, !0) : n.setItemState(h, t.activeState, !1);
          });
        }
        Se(this.targets, function(h) {
          t.updateCombo(h, e);
        }), this.onlyChangeComboSize && this.updateParentCombos();
      }
  },
  updatePositions: function(e, t) {
    var n = this;
    (this.enableDelegate || t) && Se(this.targets, function(a) {
      n.updateCombo(a, e, t);
    });
  },
  onDrop: function(e) {
    var t = this, n = e.item;
    if (this.currentShouldEnd = this.shouldEnd(e, n, this), this.updatePositions(e, !this.currentShouldEnd), !(!this.currentShouldEnd || !n || !this.targets || n.destroyed)) {
      var a = this.graph, i = n.getModel();
      this.targets.map(function(o) {
        var s = o.getModel();
        s.parentId !== i.id ? (t.activeState && a.setItemState(n, t.activeState, !1), t.onlyChangeComboSize ? a.updateCombo(o) : a.updateComboTree(o, i.id, !1)) : a.updateCombo(n);
      }), this.end(n, e), this.endComparison = !0;
    }
  },
  onNodeDrop: function(e) {
    var t = this;
    if (!(!this.targets || this.targets.length === 0)) {
      var n = this.graph, a = e.item, i = a.getModel().comboId, o = i ? n.findById(i) : void 0;
      if (this.currentShouldEnd = this.shouldEnd(e, o, this), this.updatePositions(e, !this.currentShouldEnd), !!this.currentShouldEnd) {
        var s;
        if (i) {
          if (this.activeState) {
            var u = n.findById(i);
            n.setItemState(u, this.activeState, !1);
          }
          this.targets.map(function(f) {
            t.onlyChangeComboSize ? n.updateCombo(f) : i !== f.getID() && (s = n.findById(i), i !== f.getModel().parentId && n.updateComboTree(f, i, !1));
          });
        } else
          this.targets.map(function(f) {
            if (t.onlyChangeComboSize)
              n.updateCombo(f);
            else {
              var l = f.getModel();
              l.comboId && n.updateComboTree(f, void 0, !1);
            }
          });
        this.endComparison = !0, this.end(s, e);
      }
    }
  },
  onDragEnter: function(e) {
    if (this.origin && this.validationCombo(e)) {
      var t = e.item, n = this.graph;
      this.activeState && n.setItemState(t, this.activeState, !0);
    }
  },
  onDragLeave: function(e) {
    if (this.origin && this.validationCombo(e)) {
      var t = e.item, n = this.graph;
      this.activeState && n.setItemState(t, this.activeState, !1);
    }
  },
  onDragEnd: function(e) {
    if (!(!this.targets || this.targets.length === 0)) {
      var t = e.item;
      this.currentShouldEnd && this.updatePositions(e);
      var n = this.getParentCombo(t.getModel().parentId), a = this.graph;
      n && this.activeState && a.setItemState(n, this.activeState, !1), this.end(void 0, e);
    }
  },
  end: function(e, t) {
    var n = this;
    if (this.origin) {
      var a = this.graph;
      if (this.delegateShape) {
        var i = a.get("delegateGroup");
        i.clear(), this.delegateShape = null;
      }
      if (e && this.activeState && a.setItemState(e, this.activeState, !1), !e) {
        var o = a.get("enabledStack") && this.enableStack, s = {
          before: {
            nodes: [],
            edges: [],
            combos: [].concat(this.get("beforeDragItems"))
          },
          after: {
            nodes: [],
            edges: [],
            combos: []
          }
        };
        this.targets.map(function(u) {
          if (!n.onlyChangeComboSize)
            a.updateComboTree(u, void 0, o);
          else {
            a.updateCombo(u);
            var f = u.getModel(), l = f.x, c = f.y, h = f.id;
            s.after.combos.push({
              x: l,
              y: c,
              id: h
            }), a.pushStack("update", s);
          }
        });
      }
      this.point = [], this.origin = null, this.originPoint = null, this.targets.length = 0;
    }
  },
  /**
   * 遍历 comboTree，分别更新 node 和 combo
   * @param data
   * @param fn
   */
  traverse: function(e, t, n) {
    var a = this;
    if (n === void 0 && (n = {}), t(e, n) !== !1 && e) {
      var i = e.get("combos");
      Se(i, function(s) {
        a.traverse(s, t, n);
      });
      var o = e.get("nodes");
      Se(o, function(s) {
        a.traverse(s, t, n);
      });
    }
  },
  updateCombo: function(e, t, n) {
    this.updateSingleItem(e, t, n);
    var a = {};
    this.traverse(e, function(i, o) {
      return i.destroyed ? !1 : (i.getEdges().forEach(function(s) {
        return o[s.getID()] = s;
      }), !0);
    }, a), Object.values(a).forEach(function(i) {
      return i.refresh();
    });
  },
  /**
   *
   * @param item 当前正在拖动的元素
   * @param evt
   */
  updateSingleItem: function(e, t, n) {
    var a = this.origin, i = this.graph, o = e.getModel(), s = e.get("id");
    this.point[s] || (this.point[s] = {
      x: o.x,
      y: o.y
    });
    var u = t.x - a.x + this.point[s].x, f = t.y - a.y + this.point[s].y;
    n && (u += a.x - t.x, f += a.y - t.y), i.updateItem(e, {
      x: u,
      y: f
    }, !1);
  },
  /**
   * 根据 ID 获取父 Combo
   * @param parentId 父 Combo ID
   */
  getParentCombo: function(e) {
    var t = this.graph;
    if (e) {
      var n = t.findById(e);
      if (n)
        return n;
    }
  },
  updateDelegate: function(e) {
    var t = this.graph;
    if (this.delegateShape) {
      var h = e.x - this.origin.x + this.originPoint.minX, d = e.y - this.origin.y + this.originPoint.minY;
      this.delegateShape.attr({
        x: h,
        y: d
      });
    } else {
      var n = t.get("delegateGroup"), a = null;
      this.targets.length > 1 ? a = pue(this.targets) : a = this.targets[0].getBBox();
      var i = a.x, o = a.y, s = a.width, u = a.height, f = a.minX, l = a.minY;
      this.originPoint = {
        x: i,
        y: o,
        width: s,
        height: u,
        minX: f,
        minY: l
      };
      var c = B(B({}, mf.delegateStyle), this.delegateStyle);
      this.delegateShape = n.addShape("rect", {
        attrs: B({
          width: a.width,
          height: a.height,
          x: a.x,
          y: a.y
        }, c),
        name: "combo-delegate-shape"
      }), this.delegateShape.set("capture", !1), this.delegate = this.delegateShape;
    }
  },
  /**
   * updates the parent combos' size and position
   */
  updateParentCombos: function() {
    var e = this, t = e.graph, n = e.targets, a = {};
    n == null || n.forEach(function(i) {
      var o = i.getModel().parentId;
      o && (a[o] = t.findById(o));
    }), Object.values(a).forEach(function(i) {
      i && t.updateCombo(i);
    });
  }
};
var Q2 = "dblclick", mue = ["click", "dblclick"];
const bue = {
  getDefaultCfg: function() {
    return {
      trigger: Q2,
      relayout: !0
    };
  },
  getEvents: function() {
    var e, t;
    return mue.includes(this.trigger) ? t = this.trigger : (t = Q2, console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")), e = {}, e["combo:".concat(t)] = "onComboClick", e;
  },
  onComboClick: function(e) {
    var t = e.item, n = this, a = n.graph, i = n.relayout;
    if (!(!t || t.destroyed || t.getType() !== "combo")) {
      var o = t.getModel(), s = o.id;
      s && (a.collapseExpandCombo(s), i && a.get("layout") ? a.layout() : a.refreshPositions());
    }
  }
};
var Eue = co.isPolygonsIntersect, xue = co.pathToPoints, J2 = "shift", wue = ["drag", "shift", "ctrl", "alt", "control"], _ue = function(e, t) {
  var n, a = e.getKeyShape();
  if (e.get("type") === "path")
    n = xue(a.attr("path"));
  else {
    var i = a.getCanvasBBox();
    n = [[i.minX, i.minY], [i.maxX, i.minY], [i.maxX, i.maxY], [i.minX, i.maxY]];
  }
  return Eue(t, n);
};
const Mue = {
  getDefaultCfg: function() {
    return {
      delegateStyle: {
        fill: "#EEF6FF",
        fillOpacity: 0.4,
        stroke: "#DDEEFE",
        lineWidth: 1
      },
      onSelect: function() {
      },
      onDeselect: function() {
      },
      shouldDeselect: void 0,
      selectedState: "selected",
      trigger: J2,
      includeEdges: !0,
      selectedEdges: [],
      selectedNodes: []
      // multiple: false,
    };
  },
  getEvents: function() {
    return wue.indexOf(this.trigger.toLowerCase()) > -1 || (this.trigger = J2, console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")), this.trigger === "drag" ? {
      dragstart: "onDragStart",
      drag: "onDragMove",
      dragend: "onDragEnd",
      "canvas:click": "clearStates"
    } : {
      dragstart: "onDragStart",
      drag: "onDragMove",
      dragend: "onDragEnd",
      keyup: "onKeyUp",
      keydown: "onKeyDown",
      "canvas:click": "clearStates"
    };
  },
  onDragStart: function(e) {
    var t = this.lasso, n = e.item;
    n || this.trigger !== "drag" && !this.keydown || (this.selectedNodes && this.selectedNodes.length !== 0 && this.clearStates("dragstart"), t || (t = this.createLasso()), this.dragging = !0, this.originPoint = {
      x: e.x,
      y: e.y
    }, this.points.push(this.originPoint), t.show());
  },
  onDragMove: function(e) {
    this.dragging && (this.trigger !== "drag" && !this.keydown || (this.points.push({
      x: e.x,
      y: e.y
    }), this.updateLasso(e)));
  },
  onDragEnd: function(e) {
    !this.lasso && !this.dragging || this.trigger !== "drag" && !this.keydown || (this.points.push(this.originPoint), this.getSelectedItems(), this.lasso.remove(!0), this.lasso = null, this.points = [], this.dragging = !1);
  },
  getLassoPath: function() {
    var e = this.points, t = [];
    return e.length && (e.forEach(function(n, a) {
      a === 0 ? t.push(["M", n.x, n.y]) : t.push(["L", n.x, n.y]);
    }), t.push(["L", e[0].x, e[0].y])), t;
  },
  clearStates: function(e) {
    e === void 0 && (e = "canvas:click");
    var t = this, n = t.graph, a = t.selectedState, i = t.shouldDeselect, o = n.findAllByState("node", a), s = n.findAllByState("edge", a);
    (!i || i({
      action: e,
      nodes: o,
      edges: s
    })) && (o.forEach(function(u) {
      return n.setItemState(u, a, !1);
    }), s.forEach(function(u) {
      return n.setItemState(u, a, !1);
    })), this.onDeselect && this.onDeselect(this.selectedNodes, this.selectedEdges), this.selectedNodes = [], this.selectedEdges = [], n.emit("nodeselectchange", {
      selectedItems: {
        nodes: [],
        edges: []
      },
      select: !1
    });
  },
  getSelectedItems: function() {
    var e = this, t = this, n = t.graph, a = t.shouldUpdate, i = this.points.map(function(l) {
      return [n.getCanvasByPoint(l.x, l.y).x, n.getCanvasByPoint(l.x, l.y).y];
    }), o = this.selectedState, s = [], u = [];
    n.getNodes().forEach(function(l) {
      if (l.isVisible() && _ue(l, i) && a(l, "select", e)) {
        s.push(l);
        var c = l.getModel();
        u.push(c.id), n.setItemState(l, o, !0);
      }
    });
    var f = [];
    this.includeEdges && s.forEach(function(l) {
      var c = l.getOutEdges();
      c.forEach(function(h) {
        if (h.isVisible()) {
          var d = h.getModel(), v = d.source, p = d.target;
          u.includes(v) && u.includes(p) && a(h, "select", e) && (f.push(h), n.setItemState(h, e.selectedState, !0));
        }
      });
    }), this.selectedEdges = f, this.selectedNodes = s, this.onSelect && this.onSelect(s, f), n.emit("nodeselectchange", {
      selectedItems: {
        nodes: s,
        edges: f
      },
      select: !0
    });
  },
  createLasso: function() {
    var e = this, t = e.graph.get("delegateGroup").addShape("path", {
      attrs: B({
        path: []
      }, e.delegateStyle),
      capture: !1,
      name: "lasso-shape"
    });
    return this.lasso = t, this.delegate = t, this.points = [], t;
  },
  updateLasso: function(e) {
    var t = this;
    this.lasso.attr({
      path: t.getLassoPath()
    });
  },
  onKeyDown: function(e) {
    var t = e.key;
    t && (t.toLowerCase() === this.trigger.toLowerCase() ? this.keydown = !0 : this.keydown = !1);
  },
  onKeyUp: function() {
    this.lasso && (this.lasso.remove(!0), this.lasso = null, this.points = [], this.dragging = !1), this.keydown = !1;
  }
};
var eM = "click", Sue = ["click", "drag"], tM = void 0, Aue = ["shift", "ctrl", "control", "alt", "meta", void 0];
const Cue = {
  getDefaultCfg: function() {
    return {
      trigger: eM,
      key: tM,
      edgeConfig: {},
      getEdgeConfig: void 0
    };
  },
  getEvents: function() {
    var e = this;
    Sue.indexOf(e.trigger.toLowerCase()) > -1 || (e.trigger = eM, console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")), e.key && Aue.indexOf(e.key.toLowerCase()) === -1 && (e.trigger = tM, console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined"));
    var t;
    return e.trigger === "drag" ? t = {
      "node:dragstart": "onClick",
      "combo:dragstart": "onClick",
      drag: "updateEndPoint",
      "node:drop": "onClick",
      "combo:drop": "onClick",
      dragend: "onDragEnd"
    } : e.trigger === "click" && (t = {
      "node:click": "onClick",
      mousemove: "updateEndPoint",
      "edge:click": "cancelCreating",
      "canvas:click": "cancelCreating",
      "combo:click": "onClick"
    }), e.key && (t.keydown = "onKeyDown", t.keyup = "onKeyUp"), t;
  },
  onDragEnd: function(e) {
    var t = this;
    if (!(t.key && !t.keydown)) {
      var n = e.item;
      (!n || n.getID() === t.source || n.getType() !== "node") && t.cancelCreating({
        item: t.edge,
        x: e.x,
        y: e.y
      });
    }
  },
  // 如果边的起点没有指定，则根据起点创建新边；如果起点已经指定而终点未指定，则指定终点
  onClick: function(e) {
    var t = this;
    if (!(t.key && !t.keydown)) {
      var n = e.item, a = t.graph, i = n.getModel(), o = t.getEdgeConfig;
      if (t.addingEdge && t.edge) {
        if (!t.shouldEnd(e, t))
          return;
        var s = void 0;
        o && Or(o) ? s = o({
          source: t.source,
          target: i.id
        }, t) : s = t.edgeConfig;
        var u = B({
          target: i.id
        }, s);
        if (t.source === i.id && (u.type = "loop"), a.emit("beforecreateedge", {}), a.updateItem(t.edge, u, !1), a.get("enabledStack")) {
          var f = B(B({}, t.edge.getModel()), {
            itemType: "edge"
          }), l = {};
          l.edges = [f], a.pushStack("add", {
            before: {},
            after: l
          });
        }
        a.emit("aftercreateedge", {
          edge: t.edge
        }), t.edge.getKeyShape().set("capture", !0), t.edge = null, t.addingEdge = !1;
      } else {
        if (!t.shouldBegin(e, t))
          return;
        var s = void 0;
        o && Or(o) ? s = o({
          source: i.id,
          target: i.id
        }, t) : s = t.edgeConfig, t.edge = a.addItem("edge", B({
          source: i.id,
          target: i.id
        }, s), !1), t.source = i.id, t.addingEdge = !0, t.edge.getKeyShape().set("capture", !1);
      }
    }
  },
  // 边的起点已经确定，边的末端跟随鼠标移动
  updateEndPoint: function(e) {
    var t = this;
    if (!(t.key && !t.keydown)) {
      t.edge && t.edge.destroyed && t.cancelCreating({
        item: t.edge
      });
      var n = {
        x: e.x,
        y: e.y
      };
      if (!t.graph.findById(t.source)) {
        t.addingEdge = !1;
        return;
      }
      t.addingEdge && t.edge && t.graph.updateItem(t.edge, {
        target: n
      }, !1);
    }
  },
  // 取消增加边，删除该边；或指定终点
  cancelCreating: function(e) {
    var t, n, a = this;
    if (!(a.key && !a.keydown)) {
      var i = a.graph, o = e.item;
      if (a.addingEdge && (a.edge === o || !((n = (t = e.target) === null || t === void 0 ? void 0 : t.isCanvas) === null || n === void 0) && n.call(t))) {
        a.edge && !a.edge.destroyed && i.removeItem(a.edge, !1), a.edge = null, a.addingEdge = !1;
        return;
      }
    }
  },
  onKeyDown: function(e) {
    var t = this, n = e.key;
    n && (n.toLowerCase() === t.key.toLowerCase() ? t.keydown = !0 : t.keydown = !1);
  },
  onKeyUp: function() {
    var e = this;
    e.addingEdge && e.edge && (e.graph.removeItem(e.edge, !1), e.addingEdge = !1, e.edge = null), this.keydown = !1;
  }
};
var rM = "ctrl", Tue = ["shift", "ctrl", "alt", "control"], Iue = "1";
const Oue = {
  getDefaultCfg: function() {
    return {
      trigger: rM,
      combinedKey: Iue,
      functionName: "fitView",
      functionParams: []
    };
  },
  getEvents: function() {
    return Tue.indexOf(this.trigger.toLowerCase()) > -1 || (this.trigger = rM, console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger, "' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))), this.combinedKey === this.trigger && (this.combinedKey = void 0), {
      keyup: "onKeyUp",
      keydown: "onKeyDown"
    };
  },
  onKeyDown: function(e) {
    var t = e.key;
    if (t) {
      var n = this.trigger.toLowerCase(), a = t.toLowerCase();
      this.triggerKeydown || (a === n || a === "control" && n === "ctrl" || a === "ctrl" && n === "control" ? this.triggerKeydown = !0 : this.triggerKeydown = !1);
      var i = this.graph;
      if (!i[this.functionName])
        return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName, "' 不合法，它不是 Graph 的一个函数名")), {};
      if (this.triggerKeydown && !this.combinedKey) {
        this.functionParams && this.functionParams.length ? i[this.functionName].apply(i, this.functionParams) : i[this.functionName]();
        return;
      }
      var o = this.combinedKey.toLowerCase();
      this.triggerKeydown && (a === o || a === "control" && o === "ctrl" || a === "ctrl" && o === "control") && (this.functionParams && this.functionParams.length ? i[this.functionName].apply(i, this.functionParams) : i[this.functionName]());
    }
  },
  onKeyUp: function() {
    this.brush && (this.brush.remove(!0), this.brush = null, this.dragging = !1), this.triggerKeydown = !1;
  }
};
var Due = ["shift", "ctrl", "alt", "control", "meta"];
const Lue = {
  getDefaultCfg: function() {
    return {
      direction: "both",
      enableOptimize: !1,
      zoomKey: "ctrl",
      // scroll-canvas 可滚动的扩展范围，默认为 0，即最多可以滚动一屏的位置
      // 当设置的值大于 0 时，即滚动可以超过一屏
      // 当设置的值小于 0 时，相当于缩小了可滚动范围
      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ
      scalableRange: 0,
      allowDragOnItem: !0
    };
  },
  getEvents: function() {
    return (!this.zoomKey || Due.indexOf(this.zoomKey) === -1) && (this.zoomKey = "ctrl"), {
      wheel: "onWheel"
    };
  },
  onWheel: function(e) {
    var t = this;
    if (this.allowDrag(e)) {
      var n = this.graph, a = Array.isArray(this.zoomKey) ? [].concat(this.zoomKey) : [this.zoomKey];
      a.includes("control") && a.push("ctrl");
      var i = a.some(function(F) {
        return e["".concat(F, "Key")];
      });
      if (i) {
        var o = n.get("canvas"), s = o.getPointByClient(e.clientX, e.clientY), u = n.getZoom();
        e.wheelDelta > 0 ? u = u + u * 0.05 : u = u - u * 0.05, n.zoomTo(u, {
          x: s.x,
          y: s.y
        });
      } else {
        var f = e.deltaX || e.movementX, l = e.deltaY || e.movementY;
        !l && navigator.userAgent.indexOf("Firefox") > -1 && (l = -e.wheelDelta * 125 / 3);
        var c = this.graph.get("width"), h = this.graph.get("height"), d = this.graph.get("canvas").getCanvasBBox(), v = this.scalableRange, p = this.scalableRange;
        v < 1 && v > -1 && (v = c * v, p = h * p);
        var g = d.minX, y = d.maxX, m = d.minY, b = d.maxY;
        f > 0 ? y < -v ? f = 0 : y - f < -v && (f = y + v) : f < 0 && (g > c + v ? f = 0 : g - f > c + v && (f = g - (c + v))), l > 0 ? b < -p ? l = 0 : b - l < -p && (l = b + p) : l < 0 && (m > h + p ? l = 0 : m - l > h + p && (l = m - (h + p))), this.get("direction") === "x" ? l = 0 : this.get("direction") === "y" && (f = 0), n.translate(-f, -l);
      }
      e.preventDefault();
      var E = this.get("enableOptimize");
      if (E) {
        var x = this.get("optimizeZoom"), w = this.get("optimized"), _ = n.getNodes(), M = n.getEdges(), A = _.length, S = M.length;
        if (!w) {
          for (var T = 0; T < A; T++) {
            var C = _[T];
            if (!C.destroyed)
              for (var O = C.get("group").get("children"), L = O.length, R = 0; R < L; R++) {
                var P = O[R];
                !P.destoryed && !P.get("isKeyShape") && (P.set("ori-visibility", P.get("ori-visibility") || P.get("visible")), P.hide());
              }
          }
          for (var z = 0; z < S; z++)
            for (var V = M[z], O = V.get("group").get("children"), L = O.length, R = 0; R < L; R++) {
              var P = O[R];
              P.set("ori-visibility", P.get("ori-visibility") || P.get("visible")), P.hide();
            }
          this.set("optimized", !0);
        }
        clearTimeout(this.get("timeout"));
        var N = setTimeout(function() {
          var F = n.getZoom(), q = t.get("optimized");
          if (q) {
            t.set("optimized", !1);
            for (var te = 0; te < A; te++) {
              var re = _[te], J = re.get("group").get("children"), ye = J.length;
              if (F < x) {
                var Be = re.getKeyShape(), Pe = Be.get("ori-visibility");
                Pe && Be.show();
              } else
                for (var et = 0; et < ye; et++) {
                  var ut = J[et], Pe = ut.get("ori-visibility");
                  !ut.get("visible") && Pe && Pe && ut.show();
                }
            }
            for (var at = 0; at < S; at++) {
              var At = M[at], J = At.get("group").get("children"), ye = J.length;
              if (F < x) {
                var Be = At.getKeyShape(), Pe = Be.get("ori-visibility");
                Pe && Be.show();
              } else
                for (var et = 0; et < ye; et++) {
                  var ut = J[et];
                  if (!ut.get("visible")) {
                    var Pe = ut.get("ori-visibility");
                    Pe && ut.show();
                  }
                }
            }
          }
        }, 100);
        this.set("timeout", N);
      }
    }
  },
  allowDrag: function(e) {
    var t, n, a = e.target, i = a && a.isCanvas && a.isCanvas();
    if (Xf(this.allowDragOnItem) && !this.allowDragOnItem && !i)
      return !1;
    if (yn(this.allowDragOnItem)) {
      var o = this.allowDragOnItem, s = o.node, u = o.edge, f = o.combo, l = (n = (t = e.item) === null || t === void 0 ? void 0 : t.getType) === null || n === void 0 ? void 0 : n.call(t);
      if (!s && l === "node" || !u && l === "edge" || !f && l === "combo")
        return !1;
    }
    return !0;
  }
};
var Nue = {
  "drag-canvas": rue,
  "zoom-canvas": lue,
  "drag-node": nue,
  "activate-relations": aue,
  "brush-select": oue,
  "click-select": uue,
  "lasso-select": Mue,
  tooltip: cue,
  "edge-tooltip": hue,
  "collapse-expand": vue,
  "drag-combo": yue,
  "collapse-expand-combo": bue,
  "create-edge": Cue,
  "shortcuts-call": Oue,
  "scroll-canvas": Lue
};
Se(Nue, function(r, e) {
  IU(e, r);
});
B(B({}, G4), Y$);
const Pue = /* @__PURE__ */ LP({
  __name: "G6",
  props: {
    data: {},
    graphOptions: {},
    resource_path: {}
  },
  setup(r) {
    const e = r, t = NP();
    return PP(async () => {
      if (!t.value)
        return;
      const n = t.value, a = n.clientWidth, i = n.clientHeight, o = new ZD({
        ...e.graphOptions,
        container: n,
        width: a,
        height: i
      });
      o.data(e.data), o.render();
    }), (n, a) => (kP(), RP("div", {
      ref_key: "containerRef",
      ref: t,
      class: "nicegui-g6-container"
    }, null, 512));
  }
}), kue = (r, e) => {
  const t = r.__vccOpts || r;
  for (const [n, a] of e)
    t[n] = a;
  return t;
}, Bue = /* @__PURE__ */ kue(Pue, [["__scopeId", "data-v-92a3571a"]]);
export {
  Bue as default
};